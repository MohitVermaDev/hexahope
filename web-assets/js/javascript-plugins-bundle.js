/*!
 * Simple jQuery Equal Heights
 *
 * Copyright (c) 2013 Matt Banks
 * Dual licensed under the MIT and GPL licenses.
 * Uses the same license as jQuery, see:
 * http://docs.jquery.com/License
 *
 * @version 1.5.1
 */
!function(a){a.fn.equalHeights=function(){var b=0,c=a(this);return c.each(function(){var c=a(this).innerHeight();c>b&&(b=c)}),c.css("height",b)},a("[data-equal]").each(function(){var b=a(this),c=b.data("equal");b.find(c).equalHeights()})}(jQuery);
/*!
 * imagesLoaded PACKAGED v4.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */

!function(e,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()}("undefined"!=typeof window?window:this,function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var i=this._events=this._events||{},n=i[e]=i[e]||[];return n.indexOf(t)==-1&&n.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var i=this._onceEvents=this._onceEvents||{},n=i[e]=i[e]||{};return n[t]=!0,this}},t.off=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){var n=i.indexOf(t);return n!=-1&&i.splice(n,1),this}},t.emitEvent=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){i=i.slice(0),t=t||[];for(var n=this._onceEvents&&this._onceEvents[e],o=0;o<i.length;o++){var r=i[o],s=n&&n[r];s&&(this.off(e,r),delete n[r]),r.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e}),function(e,t){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(i){return t(e,i)}):"object"==typeof module&&module.exports?module.exports=t(e,require("ev-emitter")):e.imagesLoaded=t(e,e.EvEmitter)}("undefined"!=typeof window?window:this,function(e,t){function i(e,t){for(var i in t)e[i]=t[i];return e}function n(e){if(Array.isArray(e))return e;var t="object"==typeof e&&"number"==typeof e.length;return t?d.call(e):[e]}function o(e,t,r){if(!(this instanceof o))return new o(e,t,r);var s=e;return"string"==typeof e&&(s=document.querySelectorAll(e)),s?(this.elements=n(s),this.options=i({},this.options),"function"==typeof t?r=t:i(this.options,t),r&&this.on("always",r),this.getImages(),h&&(this.jqDeferred=new h.Deferred),void setTimeout(this.check.bind(this))):void a.error("Bad element for imagesLoaded "+(s||e))}function r(e){this.img=e}function s(e,t){this.url=e,this.element=t,this.img=new Image}var h=e.jQuery,a=e.console,d=Array.prototype.slice;o.prototype=Object.create(t.prototype),o.prototype.options={},o.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},o.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),this.options.background===!0&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&u[t]){for(var i=e.querySelectorAll("img"),n=0;n<i.length;n++){var o=i[n];this.addImage(o)}if("string"==typeof this.options.background){var r=e.querySelectorAll(this.options.background);for(n=0;n<r.length;n++){var s=r[n];this.addElementBackgroundImages(s)}}}};var u={1:!0,9:!0,11:!0};return o.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(t.backgroundImage);null!==n;){var o=n&&n[2];o&&this.addBackground(o,e),n=i.exec(t.backgroundImage)}},o.prototype.addImage=function(e){var t=new r(e);this.images.push(t)},o.prototype.addBackground=function(e,t){var i=new s(e,t);this.images.push(i)},o.prototype.check=function(){function e(e,i,n){setTimeout(function(){t.progress(e,i,n)})}var t=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(t){t.once("progress",e),t.check()}):void this.complete()},o.prototype.progress=function(e,t,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&a&&a.log("progress: "+i,e,t)},o.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred){var t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},r.prototype=Object.create(t.prototype),r.prototype.check=function(){var e=this.getIsImageComplete();return e?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},r.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},r.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},r.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},r.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},r.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},r.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype=Object.create(r.prototype),s.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var e=this.getIsImageComplete();e&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},s.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},o.makeJQueryPlugin=function(t){t=t||e.jQuery,t&&(h=t,h.fn.imagesLoaded=function(e,t){var i=new o(this,e,t);return i.jqDeferred.promise(h(this))})},o.makeJQueryPlugin(),o});
// Generated by CoffeeScript 1.9.3
(function(){var e;e=function(){function e(e,t){var n,r;this.options={target:"instafeed",get:"popular",resolution:"thumbnail",sortBy:"none",links:!0,mock:!1,useHttp:!1};if(typeof e=="object")for(n in e)r=e[n],this.options[n]=r;this.context=t!=null?t:this,this.unique=this._genKey()}return e.prototype.hasNext=function(){return typeof this.context.nextUrl=="string"&&this.context.nextUrl.length>0},e.prototype.next=function(){return this.hasNext()?this.run(this.context.nextUrl):!1},e.prototype.run=function(t){var n,r,i;if(typeof this.options.clientId!="string"&&typeof this.options.accessToken!="string")throw new Error("Missing clientId or accessToken.");if(typeof this.options.accessToken!="string"&&typeof this.options.clientId!="string")throw new Error("Missing clientId or accessToken.");return this.options.before!=null&&typeof this.options.before=="function"&&this.options.before.call(this),typeof document!="undefined"&&document!==null&&(i=document.createElement("script"),i.id="instafeed-fetcher",i.src=t||this._buildUrl(),n=document.getElementsByTagName("head"),n[0].appendChild(i),r="instafeedCache"+this.unique,window[r]=new e(this.options,this),window[r].unique=this.unique),!0},e.prototype.parse=function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D;if(typeof e!="object"){if(this.options.error!=null&&typeof this.options.error=="function")return this.options.error.call(this,"Invalid JSON data"),!1;throw new Error("Invalid JSON response")}if(e.meta.code!==200){if(this.options.error!=null&&typeof this.options.error=="function")return this.options.error.call(this,e.meta.error_message),!1;throw new Error("Error from Instagram: "+e.meta.error_message)}if(e.data.length===0){if(this.options.error!=null&&typeof this.options.error=="function")return this.options.error.call(this,"No images were returned from Instagram"),!1;throw new Error("No images were returned from Instagram")}this.options.success!=null&&typeof this.options.success=="function"&&this.options.success.call(this,e),this.context.nextUrl="",e.pagination!=null&&(this.context.nextUrl=e.pagination.next_url);if(this.options.sortBy!=="none"){this.options.sortBy==="random"?M=["","random"]:M=this.options.sortBy.split("-"),O=M[0]==="least"?!0:!1;switch(M[1]){case"random":e.data.sort(function(){return.5-Math.random()});break;case"recent":e.data=this._sortBy(e.data,"created_time",O);break;case"liked":e.data=this._sortBy(e.data,"likes.count",O);break;case"commented":e.data=this._sortBy(e.data,"comments.count",O);break;default:throw new Error("Invalid option for sortBy: '"+this.options.sortBy+"'.")}}if(typeof document!="undefined"&&document!==null&&this.options.mock===!1){m=e.data,A=parseInt(this.options.limit,10),this.options.limit!=null&&m.length>A&&(m=m.slice(0,A)),u=document.createDocumentFragment(),this.options.filter!=null&&typeof this.options.filter=="function"&&(m=this._filter(m,this.options.filter));if(this.options.template!=null&&typeof this.options.template=="string"){f="",d="",w="",D=document.createElement("div");for(c=0,N=m.length;c<N;c++){h=m[c],p=h.images[this.options.resolution];if(typeof p!="object")throw o="No image found for resolution: "+this.options.resolution+".",new Error(o);E=p.width,y=p.height,b="square",E>y&&(b="landscape"),E<y&&(b="portrait"),v=p.url,l=window.location.protocol.indexOf("http")>=0,l&&!this.options.useHttp&&(v=v.replace(/https?:\/\//,"//")),d=this._makeTemplate(this.options.template,{model:h,id:h.id,link:h.link,type:h.type,image:v,width:E,height:y,orientation:b,caption:this._getObjectProperty(h,"caption.text"),likes:h.likes.count,comments:h.comments.count,location:this._getObjectProperty(h,"location.name")}),f+=d}D.innerHTML=f,i=[],r=0,n=D.childNodes.length;while(r<n)i.push(D.childNodes[r]),r+=1;for(x=0,C=i.length;x<C;x++)L=i[x],u.appendChild(L)}else for(T=0,k=m.length;T<k;T++){h=m[T],g=document.createElement("img"),p=h.images[this.options.resolution];if(typeof p!="object")throw o="No image found for resolution: "+this.options.resolution+".",new Error(o);v=p.url,l=window.location.protocol.indexOf("http")>=0,l&&!this.options.useHttp&&(v=v.replace(/https?:\/\//,"//")),g.src=v,this.options.links===!0?(t=document.createElement("a"),t.href=h.link,t.appendChild(g),u.appendChild(t)):u.appendChild(g)}_=this.options.target,typeof _=="string"&&(_=document.getElementById(_));if(_==null)throw o='No element with id="'+this.options.target+'" on page.',new Error(o);_.appendChild(u),a=document.getElementsByTagName("head")[0],a.removeChild(document.getElementById("instafeed-fetcher")),S="instafeedCache"+this.unique,window[S]=void 0;try{delete window[S]}catch(P){s=P}}return this.options.after!=null&&typeof this.options.after=="function"&&this.options.after.call(this),!0},e.prototype._buildUrl=function(){var e,t,n;e="https://api.instagram.com/v1";switch(this.options.get){case"popular":t="media/popular";break;case"tagged":if(!this.options.tagName)throw new Error("No tag name specified. Use the 'tagName' option.");t="tags/"+this.options.tagName+"/media/recent";break;case"location":if(!this.options.locationId)throw new Error("No location specified. Use the 'locationId' option.");t="locations/"+this.options.locationId+"/media/recent";break;case"user":if(!this.options.userId)throw new Error("No user specified. Use the 'userId' option.");t="users/"+this.options.userId+"/media/recent";break;default:throw new Error("Invalid option for get: '"+this.options.get+"'.")}return n=e+"/"+t,this.options.accessToken!=null?n+="?access_token="+this.options.accessToken:n+="?client_id="+this.options.clientId,this.options.limit!=null&&(n+="&count="+this.options.limit),n+="&callback=instafeedCache"+this.unique+".parse",n},e.prototype._genKey=function(){var e;return e=function(){return((1+Math.random())*65536|0).toString(16).substring(1)},""+e()+e()+e()+e()},e.prototype._makeTemplate=function(e,t){var n,r,i,s,o;r=/(?:\{{2})([\w\[\]\.]+)(?:\}{2})/,n=e;while(r.test(n))s=n.match(r)[1],o=(i=this._getObjectProperty(t,s))!=null?i:"",n=n.replace(r,function(){return""+o});return n},e.prototype._getObjectProperty=function(e,t){var n,r;t=t.replace(/\[(\w+)\]/g,".$1"),r=t.split(".");while(r.length){n=r.shift();if(!(e!=null&&n in e))return null;e=e[n]}return e},e.prototype._sortBy=function(e,t,n){var r;return r=function(e,r){var i,s;return i=this._getObjectProperty(e,t),s=this._getObjectProperty(r,t),n?i>s?1:-1:i<s?1:-1},e.sort(r.bind(this)),e},e.prototype._filter=function(e,t){var n,r,i,s,o;n=[],r=function(e){if(t(e))return n.push(e)};for(i=0,o=e.length;i<o;i++)s=e[i],r(s);return n},e}(),function(e,t){return typeof define=="function"&&define.amd?define([],t):typeof module=="object"&&module.exports?module.exports=t():e.Instafeed=t()}(this,function(){return e})}).call(this);
/*!
 * Isotope PACKAGED v3.0.6
 *
 * Licensed GPLv3 for open source use
 * or Isotope Commercial License for commercial use
 *
 * https://isotope.metafizzy.co
 * Copyright 2010-2018 Metafizzy
 */

!function(t,e){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("jquery")):t.jQueryBridget=e(t,t.jQuery)}(window,function(t,e){"use strict";function i(i,s,a){function u(t,e,o){var n,s="$()."+i+'("'+e+'")';return t.each(function(t,u){var h=a.data(u,i);if(!h)return void r(i+" not initialized. Cannot call methods, i.e. "+s);var d=h[e];if(!d||"_"==e.charAt(0))return void r(s+" is not a valid method");var l=d.apply(h,o);n=void 0===n?l:n}),void 0!==n?n:t}function h(t,e){t.each(function(t,o){var n=a.data(o,i);n?(n.option(e),n._init()):(n=new s(o,e),a.data(o,i,n))})}a=a||e||t.jQuery,a&&(s.prototype.option||(s.prototype.option=function(t){a.isPlainObject(t)&&(this.options=a.extend(!0,this.options,t))}),a.fn[i]=function(t){if("string"==typeof t){var e=n.call(arguments,1);return u(this,t,e)}return h(this,t),this},o(a))}function o(t){!t||t&&t.bridget||(t.bridget=i)}var n=Array.prototype.slice,s=t.console,r="undefined"==typeof s?function(){}:function(t){s.error(t)};return o(e||t.jQuery),i}),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},o=i[t]=i[t]||[];return o.indexOf(e)==-1&&o.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{},o=i[t]=i[t]||{};return o[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var o=i.indexOf(e);return o!=-1&&i.splice(o,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){i=i.slice(0),e=e||[];for(var o=this._onceEvents&&this._onceEvents[t],n=0;n<i.length;n++){var s=i[n],r=o&&o[s];r&&(this.off(t,s),delete o[s]),s.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t}),function(t,e){"function"==typeof define&&define.amd?define("get-size/get-size",e):"object"==typeof module&&module.exports?module.exports=e():t.getSize=e()}(window,function(){"use strict";function t(t){var e=parseFloat(t),i=t.indexOf("%")==-1&&!isNaN(e);return i&&e}function e(){}function i(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;e<h;e++){var i=u[e];t[i]=0}return t}function o(t){var e=getComputedStyle(t);return e||a("Style returned "+e+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),e}function n(){if(!d){d=!0;var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style.boxSizing="border-box";var i=document.body||document.documentElement;i.appendChild(e);var n=o(e);r=200==Math.round(t(n.width)),s.isBoxSizeOuter=r,i.removeChild(e)}}function s(e){if(n(),"string"==typeof e&&(e=document.querySelector(e)),e&&"object"==typeof e&&e.nodeType){var s=o(e);if("none"==s.display)return i();var a={};a.width=e.offsetWidth,a.height=e.offsetHeight;for(var d=a.isBorderBox="border-box"==s.boxSizing,l=0;l<h;l++){var f=u[l],c=s[f],m=parseFloat(c);a[f]=isNaN(m)?0:m}var p=a.paddingLeft+a.paddingRight,y=a.paddingTop+a.paddingBottom,g=a.marginLeft+a.marginRight,v=a.marginTop+a.marginBottom,_=a.borderLeftWidth+a.borderRightWidth,z=a.borderTopWidth+a.borderBottomWidth,I=d&&r,x=t(s.width);x!==!1&&(a.width=x+(I?0:p+_));var S=t(s.height);return S!==!1&&(a.height=S+(I?0:y+z)),a.innerWidth=a.width-(p+_),a.innerHeight=a.height-(y+z),a.outerWidth=a.width+g,a.outerHeight=a.height+v,a}}var r,a="undefined"==typeof console?e:function(t){console.error(t)},u=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],h=u.length,d=!1;return s}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",e):"object"==typeof module&&module.exports?module.exports=e():t.matchesSelector=e()}(window,function(){"use strict";var t=function(){var t=window.Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0;i<e.length;i++){var o=e[i],n=o+"MatchesSelector";if(t[n])return n}}();return function(e,i){return e[t](i)}}),function(t,e){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("desandro-matches-selector")):t.fizzyUIUtils=e(t,t.matchesSelector)}(window,function(t,e){var i={};i.extend=function(t,e){for(var i in e)t[i]=e[i];return t},i.modulo=function(t,e){return(t%e+e)%e};var o=Array.prototype.slice;i.makeArray=function(t){if(Array.isArray(t))return t;if(null===t||void 0===t)return[];var e="object"==typeof t&&"number"==typeof t.length;return e?o.call(t):[t]},i.removeFrom=function(t,e){var i=t.indexOf(e);i!=-1&&t.splice(i,1)},i.getParent=function(t,i){for(;t.parentNode&&t!=document.body;)if(t=t.parentNode,e(t,i))return t},i.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},i.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},i.filterFindElements=function(t,o){t=i.makeArray(t);var n=[];return t.forEach(function(t){if(t instanceof HTMLElement){if(!o)return void n.push(t);e(t,o)&&n.push(t);for(var i=t.querySelectorAll(o),s=0;s<i.length;s++)n.push(i[s])}}),n},i.debounceMethod=function(t,e,i){i=i||100;var o=t.prototype[e],n=e+"Timeout";t.prototype[e]=function(){var t=this[n];clearTimeout(t);var e=arguments,s=this;this[n]=setTimeout(function(){o.apply(s,e),delete s[n]},i)}},i.docReady=function(t){var e=document.readyState;"complete"==e||"interactive"==e?setTimeout(t):document.addEventListener("DOMContentLoaded",t)},i.toDashed=function(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()};var n=t.console;return i.htmlInit=function(e,o){i.docReady(function(){var s=i.toDashed(o),r="data-"+s,a=document.querySelectorAll("["+r+"]"),u=document.querySelectorAll(".js-"+s),h=i.makeArray(a).concat(i.makeArray(u)),d=r+"-options",l=t.jQuery;h.forEach(function(t){var i,s=t.getAttribute(r)||t.getAttribute(d);try{i=s&&JSON.parse(s)}catch(a){return void(n&&n.error("Error parsing "+r+" on "+t.className+": "+a))}var u=new e(t,i);l&&l.data(t,o,u)})})},i}),function(t,e){"function"==typeof define&&define.amd?define("outlayer/item",["ev-emitter/ev-emitter","get-size/get-size"],e):"object"==typeof module&&module.exports?module.exports=e(require("ev-emitter"),require("get-size")):(t.Outlayer={},t.Outlayer.Item=e(t.EvEmitter,t.getSize))}(window,function(t,e){"use strict";function i(t){for(var e in t)return!1;return e=null,!0}function o(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}function n(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}var s=document.documentElement.style,r="string"==typeof s.transition?"transition":"WebkitTransition",a="string"==typeof s.transform?"transform":"WebkitTransform",u={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[r],h={transform:a,transition:r,transitionDuration:r+"Duration",transitionProperty:r+"Property",transitionDelay:r+"Delay"},d=o.prototype=Object.create(t.prototype);d.constructor=o,d._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},d.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},d.getSize=function(){this.size=e(this.element)},d.css=function(t){var e=this.element.style;for(var i in t){var o=h[i]||i;e[o]=t[i]}},d.getPosition=function(){var t=getComputedStyle(this.element),e=this.layout._getOption("originLeft"),i=this.layout._getOption("originTop"),o=t[e?"left":"right"],n=t[i?"top":"bottom"],s=parseFloat(o),r=parseFloat(n),a=this.layout.size;o.indexOf("%")!=-1&&(s=s/100*a.width),n.indexOf("%")!=-1&&(r=r/100*a.height),s=isNaN(s)?0:s,r=isNaN(r)?0:r,s-=e?a.paddingLeft:a.paddingRight,r-=i?a.paddingTop:a.paddingBottom,this.position.x=s,this.position.y=r},d.layoutPosition=function(){var t=this.layout.size,e={},i=this.layout._getOption("originLeft"),o=this.layout._getOption("originTop"),n=i?"paddingLeft":"paddingRight",s=i?"left":"right",r=i?"right":"left",a=this.position.x+t[n];e[s]=this.getXValue(a),e[r]="";var u=o?"paddingTop":"paddingBottom",h=o?"top":"bottom",d=o?"bottom":"top",l=this.position.y+t[u];e[h]=this.getYValue(l),e[d]="",this.css(e),this.emitEvent("layout",[this])},d.getXValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!e?t/this.layout.size.width*100+"%":t+"px"},d.getYValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&e?t/this.layout.size.height*100+"%":t+"px"},d._transitionTo=function(t,e){this.getPosition();var i=this.position.x,o=this.position.y,n=t==this.position.x&&e==this.position.y;if(this.setPosition(t,e),n&&!this.isTransitioning)return void this.layoutPosition();var s=t-i,r=e-o,a={};a.transform=this.getTranslate(s,r),this.transition({to:a,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},d.getTranslate=function(t,e){var i=this.layout._getOption("originLeft"),o=this.layout._getOption("originTop");return t=i?t:-t,e=o?e:-e,"translate3d("+t+"px, "+e+"px, 0)"},d.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},d.moveTo=d._transitionTo,d.setPosition=function(t,e){this.position.x=parseFloat(t),this.position.y=parseFloat(e)},d._nonTransition=function(t){this.css(t.to),t.isCleaning&&this._removeStyles(t.to);for(var e in t.onTransitionEnd)t.onTransitionEnd[e].call(this)},d.transition=function(t){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(t);var e=this._transn;for(var i in t.onTransitionEnd)e.onEnd[i]=t.onTransitionEnd[i];for(i in t.to)e.ingProperties[i]=!0,t.isCleaning&&(e.clean[i]=!0);if(t.from){this.css(t.from);var o=this.element.offsetHeight;o=null}this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0};var l="opacity,"+n(a);d.enableTransition=function(){if(!this.isTransitioning){var t=this.layout.options.transitionDuration;t="number"==typeof t?t+"ms":t,this.css({transitionProperty:l,transitionDuration:t,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(u,this,!1)}},d.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},d.onotransitionend=function(t){this.ontransitionend(t)};var f={"-webkit-transform":"transform"};d.ontransitionend=function(t){if(t.target===this.element){var e=this._transn,o=f[t.propertyName]||t.propertyName;if(delete e.ingProperties[o],i(e.ingProperties)&&this.disableTransition(),o in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[o]),o in e.onEnd){var n=e.onEnd[o];n.call(this),delete e.onEnd[o]}this.emitEvent("transitionEnd",[this])}},d.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(u,this,!1),this.isTransitioning=!1},d._removeStyles=function(t){var e={};for(var i in t)e[i]="";this.css(e)};var c={transitionProperty:"",transitionDuration:"",transitionDelay:""};return d.removeTransitionStyles=function(){this.css(c)},d.stagger=function(t){t=isNaN(t)?0:t,this.staggerDelay=t+"ms"},d.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},d.remove=function(){return r&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",function(){this.removeElem()}),void this.hide()):void this.removeElem()},d.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options,e={},i=this.getHideRevealTransitionEndProperty("visibleStyle");e[i]=this.onRevealTransitionEnd,this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0,onTransitionEnd:e})},d.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},d.getHideRevealTransitionEndProperty=function(t){var e=this.layout.options[t];if(e.opacity)return"opacity";for(var i in e)return i},d.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options,e={},i=this.getHideRevealTransitionEndProperty("hiddenStyle");e[i]=this.onHideTransitionEnd,this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:e})},d.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},d.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},o}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("outlayer/outlayer",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(i,o,n,s){return e(t,i,o,n,s)}):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):t.Outlayer=e(t,t.EvEmitter,t.getSize,t.fizzyUIUtils,t.Outlayer.Item)}(window,function(t,e,i,o,n){"use strict";function s(t,e){var i=o.getQueryElement(t);if(!i)return void(u&&u.error("Bad element for "+this.constructor.namespace+": "+(i||t)));this.element=i,h&&(this.$element=h(this.element)),this.options=o.extend({},this.constructor.defaults),this.option(e);var n=++l;this.element.outlayerGUID=n,f[n]=this,this._create();var s=this._getOption("initLayout");s&&this.layout()}function r(t){function e(){t.apply(this,arguments)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e}function a(t){if("number"==typeof t)return t;var e=t.match(/(^\d*\.?\d*)(\w*)/),i=e&&e[1],o=e&&e[2];if(!i.length)return 0;i=parseFloat(i);var n=m[o]||1;return i*n}var u=t.console,h=t.jQuery,d=function(){},l=0,f={};s.namespace="outlayer",s.Item=n,s.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var c=s.prototype;o.extend(c,e.prototype),c.option=function(t){o.extend(this.options,t)},c._getOption=function(t){var e=this.constructor.compatOptions[t];return e&&void 0!==this.options[e]?this.options[e]:this.options[t]},s.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},c._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),o.extend(this.element.style,this.options.containerStyle);var t=this._getOption("resize");t&&this.bindResize()},c.reloadItems=function(){this.items=this._itemize(this.element.children)},c._itemize=function(t){for(var e=this._filterFindItemElements(t),i=this.constructor.Item,o=[],n=0;n<e.length;n++){var s=e[n],r=new i(s,this);o.push(r)}return o},c._filterFindItemElements=function(t){return o.filterFindElements(t,this.options.itemSelector)},c.getItemElements=function(){return this.items.map(function(t){return t.element})},c.layout=function(){this._resetLayout(),this._manageStamps();var t=this._getOption("layoutInstant"),e=void 0!==t?t:!this._isLayoutInited;this.layoutItems(this.items,e),this._isLayoutInited=!0},c._init=c.layout,c._resetLayout=function(){this.getSize()},c.getSize=function(){this.size=i(this.element)},c._getMeasurement=function(t,e){var o,n=this.options[t];n?("string"==typeof n?o=this.element.querySelector(n):n instanceof HTMLElement&&(o=n),this[t]=o?i(o)[e]:n):this[t]=0},c.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},c._getItemsForLayout=function(t){return t.filter(function(t){return!t.isIgnored})},c._layoutItems=function(t,e){if(this._emitCompleteOnItems("layout",t),t&&t.length){var i=[];t.forEach(function(t){var o=this._getItemLayoutPosition(t);o.item=t,o.isInstant=e||t.isLayoutInstant,i.push(o)},this),this._processLayoutQueue(i)}},c._getItemLayoutPosition=function(){return{x:0,y:0}},c._processLayoutQueue=function(t){this.updateStagger(),t.forEach(function(t,e){this._positionItem(t.item,t.x,t.y,t.isInstant,e)},this)},c.updateStagger=function(){var t=this.options.stagger;return null===t||void 0===t?void(this.stagger=0):(this.stagger=a(t),this.stagger)},c._positionItem=function(t,e,i,o,n){o?t.goTo(e,i):(t.stagger(n*this.stagger),t.moveTo(e,i))},c._postLayout=function(){this.resizeContainer()},c.resizeContainer=function(){var t=this._getOption("resizeContainer");if(t){var e=this._getContainerSize();e&&(this._setContainerMeasure(e.width,!0),this._setContainerMeasure(e.height,!1))}},c._getContainerSize=d,c._setContainerMeasure=function(t,e){if(void 0!==t){var i=this.size;i.isBorderBox&&(t+=e?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px"}},c._emitCompleteOnItems=function(t,e){function i(){n.dispatchEvent(t+"Complete",null,[e])}function o(){r++,r==s&&i()}var n=this,s=e.length;if(!e||!s)return void i();var r=0;e.forEach(function(e){e.once(t,o)})},c.dispatchEvent=function(t,e,i){var o=e?[e].concat(i):i;if(this.emitEvent(t,o),h)if(this.$element=this.$element||h(this.element),e){var n=h.Event(e);n.type=t,this.$element.trigger(n,i)}else this.$element.trigger(t,i)},c.ignore=function(t){var e=this.getItem(t);e&&(e.isIgnored=!0)},c.unignore=function(t){var e=this.getItem(t);e&&delete e.isIgnored},c.stamp=function(t){t=this._find(t),t&&(this.stamps=this.stamps.concat(t),t.forEach(this.ignore,this))},c.unstamp=function(t){t=this._find(t),t&&t.forEach(function(t){o.removeFrom(this.stamps,t),this.unignore(t)},this)},c._find=function(t){if(t)return"string"==typeof t&&(t=this.element.querySelectorAll(t)),t=o.makeArray(t)},c._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},c._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},c._manageStamp=d,c._getElementOffset=function(t){var e=t.getBoundingClientRect(),o=this._boundingRect,n=i(t),s={left:e.left-o.left-n.marginLeft,top:e.top-o.top-n.marginTop,right:o.right-e.right-n.marginRight,bottom:o.bottom-e.bottom-n.marginBottom};return s},c.handleEvent=o.handleEvent,c.bindResize=function(){t.addEventListener("resize",this),this.isResizeBound=!0},c.unbindResize=function(){t.removeEventListener("resize",this),this.isResizeBound=!1},c.onresize=function(){this.resize()},o.debounceMethod(s,"onresize",100),c.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},c.needsResizeLayout=function(){var t=i(this.element),e=this.size&&t;return e&&t.innerWidth!==this.size.innerWidth},c.addItems=function(t){var e=this._itemize(t);return e.length&&(this.items=this.items.concat(e)),e},c.appended=function(t){var e=this.addItems(t);e.length&&(this.layoutItems(e,!0),this.reveal(e))},c.prepended=function(t){var e=this._itemize(t);if(e.length){var i=this.items.slice(0);this.items=e.concat(i),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(i)}},c.reveal=function(t){if(this._emitCompleteOnItems("reveal",t),t&&t.length){var e=this.updateStagger();t.forEach(function(t,i){t.stagger(i*e),t.reveal()})}},c.hide=function(t){if(this._emitCompleteOnItems("hide",t),t&&t.length){var e=this.updateStagger();t.forEach(function(t,i){t.stagger(i*e),t.hide()})}},c.revealItemElements=function(t){var e=this.getItems(t);this.reveal(e)},c.hideItemElements=function(t){var e=this.getItems(t);this.hide(e)},c.getItem=function(t){for(var e=0;e<this.items.length;e++){var i=this.items[e];if(i.element==t)return i}},c.getItems=function(t){t=o.makeArray(t);var e=[];return t.forEach(function(t){var i=this.getItem(t);i&&e.push(i)},this),e},c.remove=function(t){var e=this.getItems(t);this._emitCompleteOnItems("remove",e),e&&e.length&&e.forEach(function(t){t.remove(),o.removeFrom(this.items,t)},this)},c.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="",this.items.forEach(function(t){t.destroy()}),this.unbindResize();var e=this.element.outlayerGUID;delete f[e],delete this.element.outlayerGUID,h&&h.removeData(this.element,this.constructor.namespace)},s.data=function(t){t=o.getQueryElement(t);var e=t&&t.outlayerGUID;return e&&f[e]},s.create=function(t,e){var i=r(s);return i.defaults=o.extend({},s.defaults),o.extend(i.defaults,e),i.compatOptions=o.extend({},s.compatOptions),i.namespace=t,i.data=s.data,i.Item=r(n),o.htmlInit(i,t),h&&h.bridget&&h.bridget(t,i),i};var m={ms:1,s:1e3};return s.Item=n,s}),function(t,e){"function"==typeof define&&define.amd?define("isotope-layout/js/item",["outlayer/outlayer"],e):"object"==typeof module&&module.exports?module.exports=e(require("outlayer")):(t.Isotope=t.Isotope||{},t.Isotope.Item=e(t.Outlayer))}(window,function(t){"use strict";function e(){t.Item.apply(this,arguments)}var i=e.prototype=Object.create(t.Item.prototype),o=i._create;i._create=function(){this.id=this.layout.itemGUID++,o.call(this),this.sortData={}},i.updateSortData=function(){if(!this.isIgnored){this.sortData.id=this.id,this.sortData["original-order"]=this.id,this.sortData.random=Math.random();var t=this.layout.options.getSortData,e=this.layout._sorters;for(var i in t){var o=e[i];this.sortData[i]=o(this.element,this)}}};var n=i.destroy;return i.destroy=function(){n.apply(this,arguments),this.css({display:""})},e}),function(t,e){"function"==typeof define&&define.amd?define("isotope-layout/js/layout-mode",["get-size/get-size","outlayer/outlayer"],e):"object"==typeof module&&module.exports?module.exports=e(require("get-size"),require("outlayer")):(t.Isotope=t.Isotope||{},t.Isotope.LayoutMode=e(t.getSize,t.Outlayer))}(window,function(t,e){"use strict";function i(t){this.isotope=t,t&&(this.options=t.options[this.namespace],this.element=t.element,this.items=t.filteredItems,this.size=t.size)}var o=i.prototype,n=["_resetLayout","_getItemLayoutPosition","_manageStamp","_getContainerSize","_getElementOffset","needsResizeLayout","_getOption"];return n.forEach(function(t){o[t]=function(){return e.prototype[t].apply(this.isotope,arguments)}}),o.needsVerticalResizeLayout=function(){var e=t(this.isotope.element),i=this.isotope.size&&e;return i&&e.innerHeight!=this.isotope.size.innerHeight},o._getMeasurement=function(){this.isotope._getMeasurement.apply(this,arguments)},o.getColumnWidth=function(){this.getSegmentSize("column","Width")},o.getRowHeight=function(){this.getSegmentSize("row","Height")},o.getSegmentSize=function(t,e){var i=t+e,o="outer"+e;if(this._getMeasurement(i,o),!this[i]){var n=this.getFirstItemSize();this[i]=n&&n[o]||this.isotope.size["inner"+e]}},o.getFirstItemSize=function(){var e=this.isotope.filteredItems[0];return e&&e.element&&t(e.element)},o.layout=function(){this.isotope.layout.apply(this.isotope,arguments)},o.getSize=function(){this.isotope.getSize(),this.size=this.isotope.size},i.modes={},i.create=function(t,e){function n(){i.apply(this,arguments)}return n.prototype=Object.create(o),n.prototype.constructor=n,e&&(n.options=e),n.prototype.namespace=t,i.modes[t]=n,n},i}),function(t,e){"function"==typeof define&&define.amd?define("masonry-layout/masonry",["outlayer/outlayer","get-size/get-size"],e):"object"==typeof module&&module.exports?module.exports=e(require("outlayer"),require("get-size")):t.Masonry=e(t.Outlayer,t.getSize)}(window,function(t,e){var i=t.create("masonry");i.compatOptions.fitWidth="isFitWidth";var o=i.prototype;return o._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var t=0;t<this.cols;t++)this.colYs.push(0);this.maxY=0,this.horizontalColIndex=0},o.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var t=this.items[0],i=t&&t.element;this.columnWidth=i&&e(i).outerWidth||this.containerWidth}var o=this.columnWidth+=this.gutter,n=this.containerWidth+this.gutter,s=n/o,r=o-n%o,a=r&&r<1?"round":"floor";s=Math[a](s),this.cols=Math.max(s,1)},o.getContainerWidth=function(){var t=this._getOption("fitWidth"),i=t?this.element.parentNode:this.element,o=e(i);this.containerWidth=o&&o.innerWidth},o._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth%this.columnWidth,i=e&&e<1?"round":"ceil",o=Math[i](t.size.outerWidth/this.columnWidth);o=Math.min(o,this.cols);for(var n=this.options.horizontalOrder?"_getHorizontalColPosition":"_getTopColPosition",s=this[n](o,t),r={x:this.columnWidth*s.col,y:s.y},a=s.y+t.size.outerHeight,u=o+s.col,h=s.col;h<u;h++)this.colYs[h]=a;return r},o._getTopColPosition=function(t){var e=this._getTopColGroup(t),i=Math.min.apply(Math,e);return{col:e.indexOf(i),y:i}},o._getTopColGroup=function(t){if(t<2)return this.colYs;for(var e=[],i=this.cols+1-t,o=0;o<i;o++)e[o]=this._getColGroupY(o,t);return e},o._getColGroupY=function(t,e){if(e<2)return this.colYs[t];var i=this.colYs.slice(t,t+e);return Math.max.apply(Math,i)},o._getHorizontalColPosition=function(t,e){var i=this.horizontalColIndex%this.cols,o=t>1&&i+t>this.cols;i=o?0:i;var n=e.size.outerWidth&&e.size.outerHeight;return this.horizontalColIndex=n?i+t:this.horizontalColIndex,{col:i,y:this._getColGroupY(i,t)}},o._manageStamp=function(t){var i=e(t),o=this._getElementOffset(t),n=this._getOption("originLeft"),s=n?o.left:o.right,r=s+i.outerWidth,a=Math.floor(s/this.columnWidth);a=Math.max(0,a);var u=Math.floor(r/this.columnWidth);u-=r%this.columnWidth?0:1,u=Math.min(this.cols-1,u);for(var h=this._getOption("originTop"),d=(h?o.top:o.bottom)+i.outerHeight,l=a;l<=u;l++)this.colYs[l]=Math.max(d,this.colYs[l])},o._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this._getOption("fitWidth")&&(t.width=this._getContainerFitWidth()),t},o._getContainerFitWidth=function(){for(var t=0,e=this.cols;--e&&0===this.colYs[e];)t++;return(this.cols-t)*this.columnWidth-this.gutter},o.needsResizeLayout=function(){var t=this.containerWidth;return this.getContainerWidth(),t!=this.containerWidth},i}),function(t,e){"function"==typeof define&&define.amd?define("isotope-layout/js/layout-modes/masonry",["../layout-mode","masonry-layout/masonry"],e):"object"==typeof module&&module.exports?module.exports=e(require("../layout-mode"),require("masonry-layout")):e(t.Isotope.LayoutMode,t.Masonry)}(window,function(t,e){"use strict";var i=t.create("masonry"),o=i.prototype,n={_getElementOffset:!0,layout:!0,_getMeasurement:!0};for(var s in e.prototype)n[s]||(o[s]=e.prototype[s]);var r=o.measureColumns;o.measureColumns=function(){this.items=this.isotope.filteredItems,r.call(this)};var a=o._getOption;return o._getOption=function(t){return"fitWidth"==t?void 0!==this.options.isFitWidth?this.options.isFitWidth:this.options.fitWidth:a.apply(this.isotope,arguments)},i}),function(t,e){"function"==typeof define&&define.amd?define("isotope-layout/js/layout-modes/fit-rows",["../layout-mode"],e):"object"==typeof exports?module.exports=e(require("../layout-mode")):e(t.Isotope.LayoutMode)}(window,function(t){"use strict";var e=t.create("fitRows"),i=e.prototype;return i._resetLayout=function(){this.x=0,this.y=0,this.maxY=0,this._getMeasurement("gutter","outerWidth")},i._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth+this.gutter,i=this.isotope.size.innerWidth+this.gutter;0!==this.x&&e+this.x>i&&(this.x=0,this.y=this.maxY);var o={x:this.x,y:this.y};return this.maxY=Math.max(this.maxY,this.y+t.size.outerHeight),this.x+=e,o},i._getContainerSize=function(){return{height:this.maxY}},e}),function(t,e){"function"==typeof define&&define.amd?define("isotope-layout/js/layout-modes/vertical",["../layout-mode"],e):"object"==typeof module&&module.exports?module.exports=e(require("../layout-mode")):e(t.Isotope.LayoutMode)}(window,function(t){"use strict";var e=t.create("vertical",{horizontalAlignment:0}),i=e.prototype;return i._resetLayout=function(){this.y=0},i._getItemLayoutPosition=function(t){t.getSize();var e=(this.isotope.size.innerWidth-t.size.outerWidth)*this.options.horizontalAlignment,i=this.y;return this.y+=t.size.outerHeight,{x:e,y:i}},i._getContainerSize=function(){return{height:this.y}},e}),function(t,e){"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size","desandro-matches-selector/matches-selector","fizzy-ui-utils/utils","isotope-layout/js/item","isotope-layout/js/layout-mode","isotope-layout/js/layout-modes/masonry","isotope-layout/js/layout-modes/fit-rows","isotope-layout/js/layout-modes/vertical"],function(i,o,n,s,r,a){return e(t,i,o,n,s,r,a)}):"object"==typeof module&&module.exports?module.exports=e(t,require("outlayer"),require("get-size"),require("desandro-matches-selector"),require("fizzy-ui-utils"),require("isotope-layout/js/item"),require("isotope-layout/js/layout-mode"),require("isotope-layout/js/layout-modes/masonry"),require("isotope-layout/js/layout-modes/fit-rows"),require("isotope-layout/js/layout-modes/vertical")):t.Isotope=e(t,t.Outlayer,t.getSize,t.matchesSelector,t.fizzyUIUtils,t.Isotope.Item,t.Isotope.LayoutMode)}(window,function(t,e,i,o,n,s,r){function a(t,e){return function(i,o){for(var n=0;n<t.length;n++){var s=t[n],r=i.sortData[s],a=o.sortData[s];if(r>a||r<a){var u=void 0!==e[s]?e[s]:e,h=u?1:-1;return(r>a?1:-1)*h}}return 0}}var u=t.jQuery,h=String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^\s+|\s+$/g,"")},d=e.create("isotope",{layoutMode:"masonry",isJQueryFiltering:!0,sortAscending:!0});d.Item=s,d.LayoutMode=r;var l=d.prototype;l._create=function(){this.itemGUID=0,this._sorters={},this._getSorters(),e.prototype._create.call(this),this.modes={},this.filteredItems=this.items,this.sortHistory=["original-order"];for(var t in r.modes)this._initLayoutMode(t)},l.reloadItems=function(){this.itemGUID=0,e.prototype.reloadItems.call(this)},l._itemize=function(){for(var t=e.prototype._itemize.apply(this,arguments),i=0;i<t.length;i++){var o=t[i];o.id=this.itemGUID++}return this._updateItemsSortData(t),t},l._initLayoutMode=function(t){var e=r.modes[t],i=this.options[t]||{};this.options[t]=e.options?n.extend(e.options,i):i,this.modes[t]=new e(this)},l.layout=function(){return!this._isLayoutInited&&this._getOption("initLayout")?void this.arrange():void this._layout()},l._layout=function(){var t=this._getIsInstant();this._resetLayout(),this._manageStamps(),this.layoutItems(this.filteredItems,t),this._isLayoutInited=!0},l.arrange=function(t){this.option(t),this._getIsInstant();var e=this._filter(this.items);this.filteredItems=e.matches,this._bindArrangeComplete(),this._isInstant?this._noTransition(this._hideReveal,[e]):this._hideReveal(e),this._sort(),this._layout()},l._init=l.arrange,l._hideReveal=function(t){this.reveal(t.needReveal),this.hide(t.needHide)},l._getIsInstant=function(){var t=this._getOption("layoutInstant"),e=void 0!==t?t:!this._isLayoutInited;return this._isInstant=e,e},l._bindArrangeComplete=function(){function t(){e&&i&&o&&n.dispatchEvent("arrangeComplete",null,[n.filteredItems])}var e,i,o,n=this;this.once("layoutComplete",function(){e=!0,t()}),this.once("hideComplete",function(){i=!0,t()}),this.once("revealComplete",function(){o=!0,t()})},l._filter=function(t){var e=this.options.filter;e=e||"*";for(var i=[],o=[],n=[],s=this._getFilterTest(e),r=0;r<t.length;r++){var a=t[r];if(!a.isIgnored){var u=s(a);u&&i.push(a),u&&a.isHidden?o.push(a):u||a.isHidden||n.push(a)}}return{matches:i,needReveal:o,needHide:n}},l._getFilterTest=function(t){return u&&this.options.isJQueryFiltering?function(e){return u(e.element).is(t);
}:"function"==typeof t?function(e){return t(e.element)}:function(e){return o(e.element,t)}},l.updateSortData=function(t){var e;t?(t=n.makeArray(t),e=this.getItems(t)):e=this.items,this._getSorters(),this._updateItemsSortData(e)},l._getSorters=function(){var t=this.options.getSortData;for(var e in t){var i=t[e];this._sorters[e]=f(i)}},l._updateItemsSortData=function(t){for(var e=t&&t.length,i=0;e&&i<e;i++){var o=t[i];o.updateSortData()}};var f=function(){function t(t){if("string"!=typeof t)return t;var i=h(t).split(" "),o=i[0],n=o.match(/^\[(.+)\]$/),s=n&&n[1],r=e(s,o),a=d.sortDataParsers[i[1]];return t=a?function(t){return t&&a(r(t))}:function(t){return t&&r(t)}}function e(t,e){return t?function(e){return e.getAttribute(t)}:function(t){var i=t.querySelector(e);return i&&i.textContent}}return t}();d.sortDataParsers={parseInt:function(t){return parseInt(t,10)},parseFloat:function(t){return parseFloat(t)}},l._sort=function(){if(this.options.sortBy){var t=n.makeArray(this.options.sortBy);this._getIsSameSortBy(t)||(this.sortHistory=t.concat(this.sortHistory));var e=a(this.sortHistory,this.options.sortAscending);this.filteredItems.sort(e)}},l._getIsSameSortBy=function(t){for(var e=0;e<t.length;e++)if(t[e]!=this.sortHistory[e])return!1;return!0},l._mode=function(){var t=this.options.layoutMode,e=this.modes[t];if(!e)throw new Error("No layout mode: "+t);return e.options=this.options[t],e},l._resetLayout=function(){e.prototype._resetLayout.call(this),this._mode()._resetLayout()},l._getItemLayoutPosition=function(t){return this._mode()._getItemLayoutPosition(t)},l._manageStamp=function(t){this._mode()._manageStamp(t)},l._getContainerSize=function(){return this._mode()._getContainerSize()},l.needsResizeLayout=function(){return this._mode().needsResizeLayout()},l.appended=function(t){var e=this.addItems(t);if(e.length){var i=this._filterRevealAdded(e);this.filteredItems=this.filteredItems.concat(i)}},l.prepended=function(t){var e=this._itemize(t);if(e.length){this._resetLayout(),this._manageStamps();var i=this._filterRevealAdded(e);this.layoutItems(this.filteredItems),this.filteredItems=i.concat(this.filteredItems),this.items=e.concat(this.items)}},l._filterRevealAdded=function(t){var e=this._filter(t);return this.hide(e.needHide),this.reveal(e.matches),this.layoutItems(e.matches,!0),e.matches},l.insert=function(t){var e=this.addItems(t);if(e.length){var i,o,n=e.length;for(i=0;i<n;i++)o=e[i],this.element.appendChild(o.element);var s=this._filter(e).matches;for(i=0;i<n;i++)e[i].isLayoutInstant=!0;for(this.arrange(),i=0;i<n;i++)delete e[i].isLayoutInstant;this.reveal(s)}};var c=l.remove;return l.remove=function(t){t=n.makeArray(t);var e=this.getItems(t);c.call(this,t);for(var i=e&&e.length,o=0;i&&o<i;o++){var s=e[o];n.removeFrom(this.filteredItems,s)}},l.shuffle=function(){for(var t=0;t<this.items.length;t++){var e=this.items[t];e.sortData.random=Math.random()}this.options.sortBy="random",this._sort(),this._layout()},l._noTransition=function(t,e){var i=this.options.transitionDuration;this.options.transitionDuration=0;var o=t.apply(this,e);return this.options.transitionDuration=i,o},l.getFilteredItemElements=function(){return this.filteredItems.map(function(t){return t.element})},d});
/*
* Copyright (C) 2009 Joel Sutherland
* Licenced under the MIT license
* http://www.newmediacampaigns.com/page/jquery-flickr-plugin
*
* Available tags for templates:
* title, link, date_taken, description, published, author, author_id, tags, image*
*/
(function($){$.fn.jflickrfeed=function(settings,callback){settings=$.extend(true,{flickrbase:'http://api.flickr.com/services/feeds/',feedapi:'photos_public.gne',limit:20,qstrings:{lang:'en-us',format:'json',jsoncallback:'?'},cleanDescription:true,useTemplate:true,itemTemplate:'',itemCallback:function(){}},settings);var url=settings.flickrbase+settings.feedapi+'?';var first=true;for(var key in settings.qstrings){if(!first)
url+='&';url+=key+'='+settings.qstrings[key];first=false;}
return $(this).each(function(){var $container=$(this);var container=this;$.getJSON(url,function(data){$.each(data.items,function(i,item){if(i<settings.limit){if(settings.cleanDescription){var regex=/<p>(.*?)<\/p>/g;var input=item.description;if(regex.test(input)){item.description=input.match(regex)[2]
if(item.description!=undefined)
item.description=item.description.replace('<p>','').replace('</p>','');}}
item['image_s']=item.media.m.replace('_m','_s');item['image_t']=item.media.m.replace('_m','_t');item['image_m']=item.media.m.replace('_m','_m');item['image']=item.media.m.replace('_m','');item['image_b']=item.media.m.replace('_m','_b');delete item.media;if(settings.useTemplate){var template=settings.itemTemplate;for(var key in item){var rgx=new RegExp('{{'+key+'}}','g');template=template.replace(rgx,item[key]);}
$container.append(template)}
settings.itemCallback.call(container,item);}});if($.isFunction(callback)){callback.call(container,data);}});});}})(jQuery);
/*
 * ScrollToFixed
 * https://github.com/bigspotteddog/ScrollToFixed
 *
 * Copyright (c) 2011 Joseph Cava-Lynch
 * MIT license
 */
 (function(a){a.isScrollToFixed=function(b){return !!a(b).data("ScrollToFixed")};a.ScrollToFixed=function(d,i){var m=this;m.$el=a(d);m.el=d;m.$el.data("ScrollToFixed",m);var c=false;var H=m.$el;var I;var F;var k;var e;var z;var E=0;var r=0;var j=-1;var f=-1;var u=null;var A;var g;function v(){H.trigger("preUnfixed.ScrollToFixed");l();H.trigger("unfixed.ScrollToFixed");f=-1;E=H.offset().top;r=H.offset().left;if(m.options.offsets){r+=(H.offset().left-H.position().left)}if(j==-1){j=r}I=H.css("position");c=true;if(m.options.bottom!=-1){H.trigger("preFixed.ScrollToFixed");x();H.trigger("fixed.ScrollToFixed")}}function o(){var J=m.options.limit;if(!J){return 0}if(typeof(J)==="function"){return J.apply(H)}return J}function q(){return I==="fixed"}function y(){return I==="absolute"}function h(){return !(q()||y())}function x(){if(!q()){var J=H[0].getBoundingClientRect();u.css({display:H.css("display"),width:J.width,height:J.height,"float":H.css("float")});cssOptions={"z-index":m.options.zIndex,position:"fixed",top:m.options.bottom==-1?t():"",bottom:m.options.bottom==-1?"":m.options.bottom,"margin-left":"0px"};if(!m.options.dontSetWidth){cssOptions.width=H.css("width")}H.css(cssOptions);H.addClass(m.options.baseClassName);if(m.options.className){H.addClass(m.options.className)}I="fixed"}}function b(){var K=o();var J=r;if(m.options.removeOffsets){J="";K=K-E}cssOptions={position:"absolute",top:K,left:J,"margin-left":"0px",bottom:""};if(!m.options.dontSetWidth){cssOptions.width=H.css("width")}H.css(cssOptions);I="absolute"}function l(){if(!h()){f=-1;u.css("display","none");H.css({"z-index":z,width:"",position:F,left:"",top:e,"margin-left":""});H.removeClass("scroll-to-fixed-fixed");if(m.options.className){H.removeClass(m.options.className)}I=null}}function w(J){if(J!=f){H.css("left",r-J);f=J}}function t(){var J=m.options.marginTop;if(!J){return 0}if(typeof(J)==="function"){return J.apply(H)}return J}function B(){if(!a.isScrollToFixed(H)||H.is(":hidden")){return}var M=c;var L=h();if(!c){v()}else{if(h()){E=H.offset().top;r=H.offset().left}}var J=a(window).scrollLeft();var N=a(window).scrollTop();var K=o();if(m.options.minWidth&&a(window).width()<m.options.minWidth){if(!h()||!M){p();H.trigger("preUnfixed.ScrollToFixed");l();H.trigger("unfixed.ScrollToFixed")}}else{if(m.options.maxWidth&&a(window).width()>m.options.maxWidth){if(!h()||!M){p();H.trigger("preUnfixed.ScrollToFixed");l();H.trigger("unfixed.ScrollToFixed")}}else{if(m.options.bottom==-1){if(K>0&&N>=K-t()){if(!L&&(!y()||!M)){p();H.trigger("preAbsolute.ScrollToFixed");b();H.trigger("unfixed.ScrollToFixed")}}else{if(N>=E-t()){if(!q()||!M){p();H.trigger("preFixed.ScrollToFixed");x();f=-1;H.trigger("fixed.ScrollToFixed")}w(J)}else{if(!h()||!M){p();H.trigger("preUnfixed.ScrollToFixed");l();H.trigger("unfixed.ScrollToFixed")}}}}else{if(K>0){if(N+a(window).height()-H.outerHeight(true)>=K-(t()||-n())){if(q()){p();H.trigger("preUnfixed.ScrollToFixed");if(F==="absolute"){b()}else{l()}H.trigger("unfixed.ScrollToFixed")}}else{if(!q()){p();H.trigger("preFixed.ScrollToFixed");x()}w(J);H.trigger("fixed.ScrollToFixed")}}else{w(J)}}}}}function n(){if(!m.options.bottom){return 0}return m.options.bottom}function p(){var J=H.css("position");if(J=="absolute"){H.trigger("postAbsolute.ScrollToFixed")}else{if(J=="fixed"){H.trigger("postFixed.ScrollToFixed")}else{H.trigger("postUnfixed.ScrollToFixed")}}}var D=function(J){if(H.is(":visible")){c=false;B()}else{l()}};var G=function(J){(!!window.requestAnimationFrame)?requestAnimationFrame(B):B()};var C=function(){var K=document.body;if(document.createElement&&K&&K.appendChild&&K.removeChild){var M=document.createElement("div");if(!M.getBoundingClientRect){return null}M.innerHTML="x";M.style.cssText="position:fixed;top:100px;";K.appendChild(M);var N=K.style.height,O=K.scrollTop;K.style.height="3000px";K.scrollTop=500;var J=M.getBoundingClientRect().top;K.style.height=N;var L=(J===100);K.removeChild(M);K.scrollTop=O;return L}return null};var s=function(J){J=J||window.event;if(J.preventDefault){J.preventDefault()}J.returnValue=false};m.init=function(){m.options=a.extend({},a.ScrollToFixed.defaultOptions,i);z=H.css("z-index");m.$el.css("z-index",m.options.zIndex);u=a("<div />");I=H.css("position");F=H.css("position");k=H.css("float");e=H.css("top");if(h()){m.$el.after(u)}a(window).bind("resize.ScrollToFixed",D);a(window).bind("scroll.ScrollToFixed",G);if("ontouchmove" in window){a(window).bind("touchmove.ScrollToFixed",B)}if(m.options.preFixed){H.bind("preFixed.ScrollToFixed",m.options.preFixed)}if(m.options.postFixed){H.bind("postFixed.ScrollToFixed",m.options.postFixed)}if(m.options.preUnfixed){H.bind("preUnfixed.ScrollToFixed",m.options.preUnfixed)}if(m.options.postUnfixed){H.bind("postUnfixed.ScrollToFixed",m.options.postUnfixed)}if(m.options.preAbsolute){H.bind("preAbsolute.ScrollToFixed",m.options.preAbsolute)}if(m.options.postAbsolute){H.bind("postAbsolute.ScrollToFixed",m.options.postAbsolute)}if(m.options.fixed){H.bind("fixed.ScrollToFixed",m.options.fixed)}if(m.options.unfixed){H.bind("unfixed.ScrollToFixed",m.options.unfixed)}if(m.options.spacerClass){u.addClass(m.options.spacerClass)}H.bind("resize.ScrollToFixed",function(){u.height(H.height())});H.bind("scroll.ScrollToFixed",function(){H.trigger("preUnfixed.ScrollToFixed");l();H.trigger("unfixed.ScrollToFixed");B()});H.bind("detach.ScrollToFixed",function(J){s(J);H.trigger("preUnfixed.ScrollToFixed");l();H.trigger("unfixed.ScrollToFixed");a(window).unbind("resize.ScrollToFixed",D);a(window).unbind("scroll.ScrollToFixed",G);H.unbind(".ScrollToFixed");u.remove();m.$el.removeData("ScrollToFixed")});D()};m.init()};a.ScrollToFixed.defaultOptions={marginTop:0,limit:0,bottom:-1,zIndex:1000,baseClassName:"scroll-to-fixed-fixed"};a.fn.scrollToFixed=function(b){return this.each(function(){(new a.ScrollToFixed(this,b))})}})(jQuery);
/***********
	Animates element's number to new number with commas
	Parameters:
		stop (number): number to stop on
        commas (boolean): turn commas on/off (default is true)
		duration (number): how long in ms (default is 1000)
		ease (string): type of easing (default is "swing", others are avaiable from jQuery's easing plugin
	Examples:
        $("#div").animateNumbers(1234, false, 500, "linear"); // half second linear without commas
		$("#div").animateNumbers(1234, true, 2000); // two second swing with commas
		$("#div").animateNumbers(4321); // one second swing with commas
	This fully expects an element containing an integer
	If the number is within copy then separate it with a span and target the span
    Will work in appropriate inputs
	Inserts and accounts for commas during animation by default
    
    https://github.com/talmand/jquery-animate-numbers
***********/

!function(e){e.fn.animateNumbers=function(t,a,n,l){return this.each(function(){var i=e(this),r=i.is("input"),v=parseInt(r?i.val().replace(/,/g,""):i.text().replace(/,/g,"")),u=/(\d)(?=(\d\d\d)+(?!\d))/g;a=void 0===a?!0:a,r&&"number"===i[0].type&&(a=!1),e({value:v}).animate({value:t},{duration:void 0===n?1e3:n,easing:void 0===l?"swing":l,step:function(){r?i.val(Math.floor(this.value)):i.text(Math.floor(this.value)),a&&(r?i.val(i.val().replace(u,"$1,")):i.text(i.text().replace(u,"$1,")))},complete:function(){(parseInt(i.text())!==t||parseInt(i.val())!==t)&&(r?i.val(t):i.text(t),a&&(r?i.val(i.val().replace(u,"$1,")):i.text(i.text().replace(u,"$1,"))))}})})}}(jQuery);
/*
 * jQuery appear plugin
 *
 * Copyright (c) 2012 Andrey Sidorov
 * licensed under MIT license.
 *
 * https://github.com/morr/jquery.appear/
 *
 * Version: 0.3.6
 */
(function($) {
  var selectors = [];

  var check_binded = false;
  var check_lock = false;
  var defaults = {
    interval: 250,
    force_process: false
  };
  var $window = $(window);

  var $prior_appeared = [];

  function appeared(selector) {
    return $(selector).filter(function() {
      return $(this).is(':appeared');
    });
  }

  function process() {
    check_lock = false;
    for (var index = 0, selectorsLength = selectors.length; index < selectorsLength; index++) {
      var $appeared = appeared(selectors[index]);

      $appeared.trigger('appear', [$appeared]);

      if ($prior_appeared[index]) {
        var $disappeared = $prior_appeared[index].not($appeared);
        $disappeared.trigger('disappear', [$disappeared]);
      }
      $prior_appeared[index] = $appeared;
    }
  }

  function add_selector(selector) {
    selectors.push(selector);
    $prior_appeared.push();
  }

  // "appeared" custom filter
  $.expr[':'].appeared = function(element) {
    var $element = $(element);
    if (!$element.is(':visible')) {
      return false;
    }

    var window_left = $window.scrollLeft();
    var window_top = $window.scrollTop();
    var offset = $element.offset();
    var left = offset.left;
    var top = offset.top;

    if (top + $element.height() >= window_top &&
        top - ($element.data('appear-top-offset') || 0) <= window_top + $window.height() &&
        left + $element.width() >= window_left &&
        left - ($element.data('appear-left-offset') || 0) <= window_left + $window.width()) {
      return true;
    } else {
      return false;
    }
  };

  $.fn.extend({
    // watching for element's appearance in browser viewport
    appear: function(options) {
      var opts = $.extend({}, defaults, options || {});
      var selector = this.selector || this;
      if (!check_binded) {
        var on_check = function() {
          if (check_lock) {
            return;
          }
          check_lock = true;

          setTimeout(process, opts.interval);
        };

        $(window).scroll(on_check).resize(on_check);
        check_binded = true;
      }

      if (opts.force_process) {
        setTimeout(process, opts.interval);
      }
      add_selector(selector);
      return $(selector);
    }
  });

  $.extend({
    // force elements's appearance check
    force_appear: function() {
      if (check_binded) {
        process();
        return true;
      }
      return false;
    }
  });
})(function() {
  if (typeof module !== 'undefined') {
    // Node
    return require('jquery');
  } else {
    return jQuery;
  }
}());

/*!
 * The Final Countdown for jQuery v2.2.0 (http://hilios.github.io/jQuery.countdown/)
 * Copyright (c) 2016 Edson Hilios
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy of
 * this software and associated documentation files (the "Software"), to deal in
 * the Software without restriction, including without limitation the rights to
 * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
 * the Software, and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */
!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){"use strict";function b(a){if(a instanceof Date)return a;if(String(a).match(g))return String(a).match(/^[0-9]*$/)&&(a=Number(a)),String(a).match(/\-/)&&(a=String(a).replace(/\-/g,"/")),new Date(a);throw new Error("Couldn't cast `"+a+"` to a date object.")}function c(a){var b=a.toString().replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");return new RegExp(b)}function d(a){return function(b){var d=b.match(/%(-|!)?[A-Z]{1}(:[^;]+;)?/gi);if(d)for(var f=0,g=d.length;f<g;++f){var h=d[f].match(/%(-|!)?([a-zA-Z]{1})(:[^;]+;)?/),j=c(h[0]),k=h[1]||"",l=h[3]||"",m=null;h=h[2],i.hasOwnProperty(h)&&(m=i[h],m=Number(a[m])),null!==m&&("!"===k&&(m=e(l,m)),""===k&&m<10&&(m="0"+m.toString()),b=b.replace(j,m.toString()))}return b=b.replace(/%%/,"%")}}function e(a,b){var c="s",d="";return a&&(a=a.replace(/(:|;|\s)/gi,"").split(/\,/),1===a.length?c=a[0]:(d=a[0],c=a[1])),Math.abs(b)>1?c:d}var f=[],g=[],h={precision:100,elapse:!1,defer:!1};g.push(/^[0-9]*$/.source),g.push(/([0-9]{1,2}\/){2}[0-9]{4}( [0-9]{1,2}(:[0-9]{2}){2})?/.source),g.push(/[0-9]{4}([\/\-][0-9]{1,2}){2}( [0-9]{1,2}(:[0-9]{2}){2})?/.source),g=new RegExp(g.join("|"));var i={Y:"years",m:"months",n:"daysToMonth",d:"daysToWeek",w:"weeks",W:"weeksToMonth",H:"hours",M:"minutes",S:"seconds",D:"totalDays",I:"totalHours",N:"totalMinutes",T:"totalSeconds"},j=function(b,c,d){this.el=b,this.$el=a(b),this.interval=null,this.offset={},this.options=a.extend({},h),this.firstTick=!0,this.instanceNumber=f.length,f.push(this),this.$el.data("countdown-instance",this.instanceNumber),d&&("function"==typeof d?(this.$el.on("update.countdown",d),this.$el.on("stoped.countdown",d),this.$el.on("finish.countdown",d)):this.options=a.extend({},h,d)),this.setFinalDate(c),this.options.defer===!1&&this.start()};a.extend(j.prototype,{start:function(){null!==this.interval&&clearInterval(this.interval);var a=this;this.update(),this.interval=setInterval(function(){a.update.call(a)},this.options.precision)},stop:function(){clearInterval(this.interval),this.interval=null,this.dispatchEvent("stoped")},toggle:function(){this.interval?this.stop():this.start()},pause:function(){this.stop()},resume:function(){this.start()},remove:function(){this.stop.call(this),f[this.instanceNumber]=null,delete this.$el.data().countdownInstance},setFinalDate:function(a){this.finalDate=b(a)},update:function(){if(0===this.$el.closest("html").length)return void this.remove();var a,b=new Date;return a=this.finalDate.getTime()-b.getTime(),a=Math.ceil(a/1e3),a=!this.options.elapse&&a<0?0:Math.abs(a),this.totalSecsLeft===a||this.firstTick?void(this.firstTick=!1):(this.totalSecsLeft=a,this.elapsed=b>=this.finalDate,this.offset={seconds:this.totalSecsLeft%60,minutes:Math.floor(this.totalSecsLeft/60)%60,hours:Math.floor(this.totalSecsLeft/60/60)%24,days:Math.floor(this.totalSecsLeft/60/60/24)%7,daysToWeek:Math.floor(this.totalSecsLeft/60/60/24)%7,daysToMonth:Math.floor(this.totalSecsLeft/60/60/24%30.4368),weeks:Math.floor(this.totalSecsLeft/60/60/24/7),weeksToMonth:Math.floor(this.totalSecsLeft/60/60/24/7)%4,months:Math.floor(this.totalSecsLeft/60/60/24/30.4368),years:Math.abs(this.finalDate.getFullYear()-b.getFullYear()),totalDays:Math.floor(this.totalSecsLeft/60/60/24),totalHours:Math.floor(this.totalSecsLeft/60/60),totalMinutes:Math.floor(this.totalSecsLeft/60),totalSeconds:this.totalSecsLeft},void(this.options.elapse||0!==this.totalSecsLeft?this.dispatchEvent("update"):(this.stop(),this.dispatchEvent("finish"))))},dispatchEvent:function(b){var c=a.Event(b+".countdown");c.finalDate=this.finalDate,c.elapsed=this.elapsed,c.offset=a.extend({},this.offset),c.strftime=d(this.offset),this.$el.trigger(c)}}),a.fn.countdown=function(){var b=Array.prototype.slice.call(arguments,0);return this.each(function(){var c=a(this).data("countdown-instance");if(void 0!==c){var d=f[c],e=b[0];j.prototype.hasOwnProperty(e)?d[e].apply(d,b.slice(1)):null===String(e).match(/^[$A-Z_][0-9A-Z_$]*$/i)?(d.setFinalDate.call(d,e),d.start()):a.error("Method %s does not exist on jQuery.countdown".replace(/\%s/gi,e))}else new j(this,b[0],b[1])})}});
(function (factory) {
    if (typeof define === 'function' && define.amd) {
        // AMD
        define(['jquery'], factory);
    } else if (typeof exports === 'object') {
        // CommonJS
        factory(require('jquery'));
    } else {
        // Browser globals
        factory(jQuery);
    }
}(function ($) {
  var CountTo = function (element, options) {
    this.$element = $(element);
    this.options  = $.extend({}, CountTo.DEFAULTS, this.dataOptions(), options);
    this.init();
  };

  CountTo.DEFAULTS = {
    from: 0,               // the number the element should start at
    to: 0,                 // the number the element should end at
    speed: 1000,           // how long it should take to count between the target numbers
    refreshInterval: 100,  // how often the element should be updated
    decimals: 0,           // the number of decimal places to show
    formatter: formatter,  // handler for formatting the value before rendering
    onUpdate: null,        // callback method for every time the element is updated
    onComplete: null       // callback method for when the element finishes updating
  };

  CountTo.prototype.init = function () {
    this.value     = this.options.from;
    this.loops     = Math.ceil(this.options.speed / this.options.refreshInterval);
    this.loopCount = 0;
    this.increment = (this.options.to - this.options.from) / this.loops;
  };

  CountTo.prototype.dataOptions = function () {
    var options = {
      from:            this.$element.data('from'),
      to:              this.$element.data('to'),
      speed:           this.$element.data('speed'),
      refreshInterval: this.$element.data('refresh-interval'),
      decimals:        this.$element.data('decimals')
    };

    var keys = Object.keys(options);

    for (var i in keys) {
      var key = keys[i];

      if (typeof(options[key]) === 'undefined') {
        delete options[key];
      }
    }

    return options;
  };

  CountTo.prototype.update = function () {
    this.value += this.increment;
    this.loopCount++;

    this.render();

    if (typeof(this.options.onUpdate) == 'function') {
      this.options.onUpdate.call(this.$element, this.value);
    }

    if (this.loopCount >= this.loops) {
      clearInterval(this.interval);
      this.value = this.options.to;

      if (typeof(this.options.onComplete) == 'function') {
        this.options.onComplete.call(this.$element, this.value);
      }
    }
  };

  CountTo.prototype.render = function () {
    var formattedValue = this.options.formatter.call(this.$element, this.value, this.options);
    this.$element.text(formattedValue);
  };

  CountTo.prototype.restart = function () {
    this.stop();
    this.init();
    this.start();
  };

  CountTo.prototype.start = function () {
    this.stop();
    this.render();
    this.interval = setInterval(this.update.bind(this), this.options.refreshInterval);
  };

  CountTo.prototype.stop = function () {
    if (this.interval) {
      clearInterval(this.interval);
    }
  };

  CountTo.prototype.toggle = function () {
    if (this.interval) {
      this.stop();
    } else {
      this.start();
    }
  };

  function formatter(value, options) {
    return value.toFixed(options.decimals);
  }

  $.fn.countTo = function (option) {
    return this.each(function () {
      var $this   = $(this);
      var data    = $this.data('countTo');
      var init    = !data || typeof(option) === 'object';
      var options = typeof(option) === 'object' ? option : {};
      var method  = typeof(option) === 'string' ? option : 'start';

      if (init) {
        if (data) data.stop();
        $this.data('countTo', data = new CountTo(this, options));
      }

      data[method].call(data);
    });
  };
}));

//Title: Custom DropDown plugin by PC
//Documentation: http://designwithpc.com/Plugins/ddslick
(function(e){e.fn.ddslick=function(l){if(c[l]){return c[l].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof l==="object"||!l){return c.init.apply(this,arguments)}else{e.error("Method "+l+" does not exists.")}}};var c={},d={data:[],keepJSONItemsOnTop:false,width:260,height:null,background:"#eee",selectText:"",defaultSelectedIndex:null,truncateDescription:true,imagePosition:"left",showSelectedHTML:true,clickOffToClose:true,embedCSS:true,onSelected:function(){}},i='<div class="dd-select"><input class="dd-selected-value" type="hidden" /><a class="dd-selected"></a><span class="dd-pointer dd-pointer-down"></span></div>',a='<ul class="dd-options"></ul>',b='<style id="css-ddslick">.dd-select{ border-radius:2px; border:solid 1px #ccc; position:relative; cursor:pointer;}.dd-desc { color:#aaa; display:block; overflow: hidden; font-weight:normal; line-height: 1.4em; }.dd-selected{ overflow:hidden; display:block; padding:10px; font-weight:bold;}.dd-pointer{ width:0; height:0; position:absolute; right:10px; top:50%; margin-top:-3px;}.dd-pointer-down{ border:solid 5px transparent; border-top:solid 5px #000; }.dd-pointer-up{border:solid 5px transparent !important; border-bottom:solid 5px #000 !important; margin-top:-8px;}.dd-options{ border:solid 1px #ccc; border-top:none; list-style:none; box-shadow:0px 1px 5px #ddd; display:none; position:absolute; z-index:2000; margin:0; padding:0;background:#fff; overflow:auto;}.dd-option{ padding:10px; display:block; border-bottom:solid 1px #ddd; overflow:hidden; text-decoration:none; color:#333; cursor:pointer;-webkit-transition: all 0.25s ease-in-out; -moz-transition: all 0.25s ease-in-out;-o-transition: all 0.25s ease-in-out;-ms-transition: all 0.25s ease-in-out; }.dd-options > li:last-child > .dd-option{ border-bottom:none;}.dd-option:hover{ background:#f3f3f3; color:#000;}.dd-selected-description-truncated { text-overflow: ellipsis; white-space:nowrap; }.dd-option-selected { background:#f6f6f6; }.dd-option-image, .dd-selected-image { vertical-align:middle; float:left; margin-right:5px; max-width:64px;}.dd-image-right { float:right; margin-right:15px; margin-left:5px;}.dd-container{ position:relative;} .dd-selected-text { font-weight:bold}</style>';c.init=function(l){var l=e.extend({},d,l);if(e("#css-ddslick").length<=0&&l.embedCSS){e(b).appendTo("head")}return this.each(function(){var p=e(this),q=p.data("ddslick");if(!q){var n=[],o=l.data;p.find("option").each(function(){var w=e(this),v=w.data();n.push({text:e.trim(w.text()),value:w.val(),selected:w.is(":selected"),description:v.description,imageSrc:v.imagesrc})});if(l.keepJSONItemsOnTop){e.merge(l.data,n)}else{l.data=e.merge(n,l.data)}var m=p,s=e('<div id="'+p.attr("id")+'"></div>');p.replaceWith(s);p=s;p.addClass("dd-container").append(i).append(a);var n=p.find(".dd-select"),u=p.find(".dd-options");u.css({width:l.width});n.css({width:l.width,background:l.background});p.css({width:l.width});if(l.height!=null){u.css({height:l.height,overflow:"auto"})}e.each(l.data,function(v,w){if(w.selected){l.defaultSelectedIndex=v}u.append('<li><a class="dd-option">'+(w.value?' <input class="dd-option-value" type="hidden" value="'+w.value+'" />':"")+(w.imageSrc?' <img class="dd-option-image'+(l.imagePosition=="right"?" dd-image-right":"")+'" src="'+w.imageSrc+'" />':"")+(w.text?' <label class="dd-option-text">'+w.text+"</label>":"")+(w.description?' <small class="dd-option-description dd-desc">'+w.description+"</small>":"")+"</a></li>")});var t={settings:l,original:m,selectedIndex:-1,selectedItem:null,selectedData:null};p.data("ddslick",t);if(l.selectText.length>0&&l.defaultSelectedIndex==null){p.find(".dd-selected").html(l.selectText)}else{var r=(l.defaultSelectedIndex!=null&&l.defaultSelectedIndex>=0&&l.defaultSelectedIndex<l.data.length)?l.defaultSelectedIndex:0;j(p,r)}p.find(".dd-select").on("click.ddslick",function(){f(p)});p.find(".dd-option").on("click.ddslick",function(){j(p,e(this).closest("li").index())});if(l.clickOffToClose){u.addClass("dd-click-off-close");p.on("click.ddslick",function(v){v.stopPropagation()});e("body").on("click",function(){e(".dd-click-off-close").slideUp(50).siblings(".dd-select").find(".dd-pointer").removeClass("dd-pointer-up")})}}})};c.select=function(l){return this.each(function(){if(l.index!==undefined){j(e(this),l.index)}})};c.open=function(){return this.each(function(){var m=e(this),l=m.data("ddslick");if(l){f(m)}})};c.close=function(){return this.each(function(){var m=e(this),l=m.data("ddslick");if(l){k(m)}})};c.destroy=function(){return this.each(function(){var n=e(this),m=n.data("ddslick");if(m){var l=m.original;n.removeData("ddslick").unbind(".ddslick").replaceWith(l)}})};function j(q,s){var u=q.data("ddslick");var r=q.find(".dd-selected"),n=r.siblings(".dd-selected-value"),v=q.find(".dd-options"),l=r.siblings(".dd-pointer"),p=q.find(".dd-option").eq(s),m=p.closest("li"),o=u.settings,t=u.settings.data[s];q.find(".dd-option").removeClass("dd-option-selected");p.addClass("dd-option-selected");u.selectedIndex=s;u.selectedItem=m;u.selectedData=t;if(o.showSelectedHTML){r.html((t.imageSrc?'<img class="dd-selected-image'+(o.imagePosition=="right"?" dd-image-right":"")+'" src="'+t.imageSrc+'" />':"")+(t.text?'<label class="dd-selected-text">'+t.text+"</label>":"")+(t.description?'<small class="dd-selected-description dd-desc'+(o.truncateDescription?" dd-selected-description-truncated":"")+'" >'+t.description+"</small>":""))}else{r.html(t.text)}n.val(t.value);u.original.val(t.value);q.data("ddslick",u);k(q);g(q);if(typeof o.onSelected=="function"){o.onSelected.call(this,u)}}function f(p){var o=p.find(".dd-select"),m=o.siblings(".dd-options"),l=o.find(".dd-pointer"),n=m.is(":visible");e(".dd-click-off-close").not(m).slideUp(50);e(".dd-pointer").removeClass("dd-pointer-up");if(n){m.slideUp("fast");l.removeClass("dd-pointer-up")}else{m.slideDown("fast");l.addClass("dd-pointer-up")}h(p)}function k(l){l.find(".dd-options").slideUp(50);l.find(".dd-pointer").removeClass("dd-pointer-up").removeClass("dd-pointer-up")}function g(o){var n=o.find(".dd-select").css("height");var m=o.find(".dd-selected-description");var l=o.find(".dd-selected-image");if(m.length<=0&&l.length>0){o.find(".dd-selected-text").css("lineHeight",n)}}function h(l){l.find(".dd-option").each(function(){var p=e(this);var n=p.css("height");var o=p.find(".dd-option-description");var m=l.find(".dd-option-image");if(o.length<=0&&m.length>0){p.find(".dd-option-text").css("lineHeight",n)}})}})(jQuery);
/*
 * jQuery Easing v1.4.0 - http://gsgd.co.uk/sandbox/jquery/easing/
 * Open source under the BSD License.
 * Copyright  2008 George McGinley Smith
 * All rights reserved.
 * https://raw.github.com/gdsmith/jquery-easing/master/LICENSE
*/
!function(n){"function"==typeof define&&define.amd?define(["jquery"],function(e){return n(e)}):"object"==typeof module&&"object"==typeof module.exports?exports=n(require("jquery")):n(jQuery)}(function(n){function e(n){var e=7.5625,t=2.75;return n<1/t?e*n*n:n<2/t?e*(n-=1.5/t)*n+.75:n<2.5/t?e*(n-=2.25/t)*n+.9375:e*(n-=2.625/t)*n+.984375}n.easing.jswing=n.easing.swing;var t=Math.pow,u=Math.sqrt,r=Math.sin,i=Math.cos,a=Math.PI,c=1.70158,o=1.525*c,s=2*a/3,f=2*a/4.5;n.extend(n.easing,{def:"easeOutQuad",swing:function(e){return n.easing[n.easing.def](e)},easeInQuad:function(n){return n*n},easeOutQuad:function(n){return 1-(1-n)*(1-n)},easeInOutQuad:function(n){return n<.5?2*n*n:1-t(-2*n+2,2)/2},easeInCubic:function(n){return n*n*n},easeOutCubic:function(n){return 1-t(1-n,3)},easeInOutCubic:function(n){return n<.5?4*n*n*n:1-t(-2*n+2,3)/2},easeInQuart:function(n){return n*n*n*n},easeOutQuart:function(n){return 1-t(1-n,4)},easeInOutQuart:function(n){return n<.5?8*n*n*n*n:1-t(-2*n+2,4)/2},easeInQuint:function(n){return n*n*n*n*n},easeOutQuint:function(n){return 1-t(1-n,5)},easeInOutQuint:function(n){return n<.5?16*n*n*n*n*n:1-t(-2*n+2,5)/2},easeInSine:function(n){return 1-i(n*a/2)},easeOutSine:function(n){return r(n*a/2)},easeInOutSine:function(n){return-(i(a*n)-1)/2},easeInExpo:function(n){return 0===n?0:t(2,10*n-10)},easeOutExpo:function(n){return 1===n?1:1-t(2,-10*n)},easeInOutExpo:function(n){return 0===n?0:1===n?1:n<.5?t(2,20*n-10)/2:(2-t(2,-20*n+10))/2},easeInCirc:function(n){return 1-u(1-t(n,2))},easeOutCirc:function(n){return u(1-t(n-1,2))},easeInOutCirc:function(n){return n<.5?(1-u(1-t(2*n,2)))/2:(u(1-t(-2*n+2,2))+1)/2},easeInElastic:function(n){return 0===n?0:1===n?1:-t(2,10*n-10)*r((10*n-10.75)*s)},easeOutElastic:function(n){return 0===n?0:1===n?1:t(2,-10*n)*r((10*n-.75)*s)+1},easeInOutElastic:function(n){return 0===n?0:1===n?1:n<.5?-(t(2,20*n-10)*r((20*n-11.125)*f))/2:t(2,-20*n+10)*r((20*n-11.125)*f)/2+1},easeInBack:function(n){return(c+1)*n*n*n-c*n*n},easeOutBack:function(n){return 1+(c+1)*t(n-1,3)+c*t(n-1,2)},easeInOutBack:function(n){return n<.5?t(2*n,2)*(7.189819*n-o)/2:(t(2*n-2,2)*((o+1)*(2*n-2)+o)+2)/2},easeInBounce:function(n){return 1-e(1-n)},easeOutBounce:e,easeInOutBounce:function(n){return n<.5?(1-e(1-2*n))/2:(1+e(2*n-1))/2}})});
/**!
 * easy-pie-chart
 * Lightweight plugin to render simple, animated and retina optimized pie charts
 *
 * @license 
 * @author Robert Fleischmann <rendro87@gmail.com> (http://robert-fleischmann.de)
 * @version 2.1.7
 **/
!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):"object"==typeof exports?module.exports=b(require("jquery")):b(jQuery)}(this,function(a){var b=function(a,b){var c,d=document.createElement("canvas");a.appendChild(d),"object"==typeof G_vmlCanvasManager&&G_vmlCanvasManager.initElement(d);var e=d.getContext("2d");d.width=d.height=b.size;var f=1;window.devicePixelRatio>1&&(f=window.devicePixelRatio,d.style.width=d.style.height=[b.size,"px"].join(""),d.width=d.height=b.size*f,e.scale(f,f)),e.translate(b.size/2,b.size/2),e.rotate((-0.5+b.rotate/180)*Math.PI);var g=(b.size-b.lineWidth)/2;b.scaleColor&&b.scaleLength&&(g-=b.scaleLength+2),Date.now=Date.now||function(){return+new Date};var h=function(a,b,c){c=Math.min(Math.max(-1,c||0),1);var d=0>=c?!0:!1;e.beginPath(),e.arc(0,0,g,0,2*Math.PI*c,d),e.strokeStyle=a,e.lineWidth=b,e.stroke()},i=function(){var a,c;e.lineWidth=1,e.fillStyle=b.scaleColor,e.save();for(var d=24;d>0;--d)d%6===0?(c=b.scaleLength,a=0):(c=.6*b.scaleLength,a=b.scaleLength-c),e.fillRect(-b.size/2+a,0,c,1),e.rotate(Math.PI/12);e.restore()},j=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),k=function(){b.scaleColor&&i(),b.trackColor&&h(b.trackColor,b.trackWidth||b.lineWidth,1)};this.getCanvas=function(){return d},this.getCtx=function(){return e},this.clear=function(){e.clearRect(b.size/-2,b.size/-2,b.size,b.size)},this.draw=function(a){b.scaleColor||b.trackColor?e.getImageData&&e.putImageData?c?e.putImageData(c,0,0):(k(),c=e.getImageData(0,0,b.size*f,b.size*f)):(this.clear(),k()):this.clear(),e.lineCap=b.lineCap;var d;d="function"==typeof b.barColor?b.barColor(a):b.barColor,h(d,b.lineWidth,a/100)}.bind(this),this.animate=function(a,c){var d=Date.now();b.onStart(a,c);var e=function(){var f=Math.min(Date.now()-d,b.animate.duration),g=b.easing(this,f,a,c-a,b.animate.duration);this.draw(g),b.onStep(a,c,g),f>=b.animate.duration?b.onStop(a,c):j(e)}.bind(this);j(e)}.bind(this)},c=function(a,c){var d={barColor:"#ef1e25",trackColor:"#f9f9f9",scaleColor:"#dfe0e0",scaleLength:5,lineCap:"round",lineWidth:3,trackWidth:void 0,size:110,rotate:0,animate:{duration:1e3,enabled:!0},easing:function(a,b,c,d,e){return b/=e/2,1>b?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},onStart:function(a,b){},onStep:function(a,b,c){},onStop:function(a,b){}};if("undefined"!=typeof b)d.renderer=b;else{if("undefined"==typeof SVGRenderer)throw new Error("Please load either the SVG- or the CanvasRenderer");d.renderer=SVGRenderer}var e={},f=0,g=function(){this.el=a,this.options=e;for(var b in d)d.hasOwnProperty(b)&&(e[b]=c&&"undefined"!=typeof c[b]?c[b]:d[b],"function"==typeof e[b]&&(e[b]=e[b].bind(this)));"string"==typeof e.easing&&"undefined"!=typeof jQuery&&jQuery.isFunction(jQuery.easing[e.easing])?e.easing=jQuery.easing[e.easing]:e.easing=d.easing,"number"==typeof e.animate&&(e.animate={duration:e.animate,enabled:!0}),"boolean"!=typeof e.animate||e.animate||(e.animate={duration:1e3,enabled:e.animate}),this.renderer=new e.renderer(a,e),this.renderer.draw(f),a.dataset&&a.dataset.percent?this.update(parseFloat(a.dataset.percent)):a.getAttribute&&a.getAttribute("data-percent")&&this.update(parseFloat(a.getAttribute("data-percent")))}.bind(this);this.update=function(a){return a=parseFloat(a),e.animate.enabled?this.renderer.animate(f,a):this.renderer.draw(a),f=a,this}.bind(this),this.disableAnimation=function(){return e.animate.enabled=!1,this},this.enableAnimation=function(){return e.animate.enabled=!0,this},g()};a.fn.easyPieChart=function(b){return this.each(function(){var d;a.data(this,"easyPieChart")||(d=a.extend({},b,a(this).data()),a.data(this,"easyPieChart",new c(this,d)))})}});
!function(e){function o(){e(window).load(s),e(window).on("redraw",function(){switched=!1,s()}),e(window).on("resize",s)}function s(){w.draw(),v.draw(),b.draw(),f.draw()}function r(e){return Math.PI/180*e-Math.PI/180*90}function t(){i={total:Math.floor((d.end-d.start)/86400),days:Math.floor((d.end-d.now)/86400),hours:24-Math.floor((d.end-d.now)%86400/3600),minutes:60-Math.floor((d.end-d.now)%86400%3600/60),seconds:60-Math.floor((d.end-d.now)%86400%3600%60)}}function n(){var o=e("#"+d.selectors.canvas_seconds).width(),s=new Kinetic.Stage({container:d.selectors.canvas_seconds,width:o,height:o});c=new Kinetic.Shape({drawFunc:function(o){var s=e("#"+d.selectors.canvas_seconds).width(),t=s/2-d.seconds.borderWidth/2,n=s/2,a=s/2;o.beginPath(),o.arc(n,a,t,r(0),r(6*i.seconds)),o.fillStrokeShape(this),e(d.selectors.value_seconds).html(60-i.seconds)},stroke:d.seconds.borderColor,strokeWidth:d.seconds.borderWidth}),w=new Kinetic.Layer,w.add(c),s.add(w);var t=e("#"+d.selectors.canvas_minutes).width(),n=new Kinetic.Stage({container:d.selectors.canvas_minutes,width:t,height:t});h=new Kinetic.Shape({drawFunc:function(o){var s=e("#"+d.selectors.canvas_minutes).width(),t=s/2-d.minutes.borderWidth/2,n=s/2,a=s/2;o.beginPath(),o.arc(n,a,t,r(0),r(6*i.minutes)),o.fillStrokeShape(this),e(d.selectors.value_minutes).html(60-i.minutes)},stroke:d.minutes.borderColor,strokeWidth:d.minutes.borderWidth}),v=new Kinetic.Layer,v.add(h),n.add(v);var a=e("#"+d.selectors.canvas_hours).width(),y=new Kinetic.Stage({container:d.selectors.canvas_hours,width:a,height:a});l=new Kinetic.Shape({drawFunc:function(o){var s=e("#"+d.selectors.canvas_hours).width(),t=s/2-d.hours.borderWidth/2,n=s/2,a=s/2;o.beginPath(),o.arc(n,a,t,r(0),r(360*i.hours/24)),o.fillStrokeShape(this),e(d.selectors.value_hours).html(24-i.hours)},stroke:d.hours.borderColor,strokeWidth:d.hours.borderWidth}),b=new Kinetic.Layer,b.add(l),y.add(b);var _=e("#"+d.selectors.canvas_days).width(),m=new Kinetic.Stage({container:d.selectors.canvas_days,width:_,height:_});u=new Kinetic.Shape({drawFunc:function(o){var s=e("#"+d.selectors.canvas_days).width(),t=s/2-d.days.borderWidth/2,n=s/2,a=s/2;o.beginPath(),0==i.total?o.arc(n,a,t,r(0),r(360)):o.arc(n,a,t,r(0),r(360/i.total*(i.total-i.days))),o.fillStrokeShape(this),e(d.selectors.value_days).html(i.days)},stroke:d.days.borderColor,strokeWidth:d.days.borderWidth}),f=new Kinetic.Layer,f.add(u),m.add(f)}function a(){var e=setInterval(function(){if(i.seconds>59){if(60-i.minutes==0&&24-i.hours==0&&0==i.days)return clearInterval(e),void(void 0!==_&&_.call(this));i.seconds=1,i.minutes>59?(i.minutes=1,v.draw(),i.hours>23?(i.hours=1,i.days>0&&(i.days--,f.draw())):i.hours++,b.draw()):i.minutes++,v.draw()}else i.seconds++;w.draw()},1e3)}var d,i,c,h,l,u,w,v,b,f,y,_;e.fn.final_countdown=function(s,r){if(y=e(this),y.is(":visible")){var i=e.extend({start:void 0,end:void 0,now:void 0,selectors:{value_seconds:".clock-seconds .val",canvas_seconds:"canvas-seconds",value_minutes:".clock-minutes .val",canvas_minutes:"canvas-minutes",value_hours:".clock-hours .val",canvas_hours:"canvas-hours",value_days:".clock-days .val",canvas_days:"canvas-days"},seconds:{borderColor:"#7995D5",borderWidth:"6"},minutes:{borderColor:"#ACC742",borderWidth:"6"},hours:{borderColor:"#ECEFCB",borderWidth:"6"},days:{borderColor:"#FF9900",borderWidth:"6"}},s);d=e.extend({},i,s),void 0===d.start&&(d.start=y.data("start")),void 0===d.end&&(d.end=y.data("end")),void 0===d.now&&(d.now=y.data("now")),y.data("border-color")&&(d.seconds.borderColor=d.minutes.borderColor=d.hours.borderColor=d.days.borderColor=y.data("border-color")),d.now<d.start&&(d.start=d.now,d.end=d.now),d.now>d.end&&(d.start=d.now,d.end=d.now),"function"==typeof r&&(_=r),o(),t(),n(),a()}}}(jQuery);
/*global jQuery */
/*!
* FitText.js 1.2
*
* Copyright 2011, Dave Rupert http://daverupert.com
* Released under the WTFPL license
* http://sam.zoy.org/wtfpl/
*
* Date: Thu May 05 14:23:00 2011 -0600
*/

(function( $ ){

  $.fn.fitText = function( kompressor, options ) {

    // Setup options
    var compressor = kompressor || 1,
        settings = $.extend({
          'minFontSize' : Number.NEGATIVE_INFINITY,
          'maxFontSize' : Number.POSITIVE_INFINITY
        }, options);

    return this.each(function(){

      // Store the object
      var $this = $(this);

      // Resizer() resizes items based on the object width divided by the compressor * 10
      var resizer = function () {
        $this.css('font-size', Math.max(Math.min($this.width() / (compressor*10), parseFloat(settings.maxFontSize)), parseFloat(settings.minFontSize)));
      };

      // Call once to set.
      resizer();

      // Call on resize. Opera debounces their resize by default.
      $(window).on('resize.fittext orientationchange.fittext', resizer);

    });

  };

})( jQuery );

/*jshint browser:true */
/*!
* FitVids 1.1
*
* Copyright 2013, Chris Coyier - http://css-tricks.com + Dave Rupert - http://daverupert.com
* Credit to Thierry Koblentz - http://www.alistapart.com/articles/creating-intrinsic-ratios-for-video/
* Released under the WTFPL license - http://sam.zoy.org/wtfpl/
*
*/

;(function( $ ){

  'use strict';

  $.fn.fitVids = function( options ) {
    var settings = {
      customSelector: null,
      ignore: null
    };

    if(!document.getElementById('fit-vids-style')) {
      // appendStyles: https://github.com/toddmotto/fluidvids/blob/master/dist/fluidvids.js
      var head = document.head || document.getElementsByTagName('head')[0];
      var css = '.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}';
      var div = document.createElement("div");
      div.innerHTML = '<p>x</p><style id="fit-vids-style">' + css + '</style>';
      head.appendChild(div.childNodes[1]);
    }

    if ( options ) {
      $.extend( settings, options );
    }

    return this.each(function(){
      var selectors = [
        'iframe[src*="player.vimeo.com"]',
        'iframe[src*="youtube.com"]',
        'iframe[src*="youtube-nocookie.com"]',
        'iframe[src*="kickstarter.com"][src*="video.html"]',
        'object',
        'embed'
      ];

      if (settings.customSelector) {
        selectors.push(settings.customSelector);
      }

      var ignoreList = '.fitvidsignore';

      if(settings.ignore) {
        ignoreList = ignoreList + ', ' + settings.ignore;
      }

      var $allVideos = $(this).find(selectors.join(','));
      $allVideos = $allVideos.not('object object'); // SwfObj conflict patch
      $allVideos = $allVideos.not(ignoreList); // Disable FitVids on this video.

      $allVideos.each(function(){
        var $this = $(this);
        if($this.parents(ignoreList).length > 0) {
          return; // Disable FitVids on this video.
        }
        if (this.tagName.toLowerCase() === 'embed' && $this.parent('object').length || $this.parent('.fluid-width-video-wrapper').length) { return; }
        if ((!$this.css('height') && !$this.css('width')) && (isNaN($this.attr('height')) || isNaN($this.attr('width'))))
        {
          $this.attr('height', 9);
          $this.attr('width', 16);
        }
        var height = ( this.tagName.toLowerCase() === 'object' || ($this.attr('height') && !isNaN(parseInt($this.attr('height'), 10))) ) ? parseInt($this.attr('height'), 10) : $this.height(),
            width = !isNaN(parseInt($this.attr('width'), 10)) ? parseInt($this.attr('width'), 10) : $this.width(),
            aspectRatio = height / width;
        if(!$this.attr('name')){
          var videoName = 'fitvid' + $.fn.fitVids._count;
          $this.attr('name', videoName);
          $.fn.fitVids._count++;
        }
        $this.wrap('<div class="fluid-width-video-wrapper"></div>').parent('.fluid-width-video-wrapper').css('padding-top', (aspectRatio * 100)+'%');
        $this.removeAttr('height').removeAttr('width');
      });
    });
  };
  
  // Internal counter for unique video names.
  $.fn.fitVids._count = 0;
  
// Works with either jQuery or Zepto
})( window.jQuery || window.Zepto );

/*!
 * jQuery Form Plugin
 * version: 4.2.2
 * Requires jQuery v1.7.2 or later
 * Project repository: https://github.com/jquery-form/form

 * Copyright 2017 Kevin Morris
 * Copyright 2006 M. Alsup

 * Dual licensed under the LGPL-2.1+ or MIT licenses
 * https://github.com/jquery-form/form#license

 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2.1 of the License, or (at your option) any later version.
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,r){return void 0===r&&(r="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(r),r}:e(jQuery)}(function(e){"use strict";function t(t){var r=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(t.target).closest("form").ajaxSubmit(r))}function r(t){var r=t.target,a=e(r);if(!a.is("[type=submit],[type=image]")){var n=a.closest("[type=submit]");if(0===n.length)return;r=n[0]}var i=r.form;if(i.clk=r,"image"===r.type)if(void 0!==t.offsetX)i.clk_x=t.offsetX,i.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var o=a.offset();i.clk_x=t.pageX-o.left,i.clk_y=t.pageY-o.top}else i.clk_x=t.pageX-r.offsetLeft,i.clk_y=t.pageY-r.offsetTop;setTimeout(function(){i.clk=i.clk_x=i.clk_y=null},100)}function a(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var n=/\r?\n/g,i={};i.fileapi=void 0!==e('<input type="file">').get(0).files,i.formdata=void 0!==window.FormData;var o=!!e.fn.prop;e.fn.attr2=function(){if(!o)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(t,r,n,s){function u(r){var a,n,i=e.param(r,t.traditional).split("&"),o=i.length,s=[];for(a=0;a<o;a++)i[a]=i[a].replace(/\+/g," "),n=i[a].split("="),s.push([decodeURIComponent(n[0]),decodeURIComponent(n[1])]);return s}function c(r){function n(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(e){a("cannot get iframe.contentWindow document: "+e)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(r){a("cannot get iframe.contentDocument: "+r),t=e.document}return t}function i(){function t(){try{var e=n(v).readyState;a("state = "+e),e&&"uninitialized"===e.toLowerCase()&&setTimeout(t,50)}catch(e){a("Server abort: ",e," (",e.name,")"),s(L),j&&clearTimeout(j),j=void 0}}var r=p.attr2("target"),i=p.attr2("action"),o=p.attr("enctype")||p.attr("encoding")||"multipart/form-data";w.setAttribute("target",m),l&&!/post/i.test(l)||w.setAttribute("method","POST"),i!==f.url&&w.setAttribute("action",f.url),f.skipEncodingOverride||l&&!/post/i.test(l)||p.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),f.timeout&&(j=setTimeout(function(){T=!0,s(A)},f.timeout));var u=[];try{if(f.extraData)for(var c in f.extraData)f.extraData.hasOwnProperty(c)&&(e.isPlainObject(f.extraData[c])&&f.extraData[c].hasOwnProperty("name")&&f.extraData[c].hasOwnProperty("value")?u.push(e('<input type="hidden" name="'+f.extraData[c].name+'">',k).val(f.extraData[c].value).appendTo(w)[0]):u.push(e('<input type="hidden" name="'+c+'">',k).val(f.extraData[c]).appendTo(w)[0]));f.iframeTarget||h.appendTo(D),v.attachEvent?v.attachEvent("onload",s):v.addEventListener("load",s,!1),setTimeout(t,15);try{w.submit()}catch(e){document.createElement("form").submit.apply(w)}}finally{w.setAttribute("action",i),w.setAttribute("enctype",o),r?w.setAttribute("target",r):p.removeAttr("target"),e(u).remove()}}function s(t){if(!x.aborted&&!X){if((O=n(v))||(a("cannot access response document"),t=L),t===A&&x)return x.abort("timeout"),void S.reject(x,"timeout");if(t===L&&x)return x.abort("server abort"),void S.reject(x,"error","server abort");if(O&&O.location.href!==f.iframeSrc||T){v.detachEvent?v.detachEvent("onload",s):v.removeEventListener("load",s,!1);var r,i="success";try{if(T)throw"timeout";var o="xml"===f.dataType||O.XMLDocument||e.isXMLDoc(O);if(a("isXml="+o),!o&&window.opera&&(null===O.body||!O.body.innerHTML)&&--C)return a("requeing onLoad callback, DOM not available"),void setTimeout(s,250);var u=O.body?O.body:O.documentElement;x.responseText=u?u.innerHTML:null,x.responseXML=O.XMLDocument?O.XMLDocument:O,o&&(f.dataType="xml"),x.getResponseHeader=function(e){return{"content-type":f.dataType}[e.toLowerCase()]},u&&(x.status=Number(u.getAttribute("status"))||x.status,x.statusText=u.getAttribute("statusText")||x.statusText);var c=(f.dataType||"").toLowerCase(),l=/(json|script|text)/.test(c);if(l||f.textarea){var p=O.getElementsByTagName("textarea")[0];if(p)x.responseText=p.value,x.status=Number(p.getAttribute("status"))||x.status,x.statusText=p.getAttribute("statusText")||x.statusText;else if(l){var m=O.getElementsByTagName("pre")[0],g=O.getElementsByTagName("body")[0];m?x.responseText=m.textContent?m.textContent:m.innerText:g&&(x.responseText=g.textContent?g.textContent:g.innerText)}}else"xml"===c&&!x.responseXML&&x.responseText&&(x.responseXML=q(x.responseText));try{M=N(x,c,f)}catch(e){i="parsererror",x.error=r=e||i}}catch(e){a("error caught: ",e),i="error",x.error=r=e||i}x.aborted&&(a("upload aborted"),i=null),x.status&&(i=x.status>=200&&x.status<300||304===x.status?"success":"error"),"success"===i?(f.success&&f.success.call(f.context,M,"success",x),S.resolve(x.responseText,"success",x),d&&e.event.trigger("ajaxSuccess",[x,f])):i&&(void 0===r&&(r=x.statusText),f.error&&f.error.call(f.context,x,i,r),S.reject(x,"error",r),d&&e.event.trigger("ajaxError",[x,f,r])),d&&e.event.trigger("ajaxComplete",[x,f]),d&&!--e.active&&e.event.trigger("ajaxStop"),f.complete&&f.complete.call(f.context,x,i),X=!0,f.timeout&&clearTimeout(j),setTimeout(function(){f.iframeTarget?h.attr("src",f.iframeSrc):h.remove(),x.responseXML=null},100)}}}var u,c,f,d,m,h,v,x,y,b,T,j,w=p[0],S=e.Deferred();if(S.abort=function(e){x.abort(e)},r)for(c=0;c<g.length;c++)u=e(g[c]),o?u.prop("disabled",!1):u.removeAttr("disabled");(f=e.extend(!0,{},e.ajaxSettings,t)).context=f.context||f,m="jqFormIO"+(new Date).getTime();var k=w.ownerDocument,D=p.closest("body");if(f.iframeTarget?(b=(h=e(f.iframeTarget,k)).attr2("name"))?m=b:h.attr2("name",m):(h=e('<iframe name="'+m+'" src="'+f.iframeSrc+'" />',k)).css({position:"absolute",top:"-1000px",left:"-1000px"}),v=h[0],x={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var r="timeout"===t?"timeout":"aborted";a("aborting upload... "+r),this.aborted=1;try{v.contentWindow.document.execCommand&&v.contentWindow.document.execCommand("Stop")}catch(e){}h.attr("src",f.iframeSrc),x.error=r,f.error&&f.error.call(f.context,x,r,t),d&&e.event.trigger("ajaxError",[x,f,r]),f.complete&&f.complete.call(f.context,x,r)}},(d=f.global)&&0==e.active++&&e.event.trigger("ajaxStart"),d&&e.event.trigger("ajaxSend",[x,f]),f.beforeSend&&!1===f.beforeSend.call(f.context,x,f))return f.global&&e.active--,S.reject(),S;if(x.aborted)return S.reject(),S;(y=w.clk)&&(b=y.name)&&!y.disabled&&(f.extraData=f.extraData||{},f.extraData[b]=y.value,"image"===y.type&&(f.extraData[b+".x"]=w.clk_x,f.extraData[b+".y"]=w.clk_y));var A=1,L=2,F=e("meta[name=csrf-token]").attr("content"),E=e("meta[name=csrf-param]").attr("content");E&&F&&(f.extraData=f.extraData||{},f.extraData[E]=F),f.forceSync?i():setTimeout(i,10);var M,O,X,C=50,q=e.parseXML||function(e,t){return window.ActiveXObject?((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!==t.documentElement.nodeName?t:null},_=e.parseJSON||function(e){return window.eval("("+e+")")},N=function(t,r,a){var n=t.getResponseHeader("content-type")||"",i=("xml"===r||!r)&&n.indexOf("xml")>=0,o=i?t.responseXML:t.responseText;return i&&"parsererror"===o.documentElement.nodeName&&e.error&&e.error("parsererror"),a&&a.dataFilter&&(o=a.dataFilter(o,r)),"string"==typeof o&&(("json"===r||!r)&&n.indexOf("json")>=0?o=_(o):("script"===r||!r)&&n.indexOf("javascript")>=0&&e.globalEval(o)),o};return S}if(!this.length)return a("ajaxSubmit: skipping submit process - no element selected"),this;var l,f,d,p=this;"function"==typeof t?t={success:t}:"string"==typeof t||!1===t&&arguments.length>0?(t={url:t,data:r,dataType:n},"function"==typeof s&&(t.success=s)):void 0===t&&(t={}),l=t.method||t.type||this.attr2("method"),(d=(d="string"==typeof(f=t.url||this.attr2("action"))?e.trim(f):"")||window.location.href||"")&&(d=(d.match(/^([^#]+)/)||[])[1]),t=e.extend(!0,{url:d,success:e.ajaxSettings.success,type:l||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},t);var m={};if(this.trigger("form-pre-serialize",[this,t,m]),m.veto)return a("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(t.beforeSerialize&&!1===t.beforeSerialize(this,t))return a("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var h=t.traditional;void 0===h&&(h=e.ajaxSettings.traditional);var v,g=[],x=this.formToArray(t.semantic,g,t.filtering);if(t.data){var y=e.isFunction(t.data)?t.data(x):t.data;t.extraData=y,v=e.param(y,h)}if(t.beforeSubmit&&!1===t.beforeSubmit(x,this,t))return a("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[x,this,t,m]),m.veto)return a("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var b=e.param(x,h);v&&(b=b?b+"&"+v:v),"GET"===t.type.toUpperCase()?(t.url+=(t.url.indexOf("?")>=0?"&":"?")+b,t.data=null):t.data=b;var T=[];if(t.resetForm&&T.push(function(){p.resetForm()}),t.clearForm&&T.push(function(){p.clearForm(t.includeHidden)}),!t.dataType&&t.target){var j=t.success||function(){};T.push(function(r,a,n){var i=arguments,o=t.replaceTarget?"replaceWith":"html";e(t.target)[o](r).each(function(){j.apply(this,i)})})}else t.success&&(e.isArray(t.success)?e.merge(T,t.success):T.push(t.success));if(t.success=function(e,r,a){for(var n=t.context||this,i=0,o=T.length;i<o;i++)T[i].apply(n,[e,r,a||p,p])},t.error){var w=t.error;t.error=function(e,r,a){var n=t.context||this;w.apply(n,[e,r,a,p])}}if(t.complete){var S=t.complete;t.complete=function(e,r){var a=t.context||this;S.apply(a,[e,r,p])}}var k=e("input[type=file]:enabled",this).filter(function(){return""!==e(this).val()}).length>0,D="multipart/form-data",A=p.attr("enctype")===D||p.attr("encoding")===D,L=i.fileapi&&i.formdata;a("fileAPI :"+L);var F,E=(k||A)&&!L;!1!==t.iframe&&(t.iframe||E)?t.closeKeepAlive?e.get(t.closeKeepAlive,function(){F=c(x)}):F=c(x):F=(k||A)&&L?function(r){for(var a=new FormData,n=0;n<r.length;n++)a.append(r[n].name,r[n].value);if(t.extraData){var i=u(t.extraData);for(n=0;n<i.length;n++)i[n]&&a.append(i[n][0],i[n][1])}t.data=null;var o=e.extend(!0,{},e.ajaxSettings,t,{contentType:!1,processData:!1,cache:!1,type:l||"POST"});t.uploadProgress&&(o.xhr=function(){var r=e.ajaxSettings.xhr();return r.upload&&r.upload.addEventListener("progress",function(e){var r=0,a=e.loaded||e.position,n=e.total;e.lengthComputable&&(r=Math.ceil(a/n*100)),t.uploadProgress(e,a,n,r)},!1),r}),o.data=null;var s=o.beforeSend;return o.beforeSend=function(e,r){t.formData?r.data=t.formData:r.data=a,s&&s.call(this,e,r)},e.ajax(o)}(x):e.ajax(t),p.removeData("jqxhr").data("jqxhr",F);for(var M=0;M<g.length;M++)g[M]=null;return this.trigger("form-submit-notify",[this,t]),this},e.fn.ajaxForm=function(n,i,o,s){if(("string"==typeof n||!1===n&&arguments.length>0)&&(n={url:n,data:i,dataType:o},"function"==typeof s&&(n.success=s)),n=n||{},n.delegation=n.delegation&&e.isFunction(e.fn.on),!n.delegation&&0===this.length){var u={s:this.selector,c:this.context};return!e.isReady&&u.s?(a("DOM not ready, queuing ajaxForm"),e(function(){e(u.s,u.c).ajaxForm(n)}),this):(a("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return n.delegation?(e(document).off("submit.form-plugin",this.selector,t).off("click.form-plugin",this.selector,r).on("submit.form-plugin",this.selector,n,t).on("click.form-plugin",this.selector,n,r),this):this.ajaxFormUnbind().on("submit.form-plugin",n,t).on("click.form-plugin",n,r)},e.fn.ajaxFormUnbind=function(){return this.off("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t,r,a){var n=[];if(0===this.length)return n;var o,s=this[0],u=this.attr("id"),c=t||void 0===s.elements?s.getElementsByTagName("*"):s.elements;if(c&&(c=e.makeArray(c)),u&&(t||/(Edge|Trident)\//.test(navigator.userAgent))&&(o=e(':input[form="'+u+'"]').get()).length&&(c=(c||[]).concat(o)),!c||!c.length)return n;e.isFunction(a)&&(c=e.map(c,a));var l,f,d,p,m,h,v;for(l=0,h=c.length;l<h;l++)if(m=c[l],(d=m.name)&&!m.disabled)if(t&&s.clk&&"image"===m.type)s.clk===m&&(n.push({name:d,value:e(m).val(),type:m.type}),n.push({name:d+".x",value:s.clk_x},{name:d+".y",value:s.clk_y}));else if((p=e.fieldValue(m,!0))&&p.constructor===Array)for(r&&r.push(m),f=0,v=p.length;f<v;f++)n.push({name:d,value:p[f]});else if(i.fileapi&&"file"===m.type){r&&r.push(m);var g=m.files;if(g.length)for(f=0;f<g.length;f++)n.push({name:d,value:g[f],type:m.type});else n.push({name:d,value:"",type:m.type})}else null!==p&&void 0!==p&&(r&&r.push(m),n.push({name:d,value:p,type:m.type,required:m.required}));if(!t&&s.clk){var x=e(s.clk),y=x[0];(d=y.name)&&!y.disabled&&"image"===y.type&&(n.push({name:d,value:x.val()}),n.push({name:d+".x",value:s.clk_x},{name:d+".y",value:s.clk_y}))}return n},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var r=[];return this.each(function(){var a=this.name;if(a){var n=e.fieldValue(this,t);if(n&&n.constructor===Array)for(var i=0,o=n.length;i<o;i++)r.push({name:a,value:n[i]});else null!==n&&void 0!==n&&r.push({name:this.name,value:n})}}),e.param(r)},e.fn.fieldValue=function(t){for(var r=[],a=0,n=this.length;a<n;a++){var i=this[a],o=e.fieldValue(i,t);null===o||void 0===o||o.constructor===Array&&!o.length||(o.constructor===Array?e.merge(r,o):r.push(o))}return r},e.fieldValue=function(t,r){var a=t.name,i=t.type,o=t.tagName.toLowerCase();if(void 0===r&&(r=!0),r&&(!a||t.disabled||"reset"===i||"button"===i||("checkbox"===i||"radio"===i)&&!t.checked||("submit"===i||"image"===i)&&t.form&&t.form.clk!==t||"select"===o&&-1===t.selectedIndex))return null;if("select"===o){var s=t.selectedIndex;if(s<0)return null;for(var u=[],c=t.options,l="select-one"===i,f=l?s+1:c.length,d=l?s:0;d<f;d++){var p=c[d];if(p.selected&&!p.disabled){var m=p.value;if(m||(m=p.attributes&&p.attributes.value&&!p.attributes.value.specified?p.text:p.value),l)return m;u.push(m)}}return u}return e(t).val().replace(n,"\r\n")},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var r=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var a=this.type,n=this.tagName.toLowerCase();r.test(a)||"textarea"===n?this.value="":"checkbox"===a||"radio"===a?this.checked=!1:"select"===n?this.selectedIndex=-1:"file"===a?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(!0===t&&/hidden/.test(a)||"string"==typeof t&&e(this).is(t))&&(this.value="")})},e.fn.resetForm=function(){return this.each(function(){var t=e(this),r=this.tagName.toLowerCase();switch(r){case"input":this.checked=this.defaultChecked;case"textarea":return this.value=this.defaultValue,!0;case"option":case"optgroup":var a=t.parents("select");return a.length&&a[0].multiple?"option"===r?this.selected=this.defaultSelected:t.find("option").resetForm():a.resetForm(),!0;case"select":return t.find("option").each(function(e){if(this.selected=this.defaultSelected,this.defaultSelected&&!t[0].multiple)return t[0].selectedIndex=e,!1}),!0;case"label":var n=e(t.attr("for")),i=t.find("input,select,textarea");return n[0]&&i.unshift(n[0]),i.resetForm(),!0;case"form":return("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset(),!0;default:return t.find("form,input,label,select,textarea").resetForm(),!0}})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var r=this.type;if("checkbox"===r||"radio"===r)this.checked=t;else if("option"===this.tagName.toLowerCase()){var a=e(this).parent("select");t&&a[0]&&"select-one"===a[0].type&&a.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1});
//# sourceMappingURL=jquery.form.min.js.map

/*! jQuery & Zepto Lazy v1.7.10 - http://jquery.eisbehr.de/lazy - MIT&GPL-2.0 license - Copyright 2012-2018 Daniel 'Eisbehr' Kern */
!function(t,e){"use strict";function r(r,a,i,u,l){function f(){L=t.devicePixelRatio>1,i=c(i),a.delay>=0&&setTimeout(function(){s(!0)},a.delay),(a.delay<0||a.combined)&&(u.e=v(a.throttle,function(t){"resize"===t.type&&(w=B=-1),s(t.all)}),u.a=function(t){t=c(t),i.push.apply(i,t)},u.g=function(){return i=n(i).filter(function(){return!n(this).data(a.loadedName)})},u.f=function(t){for(var e=0;e<t.length;e++){var r=i.filter(function(){return this===t[e]});r.length&&s(!1,r)}},s(),n(a.appendScroll).on("scroll."+l+" resize."+l,u.e))}function c(t){var i=a.defaultImage,o=a.placeholder,u=a.imageBase,l=a.srcsetAttribute,f=a.loaderAttribute,c=a._f||{};t=n(t).filter(function(){var t=n(this),r=m(this);return!t.data(a.handledName)&&(t.attr(a.attribute)||t.attr(l)||t.attr(f)||c[r]!==e)}).data("plugin_"+a.name,r);for(var s=0,d=t.length;s<d;s++){var A=n(t[s]),g=m(t[s]),h=A.attr(a.imageBaseAttribute)||u;g===N&&h&&A.attr(l)&&A.attr(l,b(A.attr(l),h)),c[g]===e||A.attr(f)||A.attr(f,c[g]),g===N&&i&&!A.attr(E)?A.attr(E,i):g===N||!o||A.css(O)&&"none"!==A.css(O)||A.css(O,"url('"+o+"')")}return t}function s(t,e){if(!i.length)return void(a.autoDestroy&&r.destroy());for(var o=e||i,u=!1,l=a.imageBase||"",f=a.srcsetAttribute,c=a.handledName,s=0;s<o.length;s++)if(t||e||A(o[s])){var g=n(o[s]),h=m(o[s]),b=g.attr(a.attribute),v=g.attr(a.imageBaseAttribute)||l,p=g.attr(a.loaderAttribute);g.data(c)||a.visibleOnly&&!g.is(":visible")||!((b||g.attr(f))&&(h===N&&(v+b!==g.attr(E)||g.attr(f)!==g.attr(F))||h!==N&&v+b!==g.css(O))||p)||(u=!0,g.data(c,!0),d(g,h,v,p))}u&&(i=n(i).filter(function(){return!n(this).data(c)}))}function d(t,e,r,i){++z;var o=function(){y("onError",t),p(),o=n.noop};y("beforeLoad",t);var u=a.attribute,l=a.srcsetAttribute,f=a.sizesAttribute,c=a.retinaAttribute,s=a.removeAttribute,d=a.loadedName,A=t.attr(c);if(i){var g=function(){s&&t.removeAttr(a.loaderAttribute),t.data(d,!0),y(T,t),setTimeout(p,1),g=n.noop};t.off(I).one(I,o).one(D,g),y(i,t,function(e){e?(t.off(D),g()):(t.off(I),o())})||t.trigger(I)}else{var h=n(new Image);h.one(I,o).one(D,function(){t.hide(),e===N?t.attr(C,h.attr(C)).attr(F,h.attr(F)).attr(E,h.attr(E)):t.css(O,"url('"+h.attr(E)+"')"),t[a.effect](a.effectTime),s&&(t.removeAttr(u+" "+l+" "+c+" "+a.imageBaseAttribute),f!==C&&t.removeAttr(f)),t.data(d,!0),y(T,t),h.remove(),p()});var m=(L&&A?A:t.attr(u))||"";h.attr(C,t.attr(f)).attr(F,t.attr(l)).attr(E,m?r+m:null),h.complete&&h.trigger(D)}}function A(t){var e=t.getBoundingClientRect(),r=a.scrollDirection,n=a.threshold,i=h()+n>e.top&&-n<e.bottom,o=g()+n>e.left&&-n<e.right;return"vertical"===r?i:"horizontal"===r?o:i&&o}function g(){return w>=0?w:w=n(t).width()}function h(){return B>=0?B:B=n(t).height()}function m(t){return t.tagName.toLowerCase()}function b(t,e){if(e){var r=t.split(",");t="";for(var a=0,n=r.length;a<n;a++)t+=e+r[a].trim()+(a!==n-1?",":"")}return t}function v(t,e){var n,i=0;return function(o,u){function l(){i=+new Date,e.call(r,o)}var f=+new Date-i;n&&clearTimeout(n),f>t||!a.enableThrottle||u?l():n=setTimeout(l,t-f)}}function p(){--z,i.length||z||y("onFinishedAll")}function y(t,e,n){return!!(t=a[t])&&(t.apply(r,[].slice.call(arguments,1)),!0)}var z=0,w=-1,B=-1,L=!1,T="afterLoad",D="load",I="error",N="img",E="src",F="srcset",C="sizes",O="background-image";"event"===a.bind||o?f():n(t).on(D+"."+l,f)}function a(a,o){var u=this,l=n.extend({},u.config,o),f={},c=l.name+"-"+ ++i;return u.config=function(t,r){return r===e?l[t]:(l[t]=r,u)},u.addItems=function(t){return f.a&&f.a("string"===n.type(t)?n(t):t),u},u.getItems=function(){return f.g?f.g():{}},u.update=function(t){return f.e&&f.e({},!t),u},u.force=function(t){return f.f&&f.f("string"===n.type(t)?n(t):t),u},u.loadAll=function(){return f.e&&f.e({all:!0},!0),u},u.destroy=function(){return n(l.appendScroll).off("."+c,f.e),n(t).off("."+c),f={},e},r(u,l,a,f,c),l.chainable?a:u}var n=t.jQuery||t.Zepto,i=0,o=!1;n.fn.Lazy=n.fn.lazy=function(t){return new a(this,t)},n.Lazy=n.lazy=function(t,r,i){if(n.isFunction(r)&&(i=r,r=[]),n.isFunction(i)){t=n.isArray(t)?t:[t],r=n.isArray(r)?r:[r];for(var o=a.prototype.config,u=o._f||(o._f={}),l=0,f=t.length;l<f;l++)(o[t[l]]===e||n.isFunction(o[t[l]]))&&(o[t[l]]=i);for(var c=0,s=r.length;c<s;c++)u[r[c]]=t[0]}},a.prototype.config={name:"lazy",chainable:!0,autoDestroy:!0,bind:"load",threshold:500,visibleOnly:!1,appendScroll:t,scrollDirection:"both",imageBase:null,defaultImage:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",placeholder:null,delay:-1,combined:!1,attribute:"data-src",srcsetAttribute:"data-srcset",sizesAttribute:"data-sizes",retinaAttribute:"data-retina",loaderAttribute:"data-loader",imageBaseAttribute:"data-imagebase",removeAttribute:!0,handledName:"handled",loadedName:"loaded",effect:"show",effectTime:0,enableThrottle:!0,throttle:250,beforeLoad:e,afterLoad:e,onError:e,onFinishedAll:e},n(t).on("load",function(){o=!0})}(window);
/*global jQuery */
/*!
* Lettering.JS 0.7.0
*
* Copyright 2010, Dave Rupert http://daverupert.com
* Released under the WTFPL license
* http://sam.zoy.org/wtfpl/
*
* Thanks to Paul Irish - http://paulirish.com - for the feedback.
*
* Date: Mon Sep 20 17:14:00 2010 -0600
*/
(function($){
	function injector(t, splitter, klass, after) {
		var text = t.text()
		, a = text.split(splitter)
		, inject = '';
		if (a.length) {
			$(a).each(function(i, item) {
				inject += '<span class="'+klass+(i+1)+'" aria-hidden="true">'+item+'</span>'+after;
			});
			t.attr('aria-label',text)
			.empty()
			.append(inject)

		}
	}


	var methods = {
		init : function() {

			return this.each(function() {
				injector($(this), '', 'char', '');
			});

		},

		words : function() {

			return this.each(function() {
				injector($(this), ' ', 'word', ' ');
			});

		},

		lines : function() {

			return this.each(function() {
				var r = "eefec303079ad17405c889e092e105b0";
				// Because it's hard to split a <br/> tag consistently across browsers,
				// (*ahem* IE *ahem*), we replace all <br/> instances with an md5 hash
				// (of the word "split").  If you're trying to use this plugin on that
				// md5 hash string, it will fail because you're being ridiculous.
				injector($(this).children("br").replaceWith(r).end(), r, 'line', '');
			});

		}
	};

	$.fn.lettering = function( method ) {
		// Method calling logic
		if ( method && methods[method] ) {
			return methods[ method ].apply( this, [].slice.call( arguments, 1 ));
		} else if ( method === 'letters' || ! method ) {
			return methods.init.apply( this, [].slice.call( arguments, 0 ) ); // always pass an array
		}
		$.error( 'Method ' +  method + ' does not exist on jQuery.lettering' );
		return this;
	};

})(jQuery);

/**
 * Copyright (c) 2007-2015 Ariel Flesler - aflesler<a>gmail<d>com | http://flesler.blogspot.com
 * Licensed under MIT
 * @author Ariel Flesler
 * @version 1.4.0
 */
;(function(a){if(typeof define==='function'&&define.amd){define(['jquery'],a)}else{a(jQuery)}}(function($){var g=location.href.replace(/#.*/,'');var h=$.localScroll=function(a){$('body').localScroll(a)};h.defaults={duration:1000,axis:'y',event:'click',stop:true,target:window};$.fn.localScroll=function(a){a=$.extend({},h.defaults,a);if(a.hash&&location.hash){if(a.target)window.scrollTo(0,0);scroll(0,location,a)}return a.lazy?this.on(a.event,'a,area',function(e){if(filter.call(this)){scroll(e,this,a)}}):this.find('a,area').filter(filter).bind(a.event,function(e){scroll(e,this,a)}).end().end();function filter(){return!!this.href&&!!this.hash&&this.href.replace(this.hash,'')===g&&(!a.filter||$(this).is(a.filter))}};h.hash=function(){};function scroll(e,a,b){var c=a.hash.slice(1),elem=document.getElementById(c)||document.getElementsByName(c)[0];if(!elem)return;if(e)e.preventDefault();var d=$(b.target);if(b.lock&&d.is(':animated')||b.onBefore&&b.onBefore(e,elem,d)===false)return;if(b.stop){d.stop(true)}if(b.hash){var f=elem.id===c?'id':'name',$a=$('<a> </a>').attr(f,c).css({position:'absolute',top:$(window).scrollTop(),left:$(window).scrollLeft()});elem[f]='';$('body').prepend($a);location.hash=a.hash;$a.remove();elem[f]=c}d.scrollTo(elem,b).trigger('notify.serialScroll',[elem])}return h}));
/*! Copyright (c) 2013 Brandon Aaron (http://brandon.aaron.sh)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Version: 3.1.12
 *
 * Requires: jQuery 1.2.2+
 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(g),b.type="mousewheel","detail"in g&&(m=-1*g.detail),"wheelDelta"in g&&(m=g.wheelDelta),"wheelDeltaY"in g&&(m=g.wheelDeltaY),"wheelDeltaX"in g&&(l=-1*g.wheelDeltaX),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,"deltaY"in g&&(m=-1*g.deltaY,j=m),"deltaX"in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,"mousewheel-line-height");j*=q,m*=q,l*=q}else if(2===g.deltaMode){var r=a.data(this,"mousewheel-page-height");j*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||f>n)&&(f=n,d(g,n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[j>=1?"floor":"ceil"](j/f),l=Math[l>=1?"floor":"ceil"](l/f),m=Math[m>=1?"floor":"ceil"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120===0}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b),d=c["offsetParent"in a.fn?"offsetParent":"parent"]();return d.length||(d=a("body")),parseInt(d.css("fontSize"),10)||parseInt(c.css("fontSize"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})});
/*
Plugin: jQuery Parallax
Version 1.1.3
Author: Ian Lunn
Twitter: @IanLunn
Author URL: http://www.ianlunn.co.uk/
Plugin URL: http://www.ianlunn.co.uk/plugins/jquery-parallax/

Dual licensed under the MIT and GPL licenses:
http://www.opensource.org/licenses/mit-license.php
http://www.gnu.org/licenses/gpl.html
*/

(function( $ ){
	var $window = $(window);
	var windowHeight = $window.height();

	$window.resize(function () {
		windowHeight = $window.height();
	});

	$.fn.parallax = function(xpos, speedFactor, outerHeight) {
		var $this = $(this);
		var getHeight;
		var firstTop;
		var paddingTop = 0;
		
		//get the starting position of each element to have parallax applied to it		
		$this.each(function(){
		    firstTop = $this.offset().top;
		});

		if (outerHeight) {
			getHeight = function(jqo) {
				return jqo.outerHeight(true);
			};
		} else {
			getHeight = function(jqo) {
				return jqo.height();
			};
		}
			
		// setup defaults if arguments aren't specified
		if (arguments.length < 1 || xpos === null) xpos = "50%";
		if (arguments.length < 2 || speedFactor === null) speedFactor = 0.1;
		if (arguments.length < 3 || outerHeight === null) outerHeight = true;
		
		// function to be called whenever the window is scrolled or resized
		function update(){
			var pos = $window.scrollTop();				

			$this.each(function(){
				var $element = $(this);
				var top = $element.offset().top;
				var height = getHeight($element);

				// Check if totally above or totally below viewport
				if (top + height < pos || top > pos + windowHeight) {
					return;
				}

				$this.css('backgroundPosition', xpos + " " + Math.round((firstTop - pos) * speedFactor) + "px");
			});
		}		

		$window.bind('scroll', update).resize(update);
		update();
	};
})(jQuery);

/**
 * jQuery plugin paroller.js v1.4.6
 * https://github.com/tgomilar/paroller.js
 * preview: https://tgomilar.github.io/paroller/
 **/
(function (factory) {
    'use strict';
    if (typeof define === 'function' && define.amd) {
        define('parollerjs', ['jquery'], factory);
    } else if (typeof module === 'object' && typeof module.exports === 'object') {
        module.exports = factory(require('jquery'));
    }
    else {
        factory(jQuery);
    }
})(function ($) {
    'use strict';

    var working = false;
    var scrollAction = function() {
        working = false;
    };

    var setDirection = {
        bgVertical: function (elem, bgOffset) {
            return elem.css({'background-position': 'center ' + -bgOffset + 'px'});
        },
        bgHorizontal: function (elem, bgOffset) {
            return elem.css({'background-position': -bgOffset + 'px' + ' center'});
        },
        vertical: function (elem, elemOffset, transition, oldTransform) {
            (oldTransform === 'none' ? oldTransform = '' : true);
            return elem.css({
                '-webkit-transform': 'translateY(' + elemOffset + 'px)' + oldTransform,
                '-moz-transform': 'translateY(' + elemOffset + 'px)' + oldTransform,
                'transform': 'translate(0,' + elemOffset + 'px)' + oldTransform,
                'transition': transition,
                'will-change': 'transform'
            });
        },
        horizontal: function (elem, elemOffset, transition, oldTransform) {
            (oldTransform === 'none' ? oldTransform = '' : true);
            return elem.css({
                '-webkit-transform': 'translateX(' + elemOffset + 'px)' + oldTransform,
                '-moz-transform': 'translateX(' + elemOffset + 'px)' + oldTransform,
                'transform': 'translate(' + elemOffset + 'px, 0)' + oldTransform,
                'transition': transition,
                'will-change': 'transform'
            });
        }
    };

    var setMovement = {
        factor: function (elem, width, options) {
            var dataFactor = elem.data('paroller-factor');
            var factor = (dataFactor) ? dataFactor : options.factor;
            if (width < 576) {
                var dataFactorXs = elem.data('paroller-factor-xs');
                var factorXs = (dataFactorXs) ? dataFactorXs : options.factorXs;
                return (factorXs) ? factorXs : factor;
            }
            else if (width <= 768) {
                var dataFactorSm = elem.data('paroller-factor-sm');
                var factorSm = (dataFactorSm) ? dataFactorSm : options.factorSm;
                return (factorSm) ? factorSm : factor;
            }
            else if (width <= 1024) {
                var dataFactorMd = elem.data('paroller-factor-md');
                var factorMd = (dataFactorMd) ? dataFactorMd : options.factorMd;
                return (factorMd) ? factorMd : factor;
            }
            else if (width <= 1200) {
                var dataFactorLg = elem.data('paroller-factor-lg');
                var factorLg = (dataFactorLg) ? dataFactorLg : options.factorLg;
                return (factorLg) ? factorLg : factor;
            } else if (width <= 1920) {
                var dataFactorXl = elem.data('paroller-factor-xl');
                var factorXl = (dataFactorXl) ? dataFactorXl : options.factorXl;
                return (factorXl) ? factorXl : factor;
            } else {
                return factor;
            }
        },
        bgOffset: function (offset, factor) {
            return Math.round(offset * factor);
        },
        transform: function (offset, factor, windowHeight, height) {
            return Math.round((offset - (windowHeight / 2) + height) * factor);
        }
    };

    var clearPositions = {
        background: function (elem) {
            return elem.css({'background-position': 'unset'});
        },
        foreground: function (elem) {
            return elem.css({
                'transform' : 'unset',
                'transition' : 'unset'
            });
        }
    };

    $.fn.paroller = function (options) {
        var windowHeight = $(window).height();
        var documentHeight = $(document).height();

        // default options
        var options = $.extend({
            factor: 0, // - to +
            factorXs: 0, // - to +
            factorSm: 0, // - to +
            factorMd: 0, // - to +
            factorLg: 0, // - to +
            factorXl: 0, // - to +
            transition: 'transform .1s ease', // CSS transition
            type: 'background', // foreground
            direction: 'vertical' // horizontal
        }, options);

        return this.each(function () {
            var $this = $(this);
            var width = $(window).width();
            var offset = $this.offset().top;
            var height = $this.outerHeight();

            var dataType = $this.data('paroller-type');
            var dataDirection = $this.data('paroller-direction');
            var dataTransition = $this.data('paroller-transition');
            var oldTransform = $this.css('transform');

            var transition = (dataTransition) ? dataTransition : options.transition;
            var type = (dataType) ? dataType : options.type;
            var direction = (dataDirection) ? dataDirection : options.direction;
            var factor = 0;
            var bgOffset = setMovement.bgOffset(offset, factor);
            var transform = setMovement.transform(offset, factor, windowHeight, height);

            if (type === 'background') {
                if (direction === 'vertical') {
                    setDirection.bgVertical($this, bgOffset);
                }
                else if (direction === 'horizontal') {
                    setDirection.bgHorizontal($this, bgOffset);
                }
            }
            else if (type === 'foreground') {
                if (direction === 'vertical') {
                    setDirection.vertical($this, transform, transition, oldTransform);
                }
                else if (direction === 'horizontal') {
                    setDirection.horizontal($this, transform, transition, oldTransform);
                }
            }

            $(window).on('resize', function () {
                var scrolling = $(this).scrollTop();
                width = $(window).width();
                offset = $this.offset().top;
                height = $this.outerHeight();
                factor = setMovement.factor($this, width, options);

                bgOffset = Math.round(offset * factor);
                transform = Math.round((offset - (windowHeight / 2) + height) * factor);

                if (! working) {
                    window.requestAnimationFrame(scrollAction);
                    working = true;
                }

                if (type === 'background') {
                    clearPositions.background($this);
                    if (direction === 'vertical') {
                        setDirection.bgVertical($this, bgOffset);
                    }
                    else if (direction === 'horizontal') {
                        setDirection.bgHorizontal($this, bgOffset);
                    }
                }
                else if ((type === 'foreground') && (scrolling <= documentHeight)) {
                    clearPositions.foreground($this);
                    if (direction === 'vertical') {
                        setDirection.vertical($this, transform, transition);
                    }
                    else if (direction === 'horizontal') {
                        setDirection.horizontal($this, transform, transition);
                    }
                }
            });

            $(window).on('scroll', function () {
                var scrolling = $(this).scrollTop();
                var scrollTop = $(document).scrollTop();

                if (scrollTop === 0) {
                    factor = 0;
                } else {
                    factor = setMovement.factor($this, width, options);
                }

                bgOffset = Math.round((offset - scrolling) * factor);
                transform = Math.round(((offset - (windowHeight / 2) + height) - scrolling) * factor);

                if (! working) {
                    window.requestAnimationFrame(scrollAction);
                    working = true;
                }

                if (type === 'background') {
                    if (direction === 'vertical') {
                        setDirection.bgVertical($this, bgOffset);
                    }
                    else if (direction === 'horizontal') {
                        setDirection.bgHorizontal($this, bgOffset);
                    }
                }
                else if ((type === 'foreground') && (scrolling <= documentHeight)) {
                    if (direction === 'vertical') {
                        setDirection.vertical($this, transform, transition, oldTransform);
                    }
                    else if (direction === 'horizontal') {
                        setDirection.horizontal($this, transform, transition, oldTransform);
                    }
                }
            });
        });
    };
});

/**
 * Copyright (c) 2007-2015 Ariel Flesler - aflesler<a>gmail<d>com | http://flesler.blogspot.com
 * Licensed under MIT
 * @author Ariel Flesler
 * @version 2.1.2
 */
;(function(f){"use strict";"function"===typeof define&&define.amd?define(["jquery"],f):"undefined"!==typeof module&&module.exports?module.exports=f(require("jquery")):f(jQuery)})(function($){"use strict";function n(a){return!a.nodeName||-1!==$.inArray(a.nodeName.toLowerCase(),["iframe","#document","html","body"])}function h(a){return $.isFunction(a)||$.isPlainObject(a)?a:{top:a,left:a}}var p=$.scrollTo=function(a,d,b){return $(window).scrollTo(a,d,b)};p.defaults={axis:"xy",duration:0,limit:!0};$.fn.scrollTo=function(a,d,b){"object"=== typeof d&&(b=d,d=0);"function"===typeof b&&(b={onAfter:b});"max"===a&&(a=9E9);b=$.extend({},p.defaults,b);d=d||b.duration;var u=b.queue&&1<b.axis.length;u&&(d/=2);b.offset=h(b.offset);b.over=h(b.over);return this.each(function(){function k(a){var k=$.extend({},b,{queue:!0,duration:d,complete:a&&function(){a.call(q,e,b)}});r.animate(f,k)}if(null!==a){var l=n(this),q=l?this.contentWindow||window:this,r=$(q),e=a,f={},t;switch(typeof e){case "number":case "string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(e)){e= h(e);break}e=l?$(e):$(e,q);case "object":if(e.length===0)return;if(e.is||e.style)t=(e=$(e)).offset()}var v=$.isFunction(b.offset)&&b.offset(q,e)||b.offset;$.each(b.axis.split(""),function(a,c){var d="x"===c?"Left":"Top",m=d.toLowerCase(),g="scroll"+d,h=r[g](),n=p.max(q,c);t?(f[g]=t[m]+(l?0:h-r.offset()[m]),b.margin&&(f[g]-=parseInt(e.css("margin"+d),10)||0,f[g]-=parseInt(e.css("border"+d+"Width"),10)||0),f[g]+=v[m]||0,b.over[m]&&(f[g]+=e["x"===c?"width":"height"]()*b.over[m])):(d=e[m],f[g]=d.slice&& "%"===d.slice(-1)?parseFloat(d)/100*n:d);b.limit&&/^\d+$/.test(f[g])&&(f[g]=0>=f[g]?0:Math.min(f[g],n));!a&&1<b.axis.length&&(h===f[g]?f={}:u&&(k(b.onAfterFirst),f={}))});k(b.onAfter)}})};p.max=function(a,d){var b="x"===d?"Width":"Height",h="scroll"+b;if(!n(a))return a[h]-$(a)[b.toLowerCase()]();var b="client"+b,k=a.ownerDocument||a.document,l=k.documentElement,k=k.body;return Math.max(l[h],k[h])-Math.min(l[b],k[b])};$.Tween.propHooks.scrollLeft=$.Tween.propHooks.scrollTop={get:function(a){return $(a.elem)[a.prop]()}, set:function(a){var d=this.get(a);if(a.options.interrupt&&a._last&&a._last!==d)return $(a.elem).stop();var b=Math.round(a.now);d!==b&&($(a.elem)[a.prop](b),a._last=this.get(a))}};return p});
// Sticky Plugin v1.0.4 for jQuery
// =============
// Author: Anthony Garand
// Improvements by German M. Bravo (Kronuz) and Ruud Kamphuis (ruudk)
// Improvements by Leonardo C. Daronco (daronco)
// Created: 02/14/2011
// Date: 07/20/2015
// Website: http://stickyjs.com/
// Description: Makes an element on the page stick on the screen as you scroll
//              It will only set the 'top' and 'position' of your element, you
//              might need to adjust the width in some cases.

(function (factory) {
    if (typeof define === 'function' && define.amd) {
        // AMD. Register as an anonymous module.
        define(['jquery'], factory);
    } else if (typeof module === 'object' && module.exports) {
        // Node/CommonJS
        module.exports = factory(require('jquery'));
    } else {
        // Browser globals
        factory(jQuery);
    }
}(function ($) {
    var slice = Array.prototype.slice; // save ref to original slice()
    var splice = Array.prototype.splice; // save ref to original slice()

  var defaults = {
      topSpacing: 0,
      bottomSpacing: 0,
      className: 'is-sticky',
      wrapperClassName: 'sticky-wrapper',
      center: false,
      getWidthFrom: '',
      widthFromWrapper: true, // works only when .getWidthFrom is empty
      responsiveWidth: false,
      zIndex: 'inherit'
    },
    $window = $(window),
    $document = $(document),
    sticked = [],
    windowHeight = $window.height(),
    scroller = function() {
      var scrollTop = $window.scrollTop(),
        documentHeight = $document.height(),
        dwh = documentHeight - windowHeight,
        extra = (scrollTop > dwh) ? dwh - scrollTop : 0;

      for (var i = 0, l = sticked.length; i < l; i++) {
        var s = sticked[i],
          elementTop = s.stickyWrapper.offset().top,
          etse = elementTop - s.topSpacing - extra;

        //update height in case of dynamic content
        s.stickyWrapper.css('height', s.stickyElement.outerHeight());

        if (scrollTop <= etse) {
          if (s.currentTop !== null) {
            s.stickyElement
              .css({
                'width': '',
                'position': '',
                'top': '',
                'z-index': ''
              });
            s.stickyElement.parent().removeClass(s.className);
            s.stickyElement.trigger('sticky-end', [s]);
            s.currentTop = null;
          }
        }
        else {
          var newTop = documentHeight - s.stickyElement.outerHeight()
            - s.topSpacing - s.bottomSpacing - scrollTop - extra;
          if (newTop < 0) {
            newTop = newTop + s.topSpacing;
          } else {
            newTop = s.topSpacing;
          }
          if (s.currentTop !== newTop) {
            var newWidth;
            if (s.getWidthFrom) {
                padding =  s.stickyElement.innerWidth() - s.stickyElement.width();
                newWidth = $(s.getWidthFrom).width() - padding || null;
            } else if (s.widthFromWrapper) {
                newWidth = s.stickyWrapper.width();
            }
            if (newWidth == null) {
                newWidth = s.stickyElement.width();
            }
            s.stickyElement
              .css('width', newWidth)
              .css('position', 'fixed')
              .css('top', newTop)
              .css('z-index', s.zIndex);

            s.stickyElement.parent().addClass(s.className);

            if (s.currentTop === null) {
              s.stickyElement.trigger('sticky-start', [s]);
            } else {
              // sticky is started but it have to be repositioned
              s.stickyElement.trigger('sticky-update', [s]);
            }

            if (s.currentTop === s.topSpacing && s.currentTop > newTop || s.currentTop === null && newTop < s.topSpacing) {
              // just reached bottom || just started to stick but bottom is already reached
              s.stickyElement.trigger('sticky-bottom-reached', [s]);
            } else if(s.currentTop !== null && newTop === s.topSpacing && s.currentTop < newTop) {
              // sticky is started && sticked at topSpacing && overflowing from top just finished
              s.stickyElement.trigger('sticky-bottom-unreached', [s]);
            }

            s.currentTop = newTop;
          }

          // Check if sticky has reached end of container and stop sticking
          var stickyWrapperContainer = s.stickyWrapper.parent();
          var unstick = (s.stickyElement.offset().top + s.stickyElement.outerHeight() >= stickyWrapperContainer.offset().top + stickyWrapperContainer.outerHeight()) && (s.stickyElement.offset().top <= s.topSpacing);

          if( unstick ) {
            s.stickyElement
              .css('position', 'absolute')
              .css('top', '')
              .css('bottom', 0)
              .css('z-index', '');
          } else {
            s.stickyElement
              .css('position', 'fixed')
              .css('top', newTop)
              .css('bottom', '')
              .css('z-index', s.zIndex);
          }
        }
      }
    },
    resizer = function() {
      windowHeight = $window.height();

      for (var i = 0, l = sticked.length; i < l; i++) {
        var s = sticked[i];
        var newWidth = null;
        if (s.getWidthFrom) {
            if (s.responsiveWidth) {
                newWidth = $(s.getWidthFrom).width();
            }
        } else if(s.widthFromWrapper) {
            newWidth = s.stickyWrapper.width();
        }
        if (newWidth != null) {
            s.stickyElement.css('width', newWidth);
        }
      }
    },
    methods = {
      init: function(options) {
        return this.each(function() {
          var o = $.extend({}, defaults, options);
          var stickyElement = $(this);

          var stickyId = stickyElement.attr('id');
          var wrapperId = stickyId ? stickyId + '-' + defaults.wrapperClassName : defaults.wrapperClassName;
          var wrapper = $('<div></div>')
            .attr('id', wrapperId)
            .addClass(o.wrapperClassName);

          stickyElement.wrapAll(function() {
            if ($(this).parent("#" + wrapperId).length == 0) {
                    return wrapper;
            }
});

          var stickyWrapper = stickyElement.parent();

          if (o.center) {
            stickyWrapper.css({width:stickyElement.outerWidth(),marginLeft:"auto",marginRight:"auto"});
          }

          if (stickyElement.css("float") === "right") {
            stickyElement.css({"float":"none"}).parent().css({"float":"right"});
          }

          o.stickyElement = stickyElement;
          o.stickyWrapper = stickyWrapper;
          o.currentTop    = null;

          sticked.push(o);

          methods.setWrapperHeight(this);
          methods.setupChangeListeners(this);
        });
      },

      setWrapperHeight: function(stickyElement) {
        var element = $(stickyElement);
        var stickyWrapper = element.parent();
        if (stickyWrapper) {
          stickyWrapper.css('height', element.outerHeight());
        }
      },

      setupChangeListeners: function(stickyElement) {
        if (window.MutationObserver) {
          var mutationObserver = new window.MutationObserver(function(mutations) {
            if (mutations[0].addedNodes.length || mutations[0].removedNodes.length) {
              methods.setWrapperHeight(stickyElement);
            }
          });
          mutationObserver.observe(stickyElement, {subtree: true, childList: true});
        } else {
          if (window.addEventListener) {
            stickyElement.addEventListener('DOMNodeInserted', function() {
              methods.setWrapperHeight(stickyElement);
            }, false);
            stickyElement.addEventListener('DOMNodeRemoved', function() {
              methods.setWrapperHeight(stickyElement);
            }, false);
          } else if (window.attachEvent) {
            stickyElement.attachEvent('onDOMNodeInserted', function() {
              methods.setWrapperHeight(stickyElement);
            });
            stickyElement.attachEvent('onDOMNodeRemoved', function() {
              methods.setWrapperHeight(stickyElement);
            });
          }
        }
      },
      update: scroller,
      unstick: function(options) {
        return this.each(function() {
          var that = this;
          var unstickyElement = $(that);

          var removeIdx = -1;
          var i = sticked.length;
          while (i-- > 0) {
            if (sticked[i].stickyElement.get(0) === that) {
                splice.call(sticked,i,1);
                removeIdx = i;
            }
          }
          if(removeIdx !== -1) {
            unstickyElement.unwrap();
            unstickyElement
              .css({
                'width': '',
                'position': '',
                'top': '',
                'float': '',
                'z-index': ''
              })
            ;
          }
        });
      }
    };

  // should be more efficient than using $window.scroll(scroller) and $window.resize(resizer):
  if (window.addEventListener) {
    window.addEventListener('scroll', scroller, false);
    window.addEventListener('resize', resizer, false);
  } else if (window.attachEvent) {
    window.attachEvent('onscroll', scroller);
    window.attachEvent('onresize', resizer);
  }

  $.fn.sticky = function(method) {
    if (methods[method]) {
      return methods[method].apply(this, slice.call(arguments, 1));
    } else if (typeof method === 'object' || !method ) {
      return methods.init.apply( this, arguments );
    } else {
      $.error('Method ' + method + ' does not exist on jQuery.sticky');
    }
  };

  $.fn.unstick = function(method) {
    if (methods[method]) {
      return methods[method].apply(this, slice.call(arguments, 1));
    } else if (typeof method === 'object' || !method ) {
      return methods.unstick.apply( this, arguments );
    } else {
      $.error('Method ' + method + ' does not exist on jQuery.sticky');
    }
  };
  $(function() {
    setTimeout(scroller, 0);
  });
}));

/*
 * textillate.js
 * http://jschr.github.com/textillate
 * MIT licensed
 *
 * Copyright (C) 2012-2013 Jordan Schroter
 */

(function ($) {
  "use strict";

  function isInEffect (effect) {
    return /In/.test(effect) || $.inArray(effect, $.fn.textillate.defaults.inEffects) >= 0;
  };

  function isOutEffect (effect) {
    return /Out/.test(effect) || $.inArray(effect, $.fn.textillate.defaults.outEffects) >= 0;
  };


  function stringToBoolean(str) {
    if (str !== "true" && str !== "false") return str;
    return (str === "true");
  };

  // custom get data api method
  function getData (node) {
    var attrs = node.attributes || []
      , data = {};

    if (!attrs.length) return data;

    $.each(attrs, function (i, attr) {
      var nodeName = attr.nodeName.replace(/delayscale/, 'delayScale');
      if (/^data-in-*/.test(nodeName)) {
        data.in = data.in || {};
        data.in[nodeName.replace(/data-in-/, '')] = stringToBoolean(attr.nodeValue);
      } else if (/^data-out-*/.test(nodeName)) {
        data.out = data.out || {};
        data.out[nodeName.replace(/data-out-/, '')] =stringToBoolean(attr.nodeValue);
      } else if (/^data-*/.test(nodeName)) {
        data[nodeName.replace(/data-/, '')] = stringToBoolean(attr.nodeValue);
      }
    })

    return data;
  }

  function shuffle (o) {
      for (var j, x, i = o.length; i; j = parseInt(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);
      return o;
  }

  function animate ($t, effect, cb) {
    $t.addClass('animated ' + effect)
      .css('visibility', 'visible')
      .show();

    $t.one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend', function () {
        $t.removeClass('animated ' + effect);
        cb && cb();
    });
  }

  function animateTokens ($tokens, options, cb) {
    var that = this
      , count = $tokens.length;

    if (!count) {
      cb && cb();
      return;
    }

    if (options.shuffle) $tokens = shuffle($tokens);
    if (options.reverse) $tokens = $tokens.toArray().reverse();

    $.each($tokens, function (i, t) {
      var $token = $(t);

      function complete () {
        if (isInEffect(options.effect)) {
          $token.css('visibility', 'visible');
        } else if (isOutEffect(options.effect)) {
          $token.css('visibility', 'hidden');
        }
        count -= 1;
        if (!count && cb) cb();
      }

      var delay = options.sync ? options.delay : options.delay * i * options.delayScale;

      $token.text() ?
        setTimeout(function () { animate($token, options.effect, complete) }, delay) :
        complete();
    });
  };

  var Textillate = function (element, options) {
    var base = this
      , $element = $(element);

    base.init = function () {
      base.$texts = $element.find(options.selector);

      if (!base.$texts.length) {
        base.$texts = $('<ul class="texts"><li>' + $element.html() + '</li></ul>');
        $element.html(base.$texts);
      }

      base.$texts.hide();

      base.$current = $('<span>')
        .html(base.$texts.find(':first-child').html())
        .prependTo($element);

      if (isInEffect(options.in.effect)) {
        base.$current.css('visibility', 'hidden');
      } else if (isOutEffect(options.out.effect)) {
        base.$current.css('visibility', 'visible');
      }

      base.setOptions(options);

      base.timeoutRun = null;

      setTimeout(function () {
        base.options.autoStart && base.start();
      }, base.options.initialDelay)
    };

    base.setOptions = function (options) {
      base.options = options;
    };

    base.triggerEvent = function (name) {
      var e = $.Event(name + '.tlt');
      $element.trigger(e, base);
      return e;
    };

    base.in = function (index, cb) {
      index = index || 0;

      var $elem = base.$texts.find(':nth-child(' + ((index||0) + 1) + ')')
        , options = $.extend(true, {}, base.options, $elem.length ? getData($elem[0]) : {})
        , $tokens;

      $elem.addClass('current');

      base.triggerEvent('inAnimationBegin');
      $element.attr('data-active', $elem.data('id'));

      base.$current
        .html($elem.html())
        .lettering('words');

      // split words to individual characters if token type is set to 'char'
      if (base.options.type == "char") {
        base.$current.find('[class^="word"]')
            .css({
              'display': 'inline-block',
              // fix for poor ios performance
              '-webkit-transform': 'translate3d(0,0,0)',
              '-moz-transform': 'translate3d(0,0,0)',
              '-o-transform': 'translate3d(0,0,0)',
              'transform': 'translate3d(0,0,0)'
            })
            .each(function () { $(this).lettering() });
      }

      $tokens = base.$current
        .find('[class^="' + base.options.type + '"]')
        .css('display', 'inline-block');

      if (isInEffect(options.in.effect)) {
        $tokens.css('visibility', 'hidden');
      } else if (isOutEffect(options.in.effect)) {
        $tokens.css('visibility', 'visible');
      }

      base.currentIndex = index;

      animateTokens($tokens, options.in, function () {
        base.triggerEvent('inAnimationEnd');
        if (options.in.callback) options.in.callback();
        if (cb) cb(base);
      });
    };

    base.out = function (cb) {
      var $elem = base.$texts.find(':nth-child(' + ((base.currentIndex||0) + 1) + ')')
        , $tokens = base.$current.find('[class^="' + base.options.type + '"]')
        , options = $.extend(true, {}, base.options, $elem.length ? getData($elem[0]) : {})

      base.triggerEvent('outAnimationBegin');

      animateTokens($tokens, options.out, function () {
        $elem.removeClass('current');
        base.triggerEvent('outAnimationEnd');
        $element.removeAttr('data-active');
        if (options.out.callback) options.out.callback();
        if (cb) cb(base);
      });
    };

    base.start = function (index) {
      setTimeout(function () {
        base.triggerEvent('start');

        (function run (index) {
          base.in(index, function () {
            var length = base.$texts.children().length;

            index += 1;

            if (!base.options.loop && index >= length) {
              if (base.options.callback) base.options.callback();
              base.triggerEvent('end');
            } else {
              index = index % length;

              base.timeoutRun = setTimeout(function () {
                base.out(function () {
                  run(index)
                });
              }, base.options.minDisplayTime);
            }
          });
        }(index || 0));
      }, base.options.initialDelay);
    };

    base.stop = function () {
      if (base.timeoutRun) {
        clearInterval(base.timeoutRun);
        base.timeoutRun = null;
      }
    };

    base.init();
  }

  $.fn.textillate = function (settings, args) {
    return this.each(function () {
      var $this = $(this)
        , data = $this.data('textillate')
        , options = $.extend(true, {}, $.fn.textillate.defaults, getData(this), typeof settings == 'object' && settings);

      if (!data) {
        $this.data('textillate', (data = new Textillate(this, options)));
      } else if (typeof settings == 'string') {
        data[settings].apply(data, [].concat(args));
      } else {
        data.setOptions.call(data, options);
      }
    })
  };

  $.fn.textillate.defaults = {
    selector: '.texts',
    loop: false,
    minDisplayTime: 2000,
    initialDelay: 0,
    in: {
      effect: 'fadeInLeftBig',
      delayScale: 1.5,
      delay: 50,
      sync: false,
      reverse: false,
      shuffle: false,
      callback: function () {}
    },
    out: {
      effect: 'hinge',
      delayScale: 1.5,
      delay: 50,
      sync: false,
      reverse: false,
      shuffle: false,
      callback: function () {}
    },
    autoStart: true,
    inEffects: [],
    outEffects: [ 'hinge' ],
    callback: function () {},
    type: 'char'
  };

}(jQuery));

/*!
 * @fileOverview TouchSwipe - jQuery Plugin
 * @version 1.6.18
 *
 * @author Matt Bryson http://www.github.com/mattbryson
 * @see https://github.com/mattbryson/TouchSwipe-Jquery-Plugin
 * @see http://labs.rampinteractive.co.uk/touchSwipe/
 * @see http://plugins.jquery.com/project/touchSwipe
 * @license
 * Copyright (c) 2010-2015 Matt Bryson
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 */
!function(factory){"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],factory):factory("undefined"!=typeof module&&module.exports?require("jquery"):jQuery)}(function($){"use strict";function init(options){return!options||void 0!==options.allowPageScroll||void 0===options.swipe&&void 0===options.swipeStatus||(options.allowPageScroll=NONE),void 0!==options.click&&void 0===options.tap&&(options.tap=options.click),options||(options={}),options=$.extend({},$.fn.swipe.defaults,options),this.each(function(){var $this=$(this),plugin=$this.data(PLUGIN_NS);plugin||(plugin=new TouchSwipe(this,options),$this.data(PLUGIN_NS,plugin))})}function TouchSwipe(element,options){function touchStart(jqEvent){if(!(getTouchInProgress()||$(jqEvent.target).closest(options.excludedElements,$element).length>0)){var event=jqEvent.originalEvent?jqEvent.originalEvent:jqEvent;if(!event.pointerType||"mouse"!=event.pointerType||0!=options.fallbackToMouseEvents){var ret,touches=event.touches,evt=touches?touches[0]:event;return phase=PHASE_START,touches?fingerCount=touches.length:options.preventDefaultEvents!==!1&&jqEvent.preventDefault(),distance=0,direction=null,currentDirection=null,pinchDirection=null,duration=0,startTouchesDistance=0,endTouchesDistance=0,pinchZoom=1,pinchDistance=0,maximumsMap=createMaximumsData(),cancelMultiFingerRelease(),createFingerData(0,evt),!touches||fingerCount===options.fingers||options.fingers===ALL_FINGERS||hasPinches()?(startTime=getTimeStamp(),2==fingerCount&&(createFingerData(1,touches[1]),startTouchesDistance=endTouchesDistance=calculateTouchesDistance(fingerData[0].start,fingerData[1].start)),(options.swipeStatus||options.pinchStatus)&&(ret=triggerHandler(event,phase))):ret=!1,ret===!1?(phase=PHASE_CANCEL,triggerHandler(event,phase),ret):(options.hold&&(holdTimeout=setTimeout($.proxy(function(){$element.trigger("hold",[event.target]),options.hold&&(ret=options.hold.call($element,event,event.target))},this),options.longTapThreshold)),setTouchInProgress(!0),null)}}}function touchMove(jqEvent){var event=jqEvent.originalEvent?jqEvent.originalEvent:jqEvent;if(phase!==PHASE_END&&phase!==PHASE_CANCEL&&!inMultiFingerRelease()){var ret,touches=event.touches,evt=touches?touches[0]:event,currentFinger=updateFingerData(evt);if(endTime=getTimeStamp(),touches&&(fingerCount=touches.length),options.hold&&clearTimeout(holdTimeout),phase=PHASE_MOVE,2==fingerCount&&(0==startTouchesDistance?(createFingerData(1,touches[1]),startTouchesDistance=endTouchesDistance=calculateTouchesDistance(fingerData[0].start,fingerData[1].start)):(updateFingerData(touches[1]),endTouchesDistance=calculateTouchesDistance(fingerData[0].end,fingerData[1].end),pinchDirection=calculatePinchDirection(fingerData[0].end,fingerData[1].end)),pinchZoom=calculatePinchZoom(startTouchesDistance,endTouchesDistance),pinchDistance=Math.abs(startTouchesDistance-endTouchesDistance)),fingerCount===options.fingers||options.fingers===ALL_FINGERS||!touches||hasPinches()){if(direction=calculateDirection(currentFinger.start,currentFinger.end),currentDirection=calculateDirection(currentFinger.last,currentFinger.end),validateDefaultEvent(jqEvent,currentDirection),distance=calculateDistance(currentFinger.start,currentFinger.end),duration=calculateDuration(),setMaxDistance(direction,distance),ret=triggerHandler(event,phase),!options.triggerOnTouchEnd||options.triggerOnTouchLeave){var inBounds=!0;if(options.triggerOnTouchLeave){var bounds=getbounds(this);inBounds=isInBounds(currentFinger.end,bounds)}!options.triggerOnTouchEnd&&inBounds?phase=getNextPhase(PHASE_MOVE):options.triggerOnTouchLeave&&!inBounds&&(phase=getNextPhase(PHASE_END)),phase!=PHASE_CANCEL&&phase!=PHASE_END||triggerHandler(event,phase)}}else phase=PHASE_CANCEL,triggerHandler(event,phase);ret===!1&&(phase=PHASE_CANCEL,triggerHandler(event,phase))}}function touchEnd(jqEvent){var event=jqEvent.originalEvent?jqEvent.originalEvent:jqEvent,touches=event.touches;if(touches){if(touches.length&&!inMultiFingerRelease())return startMultiFingerRelease(event),!0;if(touches.length&&inMultiFingerRelease())return!0}return inMultiFingerRelease()&&(fingerCount=fingerCountAtRelease),endTime=getTimeStamp(),duration=calculateDuration(),didSwipeBackToCancel()||!validateSwipeDistance()?(phase=PHASE_CANCEL,triggerHandler(event,phase)):options.triggerOnTouchEnd||options.triggerOnTouchEnd===!1&&phase===PHASE_MOVE?(options.preventDefaultEvents!==!1&&jqEvent.cancelable!==!1&&jqEvent.preventDefault(),phase=PHASE_END,triggerHandler(event,phase)):!options.triggerOnTouchEnd&&hasTap()?(phase=PHASE_END,triggerHandlerForGesture(event,phase,TAP)):phase===PHASE_MOVE&&(phase=PHASE_CANCEL,triggerHandler(event,phase)),setTouchInProgress(!1),null}function touchCancel(){fingerCount=0,endTime=0,startTime=0,startTouchesDistance=0,endTouchesDistance=0,pinchZoom=1,cancelMultiFingerRelease(),setTouchInProgress(!1)}function touchLeave(jqEvent){var event=jqEvent.originalEvent?jqEvent.originalEvent:jqEvent;options.triggerOnTouchLeave&&(phase=getNextPhase(PHASE_END),triggerHandler(event,phase))}function removeListeners(){$element.unbind(START_EV,touchStart),$element.unbind(CANCEL_EV,touchCancel),$element.unbind(MOVE_EV,touchMove),$element.unbind(END_EV,touchEnd),LEAVE_EV&&$element.unbind(LEAVE_EV,touchLeave),setTouchInProgress(!1)}function getNextPhase(currentPhase){var nextPhase=currentPhase,validTime=validateSwipeTime(),validDistance=validateSwipeDistance(),didCancel=didSwipeBackToCancel();return!validTime||didCancel?nextPhase=PHASE_CANCEL:!validDistance||currentPhase!=PHASE_MOVE||options.triggerOnTouchEnd&&!options.triggerOnTouchLeave?!validDistance&&currentPhase==PHASE_END&&options.triggerOnTouchLeave&&(nextPhase=PHASE_CANCEL):nextPhase=PHASE_END,nextPhase}function triggerHandler(event,phase){var ret,touches=event.touches;return(didSwipe()||hasSwipes())&&(ret=triggerHandlerForGesture(event,phase,SWIPE)),(didPinch()||hasPinches())&&ret!==!1&&(ret=triggerHandlerForGesture(event,phase,PINCH)),didDoubleTap()&&ret!==!1?ret=triggerHandlerForGesture(event,phase,DOUBLE_TAP):didLongTap()&&ret!==!1?ret=triggerHandlerForGesture(event,phase,LONG_TAP):didTap()&&ret!==!1&&(ret=triggerHandlerForGesture(event,phase,TAP)),phase===PHASE_CANCEL&&touchCancel(event),phase===PHASE_END&&(touches?touches.length||touchCancel(event):touchCancel(event)),ret}function triggerHandlerForGesture(event,phase,gesture){var ret;if(gesture==SWIPE){if($element.trigger("swipeStatus",[phase,direction||null,distance||0,duration||0,fingerCount,fingerData,currentDirection]),options.swipeStatus&&(ret=options.swipeStatus.call($element,event,phase,direction||null,distance||0,duration||0,fingerCount,fingerData,currentDirection),ret===!1))return!1;if(phase==PHASE_END&&validateSwipe()){if(clearTimeout(singleTapTimeout),clearTimeout(holdTimeout),$element.trigger("swipe",[direction,distance,duration,fingerCount,fingerData,currentDirection]),options.swipe&&(ret=options.swipe.call($element,event,direction,distance,duration,fingerCount,fingerData,currentDirection),ret===!1))return!1;switch(direction){case LEFT:$element.trigger("swipeLeft",[direction,distance,duration,fingerCount,fingerData,currentDirection]),options.swipeLeft&&(ret=options.swipeLeft.call($element,event,direction,distance,duration,fingerCount,fingerData,currentDirection));break;case RIGHT:$element.trigger("swipeRight",[direction,distance,duration,fingerCount,fingerData,currentDirection]),options.swipeRight&&(ret=options.swipeRight.call($element,event,direction,distance,duration,fingerCount,fingerData,currentDirection));break;case UP:$element.trigger("swipeUp",[direction,distance,duration,fingerCount,fingerData,currentDirection]),options.swipeUp&&(ret=options.swipeUp.call($element,event,direction,distance,duration,fingerCount,fingerData,currentDirection));break;case DOWN:$element.trigger("swipeDown",[direction,distance,duration,fingerCount,fingerData,currentDirection]),options.swipeDown&&(ret=options.swipeDown.call($element,event,direction,distance,duration,fingerCount,fingerData,currentDirection))}}}if(gesture==PINCH){if($element.trigger("pinchStatus",[phase,pinchDirection||null,pinchDistance||0,duration||0,fingerCount,pinchZoom,fingerData]),options.pinchStatus&&(ret=options.pinchStatus.call($element,event,phase,pinchDirection||null,pinchDistance||0,duration||0,fingerCount,pinchZoom,fingerData),ret===!1))return!1;if(phase==PHASE_END&&validatePinch())switch(pinchDirection){case IN:$element.trigger("pinchIn",[pinchDirection||null,pinchDistance||0,duration||0,fingerCount,pinchZoom,fingerData]),options.pinchIn&&(ret=options.pinchIn.call($element,event,pinchDirection||null,pinchDistance||0,duration||0,fingerCount,pinchZoom,fingerData));break;case OUT:$element.trigger("pinchOut",[pinchDirection||null,pinchDistance||0,duration||0,fingerCount,pinchZoom,fingerData]),options.pinchOut&&(ret=options.pinchOut.call($element,event,pinchDirection||null,pinchDistance||0,duration||0,fingerCount,pinchZoom,fingerData))}}return gesture==TAP?phase!==PHASE_CANCEL&&phase!==PHASE_END||(clearTimeout(singleTapTimeout),clearTimeout(holdTimeout),hasDoubleTap()&&!inDoubleTap()?(doubleTapStartTime=getTimeStamp(),singleTapTimeout=setTimeout($.proxy(function(){doubleTapStartTime=null,$element.trigger("tap",[event.target]),options.tap&&(ret=options.tap.call($element,event,event.target))},this),options.doubleTapThreshold)):(doubleTapStartTime=null,$element.trigger("tap",[event.target]),options.tap&&(ret=options.tap.call($element,event,event.target)))):gesture==DOUBLE_TAP?phase!==PHASE_CANCEL&&phase!==PHASE_END||(clearTimeout(singleTapTimeout),clearTimeout(holdTimeout),doubleTapStartTime=null,$element.trigger("doubletap",[event.target]),options.doubleTap&&(ret=options.doubleTap.call($element,event,event.target))):gesture==LONG_TAP&&(phase!==PHASE_CANCEL&&phase!==PHASE_END||(clearTimeout(singleTapTimeout),doubleTapStartTime=null,$element.trigger("longtap",[event.target]),options.longTap&&(ret=options.longTap.call($element,event,event.target)))),ret}function validateSwipeDistance(){var valid=!0;return null!==options.threshold&&(valid=distance>=options.threshold),valid}function didSwipeBackToCancel(){var cancelled=!1;return null!==options.cancelThreshold&&null!==direction&&(cancelled=getMaxDistance(direction)-distance>=options.cancelThreshold),cancelled}function validatePinchDistance(){return null===options.pinchThreshold||pinchDistance>=options.pinchThreshold}function validateSwipeTime(){var result;return result=!options.maxTimeThreshold||!(duration>=options.maxTimeThreshold)}function validateDefaultEvent(jqEvent,direction){if(options.preventDefaultEvents!==!1)if(options.allowPageScroll===NONE)jqEvent.preventDefault();else{var auto=options.allowPageScroll===AUTO;switch(direction){case LEFT:(options.swipeLeft&&auto||!auto&&options.allowPageScroll!=HORIZONTAL)&&jqEvent.preventDefault();break;case RIGHT:(options.swipeRight&&auto||!auto&&options.allowPageScroll!=HORIZONTAL)&&jqEvent.preventDefault();break;case UP:(options.swipeUp&&auto||!auto&&options.allowPageScroll!=VERTICAL)&&jqEvent.preventDefault();break;case DOWN:(options.swipeDown&&auto||!auto&&options.allowPageScroll!=VERTICAL)&&jqEvent.preventDefault();break;case NONE:}}}function validatePinch(){var hasCorrectFingerCount=validateFingers(),hasEndPoint=validateEndPoint(),hasCorrectDistance=validatePinchDistance();return hasCorrectFingerCount&&hasEndPoint&&hasCorrectDistance}function hasPinches(){return!!(options.pinchStatus||options.pinchIn||options.pinchOut)}function didPinch(){return!(!validatePinch()||!hasPinches())}function validateSwipe(){var hasValidTime=validateSwipeTime(),hasValidDistance=validateSwipeDistance(),hasCorrectFingerCount=validateFingers(),hasEndPoint=validateEndPoint(),didCancel=didSwipeBackToCancel(),valid=!didCancel&&hasEndPoint&&hasCorrectFingerCount&&hasValidDistance&&hasValidTime;return valid}function hasSwipes(){return!!(options.swipe||options.swipeStatus||options.swipeLeft||options.swipeRight||options.swipeUp||options.swipeDown)}function didSwipe(){return!(!validateSwipe()||!hasSwipes())}function validateFingers(){return fingerCount===options.fingers||options.fingers===ALL_FINGERS||!SUPPORTS_TOUCH}function validateEndPoint(){return 0!==fingerData[0].end.x}function hasTap(){return!!options.tap}function hasDoubleTap(){return!!options.doubleTap}function hasLongTap(){return!!options.longTap}function validateDoubleTap(){if(null==doubleTapStartTime)return!1;var now=getTimeStamp();return hasDoubleTap()&&now-doubleTapStartTime<=options.doubleTapThreshold}function inDoubleTap(){return validateDoubleTap()}function validateTap(){return(1===fingerCount||!SUPPORTS_TOUCH)&&(isNaN(distance)||distance<options.threshold)}function validateLongTap(){return duration>options.longTapThreshold&&distance<DOUBLE_TAP_THRESHOLD}function didTap(){return!(!validateTap()||!hasTap())}function didDoubleTap(){return!(!validateDoubleTap()||!hasDoubleTap())}function didLongTap(){return!(!validateLongTap()||!hasLongTap())}function startMultiFingerRelease(event){previousTouchEndTime=getTimeStamp(),fingerCountAtRelease=event.touches.length+1}function cancelMultiFingerRelease(){previousTouchEndTime=0,fingerCountAtRelease=0}function inMultiFingerRelease(){var withinThreshold=!1;if(previousTouchEndTime){var diff=getTimeStamp()-previousTouchEndTime;diff<=options.fingerReleaseThreshold&&(withinThreshold=!0)}return withinThreshold}function getTouchInProgress(){return!($element.data(PLUGIN_NS+"_intouch")!==!0)}function setTouchInProgress(val){$element&&(val===!0?($element.bind(MOVE_EV,touchMove),$element.bind(END_EV,touchEnd),LEAVE_EV&&$element.bind(LEAVE_EV,touchLeave)):($element.unbind(MOVE_EV,touchMove,!1),$element.unbind(END_EV,touchEnd,!1),LEAVE_EV&&$element.unbind(LEAVE_EV,touchLeave,!1)),$element.data(PLUGIN_NS+"_intouch",val===!0))}function createFingerData(id,evt){var f={start:{x:0,y:0},last:{x:0,y:0},end:{x:0,y:0}};return f.start.x=f.last.x=f.end.x=evt.pageX||evt.clientX,f.start.y=f.last.y=f.end.y=evt.pageY||evt.clientY,fingerData[id]=f,f}function updateFingerData(evt){var id=void 0!==evt.identifier?evt.identifier:0,f=getFingerData(id);return null===f&&(f=createFingerData(id,evt)),f.last.x=f.end.x,f.last.y=f.end.y,f.end.x=evt.pageX||evt.clientX,f.end.y=evt.pageY||evt.clientY,f}function getFingerData(id){return fingerData[id]||null}function setMaxDistance(direction,distance){direction!=NONE&&(distance=Math.max(distance,getMaxDistance(direction)),maximumsMap[direction].distance=distance)}function getMaxDistance(direction){if(maximumsMap[direction])return maximumsMap[direction].distance}function createMaximumsData(){var maxData={};return maxData[LEFT]=createMaximumVO(LEFT),maxData[RIGHT]=createMaximumVO(RIGHT),maxData[UP]=createMaximumVO(UP),maxData[DOWN]=createMaximumVO(DOWN),maxData}function createMaximumVO(dir){return{direction:dir,distance:0}}function calculateDuration(){return endTime-startTime}function calculateTouchesDistance(startPoint,endPoint){var diffX=Math.abs(startPoint.x-endPoint.x),diffY=Math.abs(startPoint.y-endPoint.y);return Math.round(Math.sqrt(diffX*diffX+diffY*diffY))}function calculatePinchZoom(startDistance,endDistance){var percent=endDistance/startDistance*1;return percent.toFixed(2)}function calculatePinchDirection(){return pinchZoom<1?OUT:IN}function calculateDistance(startPoint,endPoint){return Math.round(Math.sqrt(Math.pow(endPoint.x-startPoint.x,2)+Math.pow(endPoint.y-startPoint.y,2)))}function calculateAngle(startPoint,endPoint){var x=startPoint.x-endPoint.x,y=endPoint.y-startPoint.y,r=Math.atan2(y,x),angle=Math.round(180*r/Math.PI);return angle<0&&(angle=360-Math.abs(angle)),angle}function calculateDirection(startPoint,endPoint){if(comparePoints(startPoint,endPoint))return NONE;var angle=calculateAngle(startPoint,endPoint);return angle<=45&&angle>=0?LEFT:angle<=360&&angle>=315?LEFT:angle>=135&&angle<=225?RIGHT:angle>45&&angle<135?DOWN:UP}function getTimeStamp(){var now=new Date;return now.getTime()}function getbounds(el){el=$(el);var offset=el.offset(),bounds={left:offset.left,right:offset.left+el.outerWidth(),top:offset.top,bottom:offset.top+el.outerHeight()};return bounds}function isInBounds(point,bounds){return point.x>bounds.left&&point.x<bounds.right&&point.y>bounds.top&&point.y<bounds.bottom}function comparePoints(pointA,pointB){return pointA.x==pointB.x&&pointA.y==pointB.y}var options=$.extend({},options),useTouchEvents=SUPPORTS_TOUCH||SUPPORTS_POINTER||!options.fallbackToMouseEvents,START_EV=useTouchEvents?SUPPORTS_POINTER?SUPPORTS_POINTER_IE10?"MSPointerDown":"pointerdown":"touchstart":"mousedown",MOVE_EV=useTouchEvents?SUPPORTS_POINTER?SUPPORTS_POINTER_IE10?"MSPointerMove":"pointermove":"touchmove":"mousemove",END_EV=useTouchEvents?SUPPORTS_POINTER?SUPPORTS_POINTER_IE10?"MSPointerUp":"pointerup":"touchend":"mouseup",LEAVE_EV=useTouchEvents?SUPPORTS_POINTER?"mouseleave":null:"mouseleave",CANCEL_EV=SUPPORTS_POINTER?SUPPORTS_POINTER_IE10?"MSPointerCancel":"pointercancel":"touchcancel",distance=0,direction=null,currentDirection=null,duration=0,startTouchesDistance=0,endTouchesDistance=0,pinchZoom=1,pinchDistance=0,pinchDirection=0,maximumsMap=null,$element=$(element),phase="start",fingerCount=0,fingerData={},startTime=0,endTime=0,previousTouchEndTime=0,fingerCountAtRelease=0,doubleTapStartTime=0,singleTapTimeout=null,holdTimeout=null;try{$element.bind(START_EV,touchStart),$element.bind(CANCEL_EV,touchCancel)}catch(e){$.error("events not supported "+START_EV+","+CANCEL_EV+" on jQuery.swipe")}this.enable=function(){return this.disable(),$element.bind(START_EV,touchStart),$element.bind(CANCEL_EV,touchCancel),$element},this.disable=function(){return removeListeners(),$element},this.destroy=function(){removeListeners(),$element.data(PLUGIN_NS,null),$element=null},this.option=function(property,value){if("object"==typeof property)options=$.extend(options,property);else if(void 0!==options[property]){if(void 0===value)return options[property];options[property]=value}else{if(!property)return options;$.error("Option "+property+" does not exist on jQuery.swipe.options")}return null}}var VERSION="1.6.18",LEFT="left",RIGHT="right",UP="up",DOWN="down",IN="in",OUT="out",NONE="none",AUTO="auto",SWIPE="swipe",PINCH="pinch",TAP="tap",DOUBLE_TAP="doubletap",LONG_TAP="longtap",HORIZONTAL="horizontal",VERTICAL="vertical",ALL_FINGERS="all",DOUBLE_TAP_THRESHOLD=10,PHASE_START="start",PHASE_MOVE="move",PHASE_END="end",PHASE_CANCEL="cancel",SUPPORTS_TOUCH="ontouchstart"in window,SUPPORTS_POINTER_IE10=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled&&!SUPPORTS_TOUCH,SUPPORTS_POINTER=(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)&&!SUPPORTS_TOUCH,PLUGIN_NS="TouchSwipe",defaults={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:".noSwipe",preventDefaultEvents:!0};$.fn.swipe=function(method){var $this=$(this),plugin=$this.data(PLUGIN_NS);if(plugin&&"string"==typeof method){if(plugin[method])return plugin[method].apply(plugin,Array.prototype.slice.call(arguments,1));$.error("Method "+method+" does not exist on jQuery.swipe")}else if(plugin&&"object"==typeof method)plugin.option.apply(plugin,arguments);else if(!(plugin||"object"!=typeof method&&method))return init.apply(this,arguments);return $this},$.fn.swipe.version=VERSION,$.fn.swipe.defaults=defaults,$.fn.swipe.phases={PHASE_START:PHASE_START,PHASE_MOVE:PHASE_MOVE,PHASE_END:PHASE_END,PHASE_CANCEL:PHASE_CANCEL},$.fn.swipe.directions={LEFT:LEFT,RIGHT:RIGHT,UP:UP,DOWN:DOWN,IN:IN,OUT:OUT},$.fn.swipe.pageScroll={NONE:NONE,HORIZONTAL:HORIZONTAL,VERTICAL:VERTICAL,AUTO:AUTO},$.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,FOUR:4,FIVE:5,ALL:ALL_FINGERS}});
/*! jQuery Validation Plugin - v1.19.1 - 6/15/2019
 * https://jqueryvalidation.org/
 * Copyright (c) 2019 Jrn Zaefferer; Licensed MIT */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&module.exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){a.extend(a.fn,{validate:function(b){if(!this.length)return void(b&&b.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var c=a.data(this[0],"validator");return c?c:(this.attr("novalidate","novalidate"),c=new a.validator(b,this[0]),a.data(this[0],"validator",c),c.settings.onsubmit&&(this.on("click.validate",":submit",function(b){c.submitButton=b.currentTarget,a(this).hasClass("cancel")&&(c.cancelSubmit=!0),void 0!==a(this).attr("formnovalidate")&&(c.cancelSubmit=!0)}),this.on("submit.validate",function(b){function d(){var d,e;return c.submitButton&&(c.settings.submitHandler||c.formSubmitted)&&(d=a("<input type='hidden'/>").attr("name",c.submitButton.name).val(a(c.submitButton).val()).appendTo(c.currentForm)),!(c.settings.submitHandler&&!c.settings.debug)||(e=c.settings.submitHandler.call(c,c.currentForm,b),d&&d.remove(),void 0!==e&&e)}return c.settings.debug&&b.preventDefault(),c.cancelSubmit?(c.cancelSubmit=!1,d()):c.form()?c.pendingRequest?(c.formSubmitted=!0,!1):d():(c.focusInvalid(),!1)})),c)},valid:function(){var b,c,d;return a(this[0]).is("form")?b=this.validate().form():(d=[],b=!0,c=a(this[0].form).validate(),this.each(function(){b=c.element(this)&&b,b||(d=d.concat(c.errorList))}),c.errorList=d),b},rules:function(b,c){var d,e,f,g,h,i,j=this[0],k="undefined"!=typeof this.attr("contenteditable")&&"false"!==this.attr("contenteditable");if(null!=j&&(!j.form&&k&&(j.form=this.closest("form")[0],j.name=this.attr("name")),null!=j.form)){if(b)switch(d=a.data(j.form,"validator").settings,e=d.rules,f=a.validator.staticRules(j),b){case"add":a.extend(f,a.validator.normalizeRule(c)),delete f.messages,e[j.name]=f,c.messages&&(d.messages[j.name]=a.extend(d.messages[j.name],c.messages));break;case"remove":return c?(i={},a.each(c.split(/\s/),function(a,b){i[b]=f[b],delete f[b]}),i):(delete e[j.name],f)}return g=a.validator.normalizeRules(a.extend({},a.validator.classRules(j),a.validator.attributeRules(j),a.validator.dataRules(j),a.validator.staticRules(j)),j),g.required&&(h=g.required,delete g.required,g=a.extend({required:h},g)),g.remote&&(h=g.remote,delete g.remote,g=a.extend(g,{remote:h})),g}}}),a.extend(a.expr.pseudos||a.expr[":"],{blank:function(b){return!a.trim(""+a(b).val())},filled:function(b){var c=a(b).val();return null!==c&&!!a.trim(""+c)},unchecked:function(b){return!a(b).prop("checked")}}),a.validator=function(b,c){this.settings=a.extend(!0,{},a.validator.defaults,b),this.currentForm=c,this.init()},a.validator.format=function(b,c){return 1===arguments.length?function(){var c=a.makeArray(arguments);return c.unshift(b),a.validator.format.apply(this,c)}:void 0===c?b:(arguments.length>2&&c.constructor!==Array&&(c=a.makeArray(arguments).slice(1)),c.constructor!==Array&&(c=[c]),a.each(c,function(a,c){b=b.replace(new RegExp("\\{"+a+"\\}","g"),function(){return c})}),b)},a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(a){this.lastActive=a,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(a)))},onfocusout:function(a){this.checkable(a)||!(a.name in this.submitted)&&this.optional(a)||this.element(a)},onkeyup:function(b,c){var d=[16,17,18,20,35,36,37,38,39,40,45,144,225];9===c.which&&""===this.elementValue(b)||a.inArray(c.keyCode,d)!==-1||(b.name in this.submitted||b.name in this.invalid)&&this.element(b)},onclick:function(a){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(b,c,d){"radio"===b.type?this.findByName(b.name).addClass(c).removeClass(d):a(b).addClass(c).removeClass(d)},unhighlight:function(b,c,d){"radio"===b.type?this.findByName(b.name).removeClass(c).addClass(d):a(b).removeClass(c).addClass(d)}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}."),step:a.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){function b(b){var c="undefined"!=typeof a(this).attr("contenteditable")&&"false"!==a(this).attr("contenteditable");if(!this.form&&c&&(this.form=a(this).closest("form")[0],this.name=a(this).attr("name")),d===this.form){var e=a.data(this.form,"validator"),f="on"+b.type.replace(/^validate/,""),g=e.settings;g[f]&&!a(this).is(g.ignore)&&g[f].call(e,this,b)}}this.labelContainer=a(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm),this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var c,d=this.currentForm,e=this.groups={};a.each(this.settings.groups,function(b,c){"string"==typeof c&&(c=c.split(/\s/)),a.each(c,function(a,c){e[c]=b})}),c=this.settings.rules,a.each(c,function(b,d){c[b]=a.validator.normalizeRule(d)}),a(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable], [type='button']",b).on("click.validate","select, option, [type='radio'], [type='checkbox']",b),this.settings.invalidHandler&&a(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),a.extend(this.submitted,this.errorMap),this.invalid=a.extend({},this.errorMap),this.valid()||a(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=this.elements();b[a];a++)this.check(b[a]);return this.valid()},element:function(b){var c,d,e=this.clean(b),f=this.validationTargetFor(e),g=this,h=!0;return void 0===f?delete this.invalid[e.name]:(this.prepareElement(f),this.currentElements=a(f),d=this.groups[f.name],d&&a.each(this.groups,function(a,b){b===d&&a!==f.name&&(e=g.validationTargetFor(g.clean(g.findByName(a))),e&&e.name in g.invalid&&(g.currentElements.push(e),h=g.check(e)&&h))}),c=this.check(f)!==!1,h=h&&c,c?this.invalid[f.name]=!1:this.invalid[f.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),a(b).attr("aria-invalid",!c)),h},showErrors:function(b){if(b){var c=this;a.extend(this.errorMap,b),this.errorList=a.map(this.errorMap,function(a,b){return{message:a,element:c.findByName(b)[0]}}),this.successList=a.grep(this.successList,function(a){return!(a.name in b)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){a.fn.resetForm&&a(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var b=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(b)},resetElements:function(a){var b;if(this.settings.unhighlight)for(b=0;a[b];b++)this.settings.unhighlight.call(this,a[b],this.settings.errorClass,""),this.findByName(a[b].name).removeClass(this.settings.validClass);else a.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var b,c=0;for(b in a)void 0!==a[b]&&null!==a[b]&&a[b]!==!1&&c++;return c},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(a){a.not(this.containers).text(""),this.addWrapper(a).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").trigger("focus").trigger("focusin")}catch(b){}},findLastActive:function(){var b=this.lastActive;return b&&1===a.grep(this.errorList,function(a){return a.element.name===b.name}).length&&b},elements:function(){var b=this,c={};return a(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var d=this.name||a(this).attr("name"),e="undefined"!=typeof a(this).attr("contenteditable")&&"false"!==a(this).attr("contenteditable");return!d&&b.settings.debug&&window.console&&console.error("%o has no name assigned",this),e&&(this.form=a(this).closest("form")[0],this.name=d),this.form===b.currentForm&&(!(d in c||!b.objectLength(a(this).rules()))&&(c[d]=!0,!0))})},clean:function(b){return a(b)[0]},errors:function(){var b=this.settings.errorClass.split(" ").join(".");return a(this.settings.errorElement+"."+b,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=a([]),this.toHide=a([])},reset:function(){this.resetInternals(),this.currentElements=a([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset(),this.toHide=this.errorsFor(a)},elementValue:function(b){var c,d,e=a(b),f=b.type,g="undefined"!=typeof e.attr("contenteditable")&&"false"!==e.attr("contenteditable");return"radio"===f||"checkbox"===f?this.findByName(b.name).filter(":checked").val():"number"===f&&"undefined"!=typeof b.validity?b.validity.badInput?"NaN":e.val():(c=g?e.text():e.val(),"file"===f?"C:\\fakepath\\"===c.substr(0,12)?c.substr(12):(d=c.lastIndexOf("/"),d>=0?c.substr(d+1):(d=c.lastIndexOf("\\"),d>=0?c.substr(d+1):c)):"string"==typeof c?c.replace(/\r/g,""):c)},check:function(b){b=this.validationTargetFor(this.clean(b));var c,d,e,f,g=a(b).rules(),h=a.map(g,function(a,b){return b}).length,i=!1,j=this.elementValue(b);"function"==typeof g.normalizer?f=g.normalizer:"function"==typeof this.settings.normalizer&&(f=this.settings.normalizer),f&&(j=f.call(b,j),delete g.normalizer);for(d in g){e={method:d,parameters:g[d]};try{if(c=a.validator.methods[d].call(this,j,b,e.parameters),"dependency-mismatch"===c&&1===h){i=!0;continue}if(i=!1,"pending"===c)return void(this.toHide=this.toHide.not(this.errorsFor(b)));if(!c)return this.formatAndAdd(b,e),!1}catch(k){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+b.id+", check the '"+e.method+"' method.",k),k instanceof TypeError&&(k.message+=".  Exception occurred when checking element "+b.id+", check the '"+e.method+"' method."),k}}if(!i)return this.objectLength(g)&&this.successList.push(b),!0},customDataMessage:function(b,c){return a(b).data("msg"+c.charAt(0).toUpperCase()+c.substring(1).toLowerCase())||a(b).data("msg")},customMessage:function(a,b){var c=this.settings.messages[a];return c&&(c.constructor===String?c:c[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]},defaultMessage:function(b,c){"string"==typeof c&&(c={method:c});var d=this.findDefined(this.customMessage(b.name,c.method),this.customDataMessage(b,c.method),!this.settings.ignoreTitle&&b.title||void 0,a.validator.messages[c.method],"<strong>Warning: No message defined for "+b.name+"</strong>"),e=/\$?\{(\d+)\}/g;return"function"==typeof d?d=d.call(this,c.parameters,b):e.test(d)&&(d=a.validator.format(d.replace(e,"{$1}"),c.parameters)),d},formatAndAdd:function(a,b){var c=this.defaultMessage(a,b);this.errorList.push({message:c,element:a,method:b.method}),this.errorMap[a.name]=c,this.submitted[a.name]=c},addWrapper:function(a){return this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper))),a},defaultShowErrors:function(){var a,b,c;for(a=0;this.errorList[a];a++)c=this.errorList[a],this.settings.highlight&&this.settings.highlight.call(this,c.element,this.settings.errorClass,this.settings.validClass),this.showLabel(c.element,c.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight)for(a=0,b=this.validElements();b[a];a++)this.settings.unhighlight.call(this,b[a],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(b,c){var d,e,f,g,h=this.errorsFor(b),i=this.idOrName(b),j=a(b).attr("aria-describedby");h.length?(h.removeClass(this.settings.validClass).addClass(this.settings.errorClass),h.html(c)):(h=a("<"+this.settings.errorElement+">").attr("id",i+"-error").addClass(this.settings.errorClass).html(c||""),d=h,this.settings.wrapper&&(d=h.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(d):this.settings.errorPlacement?this.settings.errorPlacement.call(this,d,a(b)):d.insertAfter(b),h.is("label")?h.attr("for",i):0===h.parents("label[for='"+this.escapeCssMeta(i)+"']").length&&(f=h.attr("id"),j?j.match(new RegExp("\\b"+this.escapeCssMeta(f)+"\\b"))||(j+=" "+f):j=f,a(b).attr("aria-describedby",j),e=this.groups[b.name],e&&(g=this,a.each(g.groups,function(b,c){c===e&&a("[name='"+g.escapeCssMeta(b)+"']",g.currentForm).attr("aria-describedby",h.attr("id"))})))),!c&&this.settings.success&&(h.text(""),"string"==typeof this.settings.success?h.addClass(this.settings.success):this.settings.success(h,b)),this.toShow=this.toShow.add(h)},errorsFor:function(b){var c=this.escapeCssMeta(this.idOrName(b)),d=a(b).attr("aria-describedby"),e="label[for='"+c+"'], label[for='"+c+"'] *";return d&&(e=e+", #"+this.escapeCssMeta(d).replace(/\s+/g,", #")),this.errors().filter(e)},escapeCssMeta:function(a){return a.replace(/([\\!"#$%&'()*+,.\/:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(b){return this.checkable(b)&&(b=this.findByName(b.name)),a(b).not(this.settings.ignore)[0]},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(b){return a(this.currentForm).find("[name='"+this.escapeCssMeta(b)+"']")},getLength:function(b,c){switch(c.nodeName.toLowerCase()){case"select":return a("option:selected",c).length;case"input":if(this.checkable(c))return this.findByName(c.name).filter(":checked").length}return b.length},depend:function(a,b){return!this.dependTypes[typeof a]||this.dependTypes[typeof a](a,b)},dependTypes:{"boolean":function(a){return a},string:function(b,c){return!!a(b,c.form).length},"function":function(a,b){return a(b)}},optional:function(b){var c=this.elementValue(b);return!a.validator.methods.required.call(this,c,b)&&"dependency-mismatch"},startRequest:function(b){this.pending[b.name]||(this.pendingRequest++,a(b).addClass(this.settings.pendingClass),this.pending[b.name]=!0)},stopRequest:function(b,c){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[b.name],a(b).removeClass(this.settings.pendingClass),c&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(a(this.currentForm).submit(),this.submitButton&&a("input:hidden[name='"+this.submitButton.name+"']",this.currentForm).remove(),this.formSubmitted=!1):!c&&0===this.pendingRequest&&this.formSubmitted&&(a(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(b,c){return c="string"==typeof c&&c||"remote",a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:!0,message:this.defaultMessage(b,{method:c})})},destroy:function(){this.resetForm(),a(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur").find(".validate-lessThan-blur").off(".validate-lessThan").removeClass("validate-lessThan-blur").find(".validate-lessThanEqual-blur").off(".validate-lessThanEqual").removeClass("validate-lessThanEqual-blur").find(".validate-greaterThanEqual-blur").off(".validate-greaterThanEqual").removeClass("validate-greaterThanEqual-blur").find(".validate-greaterThan-blur").off(".validate-greaterThan").removeClass("validate-greaterThan-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(b,c){b.constructor===String?this.classRuleSettings[b]=c:a.extend(this.classRuleSettings,b)},classRules:function(b){var c={},d=a(b).attr("class");return d&&a.each(d.split(" "),function(){this in a.validator.classRuleSettings&&a.extend(c,a.validator.classRuleSettings[this])}),c},normalizeAttributeRule:function(a,b,c,d){/min|max|step/.test(c)&&(null===b||/number|range|text/.test(b))&&(d=Number(d),isNaN(d)&&(d=void 0)),d||0===d?a[c]=d:b===c&&"range"!==b&&(a[c]=!0)},attributeRules:function(b){var c,d,e={},f=a(b),g=b.getAttribute("type");for(c in a.validator.methods)"required"===c?(d=b.getAttribute(c),""===d&&(d=!0),d=!!d):d=f.attr(c),this.normalizeAttributeRule(e,g,c,d);return e.maxlength&&/-1|2147483647|524288/.test(e.maxlength)&&delete e.maxlength,e},dataRules:function(b){var c,d,e={},f=a(b),g=b.getAttribute("type");for(c in a.validator.methods)d=f.data("rule"+c.charAt(0).toUpperCase()+c.substring(1).toLowerCase()),""===d&&(d=!0),this.normalizeAttributeRule(e,g,c,d);return e},staticRules:function(b){var c={},d=a.data(b.form,"validator");return d.settings.rules&&(c=a.validator.normalizeRule(d.settings.rules[b.name])||{}),c},normalizeRules:function(b,c){return a.each(b,function(d,e){if(e===!1)return void delete b[d];if(e.param||e.depends){var f=!0;switch(typeof e.depends){case"string":f=!!a(e.depends,c.form).length;break;case"function":f=e.depends.call(c,c)}f?b[d]=void 0===e.param||e.param:(a.data(c.form,"validator").resetElements(a(c)),delete b[d])}}),a.each(b,function(d,e){b[d]=a.isFunction(e)&&"normalizer"!==d?e(c):e}),a.each(["minlength","maxlength"],function(){b[this]&&(b[this]=Number(b[this]))}),a.each(["rangelength","range"],function(){var c;b[this]&&(a.isArray(b[this])?b[this]=[Number(b[this][0]),Number(b[this][1])]:"string"==typeof b[this]&&(c=b[this].replace(/[\[\]]/g,"").split(/[\s,]+/),b[this]=[Number(c[0]),Number(c[1])]))}),a.validator.autoCreateRanges&&(null!=b.min&&null!=b.max&&(b.range=[b.min,b.max],delete b.min,delete b.max),null!=b.minlength&&null!=b.maxlength&&(b.rangelength=[b.minlength,b.maxlength],delete b.minlength,delete b.maxlength)),b},normalizeRule:function(b){if("string"==typeof b){var c={};a.each(b.split(/\s/),function(){c[this]=!0}),b=c}return b},addMethod:function(b,c,d){a.validator.methods[b]=c,a.validator.messages[b]=void 0!==d?d:a.validator.messages[b],c.length<3&&a.validator.addClassRules(b,a.validator.normalizeRule(b))},methods:{required:function(b,c,d){if(!this.depend(d,c))return"dependency-mismatch";if("select"===c.nodeName.toLowerCase()){var e=a(c).val();return e&&e.length>0}return this.checkable(c)?this.getLength(b,c)>0:void 0!==b&&null!==b&&b.length>0},email:function(a,b){return this.optional(b)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(a)},url:function(a,b){return this.optional(b)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[\/?#]\S*)?$/i.test(a)},date:function(){var a=!1;return function(b,c){return a||(a=!0,this.settings.debug&&window.console&&console.warn("The `date` method is deprecated and will be removed in version '2.0.0'.\nPlease don't use it, since it relies on the Date constructor, which\nbehaves very differently across browsers and locales. Use `dateISO`\ninstead or one of the locale specific methods in `localizations/`\nand `additional-methods.js`.")),this.optional(c)||!/Invalid|NaN/.test(new Date(b).toString())}}(),dateISO:function(a,b){return this.optional(b)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(a)},number:function(a,b){return this.optional(b)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},minlength:function(b,c,d){var e=a.isArray(b)?b.length:this.getLength(b,c);return this.optional(c)||e>=d},maxlength:function(b,c,d){var e=a.isArray(b)?b.length:this.getLength(b,c);return this.optional(c)||e<=d},rangelength:function(b,c,d){var e=a.isArray(b)?b.length:this.getLength(b,c);return this.optional(c)||e>=d[0]&&e<=d[1]},min:function(a,b,c){return this.optional(b)||a>=c},max:function(a,b,c){return this.optional(b)||a<=c},range:function(a,b,c){return this.optional(b)||a>=c[0]&&a<=c[1]},step:function(b,c,d){var e,f=a(c).attr("type"),g="Step attribute on input type "+f+" is not supported.",h=["text","number","range"],i=new RegExp("\\b"+f+"\\b"),j=f&&!i.test(h.join()),k=function(a){var b=(""+a).match(/(?:\.(\d+))?$/);return b&&b[1]?b[1].length:0},l=function(a){return Math.round(a*Math.pow(10,e))},m=!0;if(j)throw new Error(g);return e=k(d),(k(b)>e||l(b)%l(d)!==0)&&(m=!1),this.optional(c)||m},equalTo:function(b,c,d){var e=a(d);return this.settings.onfocusout&&e.not(".validate-equalTo-blur").length&&e.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){a(c).valid()}),b===e.val()},remote:function(b,c,d,e){if(this.optional(c))return"dependency-mismatch";e="string"==typeof e&&e||"remote";var f,g,h,i=this.previousValue(c,e);return this.settings.messages[c.name]||(this.settings.messages[c.name]={}),i.originalMessage=i.originalMessage||this.settings.messages[c.name][e],this.settings.messages[c.name][e]=i.message,d="string"==typeof d&&{url:d}||d,h=a.param(a.extend({data:b},d.data)),i.old===h?i.valid:(i.old=h,f=this,this.startRequest(c),g={},g[c.name]=b,a.ajax(a.extend(!0,{mode:"abort",port:"validate"+c.name,dataType:"json",data:g,context:f.currentForm,success:function(a){var d,g,h,j=a===!0||"true"===a;f.settings.messages[c.name][e]=i.originalMessage,j?(h=f.formSubmitted,f.resetInternals(),f.toHide=f.errorsFor(c),f.formSubmitted=h,f.successList.push(c),f.invalid[c.name]=!1,f.showErrors()):(d={},g=a||f.defaultMessage(c,{method:e,parameters:b}),d[c.name]=i.message=g,f.invalid[c.name]=!0,f.showErrors(d)),i.valid=j,f.stopRequest(c,j)}},d)),"pending")}}});var b,c={};return a.ajaxPrefilter?a.ajaxPrefilter(function(a,b,d){var e=a.port;"abort"===a.mode&&(c[e]&&c[e].abort(),c[e]=d)}):(b=a.ajax,a.ajax=function(d){var e=("mode"in d?d:a.ajaxSettings).mode,f=("port"in d?d:a.ajaxSettings).port;return"abort"===e?(c[f]&&c[f].abort(),c[f]=b.apply(this,arguments),c[f]):b.apply(this,arguments)}),a});
/*! KineticJS v5.1.0 2014-03-27 http://www.kineticjs.com by Eric Rowell @ericdrowell - MIT License https://github.com/ericdrowell/KineticJS/wiki/License*/
var Kinetic={};!function(a){var b=Math.PI/180;Kinetic={version:"5.1.0",stages:[],idCounter:0,ids:{},names:{},shapes:{},listenClickTap:!1,inDblClickWindow:!1,enableTrace:!1,traceArrMax:100,dblClickWindow:400,pixelRatio:void 0,dragDistance:0,angleDeg:!0,UA:function(){var b=a.navigator&&a.navigator.userAgent||"",c=b.toLowerCase(),d=/(chrome)[ \/]([\w.]+)/.exec(c)||/(webkit)[ \/]([\w.]+)/.exec(c)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(c)||/(msie) ([\w.]+)/.exec(c)||c.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(c)||[],e=!!b.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i);return{browser:d[1]||"",version:d[2]||"0",mobile:e}}(),Filters:{},Node:function(a){this._init(a)},Shape:function(a){this.__init(a)},Container:function(a){this.__init(a)},Stage:function(a){this.___init(a)},BaseLayer:function(a){this.___init(a)},Layer:function(a){this.____init(a)},FastLayer:function(a){this.____init(a)},Group:function(a){this.___init(a)},isDragging:function(){var a=Kinetic.DD;return a?a.isDragging:!1},isDragReady:function(){var a=Kinetic.DD;return a?!!a.node:!1},_addId:function(a,b){void 0!==b&&(this.ids[b]=a)},_removeId:function(a){void 0!==a&&delete this.ids[a]},_addName:function(a,b){void 0!==b&&(void 0===this.names[b]&&(this.names[b]=[]),this.names[b].push(a))},_removeName:function(a,b){if(void 0!==a){var c=this.names[a];if(void 0!==c){for(var d=0;d<c.length;d++){var e=c[d];e._id===b&&c.splice(d,1)}0===c.length&&delete this.names[a]}}},getAngle:function(a){return this.angleDeg?a*b:a}}}(this),function(a,b){if("object"==typeof exports){var c=require("canvas"),d=require("jsdom").jsdom,e=d("<!DOCTYPE html><html><head></head><body></body></html>"),f=b();return Kinetic.document=e,Kinetic.window=Kinetic.document.createWindow(),Kinetic.window.Image=c.Image,Kinetic.root=a,Kinetic._nodeCanvas=c,void(module.exports=f)}"function"==typeof define&&define.amd&&define(b),Kinetic.document=document,Kinetic.window=window,Kinetic.root=a}((1,eval)("this"),function(){return Kinetic}),function(){Kinetic.Collection=function(){var a=[].slice.call(arguments),b=a.length,c=0;for(this.length=b;b>c;c++)this[c]=a[c];return this},Kinetic.Collection.prototype=[],Kinetic.Collection.prototype.each=function(a){for(var b=0;b<this.length;b++)a(this[b],b)},Kinetic.Collection.prototype.toArray=function(){var a,b=[],c=this.length;for(a=0;c>a;a++)b.push(this[a]);return b},Kinetic.Collection.toCollection=function(a){var b,c=new Kinetic.Collection,d=a.length;for(b=0;d>b;b++)c.push(a[b]);return c},Kinetic.Collection._mapMethod=function(a){Kinetic.Collection.prototype[a]=function(){var b,c=this.length,d=[].slice.call(arguments);for(b=0;c>b;b++)this[b][a].apply(this[b],d);return this}},Kinetic.Collection.mapMethods=function(a){var b=a.prototype;for(var c in b)Kinetic.Collection._mapMethod(c)},Kinetic.Transform=function(a){this.m=a&&a.slice()||[1,0,0,1,0,0]},Kinetic.Transform.prototype={copy:function(){return new Kinetic.Transform(this.m)},point:function(a){var b=this.m;return{x:b[0]*a.x+b[2]*a.y+b[4],y:b[1]*a.x+b[3]*a.y+b[5]}},translate:function(a,b){return this.m[4]+=this.m[0]*a+this.m[2]*b,this.m[5]+=this.m[1]*a+this.m[3]*b,this},scale:function(a,b){return this.m[0]*=a,this.m[1]*=a,this.m[2]*=b,this.m[3]*=b,this},rotate:function(a){var b=Math.cos(a),c=Math.sin(a),d=this.m[0]*b+this.m[2]*c,e=this.m[1]*b+this.m[3]*c,f=this.m[0]*-c+this.m[2]*b,g=this.m[1]*-c+this.m[3]*b;return this.m[0]=d,this.m[1]=e,this.m[2]=f,this.m[3]=g,this},getTranslation:function(){return{x:this.m[4],y:this.m[5]}},skew:function(a,b){var c=this.m[0]+this.m[2]*b,d=this.m[1]+this.m[3]*b,e=this.m[2]+this.m[0]*a,f=this.m[3]+this.m[1]*a;return this.m[0]=c,this.m[1]=d,this.m[2]=e,this.m[3]=f,this},multiply:function(a){var b=this.m[0]*a.m[0]+this.m[2]*a.m[1],c=this.m[1]*a.m[0]+this.m[3]*a.m[1],d=this.m[0]*a.m[2]+this.m[2]*a.m[3],e=this.m[1]*a.m[2]+this.m[3]*a.m[3],f=this.m[0]*a.m[4]+this.m[2]*a.m[5]+this.m[4],g=this.m[1]*a.m[4]+this.m[3]*a.m[5]+this.m[5];return this.m[0]=b,this.m[1]=c,this.m[2]=d,this.m[3]=e,this.m[4]=f,this.m[5]=g,this},invert:function(){var a=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),b=this.m[3]*a,c=-this.m[1]*a,d=-this.m[2]*a,e=this.m[0]*a,f=a*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),g=a*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=b,this.m[1]=c,this.m[2]=d,this.m[3]=e,this.m[4]=f,this.m[5]=g,this},getMatrix:function(){return this.m},setAbsolutePosition:function(a,b){var c=this.m[0],d=this.m[1],e=this.m[2],f=this.m[3],g=this.m[4],h=this.m[5],i=(c*(b-h)-d*(a-g))/(c*f-d*e),j=(a-g-e*i)/c;return this.translate(j,i)}};var a="2d",b="[object Array]",c="[object Number]",d="[object String]",e=Math.PI/180,f=180/Math.PI,g="#",h="",i="0",j="Kinetic warning: ",k="Kinetic error: ",l="rgb(",m={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},n=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;Kinetic.Util={_isElement:function(a){return!(!a||1!=a.nodeType)},_isFunction:function(a){return!!(a&&a.constructor&&a.call&&a.apply)},_isObject:function(a){return!!a&&a.constructor==Object},_isArray:function(a){return Object.prototype.toString.call(a)==b},_isNumber:function(a){return Object.prototype.toString.call(a)==c},_isString:function(a){return Object.prototype.toString.call(a)==d},_throttle:function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:(new Date).getTime(),g=null,f=a.apply(d,e),d=e=null};return function(){var j=(new Date).getTime();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k?(clearTimeout(g),g=null,h=j,f=a.apply(d,e),d=e=null):g||c.trailing===!1||(g=setTimeout(i,k)),f}},_hasMethods:function(a){var b,c=[];for(b in a)this._isFunction(a[b])&&c.push(b);return c.length>0},createCanvasElement:function(){var a=Kinetic.document.createElement("canvas");return a.style=a.style||{},a},isBrowser:function(){return"object"!=typeof exports},_isInDocument:function(a){for(;a=a.parentNode;)if(a==Kinetic.document)return!0;return!1},_simplifyArray:function(a){var b,c,d=[],e=a.length,f=Kinetic.Util;for(b=0;e>b;b++)c=a[b],f._isNumber(c)?c=Math.round(1e3*c)/1e3:f._isString(c)||(c=c.toString()),d.push(c);return d},_getImage:function(b,c){var d,e;if(b)if(this._isElement(b))c(b);else if(this._isString(b))d=new Kinetic.window.Image,d.onload=function(){c(d)},d.src=b;else if(b.data){e=Kinetic.Util.createCanvasElement(),e.width=b.width,e.height=b.height;var f=e.getContext(a);f.putImageData(b,0,0),this._getImage(e.toDataURL(),c)}else c(null);else c(null)},_getRGBAString:function(a){var b=a.red||0,c=a.green||0,d=a.blue||0,e=a.alpha||1;return["rgba(",b,",",c,",",d,",",e,")"].join(h)},_rgbToHex:function(a,b,c){return((1<<24)+(a<<16)+(b<<8)+c).toString(16).slice(1)},_hexToRgb:function(a){a=a.replace(g,h);var b=parseInt(a,16);return{r:b>>16&255,g:b>>8&255,b:255&b}},getRandomColor:function(){for(var a=(16777215*Math.random()<<0).toString(16);a.length<6;)a=i+a;return g+a},get:function(a,b){return void 0===a?b:a},getRGB:function(a){var b;return a in m?(b=m[a],{r:b[0],g:b[1],b:b[2]}):a[0]===g?this._hexToRgb(a.substring(1)):a.substr(0,4)===l?(b=n.exec(a.replace(/ /g,"")),{r:parseInt(b[1],10),g:parseInt(b[2],10),b:parseInt(b[3],10)}):{r:0,g:0,b:0}},_merge:function(a,b){var c=this._clone(b);for(var d in a)c[d]=this._isObject(a[d])?this._merge(a[d],c[d]):a[d];return c},cloneObject:function(a){var b={};for(var c in a)b[c]=this._isObject(a[c])?this.cloneObject(a[c]):this._isArray(a[c])?this.cloneArray(a[c]):a[c];return b},cloneArray:function(a){return a.slice(0)},_degToRad:function(a){return a*e},_radToDeg:function(a){return a*f},_capitalize:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},error:function(a){throw new Error(k+a)},warn:function(a){Kinetic.root.console&&console.warn&&console.warn(j+a)},extend:function(a,b){for(var c in b.prototype)c in a.prototype||(a.prototype[c]=b.prototype[c])},addMethods:function(a,b){var c;for(c in b)a.prototype[c]=b[c]},_getControlPoints:function(a,b,c,d,e,f,g){var h=Math.sqrt(Math.pow(c-a,2)+Math.pow(d-b,2)),i=Math.sqrt(Math.pow(e-c,2)+Math.pow(f-d,2)),j=g*h/(h+i),k=g*i/(h+i),l=c-j*(e-a),m=d-j*(f-b),n=c+k*(e-a),o=d+k*(f-b);return[l,m,n,o]},_expandPoints:function(a,b){var c,d,e=a.length,f=[];for(c=2;e-2>c;c+=2)d=Kinetic.Util._getControlPoints(a[c-2],a[c-1],a[c],a[c+1],a[c+2],a[c+3],b),f.push(d[0]),f.push(d[1]),f.push(a[c]),f.push(a[c+1]),f.push(d[2]),f.push(d[3]);return f},_removeLastLetter:function(a){return a.substring(0,a.length-1)}}}(),function(){var a=Kinetic.Util.createCanvasElement(),b=a.getContext("2d"),c=Kinetic.UA.mobile?function(){var a=window.devicePixelRatio||1,c=b.webkitBackingStorePixelRatio||b.mozBackingStorePixelRatio||b.msBackingStorePixelRatio||b.oBackingStorePixelRatio||b.backingStorePixelRatio||1;return a/c}():1;Kinetic.Canvas=function(a){this.init(a)},Kinetic.Canvas.prototype={init:function(a){a=a||{};var b=a.pixelRatio||Kinetic.pixelRatio||c;this.pixelRatio=b,this._canvas=Kinetic.Util.createCanvasElement(),this._canvas.style.padding=0,this._canvas.style.margin=0,this._canvas.style.border=0,this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top=0,this._canvas.style.left=0},getContext:function(){return this.context},getPixelRatio:function(){return this.pixelRatio},setPixelRatio:function(a){this.pixelRatio=a,this.setSize(this.getWidth(),this.getHeight())},setWidth:function(a){this.width=this._canvas.width=a*this.pixelRatio,this._canvas.style.width=a+"px"},setHeight:function(a){this.height=this._canvas.height=a*this.pixelRatio,this._canvas.style.height=a+"px"},getWidth:function(){return this.width},getHeight:function(){return this.height},setSize:function(a,b){this.setWidth(a),this.setHeight(b)},toDataURL:function(a,b){try{return this._canvas.toDataURL(a,b)}catch(c){try{return this._canvas.toDataURL()}catch(d){return Kinetic.Util.warn("Unable to get data URL. "+d.message),""}}}},Kinetic.SceneCanvas=function(a){a=a||{};var b=a.width||0,c=a.height||0;Kinetic.Canvas.call(this,a),this.context=new Kinetic.SceneContext(this),this.setSize(b,c)},Kinetic.SceneCanvas.prototype={setWidth:function(a){var b=this.pixelRatio,c=this.getContext()._context;Kinetic.Canvas.prototype.setWidth.call(this,a),c.scale(b,b)},setHeight:function(a){var b=this.pixelRatio,c=this.getContext()._context;Kinetic.Canvas.prototype.setHeight.call(this,a),c.scale(b,b)}},Kinetic.Util.extend(Kinetic.SceneCanvas,Kinetic.Canvas),Kinetic.HitCanvas=function(a){a=a||{};var b=a.width||0,c=a.height||0;Kinetic.Canvas.call(this,a),this.context=new Kinetic.HitContext(this),this.setSize(b,c)},Kinetic.Util.extend(Kinetic.HitCanvas,Kinetic.Canvas)}(),function(){var a=",",b="(",c=")",d="([",e="])",f=";",g="()",h="=",i=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];Kinetic.Context=function(a){this.init(a)},Kinetic.Context.prototype={init:function(a){this.canvas=a,this._context=a._canvas.getContext("2d"),Kinetic.enableTrace&&(this.traceArr=[],this._enableTrace())},fillShape:function(a){a.getFillEnabled()&&this._fill(a)},strokeShape:function(a){a.getStrokeEnabled()&&this._stroke(a)},fillStrokeShape:function(a){var b=a.getFillEnabled();b&&this._fill(a),a.getStrokeEnabled()&&this._stroke(a)},getTrace:function(i){var j,k,l,m,n=this.traceArr,o=n.length,p="";for(j=0;o>j;j++)k=n[j],l=k.method,l?(m=k.args,p+=l,p+=i?g:Kinetic.Util._isArray(m[0])?d+m.join(a)+e:b+m.join(a)+c):(p+=k.property,i||(p+=h+k.val)),p+=f;return p},clearTrace:function(){this.traceArr=[]},_trace:function(a){var b,c=this.traceArr;c.push(a),b=c.length,b>=Kinetic.traceArrMax&&c.shift()},reset:function(){var a=this.getCanvas().getPixelRatio();this.setTransform(1*a,0,0,1*a,0,0)},getCanvas:function(){return this.canvas},clear:function(a){var b=this.getCanvas();a?this.clearRect(a.x||0,a.y||0,a.width||0,a.height||0):this.clearRect(0,0,b.getWidth(),b.getHeight())},_applyLineCap:function(a){var b=a.getLineCap();b&&this.setAttr("lineCap",b)},_applyOpacity:function(a){var b=a.getAbsoluteOpacity();1!==b&&this.setAttr("globalAlpha",b)},_applyLineJoin:function(a){var b=a.getLineJoin();b&&this.setAttr("lineJoin",b)},setAttr:function(a,b){this._context[a]=b},arc:function(){var a=arguments;this._context.arc(a[0],a[1],a[2],a[3],a[4],a[5])},beginPath:function(){this._context.beginPath()},bezierCurveTo:function(){var a=arguments;this._context.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])},clearRect:function(){var a=arguments;this._context.clearRect(a[0],a[1],a[2],a[3])},clip:function(){this._context.clip()},closePath:function(){this._context.closePath()},createImageData:function(){var a=arguments;return 2===a.length?this._context.createImageData(a[0],a[1]):1===a.length?this._context.createImageData(a[0]):void 0},createLinearGradient:function(){var a=arguments;return this._context.createLinearGradient(a[0],a[1],a[2],a[3])},createPattern:function(){var a=arguments;return this._context.createPattern(a[0],a[1])},createRadialGradient:function(){var a=arguments;return this._context.createRadialGradient(a[0],a[1],a[2],a[3],a[4],a[5])},drawImage:function(){var a=arguments,b=this._context;3===a.length?b.drawImage(a[0],a[1],a[2]):5===a.length?b.drawImage(a[0],a[1],a[2],a[3],a[4]):9===a.length&&b.drawImage(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8])},fill:function(){this._context.fill()},fillText:function(){var a=arguments;this._context.fillText(a[0],a[1],a[2])},getImageData:function(){var a=arguments;return this._context.getImageData(a[0],a[1],a[2],a[3])},lineTo:function(){var a=arguments;this._context.lineTo(a[0],a[1])},moveTo:function(){var a=arguments;this._context.moveTo(a[0],a[1])},rect:function(){var a=arguments;this._context.rect(a[0],a[1],a[2],a[3])},putImageData:function(){var a=arguments;this._context.putImageData(a[0],a[1],a[2])},quadraticCurveTo:function(){var a=arguments;this._context.quadraticCurveTo(a[0],a[1],a[2],a[3])},restore:function(){this._context.restore()},rotate:function(){var a=arguments;this._context.rotate(a[0])},save:function(){this._context.save()},scale:function(){var a=arguments;this._context.scale(a[0],a[1])},setLineDash:function(){var a=arguments,b=this._context;this._context.setLineDash?b.setLineDash(a[0]):"mozDash"in b?b.mozDash=a[0]:"webkitLineDash"in b&&(b.webkitLineDash=a[0])},setTransform:function(){var a=arguments;this._context.setTransform(a[0],a[1],a[2],a[3],a[4],a[5])},stroke:function(){this._context.stroke()},strokeText:function(){var a=arguments;this._context.strokeText(a[0],a[1],a[2])},transform:function(){var a=arguments;this._context.transform(a[0],a[1],a[2],a[3],a[4],a[5])},translate:function(){var a=arguments;this._context.translate(a[0],a[1])},_enableTrace:function(){var a,b,c=this,d=i.length,e=Kinetic.Util._simplifyArray,f=this.setAttr,g=function(a){var d,f=c[a];c[a]=function(){return b=e(Array.prototype.slice.call(arguments,0)),d=f.apply(c,arguments),c._trace({method:a,args:b}),d}};for(a=0;d>a;a++)g(i[a]);c.setAttr=function(){f.apply(c,arguments),c._trace({property:arguments[0],val:arguments[1]})}}},Kinetic.SceneContext=function(a){Kinetic.Context.call(this,a)},Kinetic.SceneContext.prototype={_fillColor:function(a){var b=a.fill()||Kinetic.Util._getRGBAString({red:a.fillRed(),green:a.fillGreen(),blue:a.fillBlue(),alpha:a.fillAlpha()});this.setAttr("fillStyle",b),a._fillFunc(this)},_fillPattern:function(a){var b=a.getFillPatternImage(),c=a.getFillPatternX(),d=a.getFillPatternY(),e=a.getFillPatternScale(),f=Kinetic.getAngle(a.getFillPatternRotation()),g=a.getFillPatternOffset(),h=a.getFillPatternRepeat();(c||d)&&this.translate(c||0,d||0),f&&this.rotate(f),e&&this.scale(e.x,e.y),g&&this.translate(-1*g.x,-1*g.y),this.setAttr("fillStyle",this.createPattern(b,h||"repeat")),this.fill()},_fillLinearGradient:function(a){var b=a.getFillLinearGradientStartPoint(),c=a.getFillLinearGradientEndPoint(),d=a.getFillLinearGradientColorStops(),e=this.createLinearGradient(b.x,b.y,c.x,c.y);if(d){for(var f=0;f<d.length;f+=2)e.addColorStop(d[f],d[f+1]);this.setAttr("fillStyle",e),this.fill()}},_fillRadialGradient:function(a){for(var b=a.getFillRadialGradientStartPoint(),c=a.getFillRadialGradientEndPoint(),d=a.getFillRadialGradientStartRadius(),e=a.getFillRadialGradientEndRadius(),f=a.getFillRadialGradientColorStops(),g=this.createRadialGradient(b.x,b.y,d,c.x,c.y,e),h=0;h<f.length;h+=2)g.addColorStop(f[h],f[h+1]);this.setAttr("fillStyle",g),this.fill()},_fill:function(a){var b=a.fill()||a.fillRed()||a.fillGreen()||a.fillBlue(),c=a.getFillPatternImage(),d=a.getFillLinearGradientColorStops(),e=a.getFillRadialGradientColorStops(),f=a.getFillPriority();b&&"color"===f?this._fillColor(a):c&&"pattern"===f?this._fillPattern(a):d&&"linear-gradient"===f?this._fillLinearGradient(a):e&&"radial-gradient"===f?this._fillRadialGradient(a):b?this._fillColor(a):c?this._fillPattern(a):d?this._fillLinearGradient(a):e&&this._fillRadialGradient(a)},_stroke:function(a){var b=a.dash(),c=a.getStrokeScaleEnabled();a.hasStroke()&&(c||(this.save(),this.setTransform(1,0,0,1,0,0)),this._applyLineCap(a),b&&a.dashEnabled()&&this.setLineDash(b),this.setAttr("lineWidth",a.strokeWidth()),this.setAttr("strokeStyle",a.stroke()||Kinetic.Util._getRGBAString({red:a.strokeRed(),green:a.strokeGreen(),blue:a.strokeBlue(),alpha:a.strokeAlpha()})),a._strokeFunc(this),c||this.restore())},_applyShadow:function(a){var b=Kinetic.Util,c=a.getAbsoluteOpacity(),d=b.get(a.getShadowColor(),"black"),e=b.get(a.getShadowBlur(),5),f=b.get(a.getShadowOpacity(),1),g=b.get(a.getShadowOffset(),{x:0,y:0});f&&this.setAttr("globalAlpha",f*c),this.setAttr("shadowColor",d),this.setAttr("shadowBlur",e),this.setAttr("shadowOffsetX",g.x),this.setAttr("shadowOffsetY",g.y)}},Kinetic.Util.extend(Kinetic.SceneContext,Kinetic.Context),Kinetic.HitContext=function(a){Kinetic.Context.call(this,a)},Kinetic.HitContext.prototype={_fill:function(a){this.save(),this.setAttr("fillStyle",a.colorKey),a._fillFuncHit(this),this.restore()},_stroke:function(a){a.hasStroke()&&(this._applyLineCap(a),this.setAttr("lineWidth",a.strokeWidth()),this.setAttr("strokeStyle",a.colorKey),a._strokeFuncHit(this))}},Kinetic.Util.extend(Kinetic.HitContext,Kinetic.Context)}(),function(){var a="get",b="set";Kinetic.Factory={addGetterSetter:function(a,b,c,d,e){this.addGetter(a,b,c),this.addSetter(a,b,d,e),this.addOverloadedGetterSetter(a,b)},addGetter:function(b,c,d){var e=a+Kinetic.Util._capitalize(c);b.prototype[e]=function(){var a=this.attrs[c];return void 0===a?d:a}},addSetter:function(a,c,d,e){var f=b+Kinetic.Util._capitalize(c);a.prototype[f]=function(a){return d&&(a=d.call(this,a)),this._setAttr(c,a),e&&e.call(this),this}},addComponentsGetterSetter:function(c,d,e,f,g){var h,i,j=e.length,k=Kinetic.Util._capitalize,l=a+k(d),m=b+k(d);c.prototype[l]=function(){var a={};for(h=0;j>h;h++)i=e[h],a[i]=this.getAttr(d+k(i));return a},c.prototype[m]=function(a){var b,c=this.attrs[d];f&&(a=f.call(this,a));for(b in a)this._setAttr(d+k(b),a[b]);return this._fireChangeEvent(d,c,a),g&&g.call(this),this},this.addOverloadedGetterSetter(c,d)},addOverloadedGetterSetter:function(c,d){var e=Kinetic.Util._capitalize(d),f=b+e,g=a+e;c.prototype[d]=function(){return arguments.length?(this[f](arguments[0]),this):this[g]()}},backCompat:function(a,b){var c;for(c in b)a.prototype[c]=a.prototype[b[c]]},afterSetFilter:function(){this._filterUpToDate=!1}},Kinetic.Validators={RGBComponent:function(a){return a>255?255:0>a?0:Math.round(a)},alphaComponent:function(a){return a>1?1:1e-4>a?1e-4:a}}}(),function(){var a="absoluteOpacity",b="absoluteTransform",c="Change",d="children",e=".",f="",g="get",h="id",i="kinetic",j="listening",k="mouseenter",l="mouseleave",m="name",n="set",o="Shape",p=" ",q="stage",r="transform",s="Stage",t="visible",u=["id"],v=["xChange.kinetic","yChange.kinetic","scaleXChange.kinetic","scaleYChange.kinetic","skewXChange.kinetic","skewYChange.kinetic","rotationChange.kinetic","offsetXChange.kinetic","offsetYChange.kinetic","transformsEnabledChange.kinetic"].join(p);Kinetic.Util.addMethods(Kinetic.Node,{_init:function(c){var d=this;this._id=Kinetic.idCounter++,this.eventListeners={},this.attrs={},this._cache={},this._filterUpToDate=!1,this.setAttrs(c),this.on(v,function(){this._clearCache(r),d._clearSelfAndDescendantCache(b)}),this.on("visibleChange.kinetic",function(){d._clearSelfAndDescendantCache(t)}),this.on("listeningChange.kinetic",function(){d._clearSelfAndDescendantCache(j)}),this.on("opacityChange.kinetic",function(){d._clearSelfAndDescendantCache(a)})},_clearCache:function(a){a?delete this._cache[a]:this._cache={}},_getCache:function(a,b){var c=this._cache[a];return void 0===c&&(this._cache[a]=b.call(this)),this._cache[a]},_clearSelfAndDescendantCache:function(a){this._clearCache(a),this.children&&this.getChildren().each(function(b){b._clearSelfAndDescendantCache(a)})},clearCache:function(){return delete this._cache.canvas,this._filterUpToDate=!1,this},cache:function(a){{var b=a||{},c=b.x||0,d=b.y||0,e=b.width||this.width(),f=b.height||this.height(),g=b.drawBorder||!1;this.getLayer()}if(0===e||0===f)return void Kinetic.Util.warn("Width or height of caching configuration equals 0. Cache is ignored.");var h=new Kinetic.SceneCanvas({pixelRatio:1,width:e,height:f}),i=new Kinetic.SceneCanvas({pixelRatio:1,width:e,height:f}),j=new Kinetic.HitCanvas({width:e,height:f}),k=(this.transformsEnabled(),this.x(),this.y(),h.getContext()),l=j.getContext();return this.clearCache(),k.save(),l.save(),g&&(k.save(),k.beginPath(),k.rect(0,0,e,f),k.closePath(),k.setAttr("strokeStyle","red"),k.setAttr("lineWidth",5),k.stroke(),k.restore()),k.translate(-1*c,-1*d),l.translate(-1*c,-1*d),"Shape"===this.nodeType&&(k.translate(-1*this.x(),-1*this.y()),l.translate(-1*this.x(),-1*this.y())),this.drawScene(h,this),this.drawHit(j,this),k.restore(),l.restore(),this._cache.canvas={scene:h,filter:i,hit:j},this},_drawCachedSceneCanvas:function(a){a.save(),this.getLayer()._applyTransform(this,a),a.drawImage(this._getCachedSceneCanvas()._canvas,0,0),a.restore()},_getCachedSceneCanvas:function(){var a,b,c,d,e=this.filters(),f=this._cache.canvas,g=f.scene,h=f.filter,i=h.getContext();if(e){if(!this._filterUpToDate){try{for(a=e.length,i.clear(),i.drawImage(g._canvas,0,0),b=i.getImageData(0,0,h.getWidth(),h.getHeight()),c=0;a>c;c++)d=e[c],d.call(this,b),i.putImageData(b,0,0)}catch(j){Kinetic.Util.warn("Unable to apply filter. "+j.message)}this._filterUpToDate=!0}return h}return g},_drawCachedHitCanvas:function(a){var b=this._cache.canvas,c=b.hit;a.save(),this.getLayer()._applyTransform(this,a),a.drawImage(c._canvas,0,0),a.restore()},on:function(a,b){var c,d,g,h,i,j=a.split(p),k=j.length;for(c=0;k>c;c++)d=j[c],g=d.split(e),h=g[0],i=g[1]||f,this.eventListeners[h]||(this.eventListeners[h]=[]),this.eventListeners[h].push({name:i,handler:b});return this},off:function(a){var b,c,d,f,g,h,i=a.split(p),j=i.length;for(b=0;j>b;b++)if(d=i[b],f=d.split(e),g=f[0],h=f[1],g)this.eventListeners[g]&&this._off(g,h);else for(c in this.eventListeners)this._off(c,h);return this},dispatchEvent:function(a){var b={target:this,type:a.type,evt:a};this.fire(a.type,b)},addEventListener:function(a,b){this.on(a,function(a){b.call(this,a.evt)})},remove:function(){var c=this.getParent();return c&&c.children&&(c.children.splice(this.index,1),c._setChildrenIndices(),delete this.parent),this._clearSelfAndDescendantCache(q),this._clearSelfAndDescendantCache(b),this._clearSelfAndDescendantCache(t),this._clearSelfAndDescendantCache(j),this._clearSelfAndDescendantCache(a),this},destroy:function(){Kinetic._removeId(this.getId()),Kinetic._removeName(this.getName(),this._id),this.remove()},getAttr:function(a){var b=g+Kinetic.Util._capitalize(a);return Kinetic.Util._isFunction(this[b])?this[b]():this.attrs[a]},getAncestors:function(){for(var a=this.getParent(),b=new Kinetic.Collection;a;)b.push(a),a=a.getParent();return b},getAttrs:function(){return this.attrs||{}},setAttrs:function(a){var b,c;if(a)for(b in a)b===d||(c=n+Kinetic.Util._capitalize(b),Kinetic.Util._isFunction(this[c])?this[c](a[b]):this._setAttr(b,a[b]));return this},isListening:function(){return this._getCache(j,this._isListening)},_isListening:function(){var a=this.getListening(),b=this.getParent();return"inherit"===a?b?b.isListening():!0:a},isVisible:function(){return this._getCache(t,this._isVisible)},_isVisible:function(){var a=this.getVisible(),b=this.getParent();return"inherit"===a?b?b.isVisible():!0:a},shouldDrawHit:function(){var a=this.getLayer();return a&&a.hitGraphEnabled()&&this.isListening()&&this.isVisible()&&!Kinetic.isDragging()},show:function(){return this.setVisible(!0),this},hide:function(){return this.setVisible(!1),this},getZIndex:function(){return this.index||0},getAbsoluteZIndex:function(){function a(i){for(b=[],c=i.length,d=0;c>d;d++)e=i[d],h++,e.nodeType!==o&&(b=b.concat(e.getChildren().toArray())),e._id===g._id&&(d=c);b.length>0&&b[0].getDepth()<=f&&a(b)}var b,c,d,e,f=this.getDepth(),g=this,h=0;return g.nodeType!==s&&a(g.getStage().getChildren()),h},getDepth:function(){for(var a=0,b=this.parent;b;)a++,b=b.parent;return a},setPosition:function(a){return this.setX(a.x),this.setY(a.y),this},getPosition:function(){return{x:this.getX(),y:this.getY()}},getAbsolutePosition:function(){var a=this.getAbsoluteTransform().getMatrix(),b=new Kinetic.Transform,c=this.offset();return b.m=a.slice(),b.translate(c.x,c.y),b.getTranslation()},setAbsolutePosition:function(a){var b,c=this._clearTransform();return this.attrs.x=c.x,this.attrs.y=c.y,delete c.x,delete c.y,b=this.getAbsoluteTransform(),b.invert(),b.translate(a.x,a.y),a={x:this.attrs.x+b.getTranslation().x,y:this.attrs.y+b.getTranslation().y},this.setPosition({x:a.x,y:a.y}),this._setTransform(c),this},_setTransform:function(a){var c;for(c in a)this.attrs[c]=a[c];this._clearCache(r),this._clearSelfAndDescendantCache(b)},_clearTransform:function(){var a={x:this.getX(),y:this.getY(),rotation:this.getRotation(),scaleX:this.getScaleX(),scaleY:this.getScaleY(),offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),skewX:this.getSkewX(),skewY:this.getSkewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,this._clearCache(r),this._clearSelfAndDescendantCache(b),a},move:function(a){var b=a.x,c=a.y,d=this.getX(),e=this.getY();return void 0!==b&&(d+=b),void 0!==c&&(e+=c),this.setPosition({x:d,y:e}),this},_eachAncestorReverse:function(a,b){var c,d,e=[],f=this.getParent();if(b&&b._id===this._id)return a(this),!0;for(e.unshift(this);f&&(!b||f._id!==b._id);)e.unshift(f),f=f.parent;for(c=e.length,d=0;c>d;d++)a(e[d])},rotate:function(a){return this.setRotation(this.getRotation()+a),this},moveToTop:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveToTop function is ignored.");var a=this.index;return this.parent.children.splice(a,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0},moveUp:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveUp function is ignored.");var a=this.index,b=this.parent.getChildren().length;return b-1>a?(this.parent.children.splice(a,1),this.parent.children.splice(a+1,0,this),this.parent._setChildrenIndices(),!0):!1},moveDown:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveDown function is ignored.");var a=this.index;return a>0?(this.parent.children.splice(a,1),this.parent.children.splice(a-1,0,this),this.parent._setChildrenIndices(),!0):!1},moveToBottom:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveToBottom function is ignored.");var a=this.index;return a>0?(this.parent.children.splice(a,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1},setZIndex:function(a){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. zIndex parameter is ignored.");var b=this.index;return this.parent.children.splice(b,1),this.parent.children.splice(a,0,this),this.parent._setChildrenIndices(),this},getAbsoluteOpacity:function(){return this._getCache(a,this._getAbsoluteOpacity)},_getAbsoluteOpacity:function(){var a=this.getOpacity();return this.getParent()&&(a*=this.getParent().getAbsoluteOpacity()),a},moveTo:function(a){return Kinetic.Node.prototype.remove.call(this),a.add(this),this},toObject:function(){var a,b,c,d,e=Kinetic.Util,f={},g=this.getAttrs();f.attrs={};for(a in g)b=g[a],e._isFunction(b)||e._isElement(b)||e._isObject(b)&&e._hasMethods(b)||(c=this[a],delete g[a],d=c?c.call(this):null,g[a]=b,d!==b&&(f.attrs[a]=b));return f.className=this.getClassName(),f},toJSON:function(){return JSON.stringify(this.toObject())},getParent:function(){return this.parent},getLayer:function(){var a=this.getParent();return a?a.getLayer():null},getStage:function(){return this._getCache(q,this._getStage)},_getStage:function(){var a=this.getParent();return a?a.getStage():void 0},fire:function(a,b,c){return c?this._fireAndBubble(a,b||{}):this._fire(a,b||{}),this},getAbsoluteTransform:function(a){return a?this._getAbsoluteTransform(a):this._getCache(b,this._getAbsoluteTransform)},_getAbsoluteTransform:function(a){var b,c,d=new Kinetic.Transform;return this._eachAncestorReverse(function(a){b=a.transformsEnabled(),c=a.getTransform(),"all"===b?d.multiply(c):"position"===b&&d.translate(a.x(),a.y())},a),d},getTransform:function(){return this._getCache(r,this._getTransform)},_getTransform:function(){var a=new Kinetic.Transform,b=this.getX(),c=this.getY(),d=Kinetic.getAngle(this.getRotation()),e=this.getScaleX(),f=this.getScaleY(),g=this.getSkewX(),h=this.getSkewY(),i=this.getOffsetX(),j=this.getOffsetY();return(0!==b||0!==c)&&a.translate(b,c),0!==d&&a.rotate(d),(0!==g||0!==h)&&a.skew(g,h),(1!==e||1!==f)&&a.scale(e,f),(0!==i||0!==j)&&a.translate(-1*i,-1*j),a},clone:function(a){var b,c,d,e,f,g=this.getClassName(),h=Kinetic.Util.cloneObject(this.attrs);for(var j in u){var k=u[j];delete h[k]}for(b in a)h[b]=a[b];var l=new Kinetic[g](h);for(b in this.eventListeners)for(c=this.eventListeners[b],d=c.length,e=0;d>e;e++)f=c[e],f.name.indexOf(i)<0&&(l.eventListeners[b]||(l.eventListeners[b]=[]),l.eventListeners[b].push(f));return l},toDataURL:function(a){a=a||{};var b=a.mimeType||null,c=a.quality||null,d=this.getStage(),e=a.x||0,f=a.y||0,g=new Kinetic.SceneCanvas({width:a.width||this.getWidth()||(d?d.getWidth():0),height:a.height||this.getHeight()||(d?d.getHeight():0),pixelRatio:1}),h=g.getContext();return h.save(),(e||f)&&h.translate(-1*e,-1*f),this.drawScene(g),h.restore(),g.toDataURL(b,c)},toImage:function(a){Kinetic.Util._getImage(this.toDataURL(a),function(b){a.callback(b)})},setSize:function(a){return this.setWidth(a.width),this.setHeight(a.height),this},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},getWidth:function(){return this.attrs.width||0},getHeight:function(){return this.attrs.height||0},getClassName:function(){return this.className||this.nodeType},getType:function(){return this.nodeType},getDragDistance:function(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Kinetic.dragDistance},_get:function(a){return this.nodeType===a?[this]:[]},_off:function(a,b){var c,d,e=this.eventListeners[a];for(c=0;c<e.length;c++)if(d=e[c].name,!("kinetic"===d&&"kinetic"!==b||b&&d!==b)){if(e.splice(c,1),0===e.length){delete this.eventListeners[a];break}c--}},_fireChangeEvent:function(a,b,d){this._fire(a+c,{oldVal:b,newVal:d})},setId:function(a){var b=this.getId();return Kinetic._removeId(b),Kinetic._addId(this,a),this._setAttr(h,a),this
},setName:function(a){var b=this.getName();return Kinetic._removeName(b,this._id),Kinetic._addName(this,a),this._setAttr(m,a),this},setAttr:function(){var a=Array.prototype.slice.call(arguments),b=a[0],c=a[1],d=n+Kinetic.Util._capitalize(b),e=this[d];return Kinetic.Util._isFunction(e)?e.call(this,c):this._setAttr(b,c),this},_setAttr:function(a,b){var c;void 0!==b&&(c=this.attrs[a],this.attrs[a]=b,this._fireChangeEvent(a,c,b))},_setComponentAttr:function(a,b,c){var d;void 0!==c&&(d=this.attrs[a],d||(this.attrs[a]=this.getAttr(a)),this.attrs[a][b]=c,this._fireChangeEvent(a,d,c))},_fireAndBubble:function(a,b,c){var d=!0;b&&this.nodeType===o&&(b.target=this),a===k&&c&&this._id===c._id?d=!1:a===l&&c&&this._id===c._id&&(d=!1),d&&(this._fire(a,b),b&&!b.cancelBubble&&this.parent&&(c&&c.parent?this._fireAndBubble.call(this.parent,a,b,c.parent):this._fireAndBubble.call(this.parent,a,b)))},_fire:function(a,b){var c,d=this.eventListeners[a];if(b.type=a,d)for(c=0;c<d.length;c++)d[c].handler.call(this,b)},draw:function(){return this.drawScene(),this.drawHit(),this}}),Kinetic.Node.create=function(a,b){return this._createNode(JSON.parse(a),b)},Kinetic.Node._createNode=function(a,b){var c,d,e,f=Kinetic.Node.prototype.getClassName.call(a),g=a.children;if(b&&(a.attrs.container=b),c=new Kinetic[f](a.attrs),g)for(d=g.length,e=0;d>e;e++)c.add(this._createNode(g[e]));return c},Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"position"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"x",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"y",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"opacity",1),Kinetic.Factory.addGetter(Kinetic.Node,"name"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"name"),Kinetic.Factory.addGetter(Kinetic.Node,"id"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"id"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"rotation",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"scale",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"scaleX",1),Kinetic.Factory.addGetterSetter(Kinetic.Node,"scaleY",1),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"skew",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"skewX",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"skewY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"offset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"offsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"offsetY",0),Kinetic.Factory.addSetter(Kinetic.Node,"dragDistance"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"dragDistance"),Kinetic.Factory.addSetter(Kinetic.Node,"width",0),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"width"),Kinetic.Factory.addSetter(Kinetic.Node,"height",0),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"height"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"listening","inherit"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"filters",void 0,function(a){return this._filterUpToDate=!1,a}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"visible","inherit"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"transformsEnabled","all"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"size"),Kinetic.Factory.backCompat(Kinetic.Node,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),Kinetic.Collection.mapMethods(Kinetic.Node)}(),function(){Kinetic.Filters.Grayscale=function(a){var b,c,d=a.data,e=d.length;for(b=0;e>b;b+=4)c=.34*d[b]+.5*d[b+1]+.16*d[b+2],d[b]=c,d[b+1]=c,d[b+2]=c}}(),function(){Kinetic.Filters.Brighten=function(a){var b,c=255*this.brightness(),d=a.data,e=d.length;for(b=0;e>b;b+=4)d[b]+=c,d[b+1]+=c,d[b+2]+=c},Kinetic.Factory.addGetterSetter(Kinetic.Node,"brightness",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Invert=function(a){var b,c=a.data,d=c.length;for(b=0;d>b;b+=4)c[b]=255-c[b],c[b+1]=255-c[b+1],c[b+2]=255-c[b+2]}}(),function(){function a(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}function b(b,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D=b.data,E=b.width,F=b.height,G=e+e+1,H=E-1,I=F-1,J=e+1,K=J*(J+1)/2,L=new a,M=null,N=L,O=null,P=null,Q=c[e],R=d[e];for(h=1;G>h;h++)N=N.next=new a,h==J&&(M=N);for(N.next=L,l=k=0,g=0;F>g;g++){for(u=v=w=x=m=n=o=p=0,q=J*(y=D[k]),r=J*(z=D[k+1]),s=J*(A=D[k+2]),t=J*(B=D[k+3]),m+=K*y,n+=K*z,o+=K*A,p+=K*B,N=L,h=0;J>h;h++)N.r=y,N.g=z,N.b=A,N.a=B,N=N.next;for(h=1;J>h;h++)i=k+((h>H?H:h)<<2),m+=(N.r=y=D[i])*(C=J-h),n+=(N.g=z=D[i+1])*C,o+=(N.b=A=D[i+2])*C,p+=(N.a=B=D[i+3])*C,u+=y,v+=z,w+=A,x+=B,N=N.next;for(O=L,P=M,f=0;E>f;f++)D[k+3]=B=p*Q>>R,0!==B?(B=255/B,D[k]=(m*Q>>R)*B,D[k+1]=(n*Q>>R)*B,D[k+2]=(o*Q>>R)*B):D[k]=D[k+1]=D[k+2]=0,m-=q,n-=r,o-=s,p-=t,q-=O.r,r-=O.g,s-=O.b,t-=O.a,i=l+((i=f+e+1)<H?i:H)<<2,u+=O.r=D[i],v+=O.g=D[i+1],w+=O.b=D[i+2],x+=O.a=D[i+3],m+=u,n+=v,o+=w,p+=x,O=O.next,q+=y=P.r,r+=z=P.g,s+=A=P.b,t+=B=P.a,u-=y,v-=z,w-=A,x-=B,P=P.next,k+=4;l+=E}for(f=0;E>f;f++){for(v=w=x=u=n=o=p=m=0,k=f<<2,q=J*(y=D[k]),r=J*(z=D[k+1]),s=J*(A=D[k+2]),t=J*(B=D[k+3]),m+=K*y,n+=K*z,o+=K*A,p+=K*B,N=L,h=0;J>h;h++)N.r=y,N.g=z,N.b=A,N.a=B,N=N.next;for(j=E,h=1;e>=h;h++)k=j+f<<2,m+=(N.r=y=D[k])*(C=J-h),n+=(N.g=z=D[k+1])*C,o+=(N.b=A=D[k+2])*C,p+=(N.a=B=D[k+3])*C,u+=y,v+=z,w+=A,x+=B,N=N.next,I>h&&(j+=E);for(k=f,O=L,P=M,g=0;F>g;g++)i=k<<2,D[i+3]=B=p*Q>>R,B>0?(B=255/B,D[i]=(m*Q>>R)*B,D[i+1]=(n*Q>>R)*B,D[i+2]=(o*Q>>R)*B):D[i]=D[i+1]=D[i+2]=0,m-=q,n-=r,o-=s,p-=t,q-=O.r,r-=O.g,s-=O.b,t-=O.a,i=f+((i=g+J)<I?i:I)*E<<2,m+=u+=O.r=D[i],n+=v+=O.g=D[i+1],o+=w+=O.b=D[i+2],p+=x+=O.a=D[i+3],O=O.next,q+=y=P.r,r+=z=P.g,s+=A=P.b,t+=B=P.a,u-=y,v-=z,w-=A,x-=B,P=P.next,k+=E}}var c=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],d=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];Kinetic.Filters.Blur=function(a){var c=Math.round(this.blurRadius());c>0&&b(a,c)},Kinetic.Factory.addGetterSetter(Kinetic.Node,"blurRadius",0,null,Kinetic.Factory.afterSetFilter)}(),function(){function a(a,b,c){var d=4*(c*a.width+b),e=[];return e.push(a.data[d++],a.data[d++],a.data[d++],a.data[d++]),e}function b(a,b){return Math.sqrt(Math.pow(a[0]-b[0],2)+Math.pow(a[1]-b[1],2)+Math.pow(a[2]-b[2],2))}function c(a){for(var b=[0,0,0],c=0;c<a.length;c++)b[0]+=a[c][0],b[1]+=a[c][1],b[2]+=a[c][2];return b[0]/=a.length,b[1]/=a.length,b[2]/=a.length,b}function d(d,e){var f=a(d,0,0),g=a(d,d.width-1,0),h=a(d,0,d.height-1),i=a(d,d.width-1,d.height-1),j=e||10;if(b(f,g)<j&&b(g,i)<j&&b(i,h)<j&&b(h,f)<j){for(var k=c([g,f,i,h]),l=[],m=0;m<d.width*d.height;m++){var n=b(k,[d.data[4*m],d.data[4*m+1],d.data[4*m+2]]);l[m]=j>n?0:255}return l}}function e(a,b){for(var c=0;c<a.width*a.height;c++)a.data[4*c+3]=b[c]}function f(a,b,c){for(var d=[1,1,1,1,0,1,1,1,1],e=Math.round(Math.sqrt(d.length)),f=Math.floor(e/2),g=[],h=0;c>h;h++)for(var i=0;b>i;i++){for(var j=h*b+i,k=0,l=0;e>l;l++)for(var m=0;e>m;m++){var n=h+l-f,o=i+m-f;if(n>=0&&c>n&&o>=0&&b>o){var p=n*b+o,q=d[l*e+m];k+=a[p]*q}}g[j]=2040===k?255:0}return g}function g(a,b,c){for(var d=[1,1,1,1,1,1,1,1,1],e=Math.round(Math.sqrt(d.length)),f=Math.floor(e/2),g=[],h=0;c>h;h++)for(var i=0;b>i;i++){for(var j=h*b+i,k=0,l=0;e>l;l++)for(var m=0;e>m;m++){var n=h+l-f,o=i+m-f;if(n>=0&&c>n&&o>=0&&b>o){var p=n*b+o,q=d[l*e+m];k+=a[p]*q}}g[j]=k>=1020?255:0}return g}function h(a,b,c){for(var d=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],e=Math.round(Math.sqrt(d.length)),f=Math.floor(e/2),g=[],h=0;c>h;h++)for(var i=0;b>i;i++){for(var j=h*b+i,k=0,l=0;e>l;l++)for(var m=0;e>m;m++){var n=h+l-f,o=i+m-f;if(n>=0&&c>n&&o>=0&&b>o){var p=n*b+o,q=d[l*e+m];k+=a[p]*q}}g[j]=k}return g}Kinetic.Filters.Mask=function(a){var b=this.threshold(),c=d(a,b);return c&&(c=f(c,a.width,a.height),c=g(c,a.width,a.height),c=h(c,a.width,a.height),e(a,c)),a},Kinetic.Factory.addGetterSetter(Kinetic.Node,"threshold",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.RGB=function(a){var b,c,d=a.data,e=d.length,f=this.red(),g=this.green(),h=this.blue();for(b=0;e>b;b+=4)c=(.34*d[b]+.5*d[b+1]+.16*d[b+2])/255,d[b]=c*f,d[b+1]=c*g,d[b+2]=c*h,d[b+3]=d[b+3]},Kinetic.Factory.addGetterSetter(Kinetic.Node,"red",0,function(a){return this._filterUpToDate=!1,a>255?255:0>a?0:Math.round(a)}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"green",0,function(a){return this._filterUpToDate=!1,a>255?255:0>a?0:Math.round(a)}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"blue",0,Kinetic.Validators.RGBComponent,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.HSV=function(a){var b,c,d,e,f,g=a.data,h=g.length,i=Math.pow(2,this.value()),j=Math.pow(2,this.saturation()),k=Math.abs(this.hue()+360)%360,l=i*j*Math.cos(k*Math.PI/180),m=i*j*Math.sin(k*Math.PI/180),n=.299*i+.701*l+.167*m,o=.587*i-.587*l+.33*m,p=.114*i-.114*l-.497*m,q=.299*i-.299*l-.328*m,r=.587*i+.413*l+.035*m,s=.114*i-.114*l+.293*m,t=.299*i-.3*l+1.25*m,u=.587*i-.586*l-1.05*m,v=.114*i+.886*l-.2*m;for(b=0;h>b;b+=4)c=g[b+0],d=g[b+1],e=g[b+2],f=g[b+3],g[b+0]=n*c+o*d+p*e,g[b+1]=q*c+r*d+s*e,g[b+2]=t*c+u*d+v*e,g[b+3]=f},Kinetic.Factory.addGetterSetter(Kinetic.Node,"hue",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"saturation",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"value",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Factory.addGetterSetter(Kinetic.Node,"hue",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"saturation",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"luminance",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Filters.HSL=function(a){var b,c,d,e,f,g=a.data,h=g.length,i=1,j=Math.pow(2,this.saturation()),k=Math.abs(this.hue()+360)%360,l=127*this.luminance(),m=i*j*Math.cos(k*Math.PI/180),n=i*j*Math.sin(k*Math.PI/180),o=.299*i+.701*m+.167*n,p=.587*i-.587*m+.33*n,q=.114*i-.114*m-.497*n,r=.299*i-.299*m-.328*n,s=.587*i+.413*m+.035*n,t=.114*i-.114*m+.293*n,u=.299*i-.3*m+1.25*n,v=.587*i-.586*m-1.05*n,w=.114*i+.886*m-.2*n;for(b=0;h>b;b+=4)c=g[b+0],d=g[b+1],e=g[b+2],f=g[b+3],g[b+0]=o*c+p*d+q*e+l,g[b+1]=r*c+s*d+t*e+l,g[b+2]=u*c+v*d+w*e+l,g[b+3]=f}}(),function(){Kinetic.Filters.Emboss=function(a){var b=10*this.embossStrength(),c=255*this.embossWhiteLevel(),d=this.embossDirection(),e=this.embossBlend(),f=0,g=0,h=a.data,i=a.width,j=a.height,k=4*i,l=j;switch(d){case"top-left":f=-1,g=-1;break;case"top":f=-1,g=0;break;case"top-right":f=-1,g=1;break;case"right":f=0,g=1;break;case"bottom-right":f=1,g=1;break;case"bottom":f=1,g=0;break;case"bottom-left":f=1,g=-1;break;case"left":f=0,g=-1}do{var m=(l-1)*k,n=f;1>l+n&&(n=0),l+n>j&&(n=0);var o=(l-1+n)*i*4,p=i;do{var q=m+4*(p-1),r=g;1>p+r&&(r=0),p+r>i&&(r=0);var s=o+4*(p-1+r),t=h[q]-h[s],u=h[q+1]-h[s+1],v=h[q+2]-h[s+2],w=t,x=w>0?w:-w,y=u>0?u:-u,z=v>0?v:-v;if(y>x&&(w=u),z>x&&(w=v),w*=b,e){var A=h[q]+w,B=h[q+1]+w,C=h[q+2]+w;h[q]=A>255?255:0>A?0:A,h[q+1]=B>255?255:0>B?0:B,h[q+2]=C>255?255:0>C?0:C}else{var D=c-w;0>D?D=0:D>255&&(D=255),h[q]=h[q+1]=h[q+2]=D}}while(--p)}while(--l)},Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossStrength",.5,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossWhiteLevel",.5,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossDirection","top-left",null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossBlend",!1,null,Kinetic.Factory.afterSetFilter)}(),function(){function a(a,b,c,d,e){var f,g=c-b,h=e-d;return 0===g?d+h/2:0===h?d:(f=(a-b)/g,f=h*f+d)}Kinetic.Filters.Enhance=function(b){var c,d,e,f,g=b.data,h=g.length,i=g[0],j=i,k=g[1],l=k,m=g[2],n=m,o=g[3],p=o,q=this.enhance();if(0!==q){for(f=0;h>f;f+=4)c=g[f+0],i>c?i=c:c>j&&(j=c),d=g[f+1],k>d?k=d:d>l&&(l=d),e=g[f+2],m>e?m=e:e>n&&(n=e);j===i&&(j=255,i=0),l===k&&(l=255,k=0),n===m&&(n=255,m=0),p===o&&(p=255,o=0);var r,s,t,u,v,w,x,y,z,A,B,C;for(q>0?(s=j+q*(255-j),t=i-q*(i-0),v=l+q*(255-l),w=k-q*(k-0),y=n+q*(255-n),C=m-q*(m-0),B=p+q*(255-p),z=o-q*(o-0)):(r=.5*(j+i),s=j+q*(j-r),t=i+q*(i-r),u=.5*(l+k),v=l+q*(l-u),w=k+q*(k-u),x=.5*(n+m),y=n+q*(n-x),C=m+q*(m-x),A=.5*(p+o),B=p+q*(p-A),z=o+q*(o-A)),f=0;h>f;f+=4)g[f+0]=a(g[f+0],i,j,t,s),g[f+1]=a(g[f+1],k,l,w,v),g[f+2]=a(g[f+2],m,n,C,y)}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"enhance",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Posterize=function(a){var b,c=Math.round(254*this.levels())+1,d=a.data,e=d.length,f=255/c;for(b=0;e>b;b+=1)d[b]=Math.floor(d[b]/f)*f},Kinetic.Factory.addGetterSetter(Kinetic.Node,"levels",.5,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Noise=function(a){var b,c=255*this.noise(),d=a.data,e=d.length,f=c/2;for(b=0;e>b;b+=4)d[b+0]+=f-2*f*Math.random(),d[b+1]+=f-2*f*Math.random(),d[b+2]+=f-2*f*Math.random()},Kinetic.Factory.addGetterSetter(Kinetic.Node,"noise",.2,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Pixelate=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p=Math.ceil(this.pixelSize()),q=a.width,r=a.height,s=Math.ceil(q/p),t=Math.ceil(r/p);for(a=a.data,m=0;s>m;m+=1)for(n=0;t>n;n+=1){for(e=0,f=0,g=0,h=0,i=m*p,j=i+p,k=n*p,l=k+p,o=0,b=i;j>b;b+=1)if(!(b>=q))for(c=k;l>c;c+=1)c>=r||(d=4*(q*c+b),e+=a[d+0],f+=a[d+1],g+=a[d+2],h+=a[d+3],o+=1);for(e/=o,f/=o,g/=o,b=i;j>b;b+=1)if(!(b>=q))for(c=k;l>c;c+=1)c>=r||(d=4*(q*c+b),a[d+0]=e,a[d+1]=f,a[d+2]=g,a[d+3]=h)}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"pixelSize",8,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Threshold=function(a){var b,c=255*this.threshold(),d=a.data,e=d.length;for(b=0;e>b;b+=1)d[b]=d[b]<c?0:255},Kinetic.Factory.addGetterSetter(Kinetic.Node,"threshold",.5,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Sepia=function(a){var b,c,d,e,f,g,h,i,j,k=a.data,l=a.width,m=a.height,n=4*l;do{b=(m-1)*n,c=l;do d=b+4*(c-1),e=k[d],f=k[d+1],g=k[d+2],h=.393*e+.769*f+.189*g,i=.349*e+.686*f+.168*g,j=.272*e+.534*f+.131*g,k[d]=h>255?255:h,k[d+1]=i>255?255:i,k[d+2]=j>255?255:j,k[d+3]=k[d+3];while(--c)}while(--m)}}(),function(){Kinetic.Filters.Solarize=function(a){var b=a.data,c=a.width,d=a.height,e=4*c,f=d;do{var g=(f-1)*e,h=c;do{var i=g+4*(h-1),j=b[i],k=b[i+1],l=b[i+2];j>127&&(j=255-j),k>127&&(k=255-k),l>127&&(l=255-l),b[i]=j,b[i+1]=k,b[i+2]=l}while(--h)}while(--f)}}(),function(){var a=function(a,b,c){var d,e,f,g,h=a.data,i=b.data,j=a.width,k=a.height,l=c.polarCenterX||j/2,m=c.polarCenterY||k/2,n=0,o=0,p=0,q=0,r=Math.sqrt(l*l+m*m);e=j-l,f=k-m,g=Math.sqrt(e*e+f*f),r=g>r?g:r;var s,t,u,v,w=k,x=j,y=360/x*Math.PI/180;for(t=0;x>t;t+=1)for(u=Math.sin(t*y),v=Math.cos(t*y),s=0;w>s;s+=1)e=Math.floor(l+r*s/w*v),f=Math.floor(m+r*s/w*u),d=4*(f*j+e),n=h[d+0],o=h[d+1],p=h[d+2],q=h[d+3],d=4*(t+s*j),i[d+0]=n,i[d+1]=o,i[d+2]=p,i[d+3]=q},b=function(a,b,c){var d,e,f,g,h,i,j=a.data,k=b.data,l=a.width,m=a.height,n=c.polarCenterX||l/2,o=c.polarCenterY||m/2,p=0,q=0,r=0,s=0,t=Math.sqrt(n*n+o*o);e=l-n,f=m-o,i=Math.sqrt(e*e+f*f),t=i>t?i:t;var u,v,w,x,y=m,z=l,A=c.polarRotation||0;for(e=0;l>e;e+=1)for(f=0;m>f;f+=1)g=e-n,h=f-o,u=Math.sqrt(g*g+h*h)*y/t,v=(180*Math.atan2(h,g)/Math.PI+360+A)%360,v=v*z/360,w=Math.floor(v),x=Math.floor(u),d=4*(x*l+w),p=j[d+0],q=j[d+1],r=j[d+2],s=j[d+3],d=4*(f*l+e),k[d+0]=p,k[d+1]=q,k[d+2]=r,k[d+3]=s},c=Kinetic.Util.createCanvasElement();Kinetic.Filters.Kaleidoscope=function(d){var e,f,g,h,i,j,k,l,m,n,o=d.width,p=d.height,q=Math.round(this.kaleidoscopePower()),r=Math.round(this.kaleidoscopeAngle()),s=Math.floor(o*(r%360)/360);if(!(1>q)){c.width=o,c.height=p;var t=c.getContext("2d").getImageData(0,0,o,p);a(d,t,{polarCenterX:o/2,polarCenterY:p/2});for(var u=o/Math.pow(2,q);8>=u;)u=2*u,q-=1;u=Math.ceil(u);var v=u,w=0,x=v,y=1;for(s+u>o&&(w=v,x=0,y=-1),f=0;p>f;f+=1)for(e=w;e!==x;e+=y)g=Math.round(e+s)%o,m=4*(o*f+g),i=t.data[m+0],j=t.data[m+1],k=t.data[m+2],l=t.data[m+3],n=4*(o*f+e),t.data[n+0]=i,t.data[n+1]=j,t.data[n+2]=k,t.data[n+3]=l;for(f=0;p>f;f+=1)for(v=Math.floor(u),h=0;q>h;h+=1){for(e=0;v+1>e;e+=1)m=4*(o*f+e),i=t.data[m+0],j=t.data[m+1],k=t.data[m+2],l=t.data[m+3],n=4*(o*f+2*v-e-1),t.data[n+0]=i,t.data[n+1]=j,t.data[n+2]=k,t.data[n+3]=l;v*=2}b(t,d,{polarRotation:0})}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"kaleidoscopePower",2,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"kaleidoscopeAngle",0,null,Kinetic.Factory.afterSetFilter)}(),function(){function a(a){Kinetic.root.setTimeout(a,1e3/60)}function b(){return e.apply(Kinetic.root,arguments)}var c=500,d=function(){return Kinetic.root.performance&&Kinetic.root.performance.now?function(){return Kinetic.root.performance.now()}:function(){return(new Date).getTime()}}(),e=function(){return Kinetic.root.requestAnimationFrame||Kinetic.root.webkitRequestAnimationFrame||Kinetic.root.mozRequestAnimationFrame||Kinetic.root.oRequestAnimationFrame||Kinetic.root.msRequestAnimationFrame||a}();Kinetic.Animation=function(a,b){var c=Kinetic.Animation;this.func=a,this.setLayers(b),this.id=c.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:d()}},Kinetic.Animation.prototype={setLayers:function(a){var b=[];b=a?a.length>0?a:[a]:[],this.layers=b},getLayers:function(){return this.layers},addLayer:function(a){var b,c,d=this.layers;if(d){for(b=d.length,c=0;b>c;c++)if(d[c]._id===a._id)return!1}else this.layers=[];return this.layers.push(a),!0},isRunning:function(){var a,b=Kinetic.Animation,c=b.animations,d=c.length;for(a=0;d>a;a++)if(c[a].id===this.id)return!0;return!1},start:function(){var a=Kinetic.Animation;this.stop(),this.frame.timeDiff=0,this.frame.lastTime=d(),a._addAnimation(this)},stop:function(){Kinetic.Animation._removeAnimation(this)},_updateFrameObject:function(a){this.frame.timeDiff=a-this.frame.lastTime,this.frame.lastTime=a,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}},Kinetic.Animation.animations=[],Kinetic.Animation.animIdCounter=0,Kinetic.Animation.animRunning=!1,Kinetic.Animation._addAnimation=function(a){this.animations.push(a),this._handleAnimation()},Kinetic.Animation._removeAnimation=function(a){var b,c=a.id,d=this.animations,e=d.length;for(b=0;e>b;b++)if(d[b].id===c){this.animations.splice(b,1);break}},Kinetic.Animation._runFrames=function(){var a,b,c,e,f,g,h,i,j={},k=this.animations;for(e=0;e<k.length;e++){for(a=k[e],b=a.layers,c=a.func,a._updateFrameObject(d()),g=b.length,f=0;g>f;f++)h=b[f],void 0!==h._id&&(j[h._id]=h);c&&c.call(a,a.frame)}for(i in j)j[i].draw()},Kinetic.Animation._animationLoop=function(){var a=Kinetic.Animation;a.animations.length?(b(a._animationLoop),a._runFrames()):a.animRunning=!1},Kinetic.Animation._handleAnimation=function(){var a=this;this.animRunning||(this.animRunning=!0,a._animationLoop())};var f=Kinetic.Node.prototype.moveTo;Kinetic.Node.prototype.moveTo=function(a){f.call(this,a)},Kinetic.Layer.prototype.batchDraw=function(){var a=this,b=Kinetic.Animation;this.batchAnim||(this.batchAnim=new b(function(){a.lastBatchDrawTime&&d()-a.lastBatchDrawTime>c&&a.batchAnim.stop()},this)),this.lastBatchDrawTime=d(),this.batchAnim.isRunning()||(this.draw(),this.batchAnim.start())},Kinetic.Stage.prototype.batchDraw=function(){this.getChildren().each(function(a){a.batchDraw()})}}((1,eval)("this")),function(){var a={node:1,duration:1,easing:1,onFinish:1,yoyo:1},b=1,c=2,d=3,e=0;Kinetic.Tween=function(b){var c,d=this,g=b.node,h=g._id,i=b.duration||1,j=b.easing||Kinetic.Easings.Linear,k=!!b.yoyo;this.node=g,this._id=e++,this.anim=new Kinetic.Animation(function(){d.tween.onEnterFrame()},g.getLayer()),this.tween=new f(c,function(a){d._tweenFunc(a)},j,0,1,1e3*i,k),this._addListeners(),Kinetic.Tween.attrs[h]||(Kinetic.Tween.attrs[h]={}),Kinetic.Tween.attrs[h][this._id]||(Kinetic.Tween.attrs[h][this._id]={}),Kinetic.Tween.tweens[h]||(Kinetic.Tween.tweens[h]={});for(c in b)void 0===a[c]&&this._addAttr(c,b[c]);this.reset(),this.onFinish=b.onFinish,this.onReset=b.onReset},Kinetic.Tween.attrs={},Kinetic.Tween.tweens={},Kinetic.Tween.prototype={_addAttr:function(a,b){var c,d,e,f,g,h=this.node,i=h._id;if(e=Kinetic.Tween.tweens[i][a],e&&delete Kinetic.Tween.attrs[i][e][a],c=h.getAttr(a),Kinetic.Util._isArray(b))for(d=[],g=b.length,f=0;g>f;f++)d.push(b[f]-c[f]);else d=b-c;Kinetic.Tween.attrs[i][this._id][a]={start:c,diff:d},Kinetic.Tween.tweens[i][a]=this._id},_tweenFunc:function(a){var b,c,d,e,f,g,h,i=this.node,j=Kinetic.Tween.attrs[i._id][this._id];for(b in j){if(c=j[b],d=c.start,e=c.diff,Kinetic.Util._isArray(d))for(f=[],h=d.length,g=0;h>g;g++)f.push(d[g]+e[g]*a);else f=d+e*a;i.setAttr(b,f)}},_addListeners:function(){var a=this;this.tween.onPlay=function(){a.anim.start()},this.tween.onReverse=function(){a.anim.start()},this.tween.onPause=function(){a.anim.stop()},this.tween.onFinish=function(){a.onFinish&&a.onFinish()},this.tween.onReset=function(){a.onReset&&a.onReset()}},play:function(){return this.tween.play(),this},reverse:function(){return this.tween.reverse(),this},reset:function(){this.node;return this.tween.reset(),this},seek:function(a){this.node;return this.tween.seek(1e3*a),this},pause:function(){return this.tween.pause(),this},finish:function(){this.node;return this.tween.finish(),this},destroy:function(){var a,b=this.node._id,c=this._id,d=Kinetic.Tween.tweens[b];this.pause();for(a in d)delete Kinetic.Tween.tweens[b][a];delete Kinetic.Tween.attrs[b][c]}};var f=function(a,b,c,d,e,f,g){this.prop=a,this.propFunc=b,this.begin=d,this._pos=d,this.duration=f,this._change=0,this.prevPos=0,this.yoyo=g,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=c,this._change=e-this.begin,this.pause()};f.prototype={fire:function(a){var b=this[a];b&&b()},setTime:function(a){a>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():0>a?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=a,this.update())},getTime:function(){return this._time},setPosition:function(a){this.prevPos=this._pos,this.propFunc(a),this._pos=a},getPosition:function(a){return void 0===a&&(a=this._time),this.func(a,this.begin,this._change,this.duration)},play:function(){this.state=c,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")},reverse:function(){this.state=d,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")},seek:function(a){this.pause(),this._time=a,this.update(),this.fire("onSeek")},reset:function(){this.pause(),this._time=0,this.update(),this.fire("onReset")},finish:function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")},update:function(){this.setPosition(this.getPosition(this._time))},onEnterFrame:function(){var a=this.getTimer()-this._startTime;this.state===c?this.setTime(a):this.state===d&&this.setTime(this.duration-a)},pause:function(){this.state=b,this.fire("onPause")},getTimer:function(){return(new Date).getTime()}},Kinetic.Easings={BackEaseIn:function(a,b,c,d){var e=1.70158;return c*(a/=d)*a*((e+1)*a-e)+b},BackEaseOut:function(a,b,c,d){var e=1.70158;return c*((a=a/d-1)*a*((e+1)*a+e)+1)+b},BackEaseInOut:function(a,b,c,d){var e=1.70158;return(a/=d/2)<1?c/2*a*a*(((e*=1.525)+1)*a-e)+b:c/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+b},ElasticEaseIn:function(a,b,c,d,e,f){var g=0;return 0===a?b:1==(a/=d)?b+c:(f||(f=.3*d),!e||e<Math.abs(c)?(e=c,g=f/4):g=f/(2*Math.PI)*Math.asin(c/e),-(e*Math.pow(2,10*(a-=1))*Math.sin(2*(a*d-g)*Math.PI/f))+b)},ElasticEaseOut:function(a,b,c,d,e,f){var g=0;return 0===a?b:1==(a/=d)?b+c:(f||(f=.3*d),!e||e<Math.abs(c)?(e=c,g=f/4):g=f/(2*Math.PI)*Math.asin(c/e),e*Math.pow(2,-10*a)*Math.sin(2*(a*d-g)*Math.PI/f)+c+b)},ElasticEaseInOut:function(a,b,c,d,e,f){var g=0;return 0===a?b:2==(a/=d/2)?b+c:(f||(f=.3*d*1.5),!e||e<Math.abs(c)?(e=c,g=f/4):g=f/(2*Math.PI)*Math.asin(c/e),1>a?-.5*e*Math.pow(2,10*(a-=1))*Math.sin(2*(a*d-g)*Math.PI/f)+b:e*Math.pow(2,-10*(a-=1))*Math.sin(2*(a*d-g)*Math.PI/f)*.5+c+b)},BounceEaseOut:function(a,b,c,d){return(a/=d)<1/2.75?7.5625*c*a*a+b:2/2.75>a?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:2.5/2.75>a?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b},BounceEaseIn:function(a,b,c,d){return c-Kinetic.Easings.BounceEaseOut(d-a,0,c,d)+b},BounceEaseInOut:function(a,b,c,d){return d/2>a?.5*Kinetic.Easings.BounceEaseIn(2*a,0,c,d)+b:.5*Kinetic.Easings.BounceEaseOut(2*a-d,0,c,d)+.5*c+b},EaseIn:function(a,b,c,d){return c*(a/=d)*a+b},EaseOut:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},EaseInOut:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b},StrongEaseIn:function(a,b,c,d){return c*(a/=d)*a*a*a*a+b},StrongEaseOut:function(a,b,c,d){return c*((a=a/d-1)*a*a*a*a+1)+b},StrongEaseInOut:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a*a+b:c/2*((a-=2)*a*a*a*a+2)+b},Linear:function(a,b,c,d){return c*a/d+b}}}(),function(){Kinetic.DD={anim:new Kinetic.Animation,isDragging:!1,offset:{x:0,y:0},node:null,_drag:function(a){var b=Kinetic.DD,c=b.node;if(c){if(!b.isDragging){var d=c.getStage().getPointerPosition(),e=c.dragDistance(),f=Math.max(Math.abs(d.x-b.startPointerPos.x),Math.abs(d.y-b.startPointerPos.y));if(e>f)return}c._setDragPosition(a),b.isDragging||(b.isDragging=!0,c.fire("dragstart",{type:"dragstart",target:c,evt:a},!0)),c.fire("dragmove",{type:"dragmove",target:c,evt:a},!0)}},_endDragBefore:function(a){var b,c,d=Kinetic.DD,e=d.node;e&&(b=e.nodeType,c=e.getLayer(),d.anim.stop(),d.isDragging&&(d.isDragging=!1,Kinetic.listenClickTap=!1,a&&(a.dragEndNode=e)),delete d.node,(c||e).draw())},_endDragAfter:function(a){a=a||{};var b=a.dragEndNode;a&&b&&b.fire("dragend",{type:"dragend",target:b,evt:a},!0)}},Kinetic.Node.prototype.startDrag=function(){var a=Kinetic.DD,b=this.getStage(),c=this.getLayer(),d=b.getPointerPosition(),e=this.getAbsolutePosition();d&&(a.node&&a.node.stopDrag(),a.node=this,a.startPointerPos=d,a.offset.x=d.x-e.x,a.offset.y=d.y-e.y,a.anim.setLayers(c||this.getLayers()),a.anim.start(),this._setDragPosition())},Kinetic.Node.prototype._setDragPosition=function(a){var b=Kinetic.DD,c=this.getStage().getPointerPosition(),d=this.getDragBoundFunc();if(c){var e={x:c.x-b.offset.x,y:c.y-b.offset.y};void 0!==d&&(e=d.call(this,e,a)),this.setAbsolutePosition(e)}},Kinetic.Node.prototype.stopDrag=function(){var a=Kinetic.DD,b={};a._endDragBefore(b),a._endDragAfter(b)},Kinetic.Node.prototype.setDraggable=function(a){this._setAttr("draggable",a),this._dragChange()};var a=Kinetic.Node.prototype.destroy;Kinetic.Node.prototype.destroy=function(){var b=Kinetic.DD;b.node&&b.node._id===this._id&&this.stopDrag(),a.call(this)},Kinetic.Node.prototype.isDragging=function(){var a=Kinetic.DD;return a.node&&a.node._id===this._id&&a.isDragging},Kinetic.Node.prototype._listenDrag=function(){var a=this;this._dragCleanup(),"Stage"===this.getClassName()?this.on("contentMousedown.kinetic contentTouchstart.kinetic",function(b){Kinetic.DD.node||a.startDrag(b)}):this.on("mousedown.kinetic touchstart.kinetic",function(b){Kinetic.DD.node||a.startDrag(b)})},Kinetic.Node.prototype._dragChange=function(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var a=this.getStage(),b=Kinetic.DD;a&&b.node&&b.node._id===this._id&&b.node.stopDrag()}},Kinetic.Node.prototype._dragCleanup=function(){"Stage"===this.getClassName()?(this.off("contentMousedown.kinetic"),this.off("contentTouchstart.kinetic")):(this.off("mousedown.kinetic"),this.off("touchstart.kinetic"))},Kinetic.Factory.addGetterSetter(Kinetic.Node,"dragBoundFunc"),Kinetic.Factory.addGetter(Kinetic.Node,"draggable",!1),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"draggable");var b=Kinetic.document.documentElement;b.addEventListener("mouseup",Kinetic.DD._endDragBefore,!0),b.addEventListener("touchend",Kinetic.DD._endDragBefore,!0),b.addEventListener("mouseup",Kinetic.DD._endDragAfter,!1),b.addEventListener("touchend",Kinetic.DD._endDragAfter,!1)}(),function(){Kinetic.Util.addMethods(Kinetic.Container,{__init:function(a){this.children=new Kinetic.Collection,Kinetic.Node.call(this,a)},getChildren:function(a){if(a){var b=new Kinetic.Collection;return this.children.each(function(c){a(c)&&b.push(c)}),b}return this.children},hasChildren:function(){return this.getChildren().length>0},removeChildren:function(){for(var a,b=Kinetic.Collection.toCollection(this.children),c=0;c<b.length;c++)a=b[c],delete a.parent,a.index=0,a.hasChildren()&&a.removeChildren(),a.remove();return b=null,this.children=new Kinetic.Collection,this},destroyChildren:function(){for(var a,b=Kinetic.Collection.toCollection(this.children),c=0;c<b.length;c++)a=b[c],delete a.parent,a.index=0,a.destroy();return b=null,this.children=new Kinetic.Collection,this},add:function(a){if(!(arguments.length>1)){if(a.getParent())return void a.moveTo(this);var b=this.children;return this._validateAdd(a),a.index=b.length,a.parent=this,b.push(a),this._fire("add",{child:a}),this}for(var c=0;c<arguments.length;c++)this.add(arguments[c])},destroy:function(){this.hasChildren()&&this.destroyChildren(),Kinetic.Node.prototype.destroy.call(this)},find:function(a){var b,c,d,e,f,g,h,i=[],j=a.replace(/ /g,"").split(","),k=j.length;for(b=0;k>b;b++)if(d=j[b],"#"===d.charAt(0))f=this._getNodeById(d.slice(1)),f&&i.push(f);else if("."===d.charAt(0))e=this._getNodesByName(d.slice(1)),i=i.concat(e);else for(g=this.getChildren(),h=g.length,c=0;h>c;c++)i=i.concat(g[c]._get(d));return Kinetic.Collection.toCollection(i)},_getNodeById:function(a){var b=Kinetic.ids[a];return void 0!==b&&this.isAncestorOf(b)?b:null},_getNodesByName:function(a){var b=Kinetic.names[a]||[];return this._getDescendants(b)},_get:function(a){for(var b=Kinetic.Node.prototype._get.call(this,a),c=this.getChildren(),d=c.length,e=0;d>e;e++)b=b.concat(c[e]._get(a));return b},toObject:function(){var a=Kinetic.Node.prototype.toObject.call(this);a.children=[];for(var b=this.getChildren(),c=b.length,d=0;c>d;d++){var e=b[d];a.children.push(e.toObject())}return a},_getDescendants:function(a){for(var b=[],c=a.length,d=0;c>d;d++){var e=a[d];this.isAncestorOf(e)&&b.push(e)}return b},isAncestorOf:function(a){for(var b=a.getParent();b;){if(b._id===this._id)return!0;b=b.getParent()}return!1},clone:function(a){var b=Kinetic.Node.prototype.clone.call(this,a);return this.getChildren().each(function(a){b.add(a.clone())}),b},getAllIntersections:function(a){var b=[];return this.find("Shape").each(function(c){c.isVisible()&&c.intersects(a)&&b.push(c)}),b},_setChildrenIndices:function(){this.children.each(function(a,b){a.index=b})},drawScene:function(a,b){var c=this.getLayer(),d=a||c&&c.getCanvas(),e=d&&d.getContext(),f=this._cache.canvas,g=f&&f.scene;return this.isVisible()&&(g?this._drawCachedSceneCanvas(e):this._drawChildren(d,"drawScene",b)),this
},drawHit:function(a,b){var c=this.getLayer(),d=a||c&&c.hitCanvas,e=d&&d.getContext(),f=this._cache.canvas,g=f&&f.hit;return this.shouldDrawHit()&&(g?this._drawCachedHitCanvas(e):this._drawChildren(d,"drawHit",b)),this},_drawChildren:function(a,b,c){var d,e,f=this.getLayer(),g=a&&a.getContext(),h=this.getClipWidth(),i=this.getClipHeight(),j=h&&i;j&&f&&(d=this.getClipX(),e=this.getClipY(),g.save(),f._applyTransform(this,g),g.beginPath(),g.rect(d,e,h,i),g.clip(),g.reset()),this.children.each(function(d){d[b](a,c)}),j&&g.restore()}}),Kinetic.Util.extend(Kinetic.Container,Kinetic.Node),Kinetic.Container.prototype.get=Kinetic.Container.prototype.find,Kinetic.Factory.addComponentsGetterSetter(Kinetic.Container,"clip",["x","y","width","height"]),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipX"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipY"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipWidth"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipHeight"),Kinetic.Collection.mapMethods(Kinetic.Container)}(),function(){function a(a){a.fill()}function b(a){a.stroke()}function c(a){a.fill()}function d(a){a.stroke()}function e(){this._clearCache(f)}var f="hasShadow";Kinetic.Util.addMethods(Kinetic.Shape,{__init:function(f){this.nodeType="Shape",this._fillFunc=a,this._strokeFunc=b,this._fillFuncHit=c,this._strokeFuncHit=d;for(var g,h=Kinetic.shapes;;)if(g=Kinetic.Util.getRandomColor(),g&&!(g in h))break;this.colorKey=g,h[g]=this,Kinetic.Node.call(this,f),this.on("shadowColorChange.kinetic shadowBlurChange.kinetic shadowOffsetChange.kinetic shadowOpacityChange.kinetic shadowEnabledChange.kinetic",e)},hasChildren:function(){return!1},getChildren:function(){return[]},getContext:function(){return this.getLayer().getContext()},getCanvas:function(){return this.getLayer().getCanvas()},hasShadow:function(){return this._getCache(f,this._hasShadow)},_hasShadow:function(){return this.getShadowEnabled()&&0!==this.getShadowOpacity()&&!!(this.getShadowColor()||this.getShadowBlur()||this.getShadowOffsetX()||this.getShadowOffsetY())},hasFill:function(){return!!(this.getFill()||this.getFillPatternImage()||this.getFillLinearGradientColorStops()||this.getFillRadialGradientColorStops())},hasStroke:function(){return!!(this.stroke()||this.strokeRed()||this.strokeGreen()||this.strokeBlue())},_get:function(a){return this.className===a||this.nodeType===a?[this]:[]},intersects:function(a){var b,c=this.getStage(),d=c.bufferHitCanvas;return d.getContext().clear(),this.drawScene(d),b=d.context.getImageData(Math.round(a.x),Math.round(a.y),1,1).data,b[3]>0},destroy:function(){Kinetic.Node.prototype.destroy.call(this),delete Kinetic.shapes[this.colorKey]},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasFill()&&this.hasStroke()&&this.getStage()},drawScene:function(a,b){var c,d,e,f=this.getLayer(),g=a||f.getCanvas(),h=g.getContext(),i=this._cache.canvas,j=this.sceneFunc(),k=this.hasShadow();return this.isVisible()&&(i?this._drawCachedSceneCanvas(h):j&&(h.save(),this._useBufferCanvas()?(c=this.getStage(),d=c.bufferCanvas,e=d.getContext(),e.clear(),e.save(),e._applyLineJoin(this),f._applyTransform(this,e,b),j.call(this,e),e.restore(),k&&(h.save(),h._applyShadow(this),h.drawImage(d._canvas,0,0),h.restore()),h._applyOpacity(this),h.drawImage(d._canvas,0,0)):(h._applyLineJoin(this),f._applyTransform(this,h,b),k&&(h.save(),h._applyShadow(this),j.call(this,h),h.restore()),h._applyOpacity(this),j.call(this,h)),h.restore())),this},drawHit:function(a,b){var c=this.getLayer(),d=a||c.hitCanvas,e=d.getContext(),f=this.hitFunc()||this.sceneFunc(),g=this._cache.canvas,h=g&&g.hit;return this.shouldDrawHit()&&(h?this._drawCachedHitCanvas(e):f&&(e.save(),e._applyLineJoin(this),c._applyTransform(this,e,b),f.call(this,e),e.restore())),this},drawHitFromCache:function(a){var b,c,d,e,f,g,h,i,j=a||0,k=this._cache.canvas,l=this._getCachedSceneCanvas(),m=l.getContext(),n=k.hit,o=n.getContext(),p=l.getWidth(),q=l.getHeight();o.clear();try{for(b=m.getImageData(0,0,p,q),c=b.data,d=o.getImageData(0,0,p,q),e=d.data,f=c.length,g=Kinetic.Util._hexToRgb(this.colorKey),h=0;f>h;h+=4)i=c[h+3],i>j&&(e[h]=g.r,e[h+1]=g.g,e[h+2]=g.b,e[h+3]=255);o.putImageData(d,0,0)}catch(r){Kinetic.Util.warn("Unable to draw hit graph from cached scene canvas. "+r.message)}return this}}),Kinetic.Util.extend(Kinetic.Shape,Kinetic.Node),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"stroke"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeWidth",2),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"lineJoin"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"lineCap"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"sceneFunc"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"hitFunc"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"dash"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowColor"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowBlur"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOpacity"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"shadowOffset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOffsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOffsetY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternImage"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fill"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientColorStops"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientColorStops"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternRepeat","repeat"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"dashEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeScaleEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPriority","color"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillPatternOffset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternOffsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternOffsetY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillPatternScale",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternScaleX",1),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternScaleY",1),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillLinearGradientStartPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientStartPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientStartPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillLinearGradientEndPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientEndPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientEndPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillRadialGradientStartPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillRadialGradientEndPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndPointY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternRotation",0),Kinetic.Factory.backCompat(Kinetic.Shape,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"}),Kinetic.Collection.mapMethods(Kinetic.Shape)}(),function(){function a(a,b){a.content.addEventListener(b,function(c){a[I+b](c)},!1)}var b="Stage",c="string",d="px",e="mouseout",f="mouseleave",g="mouseover",h="mouseenter",i="mousemove",j="mousedown",k="mouseup",l="click",m="dblclick",n="touchstart",o="touchend",p="tap",q="dbltap",r="touchmove",s="contentMouseout",t="contentMouseover",u="contentMousemove",v="contentMousedown",w="contentMouseup",x="contentClick",y="contentDblclick",z="contentTouchstart",A="contentTouchend",B="contentDbltap",C="contentTouchmove",D="div",E="relative",F="inline-block",G="kineticjs-content",H=" ",I="_",J="container",K="",L=[j,i,k,e,n,r,o,g],M=L.length;Kinetic.Util.addMethods(Kinetic.Stage,{___init:function(a){this.nodeType=b,Kinetic.Container.call(this,a),this._id=Kinetic.idCounter++,this._buildDOM(),this._bindContentEvents(),this._enableNestedTransforms=!1,Kinetic.stages.push(this)},_validateAdd:function(a){"Layer"!==a.getType()&&Kinetic.Util.error("You may only add layers to the stage.")},setContainer:function(a){if(typeof a===c){var b=a;if(a=Kinetic.document.getElementById(a),!a)throw"Can not find container in document with id "+b}return this._setAttr(J,a),this},shouldDrawHit:function(){return!0},draw:function(){return Kinetic.Node.prototype.draw.call(this),this},setHeight:function(a){return Kinetic.Node.prototype.setHeight.call(this,a),this._resizeDOM(),this},setWidth:function(a){return Kinetic.Node.prototype.setWidth.call(this,a),this._resizeDOM(),this},clear:function(){var a,b=this.children,c=b.length;for(a=0;c>a;a++)b[a].clear();return this},clone:function(a){return a||(a={}),a.container=Kinetic.document.createElement(D),Kinetic.Container.prototype.clone.call(this,a)},destroy:function(){var a=this.content;Kinetic.Container.prototype.destroy.call(this),a&&Kinetic.Util._isInDocument(a)&&this.getContainer().removeChild(a);var b=Kinetic.stages.indexOf(this);b>-1&&Kinetic.stages.splice(b,1)},getPointerPosition:function(){return this.pointerPos},getStage:function(){return this},getContent:function(){return this.content},toDataURL:function(a){function b(e){var f=i[e],j=f.toDataURL(),k=new Kinetic.window.Image;k.onload=function(){h.drawImage(k,0,0),e<i.length-1?b(e+1):a.callback(g.toDataURL(c,d))},k.src=j}a=a||{};var c=a.mimeType||null,d=a.quality||null,e=a.x||0,f=a.y||0,g=new Kinetic.SceneCanvas({width:a.width||this.getWidth(),height:a.height||this.getHeight(),pixelRatio:1}),h=g.getContext()._context,i=this.children;(e||f)&&h.translate(-1*e,-1*f),b(0)},toImage:function(a){var b=a.callback;a.callback=function(a){Kinetic.Util._getImage(a,function(a){b(a)})},this.toDataURL(a)},getIntersection:function(a){var b,c,d=this.getChildren(),e=d.length,f=e-1;for(b=f;b>=0;b--)if(c=d[b].getIntersection(a))return c;return null},_resizeDOM:function(){if(this.content){var a,b,c=this.getWidth(),e=this.getHeight(),f=this.getChildren(),g=f.length;for(this.content.style.width=c+d,this.content.style.height=e+d,this.bufferCanvas.setSize(c,e),this.bufferHitCanvas.setSize(c,e),a=0;g>a;a++)b=f[a],b.getCanvas().setSize(c,e),b.hitCanvas.setSize(c,e),b.draw()}},add:function(a){if(!(arguments.length>1))return Kinetic.Container.prototype.add.call(this,a),a._setCanvasSize(this.width(),this.height()),a.draw(),this.content.appendChild(a.canvas._canvas),this;for(var b=0;b<arguments.length;b++)this.add(arguments[b])},getParent:function(){return null},getLayer:function(){return null},getLayers:function(){return this.getChildren()},_bindContentEvents:function(){for(var b=0;M>b;b++)a(this,L[b])},_mouseover:function(a){Kinetic.UA.mobile||(this._setPointerPosition(a),this._fire(t,{evt:a}))},_mouseout:function(a){if(!Kinetic.UA.mobile){this._setPointerPosition(a);var b=this.targetShape;b&&!Kinetic.isDragging()&&(b._fireAndBubble(e,{evt:a}),b._fireAndBubble(f,{evt:a}),this.targetShape=null),this.pointerPos=void 0,this._fire(s,{evt:a})}},_mousemove:function(a){if(!Kinetic.UA.mobile){this._setPointerPosition(a);var b=Kinetic.DD,c=this.getIntersection(this.getPointerPosition());c&&c.isListening()?Kinetic.isDragging()||this.targetShape&&this.targetShape._id===c._id?c._fireAndBubble(i,{evt:a}):(this.targetShape&&(this.targetShape._fireAndBubble(e,{evt:a},c),this.targetShape._fireAndBubble(f,{evt:a},c)),c._fireAndBubble(g,{evt:a},this.targetShape),c._fireAndBubble(h,{evt:a},this.targetShape),this.targetShape=c):this.targetShape&&!Kinetic.isDragging()&&(this.targetShape._fireAndBubble(e,{evt:a}),this.targetShape._fireAndBubble(f,{evt:a}),this.targetShape=null),this._fire(u,{evt:a}),b&&b._drag(a)}a.preventDefault&&a.preventDefault()},_mousedown:function(a){if(!Kinetic.UA.mobile){this._setPointerPosition(a);var b=this.getIntersection(this.getPointerPosition());Kinetic.listenClickTap=!0,b&&b.isListening()&&(this.clickStartShape=b,b._fireAndBubble(j,{evt:a})),this._fire(v,{evt:a})}a.preventDefault&&a.preventDefault()},_mouseup:function(a){if(!Kinetic.UA.mobile){this._setPointerPosition(a);var b=this.getIntersection(this.getPointerPosition()),c=this.clickStartShape,d=!1;Kinetic.inDblClickWindow?(d=!0,Kinetic.inDblClickWindow=!1):Kinetic.inDblClickWindow=!0,setTimeout(function(){Kinetic.inDblClickWindow=!1},Kinetic.dblClickWindow),b&&b.isListening()&&(b._fireAndBubble(k,{evt:a}),Kinetic.listenClickTap&&c&&c._id===b._id&&(b._fireAndBubble(l,{evt:a}),d&&b._fireAndBubble(m,{evt:a}))),this._fire(w,{evt:a}),Kinetic.listenClickTap&&(this._fire(x,{evt:a}),d&&this._fire(y,{evt:a})),Kinetic.listenClickTap=!1}a.preventDefault&&a.preventDefault()},_touchstart:function(a){this._setPointerPosition(a);var b=this.getIntersection(this.getPointerPosition());Kinetic.listenClickTap=!0,b&&b.isListening()&&(this.tapStartShape=b,b._fireAndBubble(n,{evt:a}),b.isListening()&&a.preventDefault&&a.preventDefault()),this._fire(z,{evt:a})},_touchend:function(a){this._setPointerPosition(a);var b=this.getIntersection(this.getPointerPosition()),c=!1;Kinetic.inDblClickWindow?(c=!0,Kinetic.inDblClickWindow=!1):Kinetic.inDblClickWindow=!0,setTimeout(function(){Kinetic.inDblClickWindow=!1},Kinetic.dblClickWindow),b&&b.isListening()&&(b._fireAndBubble(o,{evt:a}),Kinetic.listenClickTap&&b._id===this.tapStartShape._id&&(b._fireAndBubble(p,{evt:a}),c&&b._fireAndBubble(q,{evt:a})),b.isListening()&&a.preventDefault&&a.preventDefault()),Kinetic.listenClickTap&&(this._fire(A,{evt:a}),c&&this._fire(B,{evt:a})),Kinetic.listenClickTap=!1},_touchmove:function(a){this._setPointerPosition(a);var b=Kinetic.DD,c=this.getIntersection(this.getPointerPosition());c&&c.isListening()&&(c._fireAndBubble(r,{evt:a}),c.isListening()&&a.preventDefault&&a.preventDefault()),this._fire(C,{evt:a}),b&&b._drag(a)},_setPointerPosition:function(a){var b,c=this._getContentPosition(),d=a.offsetX,e=a.clientX,f=null,g=null;a=a?a:window.event,void 0!==a.touches?a.touches.length>0&&(b=a.touches[0],f=b.clientX-c.left,g=b.clientY-c.top):void 0!==d?(f=d,g=a.offsetY):"mozilla"===Kinetic.UA.browser?(f=a.layerX,g=a.layerY):void 0!==e&&c&&(f=e-c.left,g=a.clientY-c.top),null!==f&&null!==g&&(this.pointerPos={x:f,y:g})},_getContentPosition:function(){var a=this.content.getBoundingClientRect?this.content.getBoundingClientRect():{top:0,left:0};return{top:a.top,left:a.left}},_buildDOM:function(){var a=this.getContainer();if(!a){if(Kinetic.Util.isBrowser())throw"Stage has not container. But container is required";a=Kinetic.document.createElement(D)}a.innerHTML=K,this.content=Kinetic.document.createElement(D),this.content.style.position=E,this.content.style.display=F,this.content.className=G,this.content.setAttribute("role","presentation"),a.appendChild(this.content),this.bufferCanvas=new Kinetic.SceneCanvas({pixelRatio:1}),this.bufferHitCanvas=new Kinetic.HitCanvas,this._resizeDOM()},_onContent:function(a,b){var c,d,e=a.split(H),f=e.length;for(c=0;f>c;c++)d=e[c],this.content.addEventListener(d,b,!1)},cache:function(){Kinetic.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes.")},clearCache:function(){}}),Kinetic.Util.extend(Kinetic.Stage,Kinetic.Container),Kinetic.Factory.addGetter(Kinetic.Stage,"container"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Stage,"container")}(),function(){Kinetic.Util.addMethods(Kinetic.BaseLayer,{___init:function(a){this.nodeType="Layer",Kinetic.Container.call(this,a)},createPNGStream:function(){return this.canvas._canvas.createPNGStream()},getCanvas:function(){return this.canvas},getHitCanvas:function(){return this.hitCanvas},getContext:function(){return this.getCanvas().getContext()},clear:function(a){return this.getContext().clear(a),this.getHitCanvas().getContext().clear(a),this},setZIndex:function(a){Kinetic.Node.prototype.setZIndex.call(this,a);var b=this.getStage();return b&&(b.content.removeChild(this.getCanvas()._canvas),a<b.getChildren().length-1?b.content.insertBefore(this.getCanvas()._canvas,b.getChildren()[a+1].getCanvas()._canvas):b.content.appendChild(this.getCanvas()._canvas)),this},moveToTop:function(){Kinetic.Node.prototype.moveToTop.call(this);var a=this.getStage();a&&(a.content.removeChild(this.getCanvas()._canvas),a.content.appendChild(this.getCanvas()._canvas))},moveUp:function(){if(Kinetic.Node.prototype.moveUp.call(this)){var a=this.getStage();a&&(a.content.removeChild(this.getCanvas()._canvas),this.index<a.getChildren().length-1?a.content.insertBefore(this.getCanvas()._canvas,a.getChildren()[this.index+1].getCanvas()._canvas):a.content.appendChild(this.getCanvas()._canvas))}},moveDown:function(){if(Kinetic.Node.prototype.moveDown.call(this)){var a=this.getStage();if(a){var b=a.getChildren();a.content.removeChild(this.getCanvas()._canvas),a.content.insertBefore(this.getCanvas()._canvas,b[this.index+1].getCanvas()._canvas)}}},moveToBottom:function(){if(Kinetic.Node.prototype.moveToBottom.call(this)){var a=this.getStage();if(a){var b=a.getChildren();a.content.removeChild(this.getCanvas()._canvas),a.content.insertBefore(this.getCanvas()._canvas,b[1].getCanvas()._canvas)}}},getLayer:function(){return this},remove:function(){var a=this.getCanvas()._canvas;return Kinetic.Node.prototype.remove.call(this),a&&a.parentNode&&Kinetic.Util._isInDocument(a)&&a.parentNode.removeChild(a),this},getStage:function(){return this.parent}}),Kinetic.Util.extend(Kinetic.BaseLayer,Kinetic.Container),Kinetic.Factory.addGetterSetter(Kinetic.BaseLayer,"clearBeforeDraw",!0),Kinetic.Collection.mapMethods(Kinetic.BaseLayer)}(),function(){var a="#",b="beforeDraw",c="draw",d=[{x:0,y:0},{x:-1,y:0},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:-1,y:1}],e=d.length;Kinetic.Util.addMethods(Kinetic.Layer,{____init:function(a){this.nodeType="Layer",this.canvas=new Kinetic.SceneCanvas,this.hitCanvas=new Kinetic.HitCanvas,Kinetic.BaseLayer.call(this,a)},_setCanvasSize:function(a,b){this.canvas.setSize(a,b),this.hitCanvas.setSize(a,b)},_validateAdd:function(a){var b=a.getType();"Group"!==b&&"Shape"!==b&&Kinetic.Util.error("You may only add groups and shapes to a layer.")},getIntersection:function(a){var b,c,f,g;if(!this.hitGraphEnabled()||!this.isVisible())return null;for(c=0;e>c;c++){if(f=d[c],b=this._getIntersection({x:a.x+f.x,y:a.y+f.y}),g=b.shape)return g;if(!b.antialiased)return null}},_getIntersection:function(b){var c,d,e=this.hitCanvas.context._context.getImageData(b.x,b.y,1,1).data,f=e[3];return 255===f?(c=Kinetic.Util._rgbToHex(e[0],e[1],e[2]),d=Kinetic.shapes[a+c],{shape:d}):f>0?{antialiased:!0}:{}},drawScene:function(a,d){var e=this.getLayer(),f=a||e&&e.getCanvas();return this._fire(b,{node:this}),this.getClearBeforeDraw()&&f.getContext().clear(),Kinetic.Container.prototype.drawScene.call(this,f,d),this._fire(c,{node:this}),this},_applyTransform:function(a,b,c){var d=a.getAbsoluteTransform(c).getMatrix();b.transform(d[0],d[1],d[2],d[3],d[4],d[5])},drawHit:function(a,b){var c=this.getLayer(),d=a||c&&c.hitCanvas;return c&&c.getClearBeforeDraw()&&c.getHitCanvas().getContext().clear(),Kinetic.Container.prototype.drawHit.call(this,d,b),this},clear:function(a){return this.getContext().clear(a),this.getHitCanvas().getContext().clear(a),this},setVisible:function(a){return Kinetic.Node.prototype.setVisible.call(this,a),a?(this.getCanvas()._canvas.style.display="block",this.hitCanvas._canvas.style.display="block"):(this.getCanvas()._canvas.style.display="none",this.hitCanvas._canvas.style.display="none"),this},enableHitGraph:function(){return this.setHitGraphEnabled(!0),this},disableHitGraph:function(){return this.setHitGraphEnabled(!1),this}}),Kinetic.Util.extend(Kinetic.Layer,Kinetic.BaseLayer),Kinetic.Factory.addGetterSetter(Kinetic.Layer,"hitGraphEnabled",!0),Kinetic.Collection.mapMethods(Kinetic.Layer)}(),function(){Kinetic.Util.addMethods(Kinetic.FastLayer,{____init:function(a){this.nodeType="Layer",this.canvas=new Kinetic.SceneCanvas,Kinetic.BaseLayer.call(this,a)},_validateAdd:function(a){var b=a.getType();"Shape"!==b&&Kinetic.Util.error("You may only add shapes to a fast layer.")},_setCanvasSize:function(a,b){this.canvas.setSize(a,b)},hitGraphEnabled:function(){return!1},getIntersection:function(){return null},drawScene:function(a){var b=this.getLayer(),c=a||b&&b.getCanvas();return this.getClearBeforeDraw()&&c.getContext().clear(),Kinetic.Container.prototype.drawScene.call(this,c),this},_applyTransform:function(a,b,c){if(!c||c._id!==this._id){var d=a.getTransform().getMatrix();b.transform(d[0],d[1],d[2],d[3],d[4],d[5])}},draw:function(){return this.drawScene(),this},clear:function(a){return this.getContext().clear(a),this},setVisible:function(a){return Kinetic.Node.prototype.setVisible.call(this,a),this.getCanvas()._canvas.style.display=a?"block":"none",this}}),Kinetic.Util.extend(Kinetic.FastLayer,Kinetic.BaseLayer),Kinetic.Collection.mapMethods(Kinetic.FastLayer)}(),function(){Kinetic.Util.addMethods(Kinetic.Group,{___init:function(a){this.nodeType="Group",Kinetic.Container.call(this,a)},_validateAdd:function(a){var b=a.getType();"Group"!==b&&"Shape"!==b&&Kinetic.Util.error("You may only add groups and shapes to groups.")}}),Kinetic.Util.extend(Kinetic.Group,Kinetic.Container),Kinetic.Collection.mapMethods(Kinetic.Group)}(),function(){Kinetic.Rect=function(a){this.___init(a)},Kinetic.Rect.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className="Rect",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){var b=this.getCornerRadius(),c=this.getWidth(),d=this.getHeight();a.beginPath(),b?(a.moveTo(b,0),a.lineTo(c-b,0),a.arc(c-b,b,b,3*Math.PI/2,0,!1),a.lineTo(c,d-b),a.arc(c-b,d-b,b,0,Math.PI/2,!1),a.lineTo(b,d),a.arc(b,d-b,b,Math.PI/2,Math.PI,!1),a.lineTo(0,b),a.arc(b,b,b,Math.PI,3*Math.PI/2,!1)):a.rect(0,0,c,d),a.closePath(),a.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Rect,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Rect,"cornerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Rect)}(),function(){var a=2*Math.PI-1e-4,b="Circle";Kinetic.Circle=function(a){this.___init(a)},Kinetic.Circle.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className=b,this.sceneFunc(this._sceneFunc)},_sceneFunc:function(b){b.beginPath(),b.arc(0,0,this.getRadius(),0,a,!1),b.closePath(),b.fillStrokeShape(this)},getWidth:function(){return 2*this.getRadius()},getHeight:function(){return 2*this.getRadius()},setWidth:function(a){Kinetic.Node.prototype.setWidth.call(this,a),this.setRadius(a/2)},setHeight:function(a){Kinetic.Node.prototype.setHeight.call(this,a),this.setRadius(a/2)}},Kinetic.Util.extend(Kinetic.Circle,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Circle,"radius",0),Kinetic.Collection.mapMethods(Kinetic.Circle)}(),function(){var a=2*Math.PI-1e-4,b="Ellipse";Kinetic.Ellipse=function(a){this.___init(a)},Kinetic.Ellipse.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className=b,this.sceneFunc(this._sceneFunc)},_sceneFunc:function(b){var c=this.getRadius(),d=c.x,e=c.y;b.beginPath(),b.save(),d!==e&&b.scale(1,e/d),b.arc(0,0,d,0,a,!1),b.restore(),b.closePath(),b.fillStrokeShape(this)},getWidth:function(){return 2*this.getRadius().x},getHeight:function(){return 2*this.getRadius().y},setWidth:function(a){Kinetic.Node.prototype.setWidth.call(this,a),this.setRadius({x:a/2})},setHeight:function(a){Kinetic.Node.prototype.setHeight.call(this,a),this.setRadius({y:a/2})}},Kinetic.Util.extend(Kinetic.Ellipse,Kinetic.Shape),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Ellipse,"radius",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Ellipse,"radiusX",0),Kinetic.Factory.addGetterSetter(Kinetic.Ellipse,"radiusY",0),Kinetic.Collection.mapMethods(Kinetic.Ellipse)}(),function(){var a=2*Math.PI-1e-4;Kinetic.Ring=function(a){this.___init(a)},Kinetic.Ring.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className="Ring",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(b){b.beginPath(),b.arc(0,0,this.getInnerRadius(),0,a,!1),b.moveTo(this.getOuterRadius(),0),b.arc(0,0,this.getOuterRadius(),a,0,!0),b.closePath(),b.fillStrokeShape(this)},getWidth:function(){return 2*this.getOuterRadius()},getHeight:function(){return 2*this.getOuterRadius()},setWidth:function(a){Kinetic.Node.prototype.setWidth.call(this,a),this.setOuterRadius(a/2)},setHeight:function(a){Kinetic.Node.prototype.setHeight.call(this,a),this.setOuterRadius(a/2)}},Kinetic.Util.extend(Kinetic.Ring,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Ring,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Ring,"outerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Ring)}(),function(){Kinetic.Wedge=function(a){this.___init(a)},Kinetic.Wedge.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className="Wedge",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){a.beginPath(),a.arc(0,0,this.getRadius(),0,Kinetic.getAngle(this.getAngle()),this.getClockwise()),a.lineTo(0,0),a.closePath(),a.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Wedge,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"radius",0),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"angle",0),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"clockwise",!1),Kinetic.Factory.backCompat(Kinetic.Wedge,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Kinetic.Collection.mapMethods(Kinetic.Wedge)}(),function(){Math.PI/180;Kinetic.Arc=function(a){this.___init(a)},Kinetic.Arc.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className="Arc",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){var b=Kinetic.getAngle(this.angle()),c=this.clockwise();a.beginPath(),a.arc(0,0,this.getOuterRadius(),0,b,c),a.arc(0,0,this.getInnerRadius(),b,0,!c),a.closePath(),a.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Arc,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"outerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"angle",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"clockwise",!1),Kinetic.Collection.mapMethods(Kinetic.Arc)}(),function(){var a="Image";Kinetic.Image=function(a){this.___init(a)},Kinetic.Image.prototype={___init:function(b){Kinetic.Shape.call(this,b),this.className=a,this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()},_sceneFunc:function(a){var b,c,d,e,f=this.getWidth(),g=this.getHeight(),h=this.getImage();h&&(b=this.getCrop(),c=b.width,d=b.height,e=c&&d?[h,b.x,b.y,c,d,0,0,f,g]:[h,0,0,f,g]),a.beginPath(),a.rect(0,0,f,g),a.closePath(),a.fillStrokeShape(this),h&&a.drawImage.apply(a,e)},_hitFunc:function(a){var b=this.getWidth(),c=this.getHeight();a.beginPath(),a.rect(0,0,b,c),a.closePath(),a.fillStrokeShape(this)},getWidth:function(){var a=this.getImage();return this.attrs.width||(a?a.width:0)},getHeight:function(){var a=this.getImage();return this.attrs.height||(a?a.height:0)}},Kinetic.Util.extend(Kinetic.Image,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Image,"image"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Image,"crop",["x","y","width","height"]),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropX",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropY",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropWidth",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropHeight",0),Kinetic.Collection.mapMethods(Kinetic.Image)}(),function(){function a(a){a.fillText(this.partialText,0,0)}function b(a){a.strokeText(this.partialText,0,0)}var c="auto",d="center",e="Change.kinetic",f="2d",g="-",h="",i="left",j="text",k="Text",l="middle",m="normal",n="px ",o=" ",p="right",q="word",r="char",s="none",t=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","lineHeight","text","width","height","wrap"],u=t.length,v=Kinetic.Util.createCanvasElement().getContext(f);Kinetic.Text=function(a){this.___init(a)},Kinetic.Text.prototype={___init:function(d){var f=this;void 0===d.width&&(d.width=c),void 0===d.height&&(d.height=c),Kinetic.Shape.call(this,d),this._fillFunc=a,this._strokeFunc=b,this.className=k;for(var g=0;u>g;g++)this.on(t[g]+e,f._setTextData);this._setTextData(),this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_sceneFunc:function(a){var b,c=this.getPadding(),e=this.getTextHeight(),f=this.getLineHeight()*e,g=this.textArr,h=g.length,j=this.getWidth();for(a.setAttr("font",this._getContextFont()),a.setAttr("textBaseline",l),a.setAttr("textAlign",i),a.save(),a.translate(c,0),a.translate(0,c+e/2),b=0;h>b;b++){var k=g[b],m=k.text,n=k.width;a.save(),this.getAlign()===p?a.translate(j-n-2*c,0):this.getAlign()===d&&a.translate((j-n-2*c)/2,0),this.partialText=m,a.fillStrokeShape(this),a.restore(),a.translate(0,f)}a.restore()},_hitFunc:function(a){var b=this.getWidth(),c=this.getHeight();a.beginPath(),a.rect(0,0,b,c),a.closePath(),a.fillStrokeShape(this)},setText:function(a){var b=Kinetic.Util._isString(a)?a:a.toString();return this._setAttr(j,b),this},getWidth:function(){return this.attrs.width===c?this.getTextWidth()+2*this.getPadding():this.attrs.width},getHeight:function(){return this.attrs.height===c?this.getTextHeight()*this.textArr.length*this.getLineHeight()+2*this.getPadding():this.attrs.height},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},_getTextSize:function(a){var b,c=v,d=this.getFontSize();return c.save(),c.font=this._getContextFont(),b=c.measureText(a),c.restore(),{width:b.width,height:parseInt(d,10)}},_getContextFont:function(){return this.getFontStyle()+o+this.getFontVariant()+o+this.getFontSize()+n+this.getFontFamily()},_addTextLine:function(a,b){return this.textArr.push({text:a,width:b})},_getTextWidth:function(a){return v.measureText(a).width},_setTextData:function(){var a=this.getText().split("\n"),b=+this.getFontSize(),d=0,e=this.getLineHeight()*b,f=this.attrs.width,h=this.attrs.height,i=f!==c,j=h!==c,k=this.getPadding(),l=f-2*k,m=h-2*k,n=0,p=this.getWrap(),q=p!==s,t=p!==r&&q;this.textArr=[],v.save(),v.font=this._getContextFont();
for(var u=0,w=a.length;w>u;++u){var x=a[u],y=this._getTextWidth(x);if(i&&y>l)for(;x.length>0;){for(var z=0,A=x.length,B="",C=0;A>z;){var D=z+A>>>1,E=x.slice(0,D+1),F=this._getTextWidth(E);l>=F?(z=D+1,B=E,C=F):A=D}if(!B)break;if(t){var G=Math.max(B.lastIndexOf(o),B.lastIndexOf(g))+1;G>0&&(z=G,B=B.slice(0,z),C=this._getTextWidth(B))}if(this._addTextLine(B,C),d=Math.max(d,C),n+=e,!q||j&&n+e>m)break;if(x=x.slice(z),x.length>0&&(y=this._getTextWidth(x),l>=y)){this._addTextLine(x,y),n+=e,d=Math.max(d,y);break}}else this._addTextLine(x,y),n+=e,d=Math.max(d,y);if(j&&n+e>m)break}v.restore(),this.textHeight=b,this.textWidth=d}},Kinetic.Util.extend(Kinetic.Text,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontFamily","Arial"),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontSize",12),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontStyle",m),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontVariant",m),Kinetic.Factory.addGetterSetter(Kinetic.Text,"padding",0),Kinetic.Factory.addGetterSetter(Kinetic.Text,"align",i),Kinetic.Factory.addGetterSetter(Kinetic.Text,"lineHeight",1),Kinetic.Factory.addGetterSetter(Kinetic.Text,"wrap",q),Kinetic.Factory.addGetter(Kinetic.Text,"text",h),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Text,"text"),Kinetic.Collection.mapMethods(Kinetic.Text)}(),function(){Kinetic.Line=function(a){this.___init(a)},Kinetic.Line.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className="Line",this.on("pointsChange.kinetic tensionChange.kinetic closedChange.kinetic",function(){this._clearCache("tensionPoints")}),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){var b,c,d,e=this.getPoints(),f=e.length,g=this.getTension(),h=this.getClosed();if(a.beginPath(),a.moveTo(e[0],e[1]),0!==g&&f>4){for(b=this.getTensionPoints(),c=b.length,d=h?0:4,h||a.quadraticCurveTo(b[0],b[1],b[2],b[3]);c-2>d;)a.bezierCurveTo(b[d++],b[d++],b[d++],b[d++],b[d++],b[d++]);h||a.quadraticCurveTo(b[c-2],b[c-1],e[f-2],e[f-1])}else for(d=2;f>d;d+=2)a.lineTo(e[d],e[d+1]);h?(a.closePath(),a.fillStrokeShape(this)):a.strokeShape(this)},getTensionPoints:function(){return this._getCache("tensionPoints",this._getTensionPoints)},_getTensionPoints:function(){return this.getClosed()?this._getTensionPointsClosed():Kinetic.Util._expandPoints(this.getPoints(),this.getTension())},_getTensionPointsClosed:function(){var a=this.getPoints(),b=a.length,c=this.getTension(),d=Kinetic.Util,e=d._getControlPoints(a[b-2],a[b-1],a[0],a[1],a[2],a[3],c),f=d._getControlPoints(a[b-4],a[b-3],a[b-2],a[b-1],a[0],a[1],c),g=Kinetic.Util._expandPoints(a,c),h=[e[2],e[3]].concat(g).concat([f[0],f[1],a[b-2],a[b-1],f[2],f[3],e[0],e[1],a[0],a[1]]);return h}},Kinetic.Util.extend(Kinetic.Line,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Line,"closed",!1),Kinetic.Factory.addGetterSetter(Kinetic.Line,"tension",0),Kinetic.Factory.addGetterSetter(Kinetic.Line,"points"),Kinetic.Collection.mapMethods(Kinetic.Line)}(),function(){Kinetic.Sprite=function(a){this.___init(a)},Kinetic.Sprite.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className="Sprite",this.anim=new Kinetic.Animation,this.on("animationChange.kinetic",function(){this.frameIndex(0)}),this.on("frameRateChange.kinetic",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())}),this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_sceneFunc:function(a){var b=this.getAnimation(),c=this.frameIndex(),d=4*c,e=this.getAnimations()[b],f=e[d+0],g=e[d+1],h=e[d+2],i=e[d+3],j=this.getImage();j&&a.drawImage(j,f,g,h,i,0,0,h,i)},_hitFunc:function(a){var b=this.getAnimation(),c=this.frameIndex(),d=4*c,e=this.getAnimations()[b],f=e[d+2],g=e[d+3];a.beginPath(),a.rect(0,0,f,g),a.closePath(),a.fillShape(this)},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()},_setInterval:function(){var a=this;this.interval=setInterval(function(){a._updateIndex()},1e3/this.getFrameRate())},start:function(){var a=this.getLayer();this.anim.setLayers(a),this._setInterval(),this.anim.start()},stop:function(){this.anim.stop(),clearInterval(this.interval)},isRunning:function(){return this.anim.isRunning()},_updateIndex:function(){var a=this.frameIndex(),b=this.getAnimation(),c=this.getAnimations(),d=c[b],e=d.length/4;this.frameIndex(e-1>a?a+1:0)}},Kinetic.Util.extend(Kinetic.Sprite,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"animation"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"animations"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"image"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"frameIndex",0),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"frameRate",17),Kinetic.Factory.backCompat(Kinetic.Sprite,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Kinetic.Collection.mapMethods(Kinetic.Sprite)}(),function(){Kinetic.Path=function(a){this.___init(a)},Kinetic.Path.prototype={___init:function(a){this.dataArray=[];var b=this;Kinetic.Shape.call(this,a),this.className="Path",this.dataArray=Kinetic.Path.parsePathData(this.getData()),this.on("dataChange.kinetic",function(){b.dataArray=Kinetic.Path.parsePathData(this.getData())}),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){var b=this.dataArray,c=!1;a.beginPath();for(var d=0;d<b.length;d++){var e=b[d].command,f=b[d].points;switch(e){case"L":a.lineTo(f[0],f[1]);break;case"M":a.moveTo(f[0],f[1]);break;case"C":a.bezierCurveTo(f[0],f[1],f[2],f[3],f[4],f[5]);break;case"Q":a.quadraticCurveTo(f[0],f[1],f[2],f[3]);break;case"A":var g=f[0],h=f[1],i=f[2],j=f[3],k=f[4],l=f[5],m=f[6],n=f[7],o=i>j?i:j,p=i>j?1:i/j,q=i>j?j/i:1;a.translate(g,h),a.rotate(m),a.scale(p,q),a.arc(0,0,o,k,k+l,1-n),a.scale(1/p,1/q),a.rotate(-m),a.translate(-g,-h);break;case"z":a.closePath(),c=!0}}c?a.fillStrokeShape(this):a.strokeShape(this)}},Kinetic.Util.extend(Kinetic.Path,Kinetic.Shape),Kinetic.Path.getLineLength=function(a,b,c,d){return Math.sqrt((c-a)*(c-a)+(d-b)*(d-b))},Kinetic.Path.getPointOnLine=function(a,b,c,d,e,f,g){void 0===f&&(f=b),void 0===g&&(g=c);var h=(e-c)/(d-b+1e-8),i=Math.sqrt(a*a/(1+h*h));b>d&&(i*=-1);var j,k=h*i;if(d===b)j={x:f,y:g+k};else if((g-c)/(f-b+1e-8)===h)j={x:f+i,y:g+k};else{var l,m,n=this.getLineLength(b,c,d,e);if(1e-8>n)return void 0;var o=(f-b)*(d-b)+(g-c)*(e-c);o/=n*n,l=b+o*(d-b),m=c+o*(e-c);var p=this.getLineLength(f,g,l,m),q=Math.sqrt(a*a-p*p);i=Math.sqrt(q*q/(1+h*h)),b>d&&(i*=-1),k=h*i,j={x:l+i,y:m+k}}return j},Kinetic.Path.getPointOnCubicBezier=function(a,b,c,d,e,f,g,h,i){function j(a){return a*a*a}function k(a){return 3*a*a*(1-a)}function l(a){return 3*a*(1-a)*(1-a)}function m(a){return(1-a)*(1-a)*(1-a)}var n=h*j(a)+f*k(a)+d*l(a)+b*m(a),o=i*j(a)+g*k(a)+e*l(a)+c*m(a);return{x:n,y:o}},Kinetic.Path.getPointOnQuadraticBezier=function(a,b,c,d,e,f,g){function h(a){return a*a}function i(a){return 2*a*(1-a)}function j(a){return(1-a)*(1-a)}var k=f*h(a)+d*i(a)+b*j(a),l=g*h(a)+e*i(a)+c*j(a);return{x:k,y:l}},Kinetic.Path.getPointOnEllipticalArc=function(a,b,c,d,e,f){var g=Math.cos(f),h=Math.sin(f),i={x:c*Math.cos(e),y:d*Math.sin(e)};return{x:a+(i.x*g-i.y*h),y:b+(i.x*h+i.y*g)}},Kinetic.Path.parsePathData=function(a){if(!a)return[];var b=a,c=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];b=b.replace(new RegExp(" ","g"),",");for(var d=0;d<c.length;d++)b=b.replace(new RegExp(c[d],"g"),"|"+c[d]);var e=b.split("|"),f=[],g=0,h=0;for(d=1;d<e.length;d++){var i=e[d],j=i.charAt(0);i=i.slice(1),i=i.replace(new RegExp(",-","g"),"-"),i=i.replace(new RegExp("-","g"),",-"),i=i.replace(new RegExp("e,-","g"),"e-");var k=i.split(",");k.length>0&&""===k[0]&&k.shift();for(var l=0;l<k.length;l++)k[l]=parseFloat(k[l]);for(;k.length>0&&!isNaN(k[0]);){var m,n,o,p,q,r,s,t,u,v,w=null,x=[],y=g,z=h;switch(j){case"l":g+=k.shift(),h+=k.shift(),w="L",x.push(g,h);break;case"L":g=k.shift(),h=k.shift(),x.push(g,h);break;case"m":var A=k.shift(),B=k.shift();if(g+=A,h+=B,w="M",f.length>2&&"z"===f[f.length-1].command)for(var C=f.length-2;C>=0;C--)if("M"===f[C].command){g=f[C].points[0]+A,h=f[C].points[1]+B;break}x.push(g,h),j="l";break;case"M":g=k.shift(),h=k.shift(),w="M",x.push(g,h),j="L";break;case"h":g+=k.shift(),w="L",x.push(g,h);break;case"H":g=k.shift(),w="L",x.push(g,h);break;case"v":h+=k.shift(),w="L",x.push(g,h);break;case"V":h=k.shift(),w="L",x.push(g,h);break;case"C":x.push(k.shift(),k.shift(),k.shift(),k.shift()),g=k.shift(),h=k.shift(),x.push(g,h);break;case"c":x.push(g+k.shift(),h+k.shift(),g+k.shift(),h+k.shift()),g+=k.shift(),h+=k.shift(),w="C",x.push(g,h);break;case"S":n=g,o=h,m=f[f.length-1],"C"===m.command&&(n=g+(g-m.points[2]),o=h+(h-m.points[3])),x.push(n,o,k.shift(),k.shift()),g=k.shift(),h=k.shift(),w="C",x.push(g,h);break;case"s":n=g,o=h,m=f[f.length-1],"C"===m.command&&(n=g+(g-m.points[2]),o=h+(h-m.points[3])),x.push(n,o,g+k.shift(),h+k.shift()),g+=k.shift(),h+=k.shift(),w="C",x.push(g,h);break;case"Q":x.push(k.shift(),k.shift()),g=k.shift(),h=k.shift(),x.push(g,h);break;case"q":x.push(g+k.shift(),h+k.shift()),g+=k.shift(),h+=k.shift(),w="Q",x.push(g,h);break;case"T":n=g,o=h,m=f[f.length-1],"Q"===m.command&&(n=g+(g-m.points[0]),o=h+(h-m.points[1])),g=k.shift(),h=k.shift(),w="Q",x.push(n,o,g,h);break;case"t":n=g,o=h,m=f[f.length-1],"Q"===m.command&&(n=g+(g-m.points[0]),o=h+(h-m.points[1])),g+=k.shift(),h+=k.shift(),w="Q",x.push(n,o,g,h);break;case"A":p=k.shift(),q=k.shift(),r=k.shift(),s=k.shift(),t=k.shift(),u=g,v=h,g=k.shift(),h=k.shift(),w="A",x=this.convertEndpointToCenterParameterization(u,v,g,h,s,t,p,q,r);break;case"a":p=k.shift(),q=k.shift(),r=k.shift(),s=k.shift(),t=k.shift(),u=g,v=h,g+=k.shift(),h+=k.shift(),w="A",x=this.convertEndpointToCenterParameterization(u,v,g,h,s,t,p,q,r)}f.push({command:w||j,points:x,start:{x:y,y:z},pathLength:this.calcLength(y,z,w||j,x)})}("z"===j||"Z"===j)&&f.push({command:"z",points:[],start:void 0,pathLength:0})}return f},Kinetic.Path.calcLength=function(a,b,c,d){var e,f,g,h,i=Kinetic.Path;switch(c){case"L":return i.getLineLength(a,b,d[0],d[1]);case"C":for(e=0,f=i.getPointOnCubicBezier(0,a,b,d[0],d[1],d[2],d[3],d[4],d[5]),h=.01;1>=h;h+=.01)g=i.getPointOnCubicBezier(h,a,b,d[0],d[1],d[2],d[3],d[4],d[5]),e+=i.getLineLength(f.x,f.y,g.x,g.y),f=g;return e;case"Q":for(e=0,f=i.getPointOnQuadraticBezier(0,a,b,d[0],d[1],d[2],d[3]),h=.01;1>=h;h+=.01)g=i.getPointOnQuadraticBezier(h,a,b,d[0],d[1],d[2],d[3]),e+=i.getLineLength(f.x,f.y,g.x,g.y),f=g;return e;case"A":e=0;var j=d[4],k=d[5],l=d[4]+k,m=Math.PI/180;if(Math.abs(j-l)<m&&(m=Math.abs(j-l)),f=i.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],j,0),0>k)for(h=j-m;h>l;h-=m)g=i.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],h,0),e+=i.getLineLength(f.x,f.y,g.x,g.y),f=g;else for(h=j+m;l>h;h+=m)g=i.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],h,0),e+=i.getLineLength(f.x,f.y,g.x,g.y),f=g;return g=i.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],l,0),e+=i.getLineLength(f.x,f.y,g.x,g.y)}return 0},Kinetic.Path.convertEndpointToCenterParameterization=function(a,b,c,d,e,f,g,h,i){var j=i*(Math.PI/180),k=Math.cos(j)*(a-c)/2+Math.sin(j)*(b-d)/2,l=-1*Math.sin(j)*(a-c)/2+Math.cos(j)*(b-d)/2,m=k*k/(g*g)+l*l/(h*h);m>1&&(g*=Math.sqrt(m),h*=Math.sqrt(m));var n=Math.sqrt((g*g*h*h-g*g*l*l-h*h*k*k)/(g*g*l*l+h*h*k*k));e===f&&(n*=-1),isNaN(n)&&(n=0);var o=n*g*l/h,p=n*-h*k/g,q=(a+c)/2+Math.cos(j)*o-Math.sin(j)*p,r=(b+d)/2+Math.sin(j)*o+Math.cos(j)*p,s=function(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])},t=function(a,b){return(a[0]*b[0]+a[1]*b[1])/(s(a)*s(b))},u=function(a,b){return(a[0]*b[1]<a[1]*b[0]?-1:1)*Math.acos(t(a,b))},v=u([1,0],[(k-o)/g,(l-p)/h]),w=[(k-o)/g,(l-p)/h],x=[(-1*k-o)/g,(-1*l-p)/h],y=u(w,x);return t(w,x)<=-1&&(y=Math.PI),t(w,x)>=1&&(y=0),0===f&&y>0&&(y-=2*Math.PI),1===f&&0>y&&(y+=2*Math.PI),[q,r,g,h,v,y,j,f]},Kinetic.Factory.addGetterSetter(Kinetic.Path,"data"),Kinetic.Collection.mapMethods(Kinetic.Path)}(),function(){function a(a){a.fillText(this.partialText,0,0)}function b(a){a.strokeText(this.partialText,0,0)}var c="",d="normal";Kinetic.TextPath=function(a){this.___init(a)},Kinetic.TextPath.prototype={___init:function(c){var d=this;this.dummyCanvas=Kinetic.Util.createCanvasElement(),this.dataArray=[],Kinetic.Shape.call(this,c),this._fillFunc=a,this._strokeFunc=b,this._fillFuncHit=a,this._strokeFuncHit=b,this.className="TextPath",this.dataArray=Kinetic.Path.parsePathData(this.attrs.data),this.on("dataChange.kinetic",function(){d.dataArray=Kinetic.Path.parsePathData(this.attrs.data)}),this.on("textChange.kinetic textStroke.kinetic textStrokeWidth.kinetic",d._setTextData),d._setTextData(),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){a.setAttr("font",this._getContextFont()),a.setAttr("textBaseline","middle"),a.setAttr("textAlign","left"),a.save();for(var b=this.glyphInfo,c=0;c<b.length;c++){a.save();var d=b[c].p0;a.translate(d.x,d.y),a.rotate(b[c].rotation),this.partialText=b[c].text,a.fillStrokeShape(this),a.restore()}a.restore()},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},setText:function(a){Kinetic.Text.prototype.setText.call(this,a)},_getTextSize:function(a){var b=this.dummyCanvas,c=b.getContext("2d");c.save(),c.font=this._getContextFont();var d=c.measureText(a);return c.restore(),{width:d.width,height:parseInt(this.attrs.fontSize,10)}},_setTextData:function(){var a=this,b=this._getTextSize(this.attrs.text);this.textWidth=b.width,this.textHeight=b.height,this.glyphInfo=[];for(var c,d,e,f=this.attrs.text.split(""),g=-1,h=0,i=function(){h=0;for(var b=a.dataArray,d=g+1;d<b.length;d++){if(b[d].pathLength>0)return g=d,b[d];"M"==b[d].command&&(c={x:b[d].points[0],y:b[d].points[1]})}return{}},j=function(b){var f=a._getTextSize(b).width,g=0,j=0;for(d=void 0;Math.abs(f-g)/f>.01&&25>j;){j++;for(var k=g;void 0===e;)e=i(),e&&k+e.pathLength<f&&(k+=e.pathLength,e=void 0);if(e==={}||void 0===c)return void 0;var l=!1;switch(e.command){case"L":Kinetic.Path.getLineLength(c.x,c.y,e.points[0],e.points[1])>f?d=Kinetic.Path.getPointOnLine(f,c.x,c.y,e.points[0],e.points[1],c.x,c.y):e=void 0;break;case"A":var m=e.points[4],n=e.points[5],o=e.points[4]+n;0===h?h=m+1e-8:f>g?h+=Math.PI/180*n/Math.abs(n):h-=Math.PI/360*n/Math.abs(n),(0>n&&o>h||n>=0&&h>o)&&(h=o,l=!0),d=Kinetic.Path.getPointOnEllipticalArc(e.points[0],e.points[1],e.points[2],e.points[3],h,e.points[6]);break;case"C":0===h?h=f>e.pathLength?1e-8:f/e.pathLength:f>g?h+=(f-g)/e.pathLength:h-=(g-f)/e.pathLength,h>1&&(h=1,l=!0),d=Kinetic.Path.getPointOnCubicBezier(h,e.start.x,e.start.y,e.points[0],e.points[1],e.points[2],e.points[3],e.points[4],e.points[5]);break;case"Q":0===h?h=f/e.pathLength:f>g?h+=(f-g)/e.pathLength:h-=(g-f)/e.pathLength,h>1&&(h=1,l=!0),d=Kinetic.Path.getPointOnQuadraticBezier(h,e.start.x,e.start.y,e.points[0],e.points[1],e.points[2],e.points[3])}void 0!==d&&(g=Kinetic.Path.getLineLength(c.x,c.y,d.x,d.y)),l&&(l=!1,e=void 0)}},k=0;k<f.length&&(j(f[k]),void 0!==c&&void 0!==d);k++){var l=Kinetic.Path.getLineLength(c.x,c.y,d.x,d.y),m=0,n=Kinetic.Path.getPointOnLine(m+l/2,c.x,c.y,d.x,d.y),o=Math.atan2(d.y-c.y,d.x-c.x);this.glyphInfo.push({transposeX:n.x,transposeY:n.y,text:f[k],rotation:o,p0:c,p1:d}),c=d}}},Kinetic.TextPath.prototype._getContextFont=Kinetic.Text.prototype._getContextFont,Kinetic.Util.extend(Kinetic.TextPath,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontFamily","Arial"),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontSize",12),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontStyle",d),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontVariant",d),Kinetic.Factory.addGetter(Kinetic.TextPath,"text",c),Kinetic.Collection.mapMethods(Kinetic.TextPath)}(),function(){Kinetic.RegularPolygon=function(a){this.___init(a)},Kinetic.RegularPolygon.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className="RegularPolygon",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){var b,c,d,e=this.attrs.sides,f=this.attrs.radius;for(a.beginPath(),a.moveTo(0,0-f),b=1;e>b;b++)c=f*Math.sin(2*b*Math.PI/e),d=-1*f*Math.cos(2*b*Math.PI/e),a.lineTo(c,d);a.closePath(),a.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.RegularPolygon,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon,"radius",0),Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon,"sides",0),Kinetic.Collection.mapMethods(Kinetic.RegularPolygon)}(),function(){Kinetic.Star=function(a){this.___init(a)},Kinetic.Star.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className="Star",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){var b=this.innerRadius(),c=this.outerRadius(),d=this.numPoints();a.beginPath(),a.moveTo(0,0-c);for(var e=1;2*d>e;e++){var f=e%2===0?c:b,g=f*Math.sin(e*Math.PI/d),h=-1*f*Math.cos(e*Math.PI/d);a.lineTo(g,h)}a.closePath(),a.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Star,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Star,"numPoints",5),Kinetic.Factory.addGetterSetter(Kinetic.Star,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Star,"outerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Star)}(),function(){var a=["fontFamily","fontSize","fontStyle","padding","lineHeight","text"],b="Change.kinetic",c="none",d="up",e="right",f="down",g="left",h="Label",i=a.length;Kinetic.Label=function(a){this.____init(a)},Kinetic.Label.prototype={____init:function(a){var b=this;this.className=h,Kinetic.Group.call(this,a),this.on("add.kinetic",function(a){b._addListeners(a.child),b._sync()})},getText:function(){return this.find("Text")[0]},getTag:function(){return this.find("Tag")[0]},_addListeners:function(c){var d,e=this,f=function(){e._sync()};for(d=0;i>d;d++)c.on(a[d]+b,f)},getWidth:function(){return this.getText().getWidth()},getHeight:function(){return this.getText().getHeight()},_sync:function(){var a,b,c,h,i,j,k,l=this.getText(),m=this.getTag();if(l&&m){switch(a=l.getWidth(),b=l.getHeight(),c=m.getPointerDirection(),h=m.getPointerWidth(),k=m.getPointerHeight(),i=0,j=0,c){case d:i=a/2,j=-1*k;break;case e:i=a+h,j=b/2;break;case f:i=a/2,j=b+k;break;case g:i=-1*h,j=b/2}m.setAttrs({x:-1*i,y:-1*j,width:a,height:b}),l.setAttrs({x:-1*i,y:-1*j})}}},Kinetic.Util.extend(Kinetic.Label,Kinetic.Group),Kinetic.Collection.mapMethods(Kinetic.Label),Kinetic.Tag=function(a){this.___init(a)},Kinetic.Tag.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className="Tag",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){var b=this.getWidth(),c=this.getHeight(),h=this.getPointerDirection(),i=this.getPointerWidth(),j=this.getPointerHeight();a.beginPath(),a.moveTo(0,0),h===d&&(a.lineTo((b-i)/2,0),a.lineTo(b/2,-1*j),a.lineTo((b+i)/2,0)),a.lineTo(b,0),h===e&&(a.lineTo(b,(c-j)/2),a.lineTo(b+i,c/2),a.lineTo(b,(c+j)/2)),a.lineTo(b,c),h===f&&(a.lineTo((b+i)/2,c),a.lineTo(b/2,c+j),a.lineTo((b-i)/2,c)),a.lineTo(0,c),h===g&&(a.lineTo(0,(c+j)/2),a.lineTo(-1*i,c/2),a.lineTo(0,(c-j)/2)),a.closePath(),a.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Tag,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerDirection",c),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerWidth",0),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerHeight",0),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"cornerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Tag)}();
/*
 Copyright (C) Federico Zivolo 2018
 Distributed under the MIT License (license terms are at http://opensource.org/licenses/MIT).
 */(function(e,t){'object'==typeof exports&&'undefined'!=typeof module?module.exports=t():'function'==typeof define&&define.amd?define(t):e.Popper=t()})(this,function(){'use strict';function e(e){return e&&'[object Function]'==={}.toString.call(e)}function t(e,t){if(1!==e.nodeType)return[];var o=getComputedStyle(e,null);return t?o[t]:o}function o(e){return'HTML'===e.nodeName?e:e.parentNode||e.host}function n(e){if(!e)return document.body;switch(e.nodeName){case'HTML':case'BODY':return e.ownerDocument.body;case'#document':return e.body;}var i=t(e),r=i.overflow,p=i.overflowX,s=i.overflowY;return /(auto|scroll|overlay)/.test(r+s+p)?e:n(o(e))}function r(e){return 11===e?re:10===e?pe:re||pe}function p(e){if(!e)return document.documentElement;for(var o=r(10)?document.body:null,n=e.offsetParent;n===o&&e.nextElementSibling;)n=(e=e.nextElementSibling).offsetParent;var i=n&&n.nodeName;return i&&'BODY'!==i&&'HTML'!==i?-1!==['TD','TABLE'].indexOf(n.nodeName)&&'static'===t(n,'position')?p(n):n:e?e.ownerDocument.documentElement:document.documentElement}function s(e){var t=e.nodeName;return'BODY'!==t&&('HTML'===t||p(e.firstElementChild)===e)}function d(e){return null===e.parentNode?e:d(e.parentNode)}function a(e,t){if(!e||!e.nodeType||!t||!t.nodeType)return document.documentElement;var o=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,n=o?e:t,i=o?t:e,r=document.createRange();r.setStart(n,0),r.setEnd(i,0);var l=r.commonAncestorContainer;if(e!==l&&t!==l||n.contains(i))return s(l)?l:p(l);var f=d(e);return f.host?a(f.host,t):a(e,d(t).host)}function l(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:'top',o='top'===t?'scrollTop':'scrollLeft',n=e.nodeName;if('BODY'===n||'HTML'===n){var i=e.ownerDocument.documentElement,r=e.ownerDocument.scrollingElement||i;return r[o]}return e[o]}function f(e,t){var o=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=l(t,'top'),i=l(t,'left'),r=o?-1:1;return e.top+=n*r,e.bottom+=n*r,e.left+=i*r,e.right+=i*r,e}function m(e,t){var o='x'===t?'Left':'Top',n='Left'==o?'Right':'Bottom';return parseFloat(e['border'+o+'Width'],10)+parseFloat(e['border'+n+'Width'],10)}function h(e,t,o,n){return $(t['offset'+e],t['scroll'+e],o['client'+e],o['offset'+e],o['scroll'+e],r(10)?o['offset'+e]+n['margin'+('Height'===e?'Top':'Left')]+n['margin'+('Height'===e?'Bottom':'Right')]:0)}function c(){var e=document.body,t=document.documentElement,o=r(10)&&getComputedStyle(t);return{height:h('Height',e,t,o),width:h('Width',e,t,o)}}function g(e){return le({},e,{right:e.left+e.width,bottom:e.top+e.height})}function u(e){var o={};try{if(r(10)){o=e.getBoundingClientRect();var n=l(e,'top'),i=l(e,'left');o.top+=n,o.left+=i,o.bottom+=n,o.right+=i}else o=e.getBoundingClientRect()}catch(t){}var p={left:o.left,top:o.top,width:o.right-o.left,height:o.bottom-o.top},s='HTML'===e.nodeName?c():{},d=s.width||e.clientWidth||p.right-p.left,a=s.height||e.clientHeight||p.bottom-p.top,f=e.offsetWidth-d,h=e.offsetHeight-a;if(f||h){var u=t(e);f-=m(u,'x'),h-=m(u,'y'),p.width-=f,p.height-=h}return g(p)}function b(e,o){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],p=r(10),s='HTML'===o.nodeName,d=u(e),a=u(o),l=n(e),m=t(o),h=parseFloat(m.borderTopWidth,10),c=parseFloat(m.borderLeftWidth,10);i&&'HTML'===o.nodeName&&(a.top=$(a.top,0),a.left=$(a.left,0));var b=g({top:d.top-a.top-h,left:d.left-a.left-c,width:d.width,height:d.height});if(b.marginTop=0,b.marginLeft=0,!p&&s){var y=parseFloat(m.marginTop,10),w=parseFloat(m.marginLeft,10);b.top-=h-y,b.bottom-=h-y,b.left-=c-w,b.right-=c-w,b.marginTop=y,b.marginLeft=w}return(p&&!i?o.contains(l):o===l&&'BODY'!==l.nodeName)&&(b=f(b,o)),b}function y(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],o=e.ownerDocument.documentElement,n=b(e,o),i=$(o.clientWidth,window.innerWidth||0),r=$(o.clientHeight,window.innerHeight||0),p=t?0:l(o),s=t?0:l(o,'left'),d={top:p-n.top+n.marginTop,left:s-n.left+n.marginLeft,width:i,height:r};return g(d)}function w(e){var n=e.nodeName;return'BODY'===n||'HTML'===n?!1:'fixed'===t(e,'position')||w(o(e))}function E(e){if(!e||!e.parentElement||r())return document.documentElement;for(var o=e.parentElement;o&&'none'===t(o,'transform');)o=o.parentElement;return o||document.documentElement}function v(e,t,i,r){var p=4<arguments.length&&void 0!==arguments[4]&&arguments[4],s={top:0,left:0},d=p?E(e):a(e,t);if('viewport'===r)s=y(d,p);else{var l;'scrollParent'===r?(l=n(o(t)),'BODY'===l.nodeName&&(l=e.ownerDocument.documentElement)):'window'===r?l=e.ownerDocument.documentElement:l=r;var f=b(l,d,p);if('HTML'===l.nodeName&&!w(d)){var m=c(),h=m.height,g=m.width;s.top+=f.top-f.marginTop,s.bottom=h+f.top,s.left+=f.left-f.marginLeft,s.right=g+f.left}else s=f}return s.left+=i,s.top+=i,s.right-=i,s.bottom-=i,s}function x(e){var t=e.width,o=e.height;return t*o}function O(e,t,o,n,i){var r=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf('auto'))return e;var p=v(o,n,r,i),s={top:{width:p.width,height:t.top-p.top},right:{width:p.right-t.right,height:p.height},bottom:{width:p.width,height:p.bottom-t.bottom},left:{width:t.left-p.left,height:p.height}},d=Object.keys(s).map(function(e){return le({key:e},s[e],{area:x(s[e])})}).sort(function(e,t){return t.area-e.area}),a=d.filter(function(e){var t=e.width,n=e.height;return t>=o.clientWidth&&n>=o.clientHeight}),l=0<a.length?a[0].key:d[0].key,f=e.split('-')[1];return l+(f?'-'+f:'')}function L(e,t,o){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,i=n?E(t):a(t,o);return b(o,i,n)}function S(e){var t=getComputedStyle(e),o=parseFloat(t.marginTop)+parseFloat(t.marginBottom),n=parseFloat(t.marginLeft)+parseFloat(t.marginRight),i={width:e.offsetWidth+n,height:e.offsetHeight+o};return i}function T(e){var t={left:'right',right:'left',bottom:'top',top:'bottom'};return e.replace(/left|right|bottom|top/g,function(e){return t[e]})}function C(e,t,o){o=o.split('-')[0];var n=S(e),i={width:n.width,height:n.height},r=-1!==['right','left'].indexOf(o),p=r?'top':'left',s=r?'left':'top',d=r?'height':'width',a=r?'width':'height';return i[p]=t[p]+t[d]/2-n[d]/2,i[s]=o===s?t[s]-n[a]:t[T(s)],i}function D(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function N(e,t,o){if(Array.prototype.findIndex)return e.findIndex(function(e){return e[t]===o});var n=D(e,function(e){return e[t]===o});return e.indexOf(n)}function P(t,o,n){var i=void 0===n?t:t.slice(0,N(t,'name',n));return i.forEach(function(t){t['function']&&console.warn('`modifier.function` is deprecated, use `modifier.fn`!');var n=t['function']||t.fn;t.enabled&&e(n)&&(o.offsets.popper=g(o.offsets.popper),o.offsets.reference=g(o.offsets.reference),o=n(o,t))}),o}function k(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=L(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=O(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=C(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?'fixed':'absolute',e=P(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}function W(e,t){return e.some(function(e){var o=e.name,n=e.enabled;return n&&o===t})}function B(e){for(var t=[!1,'ms','Webkit','Moz','O'],o=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<t.length;n++){var i=t[n],r=i?''+i+o:e;if('undefined'!=typeof document.body.style[r])return r}return null}function H(){return this.state.isDestroyed=!0,W(this.modifiers,'applyStyle')&&(this.popper.removeAttribute('x-placement'),this.popper.style.position='',this.popper.style.top='',this.popper.style.left='',this.popper.style.right='',this.popper.style.bottom='',this.popper.style.willChange='',this.popper.style[B('transform')]=''),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function A(e){var t=e.ownerDocument;return t?t.defaultView:window}function M(e,t,o,i){var r='BODY'===e.nodeName,p=r?e.ownerDocument.defaultView:e;p.addEventListener(t,o,{passive:!0}),r||M(n(p.parentNode),t,o,i),i.push(p)}function I(e,t,o,i){o.updateBound=i,A(e).addEventListener('resize',o.updateBound,{passive:!0});var r=n(e);return M(r,'scroll',o.updateBound,o.scrollParents),o.scrollElement=r,o.eventsEnabled=!0,o}function F(){this.state.eventsEnabled||(this.state=I(this.reference,this.options,this.state,this.scheduleUpdate))}function R(e,t){return A(e).removeEventListener('resize',t.updateBound),t.scrollParents.forEach(function(e){e.removeEventListener('scroll',t.updateBound)}),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t}function U(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=R(this.reference,this.state))}function Y(e){return''!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function j(e,t){Object.keys(t).forEach(function(o){var n='';-1!==['width','height','top','right','bottom','left'].indexOf(o)&&Y(t[o])&&(n='px'),e.style[o]=t[o]+n})}function K(e,t){Object.keys(t).forEach(function(o){var n=t[o];!1===n?e.removeAttribute(o):e.setAttribute(o,t[o])})}function q(e,t,o){var n=D(e,function(e){var o=e.name;return o===t}),i=!!n&&e.some(function(e){return e.name===o&&e.enabled&&e.order<n.order});if(!i){var r='`'+t+'`';console.warn('`'+o+'`'+' modifier is required by '+r+' modifier in order to work, be sure to include it before '+r+'!')}return i}function G(e){return'end'===e?'start':'start'===e?'end':e}function z(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],o=me.indexOf(e),n=me.slice(o+1).concat(me.slice(0,o));return t?n.reverse():n}function V(e,t,o,n){var i=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),r=+i[1],p=i[2];if(!r)return e;if(0===p.indexOf('%')){var s;switch(p){case'%p':s=o;break;case'%':case'%r':default:s=n;}var d=g(s);return d[t]/100*r}if('vh'===p||'vw'===p){var a;return a='vh'===p?$(document.documentElement.clientHeight,window.innerHeight||0):$(document.documentElement.clientWidth,window.innerWidth||0),a/100*r}return r}function _(e,t,o,n){var i=[0,0],r=-1!==['right','left'].indexOf(n),p=e.split(/(\+|\-)/).map(function(e){return e.trim()}),s=p.indexOf(D(p,function(e){return-1!==e.search(/,|\s/)}));p[s]&&-1===p[s].indexOf(',')&&console.warn('Offsets separated by white space(s) are deprecated, use a comma (,) instead.');var d=/\s*,\s*|\s+/,a=-1===s?[p]:[p.slice(0,s).concat([p[s].split(d)[0]]),[p[s].split(d)[1]].concat(p.slice(s+1))];return a=a.map(function(e,n){var i=(1===n?!r:r)?'height':'width',p=!1;return e.reduce(function(e,t){return''===e[e.length-1]&&-1!==['+','-'].indexOf(t)?(e[e.length-1]=t,p=!0,e):p?(e[e.length-1]+=t,p=!1,e):e.concat(t)},[]).map(function(e){return V(e,i,t,o)})}),a.forEach(function(e,t){e.forEach(function(o,n){Y(o)&&(i[t]+=o*('-'===e[n-1]?-1:1))})}),i}function X(e,t){var o,n=t.offset,i=e.placement,r=e.offsets,p=r.popper,s=r.reference,d=i.split('-')[0];return o=Y(+n)?[+n,0]:_(n,p,s,d),'left'===d?(p.top+=o[0],p.left-=o[1]):'right'===d?(p.top+=o[0],p.left+=o[1]):'top'===d?(p.left+=o[0],p.top-=o[1]):'bottom'===d&&(p.left+=o[0],p.top+=o[1]),e.popper=p,e}for(var J=Math.min,Q=Math.round,Z=Math.floor,$=Math.max,ee='undefined'!=typeof window&&'undefined'!=typeof document,te=['Edge','Trident','Firefox'],oe=0,ne=0;ne<te.length;ne+=1)if(ee&&0<=navigator.userAgent.indexOf(te[ne])){oe=1;break}var i=ee&&window.Promise,ie=i?function(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then(function(){t=!1,e()}))}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout(function(){t=!1,e()},oe))}},re=ee&&!!(window.MSInputMethodContext&&document.documentMode),pe=ee&&/MSIE 10/.test(navigator.userAgent),se=function(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')},de=function(){function e(e,t){for(var o,n=0;n<t.length;n++)o=t[n],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),ae=function(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e},le=Object.assign||function(e){for(var t,o=1;o<arguments.length;o++)for(var n in t=arguments[o],t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},fe=['auto-start','auto','auto-end','top-start','top','top-end','right-start','right','right-end','bottom-end','bottom','bottom-start','left-end','left','left-start'],me=fe.slice(3),he={FLIP:'flip',CLOCKWISE:'clockwise',COUNTERCLOCKWISE:'counterclockwise'},ce=function(){function t(o,n){var i=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};se(this,t),this.scheduleUpdate=function(){return requestAnimationFrame(i.update)},this.update=ie(this.update.bind(this)),this.options=le({},t.Defaults,r),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=o&&o.jquery?o[0]:o,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(le({},t.Defaults.modifiers,r.modifiers)).forEach(function(e){i.options.modifiers[e]=le({},t.Defaults.modifiers[e]||{},r.modifiers?r.modifiers[e]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(e){return le({name:e},i.options.modifiers[e])}).sort(function(e,t){return e.order-t.order}),this.modifiers.forEach(function(t){t.enabled&&e(t.onLoad)&&t.onLoad(i.reference,i.popper,i.options,t,i.state)}),this.update();var p=this.options.eventsEnabled;p&&this.enableEventListeners(),this.state.eventsEnabled=p}return de(t,[{key:'update',value:function(){return k.call(this)}},{key:'destroy',value:function(){return H.call(this)}},{key:'enableEventListeners',value:function(){return F.call(this)}},{key:'disableEventListeners',value:function(){return U.call(this)}}]),t}();return ce.Utils=('undefined'==typeof window?global:window).PopperUtils,ce.placements=fe,ce.Defaults={placement:'bottom',positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(e){var t=e.placement,o=t.split('-')[0],n=t.split('-')[1];if(n){var i=e.offsets,r=i.reference,p=i.popper,s=-1!==['bottom','top'].indexOf(o),d=s?'left':'top',a=s?'width':'height',l={start:ae({},d,r[d]),end:ae({},d,r[d]+r[a]-p[a])};e.offsets.popper=le({},p,l[n])}return e}},offset:{order:200,enabled:!0,fn:X,offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,t){var o=t.boundariesElement||p(e.instance.popper);e.instance.reference===o&&(o=p(o));var n=B('transform'),i=e.instance.popper.style,r=i.top,s=i.left,d=i[n];i.top='',i.left='',i[n]='';var a=v(e.instance.popper,e.instance.reference,t.padding,o,e.positionFixed);i.top=r,i.left=s,i[n]=d,t.boundaries=a;var l=t.priority,f=e.offsets.popper,m={primary:function(e){var o=f[e];return f[e]<a[e]&&!t.escapeWithReference&&(o=$(f[e],a[e])),ae({},e,o)},secondary:function(e){var o='right'===e?'left':'top',n=f[o];return f[e]>a[e]&&!t.escapeWithReference&&(n=J(f[o],a[e]-('right'===e?f.width:f.height))),ae({},o,n)}};return l.forEach(function(e){var t=-1===['left','top'].indexOf(e)?'secondary':'primary';f=le({},f,m[t](e))}),e.offsets.popper=f,e},priority:['left','right','top','bottom'],padding:5,boundariesElement:'scrollParent'},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,o=t.popper,n=t.reference,i=e.placement.split('-')[0],r=Z,p=-1!==['top','bottom'].indexOf(i),s=p?'right':'bottom',d=p?'left':'top',a=p?'width':'height';return o[s]<r(n[d])&&(e.offsets.popper[d]=r(n[d])-o[a]),o[d]>r(n[s])&&(e.offsets.popper[d]=r(n[s])),e}},arrow:{order:500,enabled:!0,fn:function(e,o){var n;if(!q(e.instance.modifiers,'arrow','keepTogether'))return e;var i=o.element;if('string'==typeof i){if(i=e.instance.popper.querySelector(i),!i)return e;}else if(!e.instance.popper.contains(i))return console.warn('WARNING: `arrow.element` must be child of its popper element!'),e;var r=e.placement.split('-')[0],p=e.offsets,s=p.popper,d=p.reference,a=-1!==['left','right'].indexOf(r),l=a?'height':'width',f=a?'Top':'Left',m=f.toLowerCase(),h=a?'left':'top',c=a?'bottom':'right',u=S(i)[l];d[c]-u<s[m]&&(e.offsets.popper[m]-=s[m]-(d[c]-u)),d[m]+u>s[c]&&(e.offsets.popper[m]+=d[m]+u-s[c]),e.offsets.popper=g(e.offsets.popper);var b=d[m]+d[l]/2-u/2,y=t(e.instance.popper),w=parseFloat(y['margin'+f],10),E=parseFloat(y['border'+f+'Width'],10),v=b-e.offsets.popper[m]-w-E;return v=$(J(s[l]-u,v),0),e.arrowElement=i,e.offsets.arrow=(n={},ae(n,m,Q(v)),ae(n,h,''),n),e},element:'[x-arrow]'},flip:{order:600,enabled:!0,fn:function(e,t){if(W(e.instance.modifiers,'inner'))return e;if(e.flipped&&e.placement===e.originalPlacement)return e;var o=v(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement,e.positionFixed),n=e.placement.split('-')[0],i=T(n),r=e.placement.split('-')[1]||'',p=[];switch(t.behavior){case he.FLIP:p=[n,i];break;case he.CLOCKWISE:p=z(n);break;case he.COUNTERCLOCKWISE:p=z(n,!0);break;default:p=t.behavior;}return p.forEach(function(s,d){if(n!==s||p.length===d+1)return e;n=e.placement.split('-')[0],i=T(n);var a=e.offsets.popper,l=e.offsets.reference,f=Z,m='left'===n&&f(a.right)>f(l.left)||'right'===n&&f(a.left)<f(l.right)||'top'===n&&f(a.bottom)>f(l.top)||'bottom'===n&&f(a.top)<f(l.bottom),h=f(a.left)<f(o.left),c=f(a.right)>f(o.right),g=f(a.top)<f(o.top),u=f(a.bottom)>f(o.bottom),b='left'===n&&h||'right'===n&&c||'top'===n&&g||'bottom'===n&&u,y=-1!==['top','bottom'].indexOf(n),w=!!t.flipVariations&&(y&&'start'===r&&h||y&&'end'===r&&c||!y&&'start'===r&&g||!y&&'end'===r&&u);(m||b||w)&&(e.flipped=!0,(m||b)&&(n=p[d+1]),w&&(r=G(r)),e.placement=n+(r?'-'+r:''),e.offsets.popper=le({},e.offsets.popper,C(e.instance.popper,e.offsets.reference,e.placement)),e=P(e.instance.modifiers,e,'flip'))}),e},behavior:'flip',padding:5,boundariesElement:'viewport'},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,o=t.split('-')[0],n=e.offsets,i=n.popper,r=n.reference,p=-1!==['left','right'].indexOf(o),s=-1===['top','left'].indexOf(o);return i[p?'left':'top']=r[o]-(s?i[p?'width':'height']:0),e.placement=T(t),e.offsets.popper=g(i),e}},hide:{order:800,enabled:!0,fn:function(e){if(!q(e.instance.modifiers,'hide','preventOverflow'))return e;var t=e.offsets.reference,o=D(e.instance.modifiers,function(e){return'preventOverflow'===e.name}).boundaries;if(t.bottom<o.top||t.left>o.right||t.top>o.bottom||t.right<o.left){if(!0===e.hide)return e;e.hide=!0,e.attributes['x-out-of-boundaries']=''}else{if(!1===e.hide)return e;e.hide=!1,e.attributes['x-out-of-boundaries']=!1}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var o=t.x,n=t.y,i=e.offsets.popper,r=D(e.instance.modifiers,function(e){return'applyStyle'===e.name}).gpuAcceleration;void 0!==r&&console.warn('WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!');var s,d,a=void 0===r?t.gpuAcceleration:r,l=p(e.instance.popper),f=u(l),m={position:i.position},h={left:Z(i.left),top:Q(i.top),bottom:Q(i.bottom),right:Z(i.right)},c='bottom'===o?'top':'bottom',g='right'===n?'left':'right',b=B('transform');if(d='bottom'==c?-f.height+h.bottom:h.top,s='right'==g?-f.width+h.right:h.left,a&&b)m[b]='translate3d('+s+'px, '+d+'px, 0)',m[c]=0,m[g]=0,m.willChange='transform';else{var y='bottom'==c?-1:1,w='right'==g?-1:1;m[c]=d*y,m[g]=s*w,m.willChange=c+', '+g}var E={"x-placement":e.placement};return e.attributes=le({},E,e.attributes),e.styles=le({},m,e.styles),e.arrowStyles=le({},e.offsets.arrow,e.arrowStyles),e},gpuAcceleration:!0,x:'bottom',y:'right'},applyStyle:{order:900,enabled:!0,fn:function(e){return j(e.instance.popper,e.styles),K(e.instance.popper,e.attributes),e.arrowElement&&Object.keys(e.arrowStyles).length&&j(e.arrowElement,e.arrowStyles),e},onLoad:function(e,t,o,n,i){var r=L(i,t,e,o.positionFixed),p=O(o.placement,r,t,e,o.modifiers.flip.boundariesElement,o.modifiers.flip.padding);return t.setAttribute('x-placement',p),j(t,{position:o.positionFixed?'fixed':'absolute'}),o},gpuAcceleration:void 0}}},ce});
//# sourceMappingURL=popper.min.js.map

/*! ScrollMagic v2.0.5 | (c) 2015 Jan Paepke (@janpaepke) | license & info: http://scrollmagic.io */
!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.ScrollMagic=t()}(this,function(){"use strict";var e=function(){};e.version="2.0.5",window.addEventListener("mousewheel",function(){});var t="data-scrollmagic-pin-spacer";e.Controller=function(r){var o,s,a="ScrollMagic.Controller",l="FORWARD",c="REVERSE",u="PAUSED",f=n.defaults,d=this,h=i.extend({},f,r),g=[],p=!1,v=0,m=u,w=!0,y=0,S=!0,b=function(){for(var e in h)f.hasOwnProperty(e)||delete h[e];if(h.container=i.get.elements(h.container)[0],!h.container)throw a+" init failed.";w=h.container===window||h.container===document.body||!document.body.contains(h.container),w&&(h.container=window),y=z(),h.container.addEventListener("resize",T),h.container.addEventListener("scroll",T),h.refreshInterval=parseInt(h.refreshInterval)||f.refreshInterval,E()},E=function(){h.refreshInterval>0&&(s=window.setTimeout(A,h.refreshInterval))},x=function(){return h.vertical?i.get.scrollTop(h.container):i.get.scrollLeft(h.container)},z=function(){return h.vertical?i.get.height(h.container):i.get.width(h.container)},C=this._setScrollPos=function(e){h.vertical?w?window.scrollTo(i.get.scrollLeft(),e):h.container.scrollTop=e:w?window.scrollTo(e,i.get.scrollTop()):h.container.scrollLeft=e},F=function(){if(S&&p){var e=i.type.Array(p)?p:g.slice(0);p=!1;var t=v;v=d.scrollPos();var n=v-t;0!==n&&(m=n>0?l:c),m===c&&e.reverse(),e.forEach(function(e){e.update(!0)})}},L=function(){o=i.rAF(F)},T=function(e){"resize"==e.type&&(y=z(),m=u),p!==!0&&(p=!0,L())},A=function(){if(!w&&y!=z()){var e;try{e=new Event("resize",{bubbles:!1,cancelable:!1})}catch(t){e=document.createEvent("Event"),e.initEvent("resize",!1,!1)}h.container.dispatchEvent(e)}g.forEach(function(e){e.refresh()}),E()};this._options=h;var O=function(e){if(e.length<=1)return e;var t=e.slice(0);return t.sort(function(e,t){return e.scrollOffset()>t.scrollOffset()?1:-1}),t};return this.addScene=function(t){if(i.type.Array(t))t.forEach(function(e){d.addScene(e)});else if(t instanceof e.Scene)if(t.controller()!==d)t.addTo(d);else if(g.indexOf(t)<0){g.push(t),g=O(g),t.on("shift.controller_sort",function(){g=O(g)});for(var n in h.globalSceneOptions)t[n]&&t[n].call(t,h.globalSceneOptions[n])}return d},this.removeScene=function(e){if(i.type.Array(e))e.forEach(function(e){d.removeScene(e)});else{var t=g.indexOf(e);t>-1&&(e.off("shift.controller_sort"),g.splice(t,1),e.remove())}return d},this.updateScene=function(t,n){return i.type.Array(t)?t.forEach(function(e){d.updateScene(e,n)}):n?t.update(!0):p!==!0&&t instanceof e.Scene&&(p=p||[],-1==p.indexOf(t)&&p.push(t),p=O(p),L()),d},this.update=function(e){return T({type:"resize"}),e&&F(),d},this.scrollTo=function(n,r){if(i.type.Number(n))C.call(h.container,n,r);else if(n instanceof e.Scene)n.controller()===d&&d.scrollTo(n.scrollOffset(),r);else if(i.type.Function(n))C=n;else{var o=i.get.elements(n)[0];if(o){for(;o.parentNode.hasAttribute(t);)o=o.parentNode;var s=h.vertical?"top":"left",a=i.get.offset(h.container),l=i.get.offset(o);w||(a[s]-=d.scrollPos()),d.scrollTo(l[s]-a[s],r)}}return d},this.scrollPos=function(e){return arguments.length?(i.type.Function(e)&&(x=e),d):x.call(d)},this.info=function(e){var t={size:y,vertical:h.vertical,scrollPos:v,scrollDirection:m,container:h.container,isDocument:w};return arguments.length?void 0!==t[e]?t[e]:void 0:t},this.loglevel=function(){return d},this.enabled=function(e){return arguments.length?(S!=e&&(S=!!e,d.updateScene(g,!0)),d):S},this.destroy=function(e){window.clearTimeout(s);for(var t=g.length;t--;)g[t].destroy(e);return h.container.removeEventListener("resize",T),h.container.removeEventListener("scroll",T),i.cAF(o),null},b(),d};var n={defaults:{container:window,vertical:!0,globalSceneOptions:{},loglevel:2,refreshInterval:100}};e.Controller.addOption=function(e,t){n.defaults[e]=t},e.Controller.extend=function(t){var n=this;e.Controller=function(){return n.apply(this,arguments),this.$super=i.extend({},this),t.apply(this,arguments)||this},i.extend(e.Controller,n),e.Controller.prototype=n.prototype,e.Controller.prototype.constructor=e.Controller},e.Scene=function(n){var o,s,a="BEFORE",l="DURING",c="AFTER",u=r.defaults,f=this,d=i.extend({},u,n),h=a,g=0,p={start:0,end:0},v=0,m=!0,w=function(){for(var e in d)u.hasOwnProperty(e)||delete d[e];for(var t in u)L(t);C()},y={};this.on=function(e,t){return i.type.Function(t)&&(e=e.trim().split(" "),e.forEach(function(e){var n=e.split("."),r=n[0],i=n[1];"*"!=r&&(y[r]||(y[r]=[]),y[r].push({namespace:i||"",callback:t}))})),f},this.off=function(e,t){return e?(e=e.trim().split(" "),e.forEach(function(e){var n=e.split("."),r=n[0],i=n[1]||"",o="*"===r?Object.keys(y):[r];o.forEach(function(e){for(var n=y[e]||[],r=n.length;r--;){var o=n[r];!o||i!==o.namespace&&"*"!==i||t&&t!=o.callback||n.splice(r,1)}n.length||delete y[e]})}),f):f},this.trigger=function(t,n){if(t){var r=t.trim().split("."),i=r[0],o=r[1],s=y[i];s&&s.forEach(function(t){o&&o!==t.namespace||t.callback.call(f,new e.Event(i,t.namespace,f,n))})}return f},f.on("change.internal",function(e){"loglevel"!==e.what&&"tweenChanges"!==e.what&&("triggerElement"===e.what?E():"reverse"===e.what&&f.update())}).on("shift.internal",function(){S(),f.update()}),this.addTo=function(t){return t instanceof e.Controller&&s!=t&&(s&&s.removeScene(f),s=t,C(),b(!0),E(!0),S(),s.info("container").addEventListener("resize",x),t.addScene(f),f.trigger("add",{controller:s}),f.update()),f},this.enabled=function(e){return arguments.length?(m!=e&&(m=!!e,f.update(!0)),f):m},this.remove=function(){if(s){s.info("container").removeEventListener("resize",x);var e=s;s=void 0,e.removeScene(f),f.trigger("remove")}return f},this.destroy=function(e){return f.trigger("destroy",{reset:e}),f.remove(),f.off("*.*"),null},this.update=function(e){if(s)if(e)if(s.enabled()&&m){var t,n=s.info("scrollPos");t=d.duration>0?(n-p.start)/(p.end-p.start):n>=p.start?1:0,f.trigger("update",{startPos:p.start,endPos:p.end,scrollPos:n}),f.progress(t)}else T&&h===l&&O(!0);else s.updateScene(f,!1);return f},this.refresh=function(){return b(),E(),f},this.progress=function(e){if(arguments.length){var t=!1,n=h,r=s?s.info("scrollDirection"):"PAUSED",i=d.reverse||e>=g;if(0===d.duration?(t=g!=e,g=1>e&&i?0:1,h=0===g?a:l):0>e&&h!==a&&i?(g=0,h=a,t=!0):e>=0&&1>e&&i?(g=e,h=l,t=!0):e>=1&&h!==c?(g=1,h=c,t=!0):h!==l||i||O(),t){var o={progress:g,state:h,scrollDirection:r},u=h!=n,p=function(e){f.trigger(e,o)};u&&n!==l&&(p("enter"),p(n===a?"start":"end")),p("progress"),u&&h!==l&&(p(h===a?"start":"end"),p("leave"))}return f}return g};var S=function(){p={start:v+d.offset},s&&d.triggerElement&&(p.start-=s.info("size")*d.triggerHook),p.end=p.start+d.duration},b=function(e){if(o){var t="duration";F(t,o.call(f))&&!e&&(f.trigger("change",{what:t,newval:d[t]}),f.trigger("shift",{reason:t}))}},E=function(e){var n=0,r=d.triggerElement;if(s&&r){for(var o=s.info(),a=i.get.offset(o.container),l=o.vertical?"top":"left";r.parentNode.hasAttribute(t);)r=r.parentNode;var c=i.get.offset(r);o.isDocument||(a[l]-=s.scrollPos()),n=c[l]-a[l]}var u=n!=v;v=n,u&&!e&&f.trigger("shift",{reason:"triggerElementPosition"})},x=function(){d.triggerHook>0&&f.trigger("shift",{reason:"containerResize"})},z=i.extend(r.validate,{duration:function(e){if(i.type.String(e)&&e.match(/^(\.|\d)*\d+%$/)){var t=parseFloat(e)/100;e=function(){return s?s.info("size")*t:0}}if(i.type.Function(e)){o=e;try{e=parseFloat(o())}catch(n){e=-1}}if(e=parseFloat(e),!i.type.Number(e)||0>e)throw o?(o=void 0,0):0;return e}}),C=function(e){e=arguments.length?[e]:Object.keys(z),e.forEach(function(e){var t;if(z[e])try{t=z[e](d[e])}catch(n){t=u[e]}finally{d[e]=t}})},F=function(e,t){var n=!1,r=d[e];return d[e]!=t&&(d[e]=t,C(e),n=r!=d[e]),n},L=function(e){f[e]||(f[e]=function(t){return arguments.length?("duration"===e&&(o=void 0),F(e,t)&&(f.trigger("change",{what:e,newval:d[e]}),r.shifts.indexOf(e)>-1&&f.trigger("shift",{reason:e})),f):d[e]})};this.controller=function(){return s},this.state=function(){return h},this.scrollOffset=function(){return p.start},this.triggerPosition=function(){var e=d.offset;return s&&(e+=d.triggerElement?v:s.info("size")*f.triggerHook()),e};var T,A;f.on("shift.internal",function(e){var t="duration"===e.reason;(h===c&&t||h===l&&0===d.duration)&&O(),t&&_()}).on("progress.internal",function(){O()}).on("add.internal",function(){_()}).on("destroy.internal",function(e){f.removePin(e.reset)});var O=function(e){if(T&&s){var t=s.info(),n=A.spacer.firstChild;if(e||h!==l){var r={position:A.inFlow?"relative":"absolute",top:0,left:0},o=i.css(n,"position")!=r.position;A.pushFollowers?d.duration>0&&(h===c&&0===parseFloat(i.css(A.spacer,"padding-top"))?o=!0:h===a&&0===parseFloat(i.css(A.spacer,"padding-bottom"))&&(o=!0)):r[t.vertical?"top":"left"]=d.duration*g,i.css(n,r),o&&_()}else{"fixed"!=i.css(n,"position")&&(i.css(n,{position:"fixed"}),_());var u=i.get.offset(A.spacer,!0),f=d.reverse||0===d.duration?t.scrollPos-p.start:Math.round(g*d.duration*10)/10;u[t.vertical?"top":"left"]+=f,i.css(A.spacer.firstChild,{top:u.top,left:u.left})}}},_=function(){if(T&&s&&A.inFlow){var e=h===l,t=s.info("vertical"),n=A.spacer.firstChild,r=i.isMarginCollapseType(i.css(A.spacer,"display")),o={};A.relSize.width||A.relSize.autoFullWidth?e?i.css(T,{width:i.get.width(A.spacer)}):i.css(T,{width:"100%"}):(o["min-width"]=i.get.width(t?T:n,!0,!0),o.width=e?o["min-width"]:"auto"),A.relSize.height?e?i.css(T,{height:i.get.height(A.spacer)-(A.pushFollowers?d.duration:0)}):i.css(T,{height:"100%"}):(o["min-height"]=i.get.height(t?n:T,!0,!r),o.height=e?o["min-height"]:"auto"),A.pushFollowers&&(o["padding"+(t?"Top":"Left")]=d.duration*g,o["padding"+(t?"Bottom":"Right")]=d.duration*(1-g)),i.css(A.spacer,o)}},N=function(){s&&T&&h===l&&!s.info("isDocument")&&O()},P=function(){s&&T&&h===l&&((A.relSize.width||A.relSize.autoFullWidth)&&i.get.width(window)!=i.get.width(A.spacer.parentNode)||A.relSize.height&&i.get.height(window)!=i.get.height(A.spacer.parentNode))&&_()},D=function(e){s&&T&&h===l&&!s.info("isDocument")&&(e.preventDefault(),s._setScrollPos(s.info("scrollPos")-((e.wheelDelta||e[s.info("vertical")?"wheelDeltaY":"wheelDeltaX"])/3||30*-e.detail)))};this.setPin=function(e,n){var r={pushFollowers:!0,spacerClass:"scrollmagic-pin-spacer"};if(n=i.extend({},r,n),e=i.get.elements(e)[0],!e)return f;if("fixed"===i.css(e,"position"))return f;if(T){if(T===e)return f;f.removePin()}T=e;var o=T.parentNode.style.display,s=["top","left","bottom","right","margin","marginLeft","marginRight","marginTop","marginBottom"];T.parentNode.style.display="none";var a="absolute"!=i.css(T,"position"),l=i.css(T,s.concat(["display"])),c=i.css(T,["width","height"]);T.parentNode.style.display=o,!a&&n.pushFollowers&&(n.pushFollowers=!1);var u=T.parentNode.insertBefore(document.createElement("div"),T),d=i.extend(l,{position:a?"relative":"absolute",boxSizing:"content-box",mozBoxSizing:"content-box",webkitBoxSizing:"content-box"});if(a||i.extend(d,i.css(T,["width","height"])),i.css(u,d),u.setAttribute(t,""),i.addClass(u,n.spacerClass),A={spacer:u,relSize:{width:"%"===c.width.slice(-1),height:"%"===c.height.slice(-1),autoFullWidth:"auto"===c.width&&a&&i.isMarginCollapseType(l.display)},pushFollowers:n.pushFollowers,inFlow:a},!T.___origStyle){T.___origStyle={};var h=T.style,g=s.concat(["width","height","position","boxSizing","mozBoxSizing","webkitBoxSizing"]);g.forEach(function(e){T.___origStyle[e]=h[e]||""})}return A.relSize.width&&i.css(u,{width:c.width}),A.relSize.height&&i.css(u,{height:c.height}),u.appendChild(T),i.css(T,{position:a?"relative":"absolute",margin:"auto",top:"auto",left:"auto",bottom:"auto",right:"auto"}),(A.relSize.width||A.relSize.autoFullWidth)&&i.css(T,{boxSizing:"border-box",mozBoxSizing:"border-box",webkitBoxSizing:"border-box"}),window.addEventListener("scroll",N),window.addEventListener("resize",N),window.addEventListener("resize",P),T.addEventListener("mousewheel",D),T.addEventListener("DOMMouseScroll",D),O(),f},this.removePin=function(e){if(T){if(h===l&&O(!0),e||!s){var n=A.spacer.firstChild;if(n.hasAttribute(t)){var r=A.spacer.style,o=["margin","marginLeft","marginRight","marginTop","marginBottom"];margins={},o.forEach(function(e){margins[e]=r[e]||""}),i.css(n,margins)}A.spacer.parentNode.insertBefore(n,A.spacer),A.spacer.parentNode.removeChild(A.spacer),T.parentNode.hasAttribute(t)||(i.css(T,T.___origStyle),delete T.___origStyle)}window.removeEventListener("scroll",N),window.removeEventListener("resize",N),window.removeEventListener("resize",P),T.removeEventListener("mousewheel",D),T.removeEventListener("DOMMouseScroll",D),T=void 0}return f};var R,k=[];return f.on("destroy.internal",function(e){f.removeClassToggle(e.reset)}),this.setClassToggle=function(e,t){var n=i.get.elements(e);return 0!==n.length&&i.type.String(t)?(k.length>0&&f.removeClassToggle(),R=t,k=n,f.on("enter.internal_class leave.internal_class",function(e){var t="enter"===e.type?i.addClass:i.removeClass;k.forEach(function(e){t(e,R)})}),f):f},this.removeClassToggle=function(e){return e&&k.forEach(function(e){i.removeClass(e,R)}),f.off("start.internal_class end.internal_class"),R=void 0,k=[],f},w(),f};var r={defaults:{duration:0,offset:0,triggerElement:void 0,triggerHook:.5,reverse:!0,loglevel:2},validate:{offset:function(e){if(e=parseFloat(e),!i.type.Number(e))throw 0;return e},triggerElement:function(e){if(e=e||void 0){var t=i.get.elements(e)[0];if(!t)throw 0;e=t}return e},triggerHook:function(e){var t={onCenter:.5,onEnter:1,onLeave:0};if(i.type.Number(e))e=Math.max(0,Math.min(parseFloat(e),1));else{if(!(e in t))throw 0;e=t[e]}return e},reverse:function(e){return!!e}},shifts:["duration","offset","triggerHook"]};e.Scene.addOption=function(e,t,n,i){e in r.defaults||(r.defaults[e]=t,r.validate[e]=n,i&&r.shifts.push(e))},e.Scene.extend=function(t){var n=this;e.Scene=function(){return n.apply(this,arguments),this.$super=i.extend({},this),t.apply(this,arguments)||this},i.extend(e.Scene,n),e.Scene.prototype=n.prototype,e.Scene.prototype.constructor=e.Scene},e.Event=function(e,t,n,r){r=r||{};for(var i in r)this[i]=r[i];return this.type=e,this.target=this.currentTarget=n,this.namespace=t||"",this.timeStamp=this.timestamp=Date.now(),this};var i=e._util=function(e){var t,n={},r=function(e){return parseFloat(e)||0},i=function(t){return t.currentStyle?t.currentStyle:e.getComputedStyle(t)},o=function(t,n,o,s){if(n=n===document?e:n,n===e)s=!1;else if(!f.DomElement(n))return 0;t=t.charAt(0).toUpperCase()+t.substr(1).toLowerCase();var a=(o?n["offset"+t]||n["outer"+t]:n["client"+t]||n["inner"+t])||0;if(o&&s){var l=i(n);a+="Height"===t?r(l.marginTop)+r(l.marginBottom):r(l.marginLeft)+r(l.marginRight)}return a},s=function(e){return e.replace(/^[^a-z]+([a-z])/g,"$1").replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})};n.extend=function(e){for(e=e||{},t=1;t<arguments.length;t++)if(arguments[t])for(var n in arguments[t])arguments[t].hasOwnProperty(n)&&(e[n]=arguments[t][n]);return e},n.isMarginCollapseType=function(e){return["block","flex","list-item","table","-webkit-box"].indexOf(e)>-1};var a=0,l=["ms","moz","webkit","o"],c=e.requestAnimationFrame,u=e.cancelAnimationFrame;for(t=0;!c&&t<l.length;++t)c=e[l[t]+"RequestAnimationFrame"],u=e[l[t]+"CancelAnimationFrame"]||e[l[t]+"CancelRequestAnimationFrame"];c||(c=function(t){var n=(new Date).getTime(),r=Math.max(0,16-(n-a)),i=e.setTimeout(function(){t(n+r)},r);return a=n+r,i}),u||(u=function(t){e.clearTimeout(t)}),n.rAF=c.bind(e),n.cAF=u.bind(e);var f=n.type=function(e){return Object.prototype.toString.call(e).replace(/^\[object (.+)\]$/,"$1").toLowerCase()};f.String=function(e){return"string"===f(e)},f.Function=function(e){return"function"===f(e)},f.Array=function(e){return Array.isArray(e)},f.Number=function(e){return!f.Array(e)&&e-parseFloat(e)+1>=0},f.DomElement=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName};var d=n.get={};return d.elements=function(t){var n=[];if(f.String(t))try{t=document.querySelectorAll(t)}catch(r){return n}if("nodelist"===f(t)||f.Array(t))for(var i=0,o=n.length=t.length;o>i;i++){var s=t[i];n[i]=f.DomElement(s)?s:d.elements(s)}else(f.DomElement(t)||t===document||t===e)&&(n=[t]);return n},d.scrollTop=function(t){return t&&"number"==typeof t.scrollTop?t.scrollTop:e.pageYOffset||0},d.scrollLeft=function(t){return t&&"number"==typeof t.scrollLeft?t.scrollLeft:e.pageXOffset||0},d.width=function(e,t,n){return o("width",e,t,n)},d.height=function(e,t,n){return o("height",e,t,n)},d.offset=function(e,t){var n={top:0,left:0};if(e&&e.getBoundingClientRect){var r=e.getBoundingClientRect();n.top=r.top,n.left=r.left,t||(n.top+=d.scrollTop(),n.left+=d.scrollLeft())}return n},n.addClass=function(e,t){t&&(e.classList?e.classList.add(t):e.className+=" "+t)},n.removeClass=function(e,t){t&&(e.classList?e.classList.remove(t):e.className=e.className.replace(RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," "))},n.css=function(e,t){if(f.String(t))return i(e)[s(t)];if(f.Array(t)){var n={},r=i(e);return t.forEach(function(e){n[e]=r[s(e)]}),n}for(var o in t){var a=t[o];a==parseFloat(a)&&(a+="px"),e.style[s(o)]=a}},n}(window||{});return e});
/**
 * sticky-sidebar - A JavaScript plugin for making smart and high performance.
 * @version v3.3.1
 * @link https://github.com/abouolia/sticky-sidebar
 * @author Ahmed Bouhuolia
 * @license The MIT License (MIT)
**/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.StickySidebar={})}(this,function(t){"use strict";"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var e,i,n=(function(t,e){(function(t){Object.defineProperty(t,"__esModule",{value:!0});var l,n,e=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),i=(l=".stickySidebar",n={topSpacing:0,bottomSpacing:0,containerSelector:!1,innerWrapperSelector:".inner-wrapper-sticky",stickyClass:"is-affixed",resizeSensor:!0,minWidth:!1},function(){function c(t){var e=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),this.options=c.extend(n,i),this.sidebar="string"==typeof t?document.querySelector(t):t,void 0===this.sidebar)throw new Error("There is no specific sidebar element.");this.sidebarInner=!1,this.container=this.sidebar.parentElement,this.affixedType="STATIC",this.direction="down",this.support={transform:!1,transform3d:!1},this._initialized=!1,this._reStyle=!1,this._breakpoint=!1,this.dimensions={translateY:0,maxTranslateY:0,topSpacing:0,lastTopSpacing:0,bottomSpacing:0,lastBottomSpacing:0,sidebarHeight:0,sidebarWidth:0,containerTop:0,containerHeight:0,viewportHeight:0,viewportTop:0,lastViewportTop:0},["handleEvent"].forEach(function(t){e[t]=e[t].bind(e)}),this.initialize()}return e(c,[{key:"initialize",value:function(){var i=this;if(this._setSupportFeatures(),this.options.innerWrapperSelector&&(this.sidebarInner=this.sidebar.querySelector(this.options.innerWrapperSelector),null===this.sidebarInner&&(this.sidebarInner=!1)),!this.sidebarInner){var t=document.createElement("div");for(t.setAttribute("class","inner-wrapper-sticky"),this.sidebar.appendChild(t);this.sidebar.firstChild!=t;)t.appendChild(this.sidebar.firstChild);this.sidebarInner=this.sidebar.querySelector(".inner-wrapper-sticky")}if(this.options.containerSelector){var e=document.querySelectorAll(this.options.containerSelector);if((e=Array.prototype.slice.call(e)).forEach(function(t,e){t.contains(i.sidebar)&&(i.container=t)}),!e.length)throw new Error("The container does not contains on the sidebar.")}"function"!=typeof this.options.topSpacing&&(this.options.topSpacing=parseInt(this.options.topSpacing)||0),"function"!=typeof this.options.bottomSpacing&&(this.options.bottomSpacing=parseInt(this.options.bottomSpacing)||0),this._widthBreakpoint(),this.calcDimensions(),this.stickyPosition(),this.bindEvents(),this._initialized=!0}},{key:"bindEvents",value:function(){window.addEventListener("resize",this,{passive:!0,capture:!1}),window.addEventListener("scroll",this,{passive:!0,capture:!1}),this.sidebar.addEventListener("update"+l,this),this.options.resizeSensor&&"undefined"!=typeof ResizeSensor&&(new ResizeSensor(this.sidebarInner,this.handleEvent),new ResizeSensor(this.container,this.handleEvent))}},{key:"handleEvent",value:function(t){this.updateSticky(t)}},{key:"calcDimensions",value:function(){if(!this._breakpoint){var t=this.dimensions;t.containerTop=c.offsetRelative(this.container).top,t.containerHeight=this.container.clientHeight,t.containerBottom=t.containerTop+t.containerHeight,t.sidebarHeight=this.sidebarInner.offsetHeight,t.sidebarWidth=this.sidebarInner.offsetWidth,t.viewportHeight=window.innerHeight,t.maxTranslateY=t.containerHeight-t.sidebarHeight,this._calcDimensionsWithScroll()}}},{key:"_calcDimensionsWithScroll",value:function(){var t=this.dimensions;t.sidebarLeft=c.offsetRelative(this.sidebar).left,t.viewportTop=document.documentElement.scrollTop||document.body.scrollTop,t.viewportBottom=t.viewportTop+t.viewportHeight,t.viewportLeft=document.documentElement.scrollLeft||document.body.scrollLeft,t.topSpacing=this.options.topSpacing,t.bottomSpacing=this.options.bottomSpacing,"function"==typeof t.topSpacing&&(t.topSpacing=parseInt(t.topSpacing(this.sidebar))||0),"function"==typeof t.bottomSpacing&&(t.bottomSpacing=parseInt(t.bottomSpacing(this.sidebar))||0),"VIEWPORT-TOP"===this.affixedType?t.topSpacing<t.lastTopSpacing&&(t.translateY+=t.lastTopSpacing-t.topSpacing,this._reStyle=!0):"VIEWPORT-BOTTOM"===this.affixedType&&t.bottomSpacing<t.lastBottomSpacing&&(t.translateY+=t.lastBottomSpacing-t.bottomSpacing,this._reStyle=!0),t.lastTopSpacing=t.topSpacing,t.lastBottomSpacing=t.bottomSpacing}},{key:"isSidebarFitsViewport",value:function(){var t=this.dimensions,e="down"===this.scrollDirection?t.lastBottomSpacing:t.lastTopSpacing;return this.dimensions.sidebarHeight+e<this.dimensions.viewportHeight}},{key:"observeScrollDir",value:function(){var t=this.dimensions;if(t.lastViewportTop!==t.viewportTop){var e="down"===this.direction?Math.min:Math.max;t.viewportTop===e(t.viewportTop,t.lastViewportTop)&&(this.direction="down"===this.direction?"up":"down")}}},{key:"getAffixType",value:function(){this._calcDimensionsWithScroll();var t=this.dimensions,e=t.viewportTop+t.topSpacing,i=this.affixedType;return e<=t.containerTop||t.containerHeight<=t.sidebarHeight?(t.translateY=0,i="STATIC"):i="up"===this.direction?this._getAffixTypeScrollingUp():this._getAffixTypeScrollingDown(),t.translateY=Math.max(0,t.translateY),t.translateY=Math.min(t.containerHeight,t.translateY),t.translateY=Math.round(t.translateY),t.lastViewportTop=t.viewportTop,i}},{key:"_getAffixTypeScrollingDown",value:function(){var t=this.dimensions,e=t.sidebarHeight+t.containerTop,i=t.viewportTop+t.topSpacing,n=t.viewportBottom-t.bottomSpacing,o=this.affixedType;return this.isSidebarFitsViewport()?t.sidebarHeight+i>=t.containerBottom?(t.translateY=t.containerBottom-e,o="CONTAINER-BOTTOM"):i>=t.containerTop&&(t.translateY=i-t.containerTop,o="VIEWPORT-TOP"):t.containerBottom<=n?(t.translateY=t.containerBottom-e,o="CONTAINER-BOTTOM"):e+t.translateY<=n?(t.translateY=n-e,o="VIEWPORT-BOTTOM"):t.containerTop+t.translateY<=i&&0!==t.translateY&&t.maxTranslateY!==t.translateY&&(o="VIEWPORT-UNBOTTOM"),o}},{key:"_getAffixTypeScrollingUp",value:function(){var t=this.dimensions,e=t.sidebarHeight+t.containerTop,i=t.viewportTop+t.topSpacing,n=t.viewportBottom-t.bottomSpacing,o=this.affixedType;return i<=t.translateY+t.containerTop?(t.translateY=i-t.containerTop,o="VIEWPORT-TOP"):t.containerBottom<=n?(t.translateY=t.containerBottom-e,o="CONTAINER-BOTTOM"):this.isSidebarFitsViewport()||t.containerTop<=i&&0!==t.translateY&&t.maxTranslateY!==t.translateY&&(o="VIEWPORT-UNBOTTOM"),o}},{key:"_getStyle",value:function(t){if(void 0!==t){var e={inner:{},outer:{}},i=this.dimensions;switch(t){case"VIEWPORT-TOP":e.inner={position:"fixed",top:i.topSpacing,left:i.sidebarLeft-i.viewportLeft,width:i.sidebarWidth};break;case"VIEWPORT-BOTTOM":e.inner={position:"fixed",top:"auto",left:i.sidebarLeft,bottom:i.bottomSpacing,width:i.sidebarWidth};break;case"CONTAINER-BOTTOM":case"VIEWPORT-UNBOTTOM":var n=this._getTranslate(0,i.translateY+"px");e.inner=n?{transform:n}:{position:"absolute",top:i.translateY,width:i.sidebarWidth}}switch(t){case"VIEWPORT-TOP":case"VIEWPORT-BOTTOM":case"VIEWPORT-UNBOTTOM":case"CONTAINER-BOTTOM":e.outer={height:i.sidebarHeight,position:"relative"}}return e.outer=c.extend({height:"",position:""},e.outer),e.inner=c.extend({position:"relative",top:"",left:"",bottom:"",width:"",transform:""},e.inner),e}}},{key:"stickyPosition",value:function(t){if(!this._breakpoint){t=this._reStyle||t||!1,this.options.topSpacing,this.options.bottomSpacing;var e=this.getAffixType(),i=this._getStyle(e);if((this.affixedType!=e||t)&&e){var n="affix."+e.toLowerCase().replace("viewport-","")+l;for(var o in c.eventTrigger(this.sidebar,n),"STATIC"===e?c.removeClass(this.sidebar,this.options.stickyClass):c.addClass(this.sidebar,this.options.stickyClass),i.outer){var s="number"==typeof i.outer[o]?"px":"";this.sidebar.style[o]=i.outer[o]+s}for(var r in i.inner){var a="number"==typeof i.inner[r]?"px":"";this.sidebarInner.style[r]=i.inner[r]+a}var p="affixed."+e.toLowerCase().replace("viewport-","")+l;c.eventTrigger(this.sidebar,p)}else this._initialized&&(this.sidebarInner.style.left=i.inner.left);this.affixedType=e}}},{key:"_widthBreakpoint",value:function(){window.innerWidth<=this.options.minWidth?(this._breakpoint=!0,this.affixedType="STATIC",this.sidebar.removeAttribute("style"),c.removeClass(this.sidebar,this.options.stickyClass),this.sidebarInner.removeAttribute("style")):this._breakpoint=!1}},{key:"updateSticky",value:function(){var t,e=this,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this._running||(this._running=!0,t=i.type,requestAnimationFrame(function(){switch(t){case"scroll":e._calcDimensionsWithScroll(),e.observeScrollDir(),e.stickyPosition();break;case"resize":default:e._widthBreakpoint(),e.calcDimensions(),e.stickyPosition(!0)}e._running=!1}))}},{key:"_setSupportFeatures",value:function(){var t=this.support;t.transform=c.supportTransform(),t.transform3d=c.supportTransform(!0)}},{key:"_getTranslate",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return this.support.transform3d?"translate3d("+t+", "+e+", "+i+")":!!this.support.translate&&"translate("+t+", "+e+")"}},{key:"destroy",value:function(){window.removeEventListener("resize",this,{capture:!1}),window.removeEventListener("scroll",this,{capture:!1}),this.sidebar.classList.remove(this.options.stickyClass),this.sidebar.style.minHeight="",this.sidebar.removeEventListener("update"+l,this);var t={inner:{},outer:{}};for(var e in t.inner={position:"",top:"",left:"",bottom:"",width:"",transform:""},t.outer={height:"",position:""},t.outer)this.sidebar.style[e]=t.outer[e];for(var i in t.inner)this.sidebarInner.style[i]=t.inner[i];this.options.resizeSensor&&"undefined"!=typeof ResizeSensor&&(ResizeSensor.detach(this.sidebarInner,this.handleEvent),ResizeSensor.detach(this.container,this.handleEvent))}}],[{key:"supportTransform",value:function(t){var i=!1,e=t?"perspective":"transform",n=e.charAt(0).toUpperCase()+e.slice(1),o=document.createElement("support").style;return(e+" "+["Webkit","Moz","O","ms"].join(n+" ")+n).split(" ").forEach(function(t,e){if(void 0!==o[t])return i=t,!1}),i}},{key:"eventTrigger",value:function(t,e,i){try{var n=new CustomEvent(e,{detail:i})}catch(t){(n=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,i)}t.dispatchEvent(n)}},{key:"extend",value:function(t,e){var i={};for(var n in t)void 0!==e[n]?i[n]=e[n]:i[n]=t[n];return i}},{key:"offsetRelative",value:function(t){var e={left:0,top:0};do{var i=t.offsetTop,n=t.offsetLeft;isNaN(i)||(e.top+=i),isNaN(n)||(e.left+=n),t="BODY"===t.tagName?t.parentElement:t.offsetParent}while(t);return e}},{key:"addClass",value:function(t,e){c.hasClass(t,e)||(t.classList?t.classList.add(e):t.className+=" "+e)}},{key:"removeClass",value:function(t,e){c.hasClass(t,e)&&(t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," "))}},{key:"hasClass",value:function(t,e){return t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)}},{key:"defaults",get:function(){return n}}]),c}());t.default=i,window.StickySidebar=i})(e)}(e={exports:{}},e.exports),e.exports),o=(i=n)&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;t.default=o,t.__moduleExports=n,Object.defineProperty(t,"__esModule",{value:!0})});
/*!
 * 
 *   typed.js - A JavaScript Typing Animation Library
 *   Author: Matt Boldt <me@mattboldt.com>
 *   Version: v2.0.4
 *   Url: https://github.com/mattboldt/typed.js
 *   License(s): MIT
 * 
 */
(function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Typed=e():t.Typed=e()})(this,function(){return function(t){function e(n){if(s[n])return s[n].exports;var i=s[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var s={};return e.m=t,e.c=s,e.p="",e(0)}([function(t,e,s){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,s,n){return s&&t(e.prototype,s),n&&t(e,n),e}}(),r=s(1),o=s(3),a=function(){function t(e,s){n(this,t),r.initializer.load(this,s,e),this.begin()}return i(t,[{key:"toggle",value:function(){this.pause.status?this.start():this.stop()}},{key:"stop",value:function(){this.typingComplete||this.pause.status||(this.toggleBlinking(!0),this.pause.status=!0,this.options.onStop(this.arrayPos,this))}},{key:"start",value:function(){this.typingComplete||this.pause.status&&(this.pause.status=!1,this.pause.typewrite?this.typewrite(this.pause.curString,this.pause.curStrPos):this.backspace(this.pause.curString,this.pause.curStrPos),this.options.onStart(this.arrayPos,this))}},{key:"destroy",value:function(){this.reset(!1),this.options.onDestroy(this)}},{key:"reset",value:function(){var t=arguments.length<=0||void 0===arguments[0]||arguments[0];clearInterval(this.timeout),this.replaceText(""),this.cursor&&this.cursor.parentNode&&(this.cursor.parentNode.removeChild(this.cursor),this.cursor=null),this.strPos=0,this.arrayPos=0,this.curLoop=0,t&&(this.insertCursor(),this.options.onReset(this),this.begin())}},{key:"begin",value:function(){var t=this;this.typingComplete=!1,this.shuffleStringsIfNeeded(this),this.insertCursor(),this.bindInputFocusEvents&&this.bindFocusEvents(),this.timeout=setTimeout(function(){t.currentElContent&&0!==t.currentElContent.length?t.backspace(t.currentElContent,t.currentElContent.length):t.typewrite(t.strings[t.sequence[t.arrayPos]],t.strPos)},this.startDelay)}},{key:"typewrite",value:function(t,e){var s=this;this.fadeOut&&this.el.classList.contains(this.fadeOutClass)&&(this.el.classList.remove(this.fadeOutClass),this.cursor&&this.cursor.classList.remove(this.fadeOutClass));var n=this.humanizer(this.typeSpeed),i=1;return this.pause.status===!0?void this.setPauseStatus(t,e,!0):void(this.timeout=setTimeout(function(){e=o.htmlParser.typeHtmlChars(t,e,s);var n=0,r=t.substr(e);if("^"===r.charAt(0)&&/^\^\d+/.test(r)){var a=1;r=/\d+/.exec(r)[0],a+=r.length,n=parseInt(r),s.temporaryPause=!0,s.options.onTypingPaused(s.arrayPos,s),t=t.substring(0,e)+t.substring(e+a),s.toggleBlinking(!0)}if("`"===r.charAt(0)){for(;"`"!==t.substr(e+i).charAt(0)&&(i++,!(e+i>t.length)););var u=t.substring(0,e),l=t.substring(u.length+1,e+i),c=t.substring(e+i+1);t=u+l+c,i--}s.timeout=setTimeout(function(){s.toggleBlinking(!1),e===t.length?s.doneTyping(t,e):s.keepTyping(t,e,i),s.temporaryPause&&(s.temporaryPause=!1,s.options.onTypingResumed(s.arrayPos,s))},n)},n))}},{key:"keepTyping",value:function(t,e,s){0===e&&(this.toggleBlinking(!1),this.options.preStringTyped(this.arrayPos,this)),e+=s;var n=t.substr(0,e);this.replaceText(n),this.typewrite(t,e)}},{key:"doneTyping",value:function(t,e){var s=this;this.options.onStringTyped(this.arrayPos,this),this.toggleBlinking(!0),this.arrayPos===this.strings.length-1&&(this.complete(),this.loop===!1||this.curLoop===this.loopCount)||(this.timeout=setTimeout(function(){s.backspace(t,e)},this.backDelay))}},{key:"backspace",value:function(t,e){var s=this;if(this.pause.status===!0)return void this.setPauseStatus(t,e,!0);if(this.fadeOut)return this.initFadeOut();this.toggleBlinking(!1);var n=this.humanizer(this.backSpeed);this.timeout=setTimeout(function(){e=o.htmlParser.backSpaceHtmlChars(t,e,s);var n=t.substr(0,e);if(s.replaceText(n),s.smartBackspace){var i=s.strings[s.arrayPos+1];i&&n===i.substr(0,e)?s.stopNum=e:s.stopNum=0}e>s.stopNum?(e--,s.backspace(t,e)):e<=s.stopNum&&(s.arrayPos++,s.arrayPos===s.strings.length?(s.arrayPos=0,s.options.onLastStringBackspaced(),s.shuffleStringsIfNeeded(),s.begin()):s.typewrite(s.strings[s.sequence[s.arrayPos]],e))},n)}},{key:"complete",value:function(){this.options.onComplete(this),this.loop?this.curLoop++:this.typingComplete=!0}},{key:"setPauseStatus",value:function(t,e,s){this.pause.typewrite=s,this.pause.curString=t,this.pause.curStrPos=e}},{key:"toggleBlinking",value:function(t){if(this.cursor&&!this.pause.status&&this.cursorBlinking!==t){this.cursorBlinking=t;var e=t?"infinite":0;this.cursor.style.animationIterationCount=e}}},{key:"humanizer",value:function(t){return Math.round(Math.random()*t/2)+t}},{key:"shuffleStringsIfNeeded",value:function(){this.shuffle&&(this.sequence=this.sequence.sort(function(){return Math.random()-.5}))}},{key:"initFadeOut",value:function(){var t=this;return this.el.className+=" "+this.fadeOutClass,this.cursor&&(this.cursor.className+=" "+this.fadeOutClass),setTimeout(function(){t.arrayPos++,t.replaceText(""),t.strings.length>t.arrayPos?t.typewrite(t.strings[t.sequence[t.arrayPos]],0):(t.typewrite(t.strings[0],0),t.arrayPos=0)},this.fadeOutDelay)}},{key:"replaceText",value:function(t){this.attr?this.el.setAttribute(this.attr,t):this.isInput?this.el.value=t:"html"===this.contentType?this.el.innerHTML=t:this.el.textContent=t}},{key:"bindFocusEvents",value:function(){var t=this;this.isInput&&(this.el.addEventListener("focus",function(e){t.stop()}),this.el.addEventListener("blur",function(e){t.el.value&&0!==t.el.value.length||t.start()}))}},{key:"insertCursor",value:function(){this.showCursor&&(this.cursor||(this.cursor=document.createElement("span"),this.cursor.className="typed-cursor",this.cursor.innerHTML=this.cursorChar,this.el.parentNode&&this.el.parentNode.insertBefore(this.cursor,this.el.nextSibling)))}}]),t}();e["default"]=a,t.exports=e["default"]},function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},o=function(){function t(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,s,n){return s&&t(e.prototype,s),n&&t(e,n),e}}(),a=s(2),u=n(a),l=function(){function t(){i(this,t)}return o(t,[{key:"load",value:function(t,e,s){if("string"==typeof s?t.el=document.querySelector(s):t.el=s,t.options=r({},u["default"],e),t.isInput="input"===t.el.tagName.toLowerCase(),t.attr=t.options.attr,t.bindInputFocusEvents=t.options.bindInputFocusEvents,t.showCursor=!t.isInput&&t.options.showCursor,t.cursorChar=t.options.cursorChar,t.cursorBlinking=!0,t.elContent=t.attr?t.el.getAttribute(t.attr):t.el.textContent,t.contentType=t.options.contentType,t.typeSpeed=t.options.typeSpeed,t.startDelay=t.options.startDelay,t.backSpeed=t.options.backSpeed,t.smartBackspace=t.options.smartBackspace,t.backDelay=t.options.backDelay,t.fadeOut=t.options.fadeOut,t.fadeOutClass=t.options.fadeOutClass,t.fadeOutDelay=t.options.fadeOutDelay,t.isPaused=!1,t.strings=t.options.strings.map(function(t){return t.trim()}),"string"==typeof t.options.stringsElement?t.stringsElement=document.querySelector(t.options.stringsElement):t.stringsElement=t.options.stringsElement,t.stringsElement){t.strings=[],t.stringsElement.style.display="none";var n=Array.prototype.slice.apply(t.stringsElement.children),i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var p=l.value;t.strings.push(p.innerHTML.trim())}}catch(h){o=!0,a=h}finally{try{!i&&c["return"]&&c["return"]()}finally{if(o)throw a}}}t.strPos=0,t.arrayPos=0,t.stopNum=0,t.loop=t.options.loop,t.loopCount=t.options.loopCount,t.curLoop=0,t.shuffle=t.options.shuffle,t.sequence=[],t.pause={status:!1,typewrite:!0,curString:"",curStrPos:0},t.typingComplete=!1;for(var f in t.strings)t.sequence[f]=f;t.currentElContent=this.getCurrentElContent(t),t.autoInsertCss=t.options.autoInsertCss,this.appendAnimationCss(t)}},{key:"getCurrentElContent",value:function(t){var e="";return e=t.attr?t.el.getAttribute(t.attr):t.isInput?t.el.value:"html"===t.contentType?t.el.innerHTML:t.el.textContent}},{key:"appendAnimationCss",value:function(t){if(t.autoInsertCss&&t.showCursor&&t.fadeOut){var e=document.createElement("style");e.type="text/css";var s="";t.showCursor&&(s+="\n        .typed-cursor{\n          opacity: 1;\n          animation: typedjsBlink 0.7s infinite;\n          -webkit-animation: typedjsBlink 0.7s infinite;\n                  animation: typedjsBlink 0.7s infinite;\n        }\n        @keyframes typedjsBlink{\n          50% { opacity: 0.0; }\n        }\n        @-webkit-keyframes typedjsBlink{\n          0% { opacity: 1; }\n          50% { opacity: 0.0; }\n          100% { opacity: 1; }\n        }\n      "),t.fadeOut&&(s+="\n        .typed-fade-out{\n          opacity: 0;\n          transition: opacity .25s;\n          -webkit-animation: 0;\n                  animation: 0;\n        }\n      "),0!==e.length&&(e.innerHTML=s,document.head.appendChild(e))}}}]),t}();e["default"]=l;var c=new l;e.initializer=c},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,smartBackspace:!0,shuffle:!1,backDelay:700,fadeOut:!1,fadeOutClass:"typed-fade-out",fadeOutDelay:500,loop:!1,loopCount:1/0,showCursor:!0,cursorChar:"|",autoInsertCss:!0,attr:null,bindInputFocusEvents:!1,contentType:"html",onComplete:function(t){},preStringTyped:function(t,e){},onStringTyped:function(t,e){},onLastStringBackspaced:function(t){},onTypingPaused:function(t,e){},onTypingResumed:function(t,e){},onReset:function(t){},onStop:function(t,e){},onStart:function(t,e){},onDestroy:function(t){}};e["default"]=s,t.exports=e["default"]},function(t,e){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,s,n){return s&&t(e.prototype,s),n&&t(e,n),e}}(),i=function(){function t(){s(this,t)}return n(t,[{key:"typeHtmlChars",value:function(t,e,s){if("html"!==s.contentType)return e;var n=t.substr(e).charAt(0);if("<"===n||"&"===n){var i="";for(i="<"===n?">":";";t.substr(e+1).charAt(0)!==i&&(e++,!(e+1>t.length)););e++}return e}},{key:"backSpaceHtmlChars",value:function(t,e,s){if("html"!==s.contentType)return e;var n=t.substr(e).charAt(0);if(">"===n||";"===n){var i="";for(i=">"===n?"<":"&";t.substr(e-1).charAt(0)!==i&&(e--,!(e<0)););e--}return e}}]),t}();e["default"]=i;var r=new i;e.htmlParser=r}])});
//# sourceMappingURL=typed.min.js.map

!function(){"use strict";function r(t){if(void 0===t)throw new Error('Pathformer [constructor]: "element" parameter is required');if(t.constructor===String&&!(t=document.getElementById(t)))throw new Error('Pathformer [constructor]: "element" parameter is not related to an existing ID');if(!(t instanceof window.SVGElement||t instanceof window.SVGGElement||/^svg$/i.test(t.nodeName)))throw new Error('Pathformer [constructor]: "element" parameter must be a string or a SVGelement');this.el=t,this.scan(t)}var n,e,t,h;function i(t,e,r){n(),this.isReady=!1,this.setElement(t,e),this.setOptions(e),this.setCallback(r),this.isReady&&this.init()}r.prototype.TYPES=["line","ellipse","circle","polygon","polyline","rect"],r.prototype.ATTR_WATCH=["cx","cy","points","r","rx","ry","x","x1","x2","y","y1","y2"],r.prototype.scan=function(t){for(var e,r,n,i=t.querySelectorAll(this.TYPES.join(",")),a=0;a<i.length;a++)r=(0,this[(e=i[a]).tagName.toLowerCase()+"ToPath"])(this.parseAttr(e.attributes)),n=this.pathMaker(e,r),e.parentNode.replaceChild(n,e)},r.prototype.lineToPath=function(t){var e={},r=t.x1||0,n=t.y1||0,i=t.x2||0,a=t.y2||0;return e.d="M"+r+","+n+"L"+i+","+a,e},r.prototype.rectToPath=function(t){var e={},r=parseFloat(t.x)||0,n=parseFloat(t.y)||0,i=parseFloat(t.width)||0,a=parseFloat(t.height)||0;if(t.rx||t.ry){var o=parseInt(t.rx,10)||-1,s=parseInt(t.ry,10)||-1;o=Math.min(Math.max(o<0?s:o,0),i/2),s=Math.min(Math.max(s<0?o:s,0),a/2),e.d="M "+(r+o)+","+n+" L "+(r+i-o)+","+n+" A "+o+","+s+",0,0,1,"+(r+i)+","+(n+s)+" L "+(r+i)+","+(n+a-s)+" A "+o+","+s+",0,0,1,"+(r+i-o)+","+(n+a)+" L "+(r+o)+","+(n+a)+" A "+o+","+s+",0,0,1,"+r+","+(n+a-s)+" L "+r+","+(n+s)+" A "+o+","+s+",0,0,1,"+(r+o)+","+n}else e.d="M"+r+" "+n+" L"+(r+i)+" "+n+" L"+(r+i)+" "+(n+a)+" L"+r+" "+(n+a)+" Z";return e},r.prototype.polylineToPath=function(t){var e,r,n={},i=t.points.trim().split(" ");if(-1===t.points.indexOf(",")){var a=[];for(e=0;e<i.length;e+=2)a.push(i[e]+","+i[e+1]);i=a}for(r="M"+i[0],e=1;e<i.length;e++)-1!==i[e].indexOf(",")&&(r+="L"+i[e]);return n.d=r,n},r.prototype.polygonToPath=function(t){var e=r.prototype.polylineToPath(t);return e.d+="Z",e},r.prototype.ellipseToPath=function(t){var e={},r=parseFloat(t.rx)||0,n=parseFloat(t.ry)||0,i=parseFloat(t.cx)||0,a=parseFloat(t.cy)||0,o=i-r,s=a,h=parseFloat(i)+parseFloat(r),l=a;return e.d="M"+o+","+s+"A"+r+","+n+" 0,1,1 "+h+","+l+"A"+r+","+n+" 0,1,1 "+o+","+l,e},r.prototype.circleToPath=function(t){var e={},r=parseFloat(t.r)||0,n=parseFloat(t.cx)||0,i=parseFloat(t.cy)||0,a=n-r,o=i,s=parseFloat(n)+parseFloat(r),h=i;return e.d="M"+a+","+o+"A"+r+","+r+" 0,1,1 "+s+","+h+"A"+r+","+r+" 0,1,1 "+a+","+h,e},r.prototype.pathMaker=function(t,e){var r,n,i=document.createElementNS("http://www.w3.org/2000/svg","path");for(r=0;r<t.attributes.length;r++)n=t.attributes[r],-1===this.ATTR_WATCH.indexOf(n.name)&&i.setAttribute(n.name,n.value);for(r in e)i.setAttribute(r,e[r]);return i},r.prototype.parseAttr=function(t){for(var e,r={},n=0;n<t.length;n++){if(e=t[n],-1!==this.ATTR_WATCH.indexOf(e.name)&&-1!==e.value.indexOf("%"))throw new Error("Pathformer [parseAttr]: a SVG shape got values in percentage. This cannot be transformed into 'path' tags. Please use 'viewBox'.");r[e.name]=e.value}return r},i.LINEAR=function(t){return t},i.EASE=function(t){return-Math.cos(t*Math.PI)/2+.5},i.EASE_OUT=function(t){return 1-Math.pow(1-t,3)},i.EASE_IN=function(t){return Math.pow(t,3)},i.EASE_OUT_BOUNCE=function(t){var e=1-Math.cos(t*(.5*Math.PI)),r=Math.pow(e,1.5),n=Math.pow(1-t,2);return 1-n+(1-Math.abs(Math.cos(r*(2.5*Math.PI))))*n},i.prototype.setElement=function(e,r){var t,n;if(void 0===e)throw new Error('Vivus [constructor]: "element" parameter is required');if(e.constructor===String&&!(e=document.getElementById(e)))throw new Error('Vivus [constructor]: "element" parameter is not related to an existing ID');if(this.parentEl=e,r&&r.file){n=this,t=function(){var t=document.createElement("div");t.innerHTML=this.responseText;var e=t.querySelector("svg");if(!e)throw new Error("Vivus [load]: Cannot find the SVG in the loaded file : "+r.file);n.el=e,n.el.setAttribute("width","100%"),n.el.setAttribute("height","100%"),n.parentEl.appendChild(n.el),n.isReady=!0,n.init(),n=null};var i=new window.XMLHttpRequest;return i.addEventListener("load",t),i.open("GET",r.file),void i.send()}switch(e.constructor){case window.SVGSVGElement:case window.SVGElement:case window.SVGGElement:this.el=e,this.isReady=!0;break;case window.HTMLObjectElement:n=this,(t=function(t){if(!n.isReady){if(n.el=e.contentDocument&&e.contentDocument.querySelector("svg"),!n.el&&t)throw new Error("Vivus [constructor]: object loaded does not contain any SVG");n.el&&(e.getAttribute("built-by-vivus")&&(n.parentEl.insertBefore(n.el,e),n.parentEl.removeChild(e),n.el.setAttribute("width","100%"),n.el.setAttribute("height","100%")),n.isReady=!0,n.init(),n=null)}})()||e.addEventListener("load",t);break;default:throw new Error('Vivus [constructor]: "element" parameter is not valid (or miss the "file" attribute)')}},i.prototype.setOptions=function(t){var e=["delayed","sync","async","nsync","oneByOne","scenario","scenario-sync"],r=["inViewport","manual","autostart"];if(void 0!==t&&t.constructor!==Object)throw new Error('Vivus [constructor]: "options" parameter must be an object');if((t=t||{}).type&&-1===e.indexOf(t.type))throw new Error("Vivus [constructor]: "+t.type+" is not an existing animation `type`");if(this.type=t.type||e[0],t.start&&-1===r.indexOf(t.start))throw new Error("Vivus [constructor]: "+t.start+" is not an existing `start` option");if(this.start=t.start||r[0],this.isIE=-1!==window.navigator.userAgent.indexOf("MSIE")||-1!==window.navigator.userAgent.indexOf("Trident/")||-1!==window.navigator.userAgent.indexOf("Edge/"),this.duration=h(t.duration,120),this.delay=h(t.delay,null),this.dashGap=h(t.dashGap,1),this.forceRender=t.hasOwnProperty("forceRender")?!!t.forceRender:this.isIE,this.reverseStack=!!t.reverseStack,this.selfDestroy=!!t.selfDestroy,this.onReady=t.onReady,this.map=[],this.frameLength=this.currentFrame=this.delayUnit=this.speed=this.handle=null,this.ignoreInvisible=!!t.hasOwnProperty("ignoreInvisible")&&!!t.ignoreInvisible,this.animTimingFunction=t.animTimingFunction||i.LINEAR,this.pathTimingFunction=t.pathTimingFunction||i.LINEAR,this.delay>=this.duration)throw new Error("Vivus [constructor]: delay must be shorter than duration")},i.prototype.setCallback=function(t){if(t&&t.constructor!==Function)throw new Error('Vivus [constructor]: "callback" parameter must be a function');this.callback=t||function(){}},i.prototype.mapping=function(){var t,e,r,n,i,a,o,s;for(s=a=o=0,e=this.el.querySelectorAll("path"),t=0;t<e.length;t++)r=e[t],this.isInvisible(r)||(i={el:r,length:Math.ceil(r.getTotalLength())},isNaN(i.length)?window.console&&console.warn&&console.warn("Vivus [mapping]: cannot retrieve a path element length",r):(this.map.push(i),r.style.strokeDasharray=i.length+" "+(i.length+2*this.dashGap),r.style.strokeDashoffset=i.length+this.dashGap,i.length+=this.dashGap,a+=i.length,this.renderPath(t)));for(a=0===a?1:a,this.delay=null===this.delay?this.duration/3:this.delay,this.delayUnit=this.delay/(1<e.length?e.length-1:1),this.reverseStack&&this.map.reverse(),t=0;t<this.map.length;t++){switch(i=this.map[t],this.type){case"delayed":i.startAt=this.delayUnit*t,i.duration=this.duration-this.delay;break;case"oneByOne":i.startAt=o/a*this.duration,i.duration=i.length/a*this.duration;break;case"sync":case"async":case"nsync":i.startAt=0,i.duration=this.duration;break;case"scenario-sync":r=i.el,n=this.parseAttr(r),i.startAt=s+(h(n["data-delay"],this.delayUnit)||0),i.duration=h(n["data-duration"],this.duration),s=void 0!==n["data-async"]?i.startAt:i.startAt+i.duration,this.frameLength=Math.max(this.frameLength,i.startAt+i.duration);break;case"scenario":r=i.el,n=this.parseAttr(r),i.startAt=h(n["data-start"],this.delayUnit)||0,i.duration=h(n["data-duration"],this.duration),this.frameLength=Math.max(this.frameLength,i.startAt+i.duration)}o+=i.length,this.frameLength=this.frameLength||this.duration}},i.prototype.drawer=function(){var t=this;if(this.currentFrame+=this.speed,this.currentFrame<=0)this.stop(),this.reset();else{if(!(this.currentFrame>=this.frameLength))return this.trace(),void(this.handle=e(function(){t.drawer()}));this.stop(),this.currentFrame=this.frameLength,this.trace(),this.selfDestroy&&this.destroy()}this.callback(this),this.instanceCallback&&(this.instanceCallback(this),this.instanceCallback=null)},i.prototype.trace=function(){var t,e,r,n;for(n=this.animTimingFunction(this.currentFrame/this.frameLength)*this.frameLength,t=0;t<this.map.length;t++)e=(n-(r=this.map[t]).startAt)/r.duration,e=this.pathTimingFunction(Math.max(0,Math.min(1,e))),r.progress!==e&&(r.progress=e,r.el.style.strokeDashoffset=Math.floor(r.length*(1-e)),this.renderPath(t))},i.prototype.renderPath=function(t){if(this.forceRender&&this.map&&this.map[t]){var e=this.map[t],r=e.el.cloneNode(!0);e.el.parentNode.replaceChild(r,e.el),e.el=r}},i.prototype.init=function(){this.frameLength=0,this.currentFrame=0,this.map=[],new r(this.el),this.mapping(),this.starter(),this.onReady&&this.onReady(this)},i.prototype.starter=function(){switch(this.start){case"manual":return;case"autostart":this.play();break;case"inViewport":var t=this,e=function(){t.isInViewport(t.parentEl,1)&&(t.play(),window.removeEventListener("scroll",e))};window.addEventListener("scroll",e),e()}},i.prototype.getStatus=function(){return 0===this.currentFrame?"start":this.currentFrame===this.frameLength?"end":"progress"},i.prototype.reset=function(){return this.setFrameProgress(0)},i.prototype.finish=function(){return this.setFrameProgress(1)},i.prototype.setFrameProgress=function(t){return t=Math.min(1,Math.max(0,t)),this.currentFrame=Math.round(this.frameLength*t),this.trace(),this},i.prototype.play=function(t,e){if(this.instanceCallback=null,t&&"function"==typeof t)this.instanceCallback=t,t=null;else if(t&&"number"!=typeof t)throw new Error("Vivus [play]: invalid speed");return e&&"function"==typeof e&&!this.instanceCallback&&(this.instanceCallback=e),this.speed=t||1,this.handle||this.drawer(),this},i.prototype.stop=function(){return this.handle&&(t(this.handle),this.handle=null),this},i.prototype.destroy=function(){var t,e;for(this.stop(),t=0;t<this.map.length;t++)(e=this.map[t]).el.style.strokeDashoffset=null,e.el.style.strokeDasharray=null,this.renderPath(t)},i.prototype.isInvisible=function(t){var e,r=t.getAttribute("data-ignore");return null!==r?"false"!==r:!!this.ignoreInvisible&&(!(e=t.getBoundingClientRect()).width&&!e.height)},i.prototype.parseAttr=function(t){var e,r={};if(t&&t.attributes)for(var n=0;n<t.attributes.length;n++)r[(e=t.attributes[n]).name]=e.value;return r},i.prototype.isInViewport=function(t,e){var r=this.scrollY(),n=r+this.getViewportH(),i=t.getBoundingClientRect(),a=i.height,o=r+i.top;return o+a*(e=e||0)<=n&&r<=o+a},i.prototype.getViewportH=function(){var t=this.docElem.clientHeight,e=window.innerHeight;return t<e?e:t},i.prototype.scrollY=function(){return window.pageYOffset||this.docElem.scrollTop},n=function(){i.prototype.docElem||(i.prototype.docElem=window.document.documentElement,e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)},t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return window.clearTimeout(t)})},h=function(t,e){var r=parseInt(t,10);return 0<=r?r:e},"function"==typeof define&&define.amd?define([],function(){return i}):"object"==typeof exports?module.exports=i:window.Vivus=i}();
/*! WOW - v1.1.3 - 2016-05-06
* Copyright (c) 2016 Matthieu Aussaguel;*/(function(){var a,b,c,d,e,f=function(a,b){return function(){return a.apply(b,arguments)}},g=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};b=function(){function a(){}return a.prototype.extend=function(a,b){var c,d;for(c in b)d=b[c],null==a[c]&&(a[c]=d);return a},a.prototype.isMobile=function(a){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(a)},a.prototype.createEvent=function(a,b,c,d){var e;return null==b&&(b=!1),null==c&&(c=!1),null==d&&(d=null),null!=document.createEvent?(e=document.createEvent("CustomEvent"),e.initCustomEvent(a,b,c,d)):null!=document.createEventObject?(e=document.createEventObject(),e.eventType=a):e.eventName=a,e},a.prototype.emitEvent=function(a,b){return null!=a.dispatchEvent?a.dispatchEvent(b):b in(null!=a)?a[b]():"on"+b in(null!=a)?a["on"+b]():void 0},a.prototype.addEvent=function(a,b,c){return null!=a.addEventListener?a.addEventListener(b,c,!1):null!=a.attachEvent?a.attachEvent("on"+b,c):a[b]=c},a.prototype.removeEvent=function(a,b,c){return null!=a.removeEventListener?a.removeEventListener(b,c,!1):null!=a.detachEvent?a.detachEvent("on"+b,c):delete a[b]},a.prototype.innerHeight=function(){return"innerHeight"in window?window.innerHeight:document.documentElement.clientHeight},a}(),c=this.WeakMap||this.MozWeakMap||(c=function(){function a(){this.keys=[],this.values=[]}return a.prototype.get=function(a){var b,c,d,e,f;for(f=this.keys,b=d=0,e=f.length;e>d;b=++d)if(c=f[b],c===a)return this.values[b]},a.prototype.set=function(a,b){var c,d,e,f,g;for(g=this.keys,c=e=0,f=g.length;f>e;c=++e)if(d=g[c],d===a)return void(this.values[c]=b);return this.keys.push(a),this.values.push(b)},a}()),a=this.MutationObserver||this.WebkitMutationObserver||this.MozMutationObserver||(a=function(){function a(){"undefined"!=typeof console&&null!==console&&console.warn("MutationObserver is not supported by your browser."),"undefined"!=typeof console&&null!==console&&console.warn("WOW.js cannot detect dom mutations, please call .sync() after loading new content.")}return a.notSupported=!0,a.prototype.observe=function(){},a}()),d=this.getComputedStyle||function(a,b){return this.getPropertyValue=function(b){var c;return"float"===b&&(b="styleFloat"),e.test(b)&&b.replace(e,function(a,b){return b.toUpperCase()}),(null!=(c=a.currentStyle)?c[b]:void 0)||null},this},e=/(\-([a-z]){1})/g,this.WOW=function(){function e(a){null==a&&(a={}),this.scrollCallback=f(this.scrollCallback,this),this.scrollHandler=f(this.scrollHandler,this),this.resetAnimation=f(this.resetAnimation,this),this.start=f(this.start,this),this.scrolled=!0,this.config=this.util().extend(a,this.defaults),null!=a.scrollContainer&&(this.config.scrollContainer=document.querySelector(a.scrollContainer)),this.animationNameCache=new c,this.wowEvent=this.util().createEvent(this.config.boxClass)}return e.prototype.defaults={boxClass:"wow",animateClass:"animated",offset:0,mobile:!0,live:!0,callback:null,scrollContainer:null},e.prototype.init=function(){var a;return this.element=window.document.documentElement,"interactive"===(a=document.readyState)||"complete"===a?this.start():this.util().addEvent(document,"DOMContentLoaded",this.start),this.finished=[]},e.prototype.start=function(){var b,c,d,e;if(this.stopped=!1,this.boxes=function(){var a,c,d,e;for(d=this.element.querySelectorAll("."+this.config.boxClass),e=[],a=0,c=d.length;c>a;a++)b=d[a],e.push(b);return e}.call(this),this.all=function(){var a,c,d,e;for(d=this.boxes,e=[],a=0,c=d.length;c>a;a++)b=d[a],e.push(b);return e}.call(this),this.boxes.length)if(this.disabled())this.resetStyle();else for(e=this.boxes,c=0,d=e.length;d>c;c++)b=e[c],this.applyStyle(b,!0);return this.disabled()||(this.util().addEvent(this.config.scrollContainer||window,"scroll",this.scrollHandler),this.util().addEvent(window,"resize",this.scrollHandler),this.interval=setInterval(this.scrollCallback,50)),this.config.live?new a(function(a){return function(b){var c,d,e,f,g;for(g=[],c=0,d=b.length;d>c;c++)f=b[c],g.push(function(){var a,b,c,d;for(c=f.addedNodes||[],d=[],a=0,b=c.length;b>a;a++)e=c[a],d.push(this.doSync(e));return d}.call(a));return g}}(this)).observe(document.body,{childList:!0,subtree:!0}):void 0},e.prototype.stop=function(){return this.stopped=!0,this.util().removeEvent(this.config.scrollContainer||window,"scroll",this.scrollHandler),this.util().removeEvent(window,"resize",this.scrollHandler),null!=this.interval?clearInterval(this.interval):void 0},e.prototype.sync=function(b){return a.notSupported?this.doSync(this.element):void 0},e.prototype.doSync=function(a){var b,c,d,e,f;if(null==a&&(a=this.element),1===a.nodeType){for(a=a.parentNode||a,e=a.querySelectorAll("."+this.config.boxClass),f=[],c=0,d=e.length;d>c;c++)b=e[c],g.call(this.all,b)<0?(this.boxes.push(b),this.all.push(b),this.stopped||this.disabled()?this.resetStyle():this.applyStyle(b,!0),f.push(this.scrolled=!0)):f.push(void 0);return f}},e.prototype.show=function(a){return this.applyStyle(a),a.className=a.className+" "+this.config.animateClass,null!=this.config.callback&&this.config.callback(a),this.util().emitEvent(a,this.wowEvent),this.util().addEvent(a,"animationend",this.resetAnimation),this.util().addEvent(a,"oanimationend",this.resetAnimation),this.util().addEvent(a,"webkitAnimationEnd",this.resetAnimation),this.util().addEvent(a,"MSAnimationEnd",this.resetAnimation),a},e.prototype.applyStyle=function(a,b){var c,d,e;return d=a.getAttribute("data-wow-duration"),c=a.getAttribute("data-wow-delay"),e=a.getAttribute("data-wow-iteration"),this.animate(function(f){return function(){return f.customStyle(a,b,d,c,e)}}(this))},e.prototype.animate=function(){return"requestAnimationFrame"in window?function(a){return window.requestAnimationFrame(a)}:function(a){return a()}}(),e.prototype.resetStyle=function(){var a,b,c,d,e;for(d=this.boxes,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.style.visibility="visible");return e},e.prototype.resetAnimation=function(a){var b;return a.type.toLowerCase().indexOf("animationend")>=0?(b=a.target||a.srcElement,b.className=b.className.replace(this.config.animateClass,"").trim()):void 0},e.prototype.customStyle=function(a,b,c,d,e){return b&&this.cacheAnimationName(a),a.style.visibility=b?"hidden":"visible",c&&this.vendorSet(a.style,{animationDuration:c}),d&&this.vendorSet(a.style,{animationDelay:d}),e&&this.vendorSet(a.style,{animationIterationCount:e}),this.vendorSet(a.style,{animationName:b?"none":this.cachedAnimationName(a)}),a},e.prototype.vendors=["moz","webkit"],e.prototype.vendorSet=function(a,b){var c,d,e,f;d=[];for(c in b)e=b[c],a[""+c]=e,d.push(function(){var b,d,g,h;for(g=this.vendors,h=[],b=0,d=g.length;d>b;b++)f=g[b],h.push(a[""+f+c.charAt(0).toUpperCase()+c.substr(1)]=e);return h}.call(this));return d},e.prototype.vendorCSS=function(a,b){var c,e,f,g,h,i;for(h=d(a),g=h.getPropertyCSSValue(b),f=this.vendors,c=0,e=f.length;e>c;c++)i=f[c],g=g||h.getPropertyCSSValue("-"+i+"-"+b);return g},e.prototype.animationName=function(a){var b;try{b=this.vendorCSS(a,"animation-name").cssText}catch(c){b=d(a).getPropertyValue("animation-name")}return"none"===b?"":b},e.prototype.cacheAnimationName=function(a){return this.animationNameCache.set(a,this.animationName(a))},e.prototype.cachedAnimationName=function(a){return this.animationNameCache.get(a)},e.prototype.scrollHandler=function(){return this.scrolled=!0},e.prototype.scrollCallback=function(){var a;return!this.scrolled||(this.scrolled=!1,this.boxes=function(){var b,c,d,e;for(d=this.boxes,e=[],b=0,c=d.length;c>b;b++)a=d[b],a&&(this.isVisible(a)?this.show(a):e.push(a));return e}.call(this),this.boxes.length||this.config.live)?void 0:this.stop()},e.prototype.offsetTop=function(a){for(var b;void 0===a.offsetTop;)a=a.parentNode;for(b=a.offsetTop;a=a.offsetParent;)b+=a.offsetTop;return b},e.prototype.isVisible=function(a){var b,c,d,e,f;return c=a.getAttribute("data-wow-offset")||this.config.offset,f=this.config.scrollContainer&&this.config.scrollContainer.scrollTop||window.pageYOffset,e=f+Math.min(this.element.clientHeight,this.util().innerHeight())-c,d=this.offsetTop(a),b=d+a.clientHeight,e>=d&&b>=f},e.prototype.util=function(){return null!=this._util?this._util:this._util=new b},e.prototype.disabled=function(){return!this.config.mobile&&this.util().isMobile(navigator.userAgent)},e}()}).call(this);
/**
 * bxSlider v4.2.12
 * Copyright 2013-2015 Steven Wanderski
 * Written while drinking Belgian ales and listening to jazz
 * Licensed under MIT (http://opensource.org/licenses/MIT)
 */
!function(t){var e={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:!1,captions:!1,ticker:!1,tickerHover:!1,adaptiveHeight:!1,adaptiveHeightSpeed:500,video:!1,useCSS:!0,preloadImages:"visible",responsive:!0,slideZIndex:50,wrapperClass:"bx-wrapper",touchEnabled:!0,swipeThreshold:50,oneToOneTouch:!0,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,ariaLive:!0,ariaHidden:!0,keyboardEnabled:!1,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:!0,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:!1,startText:"Start",stopText:"Stop",autoControlsCombine:!1,autoControlsSelector:null,auto:!1,pause:4e3,autoStart:!0,autoDirection:"next",stopAutoOnClick:!1,autoHover:!1,autoDelay:0,autoSlideForOnePage:!1,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,shrinkItems:!1,onSliderLoad:function(){return!0},onSlideBefore:function(){return!0},onSlideAfter:function(){return!0},onSlideNext:function(){return!0},onSlidePrev:function(){return!0},onSliderResize:function(){return!0}};t.fn.bxSlider=function(n){if(0===this.length)return this;if(this.length>1)return this.each(function(){t(this).bxSlider(n)}),this;var s={},o=this,r=t(window).width(),a=t(window).height();if(!t(o).data("bxSlider")){var l=function(){t(o).data("bxSlider")||(s.settings=t.extend({},e,n),s.settings.slideWidth=parseInt(s.settings.slideWidth),s.children=o.children(s.settings.slideSelector),s.children.length<s.settings.minSlides&&(s.settings.minSlides=s.children.length),s.children.length<s.settings.maxSlides&&(s.settings.maxSlides=s.children.length),s.settings.randomStart&&(s.settings.startSlide=Math.floor(Math.random()*s.children.length)),s.active={index:s.settings.startSlide},s.carousel=s.settings.minSlides>1||s.settings.maxSlides>1,s.carousel&&(s.settings.preloadImages="all"),s.minThreshold=s.settings.minSlides*s.settings.slideWidth+(s.settings.minSlides-1)*s.settings.slideMargin,s.maxThreshold=s.settings.maxSlides*s.settings.slideWidth+(s.settings.maxSlides-1)*s.settings.slideMargin,s.working=!1,s.controls={},s.interval=null,s.animProp="vertical"===s.settings.mode?"top":"left",s.usingCSS=s.settings.useCSS&&"fade"!==s.settings.mode&&function(){for(var t=document.createElement("div"),e=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"],i=0;i<e.length;i++)if(void 0!==t.style[e[i]])return s.cssPrefix=e[i].replace("Perspective","").toLowerCase(),s.animProp="-"+s.cssPrefix+"-transform",!0;return!1}(),"vertical"===s.settings.mode&&(s.settings.maxSlides=s.settings.minSlides),o.data("origStyle",o.attr("style")),o.children(s.settings.slideSelector).each(function(){t(this).data("origStyle",t(this).attr("style"))}),d())},d=function(){var e=s.children.eq(s.settings.startSlide);o.wrap('<div class="'+s.settings.wrapperClass+'"><div class="bx-viewport"></div></div>'),s.viewport=o.parent(),s.settings.ariaLive&&!s.settings.ticker&&s.viewport.attr("aria-live","polite"),s.loader=t('<div class="bx-loading" />'),s.viewport.prepend(s.loader),o.css({width:"horizontal"===s.settings.mode?1e3*s.children.length+215+"%":"auto",position:"relative"}),s.usingCSS&&s.settings.easing?o.css("-"+s.cssPrefix+"-transition-timing-function",s.settings.easing):s.settings.easing||(s.settings.easing="swing"),s.viewport.css({width:"100%",overflow:"hidden",position:"relative"}),s.viewport.parent().css({maxWidth:u()}),s.children.css({float:"horizontal"===s.settings.mode?"left":"none",listStyle:"none",position:"relative"}),s.children.css("width",h()),"horizontal"===s.settings.mode&&s.settings.slideMargin>0&&s.children.css("marginRight",s.settings.slideMargin),"vertical"===s.settings.mode&&s.settings.slideMargin>0&&s.children.css("marginBottom",s.settings.slideMargin),"fade"===s.settings.mode&&(s.children.css({position:"absolute",zIndex:0,display:"none"}),s.children.eq(s.settings.startSlide).css({zIndex:s.settings.slideZIndex,display:"block"})),s.controls.el=t('<div class="bx-controls" />'),s.settings.captions&&P(),s.active.last=s.settings.startSlide===f()-1,s.settings.video&&o.fitVids(),("all"===s.settings.preloadImages||s.settings.ticker)&&(e=s.children),s.settings.ticker?s.settings.pager=!1:(s.settings.controls&&C(),s.settings.auto&&s.settings.autoControls&&T(),s.settings.pager&&w(),(s.settings.controls||s.settings.autoControls||s.settings.pager)&&s.viewport.after(s.controls.el)),c(e,g)},c=function(e,i){var n=e.find('img:not([src=""]), iframe').length,s=0;return 0===n?void i():void e.find('img:not([src=""]), iframe').each(function(){t(this).one("load error",function(){++s===n&&i()}).each(function(){this.complete&&t(this).trigger("load")})})},g=function(){if(s.settings.infiniteLoop&&"fade"!==s.settings.mode&&!s.settings.ticker){var e="vertical"===s.settings.mode?s.settings.minSlides:s.settings.maxSlides,i=s.children.slice(0,e).clone(!0).addClass("bx-clone"),n=s.children.slice(-e).clone(!0).addClass("bx-clone");s.settings.ariaHidden&&(i.attr("aria-hidden",!0),n.attr("aria-hidden",!0)),o.append(i).prepend(n)}s.loader.remove(),m(),"vertical"===s.settings.mode&&(s.settings.adaptiveHeight=!0),s.viewport.height(p()),o.redrawSlider(),s.settings.onSliderLoad.call(o,s.active.index),s.initialized=!0,s.settings.responsive&&t(window).bind("resize",Z),s.settings.auto&&s.settings.autoStart&&(f()>1||s.settings.autoSlideForOnePage)&&H(),s.settings.ticker&&W(),s.settings.pager&&I(s.settings.startSlide),s.settings.controls&&D(),s.settings.touchEnabled&&!s.settings.ticker&&N(),s.settings.keyboardEnabled&&!s.settings.ticker&&t(document).keydown(F)},p=function(){var e=0,n=t();if("vertical"===s.settings.mode||s.settings.adaptiveHeight)if(s.carousel){var o=1===s.settings.moveSlides?s.active.index:s.active.index*x();for(n=s.children.eq(o),i=1;i<=s.settings.maxSlides-1;i++)n=o+i>=s.children.length?n.add(s.children.eq(i-1)):n.add(s.children.eq(o+i))}else n=s.children.eq(s.active.index);else n=s.children;return"vertical"===s.settings.mode?(n.each(function(i){e+=t(this).outerHeight()}),s.settings.slideMargin>0&&(e+=s.settings.slideMargin*(s.settings.minSlides-1))):e=Math.max.apply(Math,n.map(function(){return t(this).outerHeight(!1)}).get()),"border-box"===s.viewport.css("box-sizing")?e+=parseFloat(s.viewport.css("padding-top"))+parseFloat(s.viewport.css("padding-bottom"))+parseFloat(s.viewport.css("border-top-width"))+parseFloat(s.viewport.css("border-bottom-width")):"padding-box"===s.viewport.css("box-sizing")&&(e+=parseFloat(s.viewport.css("padding-top"))+parseFloat(s.viewport.css("padding-bottom"))),e},u=function(){var t="100%";return s.settings.slideWidth>0&&(t="horizontal"===s.settings.mode?s.settings.maxSlides*s.settings.slideWidth+(s.settings.maxSlides-1)*s.settings.slideMargin:s.settings.slideWidth),t},h=function(){var t=s.settings.slideWidth,e=s.viewport.width();if(0===s.settings.slideWidth||s.settings.slideWidth>e&&!s.carousel||"vertical"===s.settings.mode)t=e;else if(s.settings.maxSlides>1&&"horizontal"===s.settings.mode){if(e>s.maxThreshold)return t;e<s.minThreshold?t=(e-s.settings.slideMargin*(s.settings.minSlides-1))/s.settings.minSlides:s.settings.shrinkItems&&(t=Math.floor((e+s.settings.slideMargin)/Math.ceil((e+s.settings.slideMargin)/(t+s.settings.slideMargin))-s.settings.slideMargin))}return t},v=function(){var t=1,e=null;return"horizontal"===s.settings.mode&&s.settings.slideWidth>0?s.viewport.width()<s.minThreshold?t=s.settings.minSlides:s.viewport.width()>s.maxThreshold?t=s.settings.maxSlides:(e=s.children.first().width()+s.settings.slideMargin,t=Math.floor((s.viewport.width()+s.settings.slideMargin)/e)):"vertical"===s.settings.mode&&(t=s.settings.minSlides),t},f=function(){var t=0,e=0,i=0;if(s.settings.moveSlides>0)if(s.settings.infiniteLoop)t=Math.ceil(s.children.length/x());else for(;e<s.children.length;)++t,e=i+v(),i+=s.settings.moveSlides<=v()?s.settings.moveSlides:v();else t=Math.ceil(s.children.length/v());return t},x=function(){return s.settings.moveSlides>0&&s.settings.moveSlides<=v()?s.settings.moveSlides:v()},m=function(){var t,e,i;s.children.length>s.settings.maxSlides&&s.active.last&&!s.settings.infiniteLoop?"horizontal"===s.settings.mode?(e=s.children.last(),t=e.position(),S(-(t.left-(s.viewport.width()-e.outerWidth())),"reset",0)):"vertical"===s.settings.mode&&(i=s.children.length-s.settings.minSlides,t=s.children.eq(i).position(),S(-t.top,"reset",0)):(t=s.children.eq(s.active.index*x()).position(),s.active.index===f()-1&&(s.active.last=!0),void 0!==t&&("horizontal"===s.settings.mode?S(-t.left,"reset",0):"vertical"===s.settings.mode&&S(-t.top,"reset",0)))},S=function(e,i,n,r){var a,l;s.usingCSS?(l="vertical"===s.settings.mode?"translate3d(0, "+e+"px, 0)":"translate3d("+e+"px, 0, 0)",o.css("-"+s.cssPrefix+"-transition-duration",n/1e3+"s"),"slide"===i?(o.css(s.animProp,l),0!==n?o.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(e){t(e.target).is(o)&&(o.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),q())}):q()):"reset"===i?o.css(s.animProp,l):"ticker"===i&&(o.css("-"+s.cssPrefix+"-transition-timing-function","linear"),o.css(s.animProp,l),0!==n?o.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(e){t(e.target).is(o)&&(o.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),S(r.resetValue,"reset",0),L())}):(S(r.resetValue,"reset",0),L()))):(a={},a[s.animProp]=e,"slide"===i?o.animate(a,n,s.settings.easing,function(){q()}):"reset"===i?o.css(s.animProp,e):"ticker"===i&&o.animate(a,n,"linear",function(){S(r.resetValue,"reset",0),L()}))},b=function(){for(var e="",i="",n=f(),o=0;o<n;o++)i="",s.settings.buildPager&&t.isFunction(s.settings.buildPager)||s.settings.pagerCustom?(i=s.settings.buildPager(o),s.pagerEl.addClass("bx-custom-pager")):(i=o+1,s.pagerEl.addClass("bx-default-pager")),e+='<div class="bx-pager-item"><a href="" data-slide-index="'+o+'" class="bx-pager-link">'+i+"</a></div>";s.pagerEl.html(e)},w=function(){s.settings.pagerCustom?s.pagerEl=t(s.settings.pagerCustom):(s.pagerEl=t('<div class="bx-pager" />'),s.settings.pagerSelector?t(s.settings.pagerSelector).html(s.pagerEl):s.controls.el.addClass("bx-has-pager").append(s.pagerEl),b()),s.pagerEl.on("click touchend","a",z)},C=function(){s.controls.next=t('<a class="bx-next" href="">'+s.settings.nextText+"</a>"),s.controls.prev=t('<a class="bx-prev" href="">'+s.settings.prevText+"</a>"),s.controls.next.bind("click touchend",E),s.controls.prev.bind("click touchend",k),s.settings.nextSelector&&t(s.settings.nextSelector).append(s.controls.next),s.settings.prevSelector&&t(s.settings.prevSelector).append(s.controls.prev),s.settings.nextSelector||s.settings.prevSelector||(s.controls.directionEl=t('<div class="bx-controls-direction" />'),s.controls.directionEl.append(s.controls.prev).append(s.controls.next),s.controls.el.addClass("bx-has-controls-direction").append(s.controls.directionEl))},T=function(){s.controls.start=t('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+s.settings.startText+"</a></div>"),s.controls.stop=t('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+s.settings.stopText+"</a></div>"),s.controls.autoEl=t('<div class="bx-controls-auto" />'),s.controls.autoEl.on("click",".bx-start",M),s.controls.autoEl.on("click",".bx-stop",y),s.settings.autoControlsCombine?s.controls.autoEl.append(s.controls.start):s.controls.autoEl.append(s.controls.start).append(s.controls.stop),s.settings.autoControlsSelector?t(s.settings.autoControlsSelector).html(s.controls.autoEl):s.controls.el.addClass("bx-has-controls-auto").append(s.controls.autoEl),A(s.settings.autoStart?"stop":"start")},P=function(){s.children.each(function(e){var i=t(this).find("img:first").attr("title");void 0!==i&&(""+i).length&&t(this).append('<div class="bx-caption"><span>'+i+"</span></div>")})},E=function(t){t.preventDefault(),s.controls.el.hasClass("disabled")||(s.settings.auto&&s.settings.stopAutoOnClick&&o.stopAuto(),o.goToNextSlide())},k=function(t){t.preventDefault(),s.controls.el.hasClass("disabled")||(s.settings.auto&&s.settings.stopAutoOnClick&&o.stopAuto(),o.goToPrevSlide())},M=function(t){o.startAuto(),t.preventDefault()},y=function(t){o.stopAuto(),t.preventDefault()},z=function(e){var i,n;e.preventDefault(),s.controls.el.hasClass("disabled")||(s.settings.auto&&s.settings.stopAutoOnClick&&o.stopAuto(),i=t(e.currentTarget),void 0!==i.attr("data-slide-index")&&(n=parseInt(i.attr("data-slide-index")),n!==s.active.index&&o.goToSlide(n)))},I=function(e){var i=s.children.length;return"short"===s.settings.pagerType?(s.settings.maxSlides>1&&(i=Math.ceil(s.children.length/s.settings.maxSlides)),void s.pagerEl.html(e+1+s.settings.pagerShortSeparator+i)):(s.pagerEl.find("a").removeClass("active"),void s.pagerEl.each(function(i,n){t(n).find("a").eq(e).addClass("active")}))},q=function(){if(s.settings.infiniteLoop){var t="";0===s.active.index?t=s.children.eq(0).position():s.active.index===f()-1&&s.carousel?t=s.children.eq((f()-1)*x()).position():s.active.index===s.children.length-1&&(t=s.children.eq(s.children.length-1).position()),t&&("horizontal"===s.settings.mode?S(-t.left,"reset",0):"vertical"===s.settings.mode&&S(-t.top,"reset",0))}s.working=!1,s.settings.onSlideAfter.call(o,s.children.eq(s.active.index),s.oldIndex,s.active.index)},A=function(t){s.settings.autoControlsCombine?s.controls.autoEl.html(s.controls[t]):(s.controls.autoEl.find("a").removeClass("active"),s.controls.autoEl.find("a:not(.bx-"+t+")").addClass("active"))},D=function(){1===f()?(s.controls.prev.addClass("disabled"),s.controls.next.addClass("disabled")):!s.settings.infiniteLoop&&s.settings.hideControlOnEnd&&(0===s.active.index?(s.controls.prev.addClass("disabled"),s.controls.next.removeClass("disabled")):s.active.index===f()-1?(s.controls.next.addClass("disabled"),s.controls.prev.removeClass("disabled")):(s.controls.prev.removeClass("disabled"),s.controls.next.removeClass("disabled")))},H=function(){if(s.settings.autoDelay>0){setTimeout(o.startAuto,s.settings.autoDelay)}else o.startAuto(),t(window).focus(function(){o.startAuto()}).blur(function(){o.stopAuto()});s.settings.autoHover&&o.hover(function(){s.interval&&(o.stopAuto(!0),s.autoPaused=!0)},function(){s.autoPaused&&(o.startAuto(!0),s.autoPaused=null)})},W=function(){var e,i,n,r,a,l,d,c,g=0;"next"===s.settings.autoDirection?o.append(s.children.clone().addClass("bx-clone")):(o.prepend(s.children.clone().addClass("bx-clone")),e=s.children.first().position(),g="horizontal"===s.settings.mode?-e.left:-e.top),S(g,"reset",0),s.settings.pager=!1,s.settings.controls=!1,s.settings.autoControls=!1,s.settings.tickerHover&&(s.usingCSS?(r="horizontal"===s.settings.mode?4:5,s.viewport.hover(function(){i=o.css("-"+s.cssPrefix+"-transform"),n=parseFloat(i.split(",")[r]),S(n,"reset",0)},function(){c=0,s.children.each(function(e){c+="horizontal"===s.settings.mode?t(this).outerWidth(!0):t(this).outerHeight(!0)}),a=s.settings.speed/c,l="horizontal"===s.settings.mode?"left":"top",d=a*(c-Math.abs(parseInt(n))),L(d)})):s.viewport.hover(function(){o.stop()},function(){c=0,s.children.each(function(e){c+="horizontal"===s.settings.mode?t(this).outerWidth(!0):t(this).outerHeight(!0)}),a=s.settings.speed/c,l="horizontal"===s.settings.mode?"left":"top",d=a*(c-Math.abs(parseInt(o.css(l)))),L(d)})),L()},L=function(t){var e,i,n,r=t?t:s.settings.speed,a={left:0,top:0},l={left:0,top:0};"next"===s.settings.autoDirection?a=o.find(".bx-clone").first().position():l=s.children.first().position(),e="horizontal"===s.settings.mode?-a.left:-a.top,i="horizontal"===s.settings.mode?-l.left:-l.top,n={resetValue:i},S(e,"ticker",r,n)},O=function(e){var i=t(window),n={top:i.scrollTop(),left:i.scrollLeft()},s=e.offset();return n.right=n.left+i.width(),n.bottom=n.top+i.height(),s.right=s.left+e.outerWidth(),s.bottom=s.top+e.outerHeight(),!(n.right<s.left||n.left>s.right||n.bottom<s.top||n.top>s.bottom)},F=function(t){var e=document.activeElement.tagName.toLowerCase(),i="input|textarea",n=new RegExp(e,["i"]),s=n.exec(i);if(null==s&&O(o)){if(39===t.keyCode)return E(t),!1;if(37===t.keyCode)return k(t),!1}},N=function(){s.touch={start:{x:0,y:0},end:{x:0,y:0}},s.viewport.bind("touchstart MSPointerDown pointerdown",X),s.viewport.on("click",".bxslider a",function(t){s.viewport.hasClass("click-disabled")&&(t.preventDefault(),s.viewport.removeClass("click-disabled"))})},X=function(t){if(s.controls.el.addClass("disabled"),s.working)t.preventDefault(),s.controls.el.removeClass("disabled");else{s.touch.originalPos=o.position();var e=t.originalEvent,i="undefined"!=typeof e.changedTouches?e.changedTouches:[e];s.touch.start.x=i[0].pageX,s.touch.start.y=i[0].pageY,s.viewport.get(0).setPointerCapture&&(s.pointerId=e.pointerId,s.viewport.get(0).setPointerCapture(s.pointerId)),s.viewport.bind("touchmove MSPointerMove pointermove",V),s.viewport.bind("touchend MSPointerUp pointerup",R),s.viewport.bind("MSPointerCancel pointercancel",Y)}},Y=function(t){S(s.touch.originalPos.left,"reset",0),s.controls.el.removeClass("disabled"),s.viewport.unbind("MSPointerCancel pointercancel",Y),s.viewport.unbind("touchmove MSPointerMove pointermove",V),s.viewport.unbind("touchend MSPointerUp pointerup",R),s.viewport.get(0).releasePointerCapture&&s.viewport.get(0).releasePointerCapture(s.pointerId)},V=function(t){var e=t.originalEvent,i="undefined"!=typeof e.changedTouches?e.changedTouches:[e],n=Math.abs(i[0].pageX-s.touch.start.x),o=Math.abs(i[0].pageY-s.touch.start.y),r=0,a=0;3*n>o&&s.settings.preventDefaultSwipeX?t.preventDefault():3*o>n&&s.settings.preventDefaultSwipeY&&t.preventDefault(),"fade"!==s.settings.mode&&s.settings.oneToOneTouch&&("horizontal"===s.settings.mode?(a=i[0].pageX-s.touch.start.x,r=s.touch.originalPos.left+a):(a=i[0].pageY-s.touch.start.y,r=s.touch.originalPos.top+a),S(r,"reset",0))},R=function(t){s.viewport.unbind("touchmove MSPointerMove pointermove",V),s.controls.el.removeClass("disabled");var e=t.originalEvent,i="undefined"!=typeof e.changedTouches?e.changedTouches:[e],n=0,r=0;s.touch.end.x=i[0].pageX,s.touch.end.y=i[0].pageY,"fade"===s.settings.mode?(r=Math.abs(s.touch.start.x-s.touch.end.x),r>=s.settings.swipeThreshold&&(s.touch.start.x>s.touch.end.x?o.goToNextSlide():o.goToPrevSlide(),o.stopAuto())):("horizontal"===s.settings.mode?(r=s.touch.end.x-s.touch.start.x,n=s.touch.originalPos.left):(r=s.touch.end.y-s.touch.start.y,n=s.touch.originalPos.top),!s.settings.infiniteLoop&&(0===s.active.index&&r>0||s.active.last&&r<0)?S(n,"reset",200):Math.abs(r)>=s.settings.swipeThreshold?(r<0?o.goToNextSlide():o.goToPrevSlide(),o.stopAuto()):S(n,"reset",200)),s.viewport.unbind("touchend MSPointerUp pointerup",R),s.viewport.get(0).releasePointerCapture&&s.viewport.get(0).releasePointerCapture(s.pointerId)},Z=function(e){if(s.initialized)if(s.working)window.setTimeout(Z,10);else{var i=t(window).width(),n=t(window).height();r===i&&a===n||(r=i,a=n,o.redrawSlider(),s.settings.onSliderResize.call(o,s.active.index))}},B=function(t){var e=v();s.settings.ariaHidden&&!s.settings.ticker&&(s.children.attr("aria-hidden","true"),s.children.slice(t,t+e).attr("aria-hidden","false"))},U=function(t){return t<0?s.settings.infiniteLoop?f()-1:s.active.index:t>=f()?s.settings.infiniteLoop?0:s.active.index:t};return o.goToSlide=function(e,i){var n,r,a,l,d=!0,c=0,g={left:0,top:0},u=null;if(s.oldIndex=s.active.index,s.active.index=U(e),!s.working&&s.active.index!==s.oldIndex){if(s.working=!0,d=s.settings.onSlideBefore.call(o,s.children.eq(s.active.index),s.oldIndex,s.active.index),"undefined"!=typeof d&&!d)return s.active.index=s.oldIndex,void(s.working=!1);"next"===i?s.settings.onSlideNext.call(o,s.children.eq(s.active.index),s.oldIndex,s.active.index)||(d=!1):"prev"===i&&(s.settings.onSlidePrev.call(o,s.children.eq(s.active.index),s.oldIndex,s.active.index)||(d=!1)),s.active.last=s.active.index>=f()-1,(s.settings.pager||s.settings.pagerCustom)&&I(s.active.index),s.settings.controls&&D(),"fade"===s.settings.mode?(s.settings.adaptiveHeight&&s.viewport.height()!==p()&&s.viewport.animate({height:p()},s.settings.adaptiveHeightSpeed),s.children.filter(":visible").fadeOut(s.settings.speed).css({zIndex:0}),s.children.eq(s.active.index).css("zIndex",s.settings.slideZIndex+1).fadeIn(s.settings.speed,function(){t(this).css("zIndex",s.settings.slideZIndex),q()})):(s.settings.adaptiveHeight&&s.viewport.height()!==p()&&s.viewport.animate({height:p()},s.settings.adaptiveHeightSpeed),!s.settings.infiniteLoop&&s.carousel&&s.active.last?"horizontal"===s.settings.mode?(u=s.children.eq(s.children.length-1),g=u.position(),c=s.viewport.width()-u.outerWidth()):(n=s.children.length-s.settings.minSlides,g=s.children.eq(n).position()):s.carousel&&s.active.last&&"prev"===i?(r=1===s.settings.moveSlides?s.settings.maxSlides-x():(f()-1)*x()-(s.children.length-s.settings.maxSlides),u=o.children(".bx-clone").eq(r),g=u.position()):"next"===i&&0===s.active.index?(g=o.find("> .bx-clone").eq(s.settings.maxSlides).position(),s.active.last=!1):e>=0&&(l=e*parseInt(x()),g=s.children.eq(l).position()),"undefined"!=typeof g?(a="horizontal"===s.settings.mode?-(g.left-c):-g.top,S(a,"slide",s.settings.speed)):s.working=!1),s.settings.ariaHidden&&B(s.active.index*x())}},o.goToNextSlide=function(){if(s.settings.infiniteLoop||!s.active.last){var t=parseInt(s.active.index)+1;o.goToSlide(t,"next")}},o.goToPrevSlide=function(){if(s.settings.infiniteLoop||0!==s.active.index){var t=parseInt(s.active.index)-1;o.goToSlide(t,"prev")}},o.startAuto=function(t){s.interval||(s.interval=setInterval(function(){"next"===s.settings.autoDirection?o.goToNextSlide():o.goToPrevSlide()},s.settings.pause),s.settings.autoControls&&t!==!0&&A("stop"))},o.stopAuto=function(t){s.interval&&(clearInterval(s.interval),s.interval=null,s.settings.autoControls&&t!==!0&&A("start"))},o.getCurrentSlide=function(){return s.active.index},o.getCurrentSlideElement=function(){return s.children.eq(s.active.index)},o.getSlideElement=function(t){return s.children.eq(t)},o.getSlideCount=function(){return s.children.length},o.isWorking=function(){return s.working},o.redrawSlider=function(){s.children.add(o.find(".bx-clone")).outerWidth(h()),s.viewport.css("height",p()),s.settings.ticker||m(),s.active.last&&(s.active.index=f()-1),s.active.index>=f()&&(s.active.last=!0),s.settings.pager&&!s.settings.pagerCustom&&(b(),I(s.active.index)),s.settings.ariaHidden&&B(s.active.index*x())},o.destroySlider=function(){s.initialized&&(s.initialized=!1,t(".bx-clone",this).remove(),s.children.each(function(){void 0!==t(this).data("origStyle")?t(this).attr("style",t(this).data("origStyle")):t(this).removeAttr("style")}),void 0!==t(this).data("origStyle")?this.attr("style",t(this).data("origStyle")):t(this).removeAttr("style"),t(this).unwrap().unwrap(),s.controls.el&&s.controls.el.remove(),s.controls.next&&s.controls.next.remove(),s.controls.prev&&s.controls.prev.remove(),s.pagerEl&&s.settings.controls&&!s.settings.pagerCustom&&s.pagerEl.remove(),t(".bx-caption",this).remove(),s.controls.autoEl&&s.controls.autoEl.remove(),clearInterval(s.interval),s.settings.responsive&&t(window).unbind("resize",Z),s.settings.keyboardEnabled&&t(document).unbind("keydown",F),t(this).removeData("bxSlider"))},o.reloadSlider=function(e){void 0!==e&&(n=e),o.destroySlider(),l(),t(o).data("bxSlider",this)},l(),t(o).data("bxSlider",this),this}}}(jQuery);
/*
 * jQuery FlexSlider v2.6.3
 * Copyright 2012 WooThemes
 * Contributing Author: Tyler Smith
 */!function($){var e=!0;$.flexslider=function(t,a){var n=$(t);n.vars=$.extend({},$.flexslider.defaults,a);var i=n.vars.namespace,s=window.navigator&&window.navigator.msPointerEnabled&&window.MSGesture,r=("ontouchstart"in window||s||window.DocumentTouch&&document instanceof DocumentTouch)&&n.vars.touch,o="click touchend MSPointerUp keyup",l="",c,d="vertical"===n.vars.direction,u=n.vars.reverse,v=n.vars.itemWidth>0,p="fade"===n.vars.animation,m=""!==n.vars.asNavFor,f={};$.data(t,"flexslider",n),f={init:function(){n.animating=!1,n.currentSlide=parseInt(n.vars.startAt?n.vars.startAt:0,10),isNaN(n.currentSlide)&&(n.currentSlide=0),n.animatingTo=n.currentSlide,n.atEnd=0===n.currentSlide||n.currentSlide===n.last,n.containerSelector=n.vars.selector.substr(0,n.vars.selector.search(" ")),n.slides=$(n.vars.selector,n),n.container=$(n.containerSelector,n),n.count=n.slides.length,n.syncExists=$(n.vars.sync).length>0,"slide"===n.vars.animation&&(n.vars.animation="swing"),n.prop=d?"top":"marginLeft",n.args={},n.manualPause=!1,n.stopped=!1,n.started=!1,n.startTimeout=null,n.transitions=!n.vars.video&&!p&&n.vars.useCSS&&function(){var e=document.createElement("div"),t=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var a in t)if(void 0!==e.style[t[a]])return n.pfx=t[a].replace("Perspective","").toLowerCase(),n.prop="-"+n.pfx+"-transform",!0;return!1}(),n.ensureAnimationEnd="",""!==n.vars.controlsContainer&&(n.controlsContainer=$(n.vars.controlsContainer).length>0&&$(n.vars.controlsContainer)),""!==n.vars.manualControls&&(n.manualControls=$(n.vars.manualControls).length>0&&$(n.vars.manualControls)),""!==n.vars.customDirectionNav&&(n.customDirectionNav=2===$(n.vars.customDirectionNav).length&&$(n.vars.customDirectionNav)),n.vars.randomize&&(n.slides.sort(function(){return Math.round(Math.random())-.5}),n.container.empty().append(n.slides)),n.doMath(),n.setup("init"),n.vars.controlNav&&f.controlNav.setup(),n.vars.directionNav&&f.directionNav.setup(),n.vars.keyboard&&(1===$(n.containerSelector).length||n.vars.multipleKeyboard)&&$(document).bind("keyup",function(e){var t=e.keyCode;if(!n.animating&&(39===t||37===t)){var a=39===t?n.getTarget("next"):37===t?n.getTarget("prev"):!1;n.flexAnimate(a,n.vars.pauseOnAction)}}),n.vars.mousewheel&&n.bind("mousewheel",function(e,t,a,i){e.preventDefault();var s=0>t?n.getTarget("next"):n.getTarget("prev");n.flexAnimate(s,n.vars.pauseOnAction)}),n.vars.pausePlay&&f.pausePlay.setup(),n.vars.slideshow&&n.vars.pauseInvisible&&f.pauseInvisible.init(),n.vars.slideshow&&(n.vars.pauseOnHover&&n.hover(function(){n.manualPlay||n.manualPause||n.pause()},function(){n.manualPause||n.manualPlay||n.stopped||n.play()}),n.vars.pauseInvisible&&f.pauseInvisible.isHidden()||(n.vars.initDelay>0?n.startTimeout=setTimeout(n.play,n.vars.initDelay):n.play())),m&&f.asNav.setup(),r&&n.vars.touch&&f.touch(),(!p||p&&n.vars.smoothHeight)&&$(window).bind("resize orientationchange focus",f.resize),n.find("img").attr("draggable","false"),setTimeout(function(){n.vars.start(n)},200)},asNav:{setup:function(){n.asNav=!0,n.animatingTo=Math.floor(n.currentSlide/n.move),n.currentItem=n.currentSlide,n.slides.removeClass(i+"active-slide").eq(n.currentItem).addClass(i+"active-slide"),s?(t._slider=n,n.slides.each(function(){var e=this;e._gesture=new MSGesture,e._gesture.target=e,e.addEventListener("MSPointerDown",function(e){e.preventDefault(),e.currentTarget._gesture&&e.currentTarget._gesture.addPointer(e.pointerId)},!1),e.addEventListener("MSGestureTap",function(e){e.preventDefault();var t=$(this),a=t.index();$(n.vars.asNavFor).data("flexslider").animating||t.hasClass("active")||(n.direction=n.currentItem<a?"next":"prev",n.flexAnimate(a,n.vars.pauseOnAction,!1,!0,!0))})})):n.slides.on(o,function(e){e.preventDefault();var t=$(this),a=t.index(),s=t.offset().left-$(n).scrollLeft();0>=s&&t.hasClass(i+"active-slide")?n.flexAnimate(n.getTarget("prev"),!0):$(n.vars.asNavFor).data("flexslider").animating||t.hasClass(i+"active-slide")||(n.direction=n.currentItem<a?"next":"prev",n.flexAnimate(a,n.vars.pauseOnAction,!1,!0,!0))})}},controlNav:{setup:function(){n.manualControls?f.controlNav.setupManual():f.controlNav.setupPaging()},setupPaging:function(){var e="thumbnails"===n.vars.controlNav?"control-thumbs":"control-paging",t=1,a,s;if(n.controlNavScaffold=$('<ol class="'+i+"control-nav "+i+e+'"></ol>'),n.pagingCount>1)for(var r=0;r<n.pagingCount;r++){s=n.slides.eq(r),void 0===s.attr("data-thumb-alt")&&s.attr("data-thumb-alt","");var c=""!==s.attr("data-thumb-alt")?c=' alt="'+s.attr("data-thumb-alt")+'"':"";if(a="thumbnails"===n.vars.controlNav?'<img src="'+s.attr("data-thumb")+'"'+c+"/>":'<a href="#">'+t+"</a>","thumbnails"===n.vars.controlNav&&!0===n.vars.thumbCaptions){var d=s.attr("data-thumbcaption");""!==d&&void 0!==d&&(a+='<span class="'+i+'caption">'+d+"</span>")}n.controlNavScaffold.append("<li>"+a+"</li>"),t++}n.controlsContainer?$(n.controlsContainer).append(n.controlNavScaffold):n.append(n.controlNavScaffold),f.controlNav.set(),f.controlNav.active(),n.controlNavScaffold.delegate("a, img",o,function(e){if(e.preventDefault(),""===l||l===e.type){var t=$(this),a=n.controlNav.index(t);t.hasClass(i+"active")||(n.direction=a>n.currentSlide?"next":"prev",n.flexAnimate(a,n.vars.pauseOnAction))}""===l&&(l=e.type),f.setToClearWatchedEvent()})},setupManual:function(){n.controlNav=n.manualControls,f.controlNav.active(),n.controlNav.bind(o,function(e){if(e.preventDefault(),""===l||l===e.type){var t=$(this),a=n.controlNav.index(t);t.hasClass(i+"active")||(a>n.currentSlide?n.direction="next":n.direction="prev",n.flexAnimate(a,n.vars.pauseOnAction))}""===l&&(l=e.type),f.setToClearWatchedEvent()})},set:function(){var e="thumbnails"===n.vars.controlNav?"img":"a";n.controlNav=$("."+i+"control-nav li "+e,n.controlsContainer?n.controlsContainer:n)},active:function(){n.controlNav.removeClass(i+"active").eq(n.animatingTo).addClass(i+"active")},update:function(e,t){n.pagingCount>1&&"add"===e?n.controlNavScaffold.append($('<li><a href="#">'+n.count+"</a></li>")):1===n.pagingCount?n.controlNavScaffold.find("li").remove():n.controlNav.eq(t).closest("li").remove(),f.controlNav.set(),n.pagingCount>1&&n.pagingCount!==n.controlNav.length?n.update(t,e):f.controlNav.active()}},directionNav:{setup:function(){var e=$('<ul class="'+i+'direction-nav"><li class="'+i+'nav-prev"><a class="'+i+'prev" href="#">'+n.vars.prevText+'</a></li><li class="'+i+'nav-next"><a class="'+i+'next" href="#">'+n.vars.nextText+"</a></li></ul>");n.customDirectionNav?n.directionNav=n.customDirectionNav:n.controlsContainer?($(n.controlsContainer).append(e),n.directionNav=$("."+i+"direction-nav li a",n.controlsContainer)):(n.append(e),n.directionNav=$("."+i+"direction-nav li a",n)),f.directionNav.update(),n.directionNav.bind(o,function(e){e.preventDefault();var t;""!==l&&l!==e.type||(t=$(this).hasClass(i+"next")?n.getTarget("next"):n.getTarget("prev"),n.flexAnimate(t,n.vars.pauseOnAction)),""===l&&(l=e.type),f.setToClearWatchedEvent()})},update:function(){var e=i+"disabled";1===n.pagingCount?n.directionNav.addClass(e).attr("tabindex","-1"):n.vars.animationLoop?n.directionNav.removeClass(e).removeAttr("tabindex"):0===n.animatingTo?n.directionNav.removeClass(e).filter("."+i+"prev").addClass(e).attr("tabindex","-1"):n.animatingTo===n.last?n.directionNav.removeClass(e).filter("."+i+"next").addClass(e).attr("tabindex","-1"):n.directionNav.removeClass(e).removeAttr("tabindex")}},pausePlay:{setup:function(){var e=$('<div class="'+i+'pauseplay"><a href="#"></a></div>');n.controlsContainer?(n.controlsContainer.append(e),n.pausePlay=$("."+i+"pauseplay a",n.controlsContainer)):(n.append(e),n.pausePlay=$("."+i+"pauseplay a",n)),f.pausePlay.update(n.vars.slideshow?i+"pause":i+"play"),n.pausePlay.bind(o,function(e){e.preventDefault(),""!==l&&l!==e.type||($(this).hasClass(i+"pause")?(n.manualPause=!0,n.manualPlay=!1,n.pause()):(n.manualPause=!1,n.manualPlay=!0,n.play())),""===l&&(l=e.type),f.setToClearWatchedEvent()})},update:function(e){"play"===e?n.pausePlay.removeClass(i+"pause").addClass(i+"play").html(n.vars.playText):n.pausePlay.removeClass(i+"play").addClass(i+"pause").html(n.vars.pauseText)}},touch:function(){function e(e){e.stopPropagation(),n.animating?e.preventDefault():(n.pause(),t._gesture.addPointer(e.pointerId),T=0,c=d?n.h:n.w,f=Number(new Date),l=v&&u&&n.animatingTo===n.last?0:v&&u?n.limit-(n.itemW+n.vars.itemMargin)*n.move*n.animatingTo:v&&n.currentSlide===n.last?n.limit:v?(n.itemW+n.vars.itemMargin)*n.move*n.currentSlide:u?(n.last-n.currentSlide+n.cloneOffset)*c:(n.currentSlide+n.cloneOffset)*c)}function a(e){e.stopPropagation();var a=e.target._slider;if(a){var n=-e.translationX,i=-e.translationY;return T+=d?i:n,m=T,y=d?Math.abs(T)<Math.abs(-n):Math.abs(T)<Math.abs(-i),e.detail===e.MSGESTURE_FLAG_INERTIA?void setImmediate(function(){t._gesture.stop()}):void((!y||Number(new Date)-f>500)&&(e.preventDefault(),!p&&a.transitions&&(a.vars.animationLoop||(m=T/(0===a.currentSlide&&0>T||a.currentSlide===a.last&&T>0?Math.abs(T)/c+2:1)),a.setProps(l+m,"setTouch"))))}}function i(e){e.stopPropagation();var t=e.target._slider;if(t){if(t.animatingTo===t.currentSlide&&!y&&null!==m){var a=u?-m:m,n=a>0?t.getTarget("next"):t.getTarget("prev");t.canAdvance(n)&&(Number(new Date)-f<550&&Math.abs(a)>50||Math.abs(a)>c/2)?t.flexAnimate(n,t.vars.pauseOnAction):p||t.flexAnimate(t.currentSlide,t.vars.pauseOnAction,!0)}r=null,o=null,m=null,l=null,T=0}}var r,o,l,c,m,f,g,h,S,y=!1,x=0,b=0,T=0;s?(t.style.msTouchAction="none",t._gesture=new MSGesture,t._gesture.target=t,t.addEventListener("MSPointerDown",e,!1),t._slider=n,t.addEventListener("MSGestureChange",a,!1),t.addEventListener("MSGestureEnd",i,!1)):(g=function(e){n.animating?e.preventDefault():(window.navigator.msPointerEnabled||1===e.touches.length)&&(n.pause(),c=d?n.h:n.w,f=Number(new Date),x=e.touches[0].pageX,b=e.touches[0].pageY,l=v&&u&&n.animatingTo===n.last?0:v&&u?n.limit-(n.itemW+n.vars.itemMargin)*n.move*n.animatingTo:v&&n.currentSlide===n.last?n.limit:v?(n.itemW+n.vars.itemMargin)*n.move*n.currentSlide:u?(n.last-n.currentSlide+n.cloneOffset)*c:(n.currentSlide+n.cloneOffset)*c,r=d?b:x,o=d?x:b,t.addEventListener("touchmove",h,!1),t.addEventListener("touchend",S,!1))},h=function(e){x=e.touches[0].pageX,b=e.touches[0].pageY,m=d?r-b:r-x,y=d?Math.abs(m)<Math.abs(x-o):Math.abs(m)<Math.abs(b-o);var t=500;(!y||Number(new Date)-f>t)&&(e.preventDefault(),!p&&n.transitions&&(n.vars.animationLoop||(m/=0===n.currentSlide&&0>m||n.currentSlide===n.last&&m>0?Math.abs(m)/c+2:1),n.setProps(l+m,"setTouch")))},S=function(e){if(t.removeEventListener("touchmove",h,!1),n.animatingTo===n.currentSlide&&!y&&null!==m){var a=u?-m:m,i=a>0?n.getTarget("next"):n.getTarget("prev");n.canAdvance(i)&&(Number(new Date)-f<550&&Math.abs(a)>50||Math.abs(a)>c/2)?n.flexAnimate(i,n.vars.pauseOnAction):p||n.flexAnimate(n.currentSlide,n.vars.pauseOnAction,!0)}t.removeEventListener("touchend",S,!1),r=null,o=null,m=null,l=null},t.addEventListener("touchstart",g,!1))},resize:function(){!n.animating&&n.is(":visible")&&(v||n.doMath(),p?f.smoothHeight():v?(n.slides.width(n.computedW),n.update(n.pagingCount),n.setProps()):d?(n.viewport.height(n.h),n.setProps(n.h,"setTotal")):(n.vars.smoothHeight&&f.smoothHeight(),n.newSlides.width(n.computedW),n.setProps(n.computedW,"setTotal")))},smoothHeight:function(e){if(!d||p){var t=p?n:n.viewport;e?t.animate({height:n.slides.eq(n.animatingTo).innerHeight()},e):t.innerHeight(n.slides.eq(n.animatingTo).innerHeight())}},sync:function(e){var t=$(n.vars.sync).data("flexslider"),a=n.animatingTo;switch(e){case"animate":t.flexAnimate(a,n.vars.pauseOnAction,!1,!0);break;case"play":t.playing||t.asNav||t.play();break;case"pause":t.pause()}},uniqueID:function(e){return e.filter("[id]").add(e.find("[id]")).each(function(){var e=$(this);e.attr("id",e.attr("id")+"_clone")}),e},pauseInvisible:{visProp:null,init:function(){var e=f.pauseInvisible.getHiddenProp();if(e){var t=e.replace(/[H|h]idden/,"")+"visibilitychange";document.addEventListener(t,function(){f.pauseInvisible.isHidden()?n.startTimeout?clearTimeout(n.startTimeout):n.pause():n.started?n.play():n.vars.initDelay>0?setTimeout(n.play,n.vars.initDelay):n.play()})}},isHidden:function(){var e=f.pauseInvisible.getHiddenProp();return e?document[e]:!1},getHiddenProp:function(){var e=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var t=0;t<e.length;t++)if(e[t]+"Hidden"in document)return e[t]+"Hidden";return null}},setToClearWatchedEvent:function(){clearTimeout(c),c=setTimeout(function(){l=""},3e3)}},n.flexAnimate=function(e,t,a,s,o){if(n.vars.animationLoop||e===n.currentSlide||(n.direction=e>n.currentSlide?"next":"prev"),m&&1===n.pagingCount&&(n.direction=n.currentItem<e?"next":"prev"),!n.animating&&(n.canAdvance(e,o)||a)&&n.is(":visible")){if(m&&s){var l=$(n.vars.asNavFor).data("flexslider");if(n.atEnd=0===e||e===n.count-1,l.flexAnimate(e,!0,!1,!0,o),n.direction=n.currentItem<e?"next":"prev",l.direction=n.direction,Math.ceil((e+1)/n.visible)-1===n.currentSlide||0===e)return n.currentItem=e,n.slides.removeClass(i+"active-slide").eq(e).addClass(i+"active-slide"),!1;n.currentItem=e,n.slides.removeClass(i+"active-slide").eq(e).addClass(i+"active-slide"),e=Math.floor(e/n.visible)}if(n.animating=!0,n.animatingTo=e,t&&n.pause(),n.vars.before(n),n.syncExists&&!o&&f.sync("animate"),n.vars.controlNav&&f.controlNav.active(),v||n.slides.removeClass(i+"active-slide").eq(e).addClass(i+"active-slide"),n.atEnd=0===e||e===n.last,n.vars.directionNav&&f.directionNav.update(),e===n.last&&(n.vars.end(n),n.vars.animationLoop||n.pause()),p)r?(n.slides.eq(n.currentSlide).css({opacity:0,zIndex:1}),n.slides.eq(e).css({opacity:1,zIndex:2}),n.wrapup(c)):(n.slides.eq(n.currentSlide).css({zIndex:1}).animate({opacity:0},n.vars.animationSpeed,n.vars.easing),n.slides.eq(e).css({zIndex:2}).animate({opacity:1},n.vars.animationSpeed,n.vars.easing,n.wrapup));else{var c=d?n.slides.filter(":first").height():n.computedW,g,h,S;v?(g=n.vars.itemMargin,S=(n.itemW+g)*n.move*n.animatingTo,h=S>n.limit&&1!==n.visible?n.limit:S):h=0===n.currentSlide&&e===n.count-1&&n.vars.animationLoop&&"next"!==n.direction?u?(n.count+n.cloneOffset)*c:0:n.currentSlide===n.last&&0===e&&n.vars.animationLoop&&"prev"!==n.direction?u?0:(n.count+1)*c:u?(n.count-1-e+n.cloneOffset)*c:(e+n.cloneOffset)*c,n.setProps(h,"",n.vars.animationSpeed),n.transitions?(n.vars.animationLoop&&n.atEnd||(n.animating=!1,n.currentSlide=n.animatingTo),n.container.unbind("webkitTransitionEnd transitionend"),n.container.bind("webkitTransitionEnd transitionend",function(){clearTimeout(n.ensureAnimationEnd),n.wrapup(c)}),clearTimeout(n.ensureAnimationEnd),n.ensureAnimationEnd=setTimeout(function(){n.wrapup(c)},n.vars.animationSpeed+100)):n.container.animate(n.args,n.vars.animationSpeed,n.vars.easing,function(){n.wrapup(c)})}n.vars.smoothHeight&&f.smoothHeight(n.vars.animationSpeed)}},n.wrapup=function(e){p||v||(0===n.currentSlide&&n.animatingTo===n.last&&n.vars.animationLoop?n.setProps(e,"jumpEnd"):n.currentSlide===n.last&&0===n.animatingTo&&n.vars.animationLoop&&n.setProps(e,"jumpStart")),n.animating=!1,n.currentSlide=n.animatingTo,n.vars.after(n)},n.animateSlides=function(){!n.animating&&e&&n.flexAnimate(n.getTarget("next"))},n.pause=function(){clearInterval(n.animatedSlides),n.animatedSlides=null,n.playing=!1,n.vars.pausePlay&&f.pausePlay.update("play"),n.syncExists&&f.sync("pause")},n.play=function(){n.playing&&clearInterval(n.animatedSlides),n.animatedSlides=n.animatedSlides||setInterval(n.animateSlides,n.vars.slideshowSpeed),n.started=n.playing=!0,n.vars.pausePlay&&f.pausePlay.update("pause"),n.syncExists&&f.sync("play")},n.stop=function(){n.pause(),n.stopped=!0},n.canAdvance=function(e,t){var a=m?n.pagingCount-1:n.last;return t?!0:m&&n.currentItem===n.count-1&&0===e&&"prev"===n.direction?!0:m&&0===n.currentItem&&e===n.pagingCount-1&&"next"!==n.direction?!1:e!==n.currentSlide||m?n.vars.animationLoop?!0:n.atEnd&&0===n.currentSlide&&e===a&&"next"!==n.direction?!1:!n.atEnd||n.currentSlide!==a||0!==e||"next"!==n.direction:!1},n.getTarget=function(e){return n.direction=e,"next"===e?n.currentSlide===n.last?0:n.currentSlide+1:0===n.currentSlide?n.last:n.currentSlide-1},n.setProps=function(e,t,a){var i=function(){var a=e?e:(n.itemW+n.vars.itemMargin)*n.move*n.animatingTo,i=function(){if(v)return"setTouch"===t?e:u&&n.animatingTo===n.last?0:u?n.limit-(n.itemW+n.vars.itemMargin)*n.move*n.animatingTo:n.animatingTo===n.last?n.limit:a;switch(t){case"setTotal":return u?(n.count-1-n.currentSlide+n.cloneOffset)*e:(n.currentSlide+n.cloneOffset)*e;case"setTouch":return u?e:e;case"jumpEnd":return u?e:n.count*e;case"jumpStart":return u?n.count*e:e;default:return e}}();return-1*i+"px"}();n.transitions&&(i=d?"translate3d(0,"+i+",0)":"translate3d("+i+",0,0)",a=void 0!==a?a/1e3+"s":"0s",n.container.css("-"+n.pfx+"-transition-duration",a),n.container.css("transition-duration",a)),n.args[n.prop]=i,(n.transitions||void 0===a)&&n.container.css(n.args),n.container.css("transform",i)},n.setup=function(e){if(p)n.slides.css({width:"100%","float":"left",marginRight:"-100%",position:"relative"}),"init"===e&&(r?n.slides.css({opacity:0,display:"block",webkitTransition:"opacity "+n.vars.animationSpeed/1e3+"s ease",zIndex:1}).eq(n.currentSlide).css({opacity:1,zIndex:2}):0==n.vars.fadeFirstSlide?n.slides.css({opacity:0,display:"block",zIndex:1}).eq(n.currentSlide).css({zIndex:2}).css({opacity:1}):n.slides.css({opacity:0,display:"block",zIndex:1}).eq(n.currentSlide).css({zIndex:2}).animate({opacity:1},n.vars.animationSpeed,n.vars.easing)),n.vars.smoothHeight&&f.smoothHeight();else{var t,a;"init"===e&&(n.viewport=$('<div class="'+i+'viewport"></div>').css({overflow:"hidden",position:"relative"}).appendTo(n).append(n.container),n.cloneCount=0,n.cloneOffset=0,u&&(a=$.makeArray(n.slides).reverse(),n.slides=$(a),n.container.empty().append(n.slides))),n.vars.animationLoop&&!v&&(n.cloneCount=2,n.cloneOffset=1,"init"!==e&&n.container.find(".clone").remove(),n.container.append(f.uniqueID(n.slides.first().clone().addClass("clone")).attr("aria-hidden","true")).prepend(f.uniqueID(n.slides.last().clone().addClass("clone")).attr("aria-hidden","true"))),n.newSlides=$(n.vars.selector,n),t=u?n.count-1-n.currentSlide+n.cloneOffset:n.currentSlide+n.cloneOffset,d&&!v?(n.container.height(200*(n.count+n.cloneCount)+"%").css("position","absolute").width("100%"),setTimeout(function(){n.newSlides.css({display:"block"}),n.doMath(),n.viewport.height(n.h),n.setProps(t*n.h,"init")},"init"===e?100:0)):(n.container.width(200*(n.count+n.cloneCount)+"%"),n.setProps(t*n.computedW,"init"),setTimeout(function(){n.doMath(),n.newSlides.css({width:n.computedW,marginRight:n.computedM,"float":"left",display:"block"}),n.vars.smoothHeight&&f.smoothHeight()},"init"===e?100:0))}v||n.slides.removeClass(i+"active-slide").eq(n.currentSlide).addClass(i+"active-slide"),n.vars.init(n)},n.doMath=function(){var e=n.slides.first(),t=n.vars.itemMargin,a=n.vars.minItems,i=n.vars.maxItems;n.w=void 0===n.viewport?n.width():n.viewport.width(),n.h=e.height(),n.boxPadding=e.outerWidth()-e.width(),v?(n.itemT=n.vars.itemWidth+t,n.itemM=t,n.minW=a?a*n.itemT:n.w,n.maxW=i?i*n.itemT-t:n.w,n.itemW=n.minW>n.w?(n.w-t*(a-1))/a:n.maxW<n.w?(n.w-t*(i-1))/i:n.vars.itemWidth>n.w?n.w:n.vars.itemWidth,n.visible=Math.floor(n.w/n.itemW),n.move=n.vars.move>0&&n.vars.move<n.visible?n.vars.move:n.visible,n.pagingCount=Math.ceil((n.count-n.visible)/n.move+1),n.last=n.pagingCount-1,n.limit=1===n.pagingCount?0:n.vars.itemWidth>n.w?n.itemW*(n.count-1)+t*(n.count-1):(n.itemW+t)*n.count-n.w-t):(n.itemW=n.w,n.itemM=t,n.pagingCount=n.count,n.last=n.count-1),n.computedW=n.itemW-n.boxPadding,n.computedM=n.itemM},n.update=function(e,t){n.doMath(),v||(e<n.currentSlide?n.currentSlide+=1:e<=n.currentSlide&&0!==e&&(n.currentSlide-=1),n.animatingTo=n.currentSlide),n.vars.controlNav&&!n.manualControls&&("add"===t&&!v||n.pagingCount>n.controlNav.length?f.controlNav.update("add"):("remove"===t&&!v||n.pagingCount<n.controlNav.length)&&(v&&n.currentSlide>n.last&&(n.currentSlide-=1,n.animatingTo-=1),f.controlNav.update("remove",n.last))),n.vars.directionNav&&f.directionNav.update()},n.addSlide=function(e,t){var a=$(e);n.count+=1,n.last=n.count-1,d&&u?void 0!==t?n.slides.eq(n.count-t).after(a):n.container.prepend(a):void 0!==t?n.slides.eq(t).before(a):n.container.append(a),n.update(t,"add"),n.slides=$(n.vars.selector+":not(.clone)",n),n.setup(),n.vars.added(n)},n.removeSlide=function(e){var t=isNaN(e)?n.slides.index($(e)):e;n.count-=1,n.last=n.count-1,isNaN(e)?$(e,n.slides).remove():d&&u?n.slides.eq(n.last).remove():n.slides.eq(e).remove(),n.doMath(),n.update(t,"remove"),n.slides=$(n.vars.selector+":not(.clone)",n),n.setup(),n.vars.removed(n)},f.init()},$(window).blur(function(t){e=!1}).focus(function(t){e=!0}),$.flexslider.defaults={namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:!1,animationLoop:!0,smoothHeight:!1,startAt:0,slideshow:!0,slideshowSpeed:7e3,animationSpeed:600,initDelay:0,randomize:!1,fadeFirstSlide:!0,thumbCaptions:!1,pauseOnAction:!0,pauseOnHover:!1,pauseInvisible:!0,useCSS:!0,touch:!0,video:!1,controlNav:!0,directionNav:!0,prevText:"Previous",nextText:"Next",keyboard:!0,multipleKeyboard:!1,mousewheel:!1,pausePlay:!1,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",customDirectionNav:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:1,maxItems:0,move:0,allowOneSlide:!0,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){},init:function(){}},$.fn.flexslider=function(e){if(void 0===e&&(e={}),"object"==typeof e)return this.each(function(){var t=$(this),a=e.selector?e.selector:".slides > li",n=t.find(a);1===n.length&&e.allowOneSlide===!1||0===n.length?(n.fadeIn(400),e.start&&e.start(t)):void 0===t.data("flexslider")&&new $.flexslider(this,e)});var t=$(this).data("flexslider");switch(e){case"play":t.play();break;case"pause":t.pause();break;case"stop":t.stop();break;case"next":t.flexAnimate(t.getTarget("next"),!0);break;case"prev":case"previous":t.flexAnimate(t.getTarget("prev"),!0);break;default:"number"==typeof e&&t.flexAnimate(e,!0)}}}(jQuery);
/*! Magnific Popup - v1.1.0 - 2016-02-20
* http://dimsemenov.com/plugins/magnific-popup/
* Copyright (c) 2016 Dmitry Semenov; */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):window.jQuery||window.Zepto)}(function(a){var b,c,d,e,f,g,h="Close",i="BeforeClose",j="AfterClose",k="BeforeAppend",l="MarkupParse",m="Open",n="Change",o="mfp",p="."+o,q="mfp-ready",r="mfp-removing",s="mfp-prevent-close",t=function(){},u=!!window.jQuery,v=a(window),w=function(a,c){b.ev.on(o+a+p,c)},x=function(b,c,d,e){var f=document.createElement("div");return f.className="mfp-"+b,d&&(f.innerHTML=d),e?c&&c.appendChild(f):(f=a(f),c&&f.appendTo(c)),f},y=function(c,d){b.ev.triggerHandler(o+c,d),b.st.callbacks&&(c=c.charAt(0).toLowerCase()+c.slice(1),b.st.callbacks[c]&&b.st.callbacks[c].apply(b,a.isArray(d)?d:[d]))},z=function(c){return c===g&&b.currTemplate.closeBtn||(b.currTemplate.closeBtn=a(b.st.closeMarkup.replace("%title%",b.st.tClose)),g=c),b.currTemplate.closeBtn},A=function(){a.magnificPopup.instance||(b=new t,b.init(),a.magnificPopup.instance=b)},B=function(){var a=document.createElement("p").style,b=["ms","O","Moz","Webkit"];if(void 0!==a.transition)return!0;for(;b.length;)if(b.pop()+"Transition"in a)return!0;return!1};t.prototype={constructor:t,init:function(){var c=navigator.appVersion;b.isLowIE=b.isIE8=document.all&&!document.addEventListener,b.isAndroid=/android/gi.test(c),b.isIOS=/iphone|ipad|ipod/gi.test(c),b.supportsTransition=B(),b.probablyMobile=b.isAndroid||b.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),d=a(document),b.popupsCache={}},open:function(c){var e;if(c.isObj===!1){b.items=c.items.toArray(),b.index=0;var g,h=c.items;for(e=0;e<h.length;e++)if(g=h[e],g.parsed&&(g=g.el[0]),g===c.el[0]){b.index=e;break}}else b.items=a.isArray(c.items)?c.items:[c.items],b.index=c.index||0;if(b.isOpen)return void b.updateItemHTML();b.types=[],f="",c.mainEl&&c.mainEl.length?b.ev=c.mainEl.eq(0):b.ev=d,c.key?(b.popupsCache[c.key]||(b.popupsCache[c.key]={}),b.currTemplate=b.popupsCache[c.key]):b.currTemplate={},b.st=a.extend(!0,{},a.magnificPopup.defaults,c),b.fixedContentPos="auto"===b.st.fixedContentPos?!b.probablyMobile:b.st.fixedContentPos,b.st.modal&&(b.st.closeOnContentClick=!1,b.st.closeOnBgClick=!1,b.st.showCloseBtn=!1,b.st.enableEscapeKey=!1),b.bgOverlay||(b.bgOverlay=x("bg").on("click"+p,function(){b.close()}),b.wrap=x("wrap").attr("tabindex",-1).on("click"+p,function(a){b._checkIfClose(a.target)&&b.close()}),b.container=x("container",b.wrap)),b.contentContainer=x("content"),b.st.preloader&&(b.preloader=x("preloader",b.container,b.st.tLoading));var i=a.magnificPopup.modules;for(e=0;e<i.length;e++){var j=i[e];j=j.charAt(0).toUpperCase()+j.slice(1),b["init"+j].call(b)}y("BeforeOpen"),b.st.showCloseBtn&&(b.st.closeBtnInside?(w(l,function(a,b,c,d){c.close_replaceWith=z(d.type)}),f+=" mfp-close-btn-in"):b.wrap.append(z())),b.st.alignTop&&(f+=" mfp-align-top"),b.fixedContentPos?b.wrap.css({overflow:b.st.overflowY,overflowX:"hidden",overflowY:b.st.overflowY}):b.wrap.css({top:v.scrollTop(),position:"absolute"}),(b.st.fixedBgPos===!1||"auto"===b.st.fixedBgPos&&!b.fixedContentPos)&&b.bgOverlay.css({height:d.height(),position:"absolute"}),b.st.enableEscapeKey&&d.on("keyup"+p,function(a){27===a.keyCode&&b.close()}),v.on("resize"+p,function(){b.updateSize()}),b.st.closeOnContentClick||(f+=" mfp-auto-cursor"),f&&b.wrap.addClass(f);var k=b.wH=v.height(),n={};if(b.fixedContentPos&&b._hasScrollBar(k)){var o=b._getScrollbarSize();o&&(n.marginRight=o)}b.fixedContentPos&&(b.isIE7?a("body, html").css("overflow","hidden"):n.overflow="hidden");var r=b.st.mainClass;return b.isIE7&&(r+=" mfp-ie7"),r&&b._addClassToMFP(r),b.updateItemHTML(),y("BuildControls"),a("html").css(n),b.bgOverlay.add(b.wrap).prependTo(b.st.prependTo||a(document.body)),b._lastFocusedEl=document.activeElement,setTimeout(function(){b.content?(b._addClassToMFP(q),b._setFocus()):b.bgOverlay.addClass(q),d.on("focusin"+p,b._onFocusIn)},16),b.isOpen=!0,b.updateSize(k),y(m),c},close:function(){b.isOpen&&(y(i),b.isOpen=!1,b.st.removalDelay&&!b.isLowIE&&b.supportsTransition?(b._addClassToMFP(r),setTimeout(function(){b._close()},b.st.removalDelay)):b._close())},_close:function(){y(h);var c=r+" "+q+" ";if(b.bgOverlay.detach(),b.wrap.detach(),b.container.empty(),b.st.mainClass&&(c+=b.st.mainClass+" "),b._removeClassFromMFP(c),b.fixedContentPos){var e={marginRight:""};b.isIE7?a("body, html").css("overflow",""):e.overflow="",a("html").css(e)}d.off("keyup"+p+" focusin"+p),b.ev.off(p),b.wrap.attr("class","mfp-wrap").removeAttr("style"),b.bgOverlay.attr("class","mfp-bg"),b.container.attr("class","mfp-container"),!b.st.showCloseBtn||b.st.closeBtnInside&&b.currTemplate[b.currItem.type]!==!0||b.currTemplate.closeBtn&&b.currTemplate.closeBtn.detach(),b.st.autoFocusLast&&b._lastFocusedEl&&a(b._lastFocusedEl).focus(),b.currItem=null,b.content=null,b.currTemplate=null,b.prevHeight=0,y(j)},updateSize:function(a){if(b.isIOS){var c=document.documentElement.clientWidth/window.innerWidth,d=window.innerHeight*c;b.wrap.css("height",d),b.wH=d}else b.wH=a||v.height();b.fixedContentPos||b.wrap.css("height",b.wH),y("Resize")},updateItemHTML:function(){var c=b.items[b.index];b.contentContainer.detach(),b.content&&b.content.detach(),c.parsed||(c=b.parseEl(b.index));var d=c.type;if(y("BeforeChange",[b.currItem?b.currItem.type:"",d]),b.currItem=c,!b.currTemplate[d]){var f=b.st[d]?b.st[d].markup:!1;y("FirstMarkupParse",f),f?b.currTemplate[d]=a(f):b.currTemplate[d]=!0}e&&e!==c.type&&b.container.removeClass("mfp-"+e+"-holder");var g=b["get"+d.charAt(0).toUpperCase()+d.slice(1)](c,b.currTemplate[d]);b.appendContent(g,d),c.preloaded=!0,y(n,c),e=c.type,b.container.prepend(b.contentContainer),y("AfterChange")},appendContent:function(a,c){b.content=a,a?b.st.showCloseBtn&&b.st.closeBtnInside&&b.currTemplate[c]===!0?b.content.find(".mfp-close").length||b.content.append(z()):b.content=a:b.content="",y(k),b.container.addClass("mfp-"+c+"-holder"),b.contentContainer.append(b.content)},parseEl:function(c){var d,e=b.items[c];if(e.tagName?e={el:a(e)}:(d=e.type,e={data:e,src:e.src}),e.el){for(var f=b.types,g=0;g<f.length;g++)if(e.el.hasClass("mfp-"+f[g])){d=f[g];break}e.src=e.el.attr("data-mfp-src"),e.src||(e.src=e.el.attr("href"))}return e.type=d||b.st.type||"inline",e.index=c,e.parsed=!0,b.items[c]=e,y("ElementParse",e),b.items[c]},addGroup:function(a,c){var d=function(d){d.mfpEl=this,b._openClick(d,a,c)};c||(c={});var e="click.magnificPopup";c.mainEl=a,c.items?(c.isObj=!0,a.off(e).on(e,d)):(c.isObj=!1,c.delegate?a.off(e).on(e,c.delegate,d):(c.items=a,a.off(e).on(e,d)))},_openClick:function(c,d,e){var f=void 0!==e.midClick?e.midClick:a.magnificPopup.defaults.midClick;if(f||!(2===c.which||c.ctrlKey||c.metaKey||c.altKey||c.shiftKey)){var g=void 0!==e.disableOn?e.disableOn:a.magnificPopup.defaults.disableOn;if(g)if(a.isFunction(g)){if(!g.call(b))return!0}else if(v.width()<g)return!0;c.type&&(c.preventDefault(),b.isOpen&&c.stopPropagation()),e.el=a(c.mfpEl),e.delegate&&(e.items=d.find(e.delegate)),b.open(e)}},updateStatus:function(a,d){if(b.preloader){c!==a&&b.container.removeClass("mfp-s-"+c),d||"loading"!==a||(d=b.st.tLoading);var e={status:a,text:d};y("UpdateStatus",e),a=e.status,d=e.text,b.preloader.html(d),b.preloader.find("a").on("click",function(a){a.stopImmediatePropagation()}),b.container.addClass("mfp-s-"+a),c=a}},_checkIfClose:function(c){if(!a(c).hasClass(s)){var d=b.st.closeOnContentClick,e=b.st.closeOnBgClick;if(d&&e)return!0;if(!b.content||a(c).hasClass("mfp-close")||b.preloader&&c===b.preloader[0])return!0;if(c===b.content[0]||a.contains(b.content[0],c)){if(d)return!0}else if(e&&a.contains(document,c))return!0;return!1}},_addClassToMFP:function(a){b.bgOverlay.addClass(a),b.wrap.addClass(a)},_removeClassFromMFP:function(a){this.bgOverlay.removeClass(a),b.wrap.removeClass(a)},_hasScrollBar:function(a){return(b.isIE7?d.height():document.body.scrollHeight)>(a||v.height())},_setFocus:function(){(b.st.focus?b.content.find(b.st.focus).eq(0):b.wrap).focus()},_onFocusIn:function(c){return c.target===b.wrap[0]||a.contains(b.wrap[0],c.target)?void 0:(b._setFocus(),!1)},_parseMarkup:function(b,c,d){var e;d.data&&(c=a.extend(d.data,c)),y(l,[b,c,d]),a.each(c,function(c,d){if(void 0===d||d===!1)return!0;if(e=c.split("_"),e.length>1){var f=b.find(p+"-"+e[0]);if(f.length>0){var g=e[1];"replaceWith"===g?f[0]!==d[0]&&f.replaceWith(d):"img"===g?f.is("img")?f.attr("src",d):f.replaceWith(a("<img>").attr("src",d).attr("class",f.attr("class"))):f.attr(e[1],d)}}else b.find(p+"-"+c).html(d)})},_getScrollbarSize:function(){if(void 0===b.scrollbarSize){var a=document.createElement("div");a.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(a),b.scrollbarSize=a.offsetWidth-a.clientWidth,document.body.removeChild(a)}return b.scrollbarSize}},a.magnificPopup={instance:null,proto:t.prototype,modules:[],open:function(b,c){return A(),b=b?a.extend(!0,{},b):{},b.isObj=!0,b.index=c||0,this.instance.open(b)},close:function(){return a.magnificPopup.instance&&a.magnificPopup.instance.close()},registerModule:function(b,c){c.options&&(a.magnificPopup.defaults[b]=c.options),a.extend(this.proto,c.proto),this.modules.push(b)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&#215;</button>',tClose:"Close (Esc)",tLoading:"Loading...",autoFocusLast:!0}},a.fn.magnificPopup=function(c){A();var d=a(this);if("string"==typeof c)if("open"===c){var e,f=u?d.data("magnificPopup"):d[0].magnificPopup,g=parseInt(arguments[1],10)||0;f.items?e=f.items[g]:(e=d,f.delegate&&(e=e.find(f.delegate)),e=e.eq(g)),b._openClick({mfpEl:e},d,f)}else b.isOpen&&b[c].apply(b,Array.prototype.slice.call(arguments,1));else c=a.extend(!0,{},c),u?d.data("magnificPopup",c):d[0].magnificPopup=c,b.addGroup(d,c);return d};var C,D,E,F="inline",G=function(){E&&(D.after(E.addClass(C)).detach(),E=null)};a.magnificPopup.registerModule(F,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){b.types.push(F),w(h+"."+F,function(){G()})},getInline:function(c,d){if(G(),c.src){var e=b.st.inline,f=a(c.src);if(f.length){var g=f[0].parentNode;g&&g.tagName&&(D||(C=e.hiddenClass,D=x(C),C="mfp-"+C),E=f.after(D).detach().removeClass(C)),b.updateStatus("ready")}else b.updateStatus("error",e.tNotFound),f=a("<div>");return c.inlineElement=f,f}return b.updateStatus("ready"),b._parseMarkup(d,{},c),d}}});var H,I="ajax",J=function(){H&&a(document.body).removeClass(H)},K=function(){J(),b.req&&b.req.abort()};a.magnificPopup.registerModule(I,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){b.types.push(I),H=b.st.ajax.cursor,w(h+"."+I,K),w("BeforeChange."+I,K)},getAjax:function(c){H&&a(document.body).addClass(H),b.updateStatus("loading");var d=a.extend({url:c.src,success:function(d,e,f){var g={data:d,xhr:f};y("ParseAjax",g),b.appendContent(a(g.data),I),c.finished=!0,J(),b._setFocus(),setTimeout(function(){b.wrap.addClass(q)},16),b.updateStatus("ready"),y("AjaxContentAdded")},error:function(){J(),c.finished=c.loadError=!0,b.updateStatus("error",b.st.ajax.tError.replace("%url%",c.src))}},b.st.ajax.settings);return b.req=a.ajax(d),""}}});var L,M=function(c){if(c.data&&void 0!==c.data.title)return c.data.title;var d=b.st.image.titleSrc;if(d){if(a.isFunction(d))return d.call(b,c);if(c.el)return c.el.attr(d)||""}return""};a.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var c=b.st.image,d=".image";b.types.push("image"),w(m+d,function(){"image"===b.currItem.type&&c.cursor&&a(document.body).addClass(c.cursor)}),w(h+d,function(){c.cursor&&a(document.body).removeClass(c.cursor),v.off("resize"+p)}),w("Resize"+d,b.resizeImage),b.isLowIE&&w("AfterChange",b.resizeImage)},resizeImage:function(){var a=b.currItem;if(a&&a.img&&b.st.image.verticalFit){var c=0;b.isLowIE&&(c=parseInt(a.img.css("padding-top"),10)+parseInt(a.img.css("padding-bottom"),10)),a.img.css("max-height",b.wH-c)}},_onImageHasSize:function(a){a.img&&(a.hasSize=!0,L&&clearInterval(L),a.isCheckingImgSize=!1,y("ImageHasSize",a),a.imgHidden&&(b.content&&b.content.removeClass("mfp-loading"),a.imgHidden=!1))},findImageSize:function(a){var c=0,d=a.img[0],e=function(f){L&&clearInterval(L),L=setInterval(function(){return d.naturalWidth>0?void b._onImageHasSize(a):(c>200&&clearInterval(L),c++,void(3===c?e(10):40===c?e(50):100===c&&e(500)))},f)};e(1)},getImage:function(c,d){var e=0,f=function(){c&&(c.img[0].complete?(c.img.off(".mfploader"),c===b.currItem&&(b._onImageHasSize(c),b.updateStatus("ready")),c.hasSize=!0,c.loaded=!0,y("ImageLoadComplete")):(e++,200>e?setTimeout(f,100):g()))},g=function(){c&&(c.img.off(".mfploader"),c===b.currItem&&(b._onImageHasSize(c),b.updateStatus("error",h.tError.replace("%url%",c.src))),c.hasSize=!0,c.loaded=!0,c.loadError=!0)},h=b.st.image,i=d.find(".mfp-img");if(i.length){var j=document.createElement("img");j.className="mfp-img",c.el&&c.el.find("img").length&&(j.alt=c.el.find("img").attr("alt")),c.img=a(j).on("load.mfploader",f).on("error.mfploader",g),j.src=c.src,i.is("img")&&(c.img=c.img.clone()),j=c.img[0],j.naturalWidth>0?c.hasSize=!0:j.width||(c.hasSize=!1)}return b._parseMarkup(d,{title:M(c),img_replaceWith:c.img},c),b.resizeImage(),c.hasSize?(L&&clearInterval(L),c.loadError?(d.addClass("mfp-loading"),b.updateStatus("error",h.tError.replace("%url%",c.src))):(d.removeClass("mfp-loading"),b.updateStatus("ready")),d):(b.updateStatus("loading"),c.loading=!0,c.hasSize||(c.imgHidden=!0,d.addClass("mfp-loading"),b.findImageSize(c)),d)}}});var N,O=function(){return void 0===N&&(N=void 0!==document.createElement("p").style.MozTransform),N};a.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(a){return a.is("img")?a:a.find("img")}},proto:{initZoom:function(){var a,c=b.st.zoom,d=".zoom";if(c.enabled&&b.supportsTransition){var e,f,g=c.duration,j=function(a){var b=a.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),d="all "+c.duration/1e3+"s "+c.easing,e={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},f="transition";return e["-webkit-"+f]=e["-moz-"+f]=e["-o-"+f]=e[f]=d,b.css(e),b},k=function(){b.content.css("visibility","visible")};w("BuildControls"+d,function(){if(b._allowZoom()){if(clearTimeout(e),b.content.css("visibility","hidden"),a=b._getItemToZoom(),!a)return void k();f=j(a),f.css(b._getOffset()),b.wrap.append(f),e=setTimeout(function(){f.css(b._getOffset(!0)),e=setTimeout(function(){k(),setTimeout(function(){f.remove(),a=f=null,y("ZoomAnimationEnded")},16)},g)},16)}}),w(i+d,function(){if(b._allowZoom()){if(clearTimeout(e),b.st.removalDelay=g,!a){if(a=b._getItemToZoom(),!a)return;f=j(a)}f.css(b._getOffset(!0)),b.wrap.append(f),b.content.css("visibility","hidden"),setTimeout(function(){f.css(b._getOffset())},16)}}),w(h+d,function(){b._allowZoom()&&(k(),f&&f.remove(),a=null)})}},_allowZoom:function(){return"image"===b.currItem.type},_getItemToZoom:function(){return b.currItem.hasSize?b.currItem.img:!1},_getOffset:function(c){var d;d=c?b.currItem.img:b.st.zoom.opener(b.currItem.el||b.currItem);var e=d.offset(),f=parseInt(d.css("padding-top"),10),g=parseInt(d.css("padding-bottom"),10);e.top-=a(window).scrollTop()-f;var h={width:d.width(),height:(u?d.innerHeight():d[0].offsetHeight)-g-f};return O()?h["-moz-transform"]=h.transform="translate("+e.left+"px,"+e.top+"px)":(h.left=e.left,h.top=e.top),h}}});var P="iframe",Q="//about:blank",R=function(a){if(b.currTemplate[P]){var c=b.currTemplate[P].find("iframe");c.length&&(a||(c[0].src=Q),b.isIE8&&c.css("display",a?"block":"none"))}};a.magnificPopup.registerModule(P,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){b.types.push(P),w("BeforeChange",function(a,b,c){b!==c&&(b===P?R():c===P&&R(!0))}),w(h+"."+P,function(){R()})},getIframe:function(c,d){var e=c.src,f=b.st.iframe;a.each(f.patterns,function(){return e.indexOf(this.index)>-1?(this.id&&(e="string"==typeof this.id?e.substr(e.lastIndexOf(this.id)+this.id.length,e.length):this.id.call(this,e)),e=this.src.replace("%id%",e),!1):void 0});var g={};return f.srcAction&&(g[f.srcAction]=e),b._parseMarkup(d,g,c),b.updateStatus("ready"),d}}});var S=function(a){var c=b.items.length;return a>c-1?a-c:0>a?c+a:a},T=function(a,b,c){return a.replace(/%curr%/gi,b+1).replace(/%total%/gi,c)};a.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var c=b.st.gallery,e=".mfp-gallery";return b.direction=!0,c&&c.enabled?(f+=" mfp-gallery",w(m+e,function(){c.navigateByImgClick&&b.wrap.on("click"+e,".mfp-img",function(){return b.items.length>1?(b.next(),!1):void 0}),d.on("keydown"+e,function(a){37===a.keyCode?b.prev():39===a.keyCode&&b.next()})}),w("UpdateStatus"+e,function(a,c){c.text&&(c.text=T(c.text,b.currItem.index,b.items.length))}),w(l+e,function(a,d,e,f){var g=b.items.length;e.counter=g>1?T(c.tCounter,f.index,g):""}),w("BuildControls"+e,function(){if(b.items.length>1&&c.arrows&&!b.arrowLeft){var d=c.arrowMarkup,e=b.arrowLeft=a(d.replace(/%title%/gi,c.tPrev).replace(/%dir%/gi,"left")).addClass(s),f=b.arrowRight=a(d.replace(/%title%/gi,c.tNext).replace(/%dir%/gi,"right")).addClass(s);e.click(function(){b.prev()}),f.click(function(){b.next()}),b.container.append(e.add(f))}}),w(n+e,function(){b._preloadTimeout&&clearTimeout(b._preloadTimeout),b._preloadTimeout=setTimeout(function(){b.preloadNearbyImages(),b._preloadTimeout=null},16)}),void w(h+e,function(){d.off(e),b.wrap.off("click"+e),b.arrowRight=b.arrowLeft=null})):!1},next:function(){b.direction=!0,b.index=S(b.index+1),b.updateItemHTML()},prev:function(){b.direction=!1,b.index=S(b.index-1),b.updateItemHTML()},goTo:function(a){b.direction=a>=b.index,b.index=a,b.updateItemHTML()},preloadNearbyImages:function(){var a,c=b.st.gallery.preload,d=Math.min(c[0],b.items.length),e=Math.min(c[1],b.items.length);for(a=1;a<=(b.direction?e:d);a++)b._preloadItem(b.index+a);for(a=1;a<=(b.direction?d:e);a++)b._preloadItem(b.index-a)},_preloadItem:function(c){if(c=S(c),!b.items[c].preloaded){var d=b.items[c];d.parsed||(d=b.parseEl(c)),y("LazyLoad",d),"image"===d.type&&(d.img=a('<img class="mfp-img" />').on("load.mfploader",function(){d.hasSize=!0}).on("error.mfploader",function(){d.hasSize=!0,d.loadError=!0,y("LazyLoadError",d)}).attr("src",d.src)),d.preloaded=!0}}}});var U="retina";a.magnificPopup.registerModule(U,{options:{replaceSrc:function(a){return a.src.replace(/\.\w+$/,function(a){return"@2x"+a})},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var a=b.st.retina,c=a.ratio;c=isNaN(c)?c():c,c>1&&(w("ImageHasSize."+U,function(a,b){b.img.css({"max-width":b.img[0].naturalWidth/c,width:"100%"})}),w("ElementParse."+U,function(b,d){d.src=a.replaceSrc(d,c)}))}}}}),A()});
/*
 * Nivo Lightbox v1.3.1
 * http://dev7studios.com/nivo-lightbox
 *
 * Copyright 2013, Dev7studios
 * Free to use and abuse under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 */
!function(t,i,o,e){function n(i,o){this.el=i,this.$el=t(this.el),this.options=t.extend({},l,o),this._defaults=l,this._name=a,this.init()}var a="nivoLightbox",l={effect:"fade",theme:"default",keyboardNav:!0,clickImgToClose:!1,clickOverlayToClose:!0,onInit:function(){},beforeShowLightbox:function(){},afterShowLightbox:function(t){},beforeHideLightbox:function(){},afterHideLightbox:function(){},beforePrev:function(t){},onPrev:function(t){},beforeNext:function(t){},onNext:function(t){},errorMessage:"The requested content cannot be loaded. Please try again later."};n.prototype={init:function(){var i=this;t("html").hasClass("nivo-lightbox-notouch")||t("html").addClass("nivo-lightbox-notouch"),"ontouchstart"in o&&t("html").removeClass("nivo-lightbox-notouch"),this.$el.on("click",function(t){i.showLightbox(t)}),this.options.keyboardNav&&t("body").off("keyup").on("keyup",function(o){var e=o.keyCode?o.keyCode:o.which;27==e&&i.destructLightbox(),37==e&&t(".nivo-lightbox-prev").trigger("click"),39==e&&t(".nivo-lightbox-next").trigger("click")}),this.options.onInit.call(this)},showLightbox:function(i){var o=this,e=this.$el,n=this.checkContent(e);if(n){i.preventDefault(),this.options.beforeShowLightbox.call(this);var a=this.constructLightbox();if(a){var l=a.find(".nivo-lightbox-content");if(l){if(t("body").addClass("nivo-lightbox-body-effect-"+this.options.effect),this.processContent(l,e),this.$el.attr("data-lightbox-gallery")){var h=t('[data-lightbox-gallery="'+this.$el.attr("data-lightbox-gallery")+'"]');t(".nivo-lightbox-nav").show(),t(".nivo-lightbox-prev").off("click").on("click",function(i){i.preventDefault();var n=h.index(e);e=h.eq(n-1),t(e).length||(e=h.last()),t.when(o.options.beforePrev.call(this,[e])).done(function(){o.processContent(l,e),o.options.onPrev.call(this,[e])})}),t(".nivo-lightbox-next").off("click").on("click",function(i){i.preventDefault();var n=h.index(e);e=h.eq(n+1),t(e).length||(e=h.first()),t.when(o.options.beforeNext.call(this,[e])).done(function(){o.processContent(l,e),o.options.onNext.call(this,[e])})})}setTimeout(function(){a.addClass("nivo-lightbox-open"),o.options.afterShowLightbox.call(this,[a])},1)}}}},checkContent:function(t){var i=t.attr("href"),o=i.match(/(youtube|youtube-nocookie|youtu|vimeo)\.(com|be)\/(watch\?v=([\w-]+)|([\w-]+))/);return null!==i.match(/\.(jpeg|jpg|gif|png)$/i)||(!!o||("ajax"==t.attr("data-lightbox-type")||("#"==i.substring(0,1)&&"inline"==t.attr("data-lightbox-type")||"iframe"==t.attr("data-lightbox-type"))))},processContent:function(o,e){var n=this,a=e.attr("href"),l=a.match(/(youtube|youtube-nocookie|youtu|vimeo)\.(com|be)\/(watch\?v=([\w-]+)|([\w-]+))/);if(o.html("").addClass("nivo-lightbox-loading"),this.isHidpi()&&e.attr("data-lightbox-hidpi")&&(a=e.attr("data-lightbox-hidpi")),null!==a.match(/\.(jpeg|jpg|gif|png)$/i)){var h=t("<img>",{src:a,class:"nivo-lightbox-image-display"});h.one("load",function(){var e=t('<div class="nivo-lightbox-image" />');e.append(h),o.html(e).removeClass("nivo-lightbox-loading"),e.css({"line-height":t(".nivo-lightbox-content").height()+"px",height:t(".nivo-lightbox-content").height()+"px"}),t(i).resize(function(){e.css({"line-height":t(".nivo-lightbox-content").height()+"px",height:t(".nivo-lightbox-content").height()+"px"})})}).each(function(){this.complete&&t(this).load()}),h.error(function(){var i=t('<div class="nivo-lightbox-error"><p>'+n.options.errorMessage+"</p></div>");o.html(i).removeClass("nivo-lightbox-loading")})}else if(l){var s="",r="nivo-lightbox-video";if("youtube"==l[1]&&(s="//www.youtube.com/embed/"+l[4],r="nivo-lightbox-youtube"),"youtube-nocookie"==l[1]&&(s=a,r="nivo-lightbox-youtube"),"youtu"==l[1]&&(s="//www.youtube.com/embed/"+l[3],r="nivo-lightbox-youtube"),"vimeo"==l[1]&&(s="//player.vimeo.com/video/"+l[3],r="nivo-lightbox-vimeo"),s){var c=t("<iframe>",{src:s,class:r,frameborder:0,vspace:0,hspace:0,scrolling:"auto"});o.html(c),c.load(function(){o.removeClass("nivo-lightbox-loading")})}}else if("ajax"==e.attr("data-lightbox-type"))t.ajax({url:a,cache:!1,success:function(e){var n=t('<div class="nivo-lightbox-ajax" />');n.append(e),o.html(n).removeClass("nivo-lightbox-loading"),n.outerHeight()<o.height()&&n.css({position:"relative",top:"50%","margin-top":-(n.outerHeight()/2)+"px"}),t(i).resize(function(){n.outerHeight()<o.height()&&n.css({position:"relative",top:"50%","margin-top":-(n.outerHeight()/2)+"px"})})},error:function(){var i=t('<div class="nivo-lightbox-error"><p>'+n.options.errorMessage+"</p></div>");o.html(i).removeClass("nivo-lightbox-loading")}});else if("#"==a.substring(0,1)&&"inline"==e.attr("data-lightbox-type"))if(t(a).length){var g=t('<div class="nivo-lightbox-inline" />');g.append(t(a).clone().show()),o.html(g).removeClass("nivo-lightbox-loading"),g.outerHeight()<o.height()&&g.css({position:"relative",top:"50%","margin-top":-(g.outerHeight()/2)+"px"}),t(i).resize(function(){g.outerHeight()<o.height()&&g.css({position:"relative",top:"50%","margin-top":-(g.outerHeight()/2)+"px"})})}else{var v=t('<div class="nivo-lightbox-error"><p>'+n.options.errorMessage+"</p></div>");o.html(v).removeClass("nivo-lightbox-loading")}else{if("iframe"!=e.attr("data-lightbox-type"))return!1;var b=t("<iframe>",{src:a,class:"nivo-lightbox-item",frameborder:0,vspace:0,hspace:0,scrolling:"auto"});o.html(b),b.load(function(){o.removeClass("nivo-lightbox-loading")})}if(e.attr("title")){var x=t("<span>",{class:"nivo-lightbox-title"});x.text(e.attr("title")),t(".nivo-lightbox-title-wrap").html(x)}else t(".nivo-lightbox-title-wrap").html("")},constructLightbox:function(){if(t(".nivo-lightbox-overlay").length)return t(".nivo-lightbox-overlay");var i=t("<div>",{class:"nivo-lightbox-overlay nivo-lightbox-theme-"+this.options.theme+" nivo-lightbox-effect-"+this.options.effect}),o=t("<div>",{class:"nivo-lightbox-wrap"}),e=t("<div>",{class:"nivo-lightbox-content"}),n=t('<a href="#" class="nivo-lightbox-nav nivo-lightbox-prev">Previous</a><a href="#" class="nivo-lightbox-nav nivo-lightbox-next">Next</a>'),a=t('<a href="#" class="nivo-lightbox-close" title="Close">Close</a>'),l=t("<div>",{class:"nivo-lightbox-title-wrap"}),h=/*@cc_on!@*/0;h&&i.addClass("nivo-lightbox-ie"),o.append(e),o.append(l),i.append(o),i.append(n),i.append(a),t("body").append(i);var s=this;return s.options.clickOverlayToClose&&i.on("click",function(i){(i.target===this||t(i.target).hasClass("nivo-lightbox-content")||t(i.target).hasClass("nivo-lightbox-image"))&&s.destructLightbox()}),s.options.clickImgToClose&&i.on("click",function(i){(i.target===this||t(i.target).hasClass("nivo-lightbox-image-display"))&&s.destructLightbox()}),a.on("click",function(t){t.preventDefault(),s.destructLightbox()}),i},destructLightbox:function(){var i=this;this.options.beforeHideLightbox.call(this),t(".nivo-lightbox-overlay").removeClass("nivo-lightbox-open"),t(".nivo-lightbox-nav").hide(),t("body").removeClass("nivo-lightbox-body-effect-"+i.options.effect);var o=/*@cc_on!@*/0;o&&(t(".nivo-lightbox-overlay iframe").attr("src"," "),t(".nivo-lightbox-overlay iframe").remove()),t(".nivo-lightbox-prev").off("click"),t(".nivo-lightbox-next").off("click"),t(".nivo-lightbox-content").empty(),this.options.afterHideLightbox.call(this)},isHidpi:function(){var t="(-webkit-min-device-pixel-ratio: 1.5),                              (min--moz-device-pixel-ratio: 1.5),                              (-o-min-device-pixel-ratio: 3/2),                              (min-resolution: 1.5dppx)";return i.devicePixelRatio>1||!(!i.matchMedia||!i.matchMedia(t).matches)}},t.fn[a]=function(i){return this.each(function(){t.data(this,a)||t.data(this,a,new n(this,i))})}}(jQuery,window,document);
/*! menuFullpage - v1.0.0 - 2015-03-26
* https://github.com/rottenstudios/menufullpage
* Copyright (c) 2015 Carmelo Catalfamo - rottenStudios.it */
!function(a){"use strict";a.fn.menufullpage=function(b){var c=a.extend({menu:"#fullpage-nav",push:".push",side:"left",menuWidth:"100%",speed:"400",activeBtn:"menu-open"},b),d=this,e=a(c.menu),f=a(c.push),g=c.menuWidth,h={position:"fixed",top:"0",bottom:"0","settings.side":"-"+c.menuWidth,width:c.menuWidth,height:"100%"},i={"-webkit-transition":c.side+" "+c.speed+"ms ease","-moz-transition":c.side+" "+c.speed+"ms ease","-ms-transition":c.side+" "+c.speed+"ms ease","-o-transition":c.side+" "+c.speed+"ms ease",transition:c.side+" "+c.speed+"ms ease"};return e.css(h),f.css(c.side,"0"),e.css(i),f.css(i),e._state="closed",e.open=function(){e._state="open",e.css(c.side,"0"),f.css(c.side,g),d.addClass(c.activeBtn)},e.close=function(){e._state="closed",e.css(c.side,"-"+g),f.css(c.side,"0"),d.removeClass(c.activeBtn)},a(document).on("click.menufullpage",function(b){a(b.target).parents().andSelf().is(d)||"open"!==e._state||(e.close(),d.removeClass(c.activeBtn))}),d.on("click.menufullpage",function(a){a.preventDefault(),"closed"===e._state?e.open():e.close()}),d.on("touchend",function(a){d.trigger("click.menufullpage"),a.preventDefault()}),e}}(jQuery);!function(e,t){"function"==typeof define&&define.amd?define("smoothScroll",t(e)):"object"==typeof exports?module.exports=t(e):e.smoothScroll=t(e)}(window||this,function(e){"use strict";var t,n,o,r={},a=!!document.querySelector&&!!e.addEventListener,c={speed:500,easing:"easeInOutCubic",offset:0,updateURL:!0,callbackBefore:function(){},callbackAfter:function(){}},u=function(e,t,n){if("[object Object]"===Object.prototype.toString.call(e))for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(n,e[o],o,e);else for(var r=0,a=e.length;a>r;r++)t.call(n,e[r],r,e)},i=function(e,t){var n={};return u(e,function(t,o){n[o]=e[o]}),u(t,function(e,o){n[o]=t[o]}),n},l=function(e,t){for(var n=t.charAt(0);e&&e!==document;e=e.parentNode)if("."===n){if(e.classList.contains(t.substr(1)))return e}else if("#"===n){if(e.id===t.substr(1))return e}else if("["===n&&e.hasAttribute(t.substr(1,t.length-2)))return e;return!1},s=function(e){return Math.max(e.scrollHeight,e.offsetHeight,e.clientHeight)},f=function(e){for(var t,n=String(e),o=n.length,r=-1,a="",c=n.charCodeAt(0);++r<o;){if(t=n.charCodeAt(r),0===t)throw new InvalidCharacterError("Invalid character: the input contains U+0000.");a+=t>=1&&31>=t||127==t||0===r&&t>=48&&57>=t||1===r&&t>=48&&57>=t&&45===c?"\\"+t.toString(16)+" ":t>=128||45===t||95===t||t>=48&&57>=t||t>=65&&90>=t||t>=97&&122>=t?n.charAt(r):"\\"+n.charAt(r)}return a},d=function(e,t){var n;return"easeInQuad"===e&&(n=t*t),"easeOutQuad"===e&&(n=t*(2-t)),"easeInOutQuad"===e&&(n=.5>t?2*t*t:-1+(4-2*t)*t),"easeInCubic"===e&&(n=t*t*t),"easeOutCubic"===e&&(n=--t*t*t+1),"easeInOutCubic"===e&&(n=.5>t?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1),"easeInQuart"===e&&(n=t*t*t*t),"easeOutQuart"===e&&(n=1- --t*t*t*t),"easeInOutQuart"===e&&(n=.5>t?8*t*t*t*t:1-8*--t*t*t*t),"easeInQuint"===e&&(n=t*t*t*t*t),"easeOutQuint"===e&&(n=1+--t*t*t*t*t),"easeInOutQuint"===e&&(n=.5>t?16*t*t*t*t*t:1+16*--t*t*t*t*t),n||t},h=function(e,t,n){var o=0;if(e.offsetParent)do o+=e.offsetTop,e=e.offsetParent;while(e);return o=o-t-n,o>=0?o:0},m=function(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)},p=function(e){return e&&"object"==typeof JSON&&"function"==typeof JSON.parse?JSON.parse(e):{}},v=function(t,n){history.pushState&&(n||"true"===n)&&history.pushState(null,null,[e.location.protocol,"//",e.location.host,e.location.pathname,e.location.search,t].join(""))};r.animateScroll=function(t,n,r){var a=i(a||c,r||{}),u=p(t?t.getAttribute("data-options"):null);a=i(a,u),n="#"+f(n.substr(1));var l="#"===n?document.documentElement:document.querySelector(n),g=e.pageYOffset;o||(o=document.querySelector("[data-scroll-header]"));var b,O,y,S=null===o?0:s(o)+o.offsetTop,I=h(l,S,parseInt(a.offset,10)),H=I-g,E=m(),A=0;v(n,a.updateURL);var L=function(o,r,c){var u=e.pageYOffset;(o==r||u==r||e.innerHeight+u>=E)&&(clearInterval(c),l.focus(),a.callbackAfter(t,n))},Q=function(){A+=16,O=A/parseInt(a.speed,10),O=O>1?1:O,y=g+H*d(a.easing,O),e.scrollTo(0,Math.floor(y)),L(y,I,b)},C=function(){a.callbackBefore(t,n),b=setInterval(Q,16)};0===e.pageYOffset&&e.scrollTo(0,0),C()};var g=function(e){var n=l(e.target,"[data-scroll]");n&&"a"===n.tagName.toLowerCase()&&(e.preventDefault(),r.animateScroll(n,n.hash,t))},b=function(){n||(n=setTimeout(function(){n=null,headerHeight=null===o?0:s(o)+o.offsetTop},66))};return r.destroy=function(){t&&(document.removeEventListener("click",g,!1),e.removeEventListener("resize",b,!1),t=null,n=null,o=null)},r.init=function(n){a&&(r.destroy(),t=i(c,n||{}),o=document.querySelector("[data-scroll-header]"),document.addEventListener("click",g,!1),o&&e.addEventListener("resize",b,!1))},r});

/**
 * Owl Carousel v2.3.0
 * Copyright 2013-2017 David Deutsch
 * Licensed under  ()
 */
!function(a,b,c,d){function e(b,c){this.settings=null,this.options=a.extend({},e.Defaults,c),this.$element=a(b),this._handlers={},this._plugins={},this._supress={},this._current=null,this._speed=null,this._coordinates=[],this._breakpoint=null,this._width=null,this._items=[],this._clones=[],this._mergers=[],this._widths=[],this._invalidated={},this._pipe=[],this._drag={time:null,target:null,pointer:null,stage:{start:null,current:null},direction:null},this._states={current:{},tags:{initializing:["busy"],animating:["busy"],dragging:["interacting"]}},a.each(["onResize","onThrottledResize"],a.proxy(function(b,c){this._handlers[c]=a.proxy(this[c],this)},this)),a.each(e.Plugins,a.proxy(function(a,b){this._plugins[a.charAt(0).toLowerCase()+a.slice(1)]=new b(this)},this)),a.each(e.Workers,a.proxy(function(b,c){this._pipe.push({filter:c.filter,run:a.proxy(c.run,this)})},this)),this.setup(),this.initialize()}e.Defaults={items:3,loop:!1,center:!1,rewind:!1,mouseDrag:!0,touchDrag:!0,pullDrag:!0,freeDrag:!1,margin:0,stagePadding:0,merge:!1,mergeFit:!0,autoWidth:!1,startPosition:0,rtl:!1,smartSpeed:250,fluidSpeed:!1,dragEndSpeed:!1,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:b,fallbackEasing:"swing",info:!1,nestedItemSelector:!1,itemElement:"div",stageElement:"div",refreshClass:"owl-refresh",loadedClass:"owl-loaded",loadingClass:"owl-loading",rtlClass:"owl-rtl",responsiveClass:"owl-responsive",dragClass:"owl-drag",itemClass:"owl-item",stageClass:"owl-stage",stageOuterClass:"owl-stage-outer",grabClass:"owl-grab"},e.Width={Default:"default",Inner:"inner",Outer:"outer"},e.Type={Event:"event",State:"state"},e.Plugins={},e.Workers=[{filter:["width","settings"],run:function(){this._width=this.$element.width()}},{filter:["width","items","settings"],run:function(a){a.current=this._items&&this._items[this.relative(this._current)]}},{filter:["items","settings"],run:function(){this.$stage.children(".cloned").remove()}},{filter:["width","items","settings"],run:function(a){var b=this.settings.margin||"",c=!this.settings.autoWidth,d=this.settings.rtl,e={width:"auto","margin-left":d?b:"","margin-right":d?"":b};!c&&this.$stage.children().css(e),a.css=e}},{filter:["width","items","settings"],run:function(a){var b=(this.width()/this.settings.items).toFixed(3)-this.settings.margin,c=null,d=this._items.length,e=!this.settings.autoWidth,f=[];for(a.items={merge:!1,width:b};d--;)c=this._mergers[d],c=this.settings.mergeFit&&Math.min(c,this.settings.items)||c,a.items.merge=c>1||a.items.merge,f[d]=e?b*c:this._items[d].width();this._widths=f}},{filter:["items","settings"],run:function(){var b=[],c=this._items,d=this.settings,e=Math.max(2*d.items,4),f=2*Math.ceil(c.length/2),g=d.loop&&c.length?d.rewind?e:Math.max(e,f):0,h="",i="";for(g/=2;g>0;)b.push(this.normalize(b.length/2,!0)),h+=c[b[b.length-1]][0].outerHTML,b.push(this.normalize(c.length-1-(b.length-1)/2,!0)),i=c[b[b.length-1]][0].outerHTML+i,g-=1;this._clones=b,a(h).addClass("cloned").appendTo(this.$stage),a(i).addClass("cloned").prependTo(this.$stage)}},{filter:["width","items","settings"],run:function(){for(var a=this.settings.rtl?1:-1,b=this._clones.length+this._items.length,c=-1,d=0,e=0,f=[];++c<b;)d=f[c-1]||0,e=this._widths[this.relative(c)]+this.settings.margin,f.push(d+e*a);this._coordinates=f}},{filter:["width","items","settings"],run:function(){var a=this.settings.stagePadding,b=this._coordinates,c={width:Math.ceil(Math.abs(b[b.length-1]))+2*a,"padding-left":a||"","padding-right":a||""};this.$stage.css(c)}},{filter:["width","items","settings"],run:function(a){var b=this._coordinates.length,c=!this.settings.autoWidth,d=this.$stage.children();if(c&&a.items.merge)for(;b--;)a.css.width=this._widths[this.relative(b)],d.eq(b).css(a.css);else c&&(a.css.width=a.items.width,d.css(a.css))}},{filter:["items"],run:function(){this._coordinates.length<1&&this.$stage.removeAttr("style")}},{filter:["width","items","settings"],run:function(a){a.current=a.current?this.$stage.children().index(a.current):0,a.current=Math.max(this.minimum(),Math.min(this.maximum(),a.current)),this.reset(a.current)}},{filter:["position"],run:function(){this.animate(this.coordinates(this._current))}},{filter:["width","position","items","settings"],run:function(){var a,b,c,d,e=this.settings.rtl?1:-1,f=2*this.settings.stagePadding,g=this.coordinates(this.current())+f,h=g+this.width()*e,i=[];for(c=0,d=this._coordinates.length;d>c;c++)a=this._coordinates[c-1]||0,b=Math.abs(this._coordinates[c])+f*e,(this.op(a,"<=",g)&&this.op(a,">",h)||this.op(b,"<",g)&&this.op(b,">",h))&&i.push(c);this.$stage.children(".active").removeClass("active"),this.$stage.children(":eq("+i.join("), :eq(")+")").addClass("active"),this.$stage.children(".center").removeClass("center"),this.settings.center&&this.$stage.children().eq(this.current()).addClass("center")}}],e.prototype.initialize=function(){if(this.enter("initializing"),this.trigger("initialize"),this.$element.toggleClass(this.settings.rtlClass,this.settings.rtl),this.settings.autoWidth&&!this.is("pre-loading")){var b,c,e;b=this.$element.find("img"),c=this.settings.nestedItemSelector?"."+this.settings.nestedItemSelector:d,e=this.$element.children(c).width(),b.length&&0>=e&&this.preloadAutoWidthImages(b)}this.$element.addClass(this.options.loadingClass),this.$stage=a("<"+this.settings.stageElement+' class="'+this.settings.stageClass+'"/>').wrap('<div class="'+this.settings.stageOuterClass+'"/>'),this.$element.append(this.$stage.parent()),this.replace(this.$element.children().not(this.$stage.parent())),this.$element.is(":visible")?this.refresh():this.invalidate("width"),this.$element.removeClass(this.options.loadingClass).addClass(this.options.loadedClass),this.registerEventHandlers(),this.leave("initializing"),this.trigger("initialized")},e.prototype.setup=function(){var b=this.viewport(),c=this.options.responsive,d=-1,e=null;c?(a.each(c,function(a){b>=a&&a>d&&(d=Number(a))}),e=a.extend({},this.options,c[d]),"function"==typeof e.stagePadding&&(e.stagePadding=e.stagePadding()),delete e.responsive,e.responsiveClass&&this.$element.attr("class",this.$element.attr("class").replace(new RegExp("("+this.options.responsiveClass+"-)\\S+\\s","g"),"$1"+d))):e=a.extend({},this.options),this.trigger("change",{property:{name:"settings",value:e}}),this._breakpoint=d,this.settings=e,this.invalidate("settings"),this.trigger("changed",{property:{name:"settings",value:this.settings}})},e.prototype.optionsLogic=function(){this.settings.autoWidth&&(this.settings.stagePadding=!1,this.settings.merge=!1)},e.prototype.prepare=function(b){var c=this.trigger("prepare",{content:b});return c.data||(c.data=a("<"+this.settings.itemElement+"/>").addClass(this.options.itemClass).append(b)),this.trigger("prepared",{content:c.data}),c.data},e.prototype.update=function(){for(var b=0,c=this._pipe.length,d=a.proxy(function(a){return this[a]},this._invalidated),e={};c>b;)(this._invalidated.all||a.grep(this._pipe[b].filter,d).length>0)&&this._pipe[b].run(e),b++;this._invalidated={},!this.is("valid")&&this.enter("valid")},e.prototype.width=function(a){switch(a=a||e.Width.Default){case e.Width.Inner:case e.Width.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+this.settings.margin}},e.prototype.refresh=function(){this.enter("refreshing"),this.trigger("refresh"),this.setup(),this.optionsLogic(),this.$element.addClass(this.options.refreshClass),this.update(),this.$element.removeClass(this.options.refreshClass),this.leave("refreshing"),this.trigger("refreshed")},e.prototype.onThrottledResize=function(){b.clearTimeout(this.resizeTimer),this.resizeTimer=b.setTimeout(this._handlers.onResize,this.settings.responsiveRefreshRate)},e.prototype.onResize=function(){return this._items.length?this._width===this.$element.width()?!1:this.$element.is(":visible")?(this.enter("resizing"),this.trigger("resize").isDefaultPrevented()?(this.leave("resizing"),!1):(this.invalidate("width"),this.refresh(),this.leave("resizing"),void this.trigger("resized"))):!1:!1},e.prototype.registerEventHandlers=function(){a.support.transition&&this.$stage.on(a.support.transition.end+".owl.core",a.proxy(this.onTransitionEnd,this)),this.settings.responsive!==!1&&this.on(b,"resize",this._handlers.onThrottledResize),this.settings.mouseDrag&&(this.$element.addClass(this.options.dragClass),this.$stage.on("mousedown.owl.core",a.proxy(this.onDragStart,this)),this.$stage.on("dragstart.owl.core selectstart.owl.core",function(){return!1})),this.settings.touchDrag&&(this.$stage.on("touchstart.owl.core",a.proxy(this.onDragStart,this)),this.$stage.on("touchcancel.owl.core",a.proxy(this.onDragEnd,this)))},e.prototype.onDragStart=function(b){var d=null;3!==b.which&&(a.support.transform?(d=this.$stage.css("transform").replace(/.*\(|\)| /g,"").split(","),d={x:d[16===d.length?12:4],y:d[16===d.length?13:5]}):(d=this.$stage.position(),d={x:this.settings.rtl?d.left+this.$stage.width()-this.width()+this.settings.margin:d.left,y:d.top}),this.is("animating")&&(a.support.transform?this.animate(d.x):this.$stage.stop(),this.invalidate("position")),this.$element.toggleClass(this.options.grabClass,"mousedown"===b.type),this.speed(0),this._drag.time=(new Date).getTime(),this._drag.target=a(b.target),this._drag.stage.start=d,this._drag.stage.current=d,this._drag.pointer=this.pointer(b),a(c).on("mouseup.owl.core touchend.owl.core",a.proxy(this.onDragEnd,this)),a(c).one("mousemove.owl.core touchmove.owl.core",a.proxy(function(b){var d=this.difference(this._drag.pointer,this.pointer(b));a(c).on("mousemove.owl.core touchmove.owl.core",a.proxy(this.onDragMove,this)),Math.abs(d.x)<Math.abs(d.y)&&this.is("valid")||(b.preventDefault(),this.enter("dragging"),this.trigger("drag"))},this)))},e.prototype.onDragMove=function(a){var b=null,c=null,d=null,e=this.difference(this._drag.pointer,this.pointer(a)),f=this.difference(this._drag.stage.start,e);this.is("dragging")&&(a.preventDefault(),this.settings.loop?(b=this.coordinates(this.minimum()),c=this.coordinates(this.maximum()+1)-b,f.x=((f.x-b)%c+c)%c+b):(b=this.settings.rtl?this.coordinates(this.maximum()):this.coordinates(this.minimum()),c=this.settings.rtl?this.coordinates(this.minimum()):this.coordinates(this.maximum()),d=this.settings.pullDrag?-1*e.x/5:0,f.x=Math.max(Math.min(f.x,b+d),c+d)),this._drag.stage.current=f,this.animate(f.x))},e.prototype.onDragEnd=function(b){var d=this.difference(this._drag.pointer,this.pointer(b)),e=this._drag.stage.current,f=d.x>0^this.settings.rtl?"left":"right";a(c).off(".owl.core"),this.$element.removeClass(this.options.grabClass),(0!==d.x&&this.is("dragging")||!this.is("valid"))&&(this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed),this.current(this.closest(e.x,0!==d.x?f:this._drag.direction)),this.invalidate("position"),this.update(),this._drag.direction=f,(Math.abs(d.x)>3||(new Date).getTime()-this._drag.time>300)&&this._drag.target.one("click.owl.core",function(){return!1})),this.is("dragging")&&(this.leave("dragging"),this.trigger("dragged"))},e.prototype.closest=function(b,c){var d=-1,e=30,f=this.width(),g=this.coordinates();return this.settings.freeDrag||a.each(g,a.proxy(function(a,h){return"left"===c&&b>h-e&&h+e>b?d=a:"right"===c&&b>h-f-e&&h-f+e>b?d=a+1:this.op(b,"<",h)&&this.op(b,">",g[a+1]||h-f)&&(d="left"===c?a+1:a),-1===d},this)),this.settings.loop||(this.op(b,">",g[this.minimum()])?d=b=this.minimum():this.op(b,"<",g[this.maximum()])&&(d=b=this.maximum())),d},e.prototype.animate=function(b){var c=this.speed()>0;this.is("animating")&&this.onTransitionEnd(),c&&(this.enter("animating"),this.trigger("translate")),a.support.transform3d&&a.support.transition?this.$stage.css({transform:"translate3d("+b+"px,0px,0px)",transition:this.speed()/1e3+"s"}):c?this.$stage.animate({left:b+"px"},this.speed(),this.settings.fallbackEasing,a.proxy(this.onTransitionEnd,this)):this.$stage.css({left:b+"px"})},e.prototype.is=function(a){return this._states.current[a]&&this._states.current[a]>0},e.prototype.current=function(a){if(a===d)return this._current;if(0===this._items.length)return d;if(a=this.normalize(a),this._current!==a){var b=this.trigger("change",{property:{name:"position",value:a}});b.data!==d&&(a=this.normalize(b.data)),this._current=a,this.invalidate("position"),this.trigger("changed",{property:{name:"position",value:this._current}})}return this._current},e.prototype.invalidate=function(b){return"string"===a.type(b)&&(this._invalidated[b]=!0,this.is("valid")&&this.leave("valid")),a.map(this._invalidated,function(a,b){return b})},e.prototype.reset=function(a){a=this.normalize(a),a!==d&&(this._speed=0,this._current=a,this.suppress(["translate","translated"]),this.animate(this.coordinates(a)),this.release(["translate","translated"]))},e.prototype.normalize=function(a,b){var c=this._items.length,e=b?0:this._clones.length;return!this.isNumeric(a)||1>c?a=d:(0>a||a>=c+e)&&(a=((a-e/2)%c+c)%c+e/2),a},e.prototype.relative=function(a){return a-=this._clones.length/2,this.normalize(a,!0)},e.prototype.maximum=function(a){var b,c,d,e=this.settings,f=this._coordinates.length;if(e.loop)f=this._clones.length/2+this._items.length-1;else if(e.autoWidth||e.merge){if(b=this._items.length)for(c=this._items[--b].width(),d=this.$element.width();b--&&(c+=this._items[b].width()+this.settings.margin,!(c>d)););f=b+1}else f=e.center?this._items.length-1:this._items.length-e.items;return a&&(f-=this._clones.length/2),Math.max(f,0)},e.prototype.minimum=function(a){return a?0:this._clones.length/2},e.prototype.items=function(a){return a===d?this._items.slice():(a=this.normalize(a,!0),this._items[a])},e.prototype.mergers=function(a){return a===d?this._mergers.slice():(a=this.normalize(a,!0),this._mergers[a])},e.prototype.clones=function(b){var c=this._clones.length/2,e=c+this._items.length,f=function(a){return a%2===0?e+a/2:c-(a+1)/2};return b===d?a.map(this._clones,function(a,b){return f(b)}):a.map(this._clones,function(a,c){return a===b?f(c):null})},e.prototype.speed=function(a){return a!==d&&(this._speed=a),this._speed},e.prototype.coordinates=function(b){var c,e=1,f=b-1;return b===d?a.map(this._coordinates,a.proxy(function(a,b){return this.coordinates(b)},this)):(this.settings.center?(this.settings.rtl&&(e=-1,f=b+1),c=this._coordinates[b],c+=(this.width()-c+(this._coordinates[f]||0))/2*e):c=this._coordinates[f]||0,c=Math.ceil(c))},e.prototype.duration=function(a,b,c){return 0===c?0:Math.min(Math.max(Math.abs(b-a),1),6)*Math.abs(c||this.settings.smartSpeed)},e.prototype.to=function(a,b){var c=this.current(),d=null,e=a-this.relative(c),f=(e>0)-(0>e),g=this._items.length,h=this.minimum(),i=this.maximum();this.settings.loop?(!this.settings.rewind&&Math.abs(e)>g/2&&(e+=-1*f*g),a=c+e,d=((a-h)%g+g)%g+h,d!==a&&i>=d-e&&d-e>0&&(c=d-e,a=d,this.reset(c))):this.settings.rewind?(i+=1,a=(a%i+i)%i):a=Math.max(h,Math.min(i,a)),this.speed(this.duration(c,a,b)),this.current(a),this.$element.is(":visible")&&this.update()},e.prototype.next=function(a){a=a||!1,this.to(this.relative(this.current())+1,a)},e.prototype.prev=function(a){a=a||!1,this.to(this.relative(this.current())-1,a)},e.prototype.onTransitionEnd=function(a){return a!==d&&(a.stopPropagation(),(a.target||a.srcElement||a.originalTarget)!==this.$stage.get(0))?!1:(this.leave("animating"),void this.trigger("translated"))},e.prototype.viewport=function(){var d;return this.options.responsiveBaseElement!==b?d=a(this.options.responsiveBaseElement).width():b.innerWidth?d=b.innerWidth:c.documentElement&&c.documentElement.clientWidth?d=c.documentElement.clientWidth:console.warn("Can not detect viewport width."),d},e.prototype.replace=function(b){this.$stage.empty(),this._items=[],b&&(b=b instanceof jQuery?b:a(b)),this.settings.nestedItemSelector&&(b=b.find("."+this.settings.nestedItemSelector)),b.filter(function(){return 1===this.nodeType}).each(a.proxy(function(a,b){b=this.prepare(b),this.$stage.append(b),this._items.push(b),this._mergers.push(1*b.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)},this)),this.reset(this.isNumeric(this.settings.startPosition)?this.settings.startPosition:0),this.invalidate("items")},e.prototype.add=function(b,c){var e=this.relative(this._current);c=c===d?this._items.length:this.normalize(c,!0),b=b instanceof jQuery?b:a(b),this.trigger("add",{content:b,position:c}),b=this.prepare(b),0===this._items.length||c===this._items.length?(0===this._items.length&&this.$stage.append(b),0!==this._items.length&&this._items[c-1].after(b),this._items.push(b),this._mergers.push(1*b.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)):(this._items[c].before(b),this._items.splice(c,0,b),this._mergers.splice(c,0,1*b.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)),this._items[e]&&this.reset(this._items[e].index()),this.invalidate("items"),this.trigger("added",{content:b,position:c})},e.prototype.remove=function(a){a=this.normalize(a,!0),a!==d&&(this.trigger("remove",{content:this._items[a],position:a}),this._items[a].remove(),this._items.splice(a,1),this._mergers.splice(a,1),this.invalidate("items"),this.trigger("removed",{content:null,position:a}))},e.prototype.preloadAutoWidthImages=function(b){b.each(a.proxy(function(b,c){this.enter("pre-loading"),c=a(c),a(new Image).one("load",a.proxy(function(a){c.attr("src",a.target.src),c.css("opacity",1),this.leave("pre-loading"),!this.is("pre-loading")&&!this.is("initializing")&&this.refresh()},this)).attr("src",c.attr("src")||c.attr("data-src")||c.attr("data-src-retina"))},this))},e.prototype.destroy=function(){this.$element.off(".owl.core"),this.$stage.off(".owl.core"),a(c).off(".owl.core"),this.settings.responsive!==!1&&(b.clearTimeout(this.resizeTimer),this.off(b,"resize",this._handlers.onThrottledResize));for(var d in this._plugins)this._plugins[d].destroy();this.$stage.children(".cloned").remove(),this.$stage.unwrap(),this.$stage.children().contents().unwrap(),this.$stage.children().unwrap(),this.$stage.remove(),this.$element.removeClass(this.options.refreshClass).removeClass(this.options.loadingClass).removeClass(this.options.loadedClass).removeClass(this.options.rtlClass).removeClass(this.options.dragClass).removeClass(this.options.grabClass).attr("class",this.$element.attr("class").replace(new RegExp(this.options.responsiveClass+"-\\S+\\s","g"),"")).removeData("owl.carousel")},e.prototype.op=function(a,b,c){var d=this.settings.rtl;switch(b){case"<":return d?a>c:c>a;case">":return d?c>a:a>c;case">=":return d?c>=a:a>=c;case"<=":return d?a>=c:c>=a}},e.prototype.on=function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d):a.attachEvent&&a.attachEvent("on"+b,c)},e.prototype.off=function(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,d):a.detachEvent&&a.detachEvent("on"+b,c)},e.prototype.trigger=function(b,c,d,f,g){var h={item:{count:this._items.length,index:this.current()}},i=a.camelCase(a.grep(["on",b,d],function(a){return a}).join("-").toLowerCase()),j=a.Event([b,"owl",d||"carousel"].join(".").toLowerCase(),a.extend({relatedTarget:this},h,c));return this._supress[b]||(a.each(this._plugins,function(a,b){b.onTrigger&&b.onTrigger(j)}),this.register({type:e.Type.Event,name:b}),this.$element.trigger(j),this.settings&&"function"==typeof this.settings[i]&&this.settings[i].call(this,j)),j},e.prototype.enter=function(b){a.each([b].concat(this._states.tags[b]||[]),a.proxy(function(a,b){this._states.current[b]===d&&(this._states.current[b]=0),this._states.current[b]++},this))},e.prototype.leave=function(b){a.each([b].concat(this._states.tags[b]||[]),a.proxy(function(a,b){this._states.current[b]--},this))},e.prototype.register=function(b){if(b.type===e.Type.Event){if(a.event.special[b.name]||(a.event.special[b.name]={}),!a.event.special[b.name].owl){var c=a.event.special[b.name]._default;a.event.special[b.name]._default=function(a){return!c||!c.apply||a.namespace&&-1!==a.namespace.indexOf("owl")?a.namespace&&a.namespace.indexOf("owl")>-1:c.apply(this,arguments)},a.event.special[b.name].owl=!0}}else b.type===e.Type.State&&(this._states.tags[b.name]?this._states.tags[b.name]=this._states.tags[b.name].concat(b.tags):this._states.tags[b.name]=b.tags,this._states.tags[b.name]=a.grep(this._states.tags[b.name],a.proxy(function(c,d){return a.inArray(c,this._states.tags[b.name])===d},this)))},e.prototype.suppress=function(b){a.each(b,a.proxy(function(a,b){this._supress[b]=!0},this))},e.prototype.release=function(b){a.each(b,a.proxy(function(a,b){delete this._supress[b]},this))},e.prototype.pointer=function(a){var c={x:null,y:null};return a=a.originalEvent||a||b.event,a=a.touches&&a.touches.length?a.touches[0]:a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:a,a.pageX?(c.x=a.pageX,c.y=a.pageY):(c.x=a.clientX,c.y=a.clientY),c},e.prototype.isNumeric=function(a){return!isNaN(parseFloat(a))},e.prototype.difference=function(a,b){return{x:a.x-b.x,y:a.y-b.y}},a.fn.owlCarousel=function(b){var c=Array.prototype.slice.call(arguments,1);return this.each(function(){var d=a(this),f=d.data("owl.carousel");f||(f=new e(this,"object"==typeof b&&b),d.data("owl.carousel",f),a.each(["next","prev","to","destroy","refresh","replace","add","remove"],function(b,c){f.register({type:e.Type.Event,name:c}),f.$element.on(c+".owl.carousel.core",a.proxy(function(a){a.namespace&&a.relatedTarget!==this&&(this.suppress([c]),f[c].apply(this,[].slice.call(arguments,1)),this.release([c]))},f))})),"string"==typeof b&&"_"!==b.charAt(0)&&f[b].apply(f,c)})},a.fn.owlCarousel.Constructor=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this._core=b,this._interval=null,this._visible=null,this._handlers={"initialized.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.autoRefresh&&this.watch()},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this._core.$element.on(this._handlers)};e.Defaults={autoRefresh:!0,autoRefreshInterval:500},e.prototype.watch=function(){this._interval||(this._visible=this._core.$element.is(":visible"),this._interval=b.setInterval(a.proxy(this.refresh,this),this._core.settings.autoRefreshInterval))},e.prototype.refresh=function(){this._core.$element.is(":visible")!==this._visible&&(this._visible=!this._visible,this._core.$element.toggleClass("owl-hidden",!this._visible),this._visible&&this._core.invalidate("width")&&this._core.refresh())},e.prototype.destroy=function(){var a,c;b.clearInterval(this._interval);for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(c in Object.getOwnPropertyNames(this))"function"!=typeof this[c]&&(this[c]=null)},a.fn.owlCarousel.Constructor.Plugins.AutoRefresh=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this._core=b,this._loaded=[],this._handlers={"initialized.owl.carousel change.owl.carousel resized.owl.carousel":a.proxy(function(b){if(b.namespace&&this._core.settings&&this._core.settings.lazyLoad&&(b.property&&"position"==b.property.name||"initialized"==b.type))for(var c=this._core.settings,e=c.center&&Math.ceil(c.items/2)||c.items,f=c.center&&-1*e||0,g=(b.property&&b.property.value!==d?b.property.value:this._core.current())+f,h=this._core.clones().length,i=a.proxy(function(a,b){this.load(b)},this);f++<e;)this.load(h/2+this._core.relative(g)),h&&a.each(this._core.clones(this._core.relative(g)),i),g++},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this._core.$element.on(this._handlers)};e.Defaults={lazyLoad:!1},e.prototype.load=function(c){var d=this._core.$stage.children().eq(c),e=d&&d.find(".owl-lazy");!e||a.inArray(d.get(0),this._loaded)>-1||(e.each(a.proxy(function(c,d){var e,f=a(d),g=b.devicePixelRatio>1&&f.attr("data-src-retina")||f.attr("data-src");this._core.trigger("load",{element:f,url:g},"lazy"),f.is("img")?f.one("load.owl.lazy",a.proxy(function(){f.css("opacity",1),this._core.trigger("loaded",{element:f,url:g},"lazy")},this)).attr("src",g):(e=new Image,e.onload=a.proxy(function(){f.css({"background-image":'url("'+g+'")',opacity:"1"}),this._core.trigger("loaded",{element:f,url:g},"lazy")},this),e.src=g)},this)),this._loaded.push(d.get(0)))},e.prototype.destroy=function(){var a,b;for(a in this.handlers)this._core.$element.off(a,this.handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Lazy=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this._core=b,this._handlers={"initialized.owl.carousel refreshed.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.autoHeight&&this.update()},this),"changed.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.autoHeight&&"position"==a.property.name&&this.update()},this),"loaded.owl.lazy":a.proxy(function(a){a.namespace&&this._core.settings.autoHeight&&a.element.closest("."+this._core.settings.itemClass).index()===this._core.current()&&this.update()},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this._core.$element.on(this._handlers)};e.Defaults={autoHeight:!1,autoHeightClass:"owl-height"},e.prototype.update=function(){var b=this._core._current,c=b+this._core.settings.items,d=this._core.$stage.children().toArray().slice(b,c),e=[],f=0;a.each(d,function(b,c){e.push(a(c).height())}),f=Math.max.apply(null,e),this._core.$stage.parent().height(f).addClass(this._core.settings.autoHeightClass)},e.prototype.destroy=function(){var a,b;for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.AutoHeight=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this._core=b,this._videos={},this._playing=null,this._handlers={"initialized.owl.carousel":a.proxy(function(a){a.namespace&&this._core.register({type:"state",name:"playing",tags:["interacting"]})},this),"resize.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.video&&this.isInFullScreen()&&a.preventDefault()},this),"refreshed.owl.carousel":a.proxy(function(a){a.namespace&&this._core.is("resizing")&&this._core.$stage.find(".cloned .owl-video-frame").remove()},this),"changed.owl.carousel":a.proxy(function(a){a.namespace&&"position"===a.property.name&&this._playing&&this.stop()},this),"prepared.owl.carousel":a.proxy(function(b){if(b.namespace){var c=a(b.content).find(".owl-video");c.length&&(c.css("display","none"),this.fetch(c,a(b.content)))}},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this._core.$element.on(this._handlers),this._core.$element.on("click.owl.video",".owl-video-play-icon",a.proxy(function(a){this.play(a)},this))};e.Defaults={video:!1,videoHeight:!1,videoWidth:!1},e.prototype.fetch=function(a,b){var c=function(){return a.attr("data-vimeo-id")?"vimeo":a.attr("data-vzaar-id")?"vzaar":"youtube"}(),d=a.attr("data-vimeo-id")||a.attr("data-youtube-id")||a.attr("data-vzaar-id"),e=a.attr("data-width")||this._core.settings.videoWidth,f=a.attr("data-height")||this._core.settings.videoHeight,g=a.attr("href");if(!g)throw new Error("Missing video URL.");if(d=g.match(/(http:|https:|)\/\/(player.|www.|app.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com)|vzaar\.com)\/(video\/|videos\/|embed\/|channels\/.+\/|groups\/.+\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/),d[3].indexOf("youtu")>-1)c="youtube";else if(d[3].indexOf("vimeo")>-1)c="vimeo";else{if(!(d[3].indexOf("vzaar")>-1))throw new Error("Video URL not supported.");c="vzaar"}d=d[6],this._videos[g]={type:c,id:d,width:e,height:f},b.attr("data-video",g),this.thumbnail(a,this._videos[g])},e.prototype.thumbnail=function(b,c){var d,e,f,g=c.width&&c.height?'style="width:'+c.width+"px;height:"+c.height+'px;"':"",h=b.find("img"),i="src",j="",k=this._core.settings,l=function(a){e='<div class="owl-video-play-icon"></div>',d=k.lazyLoad?'<div class="owl-video-tn '+j+'" '+i+'="'+a+'"></div>':'<div class="owl-video-tn" style="opacity:1;background-image:url('+a+')"></div>',b.after(d),b.after(e)};return b.wrap('<div class="owl-video-wrapper"'+g+"></div>"),this._core.settings.lazyLoad&&(i="data-src",j="owl-lazy"),h.length?(l(h.attr(i)),h.remove(),!1):void("youtube"===c.type?(f="//img.youtube.com/vi/"+c.id+"/hqdefault.jpg",l(f)):"vimeo"===c.type?a.ajax({type:"GET",url:"//vimeo.com/api/v2/video/"+c.id+".json",jsonp:"callback",dataType:"jsonp",success:function(a){f=a[0].thumbnail_large,l(f)}}):"vzaar"===c.type&&a.ajax({type:"GET",url:"//vzaar.com/api/videos/"+c.id+".json",jsonp:"callback",dataType:"jsonp",success:function(a){f=a.framegrab_url,l(f)}}))},e.prototype.stop=function(){this._core.trigger("stop",null,"video"),this._playing.find(".owl-video-frame").remove(),this._playing.removeClass("owl-video-playing"),this._playing=null,this._core.leave("playing"),this._core.trigger("stopped",null,"video")},e.prototype.play=function(b){var c,d=a(b.target),e=d.closest("."+this._core.settings.itemClass),f=this._videos[e.attr("data-video")],g=f.width||"100%",h=f.height||this._core.$stage.height();this._playing||(this._core.enter("playing"),this._core.trigger("play",null,"video"),e=this._core.items(this._core.relative(e.index())),this._core.reset(e.index()),"youtube"===f.type?c='<iframe width="'+g+'" height="'+h+'" src="//www.youtube.com/embed/'+f.id+"?autoplay=1&rel=0&v="+f.id+'" frameborder="0" allowfullscreen></iframe>':"vimeo"===f.type?c='<iframe src="//player.vimeo.com/video/'+f.id+'?autoplay=1" width="'+g+'" height="'+h+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>':"vzaar"===f.type&&(c='<iframe frameborder="0"height="'+h+'"width="'+g+'" allowfullscreen mozallowfullscreen webkitAllowFullScreen src="//view.vzaar.com/'+f.id+'/player?autoplay=true"></iframe>'),a('<div class="owl-video-frame">'+c+"</div>").insertAfter(e.find(".owl-video")),this._playing=e.addClass("owl-video-playing"))},e.prototype.isInFullScreen=function(){var b=c.fullscreenElement||c.mozFullScreenElement||c.webkitFullscreenElement;return b&&a(b).parent().hasClass("owl-video-frame")},e.prototype.destroy=function(){var a,b;this._core.$element.off("click.owl.video");for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Video=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this.core=b,this.core.options=a.extend({},e.Defaults,this.core.options),this.swapping=!0,this.previous=d,this.next=d,this.handlers={"change.owl.carousel":a.proxy(function(a){a.namespace&&"position"==a.property.name&&(this.previous=this.core.current(),this.next=a.property.value)},this),"drag.owl.carousel dragged.owl.carousel translated.owl.carousel":a.proxy(function(a){a.namespace&&(this.swapping="translated"==a.type)},this),"translate.owl.carousel":a.proxy(function(a){a.namespace&&this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)&&this.swap()},this)},this.core.$element.on(this.handlers)};e.Defaults={animateOut:!1,animateIn:!1},e.prototype.swap=function(){if(1===this.core.settings.items&&a.support.animation&&a.support.transition){this.core.speed(0);var b,c=a.proxy(this.clear,this),d=this.core.$stage.children().eq(this.previous),e=this.core.$stage.children().eq(this.next),f=this.core.settings.animateIn,g=this.core.settings.animateOut;this.core.current()!==this.previous&&(g&&(b=this.core.coordinates(this.previous)-this.core.coordinates(this.next),d.one(a.support.animation.end,c).css({left:b+"px"}).addClass("animated owl-animated-out").addClass(g)),f&&e.one(a.support.animation.end,c).addClass("animated owl-animated-in").addClass(f))}},e.prototype.clear=function(b){a(b.target).css({left:""}).removeClass("animated owl-animated-out owl-animated-in").removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut),this.core.onTransitionEnd()},e.prototype.destroy=function(){var a,b;for(a in this.handlers)this.core.$element.off(a,this.handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null);
},a.fn.owlCarousel.Constructor.Plugins.Animate=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this._core=b,this._call=null,this._time=0,this._timeout=0,this._paused=!0,this._handlers={"changed.owl.carousel":a.proxy(function(a){a.namespace&&"settings"===a.property.name?this._core.settings.autoplay?this.play():this.stop():a.namespace&&"position"===a.property.name&&this._paused&&(this._time=0)},this),"initialized.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.autoplay&&this.play()},this),"play.owl.autoplay":a.proxy(function(a,b,c){a.namespace&&this.play(b,c)},this),"stop.owl.autoplay":a.proxy(function(a){a.namespace&&this.stop()},this),"mouseover.owl.autoplay":a.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()},this),"mouseleave.owl.autoplay":a.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.play()},this),"touchstart.owl.core":a.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()},this),"touchend.owl.core":a.proxy(function(){this._core.settings.autoplayHoverPause&&this.play()},this)},this._core.$element.on(this._handlers),this._core.options=a.extend({},e.Defaults,this._core.options)};e.Defaults={autoplay:!1,autoplayTimeout:5e3,autoplayHoverPause:!1,autoplaySpeed:!1},e.prototype._next=function(d){this._call=b.setTimeout(a.proxy(this._next,this,d),this._timeout*(Math.round(this.read()/this._timeout)+1)-this.read()),this._core.is("busy")||this._core.is("interacting")||c.hidden||this._core.next(d||this._core.settings.autoplaySpeed)},e.prototype.read=function(){return(new Date).getTime()-this._time},e.prototype.play=function(c,d){var e;this._core.is("rotating")||this._core.enter("rotating"),c=c||this._core.settings.autoplayTimeout,e=Math.min(this._time%(this._timeout||c),c),this._paused?(this._time=this.read(),this._paused=!1):b.clearTimeout(this._call),this._time+=this.read()%c-e,this._timeout=c,this._call=b.setTimeout(a.proxy(this._next,this,d),c-e)},e.prototype.stop=function(){this._core.is("rotating")&&(this._time=0,this._paused=!0,b.clearTimeout(this._call),this._core.leave("rotating"))},e.prototype.pause=function(){this._core.is("rotating")&&!this._paused&&(this._time=this.read(),this._paused=!0,b.clearTimeout(this._call))},e.prototype.destroy=function(){var a,b;this.stop();for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.autoplay=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){"use strict";var e=function(b){this._core=b,this._initialized=!1,this._pages=[],this._controls={},this._templates=[],this.$element=this._core.$element,this._overrides={next:this._core.next,prev:this._core.prev,to:this._core.to},this._handlers={"prepared.owl.carousel":a.proxy(function(b){b.namespace&&this._core.settings.dotsData&&this._templates.push('<div class="'+this._core.settings.dotClass+'">'+a(b.content).find("[data-dot]").addBack("[data-dot]").attr("data-dot")+"</div>")},this),"added.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.dotsData&&this._templates.splice(a.position,0,this._templates.pop())},this),"remove.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.dotsData&&this._templates.splice(a.position,1)},this),"changed.owl.carousel":a.proxy(function(a){a.namespace&&"position"==a.property.name&&this.draw()},this),"initialized.owl.carousel":a.proxy(function(a){a.namespace&&!this._initialized&&(this._core.trigger("initialize",null,"navigation"),this.initialize(),this.update(),this.draw(),this._initialized=!0,this._core.trigger("initialized",null,"navigation"))},this),"refreshed.owl.carousel":a.proxy(function(a){a.namespace&&this._initialized&&(this._core.trigger("refresh",null,"navigation"),this.update(),this.draw(),this._core.trigger("refreshed",null,"navigation"))},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this.$element.on(this._handlers)};e.Defaults={nav:!1,navText:['<span aria-label="prev">&#x2039;</span>','<span aria-label="next">&#x203a;</span>'],navSpeed:!1,navElement:'button role="presentation"',navContainer:!1,navContainerClass:"owl-nav",navClass:["owl-prev","owl-next"],slideBy:1,dotClass:"owl-dot",dotsClass:"owl-dots",dots:!0,dotsEach:!1,dotsData:!1,dotsSpeed:!1,dotsContainer:!1},e.prototype.initialize=function(){var b,c=this._core.settings;this._controls.$relative=(c.navContainer?a(c.navContainer):a("<div>").addClass(c.navContainerClass).appendTo(this.$element)).addClass("disabled"),this._controls.$previous=a("<"+c.navElement+">").addClass(c.navClass[0]).html(c.navText[0]).prependTo(this._controls.$relative).on("click",a.proxy(function(a){this.prev(c.navSpeed)},this)),this._controls.$next=a("<"+c.navElement+">").addClass(c.navClass[1]).html(c.navText[1]).appendTo(this._controls.$relative).on("click",a.proxy(function(a){this.next(c.navSpeed)},this)),c.dotsData||(this._templates=[a("<button>").addClass(c.dotClass).append(a("<span>")).prop("outerHTML")]),this._controls.$absolute=(c.dotsContainer?a(c.dotsContainer):a("<div>").addClass(c.dotsClass).appendTo(this.$element)).addClass("disabled"),this._controls.$absolute.on("click","button",a.proxy(function(b){var d=a(b.target).parent().is(this._controls.$absolute)?a(b.target).index():a(b.target).parent().index();b.preventDefault(),this.to(d,c.dotsSpeed)},this));for(b in this._overrides)this._core[b]=a.proxy(this[b],this)},e.prototype.destroy=function(){var a,b,c,d;for(a in this._handlers)this.$element.off(a,this._handlers[a]);for(b in this._controls)"$relative"===b&&settings.navContainer?this._controls[b].html(""):this._controls[b].remove();for(d in this.overides)this._core[d]=this._overrides[d];for(c in Object.getOwnPropertyNames(this))"function"!=typeof this[c]&&(this[c]=null)},e.prototype.update=function(){var a,b,c,d=this._core.clones().length/2,e=d+this._core.items().length,f=this._core.maximum(!0),g=this._core.settings,h=g.center||g.autoWidth||g.dotsData?1:g.dotsEach||g.items;if("page"!==g.slideBy&&(g.slideBy=Math.min(g.slideBy,g.items)),g.dots||"page"==g.slideBy)for(this._pages=[],a=d,b=0,c=0;e>a;a++){if(b>=h||0===b){if(this._pages.push({start:Math.min(f,a-d),end:a-d+h-1}),Math.min(f,a-d)===f)break;b=0,++c}b+=this._core.mergers(this._core.relative(a))}},e.prototype.draw=function(){var b,c=this._core.settings,d=this._core.items().length<=c.items,e=this._core.relative(this._core.current()),f=c.loop||c.rewind;this._controls.$relative.toggleClass("disabled",!c.nav||d),c.nav&&(this._controls.$previous.toggleClass("disabled",!f&&e<=this._core.minimum(!0)),this._controls.$next.toggleClass("disabled",!f&&e>=this._core.maximum(!0))),this._controls.$absolute.toggleClass("disabled",!c.dots||d),c.dots&&(b=this._pages.length-this._controls.$absolute.children().length,c.dotsData&&0!==b?this._controls.$absolute.html(this._templates.join("")):b>0?this._controls.$absolute.append(new Array(b+1).join(this._templates[0])):0>b&&this._controls.$absolute.children().slice(b).remove(),this._controls.$absolute.find(".active").removeClass("active"),this._controls.$absolute.children().eq(a.inArray(this.current(),this._pages)).addClass("active"))},e.prototype.onTrigger=function(b){var c=this._core.settings;b.page={index:a.inArray(this.current(),this._pages),count:this._pages.length,size:c&&(c.center||c.autoWidth||c.dotsData?1:c.dotsEach||c.items)}},e.prototype.current=function(){var b=this._core.relative(this._core.current());return a.grep(this._pages,a.proxy(function(a,c){return a.start<=b&&a.end>=b},this)).pop()},e.prototype.getPosition=function(b){var c,d,e=this._core.settings;return"page"==e.slideBy?(c=a.inArray(this.current(),this._pages),d=this._pages.length,b?++c:--c,c=this._pages[(c%d+d)%d].start):(c=this._core.relative(this._core.current()),d=this._core.items().length,b?c+=e.slideBy:c-=e.slideBy),c},e.prototype.next=function(b){a.proxy(this._overrides.to,this._core)(this.getPosition(!0),b)},e.prototype.prev=function(b){a.proxy(this._overrides.to,this._core)(this.getPosition(!1),b)},e.prototype.to=function(b,c,d){var e;!d&&this._pages.length?(e=this._pages.length,a.proxy(this._overrides.to,this._core)(this._pages[(b%e+e)%e].start,c)):a.proxy(this._overrides.to,this._core)(b,c)},a.fn.owlCarousel.Constructor.Plugins.Navigation=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){"use strict";var e=function(c){this._core=c,this._hashes={},this.$element=this._core.$element,this._handlers={"initialized.owl.carousel":a.proxy(function(c){c.namespace&&"URLHash"===this._core.settings.startPosition&&a(b).trigger("hashchange.owl.navigation")},this),"prepared.owl.carousel":a.proxy(function(b){if(b.namespace){var c=a(b.content).find("[data-hash]").addBack("[data-hash]").attr("data-hash");if(!c)return;this._hashes[c]=b.content}},this),"changed.owl.carousel":a.proxy(function(c){if(c.namespace&&"position"===c.property.name){var d=this._core.items(this._core.relative(this._core.current())),e=a.map(this._hashes,function(a,b){return a===d?b:null}).join();if(!e||b.location.hash.slice(1)===e)return;b.location.hash=e}},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this.$element.on(this._handlers),a(b).on("hashchange.owl.navigation",a.proxy(function(a){var c=b.location.hash.substring(1),e=this._core.$stage.children(),f=this._hashes[c]&&e.index(this._hashes[c]);f!==d&&f!==this._core.current()&&this._core.to(this._core.relative(f),!1,!0)},this))};e.Defaults={URLhashListener:!1},e.prototype.destroy=function(){var c,d;a(b).off("hashchange.owl.navigation");for(c in this._handlers)this._core.$element.off(c,this._handlers[c]);for(d in Object.getOwnPropertyNames(this))"function"!=typeof this[d]&&(this[d]=null)},a.fn.owlCarousel.Constructor.Plugins.Hash=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){function e(b,c){var e=!1,f=b.charAt(0).toUpperCase()+b.slice(1);return a.each((b+" "+h.join(f+" ")+f).split(" "),function(a,b){return g[b]!==d?(e=c?b:!0,!1):void 0}),e}function f(a){return e(a,!0)}var g=a("<support>").get(0).style,h="Webkit Moz O ms".split(" "),i={transition:{end:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}},animation:{end:{WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd",animation:"animationend"}}},j={csstransforms:function(){return!!e("transform")},csstransforms3d:function(){return!!e("perspective")},csstransitions:function(){return!!e("transition")},cssanimations:function(){return!!e("animation")}};j.csstransitions()&&(a.support.transition=new String(f("transition")),a.support.transition.end=i.transition.end[a.support.transition]),j.cssanimations()&&(a.support.animation=new String(f("animation")),a.support.animation.end=i.animation.end[a.support.animation]),j.csstransforms()&&(a.support.transform=new String(f("transform")),a.support.transform3d=j.csstransforms3d())}(window.Zepto||window.jQuery,window,document);
/*
     _ _      _       _
 ___| (_) ___| | __  (_)___
/ __| | |/ __| |/ /  | / __|
\__ \ | | (__|   < _ | \__ \
|___/_|_|\___|_|\_(_)/ |___/
                   |__/

 Version: 1.9.0
  Author: Ken Wheeler
 Website: http://kenwheeler.github.io
    Docs: http://kenwheeler.github.io/slick
    Repo: http://github.com/kenwheeler/slick
  Issues: http://github.com/kenwheeler/slick/issues

 */
(function(i){"use strict";"function"==typeof define&&define.amd?define(["jquery"],i):"undefined"!=typeof exports?module.exports=i(require("jquery")):i(jQuery)})(function(i){"use strict";var e=window.Slick||{};e=function(){function e(e,o){var s,n=this;n.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:i(e),appendDots:i(e),arrows:!0,asNavFor:null,prevArrow:'<button class="slick-prev" aria-label="Previous" type="button">Previous</button>',nextArrow:'<button class="slick-next" aria-label="Next" type="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(e,t){return i('<button type="button" />').text(t+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,focusOnChange:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},n.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,scrolling:!1,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,swiping:!1,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},i.extend(n,n.initials),n.activeBreakpoint=null,n.animType=null,n.animProp=null,n.breakpoints=[],n.breakpointSettings=[],n.cssTransitions=!1,n.focussed=!1,n.interrupted=!1,n.hidden="hidden",n.paused=!0,n.positionProp=null,n.respondTo=null,n.rowCount=1,n.shouldClick=!0,n.$slider=i(e),n.$slidesCache=null,n.transformType=null,n.transitionType=null,n.visibilityChange="visibilitychange",n.windowWidth=0,n.windowTimer=null,s=i(e).data("slick")||{},n.options=i.extend({},n.defaults,o,s),n.currentSlide=n.options.initialSlide,n.originalSettings=n.options,"undefined"!=typeof document.mozHidden?(n.hidden="mozHidden",n.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(n.hidden="webkitHidden",n.visibilityChange="webkitvisibilitychange"),n.autoPlay=i.proxy(n.autoPlay,n),n.autoPlayClear=i.proxy(n.autoPlayClear,n),n.autoPlayIterator=i.proxy(n.autoPlayIterator,n),n.changeSlide=i.proxy(n.changeSlide,n),n.clickHandler=i.proxy(n.clickHandler,n),n.selectHandler=i.proxy(n.selectHandler,n),n.setPosition=i.proxy(n.setPosition,n),n.swipeHandler=i.proxy(n.swipeHandler,n),n.dragHandler=i.proxy(n.dragHandler,n),n.keyHandler=i.proxy(n.keyHandler,n),n.instanceUid=t++,n.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,n.registerBreakpoints(),n.init(!0)}var t=0;return e}(),e.prototype.activateADA=function(){var i=this;i.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})},e.prototype.addSlide=e.prototype.slickAdd=function(e,t,o){var s=this;if("boolean"==typeof t)o=t,t=null;else if(t<0||t>=s.slideCount)return!1;s.unload(),"number"==typeof t?0===t&&0===s.$slides.length?i(e).appendTo(s.$slideTrack):o?i(e).insertBefore(s.$slides.eq(t)):i(e).insertAfter(s.$slides.eq(t)):o===!0?i(e).prependTo(s.$slideTrack):i(e).appendTo(s.$slideTrack),s.$slides=s.$slideTrack.children(this.options.slide),s.$slideTrack.children(this.options.slide).detach(),s.$slideTrack.append(s.$slides),s.$slides.each(function(e,t){i(t).attr("data-slick-index",e)}),s.$slidesCache=s.$slides,s.reinit()},e.prototype.animateHeight=function(){var i=this;if(1===i.options.slidesToShow&&i.options.adaptiveHeight===!0&&i.options.vertical===!1){var e=i.$slides.eq(i.currentSlide).outerHeight(!0);i.$list.animate({height:e},i.options.speed)}},e.prototype.animateSlide=function(e,t){var o={},s=this;s.animateHeight(),s.options.rtl===!0&&s.options.vertical===!1&&(e=-e),s.transformsEnabled===!1?s.options.vertical===!1?s.$slideTrack.animate({left:e},s.options.speed,s.options.easing,t):s.$slideTrack.animate({top:e},s.options.speed,s.options.easing,t):s.cssTransitions===!1?(s.options.rtl===!0&&(s.currentLeft=-s.currentLeft),i({animStart:s.currentLeft}).animate({animStart:e},{duration:s.options.speed,easing:s.options.easing,step:function(i){i=Math.ceil(i),s.options.vertical===!1?(o[s.animType]="translate("+i+"px, 0px)",s.$slideTrack.css(o)):(o[s.animType]="translate(0px,"+i+"px)",s.$slideTrack.css(o))},complete:function(){t&&t.call()}})):(s.applyTransition(),e=Math.ceil(e),s.options.vertical===!1?o[s.animType]="translate3d("+e+"px, 0px, 0px)":o[s.animType]="translate3d(0px,"+e+"px, 0px)",s.$slideTrack.css(o),t&&setTimeout(function(){s.disableTransition(),t.call()},s.options.speed))},e.prototype.getNavTarget=function(){var e=this,t=e.options.asNavFor;return t&&null!==t&&(t=i(t).not(e.$slider)),t},e.prototype.asNavFor=function(e){var t=this,o=t.getNavTarget();null!==o&&"object"==typeof o&&o.each(function(){var t=i(this).slick("getSlick");t.unslicked||t.slideHandler(e,!0)})},e.prototype.applyTransition=function(i){var e=this,t={};e.options.fade===!1?t[e.transitionType]=e.transformType+" "+e.options.speed+"ms "+e.options.cssEase:t[e.transitionType]="opacity "+e.options.speed+"ms "+e.options.cssEase,e.options.fade===!1?e.$slideTrack.css(t):e.$slides.eq(i).css(t)},e.prototype.autoPlay=function(){var i=this;i.autoPlayClear(),i.slideCount>i.options.slidesToShow&&(i.autoPlayTimer=setInterval(i.autoPlayIterator,i.options.autoplaySpeed))},e.prototype.autoPlayClear=function(){var i=this;i.autoPlayTimer&&clearInterval(i.autoPlayTimer)},e.prototype.autoPlayIterator=function(){var i=this,e=i.currentSlide+i.options.slidesToScroll;i.paused||i.interrupted||i.focussed||(i.options.infinite===!1&&(1===i.direction&&i.currentSlide+1===i.slideCount-1?i.direction=0:0===i.direction&&(e=i.currentSlide-i.options.slidesToScroll,i.currentSlide-1===0&&(i.direction=1))),i.slideHandler(e))},e.prototype.buildArrows=function(){var e=this;e.options.arrows===!0&&(e.$prevArrow=i(e.options.prevArrow).addClass("slick-arrow"),e.$nextArrow=i(e.options.nextArrow).addClass("slick-arrow"),e.slideCount>e.options.slidesToShow?(e.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),e.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.prependTo(e.options.appendArrows),e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.appendTo(e.options.appendArrows),e.options.infinite!==!0&&e.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):e.$prevArrow.add(e.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},e.prototype.buildDots=function(){var e,t,o=this;if(o.options.dots===!0&&o.slideCount>o.options.slidesToShow){for(o.$slider.addClass("slick-dotted"),t=i("<ul />").addClass(o.options.dotsClass),e=0;e<=o.getDotCount();e+=1)t.append(i("<li />").append(o.options.customPaging.call(this,o,e)));o.$dots=t.appendTo(o.options.appendDots),o.$dots.find("li").first().addClass("slick-active")}},e.prototype.buildOut=function(){var e=this;e.$slides=e.$slider.children(e.options.slide+":not(.slick-cloned)").addClass("slick-slide"),e.slideCount=e.$slides.length,e.$slides.each(function(e,t){i(t).attr("data-slick-index",e).data("originalStyling",i(t).attr("style")||"")}),e.$slider.addClass("slick-slider"),e.$slideTrack=0===e.slideCount?i('<div class="slick-track"/>').appendTo(e.$slider):e.$slides.wrapAll('<div class="slick-track"/>').parent(),e.$list=e.$slideTrack.wrap('<div class="slick-list"/>').parent(),e.$slideTrack.css("opacity",0),e.options.centerMode!==!0&&e.options.swipeToSlide!==!0||(e.options.slidesToScroll=1),i("img[data-lazy]",e.$slider).not("[src]").addClass("slick-loading"),e.setupInfinite(),e.buildArrows(),e.buildDots(),e.updateDots(),e.setSlideClasses("number"==typeof e.currentSlide?e.currentSlide:0),e.options.draggable===!0&&e.$list.addClass("draggable")},e.prototype.buildRows=function(){var i,e,t,o,s,n,r,l=this;if(o=document.createDocumentFragment(),n=l.$slider.children(),l.options.rows>0){for(r=l.options.slidesPerRow*l.options.rows,s=Math.ceil(n.length/r),i=0;i<s;i++){var d=document.createElement("div");for(e=0;e<l.options.rows;e++){var a=document.createElement("div");for(t=0;t<l.options.slidesPerRow;t++){var c=i*r+(e*l.options.slidesPerRow+t);n.get(c)&&a.appendChild(n.get(c))}d.appendChild(a)}o.appendChild(d)}l.$slider.empty().append(o),l.$slider.children().children().children().css({width:100/l.options.slidesPerRow+"%",display:"inline-block"})}},e.prototype.checkResponsive=function(e,t){var o,s,n,r=this,l=!1,d=r.$slider.width(),a=window.innerWidth||i(window).width();if("window"===r.respondTo?n=a:"slider"===r.respondTo?n=d:"min"===r.respondTo&&(n=Math.min(a,d)),r.options.responsive&&r.options.responsive.length&&null!==r.options.responsive){s=null;for(o in r.breakpoints)r.breakpoints.hasOwnProperty(o)&&(r.originalSettings.mobileFirst===!1?n<r.breakpoints[o]&&(s=r.breakpoints[o]):n>r.breakpoints[o]&&(s=r.breakpoints[o]));null!==s?null!==r.activeBreakpoint?(s!==r.activeBreakpoint||t)&&(r.activeBreakpoint=s,"unslick"===r.breakpointSettings[s]?r.unslick(s):(r.options=i.extend({},r.originalSettings,r.breakpointSettings[s]),e===!0&&(r.currentSlide=r.options.initialSlide),r.refresh(e)),l=s):(r.activeBreakpoint=s,"unslick"===r.breakpointSettings[s]?r.unslick(s):(r.options=i.extend({},r.originalSettings,r.breakpointSettings[s]),e===!0&&(r.currentSlide=r.options.initialSlide),r.refresh(e)),l=s):null!==r.activeBreakpoint&&(r.activeBreakpoint=null,r.options=r.originalSettings,e===!0&&(r.currentSlide=r.options.initialSlide),r.refresh(e),l=s),e||l===!1||r.$slider.trigger("breakpoint",[r,l])}},e.prototype.changeSlide=function(e,t){var o,s,n,r=this,l=i(e.currentTarget);switch(l.is("a")&&e.preventDefault(),l.is("li")||(l=l.closest("li")),n=r.slideCount%r.options.slidesToScroll!==0,o=n?0:(r.slideCount-r.currentSlide)%r.options.slidesToScroll,e.data.message){case"previous":s=0===o?r.options.slidesToScroll:r.options.slidesToShow-o,r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide-s,!1,t);break;case"next":s=0===o?r.options.slidesToScroll:o,r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide+s,!1,t);break;case"index":var d=0===e.data.index?0:e.data.index||l.index()*r.options.slidesToScroll;r.slideHandler(r.checkNavigable(d),!1,t),l.children().trigger("focus");break;default:return}},e.prototype.checkNavigable=function(i){var e,t,o=this;if(e=o.getNavigableIndexes(),t=0,i>e[e.length-1])i=e[e.length-1];else for(var s in e){if(i<e[s]){i=t;break}t=e[s]}return i},e.prototype.cleanUpEvents=function(){var e=this;e.options.dots&&null!==e.$dots&&(i("li",e.$dots).off("click.slick",e.changeSlide).off("mouseenter.slick",i.proxy(e.interrupt,e,!0)).off("mouseleave.slick",i.proxy(e.interrupt,e,!1)),e.options.accessibility===!0&&e.$dots.off("keydown.slick",e.keyHandler)),e.$slider.off("focus.slick blur.slick"),e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow&&e.$prevArrow.off("click.slick",e.changeSlide),e.$nextArrow&&e.$nextArrow.off("click.slick",e.changeSlide),e.options.accessibility===!0&&(e.$prevArrow&&e.$prevArrow.off("keydown.slick",e.keyHandler),e.$nextArrow&&e.$nextArrow.off("keydown.slick",e.keyHandler))),e.$list.off("touchstart.slick mousedown.slick",e.swipeHandler),e.$list.off("touchmove.slick mousemove.slick",e.swipeHandler),e.$list.off("touchend.slick mouseup.slick",e.swipeHandler),e.$list.off("touchcancel.slick mouseleave.slick",e.swipeHandler),e.$list.off("click.slick",e.clickHandler),i(document).off(e.visibilityChange,e.visibility),e.cleanUpSlideEvents(),e.options.accessibility===!0&&e.$list.off("keydown.slick",e.keyHandler),e.options.focusOnSelect===!0&&i(e.$slideTrack).children().off("click.slick",e.selectHandler),i(window).off("orientationchange.slick.slick-"+e.instanceUid,e.orientationChange),i(window).off("resize.slick.slick-"+e.instanceUid,e.resize),i("[draggable!=true]",e.$slideTrack).off("dragstart",e.preventDefault),i(window).off("load.slick.slick-"+e.instanceUid,e.setPosition)},e.prototype.cleanUpSlideEvents=function(){var e=this;e.$list.off("mouseenter.slick",i.proxy(e.interrupt,e,!0)),e.$list.off("mouseleave.slick",i.proxy(e.interrupt,e,!1))},e.prototype.cleanUpRows=function(){var i,e=this;e.options.rows>0&&(i=e.$slides.children().children(),i.removeAttr("style"),e.$slider.empty().append(i))},e.prototype.clickHandler=function(i){var e=this;e.shouldClick===!1&&(i.stopImmediatePropagation(),i.stopPropagation(),i.preventDefault())},e.prototype.destroy=function(e){var t=this;t.autoPlayClear(),t.touchObject={},t.cleanUpEvents(),i(".slick-cloned",t.$slider).detach(),t.$dots&&t.$dots.remove(),t.$prevArrow&&t.$prevArrow.length&&(t.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.remove()),t.$nextArrow&&t.$nextArrow.length&&(t.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.remove()),t.$slides&&(t.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){i(this).attr("style",i(this).data("originalStyling"))}),t.$slideTrack.children(this.options.slide).detach(),t.$slideTrack.detach(),t.$list.detach(),t.$slider.append(t.$slides)),t.cleanUpRows(),t.$slider.removeClass("slick-slider"),t.$slider.removeClass("slick-initialized"),t.$slider.removeClass("slick-dotted"),t.unslicked=!0,e||t.$slider.trigger("destroy",[t])},e.prototype.disableTransition=function(i){var e=this,t={};t[e.transitionType]="",e.options.fade===!1?e.$slideTrack.css(t):e.$slides.eq(i).css(t)},e.prototype.fadeSlide=function(i,e){var t=this;t.cssTransitions===!1?(t.$slides.eq(i).css({zIndex:t.options.zIndex}),t.$slides.eq(i).animate({opacity:1},t.options.speed,t.options.easing,e)):(t.applyTransition(i),t.$slides.eq(i).css({opacity:1,zIndex:t.options.zIndex}),e&&setTimeout(function(){t.disableTransition(i),e.call()},t.options.speed))},e.prototype.fadeSlideOut=function(i){var e=this;e.cssTransitions===!1?e.$slides.eq(i).animate({opacity:0,zIndex:e.options.zIndex-2},e.options.speed,e.options.easing):(e.applyTransition(i),e.$slides.eq(i).css({opacity:0,zIndex:e.options.zIndex-2}))},e.prototype.filterSlides=e.prototype.slickFilter=function(i){var e=this;null!==i&&(e.$slidesCache=e.$slides,e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.filter(i).appendTo(e.$slideTrack),e.reinit())},e.prototype.focusHandler=function(){var e=this;e.$slider.off("focus.slick blur.slick").on("focus.slick","*",function(t){var o=i(this);setTimeout(function(){e.options.pauseOnFocus&&o.is(":focus")&&(e.focussed=!0,e.autoPlay())},0)}).on("blur.slick","*",function(t){i(this);e.options.pauseOnFocus&&(e.focussed=!1,e.autoPlay())})},e.prototype.getCurrent=e.prototype.slickCurrentSlide=function(){var i=this;return i.currentSlide},e.prototype.getDotCount=function(){var i=this,e=0,t=0,o=0;if(i.options.infinite===!0)if(i.slideCount<=i.options.slidesToShow)++o;else for(;e<i.slideCount;)++o,e=t+i.options.slidesToScroll,t+=i.options.slidesToScroll<=i.options.slidesToShow?i.options.slidesToScroll:i.options.slidesToShow;else if(i.options.centerMode===!0)o=i.slideCount;else if(i.options.asNavFor)for(;e<i.slideCount;)++o,e=t+i.options.slidesToScroll,t+=i.options.slidesToScroll<=i.options.slidesToShow?i.options.slidesToScroll:i.options.slidesToShow;else o=1+Math.ceil((i.slideCount-i.options.slidesToShow)/i.options.slidesToScroll);return o-1},e.prototype.getLeft=function(i){var e,t,o,s,n=this,r=0;return n.slideOffset=0,t=n.$slides.first().outerHeight(!0),n.options.infinite===!0?(n.slideCount>n.options.slidesToShow&&(n.slideOffset=n.slideWidth*n.options.slidesToShow*-1,s=-1,n.options.vertical===!0&&n.options.centerMode===!0&&(2===n.options.slidesToShow?s=-1.5:1===n.options.slidesToShow&&(s=-2)),r=t*n.options.slidesToShow*s),n.slideCount%n.options.slidesToScroll!==0&&i+n.options.slidesToScroll>n.slideCount&&n.slideCount>n.options.slidesToShow&&(i>n.slideCount?(n.slideOffset=(n.options.slidesToShow-(i-n.slideCount))*n.slideWidth*-1,r=(n.options.slidesToShow-(i-n.slideCount))*t*-1):(n.slideOffset=n.slideCount%n.options.slidesToScroll*n.slideWidth*-1,r=n.slideCount%n.options.slidesToScroll*t*-1))):i+n.options.slidesToShow>n.slideCount&&(n.slideOffset=(i+n.options.slidesToShow-n.slideCount)*n.slideWidth,r=(i+n.options.slidesToShow-n.slideCount)*t),n.slideCount<=n.options.slidesToShow&&(n.slideOffset=0,r=0),n.options.centerMode===!0&&n.slideCount<=n.options.slidesToShow?n.slideOffset=n.slideWidth*Math.floor(n.options.slidesToShow)/2-n.slideWidth*n.slideCount/2:n.options.centerMode===!0&&n.options.infinite===!0?n.slideOffset+=n.slideWidth*Math.floor(n.options.slidesToShow/2)-n.slideWidth:n.options.centerMode===!0&&(n.slideOffset=0,n.slideOffset+=n.slideWidth*Math.floor(n.options.slidesToShow/2)),e=n.options.vertical===!1?i*n.slideWidth*-1+n.slideOffset:i*t*-1+r,n.options.variableWidth===!0&&(o=n.slideCount<=n.options.slidesToShow||n.options.infinite===!1?n.$slideTrack.children(".slick-slide").eq(i):n.$slideTrack.children(".slick-slide").eq(i+n.options.slidesToShow),e=n.options.rtl===!0?o[0]?(n.$slideTrack.width()-o[0].offsetLeft-o.width())*-1:0:o[0]?o[0].offsetLeft*-1:0,n.options.centerMode===!0&&(o=n.slideCount<=n.options.slidesToShow||n.options.infinite===!1?n.$slideTrack.children(".slick-slide").eq(i):n.$slideTrack.children(".slick-slide").eq(i+n.options.slidesToShow+1),e=n.options.rtl===!0?o[0]?(n.$slideTrack.width()-o[0].offsetLeft-o.width())*-1:0:o[0]?o[0].offsetLeft*-1:0,e+=(n.$list.width()-o.outerWidth())/2)),e},e.prototype.getOption=e.prototype.slickGetOption=function(i){var e=this;return e.options[i]},e.prototype.getNavigableIndexes=function(){var i,e=this,t=0,o=0,s=[];for(e.options.infinite===!1?i=e.slideCount:(t=e.options.slidesToScroll*-1,o=e.options.slidesToScroll*-1,i=2*e.slideCount);t<i;)s.push(t),t=o+e.options.slidesToScroll,o+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;return s},e.prototype.getSlick=function(){return this},e.prototype.getSlideCount=function(){var e,t,o,s,n=this;return s=n.options.centerMode===!0?Math.floor(n.$list.width()/2):0,o=n.swipeLeft*-1+s,n.options.swipeToSlide===!0?(n.$slideTrack.find(".slick-slide").each(function(e,s){var r,l,d;if(r=i(s).outerWidth(),l=s.offsetLeft,n.options.centerMode!==!0&&(l+=r/2),d=l+r,o<d)return t=s,!1}),e=Math.abs(i(t).attr("data-slick-index")-n.currentSlide)||1):n.options.slidesToScroll},e.prototype.goTo=e.prototype.slickGoTo=function(i,e){var t=this;t.changeSlide({data:{message:"index",index:parseInt(i)}},e)},e.prototype.init=function(e){var t=this;i(t.$slider).hasClass("slick-initialized")||(i(t.$slider).addClass("slick-initialized"),t.buildRows(),t.buildOut(),t.setProps(),t.startLoad(),t.loadSlider(),t.initializeEvents(),t.updateArrows(),t.updateDots(),t.checkResponsive(!0),t.focusHandler()),e&&t.$slider.trigger("init",[t]),t.options.accessibility===!0&&t.initADA(),t.options.autoplay&&(t.paused=!1,t.autoPlay())},e.prototype.initADA=function(){var e=this,t=Math.ceil(e.slideCount/e.options.slidesToShow),o=e.getNavigableIndexes().filter(function(i){return i>=0&&i<e.slideCount});e.$slides.add(e.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),null!==e.$dots&&(e.$slides.not(e.$slideTrack.find(".slick-cloned")).each(function(t){var s=o.indexOf(t);if(i(this).attr({role:"tabpanel",id:"slick-slide"+e.instanceUid+t,tabindex:-1}),s!==-1){var n="slick-slide-control"+e.instanceUid+s;i("#"+n).length&&i(this).attr({"aria-describedby":n})}}),e.$dots.attr("role","tablist").find("li").each(function(s){var n=o[s];i(this).attr({role:"presentation"}),i(this).find("button").first().attr({role:"tab",id:"slick-slide-control"+e.instanceUid+s,"aria-controls":"slick-slide"+e.instanceUid+n,"aria-label":s+1+" of "+t,"aria-selected":null,tabindex:"-1"})}).eq(e.currentSlide).find("button").attr({"aria-selected":"true",tabindex:"0"}).end());for(var s=e.currentSlide,n=s+e.options.slidesToShow;s<n;s++)e.options.focusOnChange?e.$slides.eq(s).attr({tabindex:"0"}):e.$slides.eq(s).removeAttr("tabindex");e.activateADA()},e.prototype.initArrowEvents=function(){var i=this;i.options.arrows===!0&&i.slideCount>i.options.slidesToShow&&(i.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},i.changeSlide),i.$nextArrow.off("click.slick").on("click.slick",{message:"next"},i.changeSlide),i.options.accessibility===!0&&(i.$prevArrow.on("keydown.slick",i.keyHandler),i.$nextArrow.on("keydown.slick",i.keyHandler)))},e.prototype.initDotEvents=function(){var e=this;e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&(i("li",e.$dots).on("click.slick",{message:"index"},e.changeSlide),e.options.accessibility===!0&&e.$dots.on("keydown.slick",e.keyHandler)),e.options.dots===!0&&e.options.pauseOnDotsHover===!0&&e.slideCount>e.options.slidesToShow&&i("li",e.$dots).on("mouseenter.slick",i.proxy(e.interrupt,e,!0)).on("mouseleave.slick",i.proxy(e.interrupt,e,!1))},e.prototype.initSlideEvents=function(){var e=this;e.options.pauseOnHover&&(e.$list.on("mouseenter.slick",i.proxy(e.interrupt,e,!0)),e.$list.on("mouseleave.slick",i.proxy(e.interrupt,e,!1)))},e.prototype.initializeEvents=function(){var e=this;e.initArrowEvents(),e.initDotEvents(),e.initSlideEvents(),e.$list.on("touchstart.slick mousedown.slick",{action:"start"},e.swipeHandler),e.$list.on("touchmove.slick mousemove.slick",{action:"move"},e.swipeHandler),e.$list.on("touchend.slick mouseup.slick",{action:"end"},e.swipeHandler),e.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},e.swipeHandler),e.$list.on("click.slick",e.clickHandler),i(document).on(e.visibilityChange,i.proxy(e.visibility,e)),e.options.accessibility===!0&&e.$list.on("keydown.slick",e.keyHandler),e.options.focusOnSelect===!0&&i(e.$slideTrack).children().on("click.slick",e.selectHandler),i(window).on("orientationchange.slick.slick-"+e.instanceUid,i.proxy(e.orientationChange,e)),i(window).on("resize.slick.slick-"+e.instanceUid,i.proxy(e.resize,e)),i("[draggable!=true]",e.$slideTrack).on("dragstart",e.preventDefault),i(window).on("load.slick.slick-"+e.instanceUid,e.setPosition),i(e.setPosition)},e.prototype.initUI=function(){var i=this;i.options.arrows===!0&&i.slideCount>i.options.slidesToShow&&(i.$prevArrow.show(),i.$nextArrow.show()),i.options.dots===!0&&i.slideCount>i.options.slidesToShow&&i.$dots.show()},e.prototype.keyHandler=function(i){var e=this;i.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===i.keyCode&&e.options.accessibility===!0?e.changeSlide({data:{message:e.options.rtl===!0?"next":"previous"}}):39===i.keyCode&&e.options.accessibility===!0&&e.changeSlide({data:{message:e.options.rtl===!0?"previous":"next"}}))},e.prototype.lazyLoad=function(){function e(e){i("img[data-lazy]",e).each(function(){var e=i(this),t=i(this).attr("data-lazy"),o=i(this).attr("data-srcset"),s=i(this).attr("data-sizes")||r.$slider.attr("data-sizes"),n=document.createElement("img");n.onload=function(){e.animate({opacity:0},100,function(){o&&(e.attr("srcset",o),s&&e.attr("sizes",s)),e.attr("src",t).animate({opacity:1},200,function(){e.removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading")}),r.$slider.trigger("lazyLoaded",[r,e,t])})},n.onerror=function(){e.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),r.$slider.trigger("lazyLoadError",[r,e,t])},n.src=t})}var t,o,s,n,r=this;if(r.options.centerMode===!0?r.options.infinite===!0?(s=r.currentSlide+(r.options.slidesToShow/2+1),n=s+r.options.slidesToShow+2):(s=Math.max(0,r.currentSlide-(r.options.slidesToShow/2+1)),n=2+(r.options.slidesToShow/2+1)+r.currentSlide):(s=r.options.infinite?r.options.slidesToShow+r.currentSlide:r.currentSlide,n=Math.ceil(s+r.options.slidesToShow),r.options.fade===!0&&(s>0&&s--,n<=r.slideCount&&n++)),t=r.$slider.find(".slick-slide").slice(s,n),"anticipated"===r.options.lazyLoad)for(var l=s-1,d=n,a=r.$slider.find(".slick-slide"),c=0;c<r.options.slidesToScroll;c++)l<0&&(l=r.slideCount-1),t=t.add(a.eq(l)),t=t.add(a.eq(d)),l--,d++;e(t),r.slideCount<=r.options.slidesToShow?(o=r.$slider.find(".slick-slide"),e(o)):r.currentSlide>=r.slideCount-r.options.slidesToShow?(o=r.$slider.find(".slick-cloned").slice(0,r.options.slidesToShow),e(o)):0===r.currentSlide&&(o=r.$slider.find(".slick-cloned").slice(r.options.slidesToShow*-1),e(o))},e.prototype.loadSlider=function(){var i=this;i.setPosition(),i.$slideTrack.css({opacity:1}),i.$slider.removeClass("slick-loading"),i.initUI(),"progressive"===i.options.lazyLoad&&i.progressiveLazyLoad()},e.prototype.next=e.prototype.slickNext=function(){var i=this;i.changeSlide({data:{message:"next"}})},e.prototype.orientationChange=function(){var i=this;i.checkResponsive(),i.setPosition()},e.prototype.pause=e.prototype.slickPause=function(){var i=this;i.autoPlayClear(),i.paused=!0},e.prototype.play=e.prototype.slickPlay=function(){var i=this;i.autoPlay(),i.options.autoplay=!0,i.paused=!1,i.focussed=!1,i.interrupted=!1},e.prototype.postSlide=function(e){var t=this;if(!t.unslicked&&(t.$slider.trigger("afterChange",[t,e]),t.animating=!1,t.slideCount>t.options.slidesToShow&&t.setPosition(),t.swipeLeft=null,t.options.autoplay&&t.autoPlay(),t.options.accessibility===!0&&(t.initADA(),t.options.focusOnChange))){var o=i(t.$slides.get(t.currentSlide));o.attr("tabindex",0).focus()}},e.prototype.prev=e.prototype.slickPrev=function(){var i=this;i.changeSlide({data:{message:"previous"}})},e.prototype.preventDefault=function(i){i.preventDefault()},e.prototype.progressiveLazyLoad=function(e){e=e||1;var t,o,s,n,r,l=this,d=i("img[data-lazy]",l.$slider);d.length?(t=d.first(),o=t.attr("data-lazy"),s=t.attr("data-srcset"),n=t.attr("data-sizes")||l.$slider.attr("data-sizes"),r=document.createElement("img"),r.onload=function(){s&&(t.attr("srcset",s),n&&t.attr("sizes",n)),t.attr("src",o).removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading"),l.options.adaptiveHeight===!0&&l.setPosition(),l.$slider.trigger("lazyLoaded",[l,t,o]),l.progressiveLazyLoad()},r.onerror=function(){e<3?setTimeout(function(){l.progressiveLazyLoad(e+1)},500):(t.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),l.$slider.trigger("lazyLoadError",[l,t,o]),l.progressiveLazyLoad())},r.src=o):l.$slider.trigger("allImagesLoaded",[l])},e.prototype.refresh=function(e){var t,o,s=this;o=s.slideCount-s.options.slidesToShow,!s.options.infinite&&s.currentSlide>o&&(s.currentSlide=o),s.slideCount<=s.options.slidesToShow&&(s.currentSlide=0),t=s.currentSlide,s.destroy(!0),i.extend(s,s.initials,{currentSlide:t}),s.init(),e||s.changeSlide({data:{message:"index",index:t}},!1)},e.prototype.registerBreakpoints=function(){var e,t,o,s=this,n=s.options.responsive||null;if("array"===i.type(n)&&n.length){s.respondTo=s.options.respondTo||"window";for(e in n)if(o=s.breakpoints.length-1,n.hasOwnProperty(e)){for(t=n[e].breakpoint;o>=0;)s.breakpoints[o]&&s.breakpoints[o]===t&&s.breakpoints.splice(o,1),o--;s.breakpoints.push(t),s.breakpointSettings[t]=n[e].settings}s.breakpoints.sort(function(i,e){return s.options.mobileFirst?i-e:e-i})}},e.prototype.reinit=function(){var e=this;e.$slides=e.$slideTrack.children(e.options.slide).addClass("slick-slide"),e.slideCount=e.$slides.length,e.currentSlide>=e.slideCount&&0!==e.currentSlide&&(e.currentSlide=e.currentSlide-e.options.slidesToScroll),e.slideCount<=e.options.slidesToShow&&(e.currentSlide=0),e.registerBreakpoints(),e.setProps(),e.setupInfinite(),e.buildArrows(),e.updateArrows(),e.initArrowEvents(),e.buildDots(),e.updateDots(),e.initDotEvents(),e.cleanUpSlideEvents(),e.initSlideEvents(),e.checkResponsive(!1,!0),e.options.focusOnSelect===!0&&i(e.$slideTrack).children().on("click.slick",e.selectHandler),e.setSlideClasses("number"==typeof e.currentSlide?e.currentSlide:0),e.setPosition(),e.focusHandler(),e.paused=!e.options.autoplay,e.autoPlay(),e.$slider.trigger("reInit",[e])},e.prototype.resize=function(){var e=this;i(window).width()!==e.windowWidth&&(clearTimeout(e.windowDelay),e.windowDelay=window.setTimeout(function(){e.windowWidth=i(window).width(),e.checkResponsive(),e.unslicked||e.setPosition()},50))},e.prototype.removeSlide=e.prototype.slickRemove=function(i,e,t){var o=this;return"boolean"==typeof i?(e=i,i=e===!0?0:o.slideCount-1):i=e===!0?--i:i,!(o.slideCount<1||i<0||i>o.slideCount-1)&&(o.unload(),t===!0?o.$slideTrack.children().remove():o.$slideTrack.children(this.options.slide).eq(i).remove(),o.$slides=o.$slideTrack.children(this.options.slide),o.$slideTrack.children(this.options.slide).detach(),o.$slideTrack.append(o.$slides),o.$slidesCache=o.$slides,void o.reinit())},e.prototype.setCSS=function(i){var e,t,o=this,s={};o.options.rtl===!0&&(i=-i),e="left"==o.positionProp?Math.ceil(i)+"px":"0px",t="top"==o.positionProp?Math.ceil(i)+"px":"0px",s[o.positionProp]=i,o.transformsEnabled===!1?o.$slideTrack.css(s):(s={},o.cssTransitions===!1?(s[o.animType]="translate("+e+", "+t+")",o.$slideTrack.css(s)):(s[o.animType]="translate3d("+e+", "+t+", 0px)",o.$slideTrack.css(s)))},e.prototype.setDimensions=function(){var i=this;i.options.vertical===!1?i.options.centerMode===!0&&i.$list.css({padding:"0px "+i.options.centerPadding}):(i.$list.height(i.$slides.first().outerHeight(!0)*i.options.slidesToShow),i.options.centerMode===!0&&i.$list.css({padding:i.options.centerPadding+" 0px"})),i.listWidth=i.$list.width(),i.listHeight=i.$list.height(),i.options.vertical===!1&&i.options.variableWidth===!1?(i.slideWidth=Math.ceil(i.listWidth/i.options.slidesToShow),i.$slideTrack.width(Math.ceil(i.slideWidth*i.$slideTrack.children(".slick-slide").length))):i.options.variableWidth===!0?i.$slideTrack.width(5e3*i.slideCount):(i.slideWidth=Math.ceil(i.listWidth),i.$slideTrack.height(Math.ceil(i.$slides.first().outerHeight(!0)*i.$slideTrack.children(".slick-slide").length)));var e=i.$slides.first().outerWidth(!0)-i.$slides.first().width();i.options.variableWidth===!1&&i.$slideTrack.children(".slick-slide").width(i.slideWidth-e)},e.prototype.setFade=function(){var e,t=this;t.$slides.each(function(o,s){e=t.slideWidth*o*-1,t.options.rtl===!0?i(s).css({position:"relative",right:e,top:0,zIndex:t.options.zIndex-2,opacity:0}):i(s).css({position:"relative",left:e,top:0,zIndex:t.options.zIndex-2,opacity:0})}),t.$slides.eq(t.currentSlide).css({zIndex:t.options.zIndex-1,opacity:1})},e.prototype.setHeight=function(){var i=this;if(1===i.options.slidesToShow&&i.options.adaptiveHeight===!0&&i.options.vertical===!1){var e=i.$slides.eq(i.currentSlide).outerHeight(!0);i.$list.css("height",e)}},e.prototype.setOption=e.prototype.slickSetOption=function(){var e,t,o,s,n,r=this,l=!1;if("object"===i.type(arguments[0])?(o=arguments[0],l=arguments[1],n="multiple"):"string"===i.type(arguments[0])&&(o=arguments[0],s=arguments[1],l=arguments[2],"responsive"===arguments[0]&&"array"===i.type(arguments[1])?n="responsive":"undefined"!=typeof arguments[1]&&(n="single")),"single"===n)r.options[o]=s;else if("multiple"===n)i.each(o,function(i,e){r.options[i]=e});else if("responsive"===n)for(t in s)if("array"!==i.type(r.options.responsive))r.options.responsive=[s[t]];else{for(e=r.options.responsive.length-1;e>=0;)r.options.responsive[e].breakpoint===s[t].breakpoint&&r.options.responsive.splice(e,1),e--;r.options.responsive.push(s[t])}l&&(r.unload(),r.reinit())},e.prototype.setPosition=function(){var i=this;i.setDimensions(),i.setHeight(),i.options.fade===!1?i.setCSS(i.getLeft(i.currentSlide)):i.setFade(),i.$slider.trigger("setPosition",[i])},e.prototype.setProps=function(){var i=this,e=document.body.style;i.positionProp=i.options.vertical===!0?"top":"left",
"top"===i.positionProp?i.$slider.addClass("slick-vertical"):i.$slider.removeClass("slick-vertical"),void 0===e.WebkitTransition&&void 0===e.MozTransition&&void 0===e.msTransition||i.options.useCSS===!0&&(i.cssTransitions=!0),i.options.fade&&("number"==typeof i.options.zIndex?i.options.zIndex<3&&(i.options.zIndex=3):i.options.zIndex=i.defaults.zIndex),void 0!==e.OTransform&&(i.animType="OTransform",i.transformType="-o-transform",i.transitionType="OTransition",void 0===e.perspectiveProperty&&void 0===e.webkitPerspective&&(i.animType=!1)),void 0!==e.MozTransform&&(i.animType="MozTransform",i.transformType="-moz-transform",i.transitionType="MozTransition",void 0===e.perspectiveProperty&&void 0===e.MozPerspective&&(i.animType=!1)),void 0!==e.webkitTransform&&(i.animType="webkitTransform",i.transformType="-webkit-transform",i.transitionType="webkitTransition",void 0===e.perspectiveProperty&&void 0===e.webkitPerspective&&(i.animType=!1)),void 0!==e.msTransform&&(i.animType="msTransform",i.transformType="-ms-transform",i.transitionType="msTransition",void 0===e.msTransform&&(i.animType=!1)),void 0!==e.transform&&i.animType!==!1&&(i.animType="transform",i.transformType="transform",i.transitionType="transition"),i.transformsEnabled=i.options.useTransform&&null!==i.animType&&i.animType!==!1},e.prototype.setSlideClasses=function(i){var e,t,o,s,n=this;if(t=n.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),n.$slides.eq(i).addClass("slick-current"),n.options.centerMode===!0){var r=n.options.slidesToShow%2===0?1:0;e=Math.floor(n.options.slidesToShow/2),n.options.infinite===!0&&(i>=e&&i<=n.slideCount-1-e?n.$slides.slice(i-e+r,i+e+1).addClass("slick-active").attr("aria-hidden","false"):(o=n.options.slidesToShow+i,t.slice(o-e+1+r,o+e+2).addClass("slick-active").attr("aria-hidden","false")),0===i?t.eq(t.length-1-n.options.slidesToShow).addClass("slick-center"):i===n.slideCount-1&&t.eq(n.options.slidesToShow).addClass("slick-center")),n.$slides.eq(i).addClass("slick-center")}else i>=0&&i<=n.slideCount-n.options.slidesToShow?n.$slides.slice(i,i+n.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):t.length<=n.options.slidesToShow?t.addClass("slick-active").attr("aria-hidden","false"):(s=n.slideCount%n.options.slidesToShow,o=n.options.infinite===!0?n.options.slidesToShow+i:i,n.options.slidesToShow==n.options.slidesToScroll&&n.slideCount-i<n.options.slidesToShow?t.slice(o-(n.options.slidesToShow-s),o+s).addClass("slick-active").attr("aria-hidden","false"):t.slice(o,o+n.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"));"ondemand"!==n.options.lazyLoad&&"anticipated"!==n.options.lazyLoad||n.lazyLoad()},e.prototype.setupInfinite=function(){var e,t,o,s=this;if(s.options.fade===!0&&(s.options.centerMode=!1),s.options.infinite===!0&&s.options.fade===!1&&(t=null,s.slideCount>s.options.slidesToShow)){for(o=s.options.centerMode===!0?s.options.slidesToShow+1:s.options.slidesToShow,e=s.slideCount;e>s.slideCount-o;e-=1)t=e-1,i(s.$slides[t]).clone(!0).attr("id","").attr("data-slick-index",t-s.slideCount).prependTo(s.$slideTrack).addClass("slick-cloned");for(e=0;e<o+s.slideCount;e+=1)t=e,i(s.$slides[t]).clone(!0).attr("id","").attr("data-slick-index",t+s.slideCount).appendTo(s.$slideTrack).addClass("slick-cloned");s.$slideTrack.find(".slick-cloned").find("[id]").each(function(){i(this).attr("id","")})}},e.prototype.interrupt=function(i){var e=this;i||e.autoPlay(),e.interrupted=i},e.prototype.selectHandler=function(e){var t=this,o=i(e.target).is(".slick-slide")?i(e.target):i(e.target).parents(".slick-slide"),s=parseInt(o.attr("data-slick-index"));return s||(s=0),t.slideCount<=t.options.slidesToShow?void t.slideHandler(s,!1,!0):void t.slideHandler(s)},e.prototype.slideHandler=function(i,e,t){var o,s,n,r,l,d=null,a=this;if(e=e||!1,!(a.animating===!0&&a.options.waitForAnimate===!0||a.options.fade===!0&&a.currentSlide===i))return e===!1&&a.asNavFor(i),o=i,d=a.getLeft(o),r=a.getLeft(a.currentSlide),a.currentLeft=null===a.swipeLeft?r:a.swipeLeft,a.options.infinite===!1&&a.options.centerMode===!1&&(i<0||i>a.getDotCount()*a.options.slidesToScroll)?void(a.options.fade===!1&&(o=a.currentSlide,t!==!0&&a.slideCount>a.options.slidesToShow?a.animateSlide(r,function(){a.postSlide(o)}):a.postSlide(o))):a.options.infinite===!1&&a.options.centerMode===!0&&(i<0||i>a.slideCount-a.options.slidesToScroll)?void(a.options.fade===!1&&(o=a.currentSlide,t!==!0&&a.slideCount>a.options.slidesToShow?a.animateSlide(r,function(){a.postSlide(o)}):a.postSlide(o))):(a.options.autoplay&&clearInterval(a.autoPlayTimer),s=o<0?a.slideCount%a.options.slidesToScroll!==0?a.slideCount-a.slideCount%a.options.slidesToScroll:a.slideCount+o:o>=a.slideCount?a.slideCount%a.options.slidesToScroll!==0?0:o-a.slideCount:o,a.animating=!0,a.$slider.trigger("beforeChange",[a,a.currentSlide,s]),n=a.currentSlide,a.currentSlide=s,a.setSlideClasses(a.currentSlide),a.options.asNavFor&&(l=a.getNavTarget(),l=l.slick("getSlick"),l.slideCount<=l.options.slidesToShow&&l.setSlideClasses(a.currentSlide)),a.updateDots(),a.updateArrows(),a.options.fade===!0?(t!==!0?(a.fadeSlideOut(n),a.fadeSlide(s,function(){a.postSlide(s)})):a.postSlide(s),void a.animateHeight()):void(t!==!0&&a.slideCount>a.options.slidesToShow?a.animateSlide(d,function(){a.postSlide(s)}):a.postSlide(s)))},e.prototype.startLoad=function(){var i=this;i.options.arrows===!0&&i.slideCount>i.options.slidesToShow&&(i.$prevArrow.hide(),i.$nextArrow.hide()),i.options.dots===!0&&i.slideCount>i.options.slidesToShow&&i.$dots.hide(),i.$slider.addClass("slick-loading")},e.prototype.swipeDirection=function(){var i,e,t,o,s=this;return i=s.touchObject.startX-s.touchObject.curX,e=s.touchObject.startY-s.touchObject.curY,t=Math.atan2(e,i),o=Math.round(180*t/Math.PI),o<0&&(o=360-Math.abs(o)),o<=45&&o>=0?s.options.rtl===!1?"left":"right":o<=360&&o>=315?s.options.rtl===!1?"left":"right":o>=135&&o<=225?s.options.rtl===!1?"right":"left":s.options.verticalSwiping===!0?o>=35&&o<=135?"down":"up":"vertical"},e.prototype.swipeEnd=function(i){var e,t,o=this;if(o.dragging=!1,o.swiping=!1,o.scrolling)return o.scrolling=!1,!1;if(o.interrupted=!1,o.shouldClick=!(o.touchObject.swipeLength>10),void 0===o.touchObject.curX)return!1;if(o.touchObject.edgeHit===!0&&o.$slider.trigger("edge",[o,o.swipeDirection()]),o.touchObject.swipeLength>=o.touchObject.minSwipe){switch(t=o.swipeDirection()){case"left":case"down":e=o.options.swipeToSlide?o.checkNavigable(o.currentSlide+o.getSlideCount()):o.currentSlide+o.getSlideCount(),o.currentDirection=0;break;case"right":case"up":e=o.options.swipeToSlide?o.checkNavigable(o.currentSlide-o.getSlideCount()):o.currentSlide-o.getSlideCount(),o.currentDirection=1}"vertical"!=t&&(o.slideHandler(e),o.touchObject={},o.$slider.trigger("swipe",[o,t]))}else o.touchObject.startX!==o.touchObject.curX&&(o.slideHandler(o.currentSlide),o.touchObject={})},e.prototype.swipeHandler=function(i){var e=this;if(!(e.options.swipe===!1||"ontouchend"in document&&e.options.swipe===!1||e.options.draggable===!1&&i.type.indexOf("mouse")!==-1))switch(e.touchObject.fingerCount=i.originalEvent&&void 0!==i.originalEvent.touches?i.originalEvent.touches.length:1,e.touchObject.minSwipe=e.listWidth/e.options.touchThreshold,e.options.verticalSwiping===!0&&(e.touchObject.minSwipe=e.listHeight/e.options.touchThreshold),i.data.action){case"start":e.swipeStart(i);break;case"move":e.swipeMove(i);break;case"end":e.swipeEnd(i)}},e.prototype.swipeMove=function(i){var e,t,o,s,n,r,l=this;return n=void 0!==i.originalEvent?i.originalEvent.touches:null,!(!l.dragging||l.scrolling||n&&1!==n.length)&&(e=l.getLeft(l.currentSlide),l.touchObject.curX=void 0!==n?n[0].pageX:i.clientX,l.touchObject.curY=void 0!==n?n[0].pageY:i.clientY,l.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(l.touchObject.curX-l.touchObject.startX,2))),r=Math.round(Math.sqrt(Math.pow(l.touchObject.curY-l.touchObject.startY,2))),!l.options.verticalSwiping&&!l.swiping&&r>4?(l.scrolling=!0,!1):(l.options.verticalSwiping===!0&&(l.touchObject.swipeLength=r),t=l.swipeDirection(),void 0!==i.originalEvent&&l.touchObject.swipeLength>4&&(l.swiping=!0,i.preventDefault()),s=(l.options.rtl===!1?1:-1)*(l.touchObject.curX>l.touchObject.startX?1:-1),l.options.verticalSwiping===!0&&(s=l.touchObject.curY>l.touchObject.startY?1:-1),o=l.touchObject.swipeLength,l.touchObject.edgeHit=!1,l.options.infinite===!1&&(0===l.currentSlide&&"right"===t||l.currentSlide>=l.getDotCount()&&"left"===t)&&(o=l.touchObject.swipeLength*l.options.edgeFriction,l.touchObject.edgeHit=!0),l.options.vertical===!1?l.swipeLeft=e+o*s:l.swipeLeft=e+o*(l.$list.height()/l.listWidth)*s,l.options.verticalSwiping===!0&&(l.swipeLeft=e+o*s),l.options.fade!==!0&&l.options.touchMove!==!1&&(l.animating===!0?(l.swipeLeft=null,!1):void l.setCSS(l.swipeLeft))))},e.prototype.swipeStart=function(i){var e,t=this;return t.interrupted=!0,1!==t.touchObject.fingerCount||t.slideCount<=t.options.slidesToShow?(t.touchObject={},!1):(void 0!==i.originalEvent&&void 0!==i.originalEvent.touches&&(e=i.originalEvent.touches[0]),t.touchObject.startX=t.touchObject.curX=void 0!==e?e.pageX:i.clientX,t.touchObject.startY=t.touchObject.curY=void 0!==e?e.pageY:i.clientY,void(t.dragging=!0))},e.prototype.unfilterSlides=e.prototype.slickUnfilter=function(){var i=this;null!==i.$slidesCache&&(i.unload(),i.$slideTrack.children(this.options.slide).detach(),i.$slidesCache.appendTo(i.$slideTrack),i.reinit())},e.prototype.unload=function(){var e=this;i(".slick-cloned",e.$slider).remove(),e.$dots&&e.$dots.remove(),e.$prevArrow&&e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.remove(),e.$nextArrow&&e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.remove(),e.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},e.prototype.unslick=function(i){var e=this;e.$slider.trigger("unslick",[e,i]),e.destroy()},e.prototype.updateArrows=function(){var i,e=this;i=Math.floor(e.options.slidesToShow/2),e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&!e.options.infinite&&(e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),e.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===e.currentSlide?(e.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):e.currentSlide>=e.slideCount-e.options.slidesToShow&&e.options.centerMode===!1?(e.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):e.currentSlide>=e.slideCount-1&&e.options.centerMode===!0&&(e.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},e.prototype.updateDots=function(){var i=this;null!==i.$dots&&(i.$dots.find("li").removeClass("slick-active").end(),i.$dots.find("li").eq(Math.floor(i.currentSlide/i.options.slidesToScroll)).addClass("slick-active"))},e.prototype.visibility=function(){var i=this;i.options.autoplay&&(document[i.hidden]?i.interrupted=!0:i.interrupted=!1)},i.fn.slick=function(){var i,t,o=this,s=arguments[0],n=Array.prototype.slice.call(arguments,1),r=o.length;for(i=0;i<r;i++)if("object"==typeof s||"undefined"==typeof s?o[i].slick=new e(o[i],s):t=o[i].slick[s].apply(o[i].slick,n),"undefined"!=typeof t)return t;return o}});
!function(e){"function"==typeof define&&define.amd?define([],e):"undefined"!=typeof module&&null!==module&&module.exports?module.exports=e:e()}(function(){function e(e){return new CustomEvent(e,P)}function t(e){return e[B]||(e[B]={})}function n(e,n,i,o,a){function c(e){i(e,o)}n=n.split(O);for(var u,r=t(e),d=n.length;d--;)(r[u=n[d]]||(r[u]=[])).push([i,c]),e.addEventListener(u,c)}function i(e,n,i,o){n=n.split(O);var a,c,u,r=t(e),d=n.length;if(r)for(;d--;)if(a=n[d],c=r[a])for(u=c.length;u--;)c[u][0]===i&&(e.removeEventListener(a,c[u][1]),c.splice(u,1))}function o(t,n,i){var o=e(n);i&&L(o,i),t.dispatchEvent(o)}function a(e){function t(e){i?(n(),C(t),o=!0,i=!1):o=!1}var n=e,i=!1,o=!1;this.kick=function(e){i=!0,o||t()},this.end=function(e){var t=n;e&&(o?(n=i?function(){t(),e()}:e,i=!0):e())}}function c(){}function u(e){e.preventDefault()}function r(e){return!!D[e.target.tagName.toLowerCase()]}function d(e){return 1===e.which&&!e.ctrlKey&&!e.altKey}function m(e,t){var n,i;if(e.identifiedTouch)return e.identifiedTouch(t);for(n=-1,i=e.length;++n<i;)if(e[n].identifier===t)return e[n]}function f(e,t){var n=m(e.changedTouches,t.identifier);if(n&&(n.pageX!==t.pageX||n.pageY!==t.pageY))return n}function v(e){d(e)&&(r(e)||(n(document,N.move,s,e),n(document,N.cancel,l,e)))}function s(e,t){y(e,t,e,g)}function l(e,t){g()}function g(){i(document,N.move,s),i(document,N.cancel,l)}function p(e){if(!D[e.target.tagName.toLowerCase()]){var t=e.changedTouches[0],i={target:t.target,pageX:t.pageX,pageY:t.pageY,identifier:t.identifier,touchmove:function(e,t){h(e,t)},touchend:function(e,t){X(e,t)}};n(document,z.move,i.touchmove,i),n(document,z.cancel,i.touchend,i)}}function h(e,t){var n=f(e,t);n&&y(e,t,n,Y)}function X(e,t){m(e.changedTouches,t.identifier)&&Y(t)}function Y(e){i(document,z.move,e.touchmove),i(document,z.cancel,e.touchend)}function y(e,t,n,i){var o=n.pageX-t.pageX,a=n.pageY-t.pageY;o*o+a*a<R*R||w(e,t,n,o,a,i)}function w(e,t,n,i,a,u){var r=e.targetTouches,d=e.timeStamp-t.timeStamp,m={altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,startX:t.pageX,startY:t.pageY,distX:i,distY:a,deltaX:i,deltaY:a,pageX:n.pageX,pageY:n.pageY,velocityX:i/d,velocityY:a/d,identifier:t.identifier,targetTouches:r,finger:r?r.length:1,enableMove:function(){this.moveEnabled=!0,this.enableMove=c,e.preventDefault()}};o(t.target,"movestart",m),u(t)}function T(e,t){var n=t.timer;t.touch=e,t.timeStamp=e.timeStamp,n.kick()}function b(e,t){var n=t.target,o=t.event,a=t.timer;S(),Q(n,o,a,function(){setTimeout(function(){i(n,"click",u)},0)})}function S(){i(document,N.move,T),i(document,N.end,b)}function k(e,t){var n=t.event,i=t.timer,o=f(e,n);o&&(e.preventDefault(),n.targetTouches=e.targetTouches,t.touch=o,t.timeStamp=e.timeStamp,i.kick())}function K(e,t){var n=t.target,i=t.event,o=t.timer;m(e.changedTouches,i.identifier)&&(j(t),Q(n,i,o))}function j(e){i(document,z.move,e.activeTouchmove),i(document,z.end,e.activeTouchend)}function E(e,t,n){var i=n-e.timeStamp;e.distX=t.pageX-e.startX,e.distY=t.pageY-e.startY,e.deltaX=t.pageX-e.pageX,e.deltaY=t.pageY-e.pageY,e.velocityX=.3*e.velocityX+.7*e.deltaX/i,e.velocityY=.3*e.velocityY+.7*e.deltaY/i,e.pageX=t.pageX,e.pageY=t.pageY}function Q(e,t,n,i){n.end(function(){return o(e,"moveend",t),i&&i()})}function q(e){function t(e){E(i,c.touch,c.timeStamp),o(c.target,"move",i)}if(!e.defaultPrevented&&e.moveEnabled){var i={startX:e.startX,startY:e.startY,pageX:e.pageX,pageY:e.pageY,distX:e.distX,distY:e.distY,deltaX:e.deltaX,deltaY:e.deltaY,velocityX:e.velocityX,velocityY:e.velocityY,identifier:e.identifier,targetTouches:e.targetTouches,finger:e.finger},c={target:e.target,event:i,timer:new a(t),touch:void 0,timeStamp:e.timeStamp};void 0===e.identifier?(n(e.target,"click",u),n(document,N.move,T,c),n(document,N.end,b,c)):(c.activeTouchmove=function(e,t){k(e,t)},c.activeTouchend=function(e,t){K(e,t)},n(document,z.move,c.activeTouchmove,c),n(document,z.end,c.activeTouchend,c))}}function A(e){e.enableMove()}function F(e){e.enableMove()}function M(e){e.enableMove()}function x(e){var t=e.handler;e.handler=function(e){for(var n,i=G.length;i--;)e[n=G[i]]=e.originalEvent[n];t.apply(this,arguments)}}var L=Object.assign||window.jQuery&&jQuery.extend,R=8,C=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){return window.setTimeout(function(){e()},25)}}(),D={textarea:!0,input:!0,select:!0,button:!0},N={move:"mousemove",cancel:"mouseup dragstart",end:"mouseup"},z={move:"touchmove",cancel:"touchend",end:"touchend"},O=/\s+/,P={bubbles:!0,cancelable:!0},B=Symbol("events");if(n(document,"mousedown",v),n(document,"touchstart",p),n(document,"movestart",q),window.jQuery){var G="startX startY pageX pageY distX distY deltaX deltaY velocityX velocityY".split(" ");jQuery.event.special.movestart={setup:function(){return n(this,"movestart",A),!1},teardown:function(){return i(this,"movestart",A),!1},add:x},jQuery.event.special.move={setup:function(){return n(this,"movestart",F),!1},teardown:function(){return i(this,"movestart",F),!1},add:x},jQuery.event.special.moveend={setup:function(){return n(this,"movestart",M),!1},teardown:function(){return i(this,"movestart",M),!1},add:x}}});
!function(t){t.fn.twentytwenty=function(e){var e=t.extend({default_offset_pct:.5,orientation:"horizontal",before_label:"Before",after_label:"After",no_overlay:!1},e);return this.each(function(){var n=e.default_offset_pct,a=t(this),i=e.orientation,s="vertical"===i?"down":"left",r="vertical"===i?"up":"right";a.wrap("<div class='twentytwenty-wrapper twentytwenty-"+i+"'></div>"),e.no_overlay||a.append("<div class='twentytwenty-overlay'></div>");var d=a.find("img:first"),c=a.find("img:last");a.append("<div class='twentytwenty-handle'></div>");var l=a.find(".twentytwenty-handle");l.append("<span class='twentytwenty-"+s+"-arrow'></span>"),l.append("<span class='twentytwenty-"+r+"-arrow'></span>"),a.addClass("twentytwenty-container"),d.addClass("twentytwenty-before"),c.addClass("twentytwenty-after");var o=a.find(".twentytwenty-overlay");o.append("<div class='twentytwenty-before-label' data-content='"+e.before_label+"'></div>"),o.append("<div class='twentytwenty-after-label' data-content='"+e.after_label+"'></div>");var w=function(t){var e=d.width(),n=d.height();return{w:e+"px",h:n+"px",cw:t*e+"px",ch:t*n+"px"}},f=function(t){"vertical"===i?(d.css("clip","rect(0,"+t.w+","+t.ch+",0)"),c.css("clip","rect("+t.ch+","+t.w+","+t.h+",0)")):(d.css("clip","rect(0,"+t.cw+","+t.h+",0)"),c.css("clip","rect(0,"+t.w+","+t.h+","+t.cw+")")),a.css("height",t.h)},v=function(t){var e=w(t);l.css("vertical"===i?"top":"left","vertical"===i?e.ch:e.cw),f(e)};t(window).on("resize.twentytwenty",function(t){v(n)});var p=0,y=0,h=0,u=0;l.on("movestart",function(t){(t.distX>t.distY&&t.distX<-t.distY||t.distX<t.distY&&t.distX>-t.distY)&&"vertical"!==i?t.preventDefault():(t.distX<t.distY&&t.distX<-t.distY||t.distX>t.distY&&t.distX>-t.distY)&&"vertical"===i&&t.preventDefault(),a.addClass("active"),p=a.offset().left,y=a.offset().top,h=d.width(),u=d.height()}),l.on("moveend",function(t){a.removeClass("active")}),l.on("move",function(t){a.hasClass("active")&&((n="vertical"===i?(t.pageY-y)/u:(t.pageX-p)/h)<0&&(n=0),n>1&&(n=1),v(n))}),a.find("img").on("mousedown",function(t){t.preventDefault()}),t(window).trigger("resize.twentytwenty")})}}(jQuery);
/*!
Waypoints - 4.0.1
Copyright  2011-2016 Caleb Troughton
Licensed under the MIT license.
https://github.com/imakewebthings/waypoints/blob/master/licenses.txt
*/
!function(){"use strict";function t(o){if(!o)throw new Error("No options passed to Waypoint constructor");if(!o.element)throw new Error("No element option passed to Waypoint constructor");if(!o.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+e,this.options=t.Adapter.extend({},t.defaults,o),this.element=this.options.element,this.adapter=new t.Adapter(this.element),this.callback=o.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=t.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=t.Context.findOrCreateByElement(this.options.context),t.offsetAliases[this.options.offset]&&(this.options.offset=t.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),i[this.key]=this,e+=1}var e=0,i={};t.prototype.queueTrigger=function(t){this.group.queueTrigger(this,t)},t.prototype.trigger=function(t){this.enabled&&this.callback&&this.callback.apply(this,t)},t.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete i[this.key]},t.prototype.disable=function(){return this.enabled=!1,this},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},t.prototype.next=function(){return this.group.next(this)},t.prototype.previous=function(){return this.group.previous(this)},t.invokeAll=function(t){var e=[];for(var o in i)e.push(i[o]);for(var n=0,r=e.length;r>n;n++)e[n][t]()},t.destroyAll=function(){t.invokeAll("destroy")},t.disableAll=function(){t.invokeAll("disable")},t.enableAll=function(){t.Context.refreshAll();for(var e in i)i[e].enabled=!0;return this},t.refreshAll=function(){t.Context.refreshAll()},t.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},t.viewportWidth=function(){return document.documentElement.clientWidth},t.adapters=[],t.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},t.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=t}(),function(){"use strict";function t(t){window.setTimeout(t,1e3/60)}function e(t){this.element=t,this.Adapter=n.Adapter,this.adapter=new this.Adapter(t),this.key="waypoint-context-"+i,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},t.waypointContextKey=this.key,o[t.waypointContextKey]=this,i+=1,n.windowContext||(n.windowContext=!0,n.windowContext=new e(window)),this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var i=0,o={},n=window.Waypoint,r=window.onload;e.prototype.add=function(t){var e=t.options.horizontal?"horizontal":"vertical";this.waypoints[e][t.key]=t,this.refresh()},e.prototype.checkEmpty=function(){var t=this.Adapter.isEmptyObject(this.waypoints.horizontal),e=this.Adapter.isEmptyObject(this.waypoints.vertical),i=this.element==this.element.window;t&&e&&!i&&(this.adapter.off(".waypoints"),delete o[this.key])},e.prototype.createThrottledResizeHandler=function(){function t(){e.handleResize(),e.didResize=!1}var e=this;this.adapter.on("resize.waypoints",function(){e.didResize||(e.didResize=!0,n.requestAnimationFrame(t))})},e.prototype.createThrottledScrollHandler=function(){function t(){e.handleScroll(),e.didScroll=!1}var e=this;this.adapter.on("scroll.waypoints",function(){(!e.didScroll||n.isTouch)&&(e.didScroll=!0,n.requestAnimationFrame(t))})},e.prototype.handleResize=function(){n.Context.refreshAll()},e.prototype.handleScroll=function(){var t={},e={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var i in e){var o=e[i],n=o.newScroll>o.oldScroll,r=n?o.forward:o.backward;for(var s in this.waypoints[i]){var a=this.waypoints[i][s];if(null!==a.triggerPoint){var l=o.oldScroll<a.triggerPoint,h=o.newScroll>=a.triggerPoint,p=l&&h,u=!l&&!h;(p||u)&&(a.queueTrigger(r),t[a.group.id]=a.group)}}}for(var c in t)t[c].flushTriggers();this.oldScroll={x:e.horizontal.newScroll,y:e.vertical.newScroll}},e.prototype.innerHeight=function(){return this.element==this.element.window?n.viewportHeight():this.adapter.innerHeight()},e.prototype.remove=function(t){delete this.waypoints[t.axis][t.key],this.checkEmpty()},e.prototype.innerWidth=function(){return this.element==this.element.window?n.viewportWidth():this.adapter.innerWidth()},e.prototype.destroy=function(){var t=[];for(var e in this.waypoints)for(var i in this.waypoints[e])t.push(this.waypoints[e][i]);for(var o=0,n=t.length;n>o;o++)t[o].destroy()},e.prototype.refresh=function(){var t,e=this.element==this.element.window,i=e?void 0:this.adapter.offset(),o={};this.handleScroll(),t={horizontal:{contextOffset:e?0:i.left,contextScroll:e?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:e?0:i.top,contextScroll:e?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var r in t){var s=t[r];for(var a in this.waypoints[r]){var l,h,p,u,c,d=this.waypoints[r][a],f=d.options.offset,w=d.triggerPoint,y=0,g=null==w;d.element!==d.element.window&&(y=d.adapter.offset()[s.offsetProp]),"function"==typeof f?f=f.apply(d):"string"==typeof f&&(f=parseFloat(f),d.options.offset.indexOf("%")>-1&&(f=Math.ceil(s.contextDimension*f/100))),l=s.contextScroll-s.contextOffset,d.triggerPoint=Math.floor(y+l-f),h=w<s.oldScroll,p=d.triggerPoint>=s.oldScroll,u=h&&p,c=!h&&!p,!g&&u?(d.queueTrigger(s.backward),o[d.group.id]=d.group):!g&&c?(d.queueTrigger(s.forward),o[d.group.id]=d.group):g&&s.oldScroll>=d.triggerPoint&&(d.queueTrigger(s.forward),o[d.group.id]=d.group)}}return n.requestAnimationFrame(function(){for(var t in o)o[t].flushTriggers()}),this},e.findOrCreateByElement=function(t){return e.findByElement(t)||new e(t)},e.refreshAll=function(){for(var t in o)o[t].refresh()},e.findByElement=function(t){return o[t.waypointContextKey]},window.onload=function(){r&&r(),e.refreshAll()},n.requestAnimationFrame=function(e){var i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||t;i.call(window,e)},n.Context=e}(),function(){"use strict";function t(t,e){return t.triggerPoint-e.triggerPoint}function e(t,e){return e.triggerPoint-t.triggerPoint}function i(t){this.name=t.name,this.axis=t.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),o[this.axis][this.name]=this}var o={vertical:{},horizontal:{}},n=window.Waypoint;i.prototype.add=function(t){this.waypoints.push(t)},i.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},i.prototype.flushTriggers=function(){for(var i in this.triggerQueues){var o=this.triggerQueues[i],n="up"===i||"left"===i;o.sort(n?e:t);for(var r=0,s=o.length;s>r;r+=1){var a=o[r];(a.options.continuous||r===o.length-1)&&a.trigger([i])}}this.clearTriggerQueues()},i.prototype.next=function(e){this.waypoints.sort(t);var i=n.Adapter.inArray(e,this.waypoints),o=i===this.waypoints.length-1;return o?null:this.waypoints[i+1]},i.prototype.previous=function(e){this.waypoints.sort(t);var i=n.Adapter.inArray(e,this.waypoints);return i?this.waypoints[i-1]:null},i.prototype.queueTrigger=function(t,e){this.triggerQueues[e].push(t)},i.prototype.remove=function(t){var e=n.Adapter.inArray(t,this.waypoints);e>-1&&this.waypoints.splice(e,1)},i.prototype.first=function(){return this.waypoints[0]},i.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},i.findOrCreate=function(t){return o[t.axis][t.name]||new i(t)},n.Group=i}(),function(){"use strict";function t(t){this.$element=e(t)}var e=window.jQuery,i=window.Waypoint;e.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(e,i){t.prototype[i]=function(){var t=Array.prototype.slice.call(arguments);return this.$element[i].apply(this.$element,t)}}),e.each(["extend","inArray","isEmptyObject"],function(i,o){t[o]=e[o]}),i.adapters.push({name:"jquery",Adapter:t}),i.Adapter=t}(),function(){"use strict";function t(t){return function(){var i=[],o=arguments[0];return t.isFunction(arguments[0])&&(o=t.extend({},arguments[1]),o.handler=arguments[0]),this.each(function(){var n=t.extend({},o,{element:this});"string"==typeof n.context&&(n.context=t(this).closest(n.context)[0]),i.push(new e(n))}),i}}var e=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=t(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=t(window.Zepto))}();
/*! lightgallery - v1.6.10 - 2018-05-01
* http://sachinchoolur.github.io/lightGallery/
* Copyright (c) 2018 Sachin N; Licensed GPLv3 */
!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):"object"==typeof module&&module.exports?module.exports=b(require("jquery")):b(a.jQuery)}(this,function(a){!function(){"use strict";function b(b,d){if(this.el=b,this.$el=a(b),this.s=a.extend({},c,d),this.s.dynamic&&"undefined"!==this.s.dynamicEl&&this.s.dynamicEl.constructor===Array&&!this.s.dynamicEl.length)throw"When using dynamic mode, you must also define dynamicEl as an Array.";return this.modules={},this.lGalleryOn=!1,this.lgBusy=!1,this.hideBartimeout=!1,this.isTouch="ontouchstart"in document.documentElement,this.s.slideEndAnimatoin&&(this.s.hideControlOnEnd=!1),this.s.dynamic?this.$items=this.s.dynamicEl:"this"===this.s.selector?this.$items=this.$el:""!==this.s.selector?this.s.selectWithin?this.$items=a(this.s.selectWithin).find(this.s.selector):this.$items=this.$el.find(a(this.s.selector)):this.$items=this.$el.children(),this.$slide="",this.$outer="",this.init(),this}var c={mode:"lg-slide",cssEasing:"ease",easing:"linear",speed:600,height:"100%",width:"100%",addClass:"",startClass:"lg-start-zoom",backdropDuration:150,hideBarsDelay:6e3,useLeft:!1,closable:!0,loop:!0,escKey:!0,keyPress:!0,controls:!0,slideEndAnimatoin:!0,hideControlOnEnd:!1,mousewheel:!0,getCaptionFromTitleOrAlt:!0,appendSubHtmlTo:".lg-sub-html",subHtmlSelectorRelative:!1,preload:1,showAfterLoad:!0,selector:"",selectWithin:"",nextHtml:"",prevHtml:"",index:!1,iframeMaxWidth:"100%",download:!0,counter:!0,appendCounterTo:".lg-toolbar",swipeThreshold:50,enableSwipe:!0,enableDrag:!0,dynamic:!1,dynamicEl:[],galleryId:1};b.prototype.init=function(){var b=this;b.s.preload>b.$items.length&&(b.s.preload=b.$items.length);var c=window.location.hash;c.indexOf("lg="+this.s.galleryId)>0&&(b.index=parseInt(c.split("&slide=")[1],10),a("body").addClass("lg-from-hash"),a("body").hasClass("lg-on")||(setTimeout(function(){b.build(b.index)}),a("body").addClass("lg-on"))),b.s.dynamic?(b.$el.trigger("onBeforeOpen.lg"),b.index=b.s.index||0,a("body").hasClass("lg-on")||setTimeout(function(){b.build(b.index),a("body").addClass("lg-on")})):b.$items.on("click.lgcustom",function(c){try{c.preventDefault(),c.preventDefault()}catch(a){c.returnValue=!1}b.$el.trigger("onBeforeOpen.lg"),b.index=b.s.index||b.$items.index(this),a("body").hasClass("lg-on")||(b.build(b.index),a("body").addClass("lg-on"))})},b.prototype.build=function(b){var c=this;c.structure(),a.each(a.fn.lightGallery.modules,function(b){c.modules[b]=new a.fn.lightGallery.modules[b](c.el)}),c.slide(b,!1,!1,!1),c.s.keyPress&&c.keyPress(),c.$items.length>1?(c.arrow(),setTimeout(function(){c.enableDrag(),c.enableSwipe()},50),c.s.mousewheel&&c.mousewheel()):c.$slide.on("click.lg",function(){c.$el.trigger("onSlideClick.lg")}),c.counter(),c.closeGallery(),c.$el.trigger("onAfterOpen.lg"),c.$outer.on("mousemove.lg click.lg touchstart.lg",function(){c.$outer.removeClass("lg-hide-items"),clearTimeout(c.hideBartimeout),c.hideBartimeout=setTimeout(function(){c.$outer.addClass("lg-hide-items")},c.s.hideBarsDelay)}),c.$outer.trigger("mousemove.lg")},b.prototype.structure=function(){var b,c="",d="",e=0,f="",g=this;for(a("body").append('<div class="lg-backdrop"></div>'),a(".lg-backdrop").css("transition-duration",this.s.backdropDuration+"ms"),e=0;e<this.$items.length;e++)c+='<div class="lg-item"></div>';if(this.s.controls&&this.$items.length>1&&(d='<div class="lg-actions"><button class="lg-prev lg-icon">'+this.s.prevHtml+'</button><button class="lg-next lg-icon">'+this.s.nextHtml+"</button></div>"),".lg-sub-html"===this.s.appendSubHtmlTo&&(f='<div class="lg-sub-html"></div>'),b='<div class="lg-outer '+this.s.addClass+" "+this.s.startClass+'"><div class="lg" style="width:'+this.s.width+"; height:"+this.s.height+'"><div class="lg-inner">'+c+'</div><div class="lg-toolbar lg-group"><span class="lg-close lg-icon"></span></div>'+d+f+"</div></div>",a("body").append(b),this.$outer=a(".lg-outer"),this.$slide=this.$outer.find(".lg-item"),this.s.useLeft?(this.$outer.addClass("lg-use-left"),this.s.mode="lg-slide"):this.$outer.addClass("lg-use-css3"),g.setTop(),a(window).on("resize.lg orientationchange.lg",function(){setTimeout(function(){g.setTop()},100)}),this.$slide.eq(this.index).addClass("lg-current"),this.doCss()?this.$outer.addClass("lg-css3"):(this.$outer.addClass("lg-css"),this.s.speed=0),this.$outer.addClass(this.s.mode),this.s.enableDrag&&this.$items.length>1&&this.$outer.addClass("lg-grab"),this.s.showAfterLoad&&this.$outer.addClass("lg-show-after-load"),this.doCss()){var h=this.$outer.find(".lg-inner");h.css("transition-timing-function",this.s.cssEasing),h.css("transition-duration",this.s.speed+"ms")}setTimeout(function(){a(".lg-backdrop").addClass("in")}),setTimeout(function(){g.$outer.addClass("lg-visible")},this.s.backdropDuration),this.s.download&&this.$outer.find(".lg-toolbar").append('<a id="lg-download" target="_blank" download class="lg-download lg-icon"></a>'),this.prevScrollTop=a(window).scrollTop()},b.prototype.setTop=function(){if("100%"!==this.s.height){var b=a(window).height(),c=(b-parseInt(this.s.height,10))/2,d=this.$outer.find(".lg");b>=parseInt(this.s.height,10)?d.css("top",c+"px"):d.css("top","0px")}},b.prototype.doCss=function(){return!!function(){var a=["transition","MozTransition","WebkitTransition","OTransition","msTransition","KhtmlTransition"],b=document.documentElement,c=0;for(c=0;c<a.length;c++)if(a[c]in b.style)return!0}()},b.prototype.isVideo=function(a,b){var c;if(c=this.s.dynamic?this.s.dynamicEl[b].html:this.$items.eq(b).attr("data-html"),!a)return c?{html5:!0}:(console.error("lightGallery :- data-src is not pvovided on slide item "+(b+1)+". Please make sure the selector property is properly configured. More info - http://sachinchoolur.github.io/lightGallery/demos/html-markup.html"),!1);var d=a.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com)\/(?:watch\?v=|embed\/)?([a-z0-9\-\_\%]+)/i),e=a.match(/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_]+)/i),f=a.match(/\/\/(?:www\.)?dai.ly\/([0-9a-z\-_]+)/i),g=a.match(/\/\/(?:www\.)?(?:vk\.com|vkontakte\.ru)\/(?:video_ext\.php\?)(.*)/i);return d?{youtube:d}:e?{vimeo:e}:f?{dailymotion:f}:g?{vk:g}:void 0},b.prototype.counter=function(){this.s.counter&&a(this.s.appendCounterTo).append('<div id="lg-counter"><span id="lg-counter-current">'+(parseInt(this.index,10)+1)+'</span> / <span id="lg-counter-all">'+this.$items.length+"</span></div>")},b.prototype.addHtml=function(b){var c,d,e=null;if(this.s.dynamic?this.s.dynamicEl[b].subHtmlUrl?c=this.s.dynamicEl[b].subHtmlUrl:e=this.s.dynamicEl[b].subHtml:(d=this.$items.eq(b),d.attr("data-sub-html-url")?c=d.attr("data-sub-html-url"):(e=d.attr("data-sub-html"),this.s.getCaptionFromTitleOrAlt&&!e&&(e=d.attr("title")||d.find("img").first().attr("alt")))),!c)if(void 0!==e&&null!==e){var f=e.substring(0,1);"."!==f&&"#"!==f||(e=this.s.subHtmlSelectorRelative&&!this.s.dynamic?d.find(e).html():a(e).html())}else e="";".lg-sub-html"===this.s.appendSubHtmlTo?c?this.$outer.find(this.s.appendSubHtmlTo).load(c):this.$outer.find(this.s.appendSubHtmlTo).html(e):c?this.$slide.eq(b).load(c):this.$slide.eq(b).append(e),void 0!==e&&null!==e&&(""===e?this.$outer.find(this.s.appendSubHtmlTo).addClass("lg-empty-html"):this.$outer.find(this.s.appendSubHtmlTo).removeClass("lg-empty-html")),this.$el.trigger("onAfterAppendSubHtml.lg",[b])},b.prototype.preload=function(a){var b=1,c=1;for(b=1;b<=this.s.preload&&!(b>=this.$items.length-a);b++)this.loadContent(a+b,!1,0);for(c=1;c<=this.s.preload&&!(a-c<0);c++)this.loadContent(a-c,!1,0)},b.prototype.loadContent=function(b,c,d){var e,f,g,h,i,j,k=this,l=!1,m=function(b){for(var c=[],d=[],e=0;e<b.length;e++){var g=b[e].split(" ");""===g[0]&&g.splice(0,1),d.push(g[0]),c.push(g[1])}for(var h=a(window).width(),i=0;i<c.length;i++)if(parseInt(c[i],10)>h){f=d[i];break}};if(k.s.dynamic){if(k.s.dynamicEl[b].poster&&(l=!0,g=k.s.dynamicEl[b].poster),j=k.s.dynamicEl[b].html,f=k.s.dynamicEl[b].src,k.s.dynamicEl[b].responsive){m(k.s.dynamicEl[b].responsive.split(","))}h=k.s.dynamicEl[b].srcset,i=k.s.dynamicEl[b].sizes}else{if(k.$items.eq(b).attr("data-poster")&&(l=!0,g=k.$items.eq(b).attr("data-poster")),j=k.$items.eq(b).attr("data-html"),f=k.$items.eq(b).attr("href")||k.$items.eq(b).attr("data-src"),k.$items.eq(b).attr("data-responsive")){m(k.$items.eq(b).attr("data-responsive").split(","))}h=k.$items.eq(b).attr("data-srcset"),i=k.$items.eq(b).attr("data-sizes")}var n=!1;k.s.dynamic?k.s.dynamicEl[b].iframe&&(n=!0):"true"===k.$items.eq(b).attr("data-iframe")&&(n=!0);var o=k.isVideo(f,b);if(!k.$slide.eq(b).hasClass("lg-loaded")){if(n)k.$slide.eq(b).prepend('<div class="lg-video-cont lg-has-iframe" style="max-width:'+k.s.iframeMaxWidth+'"><div class="lg-video"><iframe class="lg-object" frameborder="0" src="'+f+'"  allowfullscreen="true"></iframe></div></div>');else if(l){var p="";p=o&&o.youtube?"lg-has-youtube":o&&o.vimeo?"lg-has-vimeo":"lg-has-html5",k.$slide.eq(b).prepend('<div class="lg-video-cont '+p+' "><div class="lg-video"><span class="lg-video-play"></span><img class="lg-object lg-has-poster" src="'+g+'" /></div></div>')}else o?(k.$slide.eq(b).prepend('<div class="lg-video-cont "><div class="lg-video"></div></div>'),k.$el.trigger("hasVideo.lg",[b,f,j])):k.$slide.eq(b).prepend('<div class="lg-img-wrap"><img class="lg-object lg-image" src="'+f+'" /></div>');if(k.$el.trigger("onAferAppendSlide.lg",[b]),e=k.$slide.eq(b).find(".lg-object"),i&&e.attr("sizes",i),h){e.attr("srcset",h);try{picturefill({elements:[e[0]]})}catch(a){console.warn("lightGallery :- If you want srcset to be supported for older browser please include picturefil version 2 javascript library in your document.")}}".lg-sub-html"!==this.s.appendSubHtmlTo&&k.addHtml(b),k.$slide.eq(b).addClass("lg-loaded")}k.$slide.eq(b).find(".lg-object").on("load.lg error.lg",function(){var c=0;d&&!a("body").hasClass("lg-from-hash")&&(c=d),setTimeout(function(){k.$slide.eq(b).addClass("lg-complete"),k.$el.trigger("onSlideItemLoad.lg",[b,d||0])},c)}),o&&o.html5&&!l&&k.$slide.eq(b).addClass("lg-complete"),!0===c&&(k.$slide.eq(b).hasClass("lg-complete")?k.preload(b):k.$slide.eq(b).find(".lg-object").on("load.lg error.lg",function(){k.preload(b)}))},b.prototype.slide=function(b,c,d,e){var f=this.$outer.find(".lg-current").index(),g=this;if(!g.lGalleryOn||f!==b){var h=this.$slide.length,i=g.lGalleryOn?this.s.speed:0;if(!g.lgBusy){if(this.s.download){var j;j=g.s.dynamic?!1!==g.s.dynamicEl[b].downloadUrl&&(g.s.dynamicEl[b].downloadUrl||g.s.dynamicEl[b].src):"false"!==g.$items.eq(b).attr("data-download-url")&&(g.$items.eq(b).attr("data-download-url")||g.$items.eq(b).attr("href")||g.$items.eq(b).attr("data-src")),j?(a("#lg-download").attr("href",j),g.$outer.removeClass("lg-hide-download")):g.$outer.addClass("lg-hide-download")}if(this.$el.trigger("onBeforeSlide.lg",[f,b,c,d]),g.lgBusy=!0,clearTimeout(g.hideBartimeout),".lg-sub-html"===this.s.appendSubHtmlTo&&setTimeout(function(){g.addHtml(b)},i),this.arrowDisable(b),e||(b<f?e="prev":b>f&&(e="next")),c){this.$slide.removeClass("lg-prev-slide lg-current lg-next-slide");var k,l;h>2?(k=b-1,l=b+1,0===b&&f===h-1?(l=0,k=h-1):b===h-1&&0===f&&(l=0,k=h-1)):(k=0,l=1),"prev"===e?g.$slide.eq(l).addClass("lg-next-slide"):g.$slide.eq(k).addClass("lg-prev-slide"),g.$slide.eq(b).addClass("lg-current")}else g.$outer.addClass("lg-no-trans"),this.$slide.removeClass("lg-prev-slide lg-next-slide"),"prev"===e?(this.$slide.eq(b).addClass("lg-prev-slide"),this.$slide.eq(f).addClass("lg-next-slide")):(this.$slide.eq(b).addClass("lg-next-slide"),this.$slide.eq(f).addClass("lg-prev-slide")),setTimeout(function(){g.$slide.removeClass("lg-current"),g.$slide.eq(b).addClass("lg-current"),g.$outer.removeClass("lg-no-trans")},50);g.lGalleryOn?(setTimeout(function(){g.loadContent(b,!0,0)},this.s.speed+50),setTimeout(function(){g.lgBusy=!1,g.$el.trigger("onAfterSlide.lg",[f,b,c,d])},this.s.speed)):(g.loadContent(b,!0,g.s.backdropDuration),g.lgBusy=!1,g.$el.trigger("onAfterSlide.lg",[f,b,c,d])),g.lGalleryOn=!0,this.s.counter&&a("#lg-counter-current").text(b+1)}g.index=b}},b.prototype.goToNextSlide=function(a){var b=this,c=b.s.loop;a&&b.$slide.length<3&&(c=!1),b.lgBusy||(b.index+1<b.$slide.length?(b.index++,b.$el.trigger("onBeforeNextSlide.lg",[b.index]),b.slide(b.index,a,!1,"next")):c?(b.index=0,b.$el.trigger("onBeforeNextSlide.lg",[b.index]),b.slide(b.index,a,!1,"next")):b.s.slideEndAnimatoin&&!a&&(b.$outer.addClass("lg-right-end"),setTimeout(function(){b.$outer.removeClass("lg-right-end")},400)))},b.prototype.goToPrevSlide=function(a){var b=this,c=b.s.loop;a&&b.$slide.length<3&&(c=!1),b.lgBusy||(b.index>0?(b.index--,b.$el.trigger("onBeforePrevSlide.lg",[b.index,a]),b.slide(b.index,a,!1,"prev")):c?(b.index=b.$items.length-1,b.$el.trigger("onBeforePrevSlide.lg",[b.index,a]),b.slide(b.index,a,!1,"prev")):b.s.slideEndAnimatoin&&!a&&(b.$outer.addClass("lg-left-end"),setTimeout(function(){b.$outer.removeClass("lg-left-end")},400)))},b.prototype.keyPress=function(){var b=this;this.$items.length>1&&a(window).on("keyup.lg",function(a){b.$items.length>1&&(37===a.keyCode&&(a.preventDefault(),b.goToPrevSlide()),39===a.keyCode&&(a.preventDefault(),b.goToNextSlide()))}),a(window).on("keydown.lg",function(a){!0===b.s.escKey&&27===a.keyCode&&(a.preventDefault(),b.$outer.hasClass("lg-thumb-open")?b.$outer.removeClass("lg-thumb-open"):b.destroy())})},b.prototype.arrow=function(){var a=this;this.$outer.find(".lg-prev").on("click.lg",function(){a.goToPrevSlide()}),this.$outer.find(".lg-next").on("click.lg",function(){a.goToNextSlide()})},b.prototype.arrowDisable=function(a){!this.s.loop&&this.s.hideControlOnEnd&&(a+1<this.$slide.length?this.$outer.find(".lg-next").removeAttr("disabled").removeClass("disabled"):this.$outer.find(".lg-next").attr("disabled","disabled").addClass("disabled"),a>0?this.$outer.find(".lg-prev").removeAttr("disabled").removeClass("disabled"):this.$outer.find(".lg-prev").attr("disabled","disabled").addClass("disabled"))},b.prototype.setTranslate=function(a,b,c){this.s.useLeft?a.css("left",b):a.css({transform:"translate3d("+b+"px, "+c+"px, 0px)"})},b.prototype.touchMove=function(b,c){var d=c-b;Math.abs(d)>15&&(this.$outer.addClass("lg-dragging"),this.setTranslate(this.$slide.eq(this.index),d,0),this.setTranslate(a(".lg-prev-slide"),-this.$slide.eq(this.index).width()+d,0),this.setTranslate(a(".lg-next-slide"),this.$slide.eq(this.index).width()+d,0))},b.prototype.touchEnd=function(a){var b=this;"lg-slide"!==b.s.mode&&b.$outer.addClass("lg-slide"),this.$slide.not(".lg-current, .lg-prev-slide, .lg-next-slide").css("opacity","0"),setTimeout(function(){b.$outer.removeClass("lg-dragging"),a<0&&Math.abs(a)>b.s.swipeThreshold?b.goToNextSlide(!0):a>0&&Math.abs(a)>b.s.swipeThreshold?b.goToPrevSlide(!0):Math.abs(a)<5&&b.$el.trigger("onSlideClick.lg"),b.$slide.removeAttr("style")}),setTimeout(function(){b.$outer.hasClass("lg-dragging")||"lg-slide"===b.s.mode||b.$outer.removeClass("lg-slide")},b.s.speed+100)},b.prototype.enableSwipe=function(){var a=this,b=0,c=0,d=!1;a.s.enableSwipe&&a.doCss()&&(a.$slide.on("touchstart.lg",function(c){a.$outer.hasClass("lg-zoomed")||a.lgBusy||(c.preventDefault(),a.manageSwipeClass(),b=c.originalEvent.targetTouches[0].pageX)}),a.$slide.on("touchmove.lg",function(e){a.$outer.hasClass("lg-zoomed")||(e.preventDefault(),c=e.originalEvent.targetTouches[0].pageX,a.touchMove(b,c),d=!0)}),a.$slide.on("touchend.lg",function(){a.$outer.hasClass("lg-zoomed")||(d?(d=!1,a.touchEnd(c-b)):a.$el.trigger("onSlideClick.lg"))}))},b.prototype.enableDrag=function(){var b=this,c=0,d=0,e=!1,f=!1;b.s.enableDrag&&b.doCss()&&(b.$slide.on("mousedown.lg",function(d){b.$outer.hasClass("lg-zoomed")||b.lgBusy||a(d.target).text().trim()||(d.preventDefault(),b.manageSwipeClass(),c=d.pageX,e=!0,b.$outer.scrollLeft+=1,b.$outer.scrollLeft-=1,b.$outer.removeClass("lg-grab").addClass("lg-grabbing"),b.$el.trigger("onDragstart.lg"))}),a(window).on("mousemove.lg",function(a){e&&(f=!0,d=a.pageX,b.touchMove(c,d),b.$el.trigger("onDragmove.lg"))}),a(window).on("mouseup.lg",function(g){f?(f=!1,b.touchEnd(d-c),b.$el.trigger("onDragend.lg")):(a(g.target).hasClass("lg-object")||a(g.target).hasClass("lg-video-play"))&&b.$el.trigger("onSlideClick.lg"),e&&(e=!1,b.$outer.removeClass("lg-grabbing").addClass("lg-grab"))}))},b.prototype.manageSwipeClass=function(){var a=this.index+1,b=this.index-1;this.s.loop&&this.$slide.length>2&&(0===this.index?b=this.$slide.length-1:this.index===this.$slide.length-1&&(a=0)),this.$slide.removeClass("lg-next-slide lg-prev-slide"),b>-1&&this.$slide.eq(b).addClass("lg-prev-slide"),this.$slide.eq(a).addClass("lg-next-slide")},b.prototype.mousewheel=function(){var a=this;a.$outer.on("mousewheel.lg",function(b){b.deltaY&&(b.deltaY>0?a.goToPrevSlide():a.goToNextSlide(),b.preventDefault())})},b.prototype.closeGallery=function(){var b=this,c=!1;this.$outer.find(".lg-close").on("click.lg",function(){b.destroy()}),b.s.closable&&(b.$outer.on("mousedown.lg",function(b){c=!!(a(b.target).is(".lg-outer")||a(b.target).is(".lg-item ")||a(b.target).is(".lg-img-wrap"))}),b.$outer.on("mousemove.lg",function(){c=!1}),b.$outer.on("mouseup.lg",function(d){(a(d.target).is(".lg-outer")||a(d.target).is(".lg-item ")||a(d.target).is(".lg-img-wrap")&&c)&&(b.$outer.hasClass("lg-dragging")||b.destroy())}))},b.prototype.destroy=function(b){var c=this;b||(c.$el.trigger("onBeforeClose.lg"),a(window).scrollTop(c.prevScrollTop)),b&&(c.s.dynamic||this.$items.off("click.lg click.lgcustom"),a.removeData(c.el,"lightGallery")),this.$el.off(".lg.tm"),a.each(a.fn.lightGallery.modules,function(a){c.modules[a]&&c.modules[a].destroy()}),this.lGalleryOn=!1,clearTimeout(c.hideBartimeout),this.hideBartimeout=!1,a(window).off(".lg"),a("body").removeClass("lg-on lg-from-hash"),c.$outer&&c.$outer.removeClass("lg-visible"),a(".lg-backdrop").removeClass("in"),setTimeout(function(){c.$outer&&c.$outer.remove(),a(".lg-backdrop").remove(),b||c.$el.trigger("onCloseAfter.lg")},c.s.backdropDuration+50)},a.fn.lightGallery=function(c){return this.each(function(){if(a.data(this,"lightGallery"))try{a(this).data("lightGallery").init()}catch(a){console.error("lightGallery has not initiated properly")}else a.data(this,"lightGallery",new b(this,c))})},a.fn.lightGallery.modules={}}()}),function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):"object"==typeof exports?module.exports=b(require("jquery")):b(jQuery)}(0,function(a){!function(){"use strict";var b={autoplay:!1,pause:5e3,progressBar:!0,fourceAutoplay:!1,autoplayControls:!0,appendAutoplayControlsTo:".lg-toolbar"},c=function(c){return this.core=a(c).data("lightGallery"),this.$el=a(c),!(this.core.$items.length<2)&&(this.core.s=a.extend({},b,this.core.s),this.interval=!1,this.fromAuto=!0,this.canceledOnTouch=!1,this.fourceAutoplayTemp=this.core.s.fourceAutoplay,this.core.doCss()||(this.core.s.progressBar=!1),this.init(),this)};c.prototype.init=function(){var a=this;a.core.s.autoplayControls&&a.controls(),a.core.s.progressBar&&a.core.$outer.find(".lg").append('<div class="lg-progress-bar"><div class="lg-progress"></div></div>'),a.progress(),a.core.s.autoplay&&a.$el.one("onSlideItemLoad.lg.tm",function(){a.startlAuto()}),a.$el.on("onDragstart.lg.tm touchstart.lg.tm",function(){a.interval&&(a.cancelAuto(),a.canceledOnTouch=!0)}),a.$el.on("onDragend.lg.tm touchend.lg.tm onSlideClick.lg.tm",function(){!a.interval&&a.canceledOnTouch&&(a.startlAuto(),a.canceledOnTouch=!1)})},c.prototype.progress=function(){var a,b,c=this;c.$el.on("onBeforeSlide.lg.tm",function(){c.core.s.progressBar&&c.fromAuto&&(a=c.core.$outer.find(".lg-progress-bar"),b=c.core.$outer.find(".lg-progress"),c.interval&&(b.removeAttr("style"),a.removeClass("lg-start"),setTimeout(function(){b.css("transition","width "+(c.core.s.speed+c.core.s.pause)+"ms ease 0s"),a.addClass("lg-start")},20))),c.fromAuto||c.core.s.fourceAutoplay||c.cancelAuto(),c.fromAuto=!1})},c.prototype.controls=function(){var b=this;a(this.core.s.appendAutoplayControlsTo).append('<span class="lg-autoplay-button lg-icon"></span>'),b.core.$outer.find(".lg-autoplay-button").on("click.lg",function(){a(b.core.$outer).hasClass("lg-show-autoplay")?(b.cancelAuto(),b.core.s.fourceAutoplay=!1):b.interval||(b.startlAuto(),b.core.s.fourceAutoplay=b.fourceAutoplayTemp)})},c.prototype.startlAuto=function(){var a=this;a.core.$outer.find(".lg-progress").css("transition","width "+(a.core.s.speed+a.core.s.pause)+"ms ease 0s"),a.core.$outer.addClass("lg-show-autoplay"),a.core.$outer.find(".lg-progress-bar").addClass("lg-start"),a.interval=setInterval(function(){a.core.index+1<a.core.$items.length?a.core.index++:a.core.index=0,a.fromAuto=!0,a.core.slide(a.core.index,!1,!1,"next")},a.core.s.speed+a.core.s.pause)},c.prototype.cancelAuto=function(){clearInterval(this.interval),this.interval=!1,this.core.$outer.find(".lg-progress").removeAttr("style"),this.core.$outer.removeClass("lg-show-autoplay"),this.core.$outer.find(".lg-progress-bar").removeClass("lg-start")},c.prototype.destroy=function(){this.cancelAuto(),this.core.$outer.find(".lg-progress-bar").remove()},a.fn.lightGallery.modules.autoplay=c}()}),function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):"object"==typeof exports?module.exports=b(require("jquery")):b(jQuery)}(0,function(a){!function(){"use strict";var b={fullScreen:!0},c=function(c){return this.core=a(c).data("lightGallery"),this.$el=a(c),this.core.s=a.extend({},b,this.core.s),this.init(),this};c.prototype.init=function(){var a="";if(this.core.s.fullScreen){if(!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))return;a='<span class="lg-fullscreen lg-icon"></span>',this.core.$outer.find(".lg-toolbar").append(a),this.fullScreen()}},c.prototype.requestFullscreen=function(){var a=document.documentElement;a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen()},c.prototype.exitFullscreen=function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},c.prototype.fullScreen=function(){var b=this;a(document).on("fullscreenchange.lg webkitfullscreenchange.lg mozfullscreenchange.lg MSFullscreenChange.lg",function(){b.core.$outer.toggleClass("lg-fullscreen-on")}),this.core.$outer.find(".lg-fullscreen").on("click.lg",function(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?b.exitFullscreen():b.requestFullscreen()})},c.prototype.destroy=function(){this.exitFullscreen(),a(document).off("fullscreenchange.lg webkitfullscreenchange.lg mozfullscreenchange.lg MSFullscreenChange.lg")},a.fn.lightGallery.modules.fullscreen=c}()}),function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):"object"==typeof exports?module.exports=b(require("jquery")):b(jQuery)}(0,function(a){!function(){"use strict";var b={pager:!1},c=function(c){return this.core=a(c).data("lightGallery"),this.$el=a(c),this.core.s=a.extend({},b,this.core.s),this.core.s.pager&&this.core.$items.length>1&&this.init(),this};c.prototype.init=function(){var b,c,d,e=this,f="";if(e.core.$outer.find(".lg").append('<div class="lg-pager-outer"></div>'),e.core.s.dynamic)for(var g=0;g<e.core.s.dynamicEl.length;g++)f+='<span class="lg-pager-cont"> <span class="lg-pager"></span><div class="lg-pager-thumb-cont"><span class="lg-caret"></span> <img src="'+e.core.s.dynamicEl[g].thumb+'" /></div></span>';else e.core.$items.each(function(){e.core.s.exThumbImage?f+='<span class="lg-pager-cont"> <span class="lg-pager"></span><div class="lg-pager-thumb-cont"><span class="lg-caret"></span> <img src="'+a(this).attr(e.core.s.exThumbImage)+'" /></div></span>':f+='<span class="lg-pager-cont"> <span class="lg-pager"></span><div class="lg-pager-thumb-cont"><span class="lg-caret"></span> <img src="'+a(this).find("img").attr("src")+'" /></div></span>'});c=e.core.$outer.find(".lg-pager-outer"),c.html(f),b=e.core.$outer.find(".lg-pager-cont"),b.on("click.lg touchend.lg",function(){var b=a(this);e.core.index=b.index(),e.core.slide(e.core.index,!1,!0,!1)}),c.on("mouseover.lg",function(){clearTimeout(d),c.addClass("lg-pager-hover")}),c.on("mouseout.lg",function(){d=setTimeout(function(){c.removeClass("lg-pager-hover")})}),e.core.$el.on("onBeforeSlide.lg.tm",function(a,c,d){b.removeClass("lg-pager-active"),b.eq(d).addClass("lg-pager-active")})},c.prototype.destroy=function(){},a.fn.lightGallery.modules.pager=c}()}),function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):"object"==typeof exports?module.exports=b(require("jquery")):b(jQuery)}(0,function(a){!function(){"use strict";var b={thumbnail:!0,animateThumb:!0,currentPagerPosition:"middle",thumbWidth:100,thumbHeight:"80px",thumbContHeight:100,thumbMargin:5,exThumbImage:!1,showThumbByDefault:!0,toogleThumb:!0,pullCaptionUp:!0,enableThumbDrag:!0,enableThumbSwipe:!0,swipeThreshold:50,loadYoutubeThumbnail:!0,youtubeThumbSize:1,loadVimeoThumbnail:!0,vimeoThumbSize:"thumbnail_small",loadDailymotionThumbnail:!0},c=function(c){return this.core=a(c).data("lightGallery"),this.core.s=a.extend({},b,this.core.s),this.$el=a(c),this.$thumbOuter=null,this.thumbOuterWidth=0,this.thumbTotalWidth=this.core.$items.length*(this.core.s.thumbWidth+this.core.s.thumbMargin),this.thumbIndex=this.core.index,this.core.s.animateThumb&&(this.core.s.thumbHeight="100%"),this.left=0,this.init(),this};c.prototype.init=function(){var a=this;this.core.s.thumbnail&&this.core.$items.length>1&&(this.core.s.showThumbByDefault&&setTimeout(function(){a.core.$outer.addClass("lg-thumb-open")},700),this.core.s.pullCaptionUp&&this.core.$outer.addClass("lg-pull-caption-up"),this.build(),this.core.s.animateThumb&&this.core.doCss()?(this.core.s.enableThumbDrag&&this.enableThumbDrag(),this.core.s.enableThumbSwipe&&this.enableThumbSwipe(),this.thumbClickable=!1):this.thumbClickable=!0,this.toogle(),this.thumbkeyPress())},c.prototype.build=function(){function b(a,b,c){var g,h=d.core.isVideo(a,c)||{},i="";h.youtube||h.vimeo||h.dailymotion?h.youtube?g=d.core.s.loadYoutubeThumbnail?"//img.youtube.com/vi/"+h.youtube[1]+"/"+d.core.s.youtubeThumbSize+".jpg":b:h.vimeo?d.core.s.loadVimeoThumbnail?(g="//i.vimeocdn.com/video/error_"+f+".jpg",i=h.vimeo[1]):g=b:h.dailymotion&&(g=d.core.s.loadDailymotionThumbnail?"//www.dailymotion.com/thumbnail/video/"+h.dailymotion[1]:b):g=b,e+='<div data-vimeo-id="'+i+'" class="lg-thumb-item" style="width:'+d.core.s.thumbWidth+"px; height: "+d.core.s.thumbHeight+"; margin-right: "+d.core.s.thumbMargin+'px"><img src="'+g+'" /></div>',i=""}var c,d=this,e="",f="",g='<div class="lg-thumb-outer"><div class="lg-thumb lg-group"></div></div>';switch(this.core.s.vimeoThumbSize){case"thumbnail_large":f="640";break;case"thumbnail_medium":f="200x150";break;case"thumbnail_small":f="100x75"}if(d.core.$outer.addClass("lg-has-thumb"),d.core.$outer.find(".lg").append(g),d.$thumbOuter=d.core.$outer.find(".lg-thumb-outer"),d.thumbOuterWidth=d.$thumbOuter.width(),d.core.s.animateThumb&&d.core.$outer.find(".lg-thumb").css({width:d.thumbTotalWidth+"px",position:"relative"}),this.core.s.animateThumb&&d.$thumbOuter.css("height",d.core.s.thumbContHeight+"px"),d.core.s.dynamic)for(var h=0;h<d.core.s.dynamicEl.length;h++)b(d.core.s.dynamicEl[h].src,d.core.s.dynamicEl[h].thumb,h);else d.core.$items.each(function(c){d.core.s.exThumbImage?b(a(this).attr("href")||a(this).attr("data-src"),a(this).attr(d.core.s.exThumbImage),c):b(a(this).attr("href")||a(this).attr("data-src"),a(this).find("img").attr("src"),c)});d.core.$outer.find(".lg-thumb").html(e),c=d.core.$outer.find(".lg-thumb-item"),c.each(function(){var b=a(this),c=b.attr("data-vimeo-id");c&&a.getJSON("//www.vimeo.com/api/v2/video/"+c+".json?callback=?",{format:"json"},function(a){b.find("img").attr("src",a[0][d.core.s.vimeoThumbSize])})}),c.eq(d.core.index).addClass("active"),d.core.$el.on("onBeforeSlide.lg.tm",function(){c.removeClass("active"),c.eq(d.core.index).addClass("active")}),c.on("click.lg touchend.lg",function(){var b=a(this);setTimeout(function(){(d.thumbClickable&&!d.core.lgBusy||!d.core.doCss())&&(d.core.index=b.index(),d.core.slide(d.core.index,!1,!0,!1))},50)}),d.core.$el.on("onBeforeSlide.lg.tm",function(){d.animateThumb(d.core.index)}),a(window).on("resize.lg.thumb orientationchange.lg.thumb",function(){setTimeout(function(){d.animateThumb(d.core.index),d.thumbOuterWidth=d.$thumbOuter.width()},200)})},c.prototype.setTranslate=function(a){this.core.$outer.find(".lg-thumb").css({transform:"translate3d(-"+a+"px, 0px, 0px)"})},c.prototype.animateThumb=function(a){var b=this.core.$outer.find(".lg-thumb");if(this.core.s.animateThumb){var c;switch(this.core.s.currentPagerPosition){case"left":c=0;break;case"middle":c=this.thumbOuterWidth/2-this.core.s.thumbWidth/2;break;case"right":c=this.thumbOuterWidth-this.core.s.thumbWidth}this.left=(this.core.s.thumbWidth+this.core.s.thumbMargin)*a-1-c,this.left>this.thumbTotalWidth-this.thumbOuterWidth&&(this.left=this.thumbTotalWidth-this.thumbOuterWidth),this.left<0&&(this.left=0),this.core.lGalleryOn?(b.hasClass("on")||this.core.$outer.find(".lg-thumb").css("transition-duration",this.core.s.speed+"ms"),this.core.doCss()||b.animate({left:-this.left+"px"},this.core.s.speed)):this.core.doCss()||b.css("left",-this.left+"px"),this.setTranslate(this.left)}},c.prototype.enableThumbDrag=function(){var b=this,c=0,d=0,e=!1,f=!1,g=0;b.$thumbOuter.addClass("lg-grab"),b.core.$outer.find(".lg-thumb").on("mousedown.lg.thumb",function(a){b.thumbTotalWidth>b.thumbOuterWidth&&(a.preventDefault(),c=a.pageX,e=!0,b.core.$outer.scrollLeft+=1,b.core.$outer.scrollLeft-=1,b.thumbClickable=!1,b.$thumbOuter.removeClass("lg-grab").addClass("lg-grabbing"))}),a(window).on("mousemove.lg.thumb",function(a){e&&(g=b.left,f=!0,d=a.pageX,b.$thumbOuter.addClass("lg-dragging"),g-=d-c,g>b.thumbTotalWidth-b.thumbOuterWidth&&(g=b.thumbTotalWidth-b.thumbOuterWidth),g<0&&(g=0),b.setTranslate(g))}),a(window).on("mouseup.lg.thumb",function(){f?(f=!1,b.$thumbOuter.removeClass("lg-dragging"),b.left=g,Math.abs(d-c)<b.core.s.swipeThreshold&&(b.thumbClickable=!0)):b.thumbClickable=!0,e&&(e=!1,b.$thumbOuter.removeClass("lg-grabbing").addClass("lg-grab"))})},c.prototype.enableThumbSwipe=function(){var a=this,b=0,c=0,d=!1,e=0;a.core.$outer.find(".lg-thumb").on("touchstart.lg",function(c){a.thumbTotalWidth>a.thumbOuterWidth&&(c.preventDefault(),b=c.originalEvent.targetTouches[0].pageX,a.thumbClickable=!1)}),a.core.$outer.find(".lg-thumb").on("touchmove.lg",function(f){a.thumbTotalWidth>a.thumbOuterWidth&&(f.preventDefault(),c=f.originalEvent.targetTouches[0].pageX,d=!0,a.$thumbOuter.addClass("lg-dragging"),e=a.left,e-=c-b,e>a.thumbTotalWidth-a.thumbOuterWidth&&(e=a.thumbTotalWidth-a.thumbOuterWidth),e<0&&(e=0),a.setTranslate(e))}),a.core.$outer.find(".lg-thumb").on("touchend.lg",function(){a.thumbTotalWidth>a.thumbOuterWidth&&d?(d=!1,a.$thumbOuter.removeClass("lg-dragging"),Math.abs(c-b)<a.core.s.swipeThreshold&&(a.thumbClickable=!0),a.left=e):a.thumbClickable=!0})},c.prototype.toogle=function(){var a=this;a.core.s.toogleThumb&&(a.core.$outer.addClass("lg-can-toggle"),a.$thumbOuter.append('<span class="lg-toogle-thumb lg-icon"></span>'),a.core.$outer.find(".lg-toogle-thumb").on("click.lg",function(){a.core.$outer.toggleClass("lg-thumb-open")}))},c.prototype.thumbkeyPress=function(){var b=this;a(window).on("keydown.lg.thumb",function(a){38===a.keyCode?(a.preventDefault(),b.core.$outer.addClass("lg-thumb-open")):40===a.keyCode&&(a.preventDefault(),b.core.$outer.removeClass("lg-thumb-open"))})},c.prototype.destroy=function(){this.core.s.thumbnail&&this.core.$items.length>1&&(a(window).off("resize.lg.thumb orientationchange.lg.thumb keydown.lg.thumb"),
this.$thumbOuter.remove(),this.core.$outer.removeClass("lg-has-thumb"))},a.fn.lightGallery.modules.Thumbnail=c}()}),function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):"object"==typeof module&&module.exports?module.exports=b(require("jquery")):b(a.jQuery)}(this,function(a){!function(){"use strict";function b(a,b,c,d){var e=this;if(e.core.$slide.eq(b).find(".lg-video").append(e.loadVideo(c,"lg-object",!0,b,d)),d)if(e.core.s.videojs)try{videojs(e.core.$slide.eq(b).find(".lg-html5").get(0),e.core.s.videojsOptions,function(){!e.videoLoaded&&e.core.s.autoplayFirstVideo&&this.play()})}catch(a){console.error("Make sure you have included videojs")}else!e.videoLoaded&&e.core.s.autoplayFirstVideo&&e.core.$slide.eq(b).find(".lg-html5").get(0).play()}function c(a,b){var c=this.core.$slide.eq(b).find(".lg-video-cont");c.hasClass("lg-has-iframe")||(c.css("max-width",this.core.s.videoMaxWidth),this.videoLoaded=!0)}function d(b,c,d){var e=this,f=e.core.$slide.eq(c),g=f.find(".lg-youtube").get(0),h=f.find(".lg-vimeo").get(0),i=f.find(".lg-dailymotion").get(0),j=f.find(".lg-vk").get(0),k=f.find(".lg-html5").get(0);if(g)g.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*");else if(h)try{$f(h).api("pause")}catch(a){console.error("Make sure you have included froogaloop2 js")}else if(i)i.contentWindow.postMessage("pause","*");else if(k)if(e.core.s.videojs)try{videojs(k).pause()}catch(a){console.error("Make sure you have included videojs")}else k.pause();j&&a(j).attr("src",a(j).attr("src").replace("&autoplay","&noplay"));var l;l=e.core.s.dynamic?e.core.s.dynamicEl[d].src:e.core.$items.eq(d).attr("href")||e.core.$items.eq(d).attr("data-src");var m=e.core.isVideo(l,d)||{};(m.youtube||m.vimeo||m.dailymotion||m.vk)&&e.core.$outer.addClass("lg-hide-download")}var e={videoMaxWidth:"855px",autoplayFirstVideo:!0,youtubePlayerParams:!1,vimeoPlayerParams:!1,dailymotionPlayerParams:!1,vkPlayerParams:!1,videojs:!1,videojsOptions:{}},f=function(b){return this.core=a(b).data("lightGallery"),this.$el=a(b),this.core.s=a.extend({},e,this.core.s),this.videoLoaded=!1,this.init(),this};f.prototype.init=function(){var e=this;e.core.$el.on("hasVideo.lg.tm",b.bind(this)),e.core.$el.on("onAferAppendSlide.lg.tm",c.bind(this)),e.core.doCss()&&e.core.$items.length>1&&(e.core.s.enableSwipe||e.core.s.enableDrag)?e.core.$el.on("onSlideClick.lg.tm",function(){var a=e.core.$slide.eq(e.core.index);e.loadVideoOnclick(a)}):e.core.$slide.on("click.lg",function(){e.loadVideoOnclick(a(this))}),e.core.$el.on("onBeforeSlide.lg.tm",d.bind(this)),e.core.$el.on("onAfterSlide.lg.tm",function(a,b){e.core.$slide.eq(b).removeClass("lg-video-playing")}),e.core.s.autoplayFirstVideo&&e.core.$el.on("onAferAppendSlide.lg.tm",function(a,b){if(!e.core.lGalleryOn){var c=e.core.$slide.eq(b);setTimeout(function(){e.loadVideoOnclick(c)},100)}})},f.prototype.loadVideo=function(b,c,d,e,f){var g="",h=1,i="",j=this.core.isVideo(b,e)||{};if(d&&(h=this.videoLoaded?0:this.core.s.autoplayFirstVideo?1:0),j.youtube)i="?wmode=opaque&autoplay="+h+"&enablejsapi=1",this.core.s.youtubePlayerParams&&(i=i+"&"+a.param(this.core.s.youtubePlayerParams)),g='<iframe class="lg-video-object lg-youtube '+c+'" width="560" height="315" src="//www.youtube.com/embed/'+j.youtube[1]+i+'" frameborder="0" allowfullscreen></iframe>';else if(j.vimeo)i="?autoplay="+h+"&api=1",this.core.s.vimeoPlayerParams&&(i=i+"&"+a.param(this.core.s.vimeoPlayerParams)),g='<iframe class="lg-video-object lg-vimeo '+c+'" width="560" height="315"  src="//player.vimeo.com/video/'+j.vimeo[1]+i+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>';else if(j.dailymotion)i="?wmode=opaque&autoplay="+h+"&api=postMessage",this.core.s.dailymotionPlayerParams&&(i=i+"&"+a.param(this.core.s.dailymotionPlayerParams)),g='<iframe class="lg-video-object lg-dailymotion '+c+'" width="560" height="315" src="//www.dailymotion.com/embed/video/'+j.dailymotion[1]+i+'" frameborder="0" allowfullscreen></iframe>';else if(j.html5){var k=f.substring(0,1);"."!==k&&"#"!==k||(f=a(f).html()),g=f}else j.vk&&(i="&autoplay="+h,this.core.s.vkPlayerParams&&(i=i+"&"+a.param(this.core.s.vkPlayerParams)),g='<iframe class="lg-video-object lg-vk '+c+'" width="560" height="315" src="//vk.com/video_ext.php?'+j.vk[1]+i+'" frameborder="0" allowfullscreen></iframe>');return g},f.prototype.loadVideoOnclick=function(a){var b=this;if(a.find(".lg-object").hasClass("lg-has-poster")&&a.find(".lg-object").is(":visible"))if(a.hasClass("lg-has-video")){var c=a.find(".lg-youtube").get(0),d=a.find(".lg-vimeo").get(0),e=a.find(".lg-dailymotion").get(0),f=a.find(".lg-html5").get(0);if(c)c.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*");else if(d)try{$f(d).api("play")}catch(a){console.error("Make sure you have included froogaloop2 js")}else if(e)e.contentWindow.postMessage("play","*");else if(f)if(b.core.s.videojs)try{videojs(f).play()}catch(a){console.error("Make sure you have included videojs")}else f.play();a.addClass("lg-video-playing")}else{a.addClass("lg-video-playing lg-has-video");var g,h,i=function(c,d){if(a.find(".lg-video").append(b.loadVideo(c,"",!1,b.core.index,d)),d)if(b.core.s.videojs)try{videojs(b.core.$slide.eq(b.core.index).find(".lg-html5").get(0),b.core.s.videojsOptions,function(){this.play()})}catch(a){console.error("Make sure you have included videojs")}else b.core.$slide.eq(b.core.index).find(".lg-html5").get(0).play()};b.core.s.dynamic?(g=b.core.s.dynamicEl[b.core.index].src,h=b.core.s.dynamicEl[b.core.index].html,i(g,h)):(g=b.core.$items.eq(b.core.index).attr("href")||b.core.$items.eq(b.core.index).attr("data-src"),h=b.core.$items.eq(b.core.index).attr("data-html"),i(g,h));var j=a.find(".lg-object");a.find(".lg-video").append(j),a.find(".lg-video-object").hasClass("lg-html5")||(a.removeClass("lg-complete"),a.find(".lg-video-object").on("load.lg error.lg",function(){a.addClass("lg-complete")}))}},f.prototype.destroy=function(){this.videoLoaded=!1},a.fn.lightGallery.modules.video=f}()}),function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):"object"==typeof exports?module.exports=b(require("jquery")):b(jQuery)}(0,function(a){!function(){"use strict";var b=function(){var a=!1,b=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return b&&parseInt(b[2],10)<54&&(a=!0),a},c={scale:1,zoom:!0,actualSize:!0,enableZoomAfter:300,useLeftForZoom:b()},d=function(b){return this.core=a(b).data("lightGallery"),this.core.s=a.extend({},c,this.core.s),this.core.s.zoom&&this.core.doCss()&&(this.init(),this.zoomabletimeout=!1,this.pageX=a(window).width()/2,this.pageY=a(window).height()/2+a(window).scrollTop()),this};d.prototype.init=function(){var b=this,c='<span id="lg-zoom-in" class="lg-icon"></span><span id="lg-zoom-out" class="lg-icon"></span>';b.core.s.actualSize&&(c+='<span id="lg-actual-size" class="lg-icon"></span>'),b.core.s.useLeftForZoom?b.core.$outer.addClass("lg-use-left-for-zoom"):b.core.$outer.addClass("lg-use-transition-for-zoom"),this.core.$outer.find(".lg-toolbar").append(c),b.core.$el.on("onSlideItemLoad.lg.tm.zoom",function(c,d,e){var f=b.core.s.enableZoomAfter+e;a("body").hasClass("lg-from-hash")&&e?f=0:a("body").removeClass("lg-from-hash"),b.zoomabletimeout=setTimeout(function(){b.core.$slide.eq(d).addClass("lg-zoomable")},f+30)});var d=1,e=function(c){var d,e,f=b.core.$outer.find(".lg-current .lg-image"),g=(a(window).width()-f.prop("offsetWidth"))/2,h=(a(window).height()-f.prop("offsetHeight"))/2+a(window).scrollTop();d=b.pageX-g,e=b.pageY-h;var i=(c-1)*d,j=(c-1)*e;f.css("transform","scale3d("+c+", "+c+", 1)").attr("data-scale",c),b.core.s.useLeftForZoom?f.parent().css({left:-i+"px",top:-j+"px"}).attr("data-x",i).attr("data-y",j):f.parent().css("transform","translate3d(-"+i+"px, -"+j+"px, 0)").attr("data-x",i).attr("data-y",j)},f=function(){d>1?b.core.$outer.addClass("lg-zoomed"):b.resetZoom(),d<1&&(d=1),e(d)},g=function(c,e,g,h){var i,j=e.prop("offsetWidth");i=b.core.s.dynamic?b.core.s.dynamicEl[g].width||e[0].naturalWidth||j:b.core.$items.eq(g).attr("data-width")||e[0].naturalWidth||j;var k;b.core.$outer.hasClass("lg-zoomed")?d=1:i>j&&(k=i/j,d=k||2),h?(b.pageX=a(window).width()/2,b.pageY=a(window).height()/2+a(window).scrollTop()):(b.pageX=c.pageX||c.originalEvent.targetTouches[0].pageX,b.pageY=c.pageY||c.originalEvent.targetTouches[0].pageY),f(),setTimeout(function(){b.core.$outer.removeClass("lg-grabbing").addClass("lg-grab")},10)},h=!1;b.core.$el.on("onAferAppendSlide.lg.tm.zoom",function(a,c){var d=b.core.$slide.eq(c).find(".lg-image");d.on("dblclick",function(a){g(a,d,c)}),d.on("touchstart",function(a){h?(clearTimeout(h),h=null,g(a,d,c)):h=setTimeout(function(){h=null},300),a.preventDefault()})}),a(window).on("resize.lg.zoom scroll.lg.zoom orientationchange.lg.zoom",function(){b.pageX=a(window).width()/2,b.pageY=a(window).height()/2+a(window).scrollTop(),e(d)}),a("#lg-zoom-out").on("click.lg",function(){b.core.$outer.find(".lg-current .lg-image").length&&(d-=b.core.s.scale,f())}),a("#lg-zoom-in").on("click.lg",function(){b.core.$outer.find(".lg-current .lg-image").length&&(d+=b.core.s.scale,f())}),a("#lg-actual-size").on("click.lg",function(a){g(a,b.core.$slide.eq(b.core.index).find(".lg-image"),b.core.index,!0)}),b.core.$el.on("onBeforeSlide.lg.tm",function(){d=1,b.resetZoom()}),b.zoomDrag(),b.zoomSwipe()},d.prototype.resetZoom=function(){this.core.$outer.removeClass("lg-zoomed"),this.core.$slide.find(".lg-img-wrap").removeAttr("style data-x data-y"),this.core.$slide.find(".lg-image").removeAttr("style data-scale"),this.pageX=a(window).width()/2,this.pageY=a(window).height()/2+a(window).scrollTop()},d.prototype.zoomSwipe=function(){var a=this,b={},c={},d=!1,e=!1,f=!1;a.core.$slide.on("touchstart.lg",function(c){if(a.core.$outer.hasClass("lg-zoomed")){var d=a.core.$slide.eq(a.core.index).find(".lg-object");f=d.prop("offsetHeight")*d.attr("data-scale")>a.core.$outer.find(".lg").height(),e=d.prop("offsetWidth")*d.attr("data-scale")>a.core.$outer.find(".lg").width(),(e||f)&&(c.preventDefault(),b={x:c.originalEvent.targetTouches[0].pageX,y:c.originalEvent.targetTouches[0].pageY})}}),a.core.$slide.on("touchmove.lg",function(g){if(a.core.$outer.hasClass("lg-zoomed")){var h,i,j=a.core.$slide.eq(a.core.index).find(".lg-img-wrap");g.preventDefault(),d=!0,c={x:g.originalEvent.targetTouches[0].pageX,y:g.originalEvent.targetTouches[0].pageY},a.core.$outer.addClass("lg-zoom-dragging"),i=f?-Math.abs(j.attr("data-y"))+(c.y-b.y):-Math.abs(j.attr("data-y")),h=e?-Math.abs(j.attr("data-x"))+(c.x-b.x):-Math.abs(j.attr("data-x")),(Math.abs(c.x-b.x)>15||Math.abs(c.y-b.y)>15)&&(a.core.s.useLeftForZoom?j.css({left:h+"px",top:i+"px"}):j.css("transform","translate3d("+h+"px, "+i+"px, 0)"))}}),a.core.$slide.on("touchend.lg",function(){a.core.$outer.hasClass("lg-zoomed")&&d&&(d=!1,a.core.$outer.removeClass("lg-zoom-dragging"),a.touchendZoom(b,c,e,f))})},d.prototype.zoomDrag=function(){var b=this,c={},d={},e=!1,f=!1,g=!1,h=!1;b.core.$slide.on("mousedown.lg.zoom",function(d){var f=b.core.$slide.eq(b.core.index).find(".lg-object");h=f.prop("offsetHeight")*f.attr("data-scale")>b.core.$outer.find(".lg").height(),g=f.prop("offsetWidth")*f.attr("data-scale")>b.core.$outer.find(".lg").width(),b.core.$outer.hasClass("lg-zoomed")&&a(d.target).hasClass("lg-object")&&(g||h)&&(d.preventDefault(),c={x:d.pageX,y:d.pageY},e=!0,b.core.$outer.scrollLeft+=1,b.core.$outer.scrollLeft-=1,b.core.$outer.removeClass("lg-grab").addClass("lg-grabbing"))}),a(window).on("mousemove.lg.zoom",function(a){if(e){var i,j,k=b.core.$slide.eq(b.core.index).find(".lg-img-wrap");f=!0,d={x:a.pageX,y:a.pageY},b.core.$outer.addClass("lg-zoom-dragging"),j=h?-Math.abs(k.attr("data-y"))+(d.y-c.y):-Math.abs(k.attr("data-y")),i=g?-Math.abs(k.attr("data-x"))+(d.x-c.x):-Math.abs(k.attr("data-x")),b.core.s.useLeftForZoom?k.css({left:i+"px",top:j+"px"}):k.css("transform","translate3d("+i+"px, "+j+"px, 0)")}}),a(window).on("mouseup.lg.zoom",function(a){e&&(e=!1,b.core.$outer.removeClass("lg-zoom-dragging"),!f||c.x===d.x&&c.y===d.y||(d={x:a.pageX,y:a.pageY},b.touchendZoom(c,d,g,h)),f=!1),b.core.$outer.removeClass("lg-grabbing").addClass("lg-grab")})},d.prototype.touchendZoom=function(a,b,c,d){var e=this,f=e.core.$slide.eq(e.core.index).find(".lg-img-wrap"),g=e.core.$slide.eq(e.core.index).find(".lg-object"),h=-Math.abs(f.attr("data-x"))+(b.x-a.x),i=-Math.abs(f.attr("data-y"))+(b.y-a.y),j=(e.core.$outer.find(".lg").height()-g.prop("offsetHeight"))/2,k=Math.abs(g.prop("offsetHeight")*Math.abs(g.attr("data-scale"))-e.core.$outer.find(".lg").height()+j),l=(e.core.$outer.find(".lg").width()-g.prop("offsetWidth"))/2,m=Math.abs(g.prop("offsetWidth")*Math.abs(g.attr("data-scale"))-e.core.$outer.find(".lg").width()+l);(Math.abs(b.x-a.x)>15||Math.abs(b.y-a.y)>15)&&(d&&(i<=-k?i=-k:i>=-j&&(i=-j)),c&&(h<=-m?h=-m:h>=-l&&(h=-l)),d?f.attr("data-y",Math.abs(i)):i=-Math.abs(f.attr("data-y")),c?f.attr("data-x",Math.abs(h)):h=-Math.abs(f.attr("data-x")),e.core.s.useLeftForZoom?f.css({left:h+"px",top:i+"px"}):f.css("transform","translate3d("+h+"px, "+i+"px, 0)"))},d.prototype.destroy=function(){var b=this;b.core.$el.off(".lg.zoom"),a(window).off(".lg.zoom"),b.core.$slide.off(".lg.zoom"),b.core.$el.off(".lg.tm.zoom"),b.resetZoom(),clearTimeout(b.zoomabletimeout),b.zoomabletimeout=!1},a.fn.lightGallery.modules.zoom=d}()}),function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):"object"==typeof exports?module.exports=b(require("jquery")):b(jQuery)}(0,function(a){!function(){"use strict";var b={hash:!0},c=function(c){return this.core=a(c).data("lightGallery"),this.core.s=a.extend({},b,this.core.s),this.core.s.hash&&(this.oldHash=window.location.hash,this.init()),this};c.prototype.init=function(){var b,c=this;c.core.$el.on("onAfterSlide.lg.tm",function(a,b,d){history.replaceState?history.replaceState(null,null,window.location.pathname+window.location.search+"#lg="+c.core.s.galleryId+"&slide="+d):window.location.hash="lg="+c.core.s.galleryId+"&slide="+d}),a(window).on("hashchange.lg.hash",function(){b=window.location.hash;var a=parseInt(b.split("&slide=")[1],10);b.indexOf("lg="+c.core.s.galleryId)>-1?c.core.slide(a,!1,!1):c.core.lGalleryOn&&c.core.destroy()})},c.prototype.destroy=function(){this.core.s.hash&&(this.oldHash&&this.oldHash.indexOf("lg="+this.core.s.galleryId)<0?history.replaceState?history.replaceState(null,null,this.oldHash):window.location.hash=this.oldHash:history.replaceState?history.replaceState(null,document.title,window.location.pathname+window.location.search):window.location.hash="",this.core.$el.off(".lg.hash"))},a.fn.lightGallery.modules.hash=c}()}),function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):"object"==typeof exports?module.exports=b(require("jquery")):b(jQuery)}(0,function(a){!function(){"use strict";var b={share:!0,facebook:!0,facebookDropdownText:"Facebook",twitter:!0,twitterDropdownText:"Twitter",googlePlus:!0,googlePlusDropdownText:"GooglePlus",pinterest:!0,pinterestDropdownText:"Pinterest"},c=function(c){return this.core=a(c).data("lightGallery"),this.core.s=a.extend({},b,this.core.s),this.core.s.share&&this.init(),this};c.prototype.init=function(){var b=this,c='<span id="lg-share" class="lg-icon"><ul class="lg-dropdown" style="position: absolute;">';c+=b.core.s.facebook?'<li><a id="lg-share-facebook" target="_blank"><span class="lg-icon"></span><span class="lg-dropdown-text">'+this.core.s.facebookDropdownText+"</span></a></li>":"",c+=b.core.s.twitter?'<li><a id="lg-share-twitter" target="_blank"><span class="lg-icon"></span><span class="lg-dropdown-text">'+this.core.s.twitterDropdownText+"</span></a></li>":"",c+=b.core.s.googlePlus?'<li><a id="lg-share-googleplus" target="_blank"><span class="lg-icon"></span><span class="lg-dropdown-text">'+this.core.s.googlePlusDropdownText+"</span></a></li>":"",c+=b.core.s.pinterest?'<li><a id="lg-share-pinterest" target="_blank"><span class="lg-icon"></span><span class="lg-dropdown-text">'+this.core.s.pinterestDropdownText+"</span></a></li>":"",c+="</ul></span>",this.core.$outer.find(".lg-toolbar").append(c),this.core.$outer.find(".lg").append('<div id="lg-dropdown-overlay"></div>'),a("#lg-share").on("click.lg",function(){b.core.$outer.toggleClass("lg-dropdown-active")}),a("#lg-dropdown-overlay").on("click.lg",function(){b.core.$outer.removeClass("lg-dropdown-active")}),b.core.$el.on("onAfterSlide.lg.tm",function(c,d,e){setTimeout(function(){a("#lg-share-facebook").attr("href","https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(b.getSahreProps(e,"facebookShareUrl")||window.location.href)),a("#lg-share-twitter").attr("href","https://twitter.com/intent/tweet?text="+b.getSahreProps(e,"tweetText")+"&url="+encodeURIComponent(b.getSahreProps(e,"twitterShareUrl")||window.location.href)),a("#lg-share-googleplus").attr("href","https://plus.google.com/share?url="+encodeURIComponent(b.getSahreProps(e,"googleplusShareUrl")||window.location.href)),a("#lg-share-pinterest").attr("href","http://www.pinterest.com/pin/create/button/?url="+encodeURIComponent(b.getSahreProps(e,"pinterestShareUrl")||window.location.href)+"&media="+encodeURIComponent(b.getSahreProps(e,"src"))+"&description="+b.getSahreProps(e,"pinterestText"))},100)})},c.prototype.getSahreProps=function(a,b){var c="";if(this.core.s.dynamic)c=this.core.s.dynamicEl[a][b];else{var d=this.core.$items.eq(a).attr("href"),e=this.core.$items.eq(a).data(b);c="src"===b?d||e:e}return c},c.prototype.destroy=function(){},a.fn.lightGallery.modules.share=c}()});
/* ------------------------------------------------------------------------
	Class: prettyPhoto
	Use: Lightbox clone for jQuery
	Author: Stephane Caron (http://www.no-margin-for-errors.com)
	Version: 3.1.6
------------------------------------------------------------------------- */
(function($) {
	$.prettyPhoto = {version: '3.1.6'};
	
	$.fn.prettyPhoto = function(pp_settings) {
		pp_settings = jQuery.extend({
			hook: 'rel', /* the attribute tag to use for prettyPhoto hooks. default: 'rel'. For HTML5, use "data-rel" or similar. */
			animation_speed: 'fast', /* fast/slow/normal */
			ajaxcallback: function() {},
			slideshow: 5000, /* false OR interval time in ms */
			autoplay_slideshow: false, /* true/false */
			opacity: 0.80, /* Value between 0 and 1 */
			show_title: true, /* true/false */
			allow_resize: true, /* Resize the photos bigger than viewport. true/false */
			allow_expand: true, /* Allow the user to expand a resized image. true/false */
			default_width: 500,
			default_height: 344,
			counter_separator_label: '/', /* The separator for the gallery counter 1 "of" 2 */
			theme: 'pp_default', /* light_rounded / dark_rounded / light_square / dark_square / facebook */
			horizontal_padding: 20, /* The padding on each side of the picture */
			hideflash: false, /* Hides all the flash object on a page, set to TRUE if flash appears over prettyPhoto */
			wmode: 'opaque', /* Set the flash wmode attribute */
			autoplay: true, /* Automatically start videos: True/False */
			modal: false, /* If set to true, only the close button will close the window */
			deeplinking: true, /* Allow prettyPhoto to update the url to enable deeplinking. */
			overlay_gallery: true, /* If set to true, a gallery will overlay the fullscreen image on mouse over */
			overlay_gallery_max: 30, /* Maximum number of pictures in the overlay gallery */
			keyboard_shortcuts: true, /* Set to false if you open forms inside prettyPhoto */
			changepicturecallback: function(){}, /* Called everytime an item is shown/changed */
			callback: function(){}, /* Called when prettyPhoto is closed */
			ie6_fallback: true,
			markup: '<div class="pp_pic_holder"> \
						<div class="ppt">&nbsp;</div> \
						<div class="pp_top"> \
							<div class="pp_left"></div> \
							<div class="pp_middle"></div> \
							<div class="pp_right"></div> \
						</div> \
						<div class="pp_content_container"> \
							<div class="pp_left"> \
							<div class="pp_right"> \
								<div class="pp_content"> \
									<div class="pp_loaderIcon"></div> \
									<div class="pp_fade"> \
										<a href="#" class="pp_expand" title="Expand the image">Expand</a> \
										<div class="pp_hoverContainer"> \
											<a class="pp_next" href="#">next</a> \
											<a class="pp_previous" href="#">previous</a> \
										</div> \
										<div id="pp_full_res"></div> \
										<div class="pp_details"> \
											<div class="pp_nav"> \
												<a href="#" class="pp_arrow_previous">Previous</a> \
												<p class="currentTextHolder">0/0</p> \
												<a href="#" class="pp_arrow_next">Next</a> \
											</div> \
											<p class="pp_description"></p> \
											<div class="pp_social">{pp_social}</div> \
											<a class="pp_close" href="#">Close</a> \
										</div> \
									</div> \
								</div> \
							</div> \
							</div> \
						</div> \
						<div class="pp_bottom"> \
							<div class="pp_left"></div> \
							<div class="pp_middle"></div> \
							<div class="pp_right"></div> \
						</div> \
					</div> \
					<div class="pp_overlay"></div>',
			gallery_markup: '<div class="pp_gallery"> \
								<a href="#" class="pp_arrow_previous">Previous</a> \
								<div> \
									<ul> \
										{gallery} \
									</ul> \
								</div> \
								<a href="#" class="pp_arrow_next">Next</a> \
							</div>',
			image_markup: '<img id="fullResImage" src="{path}" />',
			flash_markup: '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="{width}" height="{height}"><param name="wmode" value="{wmode}" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{path}" /><embed src="{path}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="{width}" height="{height}" wmode="{wmode}"></embed></object>',
			quicktime_markup: '<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab" height="{height}" width="{width}"><param name="src" value="{path}"><param name="autoplay" value="{autoplay}"><param name="type" value="video/quicktime"><embed src="{path}" height="{height}" width="{width}" autoplay="{autoplay}" type="video/quicktime" pluginspage="http://www.apple.com/quicktime/download/"></embed></object>',
			iframe_markup: '<iframe src ="{path}" width="{width}" height="{height}" frameborder="no"></iframe>',
			inline_markup: '<div class="pp_inline">{content}</div>',
			custom_markup: '',
			social_tools: '<div class="twitter"><a href="http://twitter.com/share" class="twitter-share-button" data-count="none">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script></div><div class="facebook"><iframe src="//www.facebook.com/plugins/like.php?locale=en_US&href={location_href}&amp;layout=button_count&amp;show_faces=true&amp;width=500&amp;action=like&amp;font&amp;colorscheme=light&amp;height=23" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:500px; height:23px;" allowTransparency="true"></iframe></div>' /* html or false to disable */
		}, pp_settings);
		
		// Global variables accessible only by prettyPhoto
		var matchedObjects = this, percentBased = false, pp_dimensions, pp_open,
		
		// prettyPhoto container specific
		pp_contentHeight, pp_contentWidth, pp_containerHeight, pp_containerWidth,
		
		// Window size
		windowHeight = $(window).height(), windowWidth = $(window).width(),

		// Global elements
		pp_slideshow;
		
		doresize = true, scroll_pos = _get_scroll();
	
		// Window/Keyboard events
		$(window).unbind('resize.prettyphoto').bind('resize.prettyphoto',function(){ _center_overlay(); _resize_overlay(); });
		
		if(pp_settings.keyboard_shortcuts) {
			$(document).unbind('keydown.prettyphoto').bind('keydown.prettyphoto',function(e){
				if(typeof $pp_pic_holder != 'undefined'){
					if($pp_pic_holder.is(':visible')){
						switch(e.keyCode){
							case 37:
								$.prettyPhoto.changePage('previous');
								e.preventDefault();
								break;
							case 39:
								$.prettyPhoto.changePage('next');
								e.preventDefault();
								break;
							case 27:
								if(!settings.modal)
								$.prettyPhoto.close();
								e.preventDefault();
								break;
						};
						// return false;
					};
				};
			});
		};
		
		/**
		* Initialize prettyPhoto.
		*/
		$.prettyPhoto.initialize = function() {
			
			settings = pp_settings;
			
			if(settings.theme == 'pp_default') settings.horizontal_padding = 16;
			
			// Find out if the picture is part of a set
			theRel = $(this).attr(settings.hook);
			galleryRegExp = /\[(?:.*)\]/;
			isSet = (galleryRegExp.exec(theRel)) ? true : false;
			
			// Put the SRCs, TITLEs, ALTs into an array.
			pp_images = (isSet) ? jQuery.map(matchedObjects, function(n, i){ if($(n).attr(settings.hook).indexOf(theRel) != -1) return $(n).attr('href'); }) : $.makeArray($(this).attr('href'));
			pp_titles = (isSet) ? jQuery.map(matchedObjects, function(n, i){ if($(n).attr(settings.hook).indexOf(theRel) != -1) return ($(n).find('img').attr('alt')) ? $(n).find('img').attr('alt') : ""; }) : $.makeArray($(this).find('img').attr('alt'));
			pp_descriptions = (isSet) ? jQuery.map(matchedObjects, function(n, i){ if($(n).attr(settings.hook).indexOf(theRel) != -1) return ($(n).attr('title')) ? $(n).attr('title') : ""; }) : $.makeArray($(this).attr('title'));
			
			if(pp_images.length > settings.overlay_gallery_max) settings.overlay_gallery = false;
			
			set_position = jQuery.inArray($(this).attr('href'), pp_images); // Define where in the array the clicked item is positionned
			rel_index = (isSet) ? set_position : $("a["+settings.hook+"^='"+theRel+"']").index($(this));
			
			_build_overlay(this); // Build the overlay {this} being the caller
			
			if(settings.allow_resize)
				$(window).bind('scroll.prettyphoto',function(){ _center_overlay(); });
			
			
			$.prettyPhoto.open();
			
			return false;
		}


		/**
		* Opens the prettyPhoto modal box.
		* @param image {String,Array} Full path to the image to be open, can also be an array containing full images paths.
		* @param title {String,Array} The title to be displayed with the picture, can also be an array containing all the titles.
		* @param description {String,Array} The description to be displayed with the picture, can also be an array containing all the descriptions.
		*/
		$.prettyPhoto.open = function(event) {
			if(typeof settings == "undefined"){ // Means it's an API call, need to manually get the settings and set the variables
				settings = pp_settings;
				pp_images = $.makeArray(arguments[0]);
				pp_titles = (arguments[1]) ? $.makeArray(arguments[1]) : $.makeArray("");
				pp_descriptions = (arguments[2]) ? $.makeArray(arguments[2]) : $.makeArray("");
				isSet = (pp_images.length > 1) ? true : false;
				set_position = (arguments[3])? arguments[3]: 0;
				_build_overlay(event.target); // Build the overlay {this} being the caller
			}
			
			if(settings.hideflash) $('object,embed,iframe[src*=youtube],iframe[src*=vimeo]').css('visibility','hidden'); // Hide the flash

			_checkPosition($(pp_images).size()); // Hide the next/previous links if on first or last images.
		
			$('.pp_loaderIcon').show();
		
			if(settings.deeplinking)
				setHashtag();
		
			// Rebuild Facebook Like Button with updated href
			if(settings.social_tools){
				facebook_like_link = settings.social_tools.replace('{location_href}', encodeURIComponent(location.href)); 
				$pp_pic_holder.find('.pp_social').html(facebook_like_link);
			}
			
			// Fade the content in
			if($ppt.is(':hidden')) $ppt.css('opacity',0).show();
			$pp_overlay.show().fadeTo(settings.animation_speed,settings.opacity);

			// Display the current position
			$pp_pic_holder.find('.currentTextHolder').text((set_position+1) + settings.counter_separator_label + $(pp_images).size());

			// Set the description
			if(typeof pp_descriptions[set_position] != 'undefined' && pp_descriptions[set_position] != ""){
				$pp_pic_holder.find('.pp_description').show().html(unescape(pp_descriptions[set_position]));
			}else{
				$pp_pic_holder.find('.pp_description').hide();
			}
			
			// Get the dimensions
			movie_width = ( parseFloat(getParam('width',pp_images[set_position])) ) ? getParam('width',pp_images[set_position]) : settings.default_width.toString();
			movie_height = ( parseFloat(getParam('height',pp_images[set_position])) ) ? getParam('height',pp_images[set_position]) : settings.default_height.toString();
			
			// If the size is % based, calculate according to window dimensions
			percentBased=false;
			if(movie_height.indexOf('%') != -1) { movie_height = parseFloat(($(window).height() * parseFloat(movie_height) / 100) - 150); percentBased = true; }
			if(movie_width.indexOf('%') != -1) { movie_width = parseFloat(($(window).width() * parseFloat(movie_width) / 100) - 150); percentBased = true; }
			
			// Fade the holder
			$pp_pic_holder.fadeIn(function(){
				// Set the title
				(settings.show_title && pp_titles[set_position] != "" && typeof pp_titles[set_position] != "undefined") ? $ppt.html(unescape(pp_titles[set_position])) : $ppt.html('&nbsp;');
				
				imgPreloader = "";
				skipInjection = false;
				
				// Inject the proper content
				switch(_getFileType(pp_images[set_position])){
					case 'image':
						imgPreloader = new Image();

						// Preload the neighbour images
						nextImage = new Image();
						if(isSet && set_position < $(pp_images).size() -1) nextImage.src = pp_images[set_position + 1];
						prevImage = new Image();
						if(isSet && pp_images[set_position - 1]) prevImage.src = pp_images[set_position - 1];

						$pp_pic_holder.find('#pp_full_res')[0].innerHTML = settings.image_markup.replace(/{path}/g,pp_images[set_position]);

						imgPreloader.onload = function(){
							// Fit item to viewport
							pp_dimensions = _fitToViewport(imgPreloader.width,imgPreloader.height);

							_showContent();
						};

						imgPreloader.onerror = function(){
							alert('Image cannot be loaded. Make sure the path is correct and image exist.');
							$.prettyPhoto.close();
						};
					
						imgPreloader.src = pp_images[set_position];
					break;
				
					case 'youtube':
						pp_dimensions = _fitToViewport(movie_width,movie_height); // Fit item to viewport
						
						// Regular youtube link
						movie_id = getParam('v',pp_images[set_position]);
						
						// youtu.be link
						if(movie_id == ""){
							movie_id = pp_images[set_position].split('youtu.be/');
							movie_id = movie_id[1];
							if(movie_id.indexOf('?') > 0)
								movie_id = movie_id.substr(0,movie_id.indexOf('?')); // Strip anything after the ?

							if(movie_id.indexOf('&') > 0)
								movie_id = movie_id.substr(0,movie_id.indexOf('&')); // Strip anything after the &
						}

						movie = 'http://www.youtube.com/embed/'+movie_id;
						(getParam('rel',pp_images[set_position])) ? movie+="?rel="+getParam('rel',pp_images[set_position]) : movie+="?rel=1";
							
						if(settings.autoplay) movie += "&autoplay=1";
					
						toInject = settings.iframe_markup.replace(/{width}/g,pp_dimensions['width']).replace(/{height}/g,pp_dimensions['height']).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,movie);
					break;
				
					case 'vimeo':
						pp_dimensions = _fitToViewport(movie_width,movie_height); // Fit item to viewport
					
						movie_id = pp_images[set_position];
						var regExp = /http(s?):\/\/(www\.)?vimeo.com\/(\d+)/;
						var match = movie_id.match(regExp);
						
						movie = 'http://player.vimeo.com/video/'+ match[3] +'?title=0&amp;byline=0&amp;portrait=0';
						if(settings.autoplay) movie += "&autoplay=1;";
				
						vimeo_width = pp_dimensions['width'] + '/embed/?moog_width='+ pp_dimensions['width'];
				
						toInject = settings.iframe_markup.replace(/{width}/g,vimeo_width).replace(/{height}/g,pp_dimensions['height']).replace(/{path}/g,movie);
					break;
				
					case 'quicktime':
						pp_dimensions = _fitToViewport(movie_width,movie_height); // Fit item to viewport
						pp_dimensions['height']+=15; pp_dimensions['contentHeight']+=15; pp_dimensions['containerHeight']+=15; // Add space for the control bar
				
						toInject = settings.quicktime_markup.replace(/{width}/g,pp_dimensions['width']).replace(/{height}/g,pp_dimensions['height']).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,pp_images[set_position]).replace(/{autoplay}/g,settings.autoplay);
					break;
				
					case 'flash':
						pp_dimensions = _fitToViewport(movie_width,movie_height); // Fit item to viewport
					
						flash_vars = pp_images[set_position];
						flash_vars = flash_vars.substring(pp_images[set_position].indexOf('flashvars') + 10,pp_images[set_position].length);

						filename = pp_images[set_position];
						filename = filename.substring(0,filename.indexOf('?'));
					
						toInject =  settings.flash_markup.replace(/{width}/g,pp_dimensions['width']).replace(/{height}/g,pp_dimensions['height']).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,filename+'?'+flash_vars);
					break;
				
					case 'iframe':
						pp_dimensions = _fitToViewport(movie_width,movie_height); // Fit item to viewport
				
						frame_url = pp_images[set_position];
						frame_url = frame_url.substr(0,frame_url.indexOf('iframe')-1);

						toInject = settings.iframe_markup.replace(/{width}/g,pp_dimensions['width']).replace(/{height}/g,pp_dimensions['height']).replace(/{path}/g,frame_url);
					break;
					
					case 'ajax':
						doresize = false; // Make sure the dimensions are not resized.
						pp_dimensions = _fitToViewport(movie_width,movie_height);
						doresize = true; // Reset the dimensions
					
						skipInjection = true;
						$.get(pp_images[set_position],function(responseHTML){
							toInject = settings.inline_markup.replace(/{content}/g,responseHTML);
							$pp_pic_holder.find('#pp_full_res')[0].innerHTML = toInject;
							_showContent();
						});
						
					break;
					
					case 'custom':
						pp_dimensions = _fitToViewport(movie_width,movie_height); // Fit item to viewport
					
						toInject = settings.custom_markup;
					break;
				
					case 'inline':
						// to get the item height clone it, apply default width, wrap it in the prettyPhoto containers , then delete
						myClone = $(pp_images[set_position]).clone().append('<br clear="all" />').css({'width':settings.default_width}).wrapInner('<div id="pp_full_res"><div class="pp_inline"></div></div>').appendTo($('body')).show();
						doresize = false; // Make sure the dimensions are not resized.
						pp_dimensions = _fitToViewport($(myClone).width(),$(myClone).height());
						doresize = true; // Reset the dimensions
						$(myClone).remove();
						toInject = settings.inline_markup.replace(/{content}/g,$(pp_images[set_position]).html());
					break;
				};

				if(!imgPreloader && !skipInjection){
					$pp_pic_holder.find('#pp_full_res')[0].innerHTML = toInject;
				
					// Show content
					_showContent();
				};
			});

			return false;
		};

	
		/**
		* Change page in the prettyPhoto modal box
		* @param direction {String} Direction of the paging, previous or next.
		*/
		$.prettyPhoto.changePage = function(direction){
			currentGalleryPage = 0;
			
			if(direction == 'previous') {
				set_position--;
				if (set_position < 0) set_position = $(pp_images).size()-1;
			}else if(direction == 'next'){
				set_position++;
				if(set_position > $(pp_images).size()-1) set_position = 0;
			}else{
				set_position=direction;
			};
			
			rel_index = set_position;

			if(!doresize) doresize = true; // Allow the resizing of the images
			if(settings.allow_expand) {
				$('.pp_contract').removeClass('pp_contract').addClass('pp_expand');
			}

			_hideContent(function(){ $.prettyPhoto.open(); });
		};


		/**
		* Change gallery page in the prettyPhoto modal box
		* @param direction {String} Direction of the paging, previous or next.
		*/
		$.prettyPhoto.changeGalleryPage = function(direction){
			if(direction=='next'){
				currentGalleryPage ++;

				if(currentGalleryPage > totalPage) currentGalleryPage = 0;
			}else if(direction=='previous'){
				currentGalleryPage --;

				if(currentGalleryPage < 0) currentGalleryPage = totalPage;
			}else{
				currentGalleryPage = direction;
			};
			
			slide_speed = (direction == 'next' || direction == 'previous') ? settings.animation_speed : 0;

			slide_to = currentGalleryPage * (itemsPerPage * itemWidth);

			$pp_gallery.find('ul').animate({left:-slide_to},slide_speed);
		};


		/**
		* Start the slideshow...
		*/
		$.prettyPhoto.startSlideshow = function(){
			if(typeof pp_slideshow == 'undefined'){
				$pp_pic_holder.find('.pp_play').unbind('click').removeClass('pp_play').addClass('pp_pause').click(function(){
					$.prettyPhoto.stopSlideshow();
					return false;
				});
				pp_slideshow = setInterval($.prettyPhoto.startSlideshow,settings.slideshow);
			}else{
				$.prettyPhoto.changePage('next');	
			};
		}


		/**
		* Stop the slideshow...
		*/
		$.prettyPhoto.stopSlideshow = function(){
			$pp_pic_holder.find('.pp_pause').unbind('click').removeClass('pp_pause').addClass('pp_play').click(function(){
				$.prettyPhoto.startSlideshow();
				return false;
			});
			clearInterval(pp_slideshow);
			pp_slideshow=undefined;
		}


		/**
		* Closes prettyPhoto.
		*/
		$.prettyPhoto.close = function(){
			if($pp_overlay.is(":animated")) return;
			
			$.prettyPhoto.stopSlideshow();
			
			$pp_pic_holder.stop().find('object,embed').css('visibility','hidden');
			
			$('div.pp_pic_holder,div.ppt,.pp_fade').fadeOut(settings.animation_speed,function(){ $(this).remove(); });
			
			$pp_overlay.fadeOut(settings.animation_speed, function(){
				
				if(settings.hideflash) $('object,embed,iframe[src*=youtube],iframe[src*=vimeo]').css('visibility','visible'); // Show the flash
				
				$(this).remove(); // No more need for the prettyPhoto markup
				
				$(window).unbind('scroll.prettyphoto');
				
				clearHashtag();
				
				settings.callback();
				
				doresize = true;
				
				pp_open = false;
				
				delete settings;
			});
		};
	
		/**
		* Set the proper sizes on the containers and animate the content in.
		*/
		function _showContent(){
			$('.pp_loaderIcon').hide();

			// Calculate the opened top position of the pic holder
			projectedTop = scroll_pos['scrollTop'] + ((windowHeight/2) - (pp_dimensions['containerHeight']/2));
			if(projectedTop < 0) projectedTop = 0;

			$ppt.fadeTo(settings.animation_speed,1);

			// Resize the content holder
			$pp_pic_holder.find('.pp_content')
				.animate({
					height:pp_dimensions['contentHeight'],
					width:pp_dimensions['contentWidth']
				},settings.animation_speed);
			
			// Resize picture the holder
			$pp_pic_holder.animate({
				'top': projectedTop,
				'left': ((windowWidth/2) - (pp_dimensions['containerWidth']/2) < 0) ? 0 : (windowWidth/2) - (pp_dimensions['containerWidth']/2),
				width:pp_dimensions['containerWidth']
			},settings.animation_speed,function(){
				$pp_pic_holder.find('.pp_hoverContainer,#fullResImage').height(pp_dimensions['height']).width(pp_dimensions['width']);

				$pp_pic_holder.find('.pp_fade').fadeIn(settings.animation_speed); // Fade the new content

				// Show the nav
				if(isSet && _getFileType(pp_images[set_position])=="image") { $pp_pic_holder.find('.pp_hoverContainer').show(); }else{ $pp_pic_holder.find('.pp_hoverContainer').hide(); }
			
				if(settings.allow_expand) {
					if(pp_dimensions['resized']){ // Fade the resizing link if the image is resized
						$('a.pp_expand,a.pp_contract').show();
					}else{
						$('a.pp_expand').hide();
					}
				}
				
				if(settings.autoplay_slideshow && !pp_slideshow && !pp_open) $.prettyPhoto.startSlideshow();
				
				settings.changepicturecallback(); // Callback!
				
				pp_open = true;
			});
			
			_insert_gallery();
			pp_settings.ajaxcallback();
		};
		
		/**
		* Hide the content...DUH!
		*/
		function _hideContent(callback){
			// Fade out the current picture
			$pp_pic_holder.find('#pp_full_res object,#pp_full_res embed').css('visibility','hidden');
			$pp_pic_holder.find('.pp_fade').fadeOut(settings.animation_speed,function(){
				$('.pp_loaderIcon').show();
				
				callback();
			});
		};
	
		/**
		* Check the item position in the gallery array, hide or show the navigation links
		* @param setCount {integer} The total number of items in the set
		*/
		function _checkPosition(setCount){
			(setCount > 1) ? $('.pp_nav').show() : $('.pp_nav').hide(); // Hide the bottom nav if it's not a set.
		};
	
		/**
		* Resize the item dimensions if it's bigger than the viewport
		* @param width {integer} Width of the item to be opened
		* @param height {integer} Height of the item to be opened
		* @return An array containin the "fitted" dimensions
		*/
		function _fitToViewport(width,height){
			resized = false;

			_getDimensions(width,height);
			
			// Define them in case there's no resize needed
			imageWidth = width, imageHeight = height;

			if( ((pp_containerWidth > windowWidth) || (pp_containerHeight > windowHeight)) && doresize && settings.allow_resize && !percentBased) {
				resized = true, fitting = false;
			
				while (!fitting){
					if((pp_containerWidth > windowWidth)){
						imageWidth = (windowWidth - 200);
						imageHeight = (height/width) * imageWidth;
					}else if((pp_containerHeight > windowHeight)){
						imageHeight = (windowHeight - 200);
						imageWidth = (width/height) * imageHeight;
					}else{
						fitting = true;
					};

					pp_containerHeight = imageHeight, pp_containerWidth = imageWidth;
				};
			

				
				if((pp_containerWidth > windowWidth) || (pp_containerHeight > windowHeight)){
					_fitToViewport(pp_containerWidth,pp_containerHeight)
				};
				
				_getDimensions(imageWidth,imageHeight);
			};
			
			return {
				width:Math.floor(imageWidth),
				height:Math.floor(imageHeight),
				containerHeight:Math.floor(pp_containerHeight),
				containerWidth:Math.floor(pp_containerWidth) + (settings.horizontal_padding * 2),
				contentHeight:Math.floor(pp_contentHeight),
				contentWidth:Math.floor(pp_contentWidth),
				resized:resized
			};
		};
		
		/**
		* Get the containers dimensions according to the item size
		* @param width {integer} Width of the item to be opened
		* @param height {integer} Height of the item to be opened
		*/
		function _getDimensions(width,height){
			width = parseFloat(width);
			height = parseFloat(height);
			
			// Get the details height, to do so, I need to clone it since it's invisible
			$pp_details = $pp_pic_holder.find('.pp_details');
			$pp_details.width(width);
			detailsHeight = parseFloat($pp_details.css('marginTop')) + parseFloat($pp_details.css('marginBottom'));
			
			$pp_details = $pp_details.clone().addClass(settings.theme).width(width).appendTo($('body')).css({
				'position':'absolute',
				'top':-10000
			});
			detailsHeight += $pp_details.height();
			detailsHeight = (detailsHeight <= 34) ? 36 : detailsHeight; // Min-height for the details
			$pp_details.remove();
			
			// Get the titles height, to do so, I need to clone it since it's invisible
			$pp_title = $pp_pic_holder.find('.ppt');
			$pp_title.width(width);
			titleHeight = parseFloat($pp_title.css('marginTop')) + parseFloat($pp_title.css('marginBottom'));
			$pp_title = $pp_title.clone().appendTo($('body')).css({
				'position':'absolute',
				'top':-10000
			});
			titleHeight += $pp_title.height();
			$pp_title.remove();
			
			// Get the container size, to resize the holder to the right dimensions
			pp_contentHeight = height + detailsHeight;
			pp_contentWidth = width;
			pp_containerHeight = pp_contentHeight + titleHeight + $pp_pic_holder.find('.pp_top').height() + $pp_pic_holder.find('.pp_bottom').height();
			pp_containerWidth = width;
		}
	
		function _getFileType(itemSrc){
			if (itemSrc.match(/youtube\.com\/watch/i) || itemSrc.match(/youtu\.be/i)) {
				return 'youtube';
			}else if (itemSrc.match(/vimeo\.com/i)) {
				return 'vimeo';
			}else if(itemSrc.match(/\b.mov\b/i)){ 
				return 'quicktime';
			}else if(itemSrc.match(/\b.swf\b/i)){
				return 'flash';
			}else if(itemSrc.match(/\biframe=true\b/i)){
				return 'iframe';
			}else if(itemSrc.match(/\bajax=true\b/i)){
				return 'ajax';
			}else if(itemSrc.match(/\bcustom=true\b/i)){
				return 'custom';
			}else if(itemSrc.substr(0,1) == '#'){
				return 'inline';
			}else{
				return 'image';
			};
		};
	
		function _center_overlay(){
			if(doresize && typeof $pp_pic_holder != 'undefined') {
				scroll_pos = _get_scroll();
				contentHeight = $pp_pic_holder.height(), contentwidth = $pp_pic_holder.width();

				projectedTop = (windowHeight/2) + scroll_pos['scrollTop'] - (contentHeight/2);
				if(projectedTop < 0) projectedTop = 0;
				
				if(contentHeight > windowHeight)
					return;

				$pp_pic_holder.css({
					'top': projectedTop,
					'left': (windowWidth/2) + scroll_pos['scrollLeft'] - (contentwidth/2)
				});
			};
		};
	
		function _get_scroll(){
			if (self.pageYOffset) {
				return {scrollTop:self.pageYOffset,scrollLeft:self.pageXOffset};
			} else if (document.documentElement && document.documentElement.scrollTop) { // Explorer 6 Strict
				return {scrollTop:document.documentElement.scrollTop,scrollLeft:document.documentElement.scrollLeft};
			} else if (document.body) {// all other Explorers
				return {scrollTop:document.body.scrollTop,scrollLeft:document.body.scrollLeft};
			};
		};
	
		function _resize_overlay() {
			windowHeight = $(window).height(), windowWidth = $(window).width();
			
			if(typeof $pp_overlay != "undefined") $pp_overlay.height($(document).height()).width(windowWidth);
		};
	
		function _insert_gallery(){
			if(isSet && settings.overlay_gallery && _getFileType(pp_images[set_position])=="image") {
				itemWidth = 52+5; // 52 beign the thumb width, 5 being the right margin.
				navWidth = (settings.theme == "facebook" || settings.theme == "pp_default") ? 50 : 30; // Define the arrow width depending on the theme
				
				itemsPerPage = Math.floor((pp_dimensions['containerWidth'] - 100 - navWidth) / itemWidth);
				itemsPerPage = (itemsPerPage < pp_images.length) ? itemsPerPage : pp_images.length;
				totalPage = Math.ceil(pp_images.length / itemsPerPage) - 1;

				// Hide the nav in the case there's no need for links
				if(totalPage == 0){
					navWidth = 0; // No nav means no width!
					$pp_gallery.find('.pp_arrow_next,.pp_arrow_previous').hide();
				}else{
					$pp_gallery.find('.pp_arrow_next,.pp_arrow_previous').show();
				};

				galleryWidth = itemsPerPage * itemWidth;
				fullGalleryWidth = pp_images.length * itemWidth;
				
				// Set the proper width to the gallery items
				$pp_gallery
					.css('margin-left',-((galleryWidth/2) + (navWidth/2)))
					.find('div:first').width(galleryWidth+5)
					.find('ul').width(fullGalleryWidth)
					.find('li.selected').removeClass('selected');
				
				goToPage = (Math.floor(set_position/itemsPerPage) < totalPage) ? Math.floor(set_position/itemsPerPage) : totalPage;

				$.prettyPhoto.changeGalleryPage(goToPage);
				
				$pp_gallery_li.filter(':eq('+set_position+')').addClass('selected');
			}else{
				$pp_pic_holder.find('.pp_content').unbind('mouseenter mouseleave');
				// $pp_gallery.hide();
			}
		}
	
		function _build_overlay(caller){
			// Inject Social Tool markup into General markup
			if(settings.social_tools)
				facebook_like_link = settings.social_tools.replace('{location_href}', encodeURIComponent(location.href)); 

			settings.markup = settings.markup.replace('{pp_social}',''); 
			
			$('body').append(settings.markup); // Inject the markup
			
			$pp_pic_holder = $('.pp_pic_holder') , $ppt = $('.ppt'), $pp_overlay = $('div.pp_overlay'); // Set my global selectors
			
			// Inject the inline gallery!
			if(isSet && settings.overlay_gallery) {
				currentGalleryPage = 0;
				toInject = "";
				for (var i=0; i < pp_images.length; i++) {
					if(!pp_images[i].match(/\b(jpg|jpeg|png|gif)\b/gi)){
						classname = 'default';
						img_src = '';
					}else{
						classname = '';
						img_src = pp_images[i];
					}
					toInject += "<li class='"+classname+"'><a href='#'><img src='" + img_src + "' width='50' alt='' /></a></li>";
				};
				
				toInject = settings.gallery_markup.replace(/{gallery}/g,toInject);
				
				$pp_pic_holder.find('#pp_full_res').after(toInject);
				
				$pp_gallery = $('.pp_pic_holder .pp_gallery'), $pp_gallery_li = $pp_gallery.find('li'); // Set the gallery selectors
				
				$pp_gallery.find('.pp_arrow_next').click(function(){
					$.prettyPhoto.changeGalleryPage('next');
					$.prettyPhoto.stopSlideshow();
					return false;
				});
				
				$pp_gallery.find('.pp_arrow_previous').click(function(){
					$.prettyPhoto.changeGalleryPage('previous');
					$.prettyPhoto.stopSlideshow();
					return false;
				});
				
				$pp_pic_holder.find('.pp_content').hover(
					function(){
						$pp_pic_holder.find('.pp_gallery:not(.disabled)').fadeIn();
					},
					function(){
						$pp_pic_holder.find('.pp_gallery:not(.disabled)').fadeOut();
					});

				itemWidth = 52+5; // 52 beign the thumb width, 5 being the right margin.
				$pp_gallery_li.each(function(i){
					$(this)
						.find('a')
						.click(function(){
							$.prettyPhoto.changePage(i);
							$.prettyPhoto.stopSlideshow();
							return false;
						});
				});
			};
			
			
			// Inject the play/pause if it's a slideshow
			if(settings.slideshow){
				$pp_pic_holder.find('.pp_nav').prepend('<a href="#" class="pp_play">Play</a>')
				$pp_pic_holder.find('.pp_nav .pp_play').click(function(){
					$.prettyPhoto.startSlideshow();
					return false;
				});
			}
			
			$pp_pic_holder.attr('class','pp_pic_holder ' + settings.theme); // Set the proper theme
			
			$pp_overlay
				.css({
					'opacity':0,
					'height':$(document).height(),
					'width':$(window).width()
					})
				.bind('click',function(){
					if(!settings.modal) $.prettyPhoto.close();
				});

			$('a.pp_close').bind('click',function(){ $.prettyPhoto.close(); return false; });


			if(settings.allow_expand) {
				$('a.pp_expand').bind('click',function(e){
					// Expand the image
					if($(this).hasClass('pp_expand')){
						$(this).removeClass('pp_expand').addClass('pp_contract');
						doresize = false;
					}else{
						$(this).removeClass('pp_contract').addClass('pp_expand');
						doresize = true;
					};
				
					_hideContent(function(){ $.prettyPhoto.open(); });
			
					return false;
				});
			}
		
			$pp_pic_holder.find('.pp_previous, .pp_nav .pp_arrow_previous').bind('click',function(){
				$.prettyPhoto.changePage('previous');
				$.prettyPhoto.stopSlideshow();
				return false;
			});
		
			$pp_pic_holder.find('.pp_next, .pp_nav .pp_arrow_next').bind('click',function(){
				$.prettyPhoto.changePage('next');
				$.prettyPhoto.stopSlideshow();
				return false;
			});
			
			_center_overlay(); // Center it
		};

		if(!pp_alreadyInitialized && getHashtag()){
			pp_alreadyInitialized = true;
			
			// Grab the rel index to trigger the click on the correct element
			hashIndex = getHashtag();
			hashRel = hashIndex;
			hashIndex = hashIndex.substring(hashIndex.indexOf('/')+1,hashIndex.length-1);
			hashRel = hashRel.substring(0,hashRel.indexOf('/'));

			// Little timeout to make sure all the prettyPhoto initialize scripts has been run.
			// Useful in the event the page contain several init scripts.
			setTimeout(function(){ $("a["+pp_settings.hook+"^='"+hashRel+"']:eq("+hashIndex+")").trigger('click'); },50);
		}
		
		return this.unbind('click.prettyphoto').bind('click.prettyphoto',$.prettyPhoto.initialize); // Return the jQuery object for chaining. The unbind method is used to avoid click conflict when the plugin is called more than once
	};
	
	function getHashtag(){
		var url = location.href;
		hashtag = (url.indexOf('#prettyPhoto') !== -1) ? decodeURI(url.substring(url.indexOf('#prettyPhoto')+1,url.length)) : false;
		if(hashtag){  hashtag = hashtag.replace(/<|>/g,''); }
		return hashtag;
	};
	
	function setHashtag(){
		if(typeof theRel == 'undefined') return; // theRel is set on normal calls, it's impossible to deeplink using the API
		location.hash = theRel + '/'+rel_index+'/';
	};
	
	function clearHashtag(){
		if ( location.href.indexOf('#prettyPhoto') !== -1 ) location.hash = "prettyPhoto";
	}
	
	function getParam(name,url){
	  name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
	  var regexS = "[\\?&]"+name+"=([^&#]*)";
	  var regex = new RegExp( regexS );
	  var results = regex.exec( url );
	  return ( results == null ) ? "" : results[1];
	}
	
})(jQuery);

var pp_alreadyInitialized = false; // Used for the deep linking to make sure not to call the same function several times.

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVxdWFsaGVpZ2h0cy5qcyIsImltYWdlc2xvYWRlZC5wa2dkLm1pbi5qcyIsImluc3RhZmVlZC5taW4uanMiLCJpc290b3BlLnBrZ2QubWluLmpzIiwiamZsaWNrcmZlZWQubWluLmpzIiwianF1ZXJ5LXNjcm9sbHRvZml4ZWQtbWluLmpzIiwianF1ZXJ5LmFuaW1hdGVudW1iZXJzLm1pbi5qcyIsImpxdWVyeS5hcHBlYXIuanMiLCJqcXVlcnkuY291bnRkb3duLm1pbi5qcyIsImpxdWVyeS5jb3VudHRvLmpzIiwianF1ZXJ5LmRkc2xpY2subWluLmpzIiwianF1ZXJ5LmVhc2luZy5taW4uanMiLCJqcXVlcnkuZWFzeXBpZWNoYXJ0Lm1pbi5qcyIsImpxdWVyeS5maW5hbC1jb3VudGRvd24ubWluLmpzIiwianF1ZXJ5LmZpdHRleHQuanMiLCJqcXVlcnkuZml0dmlkcy5qcyIsImpxdWVyeS5mb3JtLm1pbi5qcyIsImpxdWVyeS5sYXp5Lm1pbi5qcyIsImpxdWVyeS5sZXR0ZXJpbmcuanMiLCJqcXVlcnkubG9jYWxzY3JvbGwubWluLmpzIiwianF1ZXJ5Lm1vdXNld2hlZWwubWluLmpzIiwianF1ZXJ5LnBhcmFsbGF4LTEuMS4zLmpzIiwianF1ZXJ5LnBhcm9sbGVyLm1pbi5qcyIsImpxdWVyeS5zY3JvbGx0by5taW4uanMiLCJqcXVlcnkuc3RpY2t5LmpzIiwianF1ZXJ5LnRleHRpbGxhdGUuanMiLCJqcXVlcnkudG91Y2hzd2lwZS5taW4uanMiLCJqcXVlcnkudmFsaWRhdGUubWluLmpzIiwia2luZXRpYy5qcyIsInBvcHBlci5taW4uanMiLCJzY3JvbGxtYWdpYy5taW4uanMiLCJzdGlja3ktc2lkZWJhci5taW4uanMiLCJ0eXBlZC5taW4uanMiLCJ2aXZ1cy5taW4uanMiLCJ3b3cubWluLmpzIiwiYnhzbGlkZXIvanF1ZXJ5LmJ4c2xpZGVyLm1pbi5qcyIsImZsZXhzbGlkZXIvanF1ZXJ5LmZsZXhzbGlkZXItbWluLmpzIiwibWFnbmlmaWMtcG9wdXAvanF1ZXJ5Lm1hZ25pZmljLXBvcHVwLm1pbi5qcyIsIm5pdm8tbGlnaHRib3gvbml2by1saWdodGJveC5taW4uanMiLCJtZW51ZnVsbHBhZ2UvbWVudWZ1bGxwYWdlLm1pbi5qcyIsIm93bC1jYXJvdXNlbC9vd2wuY2Fyb3VzZWwubWluLmpzIiwic2xpY2svc2xpY2subWluLmpzIiwidHdlbnR5dHdlbnR5L2pxdWVyeS5ldmVudC5tb3ZlLmpzIiwidHdlbnR5dHdlbnR5L2pxdWVyeS50d2VudHl0d2VudHkuanMiLCJ3YXlwb2ludHMvanF1ZXJ5LndheXBvaW50cy5taW4uanMiLCJsaWdodGdhbGxlcnkvanMvbGlnaHRnYWxsZXJ5LWFsbC5taW4uanMiLCJwcmV0dHlwaG90by9qcy9qcXVlcnkucHJldHR5cGhvdG8uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDTkE7QUFDQTtBQ0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNuQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNySEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNyQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2xJQTtBQUNBO0FBQ0E7QUNGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDUkE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDM0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDdkZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3ZCQTtBQUNBO0FDREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN4RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNyRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNwT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2hTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDalNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNiQTtBQUNBO0FBQ0E7QUFDQTtBQ0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNMQTtBQUNBO0FDREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1hBO0FDQUE7QUFDQTtBQ0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDakJBO0FDQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiamF2YXNjcmlwdC1wbHVnaW5zLWJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxyXG4gKiBTaW1wbGUgalF1ZXJ5IEVxdWFsIEhlaWdodHNcclxuICpcclxuICogQ29weXJpZ2h0IChjKSAyMDEzIE1hdHQgQmFua3NcclxuICogRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGFuZCBHUEwgbGljZW5zZXMuXHJcbiAqIFVzZXMgdGhlIHNhbWUgbGljZW5zZSBhcyBqUXVlcnksIHNlZTpcclxuICogaHR0cDovL2RvY3MuanF1ZXJ5LmNvbS9MaWNlbnNlXHJcbiAqXHJcbiAqIEB2ZXJzaW9uIDEuNS4xXHJcbiAqL1xyXG4hZnVuY3Rpb24oYSl7YS5mbi5lcXVhbEhlaWdodHM9ZnVuY3Rpb24oKXt2YXIgYj0wLGM9YSh0aGlzKTtyZXR1cm4gYy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9YSh0aGlzKS5pbm5lckhlaWdodCgpO2M+YiYmKGI9Yyl9KSxjLmNzcyhcImhlaWdodFwiLGIpfSxhKFwiW2RhdGEtZXF1YWxdXCIpLmVhY2goZnVuY3Rpb24oKXt2YXIgYj1hKHRoaXMpLGM9Yi5kYXRhKFwiZXF1YWxcIik7Yi5maW5kKGMpLmVxdWFsSGVpZ2h0cygpfSl9KGpRdWVyeSk7IiwiLyohXHJcbiAqIGltYWdlc0xvYWRlZCBQQUNLQUdFRCB2NC4xLjRcclxuICogSmF2YVNjcmlwdCBpcyBhbGwgbGlrZSBcIllvdSBpbWFnZXMgYXJlIGRvbmUgeWV0IG9yIHdoYXQ/XCJcclxuICogTUlUIExpY2Vuc2VcclxuICovXHJcblxyXG4hZnVuY3Rpb24oZSx0KXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwiZXYtZW1pdHRlci9ldi1lbWl0dGVyXCIsdCk6XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9dCgpOmUuRXZFbWl0dGVyPXQoKX0oXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6dGhpcyxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9dmFyIHQ9ZS5wcm90b3R5cGU7cmV0dXJuIHQub249ZnVuY3Rpb24oZSx0KXtpZihlJiZ0KXt2YXIgaT10aGlzLl9ldmVudHM9dGhpcy5fZXZlbnRzfHx7fSxuPWlbZV09aVtlXXx8W107cmV0dXJuIG4uaW5kZXhPZih0KT09LTEmJm4ucHVzaCh0KSx0aGlzfX0sdC5vbmNlPWZ1bmN0aW9uKGUsdCl7aWYoZSYmdCl7dGhpcy5vbihlLHQpO3ZhciBpPXRoaXMuX29uY2VFdmVudHM9dGhpcy5fb25jZUV2ZW50c3x8e30sbj1pW2VdPWlbZV18fHt9O3JldHVybiBuW3RdPSEwLHRoaXN9fSx0Lm9mZj1mdW5jdGlvbihlLHQpe3ZhciBpPXRoaXMuX2V2ZW50cyYmdGhpcy5fZXZlbnRzW2VdO2lmKGkmJmkubGVuZ3RoKXt2YXIgbj1pLmluZGV4T2YodCk7cmV0dXJuIG4hPS0xJiZpLnNwbGljZShuLDEpLHRoaXN9fSx0LmVtaXRFdmVudD1mdW5jdGlvbihlLHQpe3ZhciBpPXRoaXMuX2V2ZW50cyYmdGhpcy5fZXZlbnRzW2VdO2lmKGkmJmkubGVuZ3RoKXtpPWkuc2xpY2UoMCksdD10fHxbXTtmb3IodmFyIG49dGhpcy5fb25jZUV2ZW50cyYmdGhpcy5fb25jZUV2ZW50c1tlXSxvPTA7bzxpLmxlbmd0aDtvKyspe3ZhciByPWlbb10scz1uJiZuW3JdO3MmJih0aGlzLm9mZihlLHIpLGRlbGV0ZSBuW3JdKSxyLmFwcGx5KHRoaXMsdCl9cmV0dXJuIHRoaXN9fSx0LmFsbE9mZj1mdW5jdGlvbigpe2RlbGV0ZSB0aGlzLl9ldmVudHMsZGVsZXRlIHRoaXMuX29uY2VFdmVudHN9LGV9KSxmdW5jdGlvbihlLHQpe1widXNlIHN0cmljdFwiO1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW1wiZXYtZW1pdHRlci9ldi1lbWl0dGVyXCJdLGZ1bmN0aW9uKGkpe3JldHVybiB0KGUsaSl9KTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz10KGUscmVxdWlyZShcImV2LWVtaXR0ZXJcIikpOmUuaW1hZ2VzTG9hZGVkPXQoZSxlLkV2RW1pdHRlcil9KFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OnRoaXMsZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBpKGUsdCl7Zm9yKHZhciBpIGluIHQpZVtpXT10W2ldO3JldHVybiBlfWZ1bmN0aW9uIG4oZSl7aWYoQXJyYXkuaXNBcnJheShlKSlyZXR1cm4gZTt2YXIgdD1cIm9iamVjdFwiPT10eXBlb2YgZSYmXCJudW1iZXJcIj09dHlwZW9mIGUubGVuZ3RoO3JldHVybiB0P2QuY2FsbChlKTpbZV19ZnVuY3Rpb24gbyhlLHQscil7aWYoISh0aGlzIGluc3RhbmNlb2YgbykpcmV0dXJuIG5ldyBvKGUsdCxyKTt2YXIgcz1lO3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBlJiYocz1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGUpKSxzPyh0aGlzLmVsZW1lbnRzPW4ocyksdGhpcy5vcHRpb25zPWkoe30sdGhpcy5vcHRpb25zKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0P3I9dDppKHRoaXMub3B0aW9ucyx0KSxyJiZ0aGlzLm9uKFwiYWx3YXlzXCIsciksdGhpcy5nZXRJbWFnZXMoKSxoJiYodGhpcy5qcURlZmVycmVkPW5ldyBoLkRlZmVycmVkKSx2b2lkIHNldFRpbWVvdXQodGhpcy5jaGVjay5iaW5kKHRoaXMpKSk6dm9pZCBhLmVycm9yKFwiQmFkIGVsZW1lbnQgZm9yIGltYWdlc0xvYWRlZCBcIisoc3x8ZSkpfWZ1bmN0aW9uIHIoZSl7dGhpcy5pbWc9ZX1mdW5jdGlvbiBzKGUsdCl7dGhpcy51cmw9ZSx0aGlzLmVsZW1lbnQ9dCx0aGlzLmltZz1uZXcgSW1hZ2V9dmFyIGg9ZS5qUXVlcnksYT1lLmNvbnNvbGUsZD1BcnJheS5wcm90b3R5cGUuc2xpY2U7by5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0LnByb3RvdHlwZSksby5wcm90b3R5cGUub3B0aW9ucz17fSxvLnByb3RvdHlwZS5nZXRJbWFnZXM9ZnVuY3Rpb24oKXt0aGlzLmltYWdlcz1bXSx0aGlzLmVsZW1lbnRzLmZvckVhY2godGhpcy5hZGRFbGVtZW50SW1hZ2VzLHRoaXMpfSxvLnByb3RvdHlwZS5hZGRFbGVtZW50SW1hZ2VzPWZ1bmN0aW9uKGUpe1wiSU1HXCI9PWUubm9kZU5hbWUmJnRoaXMuYWRkSW1hZ2UoZSksdGhpcy5vcHRpb25zLmJhY2tncm91bmQ9PT0hMCYmdGhpcy5hZGRFbGVtZW50QmFja2dyb3VuZEltYWdlcyhlKTt2YXIgdD1lLm5vZGVUeXBlO2lmKHQmJnVbdF0pe2Zvcih2YXIgaT1lLnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbWdcIiksbj0wO248aS5sZW5ndGg7bisrKXt2YXIgbz1pW25dO3RoaXMuYWRkSW1hZ2Uobyl9aWYoXCJzdHJpbmdcIj09dHlwZW9mIHRoaXMub3B0aW9ucy5iYWNrZ3JvdW5kKXt2YXIgcj1lLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5vcHRpb25zLmJhY2tncm91bmQpO2ZvcihuPTA7bjxyLmxlbmd0aDtuKyspe3ZhciBzPXJbbl07dGhpcy5hZGRFbGVtZW50QmFja2dyb3VuZEltYWdlcyhzKX19fX07dmFyIHU9ezE6ITAsOTohMCwxMTohMH07cmV0dXJuIG8ucHJvdG90eXBlLmFkZEVsZW1lbnRCYWNrZ3JvdW5kSW1hZ2VzPWZ1bmN0aW9uKGUpe3ZhciB0PWdldENvbXB1dGVkU3R5bGUoZSk7aWYodClmb3IodmFyIGk9L3VybFxcKChbJ1wiXSk/KC4qPylcXDFcXCkvZ2ksbj1pLmV4ZWModC5iYWNrZ3JvdW5kSW1hZ2UpO251bGwhPT1uOyl7dmFyIG89biYmblsyXTtvJiZ0aGlzLmFkZEJhY2tncm91bmQobyxlKSxuPWkuZXhlYyh0LmJhY2tncm91bmRJbWFnZSl9fSxvLnByb3RvdHlwZS5hZGRJbWFnZT1mdW5jdGlvbihlKXt2YXIgdD1uZXcgcihlKTt0aGlzLmltYWdlcy5wdXNoKHQpfSxvLnByb3RvdHlwZS5hZGRCYWNrZ3JvdW5kPWZ1bmN0aW9uKGUsdCl7dmFyIGk9bmV3IHMoZSx0KTt0aGlzLmltYWdlcy5wdXNoKGkpfSxvLnByb3RvdHlwZS5jaGVjaz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSxpLG4pe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0LnByb2dyZXNzKGUsaSxuKX0pfXZhciB0PXRoaXM7cmV0dXJuIHRoaXMucHJvZ3Jlc3NlZENvdW50PTAsdGhpcy5oYXNBbnlCcm9rZW49ITEsdGhpcy5pbWFnZXMubGVuZ3RoP3ZvaWQgdGhpcy5pbWFnZXMuZm9yRWFjaChmdW5jdGlvbih0KXt0Lm9uY2UoXCJwcm9ncmVzc1wiLGUpLHQuY2hlY2soKX0pOnZvaWQgdGhpcy5jb21wbGV0ZSgpfSxvLnByb3RvdHlwZS5wcm9ncmVzcz1mdW5jdGlvbihlLHQsaSl7dGhpcy5wcm9ncmVzc2VkQ291bnQrKyx0aGlzLmhhc0FueUJyb2tlbj10aGlzLmhhc0FueUJyb2tlbnx8IWUuaXNMb2FkZWQsdGhpcy5lbWl0RXZlbnQoXCJwcm9ncmVzc1wiLFt0aGlzLGUsdF0pLHRoaXMuanFEZWZlcnJlZCYmdGhpcy5qcURlZmVycmVkLm5vdGlmeSYmdGhpcy5qcURlZmVycmVkLm5vdGlmeSh0aGlzLGUpLHRoaXMucHJvZ3Jlc3NlZENvdW50PT10aGlzLmltYWdlcy5sZW5ndGgmJnRoaXMuY29tcGxldGUoKSx0aGlzLm9wdGlvbnMuZGVidWcmJmEmJmEubG9nKFwicHJvZ3Jlc3M6IFwiK2ksZSx0KX0sby5wcm90b3R5cGUuY29tcGxldGU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmhhc0FueUJyb2tlbj9cImZhaWxcIjpcImRvbmVcIjtpZih0aGlzLmlzQ29tcGxldGU9ITAsdGhpcy5lbWl0RXZlbnQoZSxbdGhpc10pLHRoaXMuZW1pdEV2ZW50KFwiYWx3YXlzXCIsW3RoaXNdKSx0aGlzLmpxRGVmZXJyZWQpe3ZhciB0PXRoaXMuaGFzQW55QnJva2VuP1wicmVqZWN0XCI6XCJyZXNvbHZlXCI7dGhpcy5qcURlZmVycmVkW3RdKHRoaXMpfX0sci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0LnByb3RvdHlwZSksci5wcm90b3R5cGUuY2hlY2s9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldElzSW1hZ2VDb21wbGV0ZSgpO3JldHVybiBlP3ZvaWQgdGhpcy5jb25maXJtKDAhPT10aGlzLmltZy5uYXR1cmFsV2lkdGgsXCJuYXR1cmFsV2lkdGhcIik6KHRoaXMucHJveHlJbWFnZT1uZXcgSW1hZ2UsdGhpcy5wcm94eUltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsdGhpcyksdGhpcy5wcm94eUltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLHRoaXMpLHRoaXMuaW1nLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsdGhpcyksdGhpcy5pbWcuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsdGhpcyksdm9pZCh0aGlzLnByb3h5SW1hZ2Uuc3JjPXRoaXMuaW1nLnNyYykpfSxyLnByb3RvdHlwZS5nZXRJc0ltYWdlQ29tcGxldGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbWcuY29tcGxldGUmJnRoaXMuaW1nLm5hdHVyYWxXaWR0aH0sci5wcm90b3R5cGUuY29uZmlybT1mdW5jdGlvbihlLHQpe3RoaXMuaXNMb2FkZWQ9ZSx0aGlzLmVtaXRFdmVudChcInByb2dyZXNzXCIsW3RoaXMsdGhpcy5pbWcsdF0pfSxyLnByb3RvdHlwZS5oYW5kbGVFdmVudD1mdW5jdGlvbihlKXt2YXIgdD1cIm9uXCIrZS50eXBlO3RoaXNbdF0mJnRoaXNbdF0oZSl9LHIucHJvdG90eXBlLm9ubG9hZD1mdW5jdGlvbigpe3RoaXMuY29uZmlybSghMCxcIm9ubG9hZFwiKSx0aGlzLnVuYmluZEV2ZW50cygpfSxyLnByb3RvdHlwZS5vbmVycm9yPWZ1bmN0aW9uKCl7dGhpcy5jb25maXJtKCExLFwib25lcnJvclwiKSx0aGlzLnVuYmluZEV2ZW50cygpfSxyLnByb3RvdHlwZS51bmJpbmRFdmVudHM9ZnVuY3Rpb24oKXt0aGlzLnByb3h5SW1hZ2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIix0aGlzKSx0aGlzLnByb3h5SW1hZ2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsdGhpcyksdGhpcy5pbWcucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIix0aGlzKSx0aGlzLmltZy5yZW1vdmVFdmVudExpc3RlbmVyKFwiZXJyb3JcIix0aGlzKX0scy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShyLnByb3RvdHlwZSkscy5wcm90b3R5cGUuY2hlY2s9ZnVuY3Rpb24oKXt0aGlzLmltZy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLHRoaXMpLHRoaXMuaW1nLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLHRoaXMpLHRoaXMuaW1nLnNyYz10aGlzLnVybDt2YXIgZT10aGlzLmdldElzSW1hZ2VDb21wbGV0ZSgpO2UmJih0aGlzLmNvbmZpcm0oMCE9PXRoaXMuaW1nLm5hdHVyYWxXaWR0aCxcIm5hdHVyYWxXaWR0aFwiKSx0aGlzLnVuYmluZEV2ZW50cygpKX0scy5wcm90b3R5cGUudW5iaW5kRXZlbnRzPWZ1bmN0aW9uKCl7dGhpcy5pbWcucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIix0aGlzKSx0aGlzLmltZy5yZW1vdmVFdmVudExpc3RlbmVyKFwiZXJyb3JcIix0aGlzKX0scy5wcm90b3R5cGUuY29uZmlybT1mdW5jdGlvbihlLHQpe3RoaXMuaXNMb2FkZWQ9ZSx0aGlzLmVtaXRFdmVudChcInByb2dyZXNzXCIsW3RoaXMsdGhpcy5lbGVtZW50LHRdKX0sby5tYWtlSlF1ZXJ5UGx1Z2luPWZ1bmN0aW9uKHQpe3Q9dHx8ZS5qUXVlcnksdCYmKGg9dCxoLmZuLmltYWdlc0xvYWRlZD1mdW5jdGlvbihlLHQpe3ZhciBpPW5ldyBvKHRoaXMsZSx0KTtyZXR1cm4gaS5qcURlZmVycmVkLnByb21pc2UoaCh0aGlzKSl9KX0sby5tYWtlSlF1ZXJ5UGx1Z2luKCksb30pOyIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS45LjNcclxuKGZ1bmN0aW9uKCl7dmFyIGU7ZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt2YXIgbixyO3RoaXMub3B0aW9ucz17dGFyZ2V0OlwiaW5zdGFmZWVkXCIsZ2V0OlwicG9wdWxhclwiLHJlc29sdXRpb246XCJ0aHVtYm5haWxcIixzb3J0Qnk6XCJub25lXCIsbGlua3M6ITAsbW9jazohMSx1c2VIdHRwOiExfTtpZih0eXBlb2YgZT09XCJvYmplY3RcIilmb3IobiBpbiBlKXI9ZVtuXSx0aGlzLm9wdGlvbnNbbl09cjt0aGlzLmNvbnRleHQ9dCE9bnVsbD90OnRoaXMsdGhpcy51bmlxdWU9dGhpcy5fZ2VuS2V5KCl9cmV0dXJuIGUucHJvdG90eXBlLmhhc05leHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdHlwZW9mIHRoaXMuY29udGV4dC5uZXh0VXJsPT1cInN0cmluZ1wiJiZ0aGlzLmNvbnRleHQubmV4dFVybC5sZW5ndGg+MH0sZS5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc05leHQoKT90aGlzLnJ1bih0aGlzLmNvbnRleHQubmV4dFVybCk6ITF9LGUucHJvdG90eXBlLnJ1bj1mdW5jdGlvbih0KXt2YXIgbixyLGk7aWYodHlwZW9mIHRoaXMub3B0aW9ucy5jbGllbnRJZCE9XCJzdHJpbmdcIiYmdHlwZW9mIHRoaXMub3B0aW9ucy5hY2Nlc3NUb2tlbiE9XCJzdHJpbmdcIil0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIGNsaWVudElkIG9yIGFjY2Vzc1Rva2VuLlwiKTtpZih0eXBlb2YgdGhpcy5vcHRpb25zLmFjY2Vzc1Rva2VuIT1cInN0cmluZ1wiJiZ0eXBlb2YgdGhpcy5vcHRpb25zLmNsaWVudElkIT1cInN0cmluZ1wiKXRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgY2xpZW50SWQgb3IgYWNjZXNzVG9rZW4uXCIpO3JldHVybiB0aGlzLm9wdGlvbnMuYmVmb3JlIT1udWxsJiZ0eXBlb2YgdGhpcy5vcHRpb25zLmJlZm9yZT09XCJmdW5jdGlvblwiJiZ0aGlzLm9wdGlvbnMuYmVmb3JlLmNhbGwodGhpcyksdHlwZW9mIGRvY3VtZW50IT1cInVuZGVmaW5lZFwiJiZkb2N1bWVudCE9PW51bGwmJihpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIiksaS5pZD1cImluc3RhZmVlZC1mZXRjaGVyXCIsaS5zcmM9dHx8dGhpcy5fYnVpbGRVcmwoKSxuPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKSxuWzBdLmFwcGVuZENoaWxkKGkpLHI9XCJpbnN0YWZlZWRDYWNoZVwiK3RoaXMudW5pcXVlLHdpbmRvd1tyXT1uZXcgZSh0aGlzLm9wdGlvbnMsdGhpcyksd2luZG93W3JdLnVuaXF1ZT10aGlzLnVuaXF1ZSksITB9LGUucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKGUpe3ZhciB0LG4scixpLHMsbyx1LGEsZixsLGMsaCxwLGQsdixtLGcseSxiLHcsRSxTLHgsVCxOLEMsayxMLEEsTyxNLF8sRDtpZih0eXBlb2YgZSE9XCJvYmplY3RcIil7aWYodGhpcy5vcHRpb25zLmVycm9yIT1udWxsJiZ0eXBlb2YgdGhpcy5vcHRpb25zLmVycm9yPT1cImZ1bmN0aW9uXCIpcmV0dXJuIHRoaXMub3B0aW9ucy5lcnJvci5jYWxsKHRoaXMsXCJJbnZhbGlkIEpTT04gZGF0YVwiKSwhMTt0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEpTT04gcmVzcG9uc2VcIil9aWYoZS5tZXRhLmNvZGUhPT0yMDApe2lmKHRoaXMub3B0aW9ucy5lcnJvciE9bnVsbCYmdHlwZW9mIHRoaXMub3B0aW9ucy5lcnJvcj09XCJmdW5jdGlvblwiKXJldHVybiB0aGlzLm9wdGlvbnMuZXJyb3IuY2FsbCh0aGlzLGUubWV0YS5lcnJvcl9tZXNzYWdlKSwhMTt0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBmcm9tIEluc3RhZ3JhbTogXCIrZS5tZXRhLmVycm9yX21lc3NhZ2UpfWlmKGUuZGF0YS5sZW5ndGg9PT0wKXtpZih0aGlzLm9wdGlvbnMuZXJyb3IhPW51bGwmJnR5cGVvZiB0aGlzLm9wdGlvbnMuZXJyb3I9PVwiZnVuY3Rpb25cIilyZXR1cm4gdGhpcy5vcHRpb25zLmVycm9yLmNhbGwodGhpcyxcIk5vIGltYWdlcyB3ZXJlIHJldHVybmVkIGZyb20gSW5zdGFncmFtXCIpLCExO3Rocm93IG5ldyBFcnJvcihcIk5vIGltYWdlcyB3ZXJlIHJldHVybmVkIGZyb20gSW5zdGFncmFtXCIpfXRoaXMub3B0aW9ucy5zdWNjZXNzIT1udWxsJiZ0eXBlb2YgdGhpcy5vcHRpb25zLnN1Y2Nlc3M9PVwiZnVuY3Rpb25cIiYmdGhpcy5vcHRpb25zLnN1Y2Nlc3MuY2FsbCh0aGlzLGUpLHRoaXMuY29udGV4dC5uZXh0VXJsPVwiXCIsZS5wYWdpbmF0aW9uIT1udWxsJiYodGhpcy5jb250ZXh0Lm5leHRVcmw9ZS5wYWdpbmF0aW9uLm5leHRfdXJsKTtpZih0aGlzLm9wdGlvbnMuc29ydEJ5IT09XCJub25lXCIpe3RoaXMub3B0aW9ucy5zb3J0Qnk9PT1cInJhbmRvbVwiP009W1wiXCIsXCJyYW5kb21cIl06TT10aGlzLm9wdGlvbnMuc29ydEJ5LnNwbGl0KFwiLVwiKSxPPU1bMF09PT1cImxlYXN0XCI/ITA6ITE7c3dpdGNoKE1bMV0pe2Nhc2VcInJhbmRvbVwiOmUuZGF0YS5zb3J0KGZ1bmN0aW9uKCl7cmV0dXJuLjUtTWF0aC5yYW5kb20oKX0pO2JyZWFrO2Nhc2VcInJlY2VudFwiOmUuZGF0YT10aGlzLl9zb3J0QnkoZS5kYXRhLFwiY3JlYXRlZF90aW1lXCIsTyk7YnJlYWs7Y2FzZVwibGlrZWRcIjplLmRhdGE9dGhpcy5fc29ydEJ5KGUuZGF0YSxcImxpa2VzLmNvdW50XCIsTyk7YnJlYWs7Y2FzZVwiY29tbWVudGVkXCI6ZS5kYXRhPXRoaXMuX3NvcnRCeShlLmRhdGEsXCJjb21tZW50cy5jb3VudFwiLE8pO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBvcHRpb24gZm9yIHNvcnRCeTogJ1wiK3RoaXMub3B0aW9ucy5zb3J0QnkrXCInLlwiKX19aWYodHlwZW9mIGRvY3VtZW50IT1cInVuZGVmaW5lZFwiJiZkb2N1bWVudCE9PW51bGwmJnRoaXMub3B0aW9ucy5tb2NrPT09ITEpe209ZS5kYXRhLEE9cGFyc2VJbnQodGhpcy5vcHRpb25zLmxpbWl0LDEwKSx0aGlzLm9wdGlvbnMubGltaXQhPW51bGwmJm0ubGVuZ3RoPkEmJihtPW0uc2xpY2UoMCxBKSksdT1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksdGhpcy5vcHRpb25zLmZpbHRlciE9bnVsbCYmdHlwZW9mIHRoaXMub3B0aW9ucy5maWx0ZXI9PVwiZnVuY3Rpb25cIiYmKG09dGhpcy5fZmlsdGVyKG0sdGhpcy5vcHRpb25zLmZpbHRlcikpO2lmKHRoaXMub3B0aW9ucy50ZW1wbGF0ZSE9bnVsbCYmdHlwZW9mIHRoaXMub3B0aW9ucy50ZW1wbGF0ZT09XCJzdHJpbmdcIil7Zj1cIlwiLGQ9XCJcIix3PVwiXCIsRD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2ZvcihjPTAsTj1tLmxlbmd0aDtjPE47YysrKXtoPW1bY10scD1oLmltYWdlc1t0aGlzLm9wdGlvbnMucmVzb2x1dGlvbl07aWYodHlwZW9mIHAhPVwib2JqZWN0XCIpdGhyb3cgbz1cIk5vIGltYWdlIGZvdW5kIGZvciByZXNvbHV0aW9uOiBcIit0aGlzLm9wdGlvbnMucmVzb2x1dGlvbitcIi5cIixuZXcgRXJyb3Iobyk7RT1wLndpZHRoLHk9cC5oZWlnaHQsYj1cInNxdWFyZVwiLEU+eSYmKGI9XCJsYW5kc2NhcGVcIiksRTx5JiYoYj1cInBvcnRyYWl0XCIpLHY9cC51cmwsbD13aW5kb3cubG9jYXRpb24ucHJvdG9jb2wuaW5kZXhPZihcImh0dHBcIik+PTAsbCYmIXRoaXMub3B0aW9ucy51c2VIdHRwJiYodj12LnJlcGxhY2UoL2h0dHBzPzpcXC9cXC8vLFwiLy9cIikpLGQ9dGhpcy5fbWFrZVRlbXBsYXRlKHRoaXMub3B0aW9ucy50ZW1wbGF0ZSx7bW9kZWw6aCxpZDpoLmlkLGxpbms6aC5saW5rLHR5cGU6aC50eXBlLGltYWdlOnYsd2lkdGg6RSxoZWlnaHQ6eSxvcmllbnRhdGlvbjpiLGNhcHRpb246dGhpcy5fZ2V0T2JqZWN0UHJvcGVydHkoaCxcImNhcHRpb24udGV4dFwiKSxsaWtlczpoLmxpa2VzLmNvdW50LGNvbW1lbnRzOmguY29tbWVudHMuY291bnQsbG9jYXRpb246dGhpcy5fZ2V0T2JqZWN0UHJvcGVydHkoaCxcImxvY2F0aW9uLm5hbWVcIil9KSxmKz1kfUQuaW5uZXJIVE1MPWYsaT1bXSxyPTAsbj1ELmNoaWxkTm9kZXMubGVuZ3RoO3doaWxlKHI8bilpLnB1c2goRC5jaGlsZE5vZGVzW3JdKSxyKz0xO2Zvcih4PTAsQz1pLmxlbmd0aDt4PEM7eCsrKUw9aVt4XSx1LmFwcGVuZENoaWxkKEwpfWVsc2UgZm9yKFQ9MCxrPW0ubGVuZ3RoO1Q8aztUKyspe2g9bVtUXSxnPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIikscD1oLmltYWdlc1t0aGlzLm9wdGlvbnMucmVzb2x1dGlvbl07aWYodHlwZW9mIHAhPVwib2JqZWN0XCIpdGhyb3cgbz1cIk5vIGltYWdlIGZvdW5kIGZvciByZXNvbHV0aW9uOiBcIit0aGlzLm9wdGlvbnMucmVzb2x1dGlvbitcIi5cIixuZXcgRXJyb3Iobyk7dj1wLnVybCxsPXdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbC5pbmRleE9mKFwiaHR0cFwiKT49MCxsJiYhdGhpcy5vcHRpb25zLnVzZUh0dHAmJih2PXYucmVwbGFjZSgvaHR0cHM/OlxcL1xcLy8sXCIvL1wiKSksZy5zcmM9dix0aGlzLm9wdGlvbnMubGlua3M9PT0hMD8odD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKSx0LmhyZWY9aC5saW5rLHQuYXBwZW5kQ2hpbGQoZyksdS5hcHBlbmRDaGlsZCh0KSk6dS5hcHBlbmRDaGlsZChnKX1fPXRoaXMub3B0aW9ucy50YXJnZXQsdHlwZW9mIF89PVwic3RyaW5nXCImJihfPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKF8pKTtpZihfPT1udWxsKXRocm93IG89J05vIGVsZW1lbnQgd2l0aCBpZD1cIicrdGhpcy5vcHRpb25zLnRhcmdldCsnXCIgb24gcGFnZS4nLG5ldyBFcnJvcihvKTtfLmFwcGVuZENoaWxkKHUpLGE9ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdLGEucmVtb3ZlQ2hpbGQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbnN0YWZlZWQtZmV0Y2hlclwiKSksUz1cImluc3RhZmVlZENhY2hlXCIrdGhpcy51bmlxdWUsd2luZG93W1NdPXZvaWQgMDt0cnl7ZGVsZXRlIHdpbmRvd1tTXX1jYXRjaChQKXtzPVB9fXJldHVybiB0aGlzLm9wdGlvbnMuYWZ0ZXIhPW51bGwmJnR5cGVvZiB0aGlzLm9wdGlvbnMuYWZ0ZXI9PVwiZnVuY3Rpb25cIiYmdGhpcy5vcHRpb25zLmFmdGVyLmNhbGwodGhpcyksITB9LGUucHJvdG90eXBlLl9idWlsZFVybD1mdW5jdGlvbigpe3ZhciBlLHQsbjtlPVwiaHR0cHM6Ly9hcGkuaW5zdGFncmFtLmNvbS92MVwiO3N3aXRjaCh0aGlzLm9wdGlvbnMuZ2V0KXtjYXNlXCJwb3B1bGFyXCI6dD1cIm1lZGlhL3BvcHVsYXJcIjticmVhaztjYXNlXCJ0YWdnZWRcIjppZighdGhpcy5vcHRpb25zLnRhZ05hbWUpdGhyb3cgbmV3IEVycm9yKFwiTm8gdGFnIG5hbWUgc3BlY2lmaWVkLiBVc2UgdGhlICd0YWdOYW1lJyBvcHRpb24uXCIpO3Q9XCJ0YWdzL1wiK3RoaXMub3B0aW9ucy50YWdOYW1lK1wiL21lZGlhL3JlY2VudFwiO2JyZWFrO2Nhc2VcImxvY2F0aW9uXCI6aWYoIXRoaXMub3B0aW9ucy5sb2NhdGlvbklkKXRocm93IG5ldyBFcnJvcihcIk5vIGxvY2F0aW9uIHNwZWNpZmllZC4gVXNlIHRoZSAnbG9jYXRpb25JZCcgb3B0aW9uLlwiKTt0PVwibG9jYXRpb25zL1wiK3RoaXMub3B0aW9ucy5sb2NhdGlvbklkK1wiL21lZGlhL3JlY2VudFwiO2JyZWFrO2Nhc2VcInVzZXJcIjppZighdGhpcy5vcHRpb25zLnVzZXJJZCl0aHJvdyBuZXcgRXJyb3IoXCJObyB1c2VyIHNwZWNpZmllZC4gVXNlIHRoZSAndXNlcklkJyBvcHRpb24uXCIpO3Q9XCJ1c2Vycy9cIit0aGlzLm9wdGlvbnMudXNlcklkK1wiL21lZGlhL3JlY2VudFwiO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBvcHRpb24gZm9yIGdldDogJ1wiK3RoaXMub3B0aW9ucy5nZXQrXCInLlwiKX1yZXR1cm4gbj1lK1wiL1wiK3QsdGhpcy5vcHRpb25zLmFjY2Vzc1Rva2VuIT1udWxsP24rPVwiP2FjY2Vzc190b2tlbj1cIit0aGlzLm9wdGlvbnMuYWNjZXNzVG9rZW46bis9XCI/Y2xpZW50X2lkPVwiK3RoaXMub3B0aW9ucy5jbGllbnRJZCx0aGlzLm9wdGlvbnMubGltaXQhPW51bGwmJihuKz1cIiZjb3VudD1cIit0aGlzLm9wdGlvbnMubGltaXQpLG4rPVwiJmNhbGxiYWNrPWluc3RhZmVlZENhY2hlXCIrdGhpcy51bmlxdWUrXCIucGFyc2VcIixufSxlLnByb3RvdHlwZS5fZ2VuS2V5PWZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIGU9ZnVuY3Rpb24oKXtyZXR1cm4oKDErTWF0aC5yYW5kb20oKSkqNjU1MzZ8MCkudG9TdHJpbmcoMTYpLnN1YnN0cmluZygxKX0sXCJcIitlKCkrZSgpK2UoKStlKCl9LGUucHJvdG90eXBlLl9tYWtlVGVtcGxhdGU9ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGkscyxvO3I9Lyg/Olxce3syfSkoW1xcd1xcW1xcXVxcLl0rKSg/OlxcfXsyfSkvLG49ZTt3aGlsZShyLnRlc3Qobikpcz1uLm1hdGNoKHIpWzFdLG89KGk9dGhpcy5fZ2V0T2JqZWN0UHJvcGVydHkodCxzKSkhPW51bGw/aTpcIlwiLG49bi5yZXBsYWNlKHIsZnVuY3Rpb24oKXtyZXR1cm5cIlwiK299KTtyZXR1cm4gbn0sZS5wcm90b3R5cGUuX2dldE9iamVjdFByb3BlcnR5PWZ1bmN0aW9uKGUsdCl7dmFyIG4scjt0PXQucmVwbGFjZSgvXFxbKFxcdyspXFxdL2csXCIuJDFcIikscj10LnNwbGl0KFwiLlwiKTt3aGlsZShyLmxlbmd0aCl7bj1yLnNoaWZ0KCk7aWYoIShlIT1udWxsJiZuIGluIGUpKXJldHVybiBudWxsO2U9ZVtuXX1yZXR1cm4gZX0sZS5wcm90b3R5cGUuX3NvcnRCeT1mdW5jdGlvbihlLHQsbil7dmFyIHI7cmV0dXJuIHI9ZnVuY3Rpb24oZSxyKXt2YXIgaSxzO3JldHVybiBpPXRoaXMuX2dldE9iamVjdFByb3BlcnR5KGUsdCkscz10aGlzLl9nZXRPYmplY3RQcm9wZXJ0eShyLHQpLG4/aT5zPzE6LTE6aTxzPzE6LTF9LGUuc29ydChyLmJpbmQodGhpcykpLGV9LGUucHJvdG90eXBlLl9maWx0ZXI9ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGkscyxvO249W10scj1mdW5jdGlvbihlKXtpZih0KGUpKXJldHVybiBuLnB1c2goZSl9O2ZvcihpPTAsbz1lLmxlbmd0aDtpPG87aSsrKXM9ZVtpXSxyKHMpO3JldHVybiBufSxlfSgpLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR5cGVvZiBkZWZpbmU9PVwiZnVuY3Rpb25cIiYmZGVmaW5lLmFtZD9kZWZpbmUoW10sdCk6dHlwZW9mIG1vZHVsZT09XCJvYmplY3RcIiYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9dCgpOmUuSW5zdGFmZWVkPXQoKX0odGhpcyxmdW5jdGlvbigpe3JldHVybiBlfSl9KS5jYWxsKHRoaXMpOyIsIi8qIVxuICogSXNvdG9wZSBQQUNLQUdFRCB2My4wLjZcbiAqXG4gKiBMaWNlbnNlZCBHUEx2MyBmb3Igb3BlbiBzb3VyY2UgdXNlXG4gKiBvciBJc290b3BlIENvbW1lcmNpYWwgTGljZW5zZSBmb3IgY29tbWVyY2lhbCB1c2VcbiAqXG4gKiBodHRwczovL2lzb3RvcGUubWV0YWZpenp5LmNvXG4gKiBDb3B5cmlnaHQgMjAxMC0yMDE4IE1ldGFmaXp6eVxuICovXG5cbiFmdW5jdGlvbih0LGUpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJqcXVlcnktYnJpZGdldC9qcXVlcnktYnJpZGdldFwiLFtcImpxdWVyeVwiXSxmdW5jdGlvbihpKXtyZXR1cm4gZSh0LGkpfSk6XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZSh0LHJlcXVpcmUoXCJqcXVlcnlcIikpOnQualF1ZXJ5QnJpZGdldD1lKHQsdC5qUXVlcnkpfSh3aW5kb3csZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKGkscyxhKXtmdW5jdGlvbiB1KHQsZSxvKXt2YXIgbixzPVwiJCgpLlwiK2krJyhcIicrZSsnXCIpJztyZXR1cm4gdC5lYWNoKGZ1bmN0aW9uKHQsdSl7dmFyIGg9YS5kYXRhKHUsaSk7aWYoIWgpcmV0dXJuIHZvaWQgcihpK1wiIG5vdCBpbml0aWFsaXplZC4gQ2Fubm90IGNhbGwgbWV0aG9kcywgaS5lLiBcIitzKTt2YXIgZD1oW2VdO2lmKCFkfHxcIl9cIj09ZS5jaGFyQXQoMCkpcmV0dXJuIHZvaWQgcihzK1wiIGlzIG5vdCBhIHZhbGlkIG1ldGhvZFwiKTt2YXIgbD1kLmFwcGx5KGgsbyk7bj12b2lkIDA9PT1uP2w6bn0pLHZvaWQgMCE9PW4/bjp0fWZ1bmN0aW9uIGgodCxlKXt0LmVhY2goZnVuY3Rpb24odCxvKXt2YXIgbj1hLmRhdGEobyxpKTtuPyhuLm9wdGlvbihlKSxuLl9pbml0KCkpOihuPW5ldyBzKG8sZSksYS5kYXRhKG8saSxuKSl9KX1hPWF8fGV8fHQualF1ZXJ5LGEmJihzLnByb3RvdHlwZS5vcHRpb258fChzLnByb3RvdHlwZS5vcHRpb249ZnVuY3Rpb24odCl7YS5pc1BsYWluT2JqZWN0KHQpJiYodGhpcy5vcHRpb25zPWEuZXh0ZW5kKCEwLHRoaXMub3B0aW9ucyx0KSl9KSxhLmZuW2ldPWZ1bmN0aW9uKHQpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0KXt2YXIgZT1uLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiB1KHRoaXMsdCxlKX1yZXR1cm4gaCh0aGlzLHQpLHRoaXN9LG8oYSkpfWZ1bmN0aW9uIG8odCl7IXR8fHQmJnQuYnJpZGdldHx8KHQuYnJpZGdldD1pKX12YXIgbj1BcnJheS5wcm90b3R5cGUuc2xpY2Uscz10LmNvbnNvbGUscj1cInVuZGVmaW5lZFwiPT10eXBlb2Ygcz9mdW5jdGlvbigpe306ZnVuY3Rpb24odCl7cy5lcnJvcih0KX07cmV0dXJuIG8oZXx8dC5qUXVlcnkpLGl9KSxmdW5jdGlvbih0LGUpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJldi1lbWl0dGVyL2V2LWVtaXR0ZXJcIixlKTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKCk6dC5FdkVtaXR0ZXI9ZSgpfShcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp0aGlzLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe312YXIgZT10LnByb3RvdHlwZTtyZXR1cm4gZS5vbj1mdW5jdGlvbih0LGUpe2lmKHQmJmUpe3ZhciBpPXRoaXMuX2V2ZW50cz10aGlzLl9ldmVudHN8fHt9LG89aVt0XT1pW3RdfHxbXTtyZXR1cm4gby5pbmRleE9mKGUpPT0tMSYmby5wdXNoKGUpLHRoaXN9fSxlLm9uY2U9ZnVuY3Rpb24odCxlKXtpZih0JiZlKXt0aGlzLm9uKHQsZSk7dmFyIGk9dGhpcy5fb25jZUV2ZW50cz10aGlzLl9vbmNlRXZlbnRzfHx7fSxvPWlbdF09aVt0XXx8e307cmV0dXJuIG9bZV09ITAsdGhpc319LGUub2ZmPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5fZXZlbnRzJiZ0aGlzLl9ldmVudHNbdF07aWYoaSYmaS5sZW5ndGgpe3ZhciBvPWkuaW5kZXhPZihlKTtyZXR1cm4gbyE9LTEmJmkuc3BsaWNlKG8sMSksdGhpc319LGUuZW1pdEV2ZW50PWZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5fZXZlbnRzJiZ0aGlzLl9ldmVudHNbdF07aWYoaSYmaS5sZW5ndGgpe2k9aS5zbGljZSgwKSxlPWV8fFtdO2Zvcih2YXIgbz10aGlzLl9vbmNlRXZlbnRzJiZ0aGlzLl9vbmNlRXZlbnRzW3RdLG49MDtuPGkubGVuZ3RoO24rKyl7dmFyIHM9aVtuXSxyPW8mJm9bc107ciYmKHRoaXMub2ZmKHQscyksZGVsZXRlIG9bc10pLHMuYXBwbHkodGhpcyxlKX1yZXR1cm4gdGhpc319LGUuYWxsT2ZmPWZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXMuX2V2ZW50cyxkZWxldGUgdGhpcy5fb25jZUV2ZW50c30sdH0pLGZ1bmN0aW9uKHQsZSl7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcImdldC1zaXplL2dldC1zaXplXCIsZSk6XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZSgpOnQuZ2V0U2l6ZT1lKCl9KHdpbmRvdyxmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQodCl7dmFyIGU9cGFyc2VGbG9hdCh0KSxpPXQuaW5kZXhPZihcIiVcIik9PS0xJiYhaXNOYU4oZSk7cmV0dXJuIGkmJmV9ZnVuY3Rpb24gZSgpe31mdW5jdGlvbiBpKCl7Zm9yKHZhciB0PXt3aWR0aDowLGhlaWdodDowLGlubmVyV2lkdGg6MCxpbm5lckhlaWdodDowLG91dGVyV2lkdGg6MCxvdXRlckhlaWdodDowfSxlPTA7ZTxoO2UrKyl7dmFyIGk9dVtlXTt0W2ldPTB9cmV0dXJuIHR9ZnVuY3Rpb24gbyh0KXt2YXIgZT1nZXRDb21wdXRlZFN0eWxlKHQpO3JldHVybiBlfHxhKFwiU3R5bGUgcmV0dXJuZWQgXCIrZStcIi4gQXJlIHlvdSBydW5uaW5nIHRoaXMgY29kZSBpbiBhIGhpZGRlbiBpZnJhbWUgb24gRmlyZWZveD8gU2VlIGh0dHBzOi8vYml0Lmx5L2dldHNpemVidWcxXCIpLGV9ZnVuY3Rpb24gbigpe2lmKCFkKXtkPSEwO3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7ZS5zdHlsZS53aWR0aD1cIjIwMHB4XCIsZS5zdHlsZS5wYWRkaW5nPVwiMXB4IDJweCAzcHggNHB4XCIsZS5zdHlsZS5ib3JkZXJTdHlsZT1cInNvbGlkXCIsZS5zdHlsZS5ib3JkZXJXaWR0aD1cIjFweCAycHggM3B4IDRweFwiLGUuc3R5bGUuYm94U2l6aW5nPVwiYm9yZGVyLWJveFwiO3ZhciBpPWRvY3VtZW50LmJvZHl8fGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtpLmFwcGVuZENoaWxkKGUpO3ZhciBuPW8oZSk7cj0yMDA9PU1hdGgucm91bmQodChuLndpZHRoKSkscy5pc0JveFNpemVPdXRlcj1yLGkucmVtb3ZlQ2hpbGQoZSl9fWZ1bmN0aW9uIHMoZSl7aWYobigpLFwic3RyaW5nXCI9PXR5cGVvZiBlJiYoZT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKGUpKSxlJiZcIm9iamVjdFwiPT10eXBlb2YgZSYmZS5ub2RlVHlwZSl7dmFyIHM9byhlKTtpZihcIm5vbmVcIj09cy5kaXNwbGF5KXJldHVybiBpKCk7dmFyIGE9e307YS53aWR0aD1lLm9mZnNldFdpZHRoLGEuaGVpZ2h0PWUub2Zmc2V0SGVpZ2h0O2Zvcih2YXIgZD1hLmlzQm9yZGVyQm94PVwiYm9yZGVyLWJveFwiPT1zLmJveFNpemluZyxsPTA7bDxoO2wrKyl7dmFyIGY9dVtsXSxjPXNbZl0sbT1wYXJzZUZsb2F0KGMpO2FbZl09aXNOYU4obSk/MDptfXZhciBwPWEucGFkZGluZ0xlZnQrYS5wYWRkaW5nUmlnaHQseT1hLnBhZGRpbmdUb3ArYS5wYWRkaW5nQm90dG9tLGc9YS5tYXJnaW5MZWZ0K2EubWFyZ2luUmlnaHQsdj1hLm1hcmdpblRvcCthLm1hcmdpbkJvdHRvbSxfPWEuYm9yZGVyTGVmdFdpZHRoK2EuYm9yZGVyUmlnaHRXaWR0aCx6PWEuYm9yZGVyVG9wV2lkdGgrYS5ib3JkZXJCb3R0b21XaWR0aCxJPWQmJnIseD10KHMud2lkdGgpO3ghPT0hMSYmKGEud2lkdGg9eCsoST8wOnArXykpO3ZhciBTPXQocy5oZWlnaHQpO3JldHVybiBTIT09ITEmJihhLmhlaWdodD1TKyhJPzA6eSt6KSksYS5pbm5lcldpZHRoPWEud2lkdGgtKHArXyksYS5pbm5lckhlaWdodD1hLmhlaWdodC0oeSt6KSxhLm91dGVyV2lkdGg9YS53aWR0aCtnLGEub3V0ZXJIZWlnaHQ9YS5oZWlnaHQrdixhfX12YXIgcixhPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBjb25zb2xlP2U6ZnVuY3Rpb24odCl7Y29uc29sZS5lcnJvcih0KX0sdT1bXCJwYWRkaW5nTGVmdFwiLFwicGFkZGluZ1JpZ2h0XCIsXCJwYWRkaW5nVG9wXCIsXCJwYWRkaW5nQm90dG9tXCIsXCJtYXJnaW5MZWZ0XCIsXCJtYXJnaW5SaWdodFwiLFwibWFyZ2luVG9wXCIsXCJtYXJnaW5Cb3R0b21cIixcImJvcmRlckxlZnRXaWR0aFwiLFwiYm9yZGVyUmlnaHRXaWR0aFwiLFwiYm9yZGVyVG9wV2lkdGhcIixcImJvcmRlckJvdHRvbVdpZHRoXCJdLGg9dS5sZW5ndGgsZD0hMTtyZXR1cm4gc30pLGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcImRlc2FuZHJvLW1hdGNoZXMtc2VsZWN0b3IvbWF0Y2hlcy1zZWxlY3RvclwiLGUpOlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWUoKTp0Lm1hdGNoZXNTZWxlY3Rvcj1lKCl9KHdpbmRvdyxmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO3ZhciB0PWZ1bmN0aW9uKCl7dmFyIHQ9d2luZG93LkVsZW1lbnQucHJvdG90eXBlO2lmKHQubWF0Y2hlcylyZXR1cm5cIm1hdGNoZXNcIjtpZih0Lm1hdGNoZXNTZWxlY3RvcilyZXR1cm5cIm1hdGNoZXNTZWxlY3RvclwiO2Zvcih2YXIgZT1bXCJ3ZWJraXRcIixcIm1velwiLFwibXNcIixcIm9cIl0saT0wO2k8ZS5sZW5ndGg7aSsrKXt2YXIgbz1lW2ldLG49bytcIk1hdGNoZXNTZWxlY3RvclwiO2lmKHRbbl0pcmV0dXJuIG59fSgpO3JldHVybiBmdW5jdGlvbihlLGkpe3JldHVybiBlW3RdKGkpfX0pLGZ1bmN0aW9uKHQsZSl7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcImZpenp5LXVpLXV0aWxzL3V0aWxzXCIsW1wiZGVzYW5kcm8tbWF0Y2hlcy1zZWxlY3Rvci9tYXRjaGVzLXNlbGVjdG9yXCJdLGZ1bmN0aW9uKGkpe3JldHVybiBlKHQsaSl9KTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKHQscmVxdWlyZShcImRlc2FuZHJvLW1hdGNoZXMtc2VsZWN0b3JcIikpOnQuZml6enlVSVV0aWxzPWUodCx0Lm1hdGNoZXNTZWxlY3Rvcil9KHdpbmRvdyxmdW5jdGlvbih0LGUpe3ZhciBpPXt9O2kuZXh0ZW5kPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpIGluIGUpdFtpXT1lW2ldO3JldHVybiB0fSxpLm1vZHVsbz1mdW5jdGlvbih0LGUpe3JldHVybih0JWUrZSklZX07dmFyIG89QXJyYXkucHJvdG90eXBlLnNsaWNlO2kubWFrZUFycmF5PWZ1bmN0aW9uKHQpe2lmKEFycmF5LmlzQXJyYXkodCkpcmV0dXJuIHQ7aWYobnVsbD09PXR8fHZvaWQgMD09PXQpcmV0dXJuW107dmFyIGU9XCJvYmplY3RcIj09dHlwZW9mIHQmJlwibnVtYmVyXCI9PXR5cGVvZiB0Lmxlbmd0aDtyZXR1cm4gZT9vLmNhbGwodCk6W3RdfSxpLnJlbW92ZUZyb209ZnVuY3Rpb24odCxlKXt2YXIgaT10LmluZGV4T2YoZSk7aSE9LTEmJnQuc3BsaWNlKGksMSl9LGkuZ2V0UGFyZW50PWZ1bmN0aW9uKHQsaSl7Zm9yKDt0LnBhcmVudE5vZGUmJnQhPWRvY3VtZW50LmJvZHk7KWlmKHQ9dC5wYXJlbnROb2RlLGUodCxpKSlyZXR1cm4gdH0saS5nZXRRdWVyeUVsZW1lbnQ9ZnVuY3Rpb24odCl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHQ/ZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0KTp0fSxpLmhhbmRsZUV2ZW50PWZ1bmN0aW9uKHQpe3ZhciBlPVwib25cIit0LnR5cGU7dGhpc1tlXSYmdGhpc1tlXSh0KX0saS5maWx0ZXJGaW5kRWxlbWVudHM9ZnVuY3Rpb24odCxvKXt0PWkubWFrZUFycmF5KHQpO3ZhciBuPVtdO3JldHVybiB0LmZvckVhY2goZnVuY3Rpb24odCl7aWYodCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KXtpZighbylyZXR1cm4gdm9pZCBuLnB1c2godCk7ZSh0LG8pJiZuLnB1c2godCk7Zm9yKHZhciBpPXQucXVlcnlTZWxlY3RvckFsbChvKSxzPTA7czxpLmxlbmd0aDtzKyspbi5wdXNoKGlbc10pfX0pLG59LGkuZGVib3VuY2VNZXRob2Q9ZnVuY3Rpb24odCxlLGkpe2k9aXx8MTAwO3ZhciBvPXQucHJvdG90eXBlW2VdLG49ZStcIlRpbWVvdXRcIjt0LnByb3RvdHlwZVtlXT1mdW5jdGlvbigpe3ZhciB0PXRoaXNbbl07Y2xlYXJUaW1lb3V0KHQpO3ZhciBlPWFyZ3VtZW50cyxzPXRoaXM7dGhpc1tuXT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7by5hcHBseShzLGUpLGRlbGV0ZSBzW25dfSxpKX19LGkuZG9jUmVhZHk9ZnVuY3Rpb24odCl7dmFyIGU9ZG9jdW1lbnQucmVhZHlTdGF0ZTtcImNvbXBsZXRlXCI9PWV8fFwiaW50ZXJhY3RpdmVcIj09ZT9zZXRUaW1lb3V0KHQpOmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsdCl9LGkudG9EYXNoZWQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQucmVwbGFjZSgvKC4pKFtBLVpdKS9nLGZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gZStcIi1cIitpfSkudG9Mb3dlckNhc2UoKX07dmFyIG49dC5jb25zb2xlO3JldHVybiBpLmh0bWxJbml0PWZ1bmN0aW9uKGUsbyl7aS5kb2NSZWFkeShmdW5jdGlvbigpe3ZhciBzPWkudG9EYXNoZWQobykscj1cImRhdGEtXCIrcyxhPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbXCIrcitcIl1cIiksdT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmpzLVwiK3MpLGg9aS5tYWtlQXJyYXkoYSkuY29uY2F0KGkubWFrZUFycmF5KHUpKSxkPXIrXCItb3B0aW9uc1wiLGw9dC5qUXVlcnk7aC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBpLHM9dC5nZXRBdHRyaWJ1dGUocil8fHQuZ2V0QXR0cmlidXRlKGQpO3RyeXtpPXMmJkpTT04ucGFyc2Uocyl9Y2F0Y2goYSl7cmV0dXJuIHZvaWQobiYmbi5lcnJvcihcIkVycm9yIHBhcnNpbmcgXCIrcitcIiBvbiBcIit0LmNsYXNzTmFtZStcIjogXCIrYSkpfXZhciB1PW5ldyBlKHQsaSk7bCYmbC5kYXRhKHQsbyx1KX0pfSl9LGl9KSxmdW5jdGlvbih0LGUpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJvdXRsYXllci9pdGVtXCIsW1wiZXYtZW1pdHRlci9ldi1lbWl0dGVyXCIsXCJnZXQtc2l6ZS9nZXQtc2l6ZVwiXSxlKTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKHJlcXVpcmUoXCJldi1lbWl0dGVyXCIpLHJlcXVpcmUoXCJnZXQtc2l6ZVwiKSk6KHQuT3V0bGF5ZXI9e30sdC5PdXRsYXllci5JdGVtPWUodC5FdkVtaXR0ZXIsdC5nZXRTaXplKSl9KHdpbmRvdyxmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7Zm9yKHZhciBlIGluIHQpcmV0dXJuITE7cmV0dXJuIGU9bnVsbCwhMH1mdW5jdGlvbiBvKHQsZSl7dCYmKHRoaXMuZWxlbWVudD10LHRoaXMubGF5b3V0PWUsdGhpcy5wb3NpdGlvbj17eDowLHk6MH0sdGhpcy5fY3JlYXRlKCkpfWZ1bmN0aW9uIG4odCl7cmV0dXJuIHQucmVwbGFjZSgvKFtBLVpdKS9nLGZ1bmN0aW9uKHQpe3JldHVyblwiLVwiK3QudG9Mb3dlckNhc2UoKX0pfXZhciBzPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSxyPVwic3RyaW5nXCI9PXR5cGVvZiBzLnRyYW5zaXRpb24/XCJ0cmFuc2l0aW9uXCI6XCJXZWJraXRUcmFuc2l0aW9uXCIsYT1cInN0cmluZ1wiPT10eXBlb2Ygcy50cmFuc2Zvcm0/XCJ0cmFuc2Zvcm1cIjpcIldlYmtpdFRyYW5zZm9ybVwiLHU9e1dlYmtpdFRyYW5zaXRpb246XCJ3ZWJraXRUcmFuc2l0aW9uRW5kXCIsdHJhbnNpdGlvbjpcInRyYW5zaXRpb25lbmRcIn1bcl0saD17dHJhbnNmb3JtOmEsdHJhbnNpdGlvbjpyLHRyYW5zaXRpb25EdXJhdGlvbjpyK1wiRHVyYXRpb25cIix0cmFuc2l0aW9uUHJvcGVydHk6citcIlByb3BlcnR5XCIsdHJhbnNpdGlvbkRlbGF5OnIrXCJEZWxheVwifSxkPW8ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodC5wcm90b3R5cGUpO2QuY29uc3RydWN0b3I9byxkLl9jcmVhdGU9ZnVuY3Rpb24oKXt0aGlzLl90cmFuc249e2luZ1Byb3BlcnRpZXM6e30sY2xlYW46e30sb25FbmQ6e319LHRoaXMuY3NzKHtwb3NpdGlvbjpcImFic29sdXRlXCJ9KX0sZC5oYW5kbGVFdmVudD1mdW5jdGlvbih0KXt2YXIgZT1cIm9uXCIrdC50eXBlO3RoaXNbZV0mJnRoaXNbZV0odCl9LGQuZ2V0U2l6ZT1mdW5jdGlvbigpe3RoaXMuc2l6ZT1lKHRoaXMuZWxlbWVudCl9LGQuY3NzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZWxlbWVudC5zdHlsZTtmb3IodmFyIGkgaW4gdCl7dmFyIG89aFtpXXx8aTtlW29dPXRbaV19fSxkLmdldFBvc2l0aW9uPWZ1bmN0aW9uKCl7dmFyIHQ9Z2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmVsZW1lbnQpLGU9dGhpcy5sYXlvdXQuX2dldE9wdGlvbihcIm9yaWdpbkxlZnRcIiksaT10aGlzLmxheW91dC5fZ2V0T3B0aW9uKFwib3JpZ2luVG9wXCIpLG89dFtlP1wibGVmdFwiOlwicmlnaHRcIl0sbj10W2k/XCJ0b3BcIjpcImJvdHRvbVwiXSxzPXBhcnNlRmxvYXQobykscj1wYXJzZUZsb2F0KG4pLGE9dGhpcy5sYXlvdXQuc2l6ZTtvLmluZGV4T2YoXCIlXCIpIT0tMSYmKHM9cy8xMDAqYS53aWR0aCksbi5pbmRleE9mKFwiJVwiKSE9LTEmJihyPXIvMTAwKmEuaGVpZ2h0KSxzPWlzTmFOKHMpPzA6cyxyPWlzTmFOKHIpPzA6cixzLT1lP2EucGFkZGluZ0xlZnQ6YS5wYWRkaW5nUmlnaHQsci09aT9hLnBhZGRpbmdUb3A6YS5wYWRkaW5nQm90dG9tLHRoaXMucG9zaXRpb24ueD1zLHRoaXMucG9zaXRpb24ueT1yfSxkLmxheW91dFBvc2l0aW9uPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5sYXlvdXQuc2l6ZSxlPXt9LGk9dGhpcy5sYXlvdXQuX2dldE9wdGlvbihcIm9yaWdpbkxlZnRcIiksbz10aGlzLmxheW91dC5fZ2V0T3B0aW9uKFwib3JpZ2luVG9wXCIpLG49aT9cInBhZGRpbmdMZWZ0XCI6XCJwYWRkaW5nUmlnaHRcIixzPWk/XCJsZWZ0XCI6XCJyaWdodFwiLHI9aT9cInJpZ2h0XCI6XCJsZWZ0XCIsYT10aGlzLnBvc2l0aW9uLngrdFtuXTtlW3NdPXRoaXMuZ2V0WFZhbHVlKGEpLGVbcl09XCJcIjt2YXIgdT1vP1wicGFkZGluZ1RvcFwiOlwicGFkZGluZ0JvdHRvbVwiLGg9bz9cInRvcFwiOlwiYm90dG9tXCIsZD1vP1wiYm90dG9tXCI6XCJ0b3BcIixsPXRoaXMucG9zaXRpb24ueSt0W3VdO2VbaF09dGhpcy5nZXRZVmFsdWUobCksZVtkXT1cIlwiLHRoaXMuY3NzKGUpLHRoaXMuZW1pdEV2ZW50KFwibGF5b3V0XCIsW3RoaXNdKX0sZC5nZXRYVmFsdWU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5sYXlvdXQuX2dldE9wdGlvbihcImhvcml6b250YWxcIik7cmV0dXJuIHRoaXMubGF5b3V0Lm9wdGlvbnMucGVyY2VudFBvc2l0aW9uJiYhZT90L3RoaXMubGF5b3V0LnNpemUud2lkdGgqMTAwK1wiJVwiOnQrXCJweFwifSxkLmdldFlWYWx1ZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmxheW91dC5fZ2V0T3B0aW9uKFwiaG9yaXpvbnRhbFwiKTtyZXR1cm4gdGhpcy5sYXlvdXQub3B0aW9ucy5wZXJjZW50UG9zaXRpb24mJmU/dC90aGlzLmxheW91dC5zaXplLmhlaWdodCoxMDArXCIlXCI6dCtcInB4XCJ9LGQuX3RyYW5zaXRpb25Ubz1mdW5jdGlvbih0LGUpe3RoaXMuZ2V0UG9zaXRpb24oKTt2YXIgaT10aGlzLnBvc2l0aW9uLngsbz10aGlzLnBvc2l0aW9uLnksbj10PT10aGlzLnBvc2l0aW9uLngmJmU9PXRoaXMucG9zaXRpb24ueTtpZih0aGlzLnNldFBvc2l0aW9uKHQsZSksbiYmIXRoaXMuaXNUcmFuc2l0aW9uaW5nKXJldHVybiB2b2lkIHRoaXMubGF5b3V0UG9zaXRpb24oKTt2YXIgcz10LWkscj1lLW8sYT17fTthLnRyYW5zZm9ybT10aGlzLmdldFRyYW5zbGF0ZShzLHIpLHRoaXMudHJhbnNpdGlvbih7dG86YSxvblRyYW5zaXRpb25FbmQ6e3RyYW5zZm9ybTp0aGlzLmxheW91dFBvc2l0aW9ufSxpc0NsZWFuaW5nOiEwfSl9LGQuZ2V0VHJhbnNsYXRlPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5sYXlvdXQuX2dldE9wdGlvbihcIm9yaWdpbkxlZnRcIiksbz10aGlzLmxheW91dC5fZ2V0T3B0aW9uKFwib3JpZ2luVG9wXCIpO3JldHVybiB0PWk/dDotdCxlPW8/ZTotZSxcInRyYW5zbGF0ZTNkKFwiK3QrXCJweCwgXCIrZStcInB4LCAwKVwifSxkLmdvVG89ZnVuY3Rpb24odCxlKXt0aGlzLnNldFBvc2l0aW9uKHQsZSksdGhpcy5sYXlvdXRQb3NpdGlvbigpfSxkLm1vdmVUbz1kLl90cmFuc2l0aW9uVG8sZC5zZXRQb3NpdGlvbj1mdW5jdGlvbih0LGUpe3RoaXMucG9zaXRpb24ueD1wYXJzZUZsb2F0KHQpLHRoaXMucG9zaXRpb24ueT1wYXJzZUZsb2F0KGUpfSxkLl9ub25UcmFuc2l0aW9uPWZ1bmN0aW9uKHQpe3RoaXMuY3NzKHQudG8pLHQuaXNDbGVhbmluZyYmdGhpcy5fcmVtb3ZlU3R5bGVzKHQudG8pO2Zvcih2YXIgZSBpbiB0Lm9uVHJhbnNpdGlvbkVuZCl0Lm9uVHJhbnNpdGlvbkVuZFtlXS5jYWxsKHRoaXMpfSxkLnRyYW5zaXRpb249ZnVuY3Rpb24odCl7aWYoIXBhcnNlRmxvYXQodGhpcy5sYXlvdXQub3B0aW9ucy50cmFuc2l0aW9uRHVyYXRpb24pKXJldHVybiB2b2lkIHRoaXMuX25vblRyYW5zaXRpb24odCk7dmFyIGU9dGhpcy5fdHJhbnNuO2Zvcih2YXIgaSBpbiB0Lm9uVHJhbnNpdGlvbkVuZCllLm9uRW5kW2ldPXQub25UcmFuc2l0aW9uRW5kW2ldO2ZvcihpIGluIHQudG8pZS5pbmdQcm9wZXJ0aWVzW2ldPSEwLHQuaXNDbGVhbmluZyYmKGUuY2xlYW5baV09ITApO2lmKHQuZnJvbSl7dGhpcy5jc3ModC5mcm9tKTt2YXIgbz10aGlzLmVsZW1lbnQub2Zmc2V0SGVpZ2h0O289bnVsbH10aGlzLmVuYWJsZVRyYW5zaXRpb24odC50byksdGhpcy5jc3ModC50byksdGhpcy5pc1RyYW5zaXRpb25pbmc9ITB9O3ZhciBsPVwib3BhY2l0eSxcIituKGEpO2QuZW5hYmxlVHJhbnNpdGlvbj1mdW5jdGlvbigpe2lmKCF0aGlzLmlzVHJhbnNpdGlvbmluZyl7dmFyIHQ9dGhpcy5sYXlvdXQub3B0aW9ucy50cmFuc2l0aW9uRHVyYXRpb247dD1cIm51bWJlclwiPT10eXBlb2YgdD90K1wibXNcIjp0LHRoaXMuY3NzKHt0cmFuc2l0aW9uUHJvcGVydHk6bCx0cmFuc2l0aW9uRHVyYXRpb246dCx0cmFuc2l0aW9uRGVsYXk6dGhpcy5zdGFnZ2VyRGVsYXl8fDB9KSx0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih1LHRoaXMsITEpfX0sZC5vbndlYmtpdFRyYW5zaXRpb25FbmQ9ZnVuY3Rpb24odCl7dGhpcy5vbnRyYW5zaXRpb25lbmQodCl9LGQub25vdHJhbnNpdGlvbmVuZD1mdW5jdGlvbih0KXt0aGlzLm9udHJhbnNpdGlvbmVuZCh0KX07dmFyIGY9e1wiLXdlYmtpdC10cmFuc2Zvcm1cIjpcInRyYW5zZm9ybVwifTtkLm9udHJhbnNpdGlvbmVuZD1mdW5jdGlvbih0KXtpZih0LnRhcmdldD09PXRoaXMuZWxlbWVudCl7dmFyIGU9dGhpcy5fdHJhbnNuLG89Zlt0LnByb3BlcnR5TmFtZV18fHQucHJvcGVydHlOYW1lO2lmKGRlbGV0ZSBlLmluZ1Byb3BlcnRpZXNbb10saShlLmluZ1Byb3BlcnRpZXMpJiZ0aGlzLmRpc2FibGVUcmFuc2l0aW9uKCksbyBpbiBlLmNsZWFuJiYodGhpcy5lbGVtZW50LnN0eWxlW3QucHJvcGVydHlOYW1lXT1cIlwiLGRlbGV0ZSBlLmNsZWFuW29dKSxvIGluIGUub25FbmQpe3ZhciBuPWUub25FbmRbb107bi5jYWxsKHRoaXMpLGRlbGV0ZSBlLm9uRW5kW29dfXRoaXMuZW1pdEV2ZW50KFwidHJhbnNpdGlvbkVuZFwiLFt0aGlzXSl9fSxkLmRpc2FibGVUcmFuc2l0aW9uPWZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVUcmFuc2l0aW9uU3R5bGVzKCksdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIodSx0aGlzLCExKSx0aGlzLmlzVHJhbnNpdGlvbmluZz0hMX0sZC5fcmVtb3ZlU3R5bGVzPWZ1bmN0aW9uKHQpe3ZhciBlPXt9O2Zvcih2YXIgaSBpbiB0KWVbaV09XCJcIjt0aGlzLmNzcyhlKX07dmFyIGM9e3RyYW5zaXRpb25Qcm9wZXJ0eTpcIlwiLHRyYW5zaXRpb25EdXJhdGlvbjpcIlwiLHRyYW5zaXRpb25EZWxheTpcIlwifTtyZXR1cm4gZC5yZW1vdmVUcmFuc2l0aW9uU3R5bGVzPWZ1bmN0aW9uKCl7dGhpcy5jc3MoYyl9LGQuc3RhZ2dlcj1mdW5jdGlvbih0KXt0PWlzTmFOKHQpPzA6dCx0aGlzLnN0YWdnZXJEZWxheT10K1wibXNcIn0sZC5yZW1vdmVFbGVtPWZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50KSx0aGlzLmNzcyh7ZGlzcGxheTpcIlwifSksdGhpcy5lbWl0RXZlbnQoXCJyZW1vdmVcIixbdGhpc10pfSxkLnJlbW92ZT1mdW5jdGlvbigpe3JldHVybiByJiZwYXJzZUZsb2F0KHRoaXMubGF5b3V0Lm9wdGlvbnMudHJhbnNpdGlvbkR1cmF0aW9uKT8odGhpcy5vbmNlKFwidHJhbnNpdGlvbkVuZFwiLGZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVFbGVtKCl9KSx2b2lkIHRoaXMuaGlkZSgpKTp2b2lkIHRoaXMucmVtb3ZlRWxlbSgpfSxkLnJldmVhbD1mdW5jdGlvbigpe2RlbGV0ZSB0aGlzLmlzSGlkZGVuLHRoaXMuY3NzKHtkaXNwbGF5OlwiXCJ9KTt2YXIgdD10aGlzLmxheW91dC5vcHRpb25zLGU9e30saT10aGlzLmdldEhpZGVSZXZlYWxUcmFuc2l0aW9uRW5kUHJvcGVydHkoXCJ2aXNpYmxlU3R5bGVcIik7ZVtpXT10aGlzLm9uUmV2ZWFsVHJhbnNpdGlvbkVuZCx0aGlzLnRyYW5zaXRpb24oe2Zyb206dC5oaWRkZW5TdHlsZSx0bzp0LnZpc2libGVTdHlsZSxpc0NsZWFuaW5nOiEwLG9uVHJhbnNpdGlvbkVuZDplfSl9LGQub25SZXZlYWxUcmFuc2l0aW9uRW5kPWZ1bmN0aW9uKCl7dGhpcy5pc0hpZGRlbnx8dGhpcy5lbWl0RXZlbnQoXCJyZXZlYWxcIil9LGQuZ2V0SGlkZVJldmVhbFRyYW5zaXRpb25FbmRQcm9wZXJ0eT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmxheW91dC5vcHRpb25zW3RdO2lmKGUub3BhY2l0eSlyZXR1cm5cIm9wYWNpdHlcIjtmb3IodmFyIGkgaW4gZSlyZXR1cm4gaX0sZC5oaWRlPWZ1bmN0aW9uKCl7dGhpcy5pc0hpZGRlbj0hMCx0aGlzLmNzcyh7ZGlzcGxheTpcIlwifSk7dmFyIHQ9dGhpcy5sYXlvdXQub3B0aW9ucyxlPXt9LGk9dGhpcy5nZXRIaWRlUmV2ZWFsVHJhbnNpdGlvbkVuZFByb3BlcnR5KFwiaGlkZGVuU3R5bGVcIik7ZVtpXT10aGlzLm9uSGlkZVRyYW5zaXRpb25FbmQsdGhpcy50cmFuc2l0aW9uKHtmcm9tOnQudmlzaWJsZVN0eWxlLHRvOnQuaGlkZGVuU3R5bGUsaXNDbGVhbmluZzohMCxvblRyYW5zaXRpb25FbmQ6ZX0pfSxkLm9uSGlkZVRyYW5zaXRpb25FbmQ9ZnVuY3Rpb24oKXt0aGlzLmlzSGlkZGVuJiYodGhpcy5jc3Moe2Rpc3BsYXk6XCJub25lXCJ9KSx0aGlzLmVtaXRFdmVudChcImhpZGVcIikpfSxkLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLmNzcyh7cG9zaXRpb246XCJcIixsZWZ0OlwiXCIscmlnaHQ6XCJcIix0b3A6XCJcIixib3R0b206XCJcIix0cmFuc2l0aW9uOlwiXCIsdHJhbnNmb3JtOlwiXCJ9KX0sb30pLGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcIm91dGxheWVyL291dGxheWVyXCIsW1wiZXYtZW1pdHRlci9ldi1lbWl0dGVyXCIsXCJnZXQtc2l6ZS9nZXQtc2l6ZVwiLFwiZml6enktdWktdXRpbHMvdXRpbHNcIixcIi4vaXRlbVwiXSxmdW5jdGlvbihpLG8sbixzKXtyZXR1cm4gZSh0LGksbyxuLHMpfSk6XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZSh0LHJlcXVpcmUoXCJldi1lbWl0dGVyXCIpLHJlcXVpcmUoXCJnZXQtc2l6ZVwiKSxyZXF1aXJlKFwiZml6enktdWktdXRpbHNcIikscmVxdWlyZShcIi4vaXRlbVwiKSk6dC5PdXRsYXllcj1lKHQsdC5FdkVtaXR0ZXIsdC5nZXRTaXplLHQuZml6enlVSVV0aWxzLHQuT3V0bGF5ZXIuSXRlbSl9KHdpbmRvdyxmdW5jdGlvbih0LGUsaSxvLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHModCxlKXt2YXIgaT1vLmdldFF1ZXJ5RWxlbWVudCh0KTtpZighaSlyZXR1cm4gdm9pZCh1JiZ1LmVycm9yKFwiQmFkIGVsZW1lbnQgZm9yIFwiK3RoaXMuY29uc3RydWN0b3IubmFtZXNwYWNlK1wiOiBcIisoaXx8dCkpKTt0aGlzLmVsZW1lbnQ9aSxoJiYodGhpcy4kZWxlbWVudD1oKHRoaXMuZWxlbWVudCkpLHRoaXMub3B0aW9ucz1vLmV4dGVuZCh7fSx0aGlzLmNvbnN0cnVjdG9yLmRlZmF1bHRzKSx0aGlzLm9wdGlvbihlKTt2YXIgbj0rK2w7dGhpcy5lbGVtZW50Lm91dGxheWVyR1VJRD1uLGZbbl09dGhpcyx0aGlzLl9jcmVhdGUoKTt2YXIgcz10aGlzLl9nZXRPcHRpb24oXCJpbml0TGF5b3V0XCIpO3MmJnRoaXMubGF5b3V0KCl9ZnVuY3Rpb24gcih0KXtmdW5jdGlvbiBlKCl7dC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZX1mdW5jdGlvbiBhKHQpe2lmKFwibnVtYmVyXCI9PXR5cGVvZiB0KXJldHVybiB0O3ZhciBlPXQubWF0Y2goLyheXFxkKlxcLj9cXGQqKShcXHcqKS8pLGk9ZSYmZVsxXSxvPWUmJmVbMl07aWYoIWkubGVuZ3RoKXJldHVybiAwO2k9cGFyc2VGbG9hdChpKTt2YXIgbj1tW29dfHwxO3JldHVybiBpKm59dmFyIHU9dC5jb25zb2xlLGg9dC5qUXVlcnksZD1mdW5jdGlvbigpe30sbD0wLGY9e307cy5uYW1lc3BhY2U9XCJvdXRsYXllclwiLHMuSXRlbT1uLHMuZGVmYXVsdHM9e2NvbnRhaW5lclN0eWxlOntwb3NpdGlvbjpcInJlbGF0aXZlXCJ9LGluaXRMYXlvdXQ6ITAsb3JpZ2luTGVmdDohMCxvcmlnaW5Ub3A6ITAscmVzaXplOiEwLHJlc2l6ZUNvbnRhaW5lcjohMCx0cmFuc2l0aW9uRHVyYXRpb246XCIwLjRzXCIsaGlkZGVuU3R5bGU6e29wYWNpdHk6MCx0cmFuc2Zvcm06XCJzY2FsZSgwLjAwMSlcIn0sdmlzaWJsZVN0eWxlOntvcGFjaXR5OjEsdHJhbnNmb3JtOlwic2NhbGUoMSlcIn19O3ZhciBjPXMucHJvdG90eXBlO28uZXh0ZW5kKGMsZS5wcm90b3R5cGUpLGMub3B0aW9uPWZ1bmN0aW9uKHQpe28uZXh0ZW5kKHRoaXMub3B0aW9ucyx0KX0sYy5fZ2V0T3B0aW9uPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY29uc3RydWN0b3IuY29tcGF0T3B0aW9uc1t0XTtyZXR1cm4gZSYmdm9pZCAwIT09dGhpcy5vcHRpb25zW2VdP3RoaXMub3B0aW9uc1tlXTp0aGlzLm9wdGlvbnNbdF19LHMuY29tcGF0T3B0aW9ucz17aW5pdExheW91dDpcImlzSW5pdExheW91dFwiLGhvcml6b250YWw6XCJpc0hvcml6b250YWxcIixsYXlvdXRJbnN0YW50OlwiaXNMYXlvdXRJbnN0YW50XCIsb3JpZ2luTGVmdDpcImlzT3JpZ2luTGVmdFwiLG9yaWdpblRvcDpcImlzT3JpZ2luVG9wXCIscmVzaXplOlwiaXNSZXNpemVCb3VuZFwiLHJlc2l6ZUNvbnRhaW5lcjpcImlzUmVzaXppbmdDb250YWluZXJcIn0sYy5fY3JlYXRlPWZ1bmN0aW9uKCl7dGhpcy5yZWxvYWRJdGVtcygpLHRoaXMuc3RhbXBzPVtdLHRoaXMuc3RhbXAodGhpcy5vcHRpb25zLnN0YW1wKSxvLmV4dGVuZCh0aGlzLmVsZW1lbnQuc3R5bGUsdGhpcy5vcHRpb25zLmNvbnRhaW5lclN0eWxlKTt2YXIgdD10aGlzLl9nZXRPcHRpb24oXCJyZXNpemVcIik7dCYmdGhpcy5iaW5kUmVzaXplKCl9LGMucmVsb2FkSXRlbXM9ZnVuY3Rpb24oKXt0aGlzLml0ZW1zPXRoaXMuX2l0ZW1pemUodGhpcy5lbGVtZW50LmNoaWxkcmVuKX0sYy5faXRlbWl6ZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5fZmlsdGVyRmluZEl0ZW1FbGVtZW50cyh0KSxpPXRoaXMuY29uc3RydWN0b3IuSXRlbSxvPVtdLG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIHM9ZVtuXSxyPW5ldyBpKHMsdGhpcyk7by5wdXNoKHIpfXJldHVybiBvfSxjLl9maWx0ZXJGaW5kSXRlbUVsZW1lbnRzPWZ1bmN0aW9uKHQpe3JldHVybiBvLmZpbHRlckZpbmRFbGVtZW50cyh0LHRoaXMub3B0aW9ucy5pdGVtU2VsZWN0b3IpfSxjLmdldEl0ZW1FbGVtZW50cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLml0ZW1zLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5lbGVtZW50fSl9LGMubGF5b3V0PWZ1bmN0aW9uKCl7dGhpcy5fcmVzZXRMYXlvdXQoKSx0aGlzLl9tYW5hZ2VTdGFtcHMoKTt2YXIgdD10aGlzLl9nZXRPcHRpb24oXCJsYXlvdXRJbnN0YW50XCIpLGU9dm9pZCAwIT09dD90OiF0aGlzLl9pc0xheW91dEluaXRlZDt0aGlzLmxheW91dEl0ZW1zKHRoaXMuaXRlbXMsZSksdGhpcy5faXNMYXlvdXRJbml0ZWQ9ITB9LGMuX2luaXQ9Yy5sYXlvdXQsYy5fcmVzZXRMYXlvdXQ9ZnVuY3Rpb24oKXt0aGlzLmdldFNpemUoKX0sYy5nZXRTaXplPWZ1bmN0aW9uKCl7dGhpcy5zaXplPWkodGhpcy5lbGVtZW50KX0sYy5fZ2V0TWVhc3VyZW1lbnQ9ZnVuY3Rpb24odCxlKXt2YXIgbyxuPXRoaXMub3B0aW9uc1t0XTtuPyhcInN0cmluZ1wiPT10eXBlb2Ygbj9vPXRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKG4pOm4gaW5zdGFuY2VvZiBIVE1MRWxlbWVudCYmKG89biksdGhpc1t0XT1vP2kobylbZV06bik6dGhpc1t0XT0wfSxjLmxheW91dEl0ZW1zPWZ1bmN0aW9uKHQsZSl7dD10aGlzLl9nZXRJdGVtc0ZvckxheW91dCh0KSx0aGlzLl9sYXlvdXRJdGVtcyh0LGUpLHRoaXMuX3Bvc3RMYXlvdXQoKX0sYy5fZ2V0SXRlbXNGb3JMYXlvdXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiF0LmlzSWdub3JlZH0pfSxjLl9sYXlvdXRJdGVtcz1mdW5jdGlvbih0LGUpe2lmKHRoaXMuX2VtaXRDb21wbGV0ZU9uSXRlbXMoXCJsYXlvdXRcIix0KSx0JiZ0Lmxlbmd0aCl7dmFyIGk9W107dC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBvPXRoaXMuX2dldEl0ZW1MYXlvdXRQb3NpdGlvbih0KTtvLml0ZW09dCxvLmlzSW5zdGFudD1lfHx0LmlzTGF5b3V0SW5zdGFudCxpLnB1c2gobyl9LHRoaXMpLHRoaXMuX3Byb2Nlc3NMYXlvdXRRdWV1ZShpKX19LGMuX2dldEl0ZW1MYXlvdXRQb3NpdGlvbj1mdW5jdGlvbigpe3JldHVybnt4OjAseTowfX0sYy5fcHJvY2Vzc0xheW91dFF1ZXVlPWZ1bmN0aW9uKHQpe3RoaXMudXBkYXRlU3RhZ2dlcigpLHQuZm9yRWFjaChmdW5jdGlvbih0LGUpe3RoaXMuX3Bvc2l0aW9uSXRlbSh0Lml0ZW0sdC54LHQueSx0LmlzSW5zdGFudCxlKX0sdGhpcyl9LGMudXBkYXRlU3RhZ2dlcj1mdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9ucy5zdGFnZ2VyO3JldHVybiBudWxsPT09dHx8dm9pZCAwPT09dD92b2lkKHRoaXMuc3RhZ2dlcj0wKToodGhpcy5zdGFnZ2VyPWEodCksdGhpcy5zdGFnZ2VyKX0sYy5fcG9zaXRpb25JdGVtPWZ1bmN0aW9uKHQsZSxpLG8sbil7bz90LmdvVG8oZSxpKToodC5zdGFnZ2VyKG4qdGhpcy5zdGFnZ2VyKSx0Lm1vdmVUbyhlLGkpKX0sYy5fcG9zdExheW91dD1mdW5jdGlvbigpe3RoaXMucmVzaXplQ29udGFpbmVyKCl9LGMucmVzaXplQ29udGFpbmVyPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fZ2V0T3B0aW9uKFwicmVzaXplQ29udGFpbmVyXCIpO2lmKHQpe3ZhciBlPXRoaXMuX2dldENvbnRhaW5lclNpemUoKTtlJiYodGhpcy5fc2V0Q29udGFpbmVyTWVhc3VyZShlLndpZHRoLCEwKSx0aGlzLl9zZXRDb250YWluZXJNZWFzdXJlKGUuaGVpZ2h0LCExKSl9fSxjLl9nZXRDb250YWluZXJTaXplPWQsYy5fc2V0Q29udGFpbmVyTWVhc3VyZT1mdW5jdGlvbih0LGUpe2lmKHZvaWQgMCE9PXQpe3ZhciBpPXRoaXMuc2l6ZTtpLmlzQm9yZGVyQm94JiYodCs9ZT9pLnBhZGRpbmdMZWZ0K2kucGFkZGluZ1JpZ2h0K2kuYm9yZGVyTGVmdFdpZHRoK2kuYm9yZGVyUmlnaHRXaWR0aDppLnBhZGRpbmdCb3R0b20raS5wYWRkaW5nVG9wK2kuYm9yZGVyVG9wV2lkdGgraS5ib3JkZXJCb3R0b21XaWR0aCksdD1NYXRoLm1heCh0LDApLHRoaXMuZWxlbWVudC5zdHlsZVtlP1wid2lkdGhcIjpcImhlaWdodFwiXT10K1wicHhcIn19LGMuX2VtaXRDb21wbGV0ZU9uSXRlbXM9ZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBpKCl7bi5kaXNwYXRjaEV2ZW50KHQrXCJDb21wbGV0ZVwiLG51bGwsW2VdKX1mdW5jdGlvbiBvKCl7cisrLHI9PXMmJmkoKX12YXIgbj10aGlzLHM9ZS5sZW5ndGg7aWYoIWV8fCFzKXJldHVybiB2b2lkIGkoKTt2YXIgcj0wO2UuZm9yRWFjaChmdW5jdGlvbihlKXtlLm9uY2UodCxvKX0pfSxjLmRpc3BhdGNoRXZlbnQ9ZnVuY3Rpb24odCxlLGkpe3ZhciBvPWU/W2VdLmNvbmNhdChpKTppO2lmKHRoaXMuZW1pdEV2ZW50KHQsbyksaClpZih0aGlzLiRlbGVtZW50PXRoaXMuJGVsZW1lbnR8fGgodGhpcy5lbGVtZW50KSxlKXt2YXIgbj1oLkV2ZW50KGUpO24udHlwZT10LHRoaXMuJGVsZW1lbnQudHJpZ2dlcihuLGkpfWVsc2UgdGhpcy4kZWxlbWVudC50cmlnZ2VyKHQsaSl9LGMuaWdub3JlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0SXRlbSh0KTtlJiYoZS5pc0lnbm9yZWQ9ITApfSxjLnVuaWdub3JlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0SXRlbSh0KTtlJiZkZWxldGUgZS5pc0lnbm9yZWR9LGMuc3RhbXA9ZnVuY3Rpb24odCl7dD10aGlzLl9maW5kKHQpLHQmJih0aGlzLnN0YW1wcz10aGlzLnN0YW1wcy5jb25jYXQodCksdC5mb3JFYWNoKHRoaXMuaWdub3JlLHRoaXMpKX0sYy51bnN0YW1wPWZ1bmN0aW9uKHQpe3Q9dGhpcy5fZmluZCh0KSx0JiZ0LmZvckVhY2goZnVuY3Rpb24odCl7by5yZW1vdmVGcm9tKHRoaXMuc3RhbXBzLHQpLHRoaXMudW5pZ25vcmUodCl9LHRoaXMpfSxjLl9maW5kPWZ1bmN0aW9uKHQpe2lmKHQpcmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHQmJih0PXRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHQpKSx0PW8ubWFrZUFycmF5KHQpfSxjLl9tYW5hZ2VTdGFtcHM9ZnVuY3Rpb24oKXt0aGlzLnN0YW1wcyYmdGhpcy5zdGFtcHMubGVuZ3RoJiYodGhpcy5fZ2V0Qm91bmRpbmdSZWN0KCksdGhpcy5zdGFtcHMuZm9yRWFjaCh0aGlzLl9tYW5hZ2VTdGFtcCx0aGlzKSl9LGMuX2dldEJvdW5kaW5nUmVjdD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxlPXRoaXMuc2l6ZTt0aGlzLl9ib3VuZGluZ1JlY3Q9e2xlZnQ6dC5sZWZ0K2UucGFkZGluZ0xlZnQrZS5ib3JkZXJMZWZ0V2lkdGgsdG9wOnQudG9wK2UucGFkZGluZ1RvcCtlLmJvcmRlclRvcFdpZHRoLHJpZ2h0OnQucmlnaHQtKGUucGFkZGluZ1JpZ2h0K2UuYm9yZGVyUmlnaHRXaWR0aCksYm90dG9tOnQuYm90dG9tLShlLnBhZGRpbmdCb3R0b20rZS5ib3JkZXJCb3R0b21XaWR0aCl9fSxjLl9tYW5hZ2VTdGFtcD1kLGMuX2dldEVsZW1lbnRPZmZzZXQ9ZnVuY3Rpb24odCl7dmFyIGU9dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxvPXRoaXMuX2JvdW5kaW5nUmVjdCxuPWkodCkscz17bGVmdDplLmxlZnQtby5sZWZ0LW4ubWFyZ2luTGVmdCx0b3A6ZS50b3Atby50b3Atbi5tYXJnaW5Ub3AscmlnaHQ6by5yaWdodC1lLnJpZ2h0LW4ubWFyZ2luUmlnaHQsYm90dG9tOm8uYm90dG9tLWUuYm90dG9tLW4ubWFyZ2luQm90dG9tfTtyZXR1cm4gc30sYy5oYW5kbGVFdmVudD1vLmhhbmRsZUV2ZW50LGMuYmluZFJlc2l6ZT1mdW5jdGlvbigpe3QuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLHRoaXMpLHRoaXMuaXNSZXNpemVCb3VuZD0hMH0sYy51bmJpbmRSZXNpemU9ZnVuY3Rpb24oKXt0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0aGlzKSx0aGlzLmlzUmVzaXplQm91bmQ9ITF9LGMub25yZXNpemU9ZnVuY3Rpb24oKXt0aGlzLnJlc2l6ZSgpfSxvLmRlYm91bmNlTWV0aG9kKHMsXCJvbnJlc2l6ZVwiLDEwMCksYy5yZXNpemU9ZnVuY3Rpb24oKXt0aGlzLmlzUmVzaXplQm91bmQmJnRoaXMubmVlZHNSZXNpemVMYXlvdXQoKSYmdGhpcy5sYXlvdXQoKX0sYy5uZWVkc1Jlc2l6ZUxheW91dD1mdW5jdGlvbigpe3ZhciB0PWkodGhpcy5lbGVtZW50KSxlPXRoaXMuc2l6ZSYmdDtyZXR1cm4gZSYmdC5pbm5lcldpZHRoIT09dGhpcy5zaXplLmlubmVyV2lkdGh9LGMuYWRkSXRlbXM9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5faXRlbWl6ZSh0KTtyZXR1cm4gZS5sZW5ndGgmJih0aGlzLml0ZW1zPXRoaXMuaXRlbXMuY29uY2F0KGUpKSxlfSxjLmFwcGVuZGVkPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuYWRkSXRlbXModCk7ZS5sZW5ndGgmJih0aGlzLmxheW91dEl0ZW1zKGUsITApLHRoaXMucmV2ZWFsKGUpKX0sYy5wcmVwZW5kZWQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5faXRlbWl6ZSh0KTtpZihlLmxlbmd0aCl7dmFyIGk9dGhpcy5pdGVtcy5zbGljZSgwKTt0aGlzLml0ZW1zPWUuY29uY2F0KGkpLHRoaXMuX3Jlc2V0TGF5b3V0KCksdGhpcy5fbWFuYWdlU3RhbXBzKCksdGhpcy5sYXlvdXRJdGVtcyhlLCEwKSx0aGlzLnJldmVhbChlKSx0aGlzLmxheW91dEl0ZW1zKGkpfX0sYy5yZXZlYWw9ZnVuY3Rpb24odCl7aWYodGhpcy5fZW1pdENvbXBsZXRlT25JdGVtcyhcInJldmVhbFwiLHQpLHQmJnQubGVuZ3RoKXt2YXIgZT10aGlzLnVwZGF0ZVN0YWdnZXIoKTt0LmZvckVhY2goZnVuY3Rpb24odCxpKXt0LnN0YWdnZXIoaSplKSx0LnJldmVhbCgpfSl9fSxjLmhpZGU9ZnVuY3Rpb24odCl7aWYodGhpcy5fZW1pdENvbXBsZXRlT25JdGVtcyhcImhpZGVcIix0KSx0JiZ0Lmxlbmd0aCl7dmFyIGU9dGhpcy51cGRhdGVTdGFnZ2VyKCk7dC5mb3JFYWNoKGZ1bmN0aW9uKHQsaSl7dC5zdGFnZ2VyKGkqZSksdC5oaWRlKCl9KX19LGMucmV2ZWFsSXRlbUVsZW1lbnRzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0SXRlbXModCk7dGhpcy5yZXZlYWwoZSl9LGMuaGlkZUl0ZW1FbGVtZW50cz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldEl0ZW1zKHQpO3RoaXMuaGlkZShlKX0sYy5nZXRJdGVtPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5pdGVtcy5sZW5ndGg7ZSsrKXt2YXIgaT10aGlzLml0ZW1zW2VdO2lmKGkuZWxlbWVudD09dClyZXR1cm4gaX19LGMuZ2V0SXRlbXM9ZnVuY3Rpb24odCl7dD1vLm1ha2VBcnJheSh0KTt2YXIgZT1bXTtyZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMuZ2V0SXRlbSh0KTtpJiZlLnB1c2goaSl9LHRoaXMpLGV9LGMucmVtb3ZlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0SXRlbXModCk7dGhpcy5fZW1pdENvbXBsZXRlT25JdGVtcyhcInJlbW92ZVwiLGUpLGUmJmUubGVuZ3RoJiZlLmZvckVhY2goZnVuY3Rpb24odCl7dC5yZW1vdmUoKSxvLnJlbW92ZUZyb20odGhpcy5pdGVtcyx0KX0sdGhpcyl9LGMuZGVzdHJveT1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZWxlbWVudC5zdHlsZTt0LmhlaWdodD1cIlwiLHQucG9zaXRpb249XCJcIix0LndpZHRoPVwiXCIsdGhpcy5pdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QuZGVzdHJveSgpfSksdGhpcy51bmJpbmRSZXNpemUoKTt2YXIgZT10aGlzLmVsZW1lbnQub3V0bGF5ZXJHVUlEO2RlbGV0ZSBmW2VdLGRlbGV0ZSB0aGlzLmVsZW1lbnQub3V0bGF5ZXJHVUlELGgmJmgucmVtb3ZlRGF0YSh0aGlzLmVsZW1lbnQsdGhpcy5jb25zdHJ1Y3Rvci5uYW1lc3BhY2UpfSxzLmRhdGE9ZnVuY3Rpb24odCl7dD1vLmdldFF1ZXJ5RWxlbWVudCh0KTt2YXIgZT10JiZ0Lm91dGxheWVyR1VJRDtyZXR1cm4gZSYmZltlXX0scy5jcmVhdGU9ZnVuY3Rpb24odCxlKXt2YXIgaT1yKHMpO3JldHVybiBpLmRlZmF1bHRzPW8uZXh0ZW5kKHt9LHMuZGVmYXVsdHMpLG8uZXh0ZW5kKGkuZGVmYXVsdHMsZSksaS5jb21wYXRPcHRpb25zPW8uZXh0ZW5kKHt9LHMuY29tcGF0T3B0aW9ucyksaS5uYW1lc3BhY2U9dCxpLmRhdGE9cy5kYXRhLGkuSXRlbT1yKG4pLG8uaHRtbEluaXQoaSx0KSxoJiZoLmJyaWRnZXQmJmguYnJpZGdldCh0LGkpLGl9O3ZhciBtPXttczoxLHM6MWUzfTtyZXR1cm4gcy5JdGVtPW4sc30pLGZ1bmN0aW9uKHQsZSl7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcImlzb3RvcGUtbGF5b3V0L2pzL2l0ZW1cIixbXCJvdXRsYXllci9vdXRsYXllclwiXSxlKTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKHJlcXVpcmUoXCJvdXRsYXllclwiKSk6KHQuSXNvdG9wZT10Lklzb3RvcGV8fHt9LHQuSXNvdG9wZS5JdGVtPWUodC5PdXRsYXllcikpfSh3aW5kb3csZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZSgpe3QuSXRlbS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9dmFyIGk9ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0Lkl0ZW0ucHJvdG90eXBlKSxvPWkuX2NyZWF0ZTtpLl9jcmVhdGU9ZnVuY3Rpb24oKXt0aGlzLmlkPXRoaXMubGF5b3V0Lml0ZW1HVUlEKyssby5jYWxsKHRoaXMpLHRoaXMuc29ydERhdGE9e319LGkudXBkYXRlU29ydERhdGE9ZnVuY3Rpb24oKXtpZighdGhpcy5pc0lnbm9yZWQpe3RoaXMuc29ydERhdGEuaWQ9dGhpcy5pZCx0aGlzLnNvcnREYXRhW1wib3JpZ2luYWwtb3JkZXJcIl09dGhpcy5pZCx0aGlzLnNvcnREYXRhLnJhbmRvbT1NYXRoLnJhbmRvbSgpO3ZhciB0PXRoaXMubGF5b3V0Lm9wdGlvbnMuZ2V0U29ydERhdGEsZT10aGlzLmxheW91dC5fc29ydGVycztmb3IodmFyIGkgaW4gdCl7dmFyIG89ZVtpXTt0aGlzLnNvcnREYXRhW2ldPW8odGhpcy5lbGVtZW50LHRoaXMpfX19O3ZhciBuPWkuZGVzdHJveTtyZXR1cm4gaS5kZXN0cm95PWZ1bmN0aW9uKCl7bi5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5jc3Moe2Rpc3BsYXk6XCJcIn0pfSxlfSksZnVuY3Rpb24odCxlKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwiaXNvdG9wZS1sYXlvdXQvanMvbGF5b3V0LW1vZGVcIixbXCJnZXQtc2l6ZS9nZXQtc2l6ZVwiLFwib3V0bGF5ZXIvb3V0bGF5ZXJcIl0sZSk6XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZShyZXF1aXJlKFwiZ2V0LXNpemVcIikscmVxdWlyZShcIm91dGxheWVyXCIpKToodC5Jc290b3BlPXQuSXNvdG9wZXx8e30sdC5Jc290b3BlLkxheW91dE1vZGU9ZSh0LmdldFNpemUsdC5PdXRsYXllcikpfSh3aW5kb3csZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe3RoaXMuaXNvdG9wZT10LHQmJih0aGlzLm9wdGlvbnM9dC5vcHRpb25zW3RoaXMubmFtZXNwYWNlXSx0aGlzLmVsZW1lbnQ9dC5lbGVtZW50LHRoaXMuaXRlbXM9dC5maWx0ZXJlZEl0ZW1zLHRoaXMuc2l6ZT10LnNpemUpfXZhciBvPWkucHJvdG90eXBlLG49W1wiX3Jlc2V0TGF5b3V0XCIsXCJfZ2V0SXRlbUxheW91dFBvc2l0aW9uXCIsXCJfbWFuYWdlU3RhbXBcIixcIl9nZXRDb250YWluZXJTaXplXCIsXCJfZ2V0RWxlbWVudE9mZnNldFwiLFwibmVlZHNSZXNpemVMYXlvdXRcIixcIl9nZXRPcHRpb25cIl07cmV0dXJuIG4uZm9yRWFjaChmdW5jdGlvbih0KXtvW3RdPWZ1bmN0aW9uKCl7cmV0dXJuIGUucHJvdG90eXBlW3RdLmFwcGx5KHRoaXMuaXNvdG9wZSxhcmd1bWVudHMpfX0pLG8ubmVlZHNWZXJ0aWNhbFJlc2l6ZUxheW91dD1mdW5jdGlvbigpe3ZhciBlPXQodGhpcy5pc290b3BlLmVsZW1lbnQpLGk9dGhpcy5pc290b3BlLnNpemUmJmU7cmV0dXJuIGkmJmUuaW5uZXJIZWlnaHQhPXRoaXMuaXNvdG9wZS5zaXplLmlubmVySGVpZ2h0fSxvLl9nZXRNZWFzdXJlbWVudD1mdW5jdGlvbigpe3RoaXMuaXNvdG9wZS5fZ2V0TWVhc3VyZW1lbnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxvLmdldENvbHVtbldpZHRoPWZ1bmN0aW9uKCl7dGhpcy5nZXRTZWdtZW50U2l6ZShcImNvbHVtblwiLFwiV2lkdGhcIil9LG8uZ2V0Um93SGVpZ2h0PWZ1bmN0aW9uKCl7dGhpcy5nZXRTZWdtZW50U2l6ZShcInJvd1wiLFwiSGVpZ2h0XCIpfSxvLmdldFNlZ21lbnRTaXplPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dCtlLG89XCJvdXRlclwiK2U7aWYodGhpcy5fZ2V0TWVhc3VyZW1lbnQoaSxvKSwhdGhpc1tpXSl7dmFyIG49dGhpcy5nZXRGaXJzdEl0ZW1TaXplKCk7dGhpc1tpXT1uJiZuW29dfHx0aGlzLmlzb3RvcGUuc2l6ZVtcImlubmVyXCIrZV19fSxvLmdldEZpcnN0SXRlbVNpemU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmlzb3RvcGUuZmlsdGVyZWRJdGVtc1swXTtyZXR1cm4gZSYmZS5lbGVtZW50JiZ0KGUuZWxlbWVudCl9LG8ubGF5b3V0PWZ1bmN0aW9uKCl7dGhpcy5pc290b3BlLmxheW91dC5hcHBseSh0aGlzLmlzb3RvcGUsYXJndW1lbnRzKX0sby5nZXRTaXplPWZ1bmN0aW9uKCl7dGhpcy5pc290b3BlLmdldFNpemUoKSx0aGlzLnNpemU9dGhpcy5pc290b3BlLnNpemV9LGkubW9kZXM9e30saS5jcmVhdGU9ZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKCl7aS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIG4ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobyksbi5wcm90b3R5cGUuY29uc3RydWN0b3I9bixlJiYobi5vcHRpb25zPWUpLG4ucHJvdG90eXBlLm5hbWVzcGFjZT10LGkubW9kZXNbdF09bixufSxpfSksZnVuY3Rpb24odCxlKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwibWFzb25yeS1sYXlvdXQvbWFzb25yeVwiLFtcIm91dGxheWVyL291dGxheWVyXCIsXCJnZXQtc2l6ZS9nZXQtc2l6ZVwiXSxlKTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKHJlcXVpcmUoXCJvdXRsYXllclwiKSxyZXF1aXJlKFwiZ2V0LXNpemVcIikpOnQuTWFzb25yeT1lKHQuT3V0bGF5ZXIsdC5nZXRTaXplKX0od2luZG93LGZ1bmN0aW9uKHQsZSl7dmFyIGk9dC5jcmVhdGUoXCJtYXNvbnJ5XCIpO2kuY29tcGF0T3B0aW9ucy5maXRXaWR0aD1cImlzRml0V2lkdGhcIjt2YXIgbz1pLnByb3RvdHlwZTtyZXR1cm4gby5fcmVzZXRMYXlvdXQ9ZnVuY3Rpb24oKXt0aGlzLmdldFNpemUoKSx0aGlzLl9nZXRNZWFzdXJlbWVudChcImNvbHVtbldpZHRoXCIsXCJvdXRlcldpZHRoXCIpLHRoaXMuX2dldE1lYXN1cmVtZW50KFwiZ3V0dGVyXCIsXCJvdXRlcldpZHRoXCIpLHRoaXMubWVhc3VyZUNvbHVtbnMoKSx0aGlzLmNvbFlzPVtdO2Zvcih2YXIgdD0wO3Q8dGhpcy5jb2xzO3QrKyl0aGlzLmNvbFlzLnB1c2goMCk7dGhpcy5tYXhZPTAsdGhpcy5ob3Jpem9udGFsQ29sSW5kZXg9MH0sby5tZWFzdXJlQ29sdW1ucz1mdW5jdGlvbigpe2lmKHRoaXMuZ2V0Q29udGFpbmVyV2lkdGgoKSwhdGhpcy5jb2x1bW5XaWR0aCl7dmFyIHQ9dGhpcy5pdGVtc1swXSxpPXQmJnQuZWxlbWVudDt0aGlzLmNvbHVtbldpZHRoPWkmJmUoaSkub3V0ZXJXaWR0aHx8dGhpcy5jb250YWluZXJXaWR0aH12YXIgbz10aGlzLmNvbHVtbldpZHRoKz10aGlzLmd1dHRlcixuPXRoaXMuY29udGFpbmVyV2lkdGgrdGhpcy5ndXR0ZXIscz1uL28scj1vLW4lbyxhPXImJnI8MT9cInJvdW5kXCI6XCJmbG9vclwiO3M9TWF0aFthXShzKSx0aGlzLmNvbHM9TWF0aC5tYXgocywxKX0sby5nZXRDb250YWluZXJXaWR0aD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX2dldE9wdGlvbihcImZpdFdpZHRoXCIpLGk9dD90aGlzLmVsZW1lbnQucGFyZW50Tm9kZTp0aGlzLmVsZW1lbnQsbz1lKGkpO3RoaXMuY29udGFpbmVyV2lkdGg9byYmby5pbm5lcldpZHRofSxvLl9nZXRJdGVtTGF5b3V0UG9zaXRpb249ZnVuY3Rpb24odCl7dC5nZXRTaXplKCk7dmFyIGU9dC5zaXplLm91dGVyV2lkdGgldGhpcy5jb2x1bW5XaWR0aCxpPWUmJmU8MT9cInJvdW5kXCI6XCJjZWlsXCIsbz1NYXRoW2ldKHQuc2l6ZS5vdXRlcldpZHRoL3RoaXMuY29sdW1uV2lkdGgpO289TWF0aC5taW4obyx0aGlzLmNvbHMpO2Zvcih2YXIgbj10aGlzLm9wdGlvbnMuaG9yaXpvbnRhbE9yZGVyP1wiX2dldEhvcml6b250YWxDb2xQb3NpdGlvblwiOlwiX2dldFRvcENvbFBvc2l0aW9uXCIscz10aGlzW25dKG8sdCkscj17eDp0aGlzLmNvbHVtbldpZHRoKnMuY29sLHk6cy55fSxhPXMueSt0LnNpemUub3V0ZXJIZWlnaHQsdT1vK3MuY29sLGg9cy5jb2w7aDx1O2grKyl0aGlzLmNvbFlzW2hdPWE7cmV0dXJuIHJ9LG8uX2dldFRvcENvbFBvc2l0aW9uPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2dldFRvcENvbEdyb3VwKHQpLGk9TWF0aC5taW4uYXBwbHkoTWF0aCxlKTtyZXR1cm57Y29sOmUuaW5kZXhPZihpKSx5Oml9fSxvLl9nZXRUb3BDb2xHcm91cD1mdW5jdGlvbih0KXtpZih0PDIpcmV0dXJuIHRoaXMuY29sWXM7Zm9yKHZhciBlPVtdLGk9dGhpcy5jb2xzKzEtdCxvPTA7bzxpO28rKyllW29dPXRoaXMuX2dldENvbEdyb3VwWShvLHQpO3JldHVybiBlfSxvLl9nZXRDb2xHcm91cFk9ZnVuY3Rpb24odCxlKXtpZihlPDIpcmV0dXJuIHRoaXMuY29sWXNbdF07dmFyIGk9dGhpcy5jb2xZcy5zbGljZSh0LHQrZSk7cmV0dXJuIE1hdGgubWF4LmFwcGx5KE1hdGgsaSl9LG8uX2dldEhvcml6b250YWxDb2xQb3NpdGlvbj1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuaG9yaXpvbnRhbENvbEluZGV4JXRoaXMuY29scyxvPXQ+MSYmaSt0PnRoaXMuY29scztpPW8/MDppO3ZhciBuPWUuc2l6ZS5vdXRlcldpZHRoJiZlLnNpemUub3V0ZXJIZWlnaHQ7cmV0dXJuIHRoaXMuaG9yaXpvbnRhbENvbEluZGV4PW4/aSt0OnRoaXMuaG9yaXpvbnRhbENvbEluZGV4LHtjb2w6aSx5OnRoaXMuX2dldENvbEdyb3VwWShpLHQpfX0sby5fbWFuYWdlU3RhbXA9ZnVuY3Rpb24odCl7dmFyIGk9ZSh0KSxvPXRoaXMuX2dldEVsZW1lbnRPZmZzZXQodCksbj10aGlzLl9nZXRPcHRpb24oXCJvcmlnaW5MZWZ0XCIpLHM9bj9vLmxlZnQ6by5yaWdodCxyPXMraS5vdXRlcldpZHRoLGE9TWF0aC5mbG9vcihzL3RoaXMuY29sdW1uV2lkdGgpO2E9TWF0aC5tYXgoMCxhKTt2YXIgdT1NYXRoLmZsb29yKHIvdGhpcy5jb2x1bW5XaWR0aCk7dS09ciV0aGlzLmNvbHVtbldpZHRoPzA6MSx1PU1hdGgubWluKHRoaXMuY29scy0xLHUpO2Zvcih2YXIgaD10aGlzLl9nZXRPcHRpb24oXCJvcmlnaW5Ub3BcIiksZD0oaD9vLnRvcDpvLmJvdHRvbSkraS5vdXRlckhlaWdodCxsPWE7bDw9dTtsKyspdGhpcy5jb2xZc1tsXT1NYXRoLm1heChkLHRoaXMuY29sWXNbbF0pfSxvLl9nZXRDb250YWluZXJTaXplPWZ1bmN0aW9uKCl7dGhpcy5tYXhZPU1hdGgubWF4LmFwcGx5KE1hdGgsdGhpcy5jb2xZcyk7dmFyIHQ9e2hlaWdodDp0aGlzLm1heFl9O3JldHVybiB0aGlzLl9nZXRPcHRpb24oXCJmaXRXaWR0aFwiKSYmKHQud2lkdGg9dGhpcy5fZ2V0Q29udGFpbmVyRml0V2lkdGgoKSksdH0sby5fZ2V0Q29udGFpbmVyRml0V2lkdGg9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPXRoaXMuY29sczstLWUmJjA9PT10aGlzLmNvbFlzW2VdOyl0Kys7cmV0dXJuKHRoaXMuY29scy10KSp0aGlzLmNvbHVtbldpZHRoLXRoaXMuZ3V0dGVyfSxvLm5lZWRzUmVzaXplTGF5b3V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jb250YWluZXJXaWR0aDtyZXR1cm4gdGhpcy5nZXRDb250YWluZXJXaWR0aCgpLHQhPXRoaXMuY29udGFpbmVyV2lkdGh9LGl9KSxmdW5jdGlvbih0LGUpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJpc290b3BlLWxheW91dC9qcy9sYXlvdXQtbW9kZXMvbWFzb25yeVwiLFtcIi4uL2xheW91dC1tb2RlXCIsXCJtYXNvbnJ5LWxheW91dC9tYXNvbnJ5XCJdLGUpOlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWUocmVxdWlyZShcIi4uL2xheW91dC1tb2RlXCIpLHJlcXVpcmUoXCJtYXNvbnJ5LWxheW91dFwiKSk6ZSh0Lklzb3RvcGUuTGF5b3V0TW9kZSx0Lk1hc29ucnkpfSh3aW5kb3csZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjt2YXIgaT10LmNyZWF0ZShcIm1hc29ucnlcIiksbz1pLnByb3RvdHlwZSxuPXtfZ2V0RWxlbWVudE9mZnNldDohMCxsYXlvdXQ6ITAsX2dldE1lYXN1cmVtZW50OiEwfTtmb3IodmFyIHMgaW4gZS5wcm90b3R5cGUpbltzXXx8KG9bc109ZS5wcm90b3R5cGVbc10pO3ZhciByPW8ubWVhc3VyZUNvbHVtbnM7by5tZWFzdXJlQ29sdW1ucz1mdW5jdGlvbigpe3RoaXMuaXRlbXM9dGhpcy5pc290b3BlLmZpbHRlcmVkSXRlbXMsci5jYWxsKHRoaXMpfTt2YXIgYT1vLl9nZXRPcHRpb247cmV0dXJuIG8uX2dldE9wdGlvbj1mdW5jdGlvbih0KXtyZXR1cm5cImZpdFdpZHRoXCI9PXQ/dm9pZCAwIT09dGhpcy5vcHRpb25zLmlzRml0V2lkdGg/dGhpcy5vcHRpb25zLmlzRml0V2lkdGg6dGhpcy5vcHRpb25zLmZpdFdpZHRoOmEuYXBwbHkodGhpcy5pc290b3BlLGFyZ3VtZW50cyl9LGl9KSxmdW5jdGlvbih0LGUpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJpc290b3BlLWxheW91dC9qcy9sYXlvdXQtbW9kZXMvZml0LXJvd3NcIixbXCIuLi9sYXlvdXQtbW9kZVwiXSxlKTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKHJlcXVpcmUoXCIuLi9sYXlvdXQtbW9kZVwiKSk6ZSh0Lklzb3RvcGUuTGF5b3V0TW9kZSl9KHdpbmRvdyxmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjt2YXIgZT10LmNyZWF0ZShcImZpdFJvd3NcIiksaT1lLnByb3RvdHlwZTtyZXR1cm4gaS5fcmVzZXRMYXlvdXQ9ZnVuY3Rpb24oKXt0aGlzLng9MCx0aGlzLnk9MCx0aGlzLm1heFk9MCx0aGlzLl9nZXRNZWFzdXJlbWVudChcImd1dHRlclwiLFwib3V0ZXJXaWR0aFwiKX0saS5fZ2V0SXRlbUxheW91dFBvc2l0aW9uPWZ1bmN0aW9uKHQpe3QuZ2V0U2l6ZSgpO3ZhciBlPXQuc2l6ZS5vdXRlcldpZHRoK3RoaXMuZ3V0dGVyLGk9dGhpcy5pc290b3BlLnNpemUuaW5uZXJXaWR0aCt0aGlzLmd1dHRlcjswIT09dGhpcy54JiZlK3RoaXMueD5pJiYodGhpcy54PTAsdGhpcy55PXRoaXMubWF4WSk7dmFyIG89e3g6dGhpcy54LHk6dGhpcy55fTtyZXR1cm4gdGhpcy5tYXhZPU1hdGgubWF4KHRoaXMubWF4WSx0aGlzLnkrdC5zaXplLm91dGVySGVpZ2h0KSx0aGlzLngrPWUsb30saS5fZ2V0Q29udGFpbmVyU2l6ZT1mdW5jdGlvbigpe3JldHVybntoZWlnaHQ6dGhpcy5tYXhZfX0sZX0pLGZ1bmN0aW9uKHQsZSl7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcImlzb3RvcGUtbGF5b3V0L2pzL2xheW91dC1tb2Rlcy92ZXJ0aWNhbFwiLFtcIi4uL2xheW91dC1tb2RlXCJdLGUpOlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWUocmVxdWlyZShcIi4uL2xheW91dC1tb2RlXCIpKTplKHQuSXNvdG9wZS5MYXlvdXRNb2RlKX0od2luZG93LGZ1bmN0aW9uKHQpe1widXNlIHN0cmljdFwiO3ZhciBlPXQuY3JlYXRlKFwidmVydGljYWxcIix7aG9yaXpvbnRhbEFsaWdubWVudDowfSksaT1lLnByb3RvdHlwZTtyZXR1cm4gaS5fcmVzZXRMYXlvdXQ9ZnVuY3Rpb24oKXt0aGlzLnk9MH0saS5fZ2V0SXRlbUxheW91dFBvc2l0aW9uPWZ1bmN0aW9uKHQpe3QuZ2V0U2l6ZSgpO3ZhciBlPSh0aGlzLmlzb3RvcGUuc2l6ZS5pbm5lcldpZHRoLXQuc2l6ZS5vdXRlcldpZHRoKSp0aGlzLm9wdGlvbnMuaG9yaXpvbnRhbEFsaWdubWVudCxpPXRoaXMueTtyZXR1cm4gdGhpcy55Kz10LnNpemUub3V0ZXJIZWlnaHQse3g6ZSx5Oml9fSxpLl9nZXRDb250YWluZXJTaXplPWZ1bmN0aW9uKCl7cmV0dXJue2hlaWdodDp0aGlzLnl9fSxlfSksZnVuY3Rpb24odCxlKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcIm91dGxheWVyL291dGxheWVyXCIsXCJnZXQtc2l6ZS9nZXQtc2l6ZVwiLFwiZGVzYW5kcm8tbWF0Y2hlcy1zZWxlY3Rvci9tYXRjaGVzLXNlbGVjdG9yXCIsXCJmaXp6eS11aS11dGlscy91dGlsc1wiLFwiaXNvdG9wZS1sYXlvdXQvanMvaXRlbVwiLFwiaXNvdG9wZS1sYXlvdXQvanMvbGF5b3V0LW1vZGVcIixcImlzb3RvcGUtbGF5b3V0L2pzL2xheW91dC1tb2Rlcy9tYXNvbnJ5XCIsXCJpc290b3BlLWxheW91dC9qcy9sYXlvdXQtbW9kZXMvZml0LXJvd3NcIixcImlzb3RvcGUtbGF5b3V0L2pzL2xheW91dC1tb2Rlcy92ZXJ0aWNhbFwiXSxmdW5jdGlvbihpLG8sbixzLHIsYSl7cmV0dXJuIGUodCxpLG8sbixzLHIsYSl9KTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKHQscmVxdWlyZShcIm91dGxheWVyXCIpLHJlcXVpcmUoXCJnZXQtc2l6ZVwiKSxyZXF1aXJlKFwiZGVzYW5kcm8tbWF0Y2hlcy1zZWxlY3RvclwiKSxyZXF1aXJlKFwiZml6enktdWktdXRpbHNcIikscmVxdWlyZShcImlzb3RvcGUtbGF5b3V0L2pzL2l0ZW1cIikscmVxdWlyZShcImlzb3RvcGUtbGF5b3V0L2pzL2xheW91dC1tb2RlXCIpLHJlcXVpcmUoXCJpc290b3BlLWxheW91dC9qcy9sYXlvdXQtbW9kZXMvbWFzb25yeVwiKSxyZXF1aXJlKFwiaXNvdG9wZS1sYXlvdXQvanMvbGF5b3V0LW1vZGVzL2ZpdC1yb3dzXCIpLHJlcXVpcmUoXCJpc290b3BlLWxheW91dC9qcy9sYXlvdXQtbW9kZXMvdmVydGljYWxcIikpOnQuSXNvdG9wZT1lKHQsdC5PdXRsYXllcix0LmdldFNpemUsdC5tYXRjaGVzU2VsZWN0b3IsdC5maXp6eVVJVXRpbHMsdC5Jc290b3BlLkl0ZW0sdC5Jc290b3BlLkxheW91dE1vZGUpfSh3aW5kb3csZnVuY3Rpb24odCxlLGksbyxuLHMscil7ZnVuY3Rpb24gYSh0LGUpe3JldHVybiBmdW5jdGlvbihpLG8pe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXt2YXIgcz10W25dLHI9aS5zb3J0RGF0YVtzXSxhPW8uc29ydERhdGFbc107aWYocj5hfHxyPGEpe3ZhciB1PXZvaWQgMCE9PWVbc10/ZVtzXTplLGg9dT8xOi0xO3JldHVybihyPmE/MTotMSkqaH19cmV0dXJuIDB9fXZhciB1PXQualF1ZXJ5LGg9U3RyaW5nLnByb3RvdHlwZS50cmltP2Z1bmN0aW9uKHQpe3JldHVybiB0LnRyaW0oKX06ZnVuY3Rpb24odCl7cmV0dXJuIHQucmVwbGFjZSgvXlxccyt8XFxzKyQvZyxcIlwiKX0sZD1lLmNyZWF0ZShcImlzb3RvcGVcIix7bGF5b3V0TW9kZTpcIm1hc29ucnlcIixpc0pRdWVyeUZpbHRlcmluZzohMCxzb3J0QXNjZW5kaW5nOiEwfSk7ZC5JdGVtPXMsZC5MYXlvdXRNb2RlPXI7dmFyIGw9ZC5wcm90b3R5cGU7bC5fY3JlYXRlPWZ1bmN0aW9uKCl7dGhpcy5pdGVtR1VJRD0wLHRoaXMuX3NvcnRlcnM9e30sdGhpcy5fZ2V0U29ydGVycygpLGUucHJvdG90eXBlLl9jcmVhdGUuY2FsbCh0aGlzKSx0aGlzLm1vZGVzPXt9LHRoaXMuZmlsdGVyZWRJdGVtcz10aGlzLml0ZW1zLHRoaXMuc29ydEhpc3Rvcnk9W1wib3JpZ2luYWwtb3JkZXJcIl07Zm9yKHZhciB0IGluIHIubW9kZXMpdGhpcy5faW5pdExheW91dE1vZGUodCl9LGwucmVsb2FkSXRlbXM9ZnVuY3Rpb24oKXt0aGlzLml0ZW1HVUlEPTAsZS5wcm90b3R5cGUucmVsb2FkSXRlbXMuY2FsbCh0aGlzKX0sbC5faXRlbWl6ZT1mdW5jdGlvbigpe2Zvcih2YXIgdD1lLnByb3RvdHlwZS5faXRlbWl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksaT0wO2k8dC5sZW5ndGg7aSsrKXt2YXIgbz10W2ldO28uaWQ9dGhpcy5pdGVtR1VJRCsrfXJldHVybiB0aGlzLl91cGRhdGVJdGVtc1NvcnREYXRhKHQpLHR9LGwuX2luaXRMYXlvdXRNb2RlPWZ1bmN0aW9uKHQpe3ZhciBlPXIubW9kZXNbdF0saT10aGlzLm9wdGlvbnNbdF18fHt9O3RoaXMub3B0aW9uc1t0XT1lLm9wdGlvbnM/bi5leHRlbmQoZS5vcHRpb25zLGkpOmksdGhpcy5tb2Rlc1t0XT1uZXcgZSh0aGlzKX0sbC5sYXlvdXQ9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5faXNMYXlvdXRJbml0ZWQmJnRoaXMuX2dldE9wdGlvbihcImluaXRMYXlvdXRcIik/dm9pZCB0aGlzLmFycmFuZ2UoKTp2b2lkIHRoaXMuX2xheW91dCgpfSxsLl9sYXlvdXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9nZXRJc0luc3RhbnQoKTt0aGlzLl9yZXNldExheW91dCgpLHRoaXMuX21hbmFnZVN0YW1wcygpLHRoaXMubGF5b3V0SXRlbXModGhpcy5maWx0ZXJlZEl0ZW1zLHQpLHRoaXMuX2lzTGF5b3V0SW5pdGVkPSEwfSxsLmFycmFuZ2U9ZnVuY3Rpb24odCl7dGhpcy5vcHRpb24odCksdGhpcy5fZ2V0SXNJbnN0YW50KCk7dmFyIGU9dGhpcy5fZmlsdGVyKHRoaXMuaXRlbXMpO3RoaXMuZmlsdGVyZWRJdGVtcz1lLm1hdGNoZXMsdGhpcy5fYmluZEFycmFuZ2VDb21wbGV0ZSgpLHRoaXMuX2lzSW5zdGFudD90aGlzLl9ub1RyYW5zaXRpb24odGhpcy5faGlkZVJldmVhbCxbZV0pOnRoaXMuX2hpZGVSZXZlYWwoZSksdGhpcy5fc29ydCgpLHRoaXMuX2xheW91dCgpfSxsLl9pbml0PWwuYXJyYW5nZSxsLl9oaWRlUmV2ZWFsPWZ1bmN0aW9uKHQpe3RoaXMucmV2ZWFsKHQubmVlZFJldmVhbCksdGhpcy5oaWRlKHQubmVlZEhpZGUpfSxsLl9nZXRJc0luc3RhbnQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9nZXRPcHRpb24oXCJsYXlvdXRJbnN0YW50XCIpLGU9dm9pZCAwIT09dD90OiF0aGlzLl9pc0xheW91dEluaXRlZDtyZXR1cm4gdGhpcy5faXNJbnN0YW50PWUsZX0sbC5fYmluZEFycmFuZ2VDb21wbGV0ZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtlJiZpJiZvJiZuLmRpc3BhdGNoRXZlbnQoXCJhcnJhbmdlQ29tcGxldGVcIixudWxsLFtuLmZpbHRlcmVkSXRlbXNdKX12YXIgZSxpLG8sbj10aGlzO3RoaXMub25jZShcImxheW91dENvbXBsZXRlXCIsZnVuY3Rpb24oKXtlPSEwLHQoKX0pLHRoaXMub25jZShcImhpZGVDb21wbGV0ZVwiLGZ1bmN0aW9uKCl7aT0hMCx0KCl9KSx0aGlzLm9uY2UoXCJyZXZlYWxDb21wbGV0ZVwiLGZ1bmN0aW9uKCl7bz0hMCx0KCl9KX0sbC5fZmlsdGVyPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMub3B0aW9ucy5maWx0ZXI7ZT1lfHxcIipcIjtmb3IodmFyIGk9W10sbz1bXSxuPVtdLHM9dGhpcy5fZ2V0RmlsdGVyVGVzdChlKSxyPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBhPXRbcl07aWYoIWEuaXNJZ25vcmVkKXt2YXIgdT1zKGEpO3UmJmkucHVzaChhKSx1JiZhLmlzSGlkZGVuP28ucHVzaChhKTp1fHxhLmlzSGlkZGVufHxuLnB1c2goYSl9fXJldHVybnttYXRjaGVzOmksbmVlZFJldmVhbDpvLG5lZWRIaWRlOm59fSxsLl9nZXRGaWx0ZXJUZXN0PWZ1bmN0aW9uKHQpe3JldHVybiB1JiZ0aGlzLm9wdGlvbnMuaXNKUXVlcnlGaWx0ZXJpbmc/ZnVuY3Rpb24oZSl7cmV0dXJuIHUoZS5lbGVtZW50KS5pcyh0KTtcbn06XCJmdW5jdGlvblwiPT10eXBlb2YgdD9mdW5jdGlvbihlKXtyZXR1cm4gdChlLmVsZW1lbnQpfTpmdW5jdGlvbihlKXtyZXR1cm4gbyhlLmVsZW1lbnQsdCl9fSxsLnVwZGF0ZVNvcnREYXRhPWZ1bmN0aW9uKHQpe3ZhciBlO3Q/KHQ9bi5tYWtlQXJyYXkodCksZT10aGlzLmdldEl0ZW1zKHQpKTplPXRoaXMuaXRlbXMsdGhpcy5fZ2V0U29ydGVycygpLHRoaXMuX3VwZGF0ZUl0ZW1zU29ydERhdGEoZSl9LGwuX2dldFNvcnRlcnM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMuZ2V0U29ydERhdGE7Zm9yKHZhciBlIGluIHQpe3ZhciBpPXRbZV07dGhpcy5fc29ydGVyc1tlXT1mKGkpfX0sbC5fdXBkYXRlSXRlbXNTb3J0RGF0YT1mdW5jdGlvbih0KXtmb3IodmFyIGU9dCYmdC5sZW5ndGgsaT0wO2UmJmk8ZTtpKyspe3ZhciBvPXRbaV07by51cGRhdGVTb3J0RGF0YSgpfX07dmFyIGY9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiB0KXJldHVybiB0O3ZhciBpPWgodCkuc3BsaXQoXCIgXCIpLG89aVswXSxuPW8ubWF0Y2goL15cXFsoLispXFxdJC8pLHM9biYmblsxXSxyPWUocyxvKSxhPWQuc29ydERhdGFQYXJzZXJzW2lbMV1dO3JldHVybiB0PWE/ZnVuY3Rpb24odCl7cmV0dXJuIHQmJmEocih0KSl9OmZ1bmN0aW9uKHQpe3JldHVybiB0JiZyKHQpfX1mdW5jdGlvbiBlKHQsZSl7cmV0dXJuIHQ/ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0QXR0cmlidXRlKHQpfTpmdW5jdGlvbih0KXt2YXIgaT10LnF1ZXJ5U2VsZWN0b3IoZSk7cmV0dXJuIGkmJmkudGV4dENvbnRlbnR9fXJldHVybiB0fSgpO2Quc29ydERhdGFQYXJzZXJzPXtwYXJzZUludDpmdW5jdGlvbih0KXtyZXR1cm4gcGFyc2VJbnQodCwxMCl9LHBhcnNlRmxvYXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHBhcnNlRmxvYXQodCl9fSxsLl9zb3J0PWZ1bmN0aW9uKCl7aWYodGhpcy5vcHRpb25zLnNvcnRCeSl7dmFyIHQ9bi5tYWtlQXJyYXkodGhpcy5vcHRpb25zLnNvcnRCeSk7dGhpcy5fZ2V0SXNTYW1lU29ydEJ5KHQpfHwodGhpcy5zb3J0SGlzdG9yeT10LmNvbmNhdCh0aGlzLnNvcnRIaXN0b3J5KSk7dmFyIGU9YSh0aGlzLnNvcnRIaXN0b3J5LHRoaXMub3B0aW9ucy5zb3J0QXNjZW5kaW5nKTt0aGlzLmZpbHRlcmVkSXRlbXMuc29ydChlKX19LGwuX2dldElzU2FtZVNvcnRCeT1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZih0W2VdIT10aGlzLnNvcnRIaXN0b3J5W2VdKXJldHVybiExO3JldHVybiEwfSxsLl9tb2RlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLmxheW91dE1vZGUsZT10aGlzLm1vZGVzW3RdO2lmKCFlKXRocm93IG5ldyBFcnJvcihcIk5vIGxheW91dCBtb2RlOiBcIit0KTtyZXR1cm4gZS5vcHRpb25zPXRoaXMub3B0aW9uc1t0XSxlfSxsLl9yZXNldExheW91dD1mdW5jdGlvbigpe2UucHJvdG90eXBlLl9yZXNldExheW91dC5jYWxsKHRoaXMpLHRoaXMuX21vZGUoKS5fcmVzZXRMYXlvdXQoKX0sbC5fZ2V0SXRlbUxheW91dFBvc2l0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9tb2RlKCkuX2dldEl0ZW1MYXlvdXRQb3NpdGlvbih0KX0sbC5fbWFuYWdlU3RhbXA9ZnVuY3Rpb24odCl7dGhpcy5fbW9kZSgpLl9tYW5hZ2VTdGFtcCh0KX0sbC5fZ2V0Q29udGFpbmVyU2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tb2RlKCkuX2dldENvbnRhaW5lclNpemUoKX0sbC5uZWVkc1Jlc2l6ZUxheW91dD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tb2RlKCkubmVlZHNSZXNpemVMYXlvdXQoKX0sbC5hcHBlbmRlZD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmFkZEl0ZW1zKHQpO2lmKGUubGVuZ3RoKXt2YXIgaT10aGlzLl9maWx0ZXJSZXZlYWxBZGRlZChlKTt0aGlzLmZpbHRlcmVkSXRlbXM9dGhpcy5maWx0ZXJlZEl0ZW1zLmNvbmNhdChpKX19LGwucHJlcGVuZGVkPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2l0ZW1pemUodCk7aWYoZS5sZW5ndGgpe3RoaXMuX3Jlc2V0TGF5b3V0KCksdGhpcy5fbWFuYWdlU3RhbXBzKCk7dmFyIGk9dGhpcy5fZmlsdGVyUmV2ZWFsQWRkZWQoZSk7dGhpcy5sYXlvdXRJdGVtcyh0aGlzLmZpbHRlcmVkSXRlbXMpLHRoaXMuZmlsdGVyZWRJdGVtcz1pLmNvbmNhdCh0aGlzLmZpbHRlcmVkSXRlbXMpLHRoaXMuaXRlbXM9ZS5jb25jYXQodGhpcy5pdGVtcyl9fSxsLl9maWx0ZXJSZXZlYWxBZGRlZD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9maWx0ZXIodCk7cmV0dXJuIHRoaXMuaGlkZShlLm5lZWRIaWRlKSx0aGlzLnJldmVhbChlLm1hdGNoZXMpLHRoaXMubGF5b3V0SXRlbXMoZS5tYXRjaGVzLCEwKSxlLm1hdGNoZXN9LGwuaW5zZXJ0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuYWRkSXRlbXModCk7aWYoZS5sZW5ndGgpe3ZhciBpLG8sbj1lLmxlbmd0aDtmb3IoaT0wO2k8bjtpKyspbz1lW2ldLHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChvLmVsZW1lbnQpO3ZhciBzPXRoaXMuX2ZpbHRlcihlKS5tYXRjaGVzO2ZvcihpPTA7aTxuO2krKyllW2ldLmlzTGF5b3V0SW5zdGFudD0hMDtmb3IodGhpcy5hcnJhbmdlKCksaT0wO2k8bjtpKyspZGVsZXRlIGVbaV0uaXNMYXlvdXRJbnN0YW50O3RoaXMucmV2ZWFsKHMpfX07dmFyIGM9bC5yZW1vdmU7cmV0dXJuIGwucmVtb3ZlPWZ1bmN0aW9uKHQpe3Q9bi5tYWtlQXJyYXkodCk7dmFyIGU9dGhpcy5nZXRJdGVtcyh0KTtjLmNhbGwodGhpcyx0KTtmb3IodmFyIGk9ZSYmZS5sZW5ndGgsbz0wO2kmJm88aTtvKyspe3ZhciBzPWVbb107bi5yZW1vdmVGcm9tKHRoaXMuZmlsdGVyZWRJdGVtcyxzKX19LGwuc2h1ZmZsZT1mdW5jdGlvbigpe2Zvcih2YXIgdD0wO3Q8dGhpcy5pdGVtcy5sZW5ndGg7dCsrKXt2YXIgZT10aGlzLml0ZW1zW3RdO2Uuc29ydERhdGEucmFuZG9tPU1hdGgucmFuZG9tKCl9dGhpcy5vcHRpb25zLnNvcnRCeT1cInJhbmRvbVwiLHRoaXMuX3NvcnQoKSx0aGlzLl9sYXlvdXQoKX0sbC5fbm9UcmFuc2l0aW9uPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5vcHRpb25zLnRyYW5zaXRpb25EdXJhdGlvbjt0aGlzLm9wdGlvbnMudHJhbnNpdGlvbkR1cmF0aW9uPTA7dmFyIG89dC5hcHBseSh0aGlzLGUpO3JldHVybiB0aGlzLm9wdGlvbnMudHJhbnNpdGlvbkR1cmF0aW9uPWksb30sbC5nZXRGaWx0ZXJlZEl0ZW1FbGVtZW50cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmZpbHRlcmVkSXRlbXMubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LmVsZW1lbnR9KX0sZH0pOyIsIi8qXHJcbiogQ29weXJpZ2h0IChDKSAyMDA5IEpvZWwgU3V0aGVybGFuZFxyXG4qIExpY2VuY2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxyXG4qIGh0dHA6Ly93d3cubmV3bWVkaWFjYW1wYWlnbnMuY29tL3BhZ2UvanF1ZXJ5LWZsaWNrci1wbHVnaW5cclxuKlxyXG4qIEF2YWlsYWJsZSB0YWdzIGZvciB0ZW1wbGF0ZXM6XHJcbiogdGl0bGUsIGxpbmssIGRhdGVfdGFrZW4sIGRlc2NyaXB0aW9uLCBwdWJsaXNoZWQsIGF1dGhvciwgYXV0aG9yX2lkLCB0YWdzLCBpbWFnZSpcclxuKi9cclxuKGZ1bmN0aW9uKCQpeyQuZm4uamZsaWNrcmZlZWQ9ZnVuY3Rpb24oc2V0dGluZ3MsY2FsbGJhY2spe3NldHRpbmdzPSQuZXh0ZW5kKHRydWUse2ZsaWNrcmJhc2U6J2h0dHA6Ly9hcGkuZmxpY2tyLmNvbS9zZXJ2aWNlcy9mZWVkcy8nLGZlZWRhcGk6J3Bob3Rvc19wdWJsaWMuZ25lJyxsaW1pdDoyMCxxc3RyaW5nczp7bGFuZzonZW4tdXMnLGZvcm1hdDonanNvbicsanNvbmNhbGxiYWNrOic/J30sY2xlYW5EZXNjcmlwdGlvbjp0cnVlLHVzZVRlbXBsYXRlOnRydWUsaXRlbVRlbXBsYXRlOicnLGl0ZW1DYWxsYmFjazpmdW5jdGlvbigpe319LHNldHRpbmdzKTt2YXIgdXJsPXNldHRpbmdzLmZsaWNrcmJhc2Urc2V0dGluZ3MuZmVlZGFwaSsnPyc7dmFyIGZpcnN0PXRydWU7Zm9yKHZhciBrZXkgaW4gc2V0dGluZ3MucXN0cmluZ3Mpe2lmKCFmaXJzdClcclxudXJsKz0nJic7dXJsKz1rZXkrJz0nK3NldHRpbmdzLnFzdHJpbmdzW2tleV07Zmlyc3Q9ZmFsc2U7fVxyXG5yZXR1cm4gJCh0aGlzKS5lYWNoKGZ1bmN0aW9uKCl7dmFyICRjb250YWluZXI9JCh0aGlzKTt2YXIgY29udGFpbmVyPXRoaXM7JC5nZXRKU09OKHVybCxmdW5jdGlvbihkYXRhKXskLmVhY2goZGF0YS5pdGVtcyxmdW5jdGlvbihpLGl0ZW0pe2lmKGk8c2V0dGluZ3MubGltaXQpe2lmKHNldHRpbmdzLmNsZWFuRGVzY3JpcHRpb24pe3ZhciByZWdleD0vPHA+KC4qPyk8XFwvcD4vZzt2YXIgaW5wdXQ9aXRlbS5kZXNjcmlwdGlvbjtpZihyZWdleC50ZXN0KGlucHV0KSl7aXRlbS5kZXNjcmlwdGlvbj1pbnB1dC5tYXRjaChyZWdleClbMl1cclxuaWYoaXRlbS5kZXNjcmlwdGlvbiE9dW5kZWZpbmVkKVxyXG5pdGVtLmRlc2NyaXB0aW9uPWl0ZW0uZGVzY3JpcHRpb24ucmVwbGFjZSgnPHA+JywnJykucmVwbGFjZSgnPC9wPicsJycpO319XHJcbml0ZW1bJ2ltYWdlX3MnXT1pdGVtLm1lZGlhLm0ucmVwbGFjZSgnX20nLCdfcycpO2l0ZW1bJ2ltYWdlX3QnXT1pdGVtLm1lZGlhLm0ucmVwbGFjZSgnX20nLCdfdCcpO2l0ZW1bJ2ltYWdlX20nXT1pdGVtLm1lZGlhLm0ucmVwbGFjZSgnX20nLCdfbScpO2l0ZW1bJ2ltYWdlJ109aXRlbS5tZWRpYS5tLnJlcGxhY2UoJ19tJywnJyk7aXRlbVsnaW1hZ2VfYiddPWl0ZW0ubWVkaWEubS5yZXBsYWNlKCdfbScsJ19iJyk7ZGVsZXRlIGl0ZW0ubWVkaWE7aWYoc2V0dGluZ3MudXNlVGVtcGxhdGUpe3ZhciB0ZW1wbGF0ZT1zZXR0aW5ncy5pdGVtVGVtcGxhdGU7Zm9yKHZhciBrZXkgaW4gaXRlbSl7dmFyIHJneD1uZXcgUmVnRXhwKCd7eycra2V5Kyd9fScsJ2cnKTt0ZW1wbGF0ZT10ZW1wbGF0ZS5yZXBsYWNlKHJneCxpdGVtW2tleV0pO31cclxuJGNvbnRhaW5lci5hcHBlbmQodGVtcGxhdGUpfVxyXG5zZXR0aW5ncy5pdGVtQ2FsbGJhY2suY2FsbChjb250YWluZXIsaXRlbSk7fX0pO2lmKCQuaXNGdW5jdGlvbihjYWxsYmFjaykpe2NhbGxiYWNrLmNhbGwoY29udGFpbmVyLGRhdGEpO319KTt9KTt9fSkoalF1ZXJ5KTsiLCIvKlxyXG4gKiBTY3JvbGxUb0ZpeGVkXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9iaWdzcG90dGVkZG9nL1Njcm9sbFRvRml4ZWRcclxuICpcclxuICogQ29weXJpZ2h0IChjKSAyMDExIEpvc2VwaCBDYXZhLUx5bmNoXHJcbiAqIE1JVCBsaWNlbnNlXHJcbiAqL1xyXG4gKGZ1bmN0aW9uKGEpe2EuaXNTY3JvbGxUb0ZpeGVkPWZ1bmN0aW9uKGIpe3JldHVybiAhIWEoYikuZGF0YShcIlNjcm9sbFRvRml4ZWRcIil9O2EuU2Nyb2xsVG9GaXhlZD1mdW5jdGlvbihkLGkpe3ZhciBtPXRoaXM7bS4kZWw9YShkKTttLmVsPWQ7bS4kZWwuZGF0YShcIlNjcm9sbFRvRml4ZWRcIixtKTt2YXIgYz1mYWxzZTt2YXIgSD1tLiRlbDt2YXIgSTt2YXIgRjt2YXIgazt2YXIgZTt2YXIgejt2YXIgRT0wO3ZhciByPTA7dmFyIGo9LTE7dmFyIGY9LTE7dmFyIHU9bnVsbDt2YXIgQTt2YXIgZztmdW5jdGlvbiB2KCl7SC50cmlnZ2VyKFwicHJlVW5maXhlZC5TY3JvbGxUb0ZpeGVkXCIpO2woKTtILnRyaWdnZXIoXCJ1bmZpeGVkLlNjcm9sbFRvRml4ZWRcIik7Zj0tMTtFPUgub2Zmc2V0KCkudG9wO3I9SC5vZmZzZXQoKS5sZWZ0O2lmKG0ub3B0aW9ucy5vZmZzZXRzKXtyKz0oSC5vZmZzZXQoKS5sZWZ0LUgucG9zaXRpb24oKS5sZWZ0KX1pZihqPT0tMSl7aj1yfUk9SC5jc3MoXCJwb3NpdGlvblwiKTtjPXRydWU7aWYobS5vcHRpb25zLmJvdHRvbSE9LTEpe0gudHJpZ2dlcihcInByZUZpeGVkLlNjcm9sbFRvRml4ZWRcIik7eCgpO0gudHJpZ2dlcihcImZpeGVkLlNjcm9sbFRvRml4ZWRcIil9fWZ1bmN0aW9uIG8oKXt2YXIgSj1tLm9wdGlvbnMubGltaXQ7aWYoIUope3JldHVybiAwfWlmKHR5cGVvZihKKT09PVwiZnVuY3Rpb25cIil7cmV0dXJuIEouYXBwbHkoSCl9cmV0dXJuIEp9ZnVuY3Rpb24gcSgpe3JldHVybiBJPT09XCJmaXhlZFwifWZ1bmN0aW9uIHkoKXtyZXR1cm4gST09PVwiYWJzb2x1dGVcIn1mdW5jdGlvbiBoKCl7cmV0dXJuICEocSgpfHx5KCkpfWZ1bmN0aW9uIHgoKXtpZighcSgpKXt2YXIgSj1IWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3UuY3NzKHtkaXNwbGF5OkguY3NzKFwiZGlzcGxheVwiKSx3aWR0aDpKLndpZHRoLGhlaWdodDpKLmhlaWdodCxcImZsb2F0XCI6SC5jc3MoXCJmbG9hdFwiKX0pO2Nzc09wdGlvbnM9e1wiei1pbmRleFwiOm0ub3B0aW9ucy56SW5kZXgscG9zaXRpb246XCJmaXhlZFwiLHRvcDptLm9wdGlvbnMuYm90dG9tPT0tMT90KCk6XCJcIixib3R0b206bS5vcHRpb25zLmJvdHRvbT09LTE/XCJcIjptLm9wdGlvbnMuYm90dG9tLFwibWFyZ2luLWxlZnRcIjpcIjBweFwifTtpZighbS5vcHRpb25zLmRvbnRTZXRXaWR0aCl7Y3NzT3B0aW9ucy53aWR0aD1ILmNzcyhcIndpZHRoXCIpfUguY3NzKGNzc09wdGlvbnMpO0guYWRkQ2xhc3MobS5vcHRpb25zLmJhc2VDbGFzc05hbWUpO2lmKG0ub3B0aW9ucy5jbGFzc05hbWUpe0guYWRkQ2xhc3MobS5vcHRpb25zLmNsYXNzTmFtZSl9ST1cImZpeGVkXCJ9fWZ1bmN0aW9uIGIoKXt2YXIgSz1vKCk7dmFyIEo9cjtpZihtLm9wdGlvbnMucmVtb3ZlT2Zmc2V0cyl7Sj1cIlwiO0s9Sy1FfWNzc09wdGlvbnM9e3Bvc2l0aW9uOlwiYWJzb2x1dGVcIix0b3A6SyxsZWZ0OkosXCJtYXJnaW4tbGVmdFwiOlwiMHB4XCIsYm90dG9tOlwiXCJ9O2lmKCFtLm9wdGlvbnMuZG9udFNldFdpZHRoKXtjc3NPcHRpb25zLndpZHRoPUguY3NzKFwid2lkdGhcIil9SC5jc3MoY3NzT3B0aW9ucyk7ST1cImFic29sdXRlXCJ9ZnVuY3Rpb24gbCgpe2lmKCFoKCkpe2Y9LTE7dS5jc3MoXCJkaXNwbGF5XCIsXCJub25lXCIpO0guY3NzKHtcInotaW5kZXhcIjp6LHdpZHRoOlwiXCIscG9zaXRpb246RixsZWZ0OlwiXCIsdG9wOmUsXCJtYXJnaW4tbGVmdFwiOlwiXCJ9KTtILnJlbW92ZUNsYXNzKFwic2Nyb2xsLXRvLWZpeGVkLWZpeGVkXCIpO2lmKG0ub3B0aW9ucy5jbGFzc05hbWUpe0gucmVtb3ZlQ2xhc3MobS5vcHRpb25zLmNsYXNzTmFtZSl9ST1udWxsfX1mdW5jdGlvbiB3KEope2lmKEohPWYpe0guY3NzKFwibGVmdFwiLHItSik7Zj1KfX1mdW5jdGlvbiB0KCl7dmFyIEo9bS5vcHRpb25zLm1hcmdpblRvcDtpZighSil7cmV0dXJuIDB9aWYodHlwZW9mKEopPT09XCJmdW5jdGlvblwiKXtyZXR1cm4gSi5hcHBseShIKX1yZXR1cm4gSn1mdW5jdGlvbiBCKCl7aWYoIWEuaXNTY3JvbGxUb0ZpeGVkKEgpfHxILmlzKFwiOmhpZGRlblwiKSl7cmV0dXJufXZhciBNPWM7dmFyIEw9aCgpO2lmKCFjKXt2KCl9ZWxzZXtpZihoKCkpe0U9SC5vZmZzZXQoKS50b3A7cj1ILm9mZnNldCgpLmxlZnR9fXZhciBKPWEod2luZG93KS5zY3JvbGxMZWZ0KCk7dmFyIE49YSh3aW5kb3cpLnNjcm9sbFRvcCgpO3ZhciBLPW8oKTtpZihtLm9wdGlvbnMubWluV2lkdGgmJmEod2luZG93KS53aWR0aCgpPG0ub3B0aW9ucy5taW5XaWR0aCl7aWYoIWgoKXx8IU0pe3AoKTtILnRyaWdnZXIoXCJwcmVVbmZpeGVkLlNjcm9sbFRvRml4ZWRcIik7bCgpO0gudHJpZ2dlcihcInVuZml4ZWQuU2Nyb2xsVG9GaXhlZFwiKX19ZWxzZXtpZihtLm9wdGlvbnMubWF4V2lkdGgmJmEod2luZG93KS53aWR0aCgpPm0ub3B0aW9ucy5tYXhXaWR0aCl7aWYoIWgoKXx8IU0pe3AoKTtILnRyaWdnZXIoXCJwcmVVbmZpeGVkLlNjcm9sbFRvRml4ZWRcIik7bCgpO0gudHJpZ2dlcihcInVuZml4ZWQuU2Nyb2xsVG9GaXhlZFwiKX19ZWxzZXtpZihtLm9wdGlvbnMuYm90dG9tPT0tMSl7aWYoSz4wJiZOPj1LLXQoKSl7aWYoIUwmJigheSgpfHwhTSkpe3AoKTtILnRyaWdnZXIoXCJwcmVBYnNvbHV0ZS5TY3JvbGxUb0ZpeGVkXCIpO2IoKTtILnRyaWdnZXIoXCJ1bmZpeGVkLlNjcm9sbFRvRml4ZWRcIil9fWVsc2V7aWYoTj49RS10KCkpe2lmKCFxKCl8fCFNKXtwKCk7SC50cmlnZ2VyKFwicHJlRml4ZWQuU2Nyb2xsVG9GaXhlZFwiKTt4KCk7Zj0tMTtILnRyaWdnZXIoXCJmaXhlZC5TY3JvbGxUb0ZpeGVkXCIpfXcoSil9ZWxzZXtpZighaCgpfHwhTSl7cCgpO0gudHJpZ2dlcihcInByZVVuZml4ZWQuU2Nyb2xsVG9GaXhlZFwiKTtsKCk7SC50cmlnZ2VyKFwidW5maXhlZC5TY3JvbGxUb0ZpeGVkXCIpfX19fWVsc2V7aWYoSz4wKXtpZihOK2Eod2luZG93KS5oZWlnaHQoKS1ILm91dGVySGVpZ2h0KHRydWUpPj1LLSh0KCl8fC1uKCkpKXtpZihxKCkpe3AoKTtILnRyaWdnZXIoXCJwcmVVbmZpeGVkLlNjcm9sbFRvRml4ZWRcIik7aWYoRj09PVwiYWJzb2x1dGVcIil7YigpfWVsc2V7bCgpfUgudHJpZ2dlcihcInVuZml4ZWQuU2Nyb2xsVG9GaXhlZFwiKX19ZWxzZXtpZighcSgpKXtwKCk7SC50cmlnZ2VyKFwicHJlRml4ZWQuU2Nyb2xsVG9GaXhlZFwiKTt4KCl9dyhKKTtILnRyaWdnZXIoXCJmaXhlZC5TY3JvbGxUb0ZpeGVkXCIpfX1lbHNle3coSil9fX19fWZ1bmN0aW9uIG4oKXtpZighbS5vcHRpb25zLmJvdHRvbSl7cmV0dXJuIDB9cmV0dXJuIG0ub3B0aW9ucy5ib3R0b219ZnVuY3Rpb24gcCgpe3ZhciBKPUguY3NzKFwicG9zaXRpb25cIik7aWYoSj09XCJhYnNvbHV0ZVwiKXtILnRyaWdnZXIoXCJwb3N0QWJzb2x1dGUuU2Nyb2xsVG9GaXhlZFwiKX1lbHNle2lmKEo9PVwiZml4ZWRcIil7SC50cmlnZ2VyKFwicG9zdEZpeGVkLlNjcm9sbFRvRml4ZWRcIil9ZWxzZXtILnRyaWdnZXIoXCJwb3N0VW5maXhlZC5TY3JvbGxUb0ZpeGVkXCIpfX19dmFyIEQ9ZnVuY3Rpb24oSil7aWYoSC5pcyhcIjp2aXNpYmxlXCIpKXtjPWZhbHNlO0IoKX1lbHNle2woKX19O3ZhciBHPWZ1bmN0aW9uKEopeyghIXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUpP3JlcXVlc3RBbmltYXRpb25GcmFtZShCKTpCKCl9O3ZhciBDPWZ1bmN0aW9uKCl7dmFyIEs9ZG9jdW1lbnQuYm9keTtpZihkb2N1bWVudC5jcmVhdGVFbGVtZW50JiZLJiZLLmFwcGVuZENoaWxkJiZLLnJlbW92ZUNoaWxkKXt2YXIgTT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2lmKCFNLmdldEJvdW5kaW5nQ2xpZW50UmVjdCl7cmV0dXJuIG51bGx9TS5pbm5lckhUTUw9XCJ4XCI7TS5zdHlsZS5jc3NUZXh0PVwicG9zaXRpb246Zml4ZWQ7dG9wOjEwMHB4O1wiO0suYXBwZW5kQ2hpbGQoTSk7dmFyIE49Sy5zdHlsZS5oZWlnaHQsTz1LLnNjcm9sbFRvcDtLLnN0eWxlLmhlaWdodD1cIjMwMDBweFwiO0suc2Nyb2xsVG9wPTUwMDt2YXIgSj1NLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDtLLnN0eWxlLmhlaWdodD1OO3ZhciBMPShKPT09MTAwKTtLLnJlbW92ZUNoaWxkKE0pO0suc2Nyb2xsVG9wPU87cmV0dXJuIEx9cmV0dXJuIG51bGx9O3ZhciBzPWZ1bmN0aW9uKEope0o9Snx8d2luZG93LmV2ZW50O2lmKEoucHJldmVudERlZmF1bHQpe0oucHJldmVudERlZmF1bHQoKX1KLnJldHVyblZhbHVlPWZhbHNlfTttLmluaXQ9ZnVuY3Rpb24oKXttLm9wdGlvbnM9YS5leHRlbmQoe30sYS5TY3JvbGxUb0ZpeGVkLmRlZmF1bHRPcHRpb25zLGkpO3o9SC5jc3MoXCJ6LWluZGV4XCIpO20uJGVsLmNzcyhcInotaW5kZXhcIixtLm9wdGlvbnMuekluZGV4KTt1PWEoXCI8ZGl2IC8+XCIpO0k9SC5jc3MoXCJwb3NpdGlvblwiKTtGPUguY3NzKFwicG9zaXRpb25cIik7az1ILmNzcyhcImZsb2F0XCIpO2U9SC5jc3MoXCJ0b3BcIik7aWYoaCgpKXttLiRlbC5hZnRlcih1KX1hKHdpbmRvdykuYmluZChcInJlc2l6ZS5TY3JvbGxUb0ZpeGVkXCIsRCk7YSh3aW5kb3cpLmJpbmQoXCJzY3JvbGwuU2Nyb2xsVG9GaXhlZFwiLEcpO2lmKFwib250b3VjaG1vdmVcIiBpbiB3aW5kb3cpe2Eod2luZG93KS5iaW5kKFwidG91Y2htb3ZlLlNjcm9sbFRvRml4ZWRcIixCKX1pZihtLm9wdGlvbnMucHJlRml4ZWQpe0guYmluZChcInByZUZpeGVkLlNjcm9sbFRvRml4ZWRcIixtLm9wdGlvbnMucHJlRml4ZWQpfWlmKG0ub3B0aW9ucy5wb3N0Rml4ZWQpe0guYmluZChcInBvc3RGaXhlZC5TY3JvbGxUb0ZpeGVkXCIsbS5vcHRpb25zLnBvc3RGaXhlZCl9aWYobS5vcHRpb25zLnByZVVuZml4ZWQpe0guYmluZChcInByZVVuZml4ZWQuU2Nyb2xsVG9GaXhlZFwiLG0ub3B0aW9ucy5wcmVVbmZpeGVkKX1pZihtLm9wdGlvbnMucG9zdFVuZml4ZWQpe0guYmluZChcInBvc3RVbmZpeGVkLlNjcm9sbFRvRml4ZWRcIixtLm9wdGlvbnMucG9zdFVuZml4ZWQpfWlmKG0ub3B0aW9ucy5wcmVBYnNvbHV0ZSl7SC5iaW5kKFwicHJlQWJzb2x1dGUuU2Nyb2xsVG9GaXhlZFwiLG0ub3B0aW9ucy5wcmVBYnNvbHV0ZSl9aWYobS5vcHRpb25zLnBvc3RBYnNvbHV0ZSl7SC5iaW5kKFwicG9zdEFic29sdXRlLlNjcm9sbFRvRml4ZWRcIixtLm9wdGlvbnMucG9zdEFic29sdXRlKX1pZihtLm9wdGlvbnMuZml4ZWQpe0guYmluZChcImZpeGVkLlNjcm9sbFRvRml4ZWRcIixtLm9wdGlvbnMuZml4ZWQpfWlmKG0ub3B0aW9ucy51bmZpeGVkKXtILmJpbmQoXCJ1bmZpeGVkLlNjcm9sbFRvRml4ZWRcIixtLm9wdGlvbnMudW5maXhlZCl9aWYobS5vcHRpb25zLnNwYWNlckNsYXNzKXt1LmFkZENsYXNzKG0ub3B0aW9ucy5zcGFjZXJDbGFzcyl9SC5iaW5kKFwicmVzaXplLlNjcm9sbFRvRml4ZWRcIixmdW5jdGlvbigpe3UuaGVpZ2h0KEguaGVpZ2h0KCkpfSk7SC5iaW5kKFwic2Nyb2xsLlNjcm9sbFRvRml4ZWRcIixmdW5jdGlvbigpe0gudHJpZ2dlcihcInByZVVuZml4ZWQuU2Nyb2xsVG9GaXhlZFwiKTtsKCk7SC50cmlnZ2VyKFwidW5maXhlZC5TY3JvbGxUb0ZpeGVkXCIpO0IoKX0pO0guYmluZChcImRldGFjaC5TY3JvbGxUb0ZpeGVkXCIsZnVuY3Rpb24oSil7cyhKKTtILnRyaWdnZXIoXCJwcmVVbmZpeGVkLlNjcm9sbFRvRml4ZWRcIik7bCgpO0gudHJpZ2dlcihcInVuZml4ZWQuU2Nyb2xsVG9GaXhlZFwiKTthKHdpbmRvdykudW5iaW5kKFwicmVzaXplLlNjcm9sbFRvRml4ZWRcIixEKTthKHdpbmRvdykudW5iaW5kKFwic2Nyb2xsLlNjcm9sbFRvRml4ZWRcIixHKTtILnVuYmluZChcIi5TY3JvbGxUb0ZpeGVkXCIpO3UucmVtb3ZlKCk7bS4kZWwucmVtb3ZlRGF0YShcIlNjcm9sbFRvRml4ZWRcIil9KTtEKCl9O20uaW5pdCgpfTthLlNjcm9sbFRvRml4ZWQuZGVmYXVsdE9wdGlvbnM9e21hcmdpblRvcDowLGxpbWl0OjAsYm90dG9tOi0xLHpJbmRleDoxMDAwLGJhc2VDbGFzc05hbWU6XCJzY3JvbGwtdG8tZml4ZWQtZml4ZWRcIn07YS5mbi5zY3JvbGxUb0ZpeGVkPWZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXsobmV3IGEuU2Nyb2xsVG9GaXhlZCh0aGlzLGIpKX0pfX0pKGpRdWVyeSk7IiwiLyoqKioqKioqKioqXHJcblx0QW5pbWF0ZXMgZWxlbWVudCdzIG51bWJlciB0byBuZXcgbnVtYmVyIHdpdGggY29tbWFzXHJcblx0UGFyYW1ldGVyczpcclxuXHRcdHN0b3AgKG51bWJlcik6IG51bWJlciB0byBzdG9wIG9uXHJcbiAgICAgICAgY29tbWFzIChib29sZWFuKTogdHVybiBjb21tYXMgb24vb2ZmIChkZWZhdWx0IGlzIHRydWUpXHJcblx0XHRkdXJhdGlvbiAobnVtYmVyKTogaG93IGxvbmcgaW4gbXMgKGRlZmF1bHQgaXMgMTAwMClcclxuXHRcdGVhc2UgKHN0cmluZyk6IHR5cGUgb2YgZWFzaW5nIChkZWZhdWx0IGlzIFwic3dpbmdcIiwgb3RoZXJzIGFyZSBhdmFpYWJsZSBmcm9tIGpRdWVyeSdzIGVhc2luZyBwbHVnaW5cclxuXHRFeGFtcGxlczpcclxuICAgICAgICAkKFwiI2RpdlwiKS5hbmltYXRlTnVtYmVycygxMjM0LCBmYWxzZSwgNTAwLCBcImxpbmVhclwiKTsgLy8gaGFsZiBzZWNvbmQgbGluZWFyIHdpdGhvdXQgY29tbWFzXHJcblx0XHQkKFwiI2RpdlwiKS5hbmltYXRlTnVtYmVycygxMjM0LCB0cnVlLCAyMDAwKTsgLy8gdHdvIHNlY29uZCBzd2luZyB3aXRoIGNvbW1hc1xyXG5cdFx0JChcIiNkaXZcIikuYW5pbWF0ZU51bWJlcnMoNDMyMSk7IC8vIG9uZSBzZWNvbmQgc3dpbmcgd2l0aCBjb21tYXNcclxuXHRUaGlzIGZ1bGx5IGV4cGVjdHMgYW4gZWxlbWVudCBjb250YWluaW5nIGFuIGludGVnZXJcclxuXHRJZiB0aGUgbnVtYmVyIGlzIHdpdGhpbiBjb3B5IHRoZW4gc2VwYXJhdGUgaXQgd2l0aCBhIHNwYW4gYW5kIHRhcmdldCB0aGUgc3BhblxyXG4gICAgV2lsbCB3b3JrIGluIGFwcHJvcHJpYXRlIGlucHV0c1xyXG5cdEluc2VydHMgYW5kIGFjY291bnRzIGZvciBjb21tYXMgZHVyaW5nIGFuaW1hdGlvbiBieSBkZWZhdWx0XHJcbiAgICBcclxuICAgIGh0dHBzOi8vZ2l0aHViLmNvbS90YWxtYW5kL2pxdWVyeS1hbmltYXRlLW51bWJlcnNcclxuKioqKioqKioqKiovXHJcblxyXG4hZnVuY3Rpb24oZSl7ZS5mbi5hbmltYXRlTnVtYmVycz1mdW5jdGlvbih0LGEsbixsKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGk9ZSh0aGlzKSxyPWkuaXMoXCJpbnB1dFwiKSx2PXBhcnNlSW50KHI/aS52YWwoKS5yZXBsYWNlKC8sL2csXCJcIik6aS50ZXh0KCkucmVwbGFjZSgvLC9nLFwiXCIpKSx1PS8oXFxkKSg/PShcXGRcXGRcXGQpKyg/IVxcZCkpL2c7YT12b2lkIDA9PT1hPyEwOmEsciYmXCJudW1iZXJcIj09PWlbMF0udHlwZSYmKGE9ITEpLGUoe3ZhbHVlOnZ9KS5hbmltYXRlKHt2YWx1ZTp0fSx7ZHVyYXRpb246dm9pZCAwPT09bj8xZTM6bixlYXNpbmc6dm9pZCAwPT09bD9cInN3aW5nXCI6bCxzdGVwOmZ1bmN0aW9uKCl7cj9pLnZhbChNYXRoLmZsb29yKHRoaXMudmFsdWUpKTppLnRleHQoTWF0aC5mbG9vcih0aGlzLnZhbHVlKSksYSYmKHI/aS52YWwoaS52YWwoKS5yZXBsYWNlKHUsXCIkMSxcIikpOmkudGV4dChpLnRleHQoKS5yZXBsYWNlKHUsXCIkMSxcIikpKX0sY29tcGxldGU6ZnVuY3Rpb24oKXsocGFyc2VJbnQoaS50ZXh0KCkpIT09dHx8cGFyc2VJbnQoaS52YWwoKSkhPT10KSYmKHI/aS52YWwodCk6aS50ZXh0KHQpLGEmJihyP2kudmFsKGkudmFsKCkucmVwbGFjZSh1LFwiJDEsXCIpKTppLnRleHQoaS50ZXh0KCkucmVwbGFjZSh1LFwiJDEsXCIpKSkpfX0pfSl9fShqUXVlcnkpOyIsIi8qXHJcbiAqIGpRdWVyeSBhcHBlYXIgcGx1Z2luXHJcbiAqXHJcbiAqIENvcHlyaWdodCAoYykgMjAxMiBBbmRyZXkgU2lkb3JvdlxyXG4gKiBsaWNlbnNlZCB1bmRlciBNSVQgbGljZW5zZS5cclxuICpcclxuICogaHR0cHM6Ly9naXRodWIuY29tL21vcnIvanF1ZXJ5LmFwcGVhci9cclxuICpcclxuICogVmVyc2lvbjogMC4zLjZcclxuICovXHJcbihmdW5jdGlvbigkKSB7XHJcbiAgdmFyIHNlbGVjdG9ycyA9IFtdO1xyXG5cclxuICB2YXIgY2hlY2tfYmluZGVkID0gZmFsc2U7XHJcbiAgdmFyIGNoZWNrX2xvY2sgPSBmYWxzZTtcclxuICB2YXIgZGVmYXVsdHMgPSB7XHJcbiAgICBpbnRlcnZhbDogMjUwLFxyXG4gICAgZm9yY2VfcHJvY2VzczogZmFsc2VcclxuICB9O1xyXG4gIHZhciAkd2luZG93ID0gJCh3aW5kb3cpO1xyXG5cclxuICB2YXIgJHByaW9yX2FwcGVhcmVkID0gW107XHJcblxyXG4gIGZ1bmN0aW9uIGFwcGVhcmVkKHNlbGVjdG9yKSB7XHJcbiAgICByZXR1cm4gJChzZWxlY3RvcikuZmlsdGVyKGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4gJCh0aGlzKS5pcygnOmFwcGVhcmVkJyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHByb2Nlc3MoKSB7XHJcbiAgICBjaGVja19sb2NrID0gZmFsc2U7XHJcbiAgICBmb3IgKHZhciBpbmRleCA9IDAsIHNlbGVjdG9yc0xlbmd0aCA9IHNlbGVjdG9ycy5sZW5ndGg7IGluZGV4IDwgc2VsZWN0b3JzTGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgIHZhciAkYXBwZWFyZWQgPSBhcHBlYXJlZChzZWxlY3RvcnNbaW5kZXhdKTtcclxuXHJcbiAgICAgICRhcHBlYXJlZC50cmlnZ2VyKCdhcHBlYXInLCBbJGFwcGVhcmVkXSk7XHJcblxyXG4gICAgICBpZiAoJHByaW9yX2FwcGVhcmVkW2luZGV4XSkge1xyXG4gICAgICAgIHZhciAkZGlzYXBwZWFyZWQgPSAkcHJpb3JfYXBwZWFyZWRbaW5kZXhdLm5vdCgkYXBwZWFyZWQpO1xyXG4gICAgICAgICRkaXNhcHBlYXJlZC50cmlnZ2VyKCdkaXNhcHBlYXInLCBbJGRpc2FwcGVhcmVkXSk7XHJcbiAgICAgIH1cclxuICAgICAgJHByaW9yX2FwcGVhcmVkW2luZGV4XSA9ICRhcHBlYXJlZDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGFkZF9zZWxlY3RvcihzZWxlY3Rvcikge1xyXG4gICAgc2VsZWN0b3JzLnB1c2goc2VsZWN0b3IpO1xyXG4gICAgJHByaW9yX2FwcGVhcmVkLnB1c2goKTtcclxuICB9XHJcblxyXG4gIC8vIFwiYXBwZWFyZWRcIiBjdXN0b20gZmlsdGVyXHJcbiAgJC5leHByWyc6J10uYXBwZWFyZWQgPSBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICB2YXIgJGVsZW1lbnQgPSAkKGVsZW1lbnQpO1xyXG4gICAgaWYgKCEkZWxlbWVudC5pcygnOnZpc2libGUnKSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHdpbmRvd19sZWZ0ID0gJHdpbmRvdy5zY3JvbGxMZWZ0KCk7XHJcbiAgICB2YXIgd2luZG93X3RvcCA9ICR3aW5kb3cuc2Nyb2xsVG9wKCk7XHJcbiAgICB2YXIgb2Zmc2V0ID0gJGVsZW1lbnQub2Zmc2V0KCk7XHJcbiAgICB2YXIgbGVmdCA9IG9mZnNldC5sZWZ0O1xyXG4gICAgdmFyIHRvcCA9IG9mZnNldC50b3A7XHJcblxyXG4gICAgaWYgKHRvcCArICRlbGVtZW50LmhlaWdodCgpID49IHdpbmRvd190b3AgJiZcclxuICAgICAgICB0b3AgLSAoJGVsZW1lbnQuZGF0YSgnYXBwZWFyLXRvcC1vZmZzZXQnKSB8fCAwKSA8PSB3aW5kb3dfdG9wICsgJHdpbmRvdy5oZWlnaHQoKSAmJlxyXG4gICAgICAgIGxlZnQgKyAkZWxlbWVudC53aWR0aCgpID49IHdpbmRvd19sZWZ0ICYmXHJcbiAgICAgICAgbGVmdCAtICgkZWxlbWVudC5kYXRhKCdhcHBlYXItbGVmdC1vZmZzZXQnKSB8fCAwKSA8PSB3aW5kb3dfbGVmdCArICR3aW5kb3cud2lkdGgoKSkge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAkLmZuLmV4dGVuZCh7XHJcbiAgICAvLyB3YXRjaGluZyBmb3IgZWxlbWVudCdzIGFwcGVhcmFuY2UgaW4gYnJvd3NlciB2aWV3cG9ydFxyXG4gICAgYXBwZWFyOiBmdW5jdGlvbihvcHRpb25zKSB7XHJcbiAgICAgIHZhciBvcHRzID0gJC5leHRlbmQoe30sIGRlZmF1bHRzLCBvcHRpb25zIHx8IHt9KTtcclxuICAgICAgdmFyIHNlbGVjdG9yID0gdGhpcy5zZWxlY3RvciB8fCB0aGlzO1xyXG4gICAgICBpZiAoIWNoZWNrX2JpbmRlZCkge1xyXG4gICAgICAgIHZhciBvbl9jaGVjayA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYgKGNoZWNrX2xvY2spIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY2hlY2tfbG9jayA9IHRydWU7XHJcblxyXG4gICAgICAgICAgc2V0VGltZW91dChwcm9jZXNzLCBvcHRzLmludGVydmFsKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkKHdpbmRvdykuc2Nyb2xsKG9uX2NoZWNrKS5yZXNpemUob25fY2hlY2spO1xyXG4gICAgICAgIGNoZWNrX2JpbmRlZCA9IHRydWU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChvcHRzLmZvcmNlX3Byb2Nlc3MpIHtcclxuICAgICAgICBzZXRUaW1lb3V0KHByb2Nlc3MsIG9wdHMuaW50ZXJ2YWwpO1xyXG4gICAgICB9XHJcbiAgICAgIGFkZF9zZWxlY3RvcihzZWxlY3Rvcik7XHJcbiAgICAgIHJldHVybiAkKHNlbGVjdG9yKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgJC5leHRlbmQoe1xyXG4gICAgLy8gZm9yY2UgZWxlbWVudHMncyBhcHBlYXJhbmNlIGNoZWNrXHJcbiAgICBmb3JjZV9hcHBlYXI6IGZ1bmN0aW9uKCkge1xyXG4gICAgICBpZiAoY2hlY2tfYmluZGVkKSB7XHJcbiAgICAgICAgcHJvY2VzcygpO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9KTtcclxufSkoZnVuY3Rpb24oKSB7XHJcbiAgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAvLyBOb2RlXHJcbiAgICByZXR1cm4gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiBqUXVlcnk7XHJcbiAgfVxyXG59KCkpO1xyXG4iLCIvKiFcclxuICogVGhlIEZpbmFsIENvdW50ZG93biBmb3IgalF1ZXJ5IHYyLjIuMCAoaHR0cDovL2hpbGlvcy5naXRodWIuaW8valF1ZXJ5LmNvdW50ZG93bi8pXHJcbiAqIENvcHlyaWdodCAoYykgMjAxNiBFZHNvbiBIaWxpb3NcclxuICogXHJcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkgb2ZcclxuICogdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpblxyXG4gKiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvXHJcbiAqIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mXHJcbiAqIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbyxcclxuICogc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XHJcbiAqIFxyXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbiBhbGxcclxuICogY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cclxuICogXHJcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcclxuICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1NcclxuICogRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SXHJcbiAqIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUlxyXG4gKiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTlxyXG4gKiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxyXG4gKi9cclxuIWZ1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW1wianF1ZXJ5XCJdLGEpOmEoalF1ZXJ5KX0oZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYihhKXtpZihhIGluc3RhbmNlb2YgRGF0ZSlyZXR1cm4gYTtpZihTdHJpbmcoYSkubWF0Y2goZykpcmV0dXJuIFN0cmluZyhhKS5tYXRjaCgvXlswLTldKiQvKSYmKGE9TnVtYmVyKGEpKSxTdHJpbmcoYSkubWF0Y2goL1xcLS8pJiYoYT1TdHJpbmcoYSkucmVwbGFjZSgvXFwtL2csXCIvXCIpKSxuZXcgRGF0ZShhKTt0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBjYXN0IGBcIithK1wiYCB0byBhIGRhdGUgb2JqZWN0LlwiKX1mdW5jdGlvbiBjKGEpe3ZhciBiPWEudG9TdHJpbmcoKS5yZXBsYWNlKC8oWy4/KiteJFtcXF1cXFxcKCl7fXwtXSkvZyxcIlxcXFwkMVwiKTtyZXR1cm4gbmV3IFJlZ0V4cChiKX1mdW5jdGlvbiBkKGEpe3JldHVybiBmdW5jdGlvbihiKXt2YXIgZD1iLm1hdGNoKC8lKC18ISk/W0EtWl17MX0oOlteO10rOyk/L2dpKTtpZihkKWZvcih2YXIgZj0wLGc9ZC5sZW5ndGg7ZjxnOysrZil7dmFyIGg9ZFtmXS5tYXRjaCgvJSgtfCEpPyhbYS16QS1aXXsxfSkoOlteO10rOyk/Lyksaj1jKGhbMF0pLGs9aFsxXXx8XCJcIixsPWhbM118fFwiXCIsbT1udWxsO2g9aFsyXSxpLmhhc093blByb3BlcnR5KGgpJiYobT1pW2hdLG09TnVtYmVyKGFbbV0pKSxudWxsIT09bSYmKFwiIVwiPT09ayYmKG09ZShsLG0pKSxcIlwiPT09ayYmbTwxMCYmKG09XCIwXCIrbS50b1N0cmluZygpKSxiPWIucmVwbGFjZShqLG0udG9TdHJpbmcoKSkpfXJldHVybiBiPWIucmVwbGFjZSgvJSUvLFwiJVwiKX19ZnVuY3Rpb24gZShhLGIpe3ZhciBjPVwic1wiLGQ9XCJcIjtyZXR1cm4gYSYmKGE9YS5yZXBsYWNlKC8oOnw7fFxccykvZ2ksXCJcIikuc3BsaXQoL1xcLC8pLDE9PT1hLmxlbmd0aD9jPWFbMF06KGQ9YVswXSxjPWFbMV0pKSxNYXRoLmFicyhiKT4xP2M6ZH12YXIgZj1bXSxnPVtdLGg9e3ByZWNpc2lvbjoxMDAsZWxhcHNlOiExLGRlZmVyOiExfTtnLnB1c2goL15bMC05XSokLy5zb3VyY2UpLGcucHVzaCgvKFswLTldezEsMn1cXC8pezJ9WzAtOV17NH0oIFswLTldezEsMn0oOlswLTldezJ9KXsyfSk/Ly5zb3VyY2UpLGcucHVzaCgvWzAtOV17NH0oW1xcL1xcLV1bMC05XXsxLDJ9KXsyfSggWzAtOV17MSwyfSg6WzAtOV17Mn0pezJ9KT8vLnNvdXJjZSksZz1uZXcgUmVnRXhwKGcuam9pbihcInxcIikpO3ZhciBpPXtZOlwieWVhcnNcIixtOlwibW9udGhzXCIsbjpcImRheXNUb01vbnRoXCIsZDpcImRheXNUb1dlZWtcIix3Olwid2Vla3NcIixXOlwid2Vla3NUb01vbnRoXCIsSDpcImhvdXJzXCIsTTpcIm1pbnV0ZXNcIixTOlwic2Vjb25kc1wiLEQ6XCJ0b3RhbERheXNcIixJOlwidG90YWxIb3Vyc1wiLE46XCJ0b3RhbE1pbnV0ZXNcIixUOlwidG90YWxTZWNvbmRzXCJ9LGo9ZnVuY3Rpb24oYixjLGQpe3RoaXMuZWw9Yix0aGlzLiRlbD1hKGIpLHRoaXMuaW50ZXJ2YWw9bnVsbCx0aGlzLm9mZnNldD17fSx0aGlzLm9wdGlvbnM9YS5leHRlbmQoe30saCksdGhpcy5maXJzdFRpY2s9ITAsdGhpcy5pbnN0YW5jZU51bWJlcj1mLmxlbmd0aCxmLnB1c2godGhpcyksdGhpcy4kZWwuZGF0YShcImNvdW50ZG93bi1pbnN0YW5jZVwiLHRoaXMuaW5zdGFuY2VOdW1iZXIpLGQmJihcImZ1bmN0aW9uXCI9PXR5cGVvZiBkPyh0aGlzLiRlbC5vbihcInVwZGF0ZS5jb3VudGRvd25cIixkKSx0aGlzLiRlbC5vbihcInN0b3BlZC5jb3VudGRvd25cIixkKSx0aGlzLiRlbC5vbihcImZpbmlzaC5jb3VudGRvd25cIixkKSk6dGhpcy5vcHRpb25zPWEuZXh0ZW5kKHt9LGgsZCkpLHRoaXMuc2V0RmluYWxEYXRlKGMpLHRoaXMub3B0aW9ucy5kZWZlcj09PSExJiZ0aGlzLnN0YXJ0KCl9O2EuZXh0ZW5kKGoucHJvdG90eXBlLHtzdGFydDpmdW5jdGlvbigpe251bGwhPT10aGlzLmludGVydmFsJiZjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpO3ZhciBhPXRoaXM7dGhpcy51cGRhdGUoKSx0aGlzLmludGVydmFsPXNldEludGVydmFsKGZ1bmN0aW9uKCl7YS51cGRhdGUuY2FsbChhKX0sdGhpcy5vcHRpb25zLnByZWNpc2lvbil9LHN0b3A6ZnVuY3Rpb24oKXtjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpLHRoaXMuaW50ZXJ2YWw9bnVsbCx0aGlzLmRpc3BhdGNoRXZlbnQoXCJzdG9wZWRcIil9LHRvZ2dsZTpmdW5jdGlvbigpe3RoaXMuaW50ZXJ2YWw/dGhpcy5zdG9wKCk6dGhpcy5zdGFydCgpfSxwYXVzZTpmdW5jdGlvbigpe3RoaXMuc3RvcCgpfSxyZXN1bWU6ZnVuY3Rpb24oKXt0aGlzLnN0YXJ0KCl9LHJlbW92ZTpmdW5jdGlvbigpe3RoaXMuc3RvcC5jYWxsKHRoaXMpLGZbdGhpcy5pbnN0YW5jZU51bWJlcl09bnVsbCxkZWxldGUgdGhpcy4kZWwuZGF0YSgpLmNvdW50ZG93bkluc3RhbmNlfSxzZXRGaW5hbERhdGU6ZnVuY3Rpb24oYSl7dGhpcy5maW5hbERhdGU9YihhKX0sdXBkYXRlOmZ1bmN0aW9uKCl7aWYoMD09PXRoaXMuJGVsLmNsb3Nlc3QoXCJodG1sXCIpLmxlbmd0aClyZXR1cm4gdm9pZCB0aGlzLnJlbW92ZSgpO3ZhciBhLGI9bmV3IERhdGU7cmV0dXJuIGE9dGhpcy5maW5hbERhdGUuZ2V0VGltZSgpLWIuZ2V0VGltZSgpLGE9TWF0aC5jZWlsKGEvMWUzKSxhPSF0aGlzLm9wdGlvbnMuZWxhcHNlJiZhPDA/MDpNYXRoLmFicyhhKSx0aGlzLnRvdGFsU2Vjc0xlZnQ9PT1hfHx0aGlzLmZpcnN0VGljaz92b2lkKHRoaXMuZmlyc3RUaWNrPSExKToodGhpcy50b3RhbFNlY3NMZWZ0PWEsdGhpcy5lbGFwc2VkPWI+PXRoaXMuZmluYWxEYXRlLHRoaXMub2Zmc2V0PXtzZWNvbmRzOnRoaXMudG90YWxTZWNzTGVmdCU2MCxtaW51dGVzOk1hdGguZmxvb3IodGhpcy50b3RhbFNlY3NMZWZ0LzYwKSU2MCxob3VyczpNYXRoLmZsb29yKHRoaXMudG90YWxTZWNzTGVmdC82MC82MCklMjQsZGF5czpNYXRoLmZsb29yKHRoaXMudG90YWxTZWNzTGVmdC82MC82MC8yNCklNyxkYXlzVG9XZWVrOk1hdGguZmxvb3IodGhpcy50b3RhbFNlY3NMZWZ0LzYwLzYwLzI0KSU3LGRheXNUb01vbnRoOk1hdGguZmxvb3IodGhpcy50b3RhbFNlY3NMZWZ0LzYwLzYwLzI0JTMwLjQzNjgpLHdlZWtzOk1hdGguZmxvb3IodGhpcy50b3RhbFNlY3NMZWZ0LzYwLzYwLzI0LzcpLHdlZWtzVG9Nb250aDpNYXRoLmZsb29yKHRoaXMudG90YWxTZWNzTGVmdC82MC82MC8yNC83KSU0LG1vbnRoczpNYXRoLmZsb29yKHRoaXMudG90YWxTZWNzTGVmdC82MC82MC8yNC8zMC40MzY4KSx5ZWFyczpNYXRoLmFicyh0aGlzLmZpbmFsRGF0ZS5nZXRGdWxsWWVhcigpLWIuZ2V0RnVsbFllYXIoKSksdG90YWxEYXlzOk1hdGguZmxvb3IodGhpcy50b3RhbFNlY3NMZWZ0LzYwLzYwLzI0KSx0b3RhbEhvdXJzOk1hdGguZmxvb3IodGhpcy50b3RhbFNlY3NMZWZ0LzYwLzYwKSx0b3RhbE1pbnV0ZXM6TWF0aC5mbG9vcih0aGlzLnRvdGFsU2Vjc0xlZnQvNjApLHRvdGFsU2Vjb25kczp0aGlzLnRvdGFsU2Vjc0xlZnR9LHZvaWQodGhpcy5vcHRpb25zLmVsYXBzZXx8MCE9PXRoaXMudG90YWxTZWNzTGVmdD90aGlzLmRpc3BhdGNoRXZlbnQoXCJ1cGRhdGVcIik6KHRoaXMuc3RvcCgpLHRoaXMuZGlzcGF0Y2hFdmVudChcImZpbmlzaFwiKSkpKX0sZGlzcGF0Y2hFdmVudDpmdW5jdGlvbihiKXt2YXIgYz1hLkV2ZW50KGIrXCIuY291bnRkb3duXCIpO2MuZmluYWxEYXRlPXRoaXMuZmluYWxEYXRlLGMuZWxhcHNlZD10aGlzLmVsYXBzZWQsYy5vZmZzZXQ9YS5leHRlbmQoe30sdGhpcy5vZmZzZXQpLGMuc3RyZnRpbWU9ZCh0aGlzLm9mZnNldCksdGhpcy4kZWwudHJpZ2dlcihjKX19KSxhLmZuLmNvdW50ZG93bj1mdW5jdGlvbigpe3ZhciBiPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9YSh0aGlzKS5kYXRhKFwiY291bnRkb3duLWluc3RhbmNlXCIpO2lmKHZvaWQgMCE9PWMpe3ZhciBkPWZbY10sZT1iWzBdO2oucHJvdG90eXBlLmhhc093blByb3BlcnR5KGUpP2RbZV0uYXBwbHkoZCxiLnNsaWNlKDEpKTpudWxsPT09U3RyaW5nKGUpLm1hdGNoKC9eWyRBLVpfXVswLTlBLVpfJF0qJC9pKT8oZC5zZXRGaW5hbERhdGUuY2FsbChkLGUpLGQuc3RhcnQoKSk6YS5lcnJvcihcIk1ldGhvZCAlcyBkb2VzIG5vdCBleGlzdCBvbiBqUXVlcnkuY291bnRkb3duXCIucmVwbGFjZSgvXFwlcy9naSxlKSl9ZWxzZSBuZXcgaih0aGlzLGJbMF0sYlsxXSl9KX19KTsiLCIoZnVuY3Rpb24gKGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIC8vIEFNRFxuICAgICAgICBkZWZpbmUoWydqcXVlcnknXSwgZmFjdG9yeSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgLy8gQ29tbW9uSlNcbiAgICAgICAgZmFjdG9yeShyZXF1aXJlKCdqcXVlcnknKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQnJvd3NlciBnbG9iYWxzXG4gICAgICAgIGZhY3RvcnkoalF1ZXJ5KTtcbiAgICB9XG59KGZ1bmN0aW9uICgkKSB7XG4gIHZhciBDb3VudFRvID0gZnVuY3Rpb24gKGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICB0aGlzLiRlbGVtZW50ID0gJChlbGVtZW50KTtcbiAgICB0aGlzLm9wdGlvbnMgID0gJC5leHRlbmQoe30sIENvdW50VG8uREVGQVVMVFMsIHRoaXMuZGF0YU9wdGlvbnMoKSwgb3B0aW9ucyk7XG4gICAgdGhpcy5pbml0KCk7XG4gIH07XG5cbiAgQ291bnRUby5ERUZBVUxUUyA9IHtcbiAgICBmcm9tOiAwLCAgICAgICAgICAgICAgIC8vIHRoZSBudW1iZXIgdGhlIGVsZW1lbnQgc2hvdWxkIHN0YXJ0IGF0XG4gICAgdG86IDAsICAgICAgICAgICAgICAgICAvLyB0aGUgbnVtYmVyIHRoZSBlbGVtZW50IHNob3VsZCBlbmQgYXRcbiAgICBzcGVlZDogMTAwMCwgICAgICAgICAgIC8vIGhvdyBsb25nIGl0IHNob3VsZCB0YWtlIHRvIGNvdW50IGJldHdlZW4gdGhlIHRhcmdldCBudW1iZXJzXG4gICAgcmVmcmVzaEludGVydmFsOiAxMDAsICAvLyBob3cgb2Z0ZW4gdGhlIGVsZW1lbnQgc2hvdWxkIGJlIHVwZGF0ZWRcbiAgICBkZWNpbWFsczogMCwgICAgICAgICAgIC8vIHRoZSBudW1iZXIgb2YgZGVjaW1hbCBwbGFjZXMgdG8gc2hvd1xuICAgIGZvcm1hdHRlcjogZm9ybWF0dGVyLCAgLy8gaGFuZGxlciBmb3IgZm9ybWF0dGluZyB0aGUgdmFsdWUgYmVmb3JlIHJlbmRlcmluZ1xuICAgIG9uVXBkYXRlOiBudWxsLCAgICAgICAgLy8gY2FsbGJhY2sgbWV0aG9kIGZvciBldmVyeSB0aW1lIHRoZSBlbGVtZW50IGlzIHVwZGF0ZWRcbiAgICBvbkNvbXBsZXRlOiBudWxsICAgICAgIC8vIGNhbGxiYWNrIG1ldGhvZCBmb3Igd2hlbiB0aGUgZWxlbWVudCBmaW5pc2hlcyB1cGRhdGluZ1xuICB9O1xuXG4gIENvdW50VG8ucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy52YWx1ZSAgICAgPSB0aGlzLm9wdGlvbnMuZnJvbTtcbiAgICB0aGlzLmxvb3BzICAgICA9IE1hdGguY2VpbCh0aGlzLm9wdGlvbnMuc3BlZWQgLyB0aGlzLm9wdGlvbnMucmVmcmVzaEludGVydmFsKTtcbiAgICB0aGlzLmxvb3BDb3VudCA9IDA7XG4gICAgdGhpcy5pbmNyZW1lbnQgPSAodGhpcy5vcHRpb25zLnRvIC0gdGhpcy5vcHRpb25zLmZyb20pIC8gdGhpcy5sb29wcztcbiAgfTtcblxuICBDb3VudFRvLnByb3RvdHlwZS5kYXRhT3B0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgIGZyb206ICAgICAgICAgICAgdGhpcy4kZWxlbWVudC5kYXRhKCdmcm9tJyksXG4gICAgICB0bzogICAgICAgICAgICAgIHRoaXMuJGVsZW1lbnQuZGF0YSgndG8nKSxcbiAgICAgIHNwZWVkOiAgICAgICAgICAgdGhpcy4kZWxlbWVudC5kYXRhKCdzcGVlZCcpLFxuICAgICAgcmVmcmVzaEludGVydmFsOiB0aGlzLiRlbGVtZW50LmRhdGEoJ3JlZnJlc2gtaW50ZXJ2YWwnKSxcbiAgICAgIGRlY2ltYWxzOiAgICAgICAgdGhpcy4kZWxlbWVudC5kYXRhKCdkZWNpbWFscycpXG4gICAgfTtcblxuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob3B0aW9ucyk7XG5cbiAgICBmb3IgKHZhciBpIGluIGtleXMpIHtcbiAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuXG4gICAgICBpZiAodHlwZW9mKG9wdGlvbnNba2V5XSkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGRlbGV0ZSBvcHRpb25zW2tleV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG9wdGlvbnM7XG4gIH07XG5cbiAgQ291bnRUby5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMudmFsdWUgKz0gdGhpcy5pbmNyZW1lbnQ7XG4gICAgdGhpcy5sb29wQ291bnQrKztcblxuICAgIHRoaXMucmVuZGVyKCk7XG5cbiAgICBpZiAodHlwZW9mKHRoaXMub3B0aW9ucy5vblVwZGF0ZSkgPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpcy5vcHRpb25zLm9uVXBkYXRlLmNhbGwodGhpcy4kZWxlbWVudCwgdGhpcy52YWx1ZSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMubG9vcENvdW50ID49IHRoaXMubG9vcHMpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCk7XG4gICAgICB0aGlzLnZhbHVlID0gdGhpcy5vcHRpb25zLnRvO1xuXG4gICAgICBpZiAodHlwZW9mKHRoaXMub3B0aW9ucy5vbkNvbXBsZXRlKSA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRoaXMub3B0aW9ucy5vbkNvbXBsZXRlLmNhbGwodGhpcy4kZWxlbWVudCwgdGhpcy52YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIENvdW50VG8ucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZm9ybWF0dGVkVmFsdWUgPSB0aGlzLm9wdGlvbnMuZm9ybWF0dGVyLmNhbGwodGhpcy4kZWxlbWVudCwgdGhpcy52YWx1ZSwgdGhpcy5vcHRpb25zKTtcbiAgICB0aGlzLiRlbGVtZW50LnRleHQoZm9ybWF0dGVkVmFsdWUpO1xuICB9O1xuXG4gIENvdW50VG8ucHJvdG90eXBlLnJlc3RhcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5zdG9wKCk7XG4gICAgdGhpcy5pbml0KCk7XG4gICAgdGhpcy5zdGFydCgpO1xuICB9O1xuXG4gIENvdW50VG8ucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuc3RvcCgpO1xuICAgIHRoaXMucmVuZGVyKCk7XG4gICAgdGhpcy5pbnRlcnZhbCA9IHNldEludGVydmFsKHRoaXMudXBkYXRlLmJpbmQodGhpcyksIHRoaXMub3B0aW9ucy5yZWZyZXNoSW50ZXJ2YWwpO1xuICB9O1xuXG4gIENvdW50VG8ucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuaW50ZXJ2YWwpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCk7XG4gICAgfVxuICB9O1xuXG4gIENvdW50VG8ucHJvdG90eXBlLnRvZ2dsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5pbnRlcnZhbCkge1xuICAgICAgdGhpcy5zdG9wKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3RhcnQoKTtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gZm9ybWF0dGVyKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIHZhbHVlLnRvRml4ZWQob3B0aW9ucy5kZWNpbWFscyk7XG4gIH1cblxuICAkLmZuLmNvdW50VG8gPSBmdW5jdGlvbiAob3B0aW9uKSB7XG4gICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgJHRoaXMgICA9ICQodGhpcyk7XG4gICAgICB2YXIgZGF0YSAgICA9ICR0aGlzLmRhdGEoJ2NvdW50VG8nKTtcbiAgICAgIHZhciBpbml0ICAgID0gIWRhdGEgfHwgdHlwZW9mKG9wdGlvbikgPT09ICdvYmplY3QnO1xuICAgICAgdmFyIG9wdGlvbnMgPSB0eXBlb2Yob3B0aW9uKSA9PT0gJ29iamVjdCcgPyBvcHRpb24gOiB7fTtcbiAgICAgIHZhciBtZXRob2QgID0gdHlwZW9mKG9wdGlvbikgPT09ICdzdHJpbmcnID8gb3B0aW9uIDogJ3N0YXJ0JztcblxuICAgICAgaWYgKGluaXQpIHtcbiAgICAgICAgaWYgKGRhdGEpIGRhdGEuc3RvcCgpO1xuICAgICAgICAkdGhpcy5kYXRhKCdjb3VudFRvJywgZGF0YSA9IG5ldyBDb3VudFRvKHRoaXMsIG9wdGlvbnMpKTtcbiAgICAgIH1cblxuICAgICAgZGF0YVttZXRob2RdLmNhbGwoZGF0YSk7XG4gICAgfSk7XG4gIH07XG59KSk7XG4iLCIvL1RpdGxlOiBDdXN0b20gRHJvcERvd24gcGx1Z2luIGJ5IFBDXHJcbi8vRG9jdW1lbnRhdGlvbjogaHR0cDovL2Rlc2lnbndpdGhwYy5jb20vUGx1Z2lucy9kZHNsaWNrXHJcbihmdW5jdGlvbihlKXtlLmZuLmRkc2xpY2s9ZnVuY3Rpb24obCl7aWYoY1tsXSl7cmV0dXJuIGNbbF0uYXBwbHkodGhpcyxBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSkpfWVsc2V7aWYodHlwZW9mIGw9PT1cIm9iamVjdFwifHwhbCl7cmV0dXJuIGMuaW5pdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZWxzZXtlLmVycm9yKFwiTWV0aG9kIFwiK2wrXCIgZG9lcyBub3QgZXhpc3RzLlwiKX19fTt2YXIgYz17fSxkPXtkYXRhOltdLGtlZXBKU09OSXRlbXNPblRvcDpmYWxzZSx3aWR0aDoyNjAsaGVpZ2h0Om51bGwsYmFja2dyb3VuZDpcIiNlZWVcIixzZWxlY3RUZXh0OlwiXCIsZGVmYXVsdFNlbGVjdGVkSW5kZXg6bnVsbCx0cnVuY2F0ZURlc2NyaXB0aW9uOnRydWUsaW1hZ2VQb3NpdGlvbjpcImxlZnRcIixzaG93U2VsZWN0ZWRIVE1MOnRydWUsY2xpY2tPZmZUb0Nsb3NlOnRydWUsZW1iZWRDU1M6dHJ1ZSxvblNlbGVjdGVkOmZ1bmN0aW9uKCl7fX0saT0nPGRpdiBjbGFzcz1cImRkLXNlbGVjdFwiPjxpbnB1dCBjbGFzcz1cImRkLXNlbGVjdGVkLXZhbHVlXCIgdHlwZT1cImhpZGRlblwiIC8+PGEgY2xhc3M9XCJkZC1zZWxlY3RlZFwiPjwvYT48c3BhbiBjbGFzcz1cImRkLXBvaW50ZXIgZGQtcG9pbnRlci1kb3duXCI+PC9zcGFuPjwvZGl2PicsYT0nPHVsIGNsYXNzPVwiZGQtb3B0aW9uc1wiPjwvdWw+JyxiPSc8c3R5bGUgaWQ9XCJjc3MtZGRzbGlja1wiPi5kZC1zZWxlY3R7IGJvcmRlci1yYWRpdXM6MnB4OyBib3JkZXI6c29saWQgMXB4ICNjY2M7IHBvc2l0aW9uOnJlbGF0aXZlOyBjdXJzb3I6cG9pbnRlcjt9LmRkLWRlc2MgeyBjb2xvcjojYWFhOyBkaXNwbGF5OmJsb2NrOyBvdmVyZmxvdzogaGlkZGVuOyBmb250LXdlaWdodDpub3JtYWw7IGxpbmUtaGVpZ2h0OiAxLjRlbTsgfS5kZC1zZWxlY3RlZHsgb3ZlcmZsb3c6aGlkZGVuOyBkaXNwbGF5OmJsb2NrOyBwYWRkaW5nOjEwcHg7IGZvbnQtd2VpZ2h0OmJvbGQ7fS5kZC1wb2ludGVyeyB3aWR0aDowOyBoZWlnaHQ6MDsgcG9zaXRpb246YWJzb2x1dGU7IHJpZ2h0OjEwcHg7IHRvcDo1MCU7IG1hcmdpbi10b3A6LTNweDt9LmRkLXBvaW50ZXItZG93bnsgYm9yZGVyOnNvbGlkIDVweCB0cmFuc3BhcmVudDsgYm9yZGVyLXRvcDpzb2xpZCA1cHggIzAwMDsgfS5kZC1wb2ludGVyLXVwe2JvcmRlcjpzb2xpZCA1cHggdHJhbnNwYXJlbnQgIWltcG9ydGFudDsgYm9yZGVyLWJvdHRvbTpzb2xpZCA1cHggIzAwMCAhaW1wb3J0YW50OyBtYXJnaW4tdG9wOi04cHg7fS5kZC1vcHRpb25zeyBib3JkZXI6c29saWQgMXB4ICNjY2M7IGJvcmRlci10b3A6bm9uZTsgbGlzdC1zdHlsZTpub25lOyBib3gtc2hhZG93OjBweCAxcHggNXB4ICNkZGQ7IGRpc3BsYXk6bm9uZTsgcG9zaXRpb246YWJzb2x1dGU7IHotaW5kZXg6MjAwMDsgbWFyZ2luOjA7IHBhZGRpbmc6MDtiYWNrZ3JvdW5kOiNmZmY7IG92ZXJmbG93OmF1dG87fS5kZC1vcHRpb257IHBhZGRpbmc6MTBweDsgZGlzcGxheTpibG9jazsgYm9yZGVyLWJvdHRvbTpzb2xpZCAxcHggI2RkZDsgb3ZlcmZsb3c6aGlkZGVuOyB0ZXh0LWRlY29yYXRpb246bm9uZTsgY29sb3I6IzMzMzsgY3Vyc29yOnBvaW50ZXI7LXdlYmtpdC10cmFuc2l0aW9uOiBhbGwgMC4yNXMgZWFzZS1pbi1vdXQ7IC1tb3otdHJhbnNpdGlvbjogYWxsIDAuMjVzIGVhc2UtaW4tb3V0Oy1vLXRyYW5zaXRpb246IGFsbCAwLjI1cyBlYXNlLWluLW91dDstbXMtdHJhbnNpdGlvbjogYWxsIDAuMjVzIGVhc2UtaW4tb3V0OyB9LmRkLW9wdGlvbnMgPiBsaTpsYXN0LWNoaWxkID4gLmRkLW9wdGlvbnsgYm9yZGVyLWJvdHRvbTpub25lO30uZGQtb3B0aW9uOmhvdmVyeyBiYWNrZ3JvdW5kOiNmM2YzZjM7IGNvbG9yOiMwMDA7fS5kZC1zZWxlY3RlZC1kZXNjcmlwdGlvbi10cnVuY2F0ZWQgeyB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsgd2hpdGUtc3BhY2U6bm93cmFwOyB9LmRkLW9wdGlvbi1zZWxlY3RlZCB7IGJhY2tncm91bmQ6I2Y2ZjZmNjsgfS5kZC1vcHRpb24taW1hZ2UsIC5kZC1zZWxlY3RlZC1pbWFnZSB7IHZlcnRpY2FsLWFsaWduOm1pZGRsZTsgZmxvYXQ6bGVmdDsgbWFyZ2luLXJpZ2h0OjVweDsgbWF4LXdpZHRoOjY0cHg7fS5kZC1pbWFnZS1yaWdodCB7IGZsb2F0OnJpZ2h0OyBtYXJnaW4tcmlnaHQ6MTVweDsgbWFyZ2luLWxlZnQ6NXB4O30uZGQtY29udGFpbmVyeyBwb3NpdGlvbjpyZWxhdGl2ZTt94oCLIC5kZC1zZWxlY3RlZC10ZXh0IHsgZm9udC13ZWlnaHQ6Ym9sZH3igIs8L3N0eWxlPic7Yy5pbml0PWZ1bmN0aW9uKGwpe3ZhciBsPWUuZXh0ZW5kKHt9LGQsbCk7aWYoZShcIiNjc3MtZGRzbGlja1wiKS5sZW5ndGg8PTAmJmwuZW1iZWRDU1Mpe2UoYikuYXBwZW5kVG8oXCJoZWFkXCIpfXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgcD1lKHRoaXMpLHE9cC5kYXRhKFwiZGRzbGlja1wiKTtpZighcSl7dmFyIG49W10sbz1sLmRhdGE7cC5maW5kKFwib3B0aW9uXCIpLmVhY2goZnVuY3Rpb24oKXt2YXIgdz1lKHRoaXMpLHY9dy5kYXRhKCk7bi5wdXNoKHt0ZXh0OmUudHJpbSh3LnRleHQoKSksdmFsdWU6dy52YWwoKSxzZWxlY3RlZDp3LmlzKFwiOnNlbGVjdGVkXCIpLGRlc2NyaXB0aW9uOnYuZGVzY3JpcHRpb24saW1hZ2VTcmM6di5pbWFnZXNyY30pfSk7aWYobC5rZWVwSlNPTkl0ZW1zT25Ub3Ape2UubWVyZ2UobC5kYXRhLG4pfWVsc2V7bC5kYXRhPWUubWVyZ2UobixsLmRhdGEpfXZhciBtPXAscz1lKCc8ZGl2IGlkPVwiJytwLmF0dHIoXCJpZFwiKSsnXCI+PC9kaXY+Jyk7cC5yZXBsYWNlV2l0aChzKTtwPXM7cC5hZGRDbGFzcyhcImRkLWNvbnRhaW5lclwiKS5hcHBlbmQoaSkuYXBwZW5kKGEpO3ZhciBuPXAuZmluZChcIi5kZC1zZWxlY3RcIiksdT1wLmZpbmQoXCIuZGQtb3B0aW9uc1wiKTt1LmNzcyh7d2lkdGg6bC53aWR0aH0pO24uY3NzKHt3aWR0aDpsLndpZHRoLGJhY2tncm91bmQ6bC5iYWNrZ3JvdW5kfSk7cC5jc3Moe3dpZHRoOmwud2lkdGh9KTtpZihsLmhlaWdodCE9bnVsbCl7dS5jc3Moe2hlaWdodDpsLmhlaWdodCxvdmVyZmxvdzpcImF1dG9cIn0pfWUuZWFjaChsLmRhdGEsZnVuY3Rpb24odix3KXtpZih3LnNlbGVjdGVkKXtsLmRlZmF1bHRTZWxlY3RlZEluZGV4PXZ9dS5hcHBlbmQoJzxsaT48YSBjbGFzcz1cImRkLW9wdGlvblwiPicrKHcudmFsdWU/JyA8aW5wdXQgY2xhc3M9XCJkZC1vcHRpb24tdmFsdWVcIiB0eXBlPVwiaGlkZGVuXCIgdmFsdWU9XCInK3cudmFsdWUrJ1wiIC8+JzpcIlwiKSsody5pbWFnZVNyYz8nIDxpbWcgY2xhc3M9XCJkZC1vcHRpb24taW1hZ2UnKyhsLmltYWdlUG9zaXRpb249PVwicmlnaHRcIj9cIiBkZC1pbWFnZS1yaWdodFwiOlwiXCIpKydcIiBzcmM9XCInK3cuaW1hZ2VTcmMrJ1wiIC8+JzpcIlwiKSsody50ZXh0PycgPGxhYmVsIGNsYXNzPVwiZGQtb3B0aW9uLXRleHRcIj4nK3cudGV4dCtcIjwvbGFiZWw+XCI6XCJcIikrKHcuZGVzY3JpcHRpb24/JyA8c21hbGwgY2xhc3M9XCJkZC1vcHRpb24tZGVzY3JpcHRpb24gZGQtZGVzY1wiPicrdy5kZXNjcmlwdGlvbitcIjwvc21hbGw+XCI6XCJcIikrXCI8L2E+PC9saT5cIil9KTt2YXIgdD17c2V0dGluZ3M6bCxvcmlnaW5hbDptLHNlbGVjdGVkSW5kZXg6LTEsc2VsZWN0ZWRJdGVtOm51bGwsc2VsZWN0ZWREYXRhOm51bGx9O3AuZGF0YShcImRkc2xpY2tcIix0KTtpZihsLnNlbGVjdFRleHQubGVuZ3RoPjAmJmwuZGVmYXVsdFNlbGVjdGVkSW5kZXg9PW51bGwpe3AuZmluZChcIi5kZC1zZWxlY3RlZFwiKS5odG1sKGwuc2VsZWN0VGV4dCl9ZWxzZXt2YXIgcj0obC5kZWZhdWx0U2VsZWN0ZWRJbmRleCE9bnVsbCYmbC5kZWZhdWx0U2VsZWN0ZWRJbmRleD49MCYmbC5kZWZhdWx0U2VsZWN0ZWRJbmRleDxsLmRhdGEubGVuZ3RoKT9sLmRlZmF1bHRTZWxlY3RlZEluZGV4OjA7aihwLHIpfXAuZmluZChcIi5kZC1zZWxlY3RcIikub24oXCJjbGljay5kZHNsaWNrXCIsZnVuY3Rpb24oKXtmKHApfSk7cC5maW5kKFwiLmRkLW9wdGlvblwiKS5vbihcImNsaWNrLmRkc2xpY2tcIixmdW5jdGlvbigpe2oocCxlKHRoaXMpLmNsb3Nlc3QoXCJsaVwiKS5pbmRleCgpKX0pO2lmKGwuY2xpY2tPZmZUb0Nsb3NlKXt1LmFkZENsYXNzKFwiZGQtY2xpY2stb2ZmLWNsb3NlXCIpO3Aub24oXCJjbGljay5kZHNsaWNrXCIsZnVuY3Rpb24odil7di5zdG9wUHJvcGFnYXRpb24oKX0pO2UoXCJib2R5XCIpLm9uKFwiY2xpY2tcIixmdW5jdGlvbigpe2UoXCIuZGQtY2xpY2stb2ZmLWNsb3NlXCIpLnNsaWRlVXAoNTApLnNpYmxpbmdzKFwiLmRkLXNlbGVjdFwiKS5maW5kKFwiLmRkLXBvaW50ZXJcIikucmVtb3ZlQ2xhc3MoXCJkZC1wb2ludGVyLXVwXCIpfSl9fX0pfTtjLnNlbGVjdD1mdW5jdGlvbihsKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7aWYobC5pbmRleCE9PXVuZGVmaW5lZCl7aihlKHRoaXMpLGwuaW5kZXgpfX0pfTtjLm9wZW49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIG09ZSh0aGlzKSxsPW0uZGF0YShcImRkc2xpY2tcIik7aWYobCl7ZihtKX19KX07Yy5jbG9zZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgbT1lKHRoaXMpLGw9bS5kYXRhKFwiZGRzbGlja1wiKTtpZihsKXtrKG0pfX0pfTtjLmRlc3Ryb3k9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIG49ZSh0aGlzKSxtPW4uZGF0YShcImRkc2xpY2tcIik7aWYobSl7dmFyIGw9bS5vcmlnaW5hbDtuLnJlbW92ZURhdGEoXCJkZHNsaWNrXCIpLnVuYmluZChcIi5kZHNsaWNrXCIpLnJlcGxhY2VXaXRoKGwpfX0pfTtmdW5jdGlvbiBqKHEscyl7dmFyIHU9cS5kYXRhKFwiZGRzbGlja1wiKTt2YXIgcj1xLmZpbmQoXCIuZGQtc2VsZWN0ZWRcIiksbj1yLnNpYmxpbmdzKFwiLmRkLXNlbGVjdGVkLXZhbHVlXCIpLHY9cS5maW5kKFwiLmRkLW9wdGlvbnNcIiksbD1yLnNpYmxpbmdzKFwiLmRkLXBvaW50ZXJcIikscD1xLmZpbmQoXCIuZGQtb3B0aW9uXCIpLmVxKHMpLG09cC5jbG9zZXN0KFwibGlcIiksbz11LnNldHRpbmdzLHQ9dS5zZXR0aW5ncy5kYXRhW3NdO3EuZmluZChcIi5kZC1vcHRpb25cIikucmVtb3ZlQ2xhc3MoXCJkZC1vcHRpb24tc2VsZWN0ZWRcIik7cC5hZGRDbGFzcyhcImRkLW9wdGlvbi1zZWxlY3RlZFwiKTt1LnNlbGVjdGVkSW5kZXg9czt1LnNlbGVjdGVkSXRlbT1tO3Uuc2VsZWN0ZWREYXRhPXQ7aWYoby5zaG93U2VsZWN0ZWRIVE1MKXtyLmh0bWwoKHQuaW1hZ2VTcmM/JzxpbWcgY2xhc3M9XCJkZC1zZWxlY3RlZC1pbWFnZScrKG8uaW1hZ2VQb3NpdGlvbj09XCJyaWdodFwiP1wiIGRkLWltYWdlLXJpZ2h0XCI6XCJcIikrJ1wiIHNyYz1cIicrdC5pbWFnZVNyYysnXCIgLz4nOlwiXCIpKyh0LnRleHQ/JzxsYWJlbCBjbGFzcz1cImRkLXNlbGVjdGVkLXRleHRcIj4nK3QudGV4dCtcIjwvbGFiZWw+XCI6XCJcIikrKHQuZGVzY3JpcHRpb24/JzxzbWFsbCBjbGFzcz1cImRkLXNlbGVjdGVkLWRlc2NyaXB0aW9uIGRkLWRlc2MnKyhvLnRydW5jYXRlRGVzY3JpcHRpb24/XCIgZGQtc2VsZWN0ZWQtZGVzY3JpcHRpb24tdHJ1bmNhdGVkXCI6XCJcIikrJ1wiID4nK3QuZGVzY3JpcHRpb24rXCI8L3NtYWxsPlwiOlwiXCIpKX1lbHNle3IuaHRtbCh0LnRleHQpfW4udmFsKHQudmFsdWUpO3Uub3JpZ2luYWwudmFsKHQudmFsdWUpO3EuZGF0YShcImRkc2xpY2tcIix1KTtrKHEpO2cocSk7aWYodHlwZW9mIG8ub25TZWxlY3RlZD09XCJmdW5jdGlvblwiKXtvLm9uU2VsZWN0ZWQuY2FsbCh0aGlzLHUpfX1mdW5jdGlvbiBmKHApe3ZhciBvPXAuZmluZChcIi5kZC1zZWxlY3RcIiksbT1vLnNpYmxpbmdzKFwiLmRkLW9wdGlvbnNcIiksbD1vLmZpbmQoXCIuZGQtcG9pbnRlclwiKSxuPW0uaXMoXCI6dmlzaWJsZVwiKTtlKFwiLmRkLWNsaWNrLW9mZi1jbG9zZVwiKS5ub3QobSkuc2xpZGVVcCg1MCk7ZShcIi5kZC1wb2ludGVyXCIpLnJlbW92ZUNsYXNzKFwiZGQtcG9pbnRlci11cFwiKTtpZihuKXttLnNsaWRlVXAoXCJmYXN0XCIpO2wucmVtb3ZlQ2xhc3MoXCJkZC1wb2ludGVyLXVwXCIpfWVsc2V7bS5zbGlkZURvd24oXCJmYXN0XCIpO2wuYWRkQ2xhc3MoXCJkZC1wb2ludGVyLXVwXCIpfWgocCl9ZnVuY3Rpb24gayhsKXtsLmZpbmQoXCIuZGQtb3B0aW9uc1wiKS5zbGlkZVVwKDUwKTtsLmZpbmQoXCIuZGQtcG9pbnRlclwiKS5yZW1vdmVDbGFzcyhcImRkLXBvaW50ZXItdXBcIikucmVtb3ZlQ2xhc3MoXCJkZC1wb2ludGVyLXVwXCIpfWZ1bmN0aW9uIGcobyl7dmFyIG49by5maW5kKFwiLmRkLXNlbGVjdFwiKS5jc3MoXCJoZWlnaHRcIik7dmFyIG09by5maW5kKFwiLmRkLXNlbGVjdGVkLWRlc2NyaXB0aW9uXCIpO3ZhciBsPW8uZmluZChcIi5kZC1zZWxlY3RlZC1pbWFnZVwiKTtpZihtLmxlbmd0aDw9MCYmbC5sZW5ndGg+MCl7by5maW5kKFwiLmRkLXNlbGVjdGVkLXRleHRcIikuY3NzKFwibGluZUhlaWdodFwiLG4pfX1mdW5jdGlvbiBoKGwpe2wuZmluZChcIi5kZC1vcHRpb25cIikuZWFjaChmdW5jdGlvbigpe3ZhciBwPWUodGhpcyk7dmFyIG49cC5jc3MoXCJoZWlnaHRcIik7dmFyIG89cC5maW5kKFwiLmRkLW9wdGlvbi1kZXNjcmlwdGlvblwiKTt2YXIgbT1sLmZpbmQoXCIuZGQtb3B0aW9uLWltYWdlXCIpO2lmKG8ubGVuZ3RoPD0wJiZtLmxlbmd0aD4wKXtwLmZpbmQoXCIuZGQtb3B0aW9uLXRleHRcIikuY3NzKFwibGluZUhlaWdodFwiLG4pfX0pfX0pKGpRdWVyeSk7IiwiLypcclxuICogalF1ZXJ5IEVhc2luZyB2MS40LjAgLSBodHRwOi8vZ3NnZC5jby51ay9zYW5kYm94L2pxdWVyeS9lYXNpbmcvXHJcbiAqIE9wZW4gc291cmNlIHVuZGVyIHRoZSBCU0QgTGljZW5zZS5cclxuICogQ29weXJpZ2h0IMKpIDIwMDggR2VvcmdlIE1jR2lubGV5IFNtaXRoXHJcbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqIGh0dHBzOi8vcmF3LmdpdGh1Yi5jb20vZ2RzbWl0aC9qcXVlcnktZWFzaW5nL21hc3Rlci9MSUNFTlNFXHJcbiovXHJcbiFmdW5jdGlvbihuKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImpxdWVyeVwiXSxmdW5jdGlvbihlKXtyZXR1cm4gbihlKX0pOlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUuZXhwb3J0cz9leHBvcnRzPW4ocmVxdWlyZShcImpxdWVyeVwiKSk6bihqUXVlcnkpfShmdW5jdGlvbihuKXtmdW5jdGlvbiBlKG4pe3ZhciBlPTcuNTYyNSx0PTIuNzU7cmV0dXJuIG48MS90P2UqbipuOm48Mi90P2UqKG4tPTEuNS90KSpuKy43NTpuPDIuNS90P2UqKG4tPTIuMjUvdCkqbisuOTM3NTplKihuLT0yLjYyNS90KSpuKy45ODQzNzV9bi5lYXNpbmcuanN3aW5nPW4uZWFzaW5nLnN3aW5nO3ZhciB0PU1hdGgucG93LHU9TWF0aC5zcXJ0LHI9TWF0aC5zaW4saT1NYXRoLmNvcyxhPU1hdGguUEksYz0xLjcwMTU4LG89MS41MjUqYyxzPTIqYS8zLGY9MiphLzQuNTtuLmV4dGVuZChuLmVhc2luZyx7ZGVmOlwiZWFzZU91dFF1YWRcIixzd2luZzpmdW5jdGlvbihlKXtyZXR1cm4gbi5lYXNpbmdbbi5lYXNpbmcuZGVmXShlKX0sZWFzZUluUXVhZDpmdW5jdGlvbihuKXtyZXR1cm4gbipufSxlYXNlT3V0UXVhZDpmdW5jdGlvbihuKXtyZXR1cm4gMS0oMS1uKSooMS1uKX0sZWFzZUluT3V0UXVhZDpmdW5jdGlvbihuKXtyZXR1cm4gbjwuNT8yKm4qbjoxLXQoLTIqbisyLDIpLzJ9LGVhc2VJbkN1YmljOmZ1bmN0aW9uKG4pe3JldHVybiBuKm4qbn0sZWFzZU91dEN1YmljOmZ1bmN0aW9uKG4pe3JldHVybiAxLXQoMS1uLDMpfSxlYXNlSW5PdXRDdWJpYzpmdW5jdGlvbihuKXtyZXR1cm4gbjwuNT80Km4qbipuOjEtdCgtMipuKzIsMykvMn0sZWFzZUluUXVhcnQ6ZnVuY3Rpb24obil7cmV0dXJuIG4qbipuKm59LGVhc2VPdXRRdWFydDpmdW5jdGlvbihuKXtyZXR1cm4gMS10KDEtbiw0KX0sZWFzZUluT3V0UXVhcnQ6ZnVuY3Rpb24obil7cmV0dXJuIG48LjU/OCpuKm4qbipuOjEtdCgtMipuKzIsNCkvMn0sZWFzZUluUXVpbnQ6ZnVuY3Rpb24obil7cmV0dXJuIG4qbipuKm4qbn0sZWFzZU91dFF1aW50OmZ1bmN0aW9uKG4pe3JldHVybiAxLXQoMS1uLDUpfSxlYXNlSW5PdXRRdWludDpmdW5jdGlvbihuKXtyZXR1cm4gbjwuNT8xNipuKm4qbipuKm46MS10KC0yKm4rMiw1KS8yfSxlYXNlSW5TaW5lOmZ1bmN0aW9uKG4pe3JldHVybiAxLWkobiphLzIpfSxlYXNlT3V0U2luZTpmdW5jdGlvbihuKXtyZXR1cm4gcihuKmEvMil9LGVhc2VJbk91dFNpbmU6ZnVuY3Rpb24obil7cmV0dXJuLShpKGEqbiktMSkvMn0sZWFzZUluRXhwbzpmdW5jdGlvbihuKXtyZXR1cm4gMD09PW4/MDp0KDIsMTAqbi0xMCl9LGVhc2VPdXRFeHBvOmZ1bmN0aW9uKG4pe3JldHVybiAxPT09bj8xOjEtdCgyLC0xMCpuKX0sZWFzZUluT3V0RXhwbzpmdW5jdGlvbihuKXtyZXR1cm4gMD09PW4/MDoxPT09bj8xOm48LjU/dCgyLDIwKm4tMTApLzI6KDItdCgyLC0yMCpuKzEwKSkvMn0sZWFzZUluQ2lyYzpmdW5jdGlvbihuKXtyZXR1cm4gMS11KDEtdChuLDIpKX0sZWFzZU91dENpcmM6ZnVuY3Rpb24obil7cmV0dXJuIHUoMS10KG4tMSwyKSl9LGVhc2VJbk91dENpcmM6ZnVuY3Rpb24obil7cmV0dXJuIG48LjU/KDEtdSgxLXQoMipuLDIpKSkvMjoodSgxLXQoLTIqbisyLDIpKSsxKS8yfSxlYXNlSW5FbGFzdGljOmZ1bmN0aW9uKG4pe3JldHVybiAwPT09bj8wOjE9PT1uPzE6LXQoMiwxMCpuLTEwKSpyKCgxMCpuLTEwLjc1KSpzKX0sZWFzZU91dEVsYXN0aWM6ZnVuY3Rpb24obil7cmV0dXJuIDA9PT1uPzA6MT09PW4/MTp0KDIsLTEwKm4pKnIoKDEwKm4tLjc1KSpzKSsxfSxlYXNlSW5PdXRFbGFzdGljOmZ1bmN0aW9uKG4pe3JldHVybiAwPT09bj8wOjE9PT1uPzE6bjwuNT8tKHQoMiwyMCpuLTEwKSpyKCgyMCpuLTExLjEyNSkqZikpLzI6dCgyLC0yMCpuKzEwKSpyKCgyMCpuLTExLjEyNSkqZikvMisxfSxlYXNlSW5CYWNrOmZ1bmN0aW9uKG4pe3JldHVybihjKzEpKm4qbipuLWMqbipufSxlYXNlT3V0QmFjazpmdW5jdGlvbihuKXtyZXR1cm4gMSsoYysxKSp0KG4tMSwzKStjKnQobi0xLDIpfSxlYXNlSW5PdXRCYWNrOmZ1bmN0aW9uKG4pe3JldHVybiBuPC41P3QoMipuLDIpKig3LjE4OTgxOSpuLW8pLzI6KHQoMipuLTIsMikqKChvKzEpKigyKm4tMikrbykrMikvMn0sZWFzZUluQm91bmNlOmZ1bmN0aW9uKG4pe3JldHVybiAxLWUoMS1uKX0sZWFzZU91dEJvdW5jZTplLGVhc2VJbk91dEJvdW5jZTpmdW5jdGlvbihuKXtyZXR1cm4gbjwuNT8oMS1lKDEtMipuKSkvMjooMStlKDIqbi0xKSkvMn19KX0pOyIsIi8qKiFcclxuICogZWFzeS1waWUtY2hhcnRcclxuICogTGlnaHR3ZWlnaHQgcGx1Z2luIHRvIHJlbmRlciBzaW1wbGUsIGFuaW1hdGVkIGFuZCByZXRpbmEgb3B0aW1pemVkIHBpZSBjaGFydHNcclxuICpcclxuICogQGxpY2Vuc2UgXHJcbiAqIEBhdXRob3IgUm9iZXJ0IEZsZWlzY2htYW5uIDxyZW5kcm84N0BnbWFpbC5jb20+IChodHRwOi8vcm9iZXJ0LWZsZWlzY2htYW5uLmRlKVxyXG4gKiBAdmVyc2lvbiAyLjEuN1xyXG4gKiovXHJcbiFmdW5jdGlvbihhLGIpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW1wianF1ZXJ5XCJdLGZ1bmN0aW9uKGEpe3JldHVybiBiKGEpfSk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9YihyZXF1aXJlKFwianF1ZXJ5XCIpKTpiKGpRdWVyeSl9KHRoaXMsZnVuY3Rpb24oYSl7dmFyIGI9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7YS5hcHBlbmRDaGlsZChkKSxcIm9iamVjdFwiPT10eXBlb2YgR192bWxDYW52YXNNYW5hZ2VyJiZHX3ZtbENhbnZhc01hbmFnZXIuaW5pdEVsZW1lbnQoZCk7dmFyIGU9ZC5nZXRDb250ZXh0KFwiMmRcIik7ZC53aWR0aD1kLmhlaWdodD1iLnNpemU7dmFyIGY9MTt3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbz4xJiYoZj13aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyxkLnN0eWxlLndpZHRoPWQuc3R5bGUuaGVpZ2h0PVtiLnNpemUsXCJweFwiXS5qb2luKFwiXCIpLGQud2lkdGg9ZC5oZWlnaHQ9Yi5zaXplKmYsZS5zY2FsZShmLGYpKSxlLnRyYW5zbGF0ZShiLnNpemUvMixiLnNpemUvMiksZS5yb3RhdGUoKC0wLjUrYi5yb3RhdGUvMTgwKSpNYXRoLlBJKTt2YXIgZz0oYi5zaXplLWIubGluZVdpZHRoKS8yO2Iuc2NhbGVDb2xvciYmYi5zY2FsZUxlbmd0aCYmKGctPWIuc2NhbGVMZW5ndGgrMiksRGF0ZS5ub3c9RGF0ZS5ub3d8fGZ1bmN0aW9uKCl7cmV0dXJuK25ldyBEYXRlfTt2YXIgaD1mdW5jdGlvbihhLGIsYyl7Yz1NYXRoLm1pbihNYXRoLm1heCgtMSxjfHwwKSwxKTt2YXIgZD0wPj1jPyEwOiExO2UuYmVnaW5QYXRoKCksZS5hcmMoMCwwLGcsMCwyKk1hdGguUEkqYyxkKSxlLnN0cm9rZVN0eWxlPWEsZS5saW5lV2lkdGg9YixlLnN0cm9rZSgpfSxpPWZ1bmN0aW9uKCl7dmFyIGEsYztlLmxpbmVXaWR0aD0xLGUuZmlsbFN0eWxlPWIuc2NhbGVDb2xvcixlLnNhdmUoKTtmb3IodmFyIGQ9MjQ7ZD4wOy0tZClkJTY9PT0wPyhjPWIuc2NhbGVMZW5ndGgsYT0wKTooYz0uNipiLnNjYWxlTGVuZ3RoLGE9Yi5zY2FsZUxlbmd0aC1jKSxlLmZpbGxSZWN0KC1iLnNpemUvMithLDAsYywxKSxlLnJvdGF0ZShNYXRoLlBJLzEyKTtlLnJlc3RvcmUoKX0saj1mdW5jdGlvbigpe3JldHVybiB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbihhKXt3aW5kb3cuc2V0VGltZW91dChhLDFlMy82MCl9fSgpLGs9ZnVuY3Rpb24oKXtiLnNjYWxlQ29sb3ImJmkoKSxiLnRyYWNrQ29sb3ImJmgoYi50cmFja0NvbG9yLGIudHJhY2tXaWR0aHx8Yi5saW5lV2lkdGgsMSl9O3RoaXMuZ2V0Q2FudmFzPWZ1bmN0aW9uKCl7cmV0dXJuIGR9LHRoaXMuZ2V0Q3R4PWZ1bmN0aW9uKCl7cmV0dXJuIGV9LHRoaXMuY2xlYXI9ZnVuY3Rpb24oKXtlLmNsZWFyUmVjdChiLnNpemUvLTIsYi5zaXplLy0yLGIuc2l6ZSxiLnNpemUpfSx0aGlzLmRyYXc9ZnVuY3Rpb24oYSl7Yi5zY2FsZUNvbG9yfHxiLnRyYWNrQ29sb3I/ZS5nZXRJbWFnZURhdGEmJmUucHV0SW1hZ2VEYXRhP2M/ZS5wdXRJbWFnZURhdGEoYywwLDApOihrKCksYz1lLmdldEltYWdlRGF0YSgwLDAsYi5zaXplKmYsYi5zaXplKmYpKToodGhpcy5jbGVhcigpLGsoKSk6dGhpcy5jbGVhcigpLGUubGluZUNhcD1iLmxpbmVDYXA7dmFyIGQ7ZD1cImZ1bmN0aW9uXCI9PXR5cGVvZiBiLmJhckNvbG9yP2IuYmFyQ29sb3IoYSk6Yi5iYXJDb2xvcixoKGQsYi5saW5lV2lkdGgsYS8xMDApfS5iaW5kKHRoaXMpLHRoaXMuYW5pbWF0ZT1mdW5jdGlvbihhLGMpe3ZhciBkPURhdGUubm93KCk7Yi5vblN0YXJ0KGEsYyk7dmFyIGU9ZnVuY3Rpb24oKXt2YXIgZj1NYXRoLm1pbihEYXRlLm5vdygpLWQsYi5hbmltYXRlLmR1cmF0aW9uKSxnPWIuZWFzaW5nKHRoaXMsZixhLGMtYSxiLmFuaW1hdGUuZHVyYXRpb24pO3RoaXMuZHJhdyhnKSxiLm9uU3RlcChhLGMsZyksZj49Yi5hbmltYXRlLmR1cmF0aW9uP2Iub25TdG9wKGEsYyk6aihlKX0uYmluZCh0aGlzKTtqKGUpfS5iaW5kKHRoaXMpfSxjPWZ1bmN0aW9uKGEsYyl7dmFyIGQ9e2JhckNvbG9yOlwiI2VmMWUyNVwiLHRyYWNrQ29sb3I6XCIjZjlmOWY5XCIsc2NhbGVDb2xvcjpcIiNkZmUwZTBcIixzY2FsZUxlbmd0aDo1LGxpbmVDYXA6XCJyb3VuZFwiLGxpbmVXaWR0aDozLHRyYWNrV2lkdGg6dm9pZCAwLHNpemU6MTEwLHJvdGF0ZTowLGFuaW1hdGU6e2R1cmF0aW9uOjFlMyxlbmFibGVkOiEwfSxlYXNpbmc6ZnVuY3Rpb24oYSxiLGMsZCxlKXtyZXR1cm4gYi89ZS8yLDE+Yj9kLzIqYipiK2M6LWQvMiooLS1iKihiLTIpLTEpK2N9LG9uU3RhcnQ6ZnVuY3Rpb24oYSxiKXt9LG9uU3RlcDpmdW5jdGlvbihhLGIsYyl7fSxvblN0b3A6ZnVuY3Rpb24oYSxiKXt9fTtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgYilkLnJlbmRlcmVyPWI7ZWxzZXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgU1ZHUmVuZGVyZXIpdGhyb3cgbmV3IEVycm9yKFwiUGxlYXNlIGxvYWQgZWl0aGVyIHRoZSBTVkctIG9yIHRoZSBDYW52YXNSZW5kZXJlclwiKTtkLnJlbmRlcmVyPVNWR1JlbmRlcmVyfXZhciBlPXt9LGY9MCxnPWZ1bmN0aW9uKCl7dGhpcy5lbD1hLHRoaXMub3B0aW9ucz1lO2Zvcih2YXIgYiBpbiBkKWQuaGFzT3duUHJvcGVydHkoYikmJihlW2JdPWMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBjW2JdP2NbYl06ZFtiXSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBlW2JdJiYoZVtiXT1lW2JdLmJpbmQodGhpcykpKTtcInN0cmluZ1wiPT10eXBlb2YgZS5lYXNpbmcmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBqUXVlcnkmJmpRdWVyeS5pc0Z1bmN0aW9uKGpRdWVyeS5lYXNpbmdbZS5lYXNpbmddKT9lLmVhc2luZz1qUXVlcnkuZWFzaW5nW2UuZWFzaW5nXTplLmVhc2luZz1kLmVhc2luZyxcIm51bWJlclwiPT10eXBlb2YgZS5hbmltYXRlJiYoZS5hbmltYXRlPXtkdXJhdGlvbjplLmFuaW1hdGUsZW5hYmxlZDohMH0pLFwiYm9vbGVhblwiIT10eXBlb2YgZS5hbmltYXRlfHxlLmFuaW1hdGV8fChlLmFuaW1hdGU9e2R1cmF0aW9uOjFlMyxlbmFibGVkOmUuYW5pbWF0ZX0pLHRoaXMucmVuZGVyZXI9bmV3IGUucmVuZGVyZXIoYSxlKSx0aGlzLnJlbmRlcmVyLmRyYXcoZiksYS5kYXRhc2V0JiZhLmRhdGFzZXQucGVyY2VudD90aGlzLnVwZGF0ZShwYXJzZUZsb2F0KGEuZGF0YXNldC5wZXJjZW50KSk6YS5nZXRBdHRyaWJ1dGUmJmEuZ2V0QXR0cmlidXRlKFwiZGF0YS1wZXJjZW50XCIpJiZ0aGlzLnVwZGF0ZShwYXJzZUZsb2F0KGEuZ2V0QXR0cmlidXRlKFwiZGF0YS1wZXJjZW50XCIpKSl9LmJpbmQodGhpcyk7dGhpcy51cGRhdGU9ZnVuY3Rpb24oYSl7cmV0dXJuIGE9cGFyc2VGbG9hdChhKSxlLmFuaW1hdGUuZW5hYmxlZD90aGlzLnJlbmRlcmVyLmFuaW1hdGUoZixhKTp0aGlzLnJlbmRlcmVyLmRyYXcoYSksZj1hLHRoaXN9LmJpbmQodGhpcyksdGhpcy5kaXNhYmxlQW5pbWF0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIGUuYW5pbWF0ZS5lbmFibGVkPSExLHRoaXN9LHRoaXMuZW5hYmxlQW5pbWF0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIGUuYW5pbWF0ZS5lbmFibGVkPSEwLHRoaXN9LGcoKX07YS5mbi5lYXN5UGllQ2hhcnQ9ZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBkO2EuZGF0YSh0aGlzLFwiZWFzeVBpZUNoYXJ0XCIpfHwoZD1hLmV4dGVuZCh7fSxiLGEodGhpcykuZGF0YSgpKSxhLmRhdGEodGhpcyxcImVhc3lQaWVDaGFydFwiLG5ldyBjKHRoaXMsZCkpKX0pfX0pOyIsIiFmdW5jdGlvbihlKXtmdW5jdGlvbiBvKCl7ZSh3aW5kb3cpLmxvYWQocyksZSh3aW5kb3cpLm9uKFwicmVkcmF3XCIsZnVuY3Rpb24oKXtzd2l0Y2hlZD0hMSxzKCl9KSxlKHdpbmRvdykub24oXCJyZXNpemVcIixzKX1mdW5jdGlvbiBzKCl7dy5kcmF3KCksdi5kcmF3KCksYi5kcmF3KCksZi5kcmF3KCl9ZnVuY3Rpb24gcihlKXtyZXR1cm4gTWF0aC5QSS8xODAqZS1NYXRoLlBJLzE4MCo5MH1mdW5jdGlvbiB0KCl7aT17dG90YWw6TWF0aC5mbG9vcigoZC5lbmQtZC5zdGFydCkvODY0MDApLGRheXM6TWF0aC5mbG9vcigoZC5lbmQtZC5ub3cpLzg2NDAwKSxob3VyczoyNC1NYXRoLmZsb29yKChkLmVuZC1kLm5vdyklODY0MDAvMzYwMCksbWludXRlczo2MC1NYXRoLmZsb29yKChkLmVuZC1kLm5vdyklODY0MDAlMzYwMC82MCksc2Vjb25kczo2MC1NYXRoLmZsb29yKChkLmVuZC1kLm5vdyklODY0MDAlMzYwMCU2MCl9fWZ1bmN0aW9uIG4oKXt2YXIgbz1lKFwiI1wiK2Quc2VsZWN0b3JzLmNhbnZhc19zZWNvbmRzKS53aWR0aCgpLHM9bmV3IEtpbmV0aWMuU3RhZ2Uoe2NvbnRhaW5lcjpkLnNlbGVjdG9ycy5jYW52YXNfc2Vjb25kcyx3aWR0aDpvLGhlaWdodDpvfSk7Yz1uZXcgS2luZXRpYy5TaGFwZSh7ZHJhd0Z1bmM6ZnVuY3Rpb24obyl7dmFyIHM9ZShcIiNcIitkLnNlbGVjdG9ycy5jYW52YXNfc2Vjb25kcykud2lkdGgoKSx0PXMvMi1kLnNlY29uZHMuYm9yZGVyV2lkdGgvMixuPXMvMixhPXMvMjtvLmJlZ2luUGF0aCgpLG8uYXJjKG4sYSx0LHIoMCkscig2Kmkuc2Vjb25kcykpLG8uZmlsbFN0cm9rZVNoYXBlKHRoaXMpLGUoZC5zZWxlY3RvcnMudmFsdWVfc2Vjb25kcykuaHRtbCg2MC1pLnNlY29uZHMpfSxzdHJva2U6ZC5zZWNvbmRzLmJvcmRlckNvbG9yLHN0cm9rZVdpZHRoOmQuc2Vjb25kcy5ib3JkZXJXaWR0aH0pLHc9bmV3IEtpbmV0aWMuTGF5ZXIsdy5hZGQoYykscy5hZGQodyk7dmFyIHQ9ZShcIiNcIitkLnNlbGVjdG9ycy5jYW52YXNfbWludXRlcykud2lkdGgoKSxuPW5ldyBLaW5ldGljLlN0YWdlKHtjb250YWluZXI6ZC5zZWxlY3RvcnMuY2FudmFzX21pbnV0ZXMsd2lkdGg6dCxoZWlnaHQ6dH0pO2g9bmV3IEtpbmV0aWMuU2hhcGUoe2RyYXdGdW5jOmZ1bmN0aW9uKG8pe3ZhciBzPWUoXCIjXCIrZC5zZWxlY3RvcnMuY2FudmFzX21pbnV0ZXMpLndpZHRoKCksdD1zLzItZC5taW51dGVzLmJvcmRlcldpZHRoLzIsbj1zLzIsYT1zLzI7by5iZWdpblBhdGgoKSxvLmFyYyhuLGEsdCxyKDApLHIoNippLm1pbnV0ZXMpKSxvLmZpbGxTdHJva2VTaGFwZSh0aGlzKSxlKGQuc2VsZWN0b3JzLnZhbHVlX21pbnV0ZXMpLmh0bWwoNjAtaS5taW51dGVzKX0sc3Ryb2tlOmQubWludXRlcy5ib3JkZXJDb2xvcixzdHJva2VXaWR0aDpkLm1pbnV0ZXMuYm9yZGVyV2lkdGh9KSx2PW5ldyBLaW5ldGljLkxheWVyLHYuYWRkKGgpLG4uYWRkKHYpO3ZhciBhPWUoXCIjXCIrZC5zZWxlY3RvcnMuY2FudmFzX2hvdXJzKS53aWR0aCgpLHk9bmV3IEtpbmV0aWMuU3RhZ2Uoe2NvbnRhaW5lcjpkLnNlbGVjdG9ycy5jYW52YXNfaG91cnMsd2lkdGg6YSxoZWlnaHQ6YX0pO2w9bmV3IEtpbmV0aWMuU2hhcGUoe2RyYXdGdW5jOmZ1bmN0aW9uKG8pe3ZhciBzPWUoXCIjXCIrZC5zZWxlY3RvcnMuY2FudmFzX2hvdXJzKS53aWR0aCgpLHQ9cy8yLWQuaG91cnMuYm9yZGVyV2lkdGgvMixuPXMvMixhPXMvMjtvLmJlZ2luUGF0aCgpLG8uYXJjKG4sYSx0LHIoMCkscigzNjAqaS5ob3Vycy8yNCkpLG8uZmlsbFN0cm9rZVNoYXBlKHRoaXMpLGUoZC5zZWxlY3RvcnMudmFsdWVfaG91cnMpLmh0bWwoMjQtaS5ob3Vycyl9LHN0cm9rZTpkLmhvdXJzLmJvcmRlckNvbG9yLHN0cm9rZVdpZHRoOmQuaG91cnMuYm9yZGVyV2lkdGh9KSxiPW5ldyBLaW5ldGljLkxheWVyLGIuYWRkKGwpLHkuYWRkKGIpO3ZhciBfPWUoXCIjXCIrZC5zZWxlY3RvcnMuY2FudmFzX2RheXMpLndpZHRoKCksbT1uZXcgS2luZXRpYy5TdGFnZSh7Y29udGFpbmVyOmQuc2VsZWN0b3JzLmNhbnZhc19kYXlzLHdpZHRoOl8saGVpZ2h0Ol99KTt1PW5ldyBLaW5ldGljLlNoYXBlKHtkcmF3RnVuYzpmdW5jdGlvbihvKXt2YXIgcz1lKFwiI1wiK2Quc2VsZWN0b3JzLmNhbnZhc19kYXlzKS53aWR0aCgpLHQ9cy8yLWQuZGF5cy5ib3JkZXJXaWR0aC8yLG49cy8yLGE9cy8yO28uYmVnaW5QYXRoKCksMD09aS50b3RhbD9vLmFyYyhuLGEsdCxyKDApLHIoMzYwKSk6by5hcmMobixhLHQscigwKSxyKDM2MC9pLnRvdGFsKihpLnRvdGFsLWkuZGF5cykpKSxvLmZpbGxTdHJva2VTaGFwZSh0aGlzKSxlKGQuc2VsZWN0b3JzLnZhbHVlX2RheXMpLmh0bWwoaS5kYXlzKX0sc3Ryb2tlOmQuZGF5cy5ib3JkZXJDb2xvcixzdHJva2VXaWR0aDpkLmRheXMuYm9yZGVyV2lkdGh9KSxmPW5ldyBLaW5ldGljLkxheWVyLGYuYWRkKHUpLG0uYWRkKGYpfWZ1bmN0aW9uIGEoKXt2YXIgZT1zZXRJbnRlcnZhbChmdW5jdGlvbigpe2lmKGkuc2Vjb25kcz41OSl7aWYoNjAtaS5taW51dGVzPT0wJiYyNC1pLmhvdXJzPT0wJiYwPT1pLmRheXMpcmV0dXJuIGNsZWFySW50ZXJ2YWwoZSksdm9pZCh2b2lkIDAhPT1fJiZfLmNhbGwodGhpcykpO2kuc2Vjb25kcz0xLGkubWludXRlcz41OT8oaS5taW51dGVzPTEsdi5kcmF3KCksaS5ob3Vycz4yMz8oaS5ob3Vycz0xLGkuZGF5cz4wJiYoaS5kYXlzLS0sZi5kcmF3KCkpKTppLmhvdXJzKyssYi5kcmF3KCkpOmkubWludXRlcysrLHYuZHJhdygpfWVsc2UgaS5zZWNvbmRzKys7dy5kcmF3KCl9LDFlMyl9dmFyIGQsaSxjLGgsbCx1LHcsdixiLGYseSxfO2UuZm4uZmluYWxfY291bnRkb3duPWZ1bmN0aW9uKHMscil7aWYoeT1lKHRoaXMpLHkuaXMoXCI6dmlzaWJsZVwiKSl7dmFyIGk9ZS5leHRlbmQoe3N0YXJ0OnZvaWQgMCxlbmQ6dm9pZCAwLG5vdzp2b2lkIDAsc2VsZWN0b3JzOnt2YWx1ZV9zZWNvbmRzOlwiLmNsb2NrLXNlY29uZHMgLnZhbFwiLGNhbnZhc19zZWNvbmRzOlwiY2FudmFzLXNlY29uZHNcIix2YWx1ZV9taW51dGVzOlwiLmNsb2NrLW1pbnV0ZXMgLnZhbFwiLGNhbnZhc19taW51dGVzOlwiY2FudmFzLW1pbnV0ZXNcIix2YWx1ZV9ob3VyczpcIi5jbG9jay1ob3VycyAudmFsXCIsY2FudmFzX2hvdXJzOlwiY2FudmFzLWhvdXJzXCIsdmFsdWVfZGF5czpcIi5jbG9jay1kYXlzIC52YWxcIixjYW52YXNfZGF5czpcImNhbnZhcy1kYXlzXCJ9LHNlY29uZHM6e2JvcmRlckNvbG9yOlwiIzc5OTVENVwiLGJvcmRlcldpZHRoOlwiNlwifSxtaW51dGVzOntib3JkZXJDb2xvcjpcIiNBQ0M3NDJcIixib3JkZXJXaWR0aDpcIjZcIn0saG91cnM6e2JvcmRlckNvbG9yOlwiI0VDRUZDQlwiLGJvcmRlcldpZHRoOlwiNlwifSxkYXlzOntib3JkZXJDb2xvcjpcIiNGRjk5MDBcIixib3JkZXJXaWR0aDpcIjZcIn19LHMpO2Q9ZS5leHRlbmQoe30saSxzKSx2b2lkIDA9PT1kLnN0YXJ0JiYoZC5zdGFydD15LmRhdGEoXCJzdGFydFwiKSksdm9pZCAwPT09ZC5lbmQmJihkLmVuZD15LmRhdGEoXCJlbmRcIikpLHZvaWQgMD09PWQubm93JiYoZC5ub3c9eS5kYXRhKFwibm93XCIpKSx5LmRhdGEoXCJib3JkZXItY29sb3JcIikmJihkLnNlY29uZHMuYm9yZGVyQ29sb3I9ZC5taW51dGVzLmJvcmRlckNvbG9yPWQuaG91cnMuYm9yZGVyQ29sb3I9ZC5kYXlzLmJvcmRlckNvbG9yPXkuZGF0YShcImJvcmRlci1jb2xvclwiKSksZC5ub3c8ZC5zdGFydCYmKGQuc3RhcnQ9ZC5ub3csZC5lbmQ9ZC5ub3cpLGQubm93PmQuZW5kJiYoZC5zdGFydD1kLm5vdyxkLmVuZD1kLm5vdyksXCJmdW5jdGlvblwiPT10eXBlb2YgciYmKF89ciksbygpLHQoKSxuKCksYSgpfX19KGpRdWVyeSk7IiwiLypnbG9iYWwgalF1ZXJ5ICovXHJcbi8qIVxyXG4qIEZpdFRleHQuanMgMS4yXHJcbipcclxuKiBDb3B5cmlnaHQgMjAxMSwgRGF2ZSBSdXBlcnQgaHR0cDovL2RhdmVydXBlcnQuY29tXHJcbiogUmVsZWFzZWQgdW5kZXIgdGhlIFdURlBMIGxpY2Vuc2VcclxuKiBodHRwOi8vc2FtLnpveS5vcmcvd3RmcGwvXHJcbipcclxuKiBEYXRlOiBUaHUgTWF5IDA1IDE0OjIzOjAwIDIwMTEgLTA2MDBcclxuKi9cclxuXHJcbihmdW5jdGlvbiggJCApe1xyXG5cclxuICAkLmZuLmZpdFRleHQgPSBmdW5jdGlvbigga29tcHJlc3Nvciwgb3B0aW9ucyApIHtcclxuXHJcbiAgICAvLyBTZXR1cCBvcHRpb25zXHJcbiAgICB2YXIgY29tcHJlc3NvciA9IGtvbXByZXNzb3IgfHwgMSxcclxuICAgICAgICBzZXR0aW5ncyA9ICQuZXh0ZW5kKHtcclxuICAgICAgICAgICdtaW5Gb250U2l6ZScgOiBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksXHJcbiAgICAgICAgICAnbWF4Rm9udFNpemUnIDogTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZXHJcbiAgICAgICAgfSwgb3B0aW9ucyk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe1xyXG5cclxuICAgICAgLy8gU3RvcmUgdGhlIG9iamVjdFxyXG4gICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xyXG5cclxuICAgICAgLy8gUmVzaXplcigpIHJlc2l6ZXMgaXRlbXMgYmFzZWQgb24gdGhlIG9iamVjdCB3aWR0aCBkaXZpZGVkIGJ5IHRoZSBjb21wcmVzc29yICogMTBcclxuICAgICAgdmFyIHJlc2l6ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJHRoaXMuY3NzKCdmb250LXNpemUnLCBNYXRoLm1heChNYXRoLm1pbigkdGhpcy53aWR0aCgpIC8gKGNvbXByZXNzb3IqMTApLCBwYXJzZUZsb2F0KHNldHRpbmdzLm1heEZvbnRTaXplKSksIHBhcnNlRmxvYXQoc2V0dGluZ3MubWluRm9udFNpemUpKSk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyBDYWxsIG9uY2UgdG8gc2V0LlxyXG4gICAgICByZXNpemVyKCk7XHJcblxyXG4gICAgICAvLyBDYWxsIG9uIHJlc2l6ZS4gT3BlcmEgZGVib3VuY2VzIHRoZWlyIHJlc2l6ZSBieSBkZWZhdWx0LlxyXG4gICAgICAkKHdpbmRvdykub24oJ3Jlc2l6ZS5maXR0ZXh0IG9yaWVudGF0aW9uY2hhbmdlLmZpdHRleHQnLCByZXNpemVyKTtcclxuXHJcbiAgICB9KTtcclxuXHJcbiAgfTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuIiwiLypqc2hpbnQgYnJvd3Nlcjp0cnVlICovXHJcbi8qIVxyXG4qIEZpdFZpZHMgMS4xXHJcbipcclxuKiBDb3B5cmlnaHQgMjAxMywgQ2hyaXMgQ295aWVyIC0gaHR0cDovL2Nzcy10cmlja3MuY29tICsgRGF2ZSBSdXBlcnQgLSBodHRwOi8vZGF2ZXJ1cGVydC5jb21cclxuKiBDcmVkaXQgdG8gVGhpZXJyeSBLb2JsZW50eiAtIGh0dHA6Ly93d3cuYWxpc3RhcGFydC5jb20vYXJ0aWNsZXMvY3JlYXRpbmctaW50cmluc2ljLXJhdGlvcy1mb3ItdmlkZW8vXHJcbiogUmVsZWFzZWQgdW5kZXIgdGhlIFdURlBMIGxpY2Vuc2UgLSBodHRwOi8vc2FtLnpveS5vcmcvd3RmcGwvXHJcbipcclxuKi9cclxuXHJcbjsoZnVuY3Rpb24oICQgKXtcclxuXHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAkLmZuLmZpdFZpZHMgPSBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuICAgIHZhciBzZXR0aW5ncyA9IHtcclxuICAgICAgY3VzdG9tU2VsZWN0b3I6IG51bGwsXHJcbiAgICAgIGlnbm9yZTogbnVsbFxyXG4gICAgfTtcclxuXHJcbiAgICBpZighZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpdC12aWRzLXN0eWxlJykpIHtcclxuICAgICAgLy8gYXBwZW5kU3R5bGVzOiBodHRwczovL2dpdGh1Yi5jb20vdG9kZG1vdHRvL2ZsdWlkdmlkcy9ibG9iL21hc3Rlci9kaXN0L2ZsdWlkdmlkcy5qc1xyXG4gICAgICB2YXIgaGVhZCA9IGRvY3VtZW50LmhlYWQgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTtcclxuICAgICAgdmFyIGNzcyA9ICcuZmx1aWQtd2lkdGgtdmlkZW8td3JhcHBlcnt3aWR0aDoxMDAlO3Bvc2l0aW9uOnJlbGF0aXZlO3BhZGRpbmc6MDt9LmZsdWlkLXdpZHRoLXZpZGVvLXdyYXBwZXIgaWZyYW1lLC5mbHVpZC13aWR0aC12aWRlby13cmFwcGVyIG9iamVjdCwuZmx1aWQtd2lkdGgtdmlkZW8td3JhcHBlciBlbWJlZCB7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7bGVmdDowO3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7fSc7XHJcbiAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICBkaXYuaW5uZXJIVE1MID0gJzxwPng8L3A+PHN0eWxlIGlkPVwiZml0LXZpZHMtc3R5bGVcIj4nICsgY3NzICsgJzwvc3R5bGU+JztcclxuICAgICAgaGVhZC5hcHBlbmRDaGlsZChkaXYuY2hpbGROb2Rlc1sxXSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCBvcHRpb25zICkge1xyXG4gICAgICAkLmV4dGVuZCggc2V0dGluZ3MsIG9wdGlvbnMgKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgIHZhciBzZWxlY3RvcnMgPSBbXHJcbiAgICAgICAgJ2lmcmFtZVtzcmMqPVwicGxheWVyLnZpbWVvLmNvbVwiXScsXHJcbiAgICAgICAgJ2lmcmFtZVtzcmMqPVwieW91dHViZS5jb21cIl0nLFxyXG4gICAgICAgICdpZnJhbWVbc3JjKj1cInlvdXR1YmUtbm9jb29raWUuY29tXCJdJyxcclxuICAgICAgICAnaWZyYW1lW3NyYyo9XCJraWNrc3RhcnRlci5jb21cIl1bc3JjKj1cInZpZGVvLmh0bWxcIl0nLFxyXG4gICAgICAgICdvYmplY3QnLFxyXG4gICAgICAgICdlbWJlZCdcclxuICAgICAgXTtcclxuXHJcbiAgICAgIGlmIChzZXR0aW5ncy5jdXN0b21TZWxlY3Rvcikge1xyXG4gICAgICAgIHNlbGVjdG9ycy5wdXNoKHNldHRpbmdzLmN1c3RvbVNlbGVjdG9yKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdmFyIGlnbm9yZUxpc3QgPSAnLmZpdHZpZHNpZ25vcmUnO1xyXG5cclxuICAgICAgaWYoc2V0dGluZ3MuaWdub3JlKSB7XHJcbiAgICAgICAgaWdub3JlTGlzdCA9IGlnbm9yZUxpc3QgKyAnLCAnICsgc2V0dGluZ3MuaWdub3JlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB2YXIgJGFsbFZpZGVvcyA9ICQodGhpcykuZmluZChzZWxlY3RvcnMuam9pbignLCcpKTtcclxuICAgICAgJGFsbFZpZGVvcyA9ICRhbGxWaWRlb3Mubm90KCdvYmplY3Qgb2JqZWN0Jyk7IC8vIFN3Zk9iaiBjb25mbGljdCBwYXRjaFxyXG4gICAgICAkYWxsVmlkZW9zID0gJGFsbFZpZGVvcy5ub3QoaWdub3JlTGlzdCk7IC8vIERpc2FibGUgRml0VmlkcyBvbiB0aGlzIHZpZGVvLlxyXG5cclxuICAgICAgJGFsbFZpZGVvcy5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcclxuICAgICAgICBpZigkdGhpcy5wYXJlbnRzKGlnbm9yZUxpc3QpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIHJldHVybjsgLy8gRGlzYWJsZSBGaXRWaWRzIG9uIHRoaXMgdmlkZW8uXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2VtYmVkJyAmJiAkdGhpcy5wYXJlbnQoJ29iamVjdCcpLmxlbmd0aCB8fCAkdGhpcy5wYXJlbnQoJy5mbHVpZC13aWR0aC12aWRlby13cmFwcGVyJykubGVuZ3RoKSB7IHJldHVybjsgfVxyXG4gICAgICAgIGlmICgoISR0aGlzLmNzcygnaGVpZ2h0JykgJiYgISR0aGlzLmNzcygnd2lkdGgnKSkgJiYgKGlzTmFOKCR0aGlzLmF0dHIoJ2hlaWdodCcpKSB8fCBpc05hTigkdGhpcy5hdHRyKCd3aWR0aCcpKSkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgJHRoaXMuYXR0cignaGVpZ2h0JywgOSk7XHJcbiAgICAgICAgICAkdGhpcy5hdHRyKCd3aWR0aCcsIDE2KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGhlaWdodCA9ICggdGhpcy50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdvYmplY3QnIHx8ICgkdGhpcy5hdHRyKCdoZWlnaHQnKSAmJiAhaXNOYU4ocGFyc2VJbnQoJHRoaXMuYXR0cignaGVpZ2h0JyksIDEwKSkpICkgPyBwYXJzZUludCgkdGhpcy5hdHRyKCdoZWlnaHQnKSwgMTApIDogJHRoaXMuaGVpZ2h0KCksXHJcbiAgICAgICAgICAgIHdpZHRoID0gIWlzTmFOKHBhcnNlSW50KCR0aGlzLmF0dHIoJ3dpZHRoJyksIDEwKSkgPyBwYXJzZUludCgkdGhpcy5hdHRyKCd3aWR0aCcpLCAxMCkgOiAkdGhpcy53aWR0aCgpLFxyXG4gICAgICAgICAgICBhc3BlY3RSYXRpbyA9IGhlaWdodCAvIHdpZHRoO1xyXG4gICAgICAgIGlmKCEkdGhpcy5hdHRyKCduYW1lJykpe1xyXG4gICAgICAgICAgdmFyIHZpZGVvTmFtZSA9ICdmaXR2aWQnICsgJC5mbi5maXRWaWRzLl9jb3VudDtcclxuICAgICAgICAgICR0aGlzLmF0dHIoJ25hbWUnLCB2aWRlb05hbWUpO1xyXG4gICAgICAgICAgJC5mbi5maXRWaWRzLl9jb3VudCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkdGhpcy53cmFwKCc8ZGl2IGNsYXNzPVwiZmx1aWQtd2lkdGgtdmlkZW8td3JhcHBlclwiPjwvZGl2PicpLnBhcmVudCgnLmZsdWlkLXdpZHRoLXZpZGVvLXdyYXBwZXInKS5jc3MoJ3BhZGRpbmctdG9wJywgKGFzcGVjdFJhdGlvICogMTAwKSsnJScpO1xyXG4gICAgICAgICR0aGlzLnJlbW92ZUF0dHIoJ2hlaWdodCcpLnJlbW92ZUF0dHIoJ3dpZHRoJyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuICBcclxuICAvLyBJbnRlcm5hbCBjb3VudGVyIGZvciB1bmlxdWUgdmlkZW8gbmFtZXMuXHJcbiAgJC5mbi5maXRWaWRzLl9jb3VudCA9IDA7XHJcbiAgXHJcbi8vIFdvcmtzIHdpdGggZWl0aGVyIGpRdWVyeSBvciBaZXB0b1xyXG59KSggd2luZG93LmpRdWVyeSB8fCB3aW5kb3cuWmVwdG8gKTtcclxuIiwiLyohXG4gKiBqUXVlcnkgRm9ybSBQbHVnaW5cbiAqIHZlcnNpb246IDQuMi4yXG4gKiBSZXF1aXJlcyBqUXVlcnkgdjEuNy4yIG9yIGxhdGVyXG4gKiBQcm9qZWN0IHJlcG9zaXRvcnk6IGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnktZm9ybS9mb3JtXG5cbiAqIENvcHlyaWdodCAyMDE3IEtldmluIE1vcnJpc1xuICogQ29weXJpZ2h0IDIwMDYgTS4gQWxzdXBcblxuICogRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTEdQTC0yLjErIG9yIE1JVCBsaWNlbnNlc1xuICogaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS1mb3JtL2Zvcm0jbGljZW5zZVxuXG4gKiBUaGlzIGxpYnJhcnkgaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yXG4gKiBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgTGVzc2VyIEdlbmVyYWwgUHVibGljXG4gKiBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uOyBlaXRoZXJcbiAqIHZlcnNpb24gMi4xIG9mIHRoZSBMaWNlbnNlLCBvciAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuICogVGhpcyBsaWJyYXJ5IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZSBHTlVcbiAqIExlc3NlciBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG4gKi9cbiFmdW5jdGlvbihlKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImpxdWVyeVwiXSxlKTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1mdW5jdGlvbih0LHIpe3JldHVybiB2b2lkIDA9PT1yJiYocj1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3JlcXVpcmUoXCJqcXVlcnlcIik6cmVxdWlyZShcImpxdWVyeVwiKSh0KSksZShyKSxyfTplKGpRdWVyeSl9KGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQodCl7dmFyIHI9dC5kYXRhO3QuaXNEZWZhdWx0UHJldmVudGVkKCl8fCh0LnByZXZlbnREZWZhdWx0KCksZSh0LnRhcmdldCkuY2xvc2VzdChcImZvcm1cIikuYWpheFN1Ym1pdChyKSl9ZnVuY3Rpb24gcih0KXt2YXIgcj10LnRhcmdldCxhPWUocik7aWYoIWEuaXMoXCJbdHlwZT1zdWJtaXRdLFt0eXBlPWltYWdlXVwiKSl7dmFyIG49YS5jbG9zZXN0KFwiW3R5cGU9c3VibWl0XVwiKTtpZigwPT09bi5sZW5ndGgpcmV0dXJuO3I9blswXX12YXIgaT1yLmZvcm07aWYoaS5jbGs9cixcImltYWdlXCI9PT1yLnR5cGUpaWYodm9pZCAwIT09dC5vZmZzZXRYKWkuY2xrX3g9dC5vZmZzZXRYLGkuY2xrX3k9dC5vZmZzZXRZO2Vsc2UgaWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZS5mbi5vZmZzZXQpe3ZhciBvPWEub2Zmc2V0KCk7aS5jbGtfeD10LnBhZ2VYLW8ubGVmdCxpLmNsa195PXQucGFnZVktby50b3B9ZWxzZSBpLmNsa194PXQucGFnZVgtci5vZmZzZXRMZWZ0LGkuY2xrX3k9dC5wYWdlWS1yLm9mZnNldFRvcDtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aS5jbGs9aS5jbGtfeD1pLmNsa195PW51bGx9LDEwMCl9ZnVuY3Rpb24gYSgpe2lmKGUuZm4uYWpheFN1Ym1pdC5kZWJ1Zyl7dmFyIHQ9XCJbanF1ZXJ5LmZvcm1dIFwiK0FycmF5LnByb3RvdHlwZS5qb2luLmNhbGwoYXJndW1lbnRzLFwiXCIpO3dpbmRvdy5jb25zb2xlJiZ3aW5kb3cuY29uc29sZS5sb2c/d2luZG93LmNvbnNvbGUubG9nKHQpOndpbmRvdy5vcGVyYSYmd2luZG93Lm9wZXJhLnBvc3RFcnJvciYmd2luZG93Lm9wZXJhLnBvc3RFcnJvcih0KX19dmFyIG49L1xccj9cXG4vZyxpPXt9O2kuZmlsZWFwaT12b2lkIDAhPT1lKCc8aW5wdXQgdHlwZT1cImZpbGVcIj4nKS5nZXQoMCkuZmlsZXMsaS5mb3JtZGF0YT12b2lkIDAhPT13aW5kb3cuRm9ybURhdGE7dmFyIG89ISFlLmZuLnByb3A7ZS5mbi5hdHRyMj1mdW5jdGlvbigpe2lmKCFvKXJldHVybiB0aGlzLmF0dHIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBlPXRoaXMucHJvcC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIGUmJmUuanF1ZXJ5fHxcInN0cmluZ1wiPT10eXBlb2YgZT9lOnRoaXMuYXR0ci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGUuZm4uYWpheFN1Ym1pdD1mdW5jdGlvbih0LHIsbixzKXtmdW5jdGlvbiB1KHIpe3ZhciBhLG4saT1lLnBhcmFtKHIsdC50cmFkaXRpb25hbCkuc3BsaXQoXCImXCIpLG89aS5sZW5ndGgscz1bXTtmb3IoYT0wO2E8bzthKyspaVthXT1pW2FdLnJlcGxhY2UoL1xcKy9nLFwiIFwiKSxuPWlbYV0uc3BsaXQoXCI9XCIpLHMucHVzaChbZGVjb2RlVVJJQ29tcG9uZW50KG5bMF0pLGRlY29kZVVSSUNvbXBvbmVudChuWzFdKV0pO3JldHVybiBzfWZ1bmN0aW9uIGMocil7ZnVuY3Rpb24gbihlKXt2YXIgdD1udWxsO3RyeXtlLmNvbnRlbnRXaW5kb3cmJih0PWUuY29udGVudFdpbmRvdy5kb2N1bWVudCl9Y2F0Y2goZSl7YShcImNhbm5vdCBnZXQgaWZyYW1lLmNvbnRlbnRXaW5kb3cgZG9jdW1lbnQ6IFwiK2UpfWlmKHQpcmV0dXJuIHQ7dHJ5e3Q9ZS5jb250ZW50RG9jdW1lbnQ/ZS5jb250ZW50RG9jdW1lbnQ6ZS5kb2N1bWVudH1jYXRjaChyKXthKFwiY2Fubm90IGdldCBpZnJhbWUuY29udGVudERvY3VtZW50OiBcIityKSx0PWUuZG9jdW1lbnR9cmV0dXJuIHR9ZnVuY3Rpb24gaSgpe2Z1bmN0aW9uIHQoKXt0cnl7dmFyIGU9bih2KS5yZWFkeVN0YXRlO2EoXCJzdGF0ZSA9IFwiK2UpLGUmJlwidW5pbml0aWFsaXplZFwiPT09ZS50b0xvd2VyQ2FzZSgpJiZzZXRUaW1lb3V0KHQsNTApfWNhdGNoKGUpe2EoXCJTZXJ2ZXIgYWJvcnQ6IFwiLGUsXCIgKFwiLGUubmFtZSxcIilcIikscyhMKSxqJiZjbGVhclRpbWVvdXQoaiksaj12b2lkIDB9fXZhciByPXAuYXR0cjIoXCJ0YXJnZXRcIiksaT1wLmF0dHIyKFwiYWN0aW9uXCIpLG89cC5hdHRyKFwiZW5jdHlwZVwiKXx8cC5hdHRyKFwiZW5jb2RpbmdcIil8fFwibXVsdGlwYXJ0L2Zvcm0tZGF0YVwiO3cuc2V0QXR0cmlidXRlKFwidGFyZ2V0XCIsbSksbCYmIS9wb3N0L2kudGVzdChsKXx8dy5zZXRBdHRyaWJ1dGUoXCJtZXRob2RcIixcIlBPU1RcIiksaSE9PWYudXJsJiZ3LnNldEF0dHJpYnV0ZShcImFjdGlvblwiLGYudXJsKSxmLnNraXBFbmNvZGluZ092ZXJyaWRlfHxsJiYhL3Bvc3QvaS50ZXN0KGwpfHxwLmF0dHIoe2VuY29kaW5nOlwibXVsdGlwYXJ0L2Zvcm0tZGF0YVwiLGVuY3R5cGU6XCJtdWx0aXBhcnQvZm9ybS1kYXRhXCJ9KSxmLnRpbWVvdXQmJihqPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtUPSEwLHMoQSl9LGYudGltZW91dCkpO3ZhciB1PVtdO3RyeXtpZihmLmV4dHJhRGF0YSlmb3IodmFyIGMgaW4gZi5leHRyYURhdGEpZi5leHRyYURhdGEuaGFzT3duUHJvcGVydHkoYykmJihlLmlzUGxhaW5PYmplY3QoZi5leHRyYURhdGFbY10pJiZmLmV4dHJhRGF0YVtjXS5oYXNPd25Qcm9wZXJ0eShcIm5hbWVcIikmJmYuZXh0cmFEYXRhW2NdLmhhc093blByb3BlcnR5KFwidmFsdWVcIik/dS5wdXNoKGUoJzxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cIicrZi5leHRyYURhdGFbY10ubmFtZSsnXCI+JyxrKS52YWwoZi5leHRyYURhdGFbY10udmFsdWUpLmFwcGVuZFRvKHcpWzBdKTp1LnB1c2goZSgnPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwiJytjKydcIj4nLGspLnZhbChmLmV4dHJhRGF0YVtjXSkuYXBwZW5kVG8odylbMF0pKTtmLmlmcmFtZVRhcmdldHx8aC5hcHBlbmRUbyhEKSx2LmF0dGFjaEV2ZW50P3YuYXR0YWNoRXZlbnQoXCJvbmxvYWRcIixzKTp2LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIscywhMSksc2V0VGltZW91dCh0LDE1KTt0cnl7dy5zdWJtaXQoKX1jYXRjaChlKXtkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZm9ybVwiKS5zdWJtaXQuYXBwbHkodyl9fWZpbmFsbHl7dy5zZXRBdHRyaWJ1dGUoXCJhY3Rpb25cIixpKSx3LnNldEF0dHJpYnV0ZShcImVuY3R5cGVcIixvKSxyP3cuc2V0QXR0cmlidXRlKFwidGFyZ2V0XCIscik6cC5yZW1vdmVBdHRyKFwidGFyZ2V0XCIpLGUodSkucmVtb3ZlKCl9fWZ1bmN0aW9uIHModCl7aWYoIXguYWJvcnRlZCYmIVgpe2lmKChPPW4odikpfHwoYShcImNhbm5vdCBhY2Nlc3MgcmVzcG9uc2UgZG9jdW1lbnRcIiksdD1MKSx0PT09QSYmeClyZXR1cm4geC5hYm9ydChcInRpbWVvdXRcIiksdm9pZCBTLnJlamVjdCh4LFwidGltZW91dFwiKTtpZih0PT09TCYmeClyZXR1cm4geC5hYm9ydChcInNlcnZlciBhYm9ydFwiKSx2b2lkIFMucmVqZWN0KHgsXCJlcnJvclwiLFwic2VydmVyIGFib3J0XCIpO2lmKE8mJk8ubG9jYXRpb24uaHJlZiE9PWYuaWZyYW1lU3JjfHxUKXt2LmRldGFjaEV2ZW50P3YuZGV0YWNoRXZlbnQoXCJvbmxvYWRcIixzKTp2LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2FkXCIscywhMSk7dmFyIHIsaT1cInN1Y2Nlc3NcIjt0cnl7aWYoVCl0aHJvd1widGltZW91dFwiO3ZhciBvPVwieG1sXCI9PT1mLmRhdGFUeXBlfHxPLlhNTERvY3VtZW50fHxlLmlzWE1MRG9jKE8pO2lmKGEoXCJpc1htbD1cIitvKSwhbyYmd2luZG93Lm9wZXJhJiYobnVsbD09PU8uYm9keXx8IU8uYm9keS5pbm5lckhUTUwpJiYtLUMpcmV0dXJuIGEoXCJyZXF1ZWluZyBvbkxvYWQgY2FsbGJhY2ssIERPTSBub3QgYXZhaWxhYmxlXCIpLHZvaWQgc2V0VGltZW91dChzLDI1MCk7dmFyIHU9Ty5ib2R5P08uYm9keTpPLmRvY3VtZW50RWxlbWVudDt4LnJlc3BvbnNlVGV4dD11P3UuaW5uZXJIVE1MOm51bGwseC5yZXNwb25zZVhNTD1PLlhNTERvY3VtZW50P08uWE1MRG9jdW1lbnQ6TyxvJiYoZi5kYXRhVHlwZT1cInhtbFwiKSx4LmdldFJlc3BvbnNlSGVhZGVyPWZ1bmN0aW9uKGUpe3JldHVybntcImNvbnRlbnQtdHlwZVwiOmYuZGF0YVR5cGV9W2UudG9Mb3dlckNhc2UoKV19LHUmJih4LnN0YXR1cz1OdW1iZXIodS5nZXRBdHRyaWJ1dGUoXCJzdGF0dXNcIikpfHx4LnN0YXR1cyx4LnN0YXR1c1RleHQ9dS5nZXRBdHRyaWJ1dGUoXCJzdGF0dXNUZXh0XCIpfHx4LnN0YXR1c1RleHQpO3ZhciBjPShmLmRhdGFUeXBlfHxcIlwiKS50b0xvd2VyQ2FzZSgpLGw9Lyhqc29ufHNjcmlwdHx0ZXh0KS8udGVzdChjKTtpZihsfHxmLnRleHRhcmVhKXt2YXIgcD1PLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGV4dGFyZWFcIilbMF07aWYocCl4LnJlc3BvbnNlVGV4dD1wLnZhbHVlLHguc3RhdHVzPU51bWJlcihwLmdldEF0dHJpYnV0ZShcInN0YXR1c1wiKSl8fHguc3RhdHVzLHguc3RhdHVzVGV4dD1wLmdldEF0dHJpYnV0ZShcInN0YXR1c1RleHRcIil8fHguc3RhdHVzVGV4dDtlbHNlIGlmKGwpe3ZhciBtPU8uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJwcmVcIilbMF0sZz1PLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXTttP3gucmVzcG9uc2VUZXh0PW0udGV4dENvbnRlbnQ/bS50ZXh0Q29udGVudDptLmlubmVyVGV4dDpnJiYoeC5yZXNwb25zZVRleHQ9Zy50ZXh0Q29udGVudD9nLnRleHRDb250ZW50OmcuaW5uZXJUZXh0KX19ZWxzZVwieG1sXCI9PT1jJiYheC5yZXNwb25zZVhNTCYmeC5yZXNwb25zZVRleHQmJih4LnJlc3BvbnNlWE1MPXEoeC5yZXNwb25zZVRleHQpKTt0cnl7TT1OKHgsYyxmKX1jYXRjaChlKXtpPVwicGFyc2VyZXJyb3JcIix4LmVycm9yPXI9ZXx8aX19Y2F0Y2goZSl7YShcImVycm9yIGNhdWdodDogXCIsZSksaT1cImVycm9yXCIseC5lcnJvcj1yPWV8fGl9eC5hYm9ydGVkJiYoYShcInVwbG9hZCBhYm9ydGVkXCIpLGk9bnVsbCkseC5zdGF0dXMmJihpPXguc3RhdHVzPj0yMDAmJnguc3RhdHVzPDMwMHx8MzA0PT09eC5zdGF0dXM/XCJzdWNjZXNzXCI6XCJlcnJvclwiKSxcInN1Y2Nlc3NcIj09PWk/KGYuc3VjY2VzcyYmZi5zdWNjZXNzLmNhbGwoZi5jb250ZXh0LE0sXCJzdWNjZXNzXCIseCksUy5yZXNvbHZlKHgucmVzcG9uc2VUZXh0LFwic3VjY2Vzc1wiLHgpLGQmJmUuZXZlbnQudHJpZ2dlcihcImFqYXhTdWNjZXNzXCIsW3gsZl0pKTppJiYodm9pZCAwPT09ciYmKHI9eC5zdGF0dXNUZXh0KSxmLmVycm9yJiZmLmVycm9yLmNhbGwoZi5jb250ZXh0LHgsaSxyKSxTLnJlamVjdCh4LFwiZXJyb3JcIixyKSxkJiZlLmV2ZW50LnRyaWdnZXIoXCJhamF4RXJyb3JcIixbeCxmLHJdKSksZCYmZS5ldmVudC50cmlnZ2VyKFwiYWpheENvbXBsZXRlXCIsW3gsZl0pLGQmJiEtLWUuYWN0aXZlJiZlLmV2ZW50LnRyaWdnZXIoXCJhamF4U3RvcFwiKSxmLmNvbXBsZXRlJiZmLmNvbXBsZXRlLmNhbGwoZi5jb250ZXh0LHgsaSksWD0hMCxmLnRpbWVvdXQmJmNsZWFyVGltZW91dChqKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Zi5pZnJhbWVUYXJnZXQ/aC5hdHRyKFwic3JjXCIsZi5pZnJhbWVTcmMpOmgucmVtb3ZlKCkseC5yZXNwb25zZVhNTD1udWxsfSwxMDApfX19dmFyIHUsYyxmLGQsbSxoLHYseCx5LGIsVCxqLHc9cFswXSxTPWUuRGVmZXJyZWQoKTtpZihTLmFib3J0PWZ1bmN0aW9uKGUpe3guYWJvcnQoZSl9LHIpZm9yKGM9MDtjPGcubGVuZ3RoO2MrKyl1PWUoZ1tjXSksbz91LnByb3AoXCJkaXNhYmxlZFwiLCExKTp1LnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKTsoZj1lLmV4dGVuZCghMCx7fSxlLmFqYXhTZXR0aW5ncyx0KSkuY29udGV4dD1mLmNvbnRleHR8fGYsbT1cImpxRm9ybUlPXCIrKG5ldyBEYXRlKS5nZXRUaW1lKCk7dmFyIGs9dy5vd25lckRvY3VtZW50LEQ9cC5jbG9zZXN0KFwiYm9keVwiKTtpZihmLmlmcmFtZVRhcmdldD8oYj0oaD1lKGYuaWZyYW1lVGFyZ2V0LGspKS5hdHRyMihcIm5hbWVcIikpP209YjpoLmF0dHIyKFwibmFtZVwiLG0pOihoPWUoJzxpZnJhbWUgbmFtZT1cIicrbSsnXCIgc3JjPVwiJytmLmlmcmFtZVNyYysnXCIgLz4nLGspKS5jc3Moe3Bvc2l0aW9uOlwiYWJzb2x1dGVcIix0b3A6XCItMTAwMHB4XCIsbGVmdDpcIi0xMDAwcHhcIn0pLHY9aFswXSx4PXthYm9ydGVkOjAscmVzcG9uc2VUZXh0Om51bGwscmVzcG9uc2VYTUw6bnVsbCxzdGF0dXM6MCxzdGF0dXNUZXh0Olwibi9hXCIsZ2V0QWxsUmVzcG9uc2VIZWFkZXJzOmZ1bmN0aW9uKCl7fSxnZXRSZXNwb25zZUhlYWRlcjpmdW5jdGlvbigpe30sc2V0UmVxdWVzdEhlYWRlcjpmdW5jdGlvbigpe30sYWJvcnQ6ZnVuY3Rpb24odCl7dmFyIHI9XCJ0aW1lb3V0XCI9PT10P1widGltZW91dFwiOlwiYWJvcnRlZFwiO2EoXCJhYm9ydGluZyB1cGxvYWQuLi4gXCIrciksdGhpcy5hYm9ydGVkPTE7dHJ5e3YuY29udGVudFdpbmRvdy5kb2N1bWVudC5leGVjQ29tbWFuZCYmdi5jb250ZW50V2luZG93LmRvY3VtZW50LmV4ZWNDb21tYW5kKFwiU3RvcFwiKX1jYXRjaChlKXt9aC5hdHRyKFwic3JjXCIsZi5pZnJhbWVTcmMpLHguZXJyb3I9cixmLmVycm9yJiZmLmVycm9yLmNhbGwoZi5jb250ZXh0LHgscix0KSxkJiZlLmV2ZW50LnRyaWdnZXIoXCJhamF4RXJyb3JcIixbeCxmLHJdKSxmLmNvbXBsZXRlJiZmLmNvbXBsZXRlLmNhbGwoZi5jb250ZXh0LHgscil9fSwoZD1mLmdsb2JhbCkmJjA9PWUuYWN0aXZlKysmJmUuZXZlbnQudHJpZ2dlcihcImFqYXhTdGFydFwiKSxkJiZlLmV2ZW50LnRyaWdnZXIoXCJhamF4U2VuZFwiLFt4LGZdKSxmLmJlZm9yZVNlbmQmJiExPT09Zi5iZWZvcmVTZW5kLmNhbGwoZi5jb250ZXh0LHgsZikpcmV0dXJuIGYuZ2xvYmFsJiZlLmFjdGl2ZS0tLFMucmVqZWN0KCksUztpZih4LmFib3J0ZWQpcmV0dXJuIFMucmVqZWN0KCksUzsoeT13LmNsaykmJihiPXkubmFtZSkmJiF5LmRpc2FibGVkJiYoZi5leHRyYURhdGE9Zi5leHRyYURhdGF8fHt9LGYuZXh0cmFEYXRhW2JdPXkudmFsdWUsXCJpbWFnZVwiPT09eS50eXBlJiYoZi5leHRyYURhdGFbYitcIi54XCJdPXcuY2xrX3gsZi5leHRyYURhdGFbYitcIi55XCJdPXcuY2xrX3kpKTt2YXIgQT0xLEw9MixGPWUoXCJtZXRhW25hbWU9Y3NyZi10b2tlbl1cIikuYXR0cihcImNvbnRlbnRcIiksRT1lKFwibWV0YVtuYW1lPWNzcmYtcGFyYW1dXCIpLmF0dHIoXCJjb250ZW50XCIpO0UmJkYmJihmLmV4dHJhRGF0YT1mLmV4dHJhRGF0YXx8e30sZi5leHRyYURhdGFbRV09RiksZi5mb3JjZVN5bmM/aSgpOnNldFRpbWVvdXQoaSwxMCk7dmFyIE0sTyxYLEM9NTAscT1lLnBhcnNlWE1MfHxmdW5jdGlvbihlLHQpe3JldHVybiB3aW5kb3cuQWN0aXZlWE9iamVjdD8oKHQ9bmV3IEFjdGl2ZVhPYmplY3QoXCJNaWNyb3NvZnQuWE1MRE9NXCIpKS5hc3luYz1cImZhbHNlXCIsdC5sb2FkWE1MKGUpKTp0PShuZXcgRE9NUGFyc2VyKS5wYXJzZUZyb21TdHJpbmcoZSxcInRleHQveG1sXCIpLHQmJnQuZG9jdW1lbnRFbGVtZW50JiZcInBhcnNlcmVycm9yXCIhPT10LmRvY3VtZW50RWxlbWVudC5ub2RlTmFtZT90Om51bGx9LF89ZS5wYXJzZUpTT058fGZ1bmN0aW9uKGUpe3JldHVybiB3aW5kb3cuZXZhbChcIihcIitlK1wiKVwiKX0sTj1mdW5jdGlvbih0LHIsYSl7dmFyIG49dC5nZXRSZXNwb25zZUhlYWRlcihcImNvbnRlbnQtdHlwZVwiKXx8XCJcIixpPShcInhtbFwiPT09cnx8IXIpJiZuLmluZGV4T2YoXCJ4bWxcIik+PTAsbz1pP3QucmVzcG9uc2VYTUw6dC5yZXNwb25zZVRleHQ7cmV0dXJuIGkmJlwicGFyc2VyZXJyb3JcIj09PW8uZG9jdW1lbnRFbGVtZW50Lm5vZGVOYW1lJiZlLmVycm9yJiZlLmVycm9yKFwicGFyc2VyZXJyb3JcIiksYSYmYS5kYXRhRmlsdGVyJiYobz1hLmRhdGFGaWx0ZXIobyxyKSksXCJzdHJpbmdcIj09dHlwZW9mIG8mJigoXCJqc29uXCI9PT1yfHwhcikmJm4uaW5kZXhPZihcImpzb25cIik+PTA/bz1fKG8pOihcInNjcmlwdFwiPT09cnx8IXIpJiZuLmluZGV4T2YoXCJqYXZhc2NyaXB0XCIpPj0wJiZlLmdsb2JhbEV2YWwobykpLG99O3JldHVybiBTfWlmKCF0aGlzLmxlbmd0aClyZXR1cm4gYShcImFqYXhTdWJtaXQ6IHNraXBwaW5nIHN1Ym1pdCBwcm9jZXNzIC0gbm8gZWxlbWVudCBzZWxlY3RlZFwiKSx0aGlzO3ZhciBsLGYsZCxwPXRoaXM7XCJmdW5jdGlvblwiPT10eXBlb2YgdD90PXtzdWNjZXNzOnR9Olwic3RyaW5nXCI9PXR5cGVvZiB0fHwhMT09PXQmJmFyZ3VtZW50cy5sZW5ndGg+MD8odD17dXJsOnQsZGF0YTpyLGRhdGFUeXBlOm59LFwiZnVuY3Rpb25cIj09dHlwZW9mIHMmJih0LnN1Y2Nlc3M9cykpOnZvaWQgMD09PXQmJih0PXt9KSxsPXQubWV0aG9kfHx0LnR5cGV8fHRoaXMuYXR0cjIoXCJtZXRob2RcIiksKGQ9KGQ9XCJzdHJpbmdcIj09dHlwZW9mKGY9dC51cmx8fHRoaXMuYXR0cjIoXCJhY3Rpb25cIikpP2UudHJpbShmKTpcIlwiKXx8d2luZG93LmxvY2F0aW9uLmhyZWZ8fFwiXCIpJiYoZD0oZC5tYXRjaCgvXihbXiNdKykvKXx8W10pWzFdKSx0PWUuZXh0ZW5kKCEwLHt1cmw6ZCxzdWNjZXNzOmUuYWpheFNldHRpbmdzLnN1Y2Nlc3MsdHlwZTpsfHxlLmFqYXhTZXR0aW5ncy50eXBlLGlmcmFtZVNyYzovXmh0dHBzL2kudGVzdCh3aW5kb3cubG9jYXRpb24uaHJlZnx8XCJcIik/XCJqYXZhc2NyaXB0OmZhbHNlXCI6XCJhYm91dDpibGFua1wifSx0KTt2YXIgbT17fTtpZih0aGlzLnRyaWdnZXIoXCJmb3JtLXByZS1zZXJpYWxpemVcIixbdGhpcyx0LG1dKSxtLnZldG8pcmV0dXJuIGEoXCJhamF4U3VibWl0OiBzdWJtaXQgdmV0b2VkIHZpYSBmb3JtLXByZS1zZXJpYWxpemUgdHJpZ2dlclwiKSx0aGlzO2lmKHQuYmVmb3JlU2VyaWFsaXplJiYhMT09PXQuYmVmb3JlU2VyaWFsaXplKHRoaXMsdCkpcmV0dXJuIGEoXCJhamF4U3VibWl0OiBzdWJtaXQgYWJvcnRlZCB2aWEgYmVmb3JlU2VyaWFsaXplIGNhbGxiYWNrXCIpLHRoaXM7dmFyIGg9dC50cmFkaXRpb25hbDt2b2lkIDA9PT1oJiYoaD1lLmFqYXhTZXR0aW5ncy50cmFkaXRpb25hbCk7dmFyIHYsZz1bXSx4PXRoaXMuZm9ybVRvQXJyYXkodC5zZW1hbnRpYyxnLHQuZmlsdGVyaW5nKTtpZih0LmRhdGEpe3ZhciB5PWUuaXNGdW5jdGlvbih0LmRhdGEpP3QuZGF0YSh4KTp0LmRhdGE7dC5leHRyYURhdGE9eSx2PWUucGFyYW0oeSxoKX1pZih0LmJlZm9yZVN1Ym1pdCYmITE9PT10LmJlZm9yZVN1Ym1pdCh4LHRoaXMsdCkpcmV0dXJuIGEoXCJhamF4U3VibWl0OiBzdWJtaXQgYWJvcnRlZCB2aWEgYmVmb3JlU3VibWl0IGNhbGxiYWNrXCIpLHRoaXM7aWYodGhpcy50cmlnZ2VyKFwiZm9ybS1zdWJtaXQtdmFsaWRhdGVcIixbeCx0aGlzLHQsbV0pLG0udmV0bylyZXR1cm4gYShcImFqYXhTdWJtaXQ6IHN1Ym1pdCB2ZXRvZWQgdmlhIGZvcm0tc3VibWl0LXZhbGlkYXRlIHRyaWdnZXJcIiksdGhpczt2YXIgYj1lLnBhcmFtKHgsaCk7diYmKGI9Yj9iK1wiJlwiK3Y6diksXCJHRVRcIj09PXQudHlwZS50b1VwcGVyQ2FzZSgpPyh0LnVybCs9KHQudXJsLmluZGV4T2YoXCI/XCIpPj0wP1wiJlwiOlwiP1wiKStiLHQuZGF0YT1udWxsKTp0LmRhdGE9Yjt2YXIgVD1bXTtpZih0LnJlc2V0Rm9ybSYmVC5wdXNoKGZ1bmN0aW9uKCl7cC5yZXNldEZvcm0oKX0pLHQuY2xlYXJGb3JtJiZULnB1c2goZnVuY3Rpb24oKXtwLmNsZWFyRm9ybSh0LmluY2x1ZGVIaWRkZW4pfSksIXQuZGF0YVR5cGUmJnQudGFyZ2V0KXt2YXIgaj10LnN1Y2Nlc3N8fGZ1bmN0aW9uKCl7fTtULnB1c2goZnVuY3Rpb24ocixhLG4pe3ZhciBpPWFyZ3VtZW50cyxvPXQucmVwbGFjZVRhcmdldD9cInJlcGxhY2VXaXRoXCI6XCJodG1sXCI7ZSh0LnRhcmdldClbb10ocikuZWFjaChmdW5jdGlvbigpe2ouYXBwbHkodGhpcyxpKX0pfSl9ZWxzZSB0LnN1Y2Nlc3MmJihlLmlzQXJyYXkodC5zdWNjZXNzKT9lLm1lcmdlKFQsdC5zdWNjZXNzKTpULnB1c2godC5zdWNjZXNzKSk7aWYodC5zdWNjZXNzPWZ1bmN0aW9uKGUscixhKXtmb3IodmFyIG49dC5jb250ZXh0fHx0aGlzLGk9MCxvPVQubGVuZ3RoO2k8bztpKyspVFtpXS5hcHBseShuLFtlLHIsYXx8cCxwXSl9LHQuZXJyb3Ipe3ZhciB3PXQuZXJyb3I7dC5lcnJvcj1mdW5jdGlvbihlLHIsYSl7dmFyIG49dC5jb250ZXh0fHx0aGlzO3cuYXBwbHkobixbZSxyLGEscF0pfX1pZih0LmNvbXBsZXRlKXt2YXIgUz10LmNvbXBsZXRlO3QuY29tcGxldGU9ZnVuY3Rpb24oZSxyKXt2YXIgYT10LmNvbnRleHR8fHRoaXM7Uy5hcHBseShhLFtlLHIscF0pfX12YXIgaz1lKFwiaW5wdXRbdHlwZT1maWxlXTplbmFibGVkXCIsdGhpcykuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuXCJcIiE9PWUodGhpcykudmFsKCl9KS5sZW5ndGg+MCxEPVwibXVsdGlwYXJ0L2Zvcm0tZGF0YVwiLEE9cC5hdHRyKFwiZW5jdHlwZVwiKT09PUR8fHAuYXR0cihcImVuY29kaW5nXCIpPT09RCxMPWkuZmlsZWFwaSYmaS5mb3JtZGF0YTthKFwiZmlsZUFQSSA6XCIrTCk7dmFyIEYsRT0oa3x8QSkmJiFMOyExIT09dC5pZnJhbWUmJih0LmlmcmFtZXx8RSk/dC5jbG9zZUtlZXBBbGl2ZT9lLmdldCh0LmNsb3NlS2VlcEFsaXZlLGZ1bmN0aW9uKCl7Rj1jKHgpfSk6Rj1jKHgpOkY9KGt8fEEpJiZMP2Z1bmN0aW9uKHIpe2Zvcih2YXIgYT1uZXcgRm9ybURhdGEsbj0wO248ci5sZW5ndGg7bisrKWEuYXBwZW5kKHJbbl0ubmFtZSxyW25dLnZhbHVlKTtpZih0LmV4dHJhRGF0YSl7dmFyIGk9dSh0LmV4dHJhRGF0YSk7Zm9yKG49MDtuPGkubGVuZ3RoO24rKylpW25dJiZhLmFwcGVuZChpW25dWzBdLGlbbl1bMV0pfXQuZGF0YT1udWxsO3ZhciBvPWUuZXh0ZW5kKCEwLHt9LGUuYWpheFNldHRpbmdzLHQse2NvbnRlbnRUeXBlOiExLHByb2Nlc3NEYXRhOiExLGNhY2hlOiExLHR5cGU6bHx8XCJQT1NUXCJ9KTt0LnVwbG9hZFByb2dyZXNzJiYoby54aHI9ZnVuY3Rpb24oKXt2YXIgcj1lLmFqYXhTZXR0aW5ncy54aHIoKTtyZXR1cm4gci51cGxvYWQmJnIudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoXCJwcm9ncmVzc1wiLGZ1bmN0aW9uKGUpe3ZhciByPTAsYT1lLmxvYWRlZHx8ZS5wb3NpdGlvbixuPWUudG90YWw7ZS5sZW5ndGhDb21wdXRhYmxlJiYocj1NYXRoLmNlaWwoYS9uKjEwMCkpLHQudXBsb2FkUHJvZ3Jlc3MoZSxhLG4scil9LCExKSxyfSksby5kYXRhPW51bGw7dmFyIHM9by5iZWZvcmVTZW5kO3JldHVybiBvLmJlZm9yZVNlbmQ9ZnVuY3Rpb24oZSxyKXt0LmZvcm1EYXRhP3IuZGF0YT10LmZvcm1EYXRhOnIuZGF0YT1hLHMmJnMuY2FsbCh0aGlzLGUscil9LGUuYWpheChvKX0oeCk6ZS5hamF4KHQpLHAucmVtb3ZlRGF0YShcImpxeGhyXCIpLmRhdGEoXCJqcXhoclwiLEYpO2Zvcih2YXIgTT0wO008Zy5sZW5ndGg7TSsrKWdbTV09bnVsbDtyZXR1cm4gdGhpcy50cmlnZ2VyKFwiZm9ybS1zdWJtaXQtbm90aWZ5XCIsW3RoaXMsdF0pLHRoaXN9LGUuZm4uYWpheEZvcm09ZnVuY3Rpb24obixpLG8scyl7aWYoKFwic3RyaW5nXCI9PXR5cGVvZiBufHwhMT09PW4mJmFyZ3VtZW50cy5sZW5ndGg+MCkmJihuPXt1cmw6bixkYXRhOmksZGF0YVR5cGU6b30sXCJmdW5jdGlvblwiPT10eXBlb2YgcyYmKG4uc3VjY2Vzcz1zKSksbj1ufHx7fSxuLmRlbGVnYXRpb249bi5kZWxlZ2F0aW9uJiZlLmlzRnVuY3Rpb24oZS5mbi5vbiksIW4uZGVsZWdhdGlvbiYmMD09PXRoaXMubGVuZ3RoKXt2YXIgdT17czp0aGlzLnNlbGVjdG9yLGM6dGhpcy5jb250ZXh0fTtyZXR1cm4hZS5pc1JlYWR5JiZ1LnM/KGEoXCJET00gbm90IHJlYWR5LCBxdWV1aW5nIGFqYXhGb3JtXCIpLGUoZnVuY3Rpb24oKXtlKHUucyx1LmMpLmFqYXhGb3JtKG4pfSksdGhpcyk6KGEoXCJ0ZXJtaW5hdGluZzsgemVybyBlbGVtZW50cyBmb3VuZCBieSBzZWxlY3RvclwiKyhlLmlzUmVhZHk/XCJcIjpcIiAoRE9NIG5vdCByZWFkeSlcIikpLHRoaXMpfXJldHVybiBuLmRlbGVnYXRpb24/KGUoZG9jdW1lbnQpLm9mZihcInN1Ym1pdC5mb3JtLXBsdWdpblwiLHRoaXMuc2VsZWN0b3IsdCkub2ZmKFwiY2xpY2suZm9ybS1wbHVnaW5cIix0aGlzLnNlbGVjdG9yLHIpLm9uKFwic3VibWl0LmZvcm0tcGx1Z2luXCIsdGhpcy5zZWxlY3RvcixuLHQpLm9uKFwiY2xpY2suZm9ybS1wbHVnaW5cIix0aGlzLnNlbGVjdG9yLG4sciksdGhpcyk6dGhpcy5hamF4Rm9ybVVuYmluZCgpLm9uKFwic3VibWl0LmZvcm0tcGx1Z2luXCIsbix0KS5vbihcImNsaWNrLmZvcm0tcGx1Z2luXCIsbixyKX0sZS5mbi5hamF4Rm9ybVVuYmluZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9mZihcInN1Ym1pdC5mb3JtLXBsdWdpbiBjbGljay5mb3JtLXBsdWdpblwiKX0sZS5mbi5mb3JtVG9BcnJheT1mdW5jdGlvbih0LHIsYSl7dmFyIG49W107aWYoMD09PXRoaXMubGVuZ3RoKXJldHVybiBuO3ZhciBvLHM9dGhpc1swXSx1PXRoaXMuYXR0cihcImlkXCIpLGM9dHx8dm9pZCAwPT09cy5lbGVtZW50cz9zLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKTpzLmVsZW1lbnRzO2lmKGMmJihjPWUubWFrZUFycmF5KGMpKSx1JiYodHx8LyhFZGdlfFRyaWRlbnQpXFwvLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSYmKG89ZSgnOmlucHV0W2Zvcm09XCInK3UrJ1wiXScpLmdldCgpKS5sZW5ndGgmJihjPShjfHxbXSkuY29uY2F0KG8pKSwhY3x8IWMubGVuZ3RoKXJldHVybiBuO2UuaXNGdW5jdGlvbihhKSYmKGM9ZS5tYXAoYyxhKSk7dmFyIGwsZixkLHAsbSxoLHY7Zm9yKGw9MCxoPWMubGVuZ3RoO2w8aDtsKyspaWYobT1jW2xdLChkPW0ubmFtZSkmJiFtLmRpc2FibGVkKWlmKHQmJnMuY2xrJiZcImltYWdlXCI9PT1tLnR5cGUpcy5jbGs9PT1tJiYobi5wdXNoKHtuYW1lOmQsdmFsdWU6ZShtKS52YWwoKSx0eXBlOm0udHlwZX0pLG4ucHVzaCh7bmFtZTpkK1wiLnhcIix2YWx1ZTpzLmNsa194fSx7bmFtZTpkK1wiLnlcIix2YWx1ZTpzLmNsa195fSkpO2Vsc2UgaWYoKHA9ZS5maWVsZFZhbHVlKG0sITApKSYmcC5jb25zdHJ1Y3Rvcj09PUFycmF5KWZvcihyJiZyLnB1c2gobSksZj0wLHY9cC5sZW5ndGg7Zjx2O2YrKyluLnB1c2goe25hbWU6ZCx2YWx1ZTpwW2ZdfSk7ZWxzZSBpZihpLmZpbGVhcGkmJlwiZmlsZVwiPT09bS50eXBlKXtyJiZyLnB1c2gobSk7dmFyIGc9bS5maWxlcztpZihnLmxlbmd0aClmb3IoZj0wO2Y8Zy5sZW5ndGg7ZisrKW4ucHVzaCh7bmFtZTpkLHZhbHVlOmdbZl0sdHlwZTptLnR5cGV9KTtlbHNlIG4ucHVzaCh7bmFtZTpkLHZhbHVlOlwiXCIsdHlwZTptLnR5cGV9KX1lbHNlIG51bGwhPT1wJiZ2b2lkIDAhPT1wJiYociYmci5wdXNoKG0pLG4ucHVzaCh7bmFtZTpkLHZhbHVlOnAsdHlwZTptLnR5cGUscmVxdWlyZWQ6bS5yZXF1aXJlZH0pKTtpZighdCYmcy5jbGspe3ZhciB4PWUocy5jbGspLHk9eFswXTsoZD15Lm5hbWUpJiYheS5kaXNhYmxlZCYmXCJpbWFnZVwiPT09eS50eXBlJiYobi5wdXNoKHtuYW1lOmQsdmFsdWU6eC52YWwoKX0pLG4ucHVzaCh7bmFtZTpkK1wiLnhcIix2YWx1ZTpzLmNsa194fSx7bmFtZTpkK1wiLnlcIix2YWx1ZTpzLmNsa195fSkpfXJldHVybiBufSxlLmZuLmZvcm1TZXJpYWxpemU9ZnVuY3Rpb24odCl7cmV0dXJuIGUucGFyYW0odGhpcy5mb3JtVG9BcnJheSh0KSl9LGUuZm4uZmllbGRTZXJpYWxpemU9ZnVuY3Rpb24odCl7dmFyIHI9W107cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBhPXRoaXMubmFtZTtpZihhKXt2YXIgbj1lLmZpZWxkVmFsdWUodGhpcyx0KTtpZihuJiZuLmNvbnN0cnVjdG9yPT09QXJyYXkpZm9yKHZhciBpPTAsbz1uLmxlbmd0aDtpPG87aSsrKXIucHVzaCh7bmFtZTphLHZhbHVlOm5baV19KTtlbHNlIG51bGwhPT1uJiZ2b2lkIDAhPT1uJiZyLnB1c2goe25hbWU6dGhpcy5uYW1lLHZhbHVlOm59KX19KSxlLnBhcmFtKHIpfSxlLmZuLmZpZWxkVmFsdWU9ZnVuY3Rpb24odCl7Zm9yKHZhciByPVtdLGE9MCxuPXRoaXMubGVuZ3RoO2E8bjthKyspe3ZhciBpPXRoaXNbYV0sbz1lLmZpZWxkVmFsdWUoaSx0KTtudWxsPT09b3x8dm9pZCAwPT09b3x8by5jb25zdHJ1Y3Rvcj09PUFycmF5JiYhby5sZW5ndGh8fChvLmNvbnN0cnVjdG9yPT09QXJyYXk/ZS5tZXJnZShyLG8pOnIucHVzaChvKSl9cmV0dXJuIHJ9LGUuZmllbGRWYWx1ZT1mdW5jdGlvbih0LHIpe3ZhciBhPXQubmFtZSxpPXQudHlwZSxvPXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpO2lmKHZvaWQgMD09PXImJihyPSEwKSxyJiYoIWF8fHQuZGlzYWJsZWR8fFwicmVzZXRcIj09PWl8fFwiYnV0dG9uXCI9PT1pfHwoXCJjaGVja2JveFwiPT09aXx8XCJyYWRpb1wiPT09aSkmJiF0LmNoZWNrZWR8fChcInN1Ym1pdFwiPT09aXx8XCJpbWFnZVwiPT09aSkmJnQuZm9ybSYmdC5mb3JtLmNsayE9PXR8fFwic2VsZWN0XCI9PT1vJiYtMT09PXQuc2VsZWN0ZWRJbmRleCkpcmV0dXJuIG51bGw7aWYoXCJzZWxlY3RcIj09PW8pe3ZhciBzPXQuc2VsZWN0ZWRJbmRleDtpZihzPDApcmV0dXJuIG51bGw7Zm9yKHZhciB1PVtdLGM9dC5vcHRpb25zLGw9XCJzZWxlY3Qtb25lXCI9PT1pLGY9bD9zKzE6Yy5sZW5ndGgsZD1sP3M6MDtkPGY7ZCsrKXt2YXIgcD1jW2RdO2lmKHAuc2VsZWN0ZWQmJiFwLmRpc2FibGVkKXt2YXIgbT1wLnZhbHVlO2lmKG18fChtPXAuYXR0cmlidXRlcyYmcC5hdHRyaWJ1dGVzLnZhbHVlJiYhcC5hdHRyaWJ1dGVzLnZhbHVlLnNwZWNpZmllZD9wLnRleHQ6cC52YWx1ZSksbClyZXR1cm4gbTt1LnB1c2gobSl9fXJldHVybiB1fXJldHVybiBlKHQpLnZhbCgpLnJlcGxhY2UobixcIlxcclxcblwiKX0sZS5mbi5jbGVhckZvcm09ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2UoXCJpbnB1dCxzZWxlY3QsdGV4dGFyZWFcIix0aGlzKS5jbGVhckZpZWxkcyh0KX0pfSxlLmZuLmNsZWFyRmllbGRzPWUuZm4uY2xlYXJJbnB1dHM9ZnVuY3Rpb24odCl7dmFyIHI9L14oPzpjb2xvcnxkYXRlfGRhdGV0aW1lfGVtYWlsfG1vbnRofG51bWJlcnxwYXNzd29yZHxyYW5nZXxzZWFyY2h8dGVsfHRleHR8dGltZXx1cmx8d2VlaykkL2k7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBhPXRoaXMudHlwZSxuPXRoaXMudGFnTmFtZS50b0xvd2VyQ2FzZSgpO3IudGVzdChhKXx8XCJ0ZXh0YXJlYVwiPT09bj90aGlzLnZhbHVlPVwiXCI6XCJjaGVja2JveFwiPT09YXx8XCJyYWRpb1wiPT09YT90aGlzLmNoZWNrZWQ9ITE6XCJzZWxlY3RcIj09PW4/dGhpcy5zZWxlY3RlZEluZGV4PS0xOlwiZmlsZVwiPT09YT8vTVNJRS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KT9lKHRoaXMpLnJlcGxhY2VXaXRoKGUodGhpcykuY2xvbmUoITApKTplKHRoaXMpLnZhbChcIlwiKTp0JiYoITA9PT10JiYvaGlkZGVuLy50ZXN0KGEpfHxcInN0cmluZ1wiPT10eXBlb2YgdCYmZSh0aGlzKS5pcyh0KSkmJih0aGlzLnZhbHVlPVwiXCIpfSl9LGUuZm4ucmVzZXRGb3JtPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0PWUodGhpcykscj10aGlzLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtzd2l0Y2gocil7Y2FzZVwiaW5wdXRcIjp0aGlzLmNoZWNrZWQ9dGhpcy5kZWZhdWx0Q2hlY2tlZDtjYXNlXCJ0ZXh0YXJlYVwiOnJldHVybiB0aGlzLnZhbHVlPXRoaXMuZGVmYXVsdFZhbHVlLCEwO2Nhc2VcIm9wdGlvblwiOmNhc2VcIm9wdGdyb3VwXCI6dmFyIGE9dC5wYXJlbnRzKFwic2VsZWN0XCIpO3JldHVybiBhLmxlbmd0aCYmYVswXS5tdWx0aXBsZT9cIm9wdGlvblwiPT09cj90aGlzLnNlbGVjdGVkPXRoaXMuZGVmYXVsdFNlbGVjdGVkOnQuZmluZChcIm9wdGlvblwiKS5yZXNldEZvcm0oKTphLnJlc2V0Rm9ybSgpLCEwO2Nhc2VcInNlbGVjdFwiOnJldHVybiB0LmZpbmQoXCJvcHRpb25cIikuZWFjaChmdW5jdGlvbihlKXtpZih0aGlzLnNlbGVjdGVkPXRoaXMuZGVmYXVsdFNlbGVjdGVkLHRoaXMuZGVmYXVsdFNlbGVjdGVkJiYhdFswXS5tdWx0aXBsZSlyZXR1cm4gdFswXS5zZWxlY3RlZEluZGV4PWUsITF9KSwhMDtjYXNlXCJsYWJlbFwiOnZhciBuPWUodC5hdHRyKFwiZm9yXCIpKSxpPXQuZmluZChcImlucHV0LHNlbGVjdCx0ZXh0YXJlYVwiKTtyZXR1cm4gblswXSYmaS51bnNoaWZ0KG5bMF0pLGkucmVzZXRGb3JtKCksITA7Y2FzZVwiZm9ybVwiOnJldHVybihcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLnJlc2V0fHxcIm9iamVjdFwiPT10eXBlb2YgdGhpcy5yZXNldCYmIXRoaXMucmVzZXQubm9kZVR5cGUpJiZ0aGlzLnJlc2V0KCksITA7ZGVmYXVsdDpyZXR1cm4gdC5maW5kKFwiZm9ybSxpbnB1dCxsYWJlbCxzZWxlY3QsdGV4dGFyZWFcIikucmVzZXRGb3JtKCksITB9fSl9LGUuZm4uZW5hYmxlPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0hMCksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dGhpcy5kaXNhYmxlZD0hZX0pfSxlLmZuLnNlbGVjdGVkPWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10JiYodD0hMCksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHI9dGhpcy50eXBlO2lmKFwiY2hlY2tib3hcIj09PXJ8fFwicmFkaW9cIj09PXIpdGhpcy5jaGVja2VkPXQ7ZWxzZSBpZihcIm9wdGlvblwiPT09dGhpcy50YWdOYW1lLnRvTG93ZXJDYXNlKCkpe3ZhciBhPWUodGhpcykucGFyZW50KFwic2VsZWN0XCIpO3QmJmFbMF0mJlwic2VsZWN0LW9uZVwiPT09YVswXS50eXBlJiZhLmZpbmQoXCJvcHRpb25cIikuc2VsZWN0ZWQoITEpLHRoaXMuc2VsZWN0ZWQ9dH19KX0sZS5mbi5hamF4U3VibWl0LmRlYnVnPSExfSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1qcXVlcnkuZm9ybS5taW4uanMubWFwXG4iLCIvKiEgalF1ZXJ5ICYgWmVwdG8gTGF6eSB2MS43LjEwIC0gaHR0cDovL2pxdWVyeS5laXNiZWhyLmRlL2xhenkgLSBNSVQmR1BMLTIuMCBsaWNlbnNlIC0gQ29weXJpZ2h0IDIwMTItMjAxOCBEYW5pZWwgJ0Vpc2JlaHInIEtlcm4gKi9cbiFmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIocixhLGksdSxsKXtmdW5jdGlvbiBmKCl7TD10LmRldmljZVBpeGVsUmF0aW8+MSxpPWMoaSksYS5kZWxheT49MCYmc2V0VGltZW91dChmdW5jdGlvbigpe3MoITApfSxhLmRlbGF5KSwoYS5kZWxheTwwfHxhLmNvbWJpbmVkKSYmKHUuZT12KGEudGhyb3R0bGUsZnVuY3Rpb24odCl7XCJyZXNpemVcIj09PXQudHlwZSYmKHc9Qj0tMSkscyh0LmFsbCl9KSx1LmE9ZnVuY3Rpb24odCl7dD1jKHQpLGkucHVzaC5hcHBseShpLHQpfSx1Lmc9ZnVuY3Rpb24oKXtyZXR1cm4gaT1uKGkpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiFuKHRoaXMpLmRhdGEoYS5sb2FkZWROYW1lKX0pfSx1LmY9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspe3ZhciByPWkuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXM9PT10W2VdfSk7ci5sZW5ndGgmJnMoITEscil9fSxzKCksbihhLmFwcGVuZFNjcm9sbCkub24oXCJzY3JvbGwuXCIrbCtcIiByZXNpemUuXCIrbCx1LmUpKX1mdW5jdGlvbiBjKHQpe3ZhciBpPWEuZGVmYXVsdEltYWdlLG89YS5wbGFjZWhvbGRlcix1PWEuaW1hZ2VCYXNlLGw9YS5zcmNzZXRBdHRyaWJ1dGUsZj1hLmxvYWRlckF0dHJpYnV0ZSxjPWEuX2Z8fHt9O3Q9bih0KS5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgdD1uKHRoaXMpLHI9bSh0aGlzKTtyZXR1cm4hdC5kYXRhKGEuaGFuZGxlZE5hbWUpJiYodC5hdHRyKGEuYXR0cmlidXRlKXx8dC5hdHRyKGwpfHx0LmF0dHIoZil8fGNbcl0hPT1lKX0pLmRhdGEoXCJwbHVnaW5fXCIrYS5uYW1lLHIpO2Zvcih2YXIgcz0wLGQ9dC5sZW5ndGg7czxkO3MrKyl7dmFyIEE9bih0W3NdKSxnPW0odFtzXSksaD1BLmF0dHIoYS5pbWFnZUJhc2VBdHRyaWJ1dGUpfHx1O2c9PT1OJiZoJiZBLmF0dHIobCkmJkEuYXR0cihsLGIoQS5hdHRyKGwpLGgpKSxjW2ddPT09ZXx8QS5hdHRyKGYpfHxBLmF0dHIoZixjW2ddKSxnPT09TiYmaSYmIUEuYXR0cihFKT9BLmF0dHIoRSxpKTpnPT09Tnx8IW98fEEuY3NzKE8pJiZcIm5vbmVcIiE9PUEuY3NzKE8pfHxBLmNzcyhPLFwidXJsKCdcIitvK1wiJylcIil9cmV0dXJuIHR9ZnVuY3Rpb24gcyh0LGUpe2lmKCFpLmxlbmd0aClyZXR1cm4gdm9pZChhLmF1dG9EZXN0cm95JiZyLmRlc3Ryb3koKSk7Zm9yKHZhciBvPWV8fGksdT0hMSxsPWEuaW1hZ2VCYXNlfHxcIlwiLGY9YS5zcmNzZXRBdHRyaWJ1dGUsYz1hLmhhbmRsZWROYW1lLHM9MDtzPG8ubGVuZ3RoO3MrKylpZih0fHxlfHxBKG9bc10pKXt2YXIgZz1uKG9bc10pLGg9bShvW3NdKSxiPWcuYXR0cihhLmF0dHJpYnV0ZSksdj1nLmF0dHIoYS5pbWFnZUJhc2VBdHRyaWJ1dGUpfHxsLHA9Zy5hdHRyKGEubG9hZGVyQXR0cmlidXRlKTtnLmRhdGEoYyl8fGEudmlzaWJsZU9ubHkmJiFnLmlzKFwiOnZpc2libGVcIil8fCEoKGJ8fGcuYXR0cihmKSkmJihoPT09TiYmKHYrYiE9PWcuYXR0cihFKXx8Zy5hdHRyKGYpIT09Zy5hdHRyKEYpKXx8aCE9PU4mJnYrYiE9PWcuY3NzKE8pKXx8cCl8fCh1PSEwLGcuZGF0YShjLCEwKSxkKGcsaCx2LHApKX11JiYoaT1uKGkpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiFuKHRoaXMpLmRhdGEoYyl9KSl9ZnVuY3Rpb24gZCh0LGUscixpKXsrK3o7dmFyIG89ZnVuY3Rpb24oKXt5KFwib25FcnJvclwiLHQpLHAoKSxvPW4ubm9vcH07eShcImJlZm9yZUxvYWRcIix0KTt2YXIgdT1hLmF0dHJpYnV0ZSxsPWEuc3Jjc2V0QXR0cmlidXRlLGY9YS5zaXplc0F0dHJpYnV0ZSxjPWEucmV0aW5hQXR0cmlidXRlLHM9YS5yZW1vdmVBdHRyaWJ1dGUsZD1hLmxvYWRlZE5hbWUsQT10LmF0dHIoYyk7aWYoaSl7dmFyIGc9ZnVuY3Rpb24oKXtzJiZ0LnJlbW92ZUF0dHIoYS5sb2FkZXJBdHRyaWJ1dGUpLHQuZGF0YShkLCEwKSx5KFQsdCksc2V0VGltZW91dChwLDEpLGc9bi5ub29wfTt0Lm9mZihJKS5vbmUoSSxvKS5vbmUoRCxnKSx5KGksdCxmdW5jdGlvbihlKXtlPyh0Lm9mZihEKSxnKCkpOih0Lm9mZihJKSxvKCkpfSl8fHQudHJpZ2dlcihJKX1lbHNle3ZhciBoPW4obmV3IEltYWdlKTtoLm9uZShJLG8pLm9uZShELGZ1bmN0aW9uKCl7dC5oaWRlKCksZT09PU4/dC5hdHRyKEMsaC5hdHRyKEMpKS5hdHRyKEYsaC5hdHRyKEYpKS5hdHRyKEUsaC5hdHRyKEUpKTp0LmNzcyhPLFwidXJsKCdcIitoLmF0dHIoRSkrXCInKVwiKSx0W2EuZWZmZWN0XShhLmVmZmVjdFRpbWUpLHMmJih0LnJlbW92ZUF0dHIodStcIiBcIitsK1wiIFwiK2MrXCIgXCIrYS5pbWFnZUJhc2VBdHRyaWJ1dGUpLGYhPT1DJiZ0LnJlbW92ZUF0dHIoZikpLHQuZGF0YShkLCEwKSx5KFQsdCksaC5yZW1vdmUoKSxwKCl9KTt2YXIgbT0oTCYmQT9BOnQuYXR0cih1KSl8fFwiXCI7aC5hdHRyKEMsdC5hdHRyKGYpKS5hdHRyKEYsdC5hdHRyKGwpKS5hdHRyKEUsbT9yK206bnVsbCksaC5jb21wbGV0ZSYmaC50cmlnZ2VyKEQpfX1mdW5jdGlvbiBBKHQpe3ZhciBlPXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkscj1hLnNjcm9sbERpcmVjdGlvbixuPWEudGhyZXNob2xkLGk9aCgpK24+ZS50b3AmJi1uPGUuYm90dG9tLG89ZygpK24+ZS5sZWZ0JiYtbjxlLnJpZ2h0O3JldHVyblwidmVydGljYWxcIj09PXI/aTpcImhvcml6b250YWxcIj09PXI/bzppJiZvfWZ1bmN0aW9uIGcoKXtyZXR1cm4gdz49MD93Onc9bih0KS53aWR0aCgpfWZ1bmN0aW9uIGgoKXtyZXR1cm4gQj49MD9COkI9bih0KS5oZWlnaHQoKX1mdW5jdGlvbiBtKHQpe3JldHVybiB0LnRhZ05hbWUudG9Mb3dlckNhc2UoKX1mdW5jdGlvbiBiKHQsZSl7aWYoZSl7dmFyIHI9dC5zcGxpdChcIixcIik7dD1cIlwiO2Zvcih2YXIgYT0wLG49ci5sZW5ndGg7YTxuO2ErKyl0Kz1lK3JbYV0udHJpbSgpKyhhIT09bi0xP1wiLFwiOlwiXCIpfXJldHVybiB0fWZ1bmN0aW9uIHYodCxlKXt2YXIgbixpPTA7cmV0dXJuIGZ1bmN0aW9uKG8sdSl7ZnVuY3Rpb24gbCgpe2k9K25ldyBEYXRlLGUuY2FsbChyLG8pfXZhciBmPStuZXcgRGF0ZS1pO24mJmNsZWFyVGltZW91dChuKSxmPnR8fCFhLmVuYWJsZVRocm90dGxlfHx1P2woKTpuPXNldFRpbWVvdXQobCx0LWYpfX1mdW5jdGlvbiBwKCl7LS16LGkubGVuZ3RofHx6fHx5KFwib25GaW5pc2hlZEFsbFwiKX1mdW5jdGlvbiB5KHQsZSxuKXtyZXR1cm4hISh0PWFbdF0pJiYodC5hcHBseShyLFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpKSwhMCl9dmFyIHo9MCx3PS0xLEI9LTEsTD0hMSxUPVwiYWZ0ZXJMb2FkXCIsRD1cImxvYWRcIixJPVwiZXJyb3JcIixOPVwiaW1nXCIsRT1cInNyY1wiLEY9XCJzcmNzZXRcIixDPVwic2l6ZXNcIixPPVwiYmFja2dyb3VuZC1pbWFnZVwiO1wiZXZlbnRcIj09PWEuYmluZHx8bz9mKCk6bih0KS5vbihEK1wiLlwiK2wsZil9ZnVuY3Rpb24gYShhLG8pe3ZhciB1PXRoaXMsbD1uLmV4dGVuZCh7fSx1LmNvbmZpZyxvKSxmPXt9LGM9bC5uYW1lK1wiLVwiKyArK2k7cmV0dXJuIHUuY29uZmlnPWZ1bmN0aW9uKHQscil7cmV0dXJuIHI9PT1lP2xbdF06KGxbdF09cix1KX0sdS5hZGRJdGVtcz1mdW5jdGlvbih0KXtyZXR1cm4gZi5hJiZmLmEoXCJzdHJpbmdcIj09PW4udHlwZSh0KT9uKHQpOnQpLHV9LHUuZ2V0SXRlbXM9ZnVuY3Rpb24oKXtyZXR1cm4gZi5nP2YuZygpOnt9fSx1LnVwZGF0ZT1mdW5jdGlvbih0KXtyZXR1cm4gZi5lJiZmLmUoe30sIXQpLHV9LHUuZm9yY2U9ZnVuY3Rpb24odCl7cmV0dXJuIGYuZiYmZi5mKFwic3RyaW5nXCI9PT1uLnR5cGUodCk/bih0KTp0KSx1fSx1LmxvYWRBbGw9ZnVuY3Rpb24oKXtyZXR1cm4gZi5lJiZmLmUoe2FsbDohMH0sITApLHV9LHUuZGVzdHJveT1mdW5jdGlvbigpe3JldHVybiBuKGwuYXBwZW5kU2Nyb2xsKS5vZmYoXCIuXCIrYyxmLmUpLG4odCkub2ZmKFwiLlwiK2MpLGY9e30sZX0scih1LGwsYSxmLGMpLGwuY2hhaW5hYmxlP2E6dX12YXIgbj10LmpRdWVyeXx8dC5aZXB0byxpPTAsbz0hMTtuLmZuLkxhenk9bi5mbi5sYXp5PWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgYSh0aGlzLHQpfSxuLkxhenk9bi5sYXp5PWZ1bmN0aW9uKHQscixpKXtpZihuLmlzRnVuY3Rpb24ocikmJihpPXIscj1bXSksbi5pc0Z1bmN0aW9uKGkpKXt0PW4uaXNBcnJheSh0KT90Olt0XSxyPW4uaXNBcnJheShyKT9yOltyXTtmb3IodmFyIG89YS5wcm90b3R5cGUuY29uZmlnLHU9by5fZnx8KG8uX2Y9e30pLGw9MCxmPXQubGVuZ3RoO2w8ZjtsKyspKG9bdFtsXV09PT1lfHxuLmlzRnVuY3Rpb24ob1t0W2xdXSkpJiYob1t0W2xdXT1pKTtmb3IodmFyIGM9MCxzPXIubGVuZ3RoO2M8cztjKyspdVtyW2NdXT10WzBdfX0sYS5wcm90b3R5cGUuY29uZmlnPXtuYW1lOlwibGF6eVwiLGNoYWluYWJsZTohMCxhdXRvRGVzdHJveTohMCxiaW5kOlwibG9hZFwiLHRocmVzaG9sZDo1MDAsdmlzaWJsZU9ubHk6ITEsYXBwZW5kU2Nyb2xsOnQsc2Nyb2xsRGlyZWN0aW9uOlwiYm90aFwiLGltYWdlQmFzZTpudWxsLGRlZmF1bHRJbWFnZTpcImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBSUFBQVAvLy93QUFBQ0g1QkFFQUFBQUFMQUFBQUFBQkFBRUFBQUlDUkFFQU93PT1cIixwbGFjZWhvbGRlcjpudWxsLGRlbGF5Oi0xLGNvbWJpbmVkOiExLGF0dHJpYnV0ZTpcImRhdGEtc3JjXCIsc3Jjc2V0QXR0cmlidXRlOlwiZGF0YS1zcmNzZXRcIixzaXplc0F0dHJpYnV0ZTpcImRhdGEtc2l6ZXNcIixyZXRpbmFBdHRyaWJ1dGU6XCJkYXRhLXJldGluYVwiLGxvYWRlckF0dHJpYnV0ZTpcImRhdGEtbG9hZGVyXCIsaW1hZ2VCYXNlQXR0cmlidXRlOlwiZGF0YS1pbWFnZWJhc2VcIixyZW1vdmVBdHRyaWJ1dGU6ITAsaGFuZGxlZE5hbWU6XCJoYW5kbGVkXCIsbG9hZGVkTmFtZTpcImxvYWRlZFwiLGVmZmVjdDpcInNob3dcIixlZmZlY3RUaW1lOjAsZW5hYmxlVGhyb3R0bGU6ITAsdGhyb3R0bGU6MjUwLGJlZm9yZUxvYWQ6ZSxhZnRlckxvYWQ6ZSxvbkVycm9yOmUsb25GaW5pc2hlZEFsbDplfSxuKHQpLm9uKFwibG9hZFwiLGZ1bmN0aW9uKCl7bz0hMH0pfSh3aW5kb3cpOyIsIi8qZ2xvYmFsIGpRdWVyeSAqL1xuLyohXG4qIExldHRlcmluZy5KUyAwLjcuMFxuKlxuKiBDb3B5cmlnaHQgMjAxMCwgRGF2ZSBSdXBlcnQgaHR0cDovL2RhdmVydXBlcnQuY29tXG4qIFJlbGVhc2VkIHVuZGVyIHRoZSBXVEZQTCBsaWNlbnNlXG4qIGh0dHA6Ly9zYW0uem95Lm9yZy93dGZwbC9cbipcbiogVGhhbmtzIHRvIFBhdWwgSXJpc2ggLSBodHRwOi8vcGF1bGlyaXNoLmNvbSAtIGZvciB0aGUgZmVlZGJhY2suXG4qXG4qIERhdGU6IE1vbiBTZXAgMjAgMTc6MTQ6MDAgMjAxMCAtMDYwMFxuKi9cbihmdW5jdGlvbigkKXtcblx0ZnVuY3Rpb24gaW5qZWN0b3IodCwgc3BsaXR0ZXIsIGtsYXNzLCBhZnRlcikge1xuXHRcdHZhciB0ZXh0ID0gdC50ZXh0KClcblx0XHQsIGEgPSB0ZXh0LnNwbGl0KHNwbGl0dGVyKVxuXHRcdCwgaW5qZWN0ID0gJyc7XG5cdFx0aWYgKGEubGVuZ3RoKSB7XG5cdFx0XHQkKGEpLmVhY2goZnVuY3Rpb24oaSwgaXRlbSkge1xuXHRcdFx0XHRpbmplY3QgKz0gJzxzcGFuIGNsYXNzPVwiJytrbGFzcysoaSsxKSsnXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+JytpdGVtKyc8L3NwYW4+JythZnRlcjtcblx0XHRcdH0pO1xuXHRcdFx0dC5hdHRyKCdhcmlhLWxhYmVsJyx0ZXh0KVxuXHRcdFx0LmVtcHR5KClcblx0XHRcdC5hcHBlbmQoaW5qZWN0KVxuXG5cdFx0fVxuXHR9XG5cblxuXHR2YXIgbWV0aG9kcyA9IHtcblx0XHRpbml0IDogZnVuY3Rpb24oKSB7XG5cblx0XHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGluamVjdG9yKCQodGhpcyksICcnLCAnY2hhcicsICcnKTtcblx0XHRcdH0pO1xuXG5cdFx0fSxcblxuXHRcdHdvcmRzIDogZnVuY3Rpb24oKSB7XG5cblx0XHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGluamVjdG9yKCQodGhpcyksICcgJywgJ3dvcmQnLCAnICcpO1xuXHRcdFx0fSk7XG5cblx0XHR9LFxuXG5cdFx0bGluZXMgOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIHIgPSBcImVlZmVjMzAzMDc5YWQxNzQwNWM4ODllMDkyZTEwNWIwXCI7XG5cdFx0XHRcdC8vIEJlY2F1c2UgaXQncyBoYXJkIHRvIHNwbGl0IGEgPGJyLz4gdGFnIGNvbnNpc3RlbnRseSBhY3Jvc3MgYnJvd3NlcnMsXG5cdFx0XHRcdC8vICgqYWhlbSogSUUgKmFoZW0qKSwgd2UgcmVwbGFjZSBhbGwgPGJyLz4gaW5zdGFuY2VzIHdpdGggYW4gbWQ1IGhhc2hcblx0XHRcdFx0Ly8gKG9mIHRoZSB3b3JkIFwic3BsaXRcIikuICBJZiB5b3UncmUgdHJ5aW5nIHRvIHVzZSB0aGlzIHBsdWdpbiBvbiB0aGF0XG5cdFx0XHRcdC8vIG1kNSBoYXNoIHN0cmluZywgaXQgd2lsbCBmYWlsIGJlY2F1c2UgeW91J3JlIGJlaW5nIHJpZGljdWxvdXMuXG5cdFx0XHRcdGluamVjdG9yKCQodGhpcykuY2hpbGRyZW4oXCJiclwiKS5yZXBsYWNlV2l0aChyKS5lbmQoKSwgciwgJ2xpbmUnLCAnJyk7XG5cdFx0XHR9KTtcblxuXHRcdH1cblx0fTtcblxuXHQkLmZuLmxldHRlcmluZyA9IGZ1bmN0aW9uKCBtZXRob2QgKSB7XG5cdFx0Ly8gTWV0aG9kIGNhbGxpbmcgbG9naWNcblx0XHRpZiAoIG1ldGhvZCAmJiBtZXRob2RzW21ldGhvZF0gKSB7XG5cdFx0XHRyZXR1cm4gbWV0aG9kc1sgbWV0aG9kIF0uYXBwbHkoIHRoaXMsIFtdLnNsaWNlLmNhbGwoIGFyZ3VtZW50cywgMSApKTtcblx0XHR9IGVsc2UgaWYgKCBtZXRob2QgPT09ICdsZXR0ZXJzJyB8fCAhIG1ldGhvZCApIHtcblx0XHRcdHJldHVybiBtZXRob2RzLmluaXQuYXBwbHkoIHRoaXMsIFtdLnNsaWNlLmNhbGwoIGFyZ3VtZW50cywgMCApICk7IC8vIGFsd2F5cyBwYXNzIGFuIGFycmF5XG5cdFx0fVxuXHRcdCQuZXJyb3IoICdNZXRob2QgJyArICBtZXRob2QgKyAnIGRvZXMgbm90IGV4aXN0IG9uIGpRdWVyeS5sZXR0ZXJpbmcnICk7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH07XG5cbn0pKGpRdWVyeSk7XG4iLCIvKipcclxuICogQ29weXJpZ2h0IChjKSAyMDA3LTIwMTUgQXJpZWwgRmxlc2xlciAtIGFmbGVzbGVyPGE+Z21haWw8ZD5jb20gfCBodHRwOi8vZmxlc2xlci5ibG9nc3BvdC5jb21cclxuICogTGljZW5zZWQgdW5kZXIgTUlUXHJcbiAqIEBhdXRob3IgQXJpZWwgRmxlc2xlclxyXG4gKiBAdmVyc2lvbiAxLjQuMFxyXG4gKi9cclxuOyhmdW5jdGlvbihhKXtpZih0eXBlb2YgZGVmaW5lPT09J2Z1bmN0aW9uJyYmZGVmaW5lLmFtZCl7ZGVmaW5lKFsnanF1ZXJ5J10sYSl9ZWxzZXthKGpRdWVyeSl9fShmdW5jdGlvbigkKXt2YXIgZz1sb2NhdGlvbi5ocmVmLnJlcGxhY2UoLyMuKi8sJycpO3ZhciBoPSQubG9jYWxTY3JvbGw9ZnVuY3Rpb24oYSl7JCgnYm9keScpLmxvY2FsU2Nyb2xsKGEpfTtoLmRlZmF1bHRzPXtkdXJhdGlvbjoxMDAwLGF4aXM6J3knLGV2ZW50OidjbGljaycsc3RvcDp0cnVlLHRhcmdldDp3aW5kb3d9OyQuZm4ubG9jYWxTY3JvbGw9ZnVuY3Rpb24oYSl7YT0kLmV4dGVuZCh7fSxoLmRlZmF1bHRzLGEpO2lmKGEuaGFzaCYmbG9jYXRpb24uaGFzaCl7aWYoYS50YXJnZXQpd2luZG93LnNjcm9sbFRvKDAsMCk7c2Nyb2xsKDAsbG9jYXRpb24sYSl9cmV0dXJuIGEubGF6eT90aGlzLm9uKGEuZXZlbnQsJ2EsYXJlYScsZnVuY3Rpb24oZSl7aWYoZmlsdGVyLmNhbGwodGhpcykpe3Njcm9sbChlLHRoaXMsYSl9fSk6dGhpcy5maW5kKCdhLGFyZWEnKS5maWx0ZXIoZmlsdGVyKS5iaW5kKGEuZXZlbnQsZnVuY3Rpb24oZSl7c2Nyb2xsKGUsdGhpcyxhKX0pLmVuZCgpLmVuZCgpO2Z1bmN0aW9uIGZpbHRlcigpe3JldHVybiEhdGhpcy5ocmVmJiYhIXRoaXMuaGFzaCYmdGhpcy5ocmVmLnJlcGxhY2UodGhpcy5oYXNoLCcnKT09PWcmJighYS5maWx0ZXJ8fCQodGhpcykuaXMoYS5maWx0ZXIpKX19O2guaGFzaD1mdW5jdGlvbigpe307ZnVuY3Rpb24gc2Nyb2xsKGUsYSxiKXt2YXIgYz1hLmhhc2guc2xpY2UoMSksZWxlbT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChjKXx8ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoYylbMF07aWYoIWVsZW0pcmV0dXJuO2lmKGUpZS5wcmV2ZW50RGVmYXVsdCgpO3ZhciBkPSQoYi50YXJnZXQpO2lmKGIubG9jayYmZC5pcygnOmFuaW1hdGVkJyl8fGIub25CZWZvcmUmJmIub25CZWZvcmUoZSxlbGVtLGQpPT09ZmFsc2UpcmV0dXJuO2lmKGIuc3RvcCl7ZC5zdG9wKHRydWUpfWlmKGIuaGFzaCl7dmFyIGY9ZWxlbS5pZD09PWM/J2lkJzonbmFtZScsJGE9JCgnPGE+IDwvYT4nKS5hdHRyKGYsYykuY3NzKHtwb3NpdGlvbjonYWJzb2x1dGUnLHRvcDokKHdpbmRvdykuc2Nyb2xsVG9wKCksbGVmdDokKHdpbmRvdykuc2Nyb2xsTGVmdCgpfSk7ZWxlbVtmXT0nJzskKCdib2R5JykucHJlcGVuZCgkYSk7bG9jYXRpb24uaGFzaD1hLmhhc2g7JGEucmVtb3ZlKCk7ZWxlbVtmXT1jfWQuc2Nyb2xsVG8oZWxlbSxiKS50cmlnZ2VyKCdub3RpZnkuc2VyaWFsU2Nyb2xsJyxbZWxlbV0pfXJldHVybiBofSkpOyIsIi8qISBDb3B5cmlnaHQgKGMpIDIwMTMgQnJhbmRvbiBBYXJvbiAoaHR0cDovL2JyYW5kb24uYWFyb24uc2gpXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZSAoTElDRU5TRS50eHQpLlxyXG4gKlxyXG4gKiBWZXJzaW9uOiAzLjEuMTJcclxuICpcclxuICogUmVxdWlyZXM6IGpRdWVyeSAxLjIuMitcclxuICovXHJcbiFmdW5jdGlvbihhKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImpxdWVyeVwiXSxhKTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1hOmEoalF1ZXJ5KX0oZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihiKXt2YXIgZz1ifHx3aW5kb3cuZXZlbnQsaD1pLmNhbGwoYXJndW1lbnRzLDEpLGo9MCxsPTAsbT0wLG49MCxvPTAscD0wO2lmKGI9YS5ldmVudC5maXgoZyksYi50eXBlPVwibW91c2V3aGVlbFwiLFwiZGV0YWlsXCJpbiBnJiYobT0tMSpnLmRldGFpbCksXCJ3aGVlbERlbHRhXCJpbiBnJiYobT1nLndoZWVsRGVsdGEpLFwid2hlZWxEZWx0YVlcImluIGcmJihtPWcud2hlZWxEZWx0YVkpLFwid2hlZWxEZWx0YVhcImluIGcmJihsPS0xKmcud2hlZWxEZWx0YVgpLFwiYXhpc1wiaW4gZyYmZy5heGlzPT09Zy5IT1JJWk9OVEFMX0FYSVMmJihsPS0xKm0sbT0wKSxqPTA9PT1tP2w6bSxcImRlbHRhWVwiaW4gZyYmKG09LTEqZy5kZWx0YVksaj1tKSxcImRlbHRhWFwiaW4gZyYmKGw9Zy5kZWx0YVgsMD09PW0mJihqPS0xKmwpKSwwIT09bXx8MCE9PWwpe2lmKDE9PT1nLmRlbHRhTW9kZSl7dmFyIHE9YS5kYXRhKHRoaXMsXCJtb3VzZXdoZWVsLWxpbmUtaGVpZ2h0XCIpO2oqPXEsbSo9cSxsKj1xfWVsc2UgaWYoMj09PWcuZGVsdGFNb2RlKXt2YXIgcj1hLmRhdGEodGhpcyxcIm1vdXNld2hlZWwtcGFnZS1oZWlnaHRcIik7aio9cixtKj1yLGwqPXJ9aWYobj1NYXRoLm1heChNYXRoLmFicyhtKSxNYXRoLmFicyhsKSksKCFmfHxmPm4pJiYoZj1uLGQoZyxuKSYmKGYvPTQwKSksZChnLG4pJiYoai89NDAsbC89NDAsbS89NDApLGo9TWF0aFtqPj0xP1wiZmxvb3JcIjpcImNlaWxcIl0oai9mKSxsPU1hdGhbbD49MT9cImZsb29yXCI6XCJjZWlsXCJdKGwvZiksbT1NYXRoW20+PTE/XCJmbG9vclwiOlwiY2VpbFwiXShtL2YpLGsuc2V0dGluZ3Mubm9ybWFsaXplT2Zmc2V0JiZ0aGlzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCl7dmFyIHM9dGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtvPWIuY2xpZW50WC1zLmxlZnQscD1iLmNsaWVudFktcy50b3B9cmV0dXJuIGIuZGVsdGFYPWwsYi5kZWx0YVk9bSxiLmRlbHRhRmFjdG9yPWYsYi5vZmZzZXRYPW8sYi5vZmZzZXRZPXAsYi5kZWx0YU1vZGU9MCxoLnVuc2hpZnQoYixqLGwsbSksZSYmY2xlYXJUaW1lb3V0KGUpLGU9c2V0VGltZW91dChjLDIwMCksKGEuZXZlbnQuZGlzcGF0Y2h8fGEuZXZlbnQuaGFuZGxlKS5hcHBseSh0aGlzLGgpfX1mdW5jdGlvbiBjKCl7Zj1udWxsfWZ1bmN0aW9uIGQoYSxiKXtyZXR1cm4gay5zZXR0aW5ncy5hZGp1c3RPbGREZWx0YXMmJlwibW91c2V3aGVlbFwiPT09YS50eXBlJiZiJTEyMD09PTB9dmFyIGUsZixnPVtcIndoZWVsXCIsXCJtb3VzZXdoZWVsXCIsXCJET01Nb3VzZVNjcm9sbFwiLFwiTW96TW91c2VQaXhlbFNjcm9sbFwiXSxoPVwib253aGVlbFwiaW4gZG9jdW1lbnR8fGRvY3VtZW50LmRvY3VtZW50TW9kZT49OT9bXCJ3aGVlbFwiXTpbXCJtb3VzZXdoZWVsXCIsXCJEb21Nb3VzZVNjcm9sbFwiLFwiTW96TW91c2VQaXhlbFNjcm9sbFwiXSxpPUFycmF5LnByb3RvdHlwZS5zbGljZTtpZihhLmV2ZW50LmZpeEhvb2tzKWZvcih2YXIgaj1nLmxlbmd0aDtqOylhLmV2ZW50LmZpeEhvb2tzW2dbLS1qXV09YS5ldmVudC5tb3VzZUhvb2tzO3ZhciBrPWEuZXZlbnQuc3BlY2lhbC5tb3VzZXdoZWVsPXt2ZXJzaW9uOlwiMy4xLjEyXCIsc2V0dXA6ZnVuY3Rpb24oKXtpZih0aGlzLmFkZEV2ZW50TGlzdGVuZXIpZm9yKHZhciBjPWgubGVuZ3RoO2M7KXRoaXMuYWRkRXZlbnRMaXN0ZW5lcihoWy0tY10sYiwhMSk7ZWxzZSB0aGlzLm9ubW91c2V3aGVlbD1iO2EuZGF0YSh0aGlzLFwibW91c2V3aGVlbC1saW5lLWhlaWdodFwiLGsuZ2V0TGluZUhlaWdodCh0aGlzKSksYS5kYXRhKHRoaXMsXCJtb3VzZXdoZWVsLXBhZ2UtaGVpZ2h0XCIsay5nZXRQYWdlSGVpZ2h0KHRoaXMpKX0sdGVhcmRvd246ZnVuY3Rpb24oKXtpZih0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIpZm9yKHZhciBjPWgubGVuZ3RoO2M7KXRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihoWy0tY10sYiwhMSk7ZWxzZSB0aGlzLm9ubW91c2V3aGVlbD1udWxsO2EucmVtb3ZlRGF0YSh0aGlzLFwibW91c2V3aGVlbC1saW5lLWhlaWdodFwiKSxhLnJlbW92ZURhdGEodGhpcyxcIm1vdXNld2hlZWwtcGFnZS1oZWlnaHRcIil9LGdldExpbmVIZWlnaHQ6ZnVuY3Rpb24oYil7dmFyIGM9YShiKSxkPWNbXCJvZmZzZXRQYXJlbnRcImluIGEuZm4/XCJvZmZzZXRQYXJlbnRcIjpcInBhcmVudFwiXSgpO3JldHVybiBkLmxlbmd0aHx8KGQ9YShcImJvZHlcIikpLHBhcnNlSW50KGQuY3NzKFwiZm9udFNpemVcIiksMTApfHxwYXJzZUludChjLmNzcyhcImZvbnRTaXplXCIpLDEwKXx8MTZ9LGdldFBhZ2VIZWlnaHQ6ZnVuY3Rpb24oYil7cmV0dXJuIGEoYikuaGVpZ2h0KCl9LHNldHRpbmdzOnthZGp1c3RPbGREZWx0YXM6ITAsbm9ybWFsaXplT2Zmc2V0OiEwfX07YS5mbi5leHRlbmQoe21vdXNld2hlZWw6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/dGhpcy5iaW5kKFwibW91c2V3aGVlbFwiLGEpOnRoaXMudHJpZ2dlcihcIm1vdXNld2hlZWxcIil9LHVubW91c2V3aGVlbDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy51bmJpbmQoXCJtb3VzZXdoZWVsXCIsYSl9fSl9KTsiLCIvKlxyXG5QbHVnaW46IGpRdWVyeSBQYXJhbGxheFxyXG5WZXJzaW9uIDEuMS4zXHJcbkF1dGhvcjogSWFuIEx1bm5cclxuVHdpdHRlcjogQElhbkx1bm5cclxuQXV0aG9yIFVSTDogaHR0cDovL3d3dy5pYW5sdW5uLmNvLnVrL1xyXG5QbHVnaW4gVVJMOiBodHRwOi8vd3d3Lmlhbmx1bm4uY28udWsvcGx1Z2lucy9qcXVlcnktcGFyYWxsYXgvXHJcblxyXG5EdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgYW5kIEdQTCBsaWNlbnNlczpcclxuaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcclxuaHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzL2dwbC5odG1sXHJcbiovXHJcblxyXG4oZnVuY3Rpb24oICQgKXtcclxuXHR2YXIgJHdpbmRvdyA9ICQod2luZG93KTtcclxuXHR2YXIgd2luZG93SGVpZ2h0ID0gJHdpbmRvdy5oZWlnaHQoKTtcclxuXHJcblx0JHdpbmRvdy5yZXNpemUoZnVuY3Rpb24gKCkge1xyXG5cdFx0d2luZG93SGVpZ2h0ID0gJHdpbmRvdy5oZWlnaHQoKTtcclxuXHR9KTtcclxuXHJcblx0JC5mbi5wYXJhbGxheCA9IGZ1bmN0aW9uKHhwb3MsIHNwZWVkRmFjdG9yLCBvdXRlckhlaWdodCkge1xyXG5cdFx0dmFyICR0aGlzID0gJCh0aGlzKTtcclxuXHRcdHZhciBnZXRIZWlnaHQ7XHJcblx0XHR2YXIgZmlyc3RUb3A7XHJcblx0XHR2YXIgcGFkZGluZ1RvcCA9IDA7XHJcblx0XHRcclxuXHRcdC8vZ2V0IHRoZSBzdGFydGluZyBwb3NpdGlvbiBvZiBlYWNoIGVsZW1lbnQgdG8gaGF2ZSBwYXJhbGxheCBhcHBsaWVkIHRvIGl0XHRcdFxyXG5cdFx0JHRoaXMuZWFjaChmdW5jdGlvbigpe1xyXG5cdFx0ICAgIGZpcnN0VG9wID0gJHRoaXMub2Zmc2V0KCkudG9wO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0aWYgKG91dGVySGVpZ2h0KSB7XHJcblx0XHRcdGdldEhlaWdodCA9IGZ1bmN0aW9uKGpxbykge1xyXG5cdFx0XHRcdHJldHVybiBqcW8ub3V0ZXJIZWlnaHQodHJ1ZSk7XHJcblx0XHRcdH07XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRnZXRIZWlnaHQgPSBmdW5jdGlvbihqcW8pIHtcclxuXHRcdFx0XHRyZXR1cm4ganFvLmhlaWdodCgpO1xyXG5cdFx0XHR9O1xyXG5cdFx0fVxyXG5cdFx0XHRcclxuXHRcdC8vIHNldHVwIGRlZmF1bHRzIGlmIGFyZ3VtZW50cyBhcmVuJ3Qgc3BlY2lmaWVkXHJcblx0XHRpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDEgfHwgeHBvcyA9PT0gbnVsbCkgeHBvcyA9IFwiNTAlXCI7XHJcblx0XHRpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIgfHwgc3BlZWRGYWN0b3IgPT09IG51bGwpIHNwZWVkRmFjdG9yID0gMC4xO1xyXG5cdFx0aWYgKGFyZ3VtZW50cy5sZW5ndGggPCAzIHx8IG91dGVySGVpZ2h0ID09PSBudWxsKSBvdXRlckhlaWdodCA9IHRydWU7XHJcblx0XHRcclxuXHRcdC8vIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuZXZlciB0aGUgd2luZG93IGlzIHNjcm9sbGVkIG9yIHJlc2l6ZWRcclxuXHRcdGZ1bmN0aW9uIHVwZGF0ZSgpe1xyXG5cdFx0XHR2YXIgcG9zID0gJHdpbmRvdy5zY3JvbGxUb3AoKTtcdFx0XHRcdFxyXG5cclxuXHRcdFx0JHRoaXMuZWFjaChmdW5jdGlvbigpe1xyXG5cdFx0XHRcdHZhciAkZWxlbWVudCA9ICQodGhpcyk7XHJcblx0XHRcdFx0dmFyIHRvcCA9ICRlbGVtZW50Lm9mZnNldCgpLnRvcDtcclxuXHRcdFx0XHR2YXIgaGVpZ2h0ID0gZ2V0SGVpZ2h0KCRlbGVtZW50KTtcclxuXHJcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgdG90YWxseSBhYm92ZSBvciB0b3RhbGx5IGJlbG93IHZpZXdwb3J0XHJcblx0XHRcdFx0aWYgKHRvcCArIGhlaWdodCA8IHBvcyB8fCB0b3AgPiBwb3MgKyB3aW5kb3dIZWlnaHQpIHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdCR0aGlzLmNzcygnYmFja2dyb3VuZFBvc2l0aW9uJywgeHBvcyArIFwiIFwiICsgTWF0aC5yb3VuZCgoZmlyc3RUb3AgLSBwb3MpICogc3BlZWRGYWN0b3IpICsgXCJweFwiKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHRcdFxyXG5cclxuXHRcdCR3aW5kb3cuYmluZCgnc2Nyb2xsJywgdXBkYXRlKS5yZXNpemUodXBkYXRlKTtcclxuXHRcdHVwZGF0ZSgpO1xyXG5cdH07XHJcbn0pKGpRdWVyeSk7XHJcbiIsIi8qKlxyXG4gKiBqUXVlcnkgcGx1Z2luIHBhcm9sbGVyLmpzIHYxLjQuNlxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vdGdvbWlsYXIvcGFyb2xsZXIuanNcclxuICogcHJldmlldzogaHR0cHM6Ly90Z29taWxhci5naXRodWIuaW8vcGFyb2xsZXIvXHJcbiAqKi9cclxuKGZ1bmN0aW9uIChmYWN0b3J5KSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XHJcbiAgICAgICAgZGVmaW5lKCdwYXJvbGxlcmpzJywgWydqcXVlcnknXSwgZmFjdG9yeSk7XHJcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZSgnanF1ZXJ5JykpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgZmFjdG9yeShqUXVlcnkpO1xyXG4gICAgfVxyXG59KShmdW5jdGlvbiAoJCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHZhciB3b3JraW5nID0gZmFsc2U7XHJcbiAgICB2YXIgc2Nyb2xsQWN0aW9uID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgd29ya2luZyA9IGZhbHNlO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgc2V0RGlyZWN0aW9uID0ge1xyXG4gICAgICAgIGJnVmVydGljYWw6IGZ1bmN0aW9uIChlbGVtLCBiZ09mZnNldCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZWxlbS5jc3MoeydiYWNrZ3JvdW5kLXBvc2l0aW9uJzogJ2NlbnRlciAnICsgLWJnT2Zmc2V0ICsgJ3B4J30pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYmdIb3Jpem9udGFsOiBmdW5jdGlvbiAoZWxlbSwgYmdPZmZzZXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGVsZW0uY3NzKHsnYmFja2dyb3VuZC1wb3NpdGlvbic6IC1iZ09mZnNldCArICdweCcgKyAnIGNlbnRlcid9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHZlcnRpY2FsOiBmdW5jdGlvbiAoZWxlbSwgZWxlbU9mZnNldCwgdHJhbnNpdGlvbiwgb2xkVHJhbnNmb3JtKSB7XHJcbiAgICAgICAgICAgIChvbGRUcmFuc2Zvcm0gPT09ICdub25lJyA/IG9sZFRyYW5zZm9ybSA9ICcnIDogdHJ1ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBlbGVtLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiAndHJhbnNsYXRlWSgnICsgZWxlbU9mZnNldCArICdweCknICsgb2xkVHJhbnNmb3JtLFxyXG4gICAgICAgICAgICAgICAgJy1tb3otdHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVkoJyArIGVsZW1PZmZzZXQgKyAncHgpJyArIG9sZFRyYW5zZm9ybSxcclxuICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nOiAndHJhbnNsYXRlKDAsJyArIGVsZW1PZmZzZXQgKyAncHgpJyArIG9sZFRyYW5zZm9ybSxcclxuICAgICAgICAgICAgICAgICd0cmFuc2l0aW9uJzogdHJhbnNpdGlvbixcclxuICAgICAgICAgICAgICAgICd3aWxsLWNoYW5nZSc6ICd0cmFuc2Zvcm0nXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaG9yaXpvbnRhbDogZnVuY3Rpb24gKGVsZW0sIGVsZW1PZmZzZXQsIHRyYW5zaXRpb24sIG9sZFRyYW5zZm9ybSkge1xyXG4gICAgICAgICAgICAob2xkVHJhbnNmb3JtID09PSAnbm9uZScgPyBvbGRUcmFuc2Zvcm0gPSAnJyA6IHRydWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gZWxlbS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVgoJyArIGVsZW1PZmZzZXQgKyAncHgpJyArIG9sZFRyYW5zZm9ybSxcclxuICAgICAgICAgICAgICAgICctbW96LXRyYW5zZm9ybSc6ICd0cmFuc2xhdGVYKCcgKyBlbGVtT2Zmc2V0ICsgJ3B4KScgKyBvbGRUcmFuc2Zvcm0sXHJcbiAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZSgnICsgZWxlbU9mZnNldCArICdweCwgMCknICsgb2xkVHJhbnNmb3JtLFxyXG4gICAgICAgICAgICAgICAgJ3RyYW5zaXRpb24nOiB0cmFuc2l0aW9uLFxyXG4gICAgICAgICAgICAgICAgJ3dpbGwtY2hhbmdlJzogJ3RyYW5zZm9ybSdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgc2V0TW92ZW1lbnQgPSB7XHJcbiAgICAgICAgZmFjdG9yOiBmdW5jdGlvbiAoZWxlbSwgd2lkdGgsIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgdmFyIGRhdGFGYWN0b3IgPSBlbGVtLmRhdGEoJ3Bhcm9sbGVyLWZhY3RvcicpO1xyXG4gICAgICAgICAgICB2YXIgZmFjdG9yID0gKGRhdGFGYWN0b3IpID8gZGF0YUZhY3RvciA6IG9wdGlvbnMuZmFjdG9yO1xyXG4gICAgICAgICAgICBpZiAod2lkdGggPCA1NzYpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhRmFjdG9yWHMgPSBlbGVtLmRhdGEoJ3Bhcm9sbGVyLWZhY3Rvci14cycpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGZhY3RvclhzID0gKGRhdGFGYWN0b3JYcykgPyBkYXRhRmFjdG9yWHMgOiBvcHRpb25zLmZhY3RvclhzO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChmYWN0b3JYcykgPyBmYWN0b3JYcyA6IGZhY3RvcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh3aWR0aCA8PSA3NjgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhRmFjdG9yU20gPSBlbGVtLmRhdGEoJ3Bhcm9sbGVyLWZhY3Rvci1zbScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGZhY3RvclNtID0gKGRhdGFGYWN0b3JTbSkgPyBkYXRhRmFjdG9yU20gOiBvcHRpb25zLmZhY3RvclNtO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChmYWN0b3JTbSkgPyBmYWN0b3JTbSA6IGZhY3RvcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh3aWR0aCA8PSAxMDI0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YUZhY3Rvck1kID0gZWxlbS5kYXRhKCdwYXJvbGxlci1mYWN0b3ItbWQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBmYWN0b3JNZCA9IChkYXRhRmFjdG9yTWQpID8gZGF0YUZhY3Rvck1kIDogb3B0aW9ucy5mYWN0b3JNZDtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoZmFjdG9yTWQpID8gZmFjdG9yTWQgOiBmYWN0b3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAod2lkdGggPD0gMTIwMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGFGYWN0b3JMZyA9IGVsZW0uZGF0YSgncGFyb2xsZXItZmFjdG9yLWxnJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZmFjdG9yTGcgPSAoZGF0YUZhY3RvckxnKSA/IGRhdGFGYWN0b3JMZyA6IG9wdGlvbnMuZmFjdG9yTGc7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKGZhY3RvckxnKSA/IGZhY3RvckxnIDogZmFjdG9yO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHdpZHRoIDw9IDE5MjApIHtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhRmFjdG9yWGwgPSBlbGVtLmRhdGEoJ3Bhcm9sbGVyLWZhY3Rvci14bCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGZhY3RvclhsID0gKGRhdGFGYWN0b3JYbCkgPyBkYXRhRmFjdG9yWGwgOiBvcHRpb25zLmZhY3RvclhsO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChmYWN0b3JYbCkgPyBmYWN0b3JYbCA6IGZhY3RvcjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWN0b3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGJnT2Zmc2V0OiBmdW5jdGlvbiAob2Zmc2V0LCBmYWN0b3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIE1hdGgucm91bmQob2Zmc2V0ICogZmFjdG9yKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRyYW5zZm9ybTogZnVuY3Rpb24gKG9mZnNldCwgZmFjdG9yLCB3aW5kb3dIZWlnaHQsIGhlaWdodCkge1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCgob2Zmc2V0IC0gKHdpbmRvd0hlaWdodCAvIDIpICsgaGVpZ2h0KSAqIGZhY3Rvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgY2xlYXJQb3NpdGlvbnMgPSB7XHJcbiAgICAgICAgYmFja2dyb3VuZDogZnVuY3Rpb24gKGVsZW0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIGVsZW0uY3NzKHsnYmFja2dyb3VuZC1wb3NpdGlvbic6ICd1bnNldCd9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGZvcmVncm91bmQ6IGZ1bmN0aW9uIChlbGVtKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBlbGVtLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAndHJhbnNmb3JtJyA6ICd1bnNldCcsXHJcbiAgICAgICAgICAgICAgICAndHJhbnNpdGlvbicgOiAndW5zZXQnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJC5mbi5wYXJvbGxlciA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIHdpbmRvd0hlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKTtcclxuICAgICAgICB2YXIgZG9jdW1lbnRIZWlnaHQgPSAkKGRvY3VtZW50KS5oZWlnaHQoKTtcclxuXHJcbiAgICAgICAgLy8gZGVmYXVsdCBvcHRpb25zXHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSAkLmV4dGVuZCh7XHJcbiAgICAgICAgICAgIGZhY3RvcjogMCwgLy8gLSB0byArXHJcbiAgICAgICAgICAgIGZhY3RvclhzOiAwLCAvLyAtIHRvICtcclxuICAgICAgICAgICAgZmFjdG9yU206IDAsIC8vIC0gdG8gK1xyXG4gICAgICAgICAgICBmYWN0b3JNZDogMCwgLy8gLSB0byArXHJcbiAgICAgICAgICAgIGZhY3RvckxnOiAwLCAvLyAtIHRvICtcclxuICAgICAgICAgICAgZmFjdG9yWGw6IDAsIC8vIC0gdG8gK1xyXG4gICAgICAgICAgICB0cmFuc2l0aW9uOiAndHJhbnNmb3JtIC4xcyBlYXNlJywgLy8gQ1NTIHRyYW5zaXRpb25cclxuICAgICAgICAgICAgdHlwZTogJ2JhY2tncm91bmQnLCAvLyBmb3JlZ3JvdW5kXHJcbiAgICAgICAgICAgIGRpcmVjdGlvbjogJ3ZlcnRpY2FsJyAvLyBob3Jpem9udGFsXHJcbiAgICAgICAgfSwgb3B0aW9ucyk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xyXG4gICAgICAgICAgICB2YXIgd2lkdGggPSAkKHdpbmRvdykud2lkdGgoKTtcclxuICAgICAgICAgICAgdmFyIG9mZnNldCA9ICR0aGlzLm9mZnNldCgpLnRvcDtcclxuICAgICAgICAgICAgdmFyIGhlaWdodCA9ICR0aGlzLm91dGVySGVpZ2h0KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YVR5cGUgPSAkdGhpcy5kYXRhKCdwYXJvbGxlci10eXBlJyk7XHJcbiAgICAgICAgICAgIHZhciBkYXRhRGlyZWN0aW9uID0gJHRoaXMuZGF0YSgncGFyb2xsZXItZGlyZWN0aW9uJyk7XHJcbiAgICAgICAgICAgIHZhciBkYXRhVHJhbnNpdGlvbiA9ICR0aGlzLmRhdGEoJ3Bhcm9sbGVyLXRyYW5zaXRpb24nKTtcclxuICAgICAgICAgICAgdmFyIG9sZFRyYW5zZm9ybSA9ICR0aGlzLmNzcygndHJhbnNmb3JtJyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgdHJhbnNpdGlvbiA9IChkYXRhVHJhbnNpdGlvbikgPyBkYXRhVHJhbnNpdGlvbiA6IG9wdGlvbnMudHJhbnNpdGlvbjtcclxuICAgICAgICAgICAgdmFyIHR5cGUgPSAoZGF0YVR5cGUpID8gZGF0YVR5cGUgOiBvcHRpb25zLnR5cGU7XHJcbiAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSAoZGF0YURpcmVjdGlvbikgPyBkYXRhRGlyZWN0aW9uIDogb3B0aW9ucy5kaXJlY3Rpb247XHJcbiAgICAgICAgICAgIHZhciBmYWN0b3IgPSAwO1xyXG4gICAgICAgICAgICB2YXIgYmdPZmZzZXQgPSBzZXRNb3ZlbWVudC5iZ09mZnNldChvZmZzZXQsIGZhY3Rvcik7XHJcbiAgICAgICAgICAgIHZhciB0cmFuc2Zvcm0gPSBzZXRNb3ZlbWVudC50cmFuc2Zvcm0ob2Zmc2V0LCBmYWN0b3IsIHdpbmRvd0hlaWdodCwgaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlID09PSAnYmFja2dyb3VuZCcpIHtcclxuICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICd2ZXJ0aWNhbCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZXREaXJlY3Rpb24uYmdWZXJ0aWNhbCgkdGhpcywgYmdPZmZzZXQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZGlyZWN0aW9uID09PSAnaG9yaXpvbnRhbCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZXREaXJlY3Rpb24uYmdIb3Jpem9udGFsKCR0aGlzLCBiZ09mZnNldCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gJ2ZvcmVncm91bmQnKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAndmVydGljYWwnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0RGlyZWN0aW9uLnZlcnRpY2FsKCR0aGlzLCB0cmFuc2Zvcm0sIHRyYW5zaXRpb24sIG9sZFRyYW5zZm9ybSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChkaXJlY3Rpb24gPT09ICdob3Jpem9udGFsJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldERpcmVjdGlvbi5ob3Jpem9udGFsKCR0aGlzLCB0cmFuc2Zvcm0sIHRyYW5zaXRpb24sIG9sZFRyYW5zZm9ybSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICQod2luZG93KS5vbigncmVzaXplJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNjcm9sbGluZyA9ICQodGhpcykuc2Nyb2xsVG9wKCk7XHJcbiAgICAgICAgICAgICAgICB3aWR0aCA9ICQod2luZG93KS53aWR0aCgpO1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ID0gJHRoaXMub2Zmc2V0KCkudG9wO1xyXG4gICAgICAgICAgICAgICAgaGVpZ2h0ID0gJHRoaXMub3V0ZXJIZWlnaHQoKTtcclxuICAgICAgICAgICAgICAgIGZhY3RvciA9IHNldE1vdmVtZW50LmZhY3RvcigkdGhpcywgd2lkdGgsIG9wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgICAgIGJnT2Zmc2V0ID0gTWF0aC5yb3VuZChvZmZzZXQgKiBmYWN0b3IpO1xyXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtID0gTWF0aC5yb3VuZCgob2Zmc2V0IC0gKHdpbmRvd0hlaWdodCAvIDIpICsgaGVpZ2h0KSAqIGZhY3Rvcik7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCEgd29ya2luZykge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2Nyb2xsQWN0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB3b3JraW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gJ2JhY2tncm91bmQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJQb3NpdGlvbnMuYmFja2dyb3VuZCgkdGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ3ZlcnRpY2FsJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXREaXJlY3Rpb24uYmdWZXJ0aWNhbCgkdGhpcywgYmdPZmZzZXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChkaXJlY3Rpb24gPT09ICdob3Jpem9udGFsJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXREaXJlY3Rpb24uYmdIb3Jpem9udGFsKCR0aGlzLCBiZ09mZnNldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoKHR5cGUgPT09ICdmb3JlZ3JvdW5kJykgJiYgKHNjcm9sbGluZyA8PSBkb2N1bWVudEhlaWdodCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhclBvc2l0aW9ucy5mb3JlZ3JvdW5kKCR0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAndmVydGljYWwnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldERpcmVjdGlvbi52ZXJ0aWNhbCgkdGhpcywgdHJhbnNmb3JtLCB0cmFuc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZGlyZWN0aW9uID09PSAnaG9yaXpvbnRhbCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0RGlyZWN0aW9uLmhvcml6b250YWwoJHRoaXMsIHRyYW5zZm9ybSwgdHJhbnNpdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICQod2luZG93KS5vbignc2Nyb2xsJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNjcm9sbGluZyA9ICQodGhpcykuc2Nyb2xsVG9wKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsVG9wID0gJChkb2N1bWVudCkuc2Nyb2xsVG9wKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHNjcm9sbFRvcCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZhY3RvciA9IDA7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGZhY3RvciA9IHNldE1vdmVtZW50LmZhY3RvcigkdGhpcywgd2lkdGgsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGJnT2Zmc2V0ID0gTWF0aC5yb3VuZCgob2Zmc2V0IC0gc2Nyb2xsaW5nKSAqIGZhY3Rvcik7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm0gPSBNYXRoLnJvdW5kKCgob2Zmc2V0IC0gKHdpbmRvd0hlaWdodCAvIDIpICsgaGVpZ2h0KSAtIHNjcm9sbGluZykgKiBmYWN0b3IpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghIHdvcmtpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHNjcm9sbEFjdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgd29ya2luZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdiYWNrZ3JvdW5kJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICd2ZXJ0aWNhbCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0RGlyZWN0aW9uLmJnVmVydGljYWwoJHRoaXMsIGJnT2Zmc2V0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZGlyZWN0aW9uID09PSAnaG9yaXpvbnRhbCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0RGlyZWN0aW9uLmJnSG9yaXpvbnRhbCgkdGhpcywgYmdPZmZzZXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCh0eXBlID09PSAnZm9yZWdyb3VuZCcpICYmIChzY3JvbGxpbmcgPD0gZG9jdW1lbnRIZWlnaHQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ3ZlcnRpY2FsJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXREaXJlY3Rpb24udmVydGljYWwoJHRoaXMsIHRyYW5zZm9ybSwgdHJhbnNpdGlvbiwgb2xkVHJhbnNmb3JtKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZGlyZWN0aW9uID09PSAnaG9yaXpvbnRhbCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0RGlyZWN0aW9uLmhvcml6b250YWwoJHRoaXMsIHRyYW5zZm9ybSwgdHJhbnNpdGlvbiwgb2xkVHJhbnNmb3JtKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxufSk7XHJcbiIsIi8qKlxyXG4gKiBDb3B5cmlnaHQgKGMpIDIwMDctMjAxNSBBcmllbCBGbGVzbGVyIC0gYWZsZXNsZXI8YT5nbWFpbDxkPmNvbSB8IGh0dHA6Ly9mbGVzbGVyLmJsb2dzcG90LmNvbVxyXG4gKiBMaWNlbnNlZCB1bmRlciBNSVRcclxuICogQGF1dGhvciBBcmllbCBGbGVzbGVyXHJcbiAqIEB2ZXJzaW9uIDIuMS4yXHJcbiAqL1xyXG47KGZ1bmN0aW9uKGYpe1widXNlIHN0cmljdFwiO1wiZnVuY3Rpb25cIj09PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImpxdWVyeVwiXSxmKTpcInVuZGVmaW5lZFwiIT09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZihyZXF1aXJlKFwianF1ZXJ5XCIpKTpmKGpRdWVyeSl9KShmdW5jdGlvbigkKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKGEpe3JldHVybiFhLm5vZGVOYW1lfHwtMSE9PSQuaW5BcnJheShhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksW1wiaWZyYW1lXCIsXCIjZG9jdW1lbnRcIixcImh0bWxcIixcImJvZHlcIl0pfWZ1bmN0aW9uIGgoYSl7cmV0dXJuICQuaXNGdW5jdGlvbihhKXx8JC5pc1BsYWluT2JqZWN0KGEpP2E6e3RvcDphLGxlZnQ6YX19dmFyIHA9JC5zY3JvbGxUbz1mdW5jdGlvbihhLGQsYil7cmV0dXJuICQod2luZG93KS5zY3JvbGxUbyhhLGQsYil9O3AuZGVmYXVsdHM9e2F4aXM6XCJ4eVwiLGR1cmF0aW9uOjAsbGltaXQ6ITB9OyQuZm4uc2Nyb2xsVG89ZnVuY3Rpb24oYSxkLGIpe1wib2JqZWN0XCI9PT0gdHlwZW9mIGQmJihiPWQsZD0wKTtcImZ1bmN0aW9uXCI9PT10eXBlb2YgYiYmKGI9e29uQWZ0ZXI6Yn0pO1wibWF4XCI9PT1hJiYoYT05RTkpO2I9JC5leHRlbmQoe30scC5kZWZhdWx0cyxiKTtkPWR8fGIuZHVyYXRpb247dmFyIHU9Yi5xdWV1ZSYmMTxiLmF4aXMubGVuZ3RoO3UmJihkLz0yKTtiLm9mZnNldD1oKGIub2Zmc2V0KTtiLm92ZXI9aChiLm92ZXIpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtmdW5jdGlvbiBrKGEpe3ZhciBrPSQuZXh0ZW5kKHt9LGIse3F1ZXVlOiEwLGR1cmF0aW9uOmQsY29tcGxldGU6YSYmZnVuY3Rpb24oKXthLmNhbGwocSxlLGIpfX0pO3IuYW5pbWF0ZShmLGspfWlmKG51bGwhPT1hKXt2YXIgbD1uKHRoaXMpLHE9bD90aGlzLmNvbnRlbnRXaW5kb3d8fHdpbmRvdzp0aGlzLHI9JChxKSxlPWEsZj17fSx0O3N3aXRjaCh0eXBlb2YgZSl7Y2FzZSBcIm51bWJlclwiOmNhc2UgXCJzdHJpbmdcIjppZigvXihbKy1dPT8pP1xcZCsoXFwuXFxkKyk/KHB4fCUpPyQvLnRlc3QoZSkpe2U9IGgoZSk7YnJlYWt9ZT1sPyQoZSk6JChlLHEpO2Nhc2UgXCJvYmplY3RcIjppZihlLmxlbmd0aD09PTApcmV0dXJuO2lmKGUuaXN8fGUuc3R5bGUpdD0oZT0kKGUpKS5vZmZzZXQoKX12YXIgdj0kLmlzRnVuY3Rpb24oYi5vZmZzZXQpJiZiLm9mZnNldChxLGUpfHxiLm9mZnNldDskLmVhY2goYi5heGlzLnNwbGl0KFwiXCIpLGZ1bmN0aW9uKGEsYyl7dmFyIGQ9XCJ4XCI9PT1jP1wiTGVmdFwiOlwiVG9wXCIsbT1kLnRvTG93ZXJDYXNlKCksZz1cInNjcm9sbFwiK2QsaD1yW2ddKCksbj1wLm1heChxLGMpO3Q/KGZbZ109dFttXSsobD8wOmgtci5vZmZzZXQoKVttXSksYi5tYXJnaW4mJihmW2ddLT1wYXJzZUludChlLmNzcyhcIm1hcmdpblwiK2QpLDEwKXx8MCxmW2ddLT1wYXJzZUludChlLmNzcyhcImJvcmRlclwiK2QrXCJXaWR0aFwiKSwxMCl8fDApLGZbZ10rPXZbbV18fDAsYi5vdmVyW21dJiYoZltnXSs9ZVtcInhcIj09PWM/XCJ3aWR0aFwiOlwiaGVpZ2h0XCJdKCkqYi5vdmVyW21dKSk6KGQ9ZVttXSxmW2ddPWQuc2xpY2UmJiBcIiVcIj09PWQuc2xpY2UoLTEpP3BhcnNlRmxvYXQoZCkvMTAwKm46ZCk7Yi5saW1pdCYmL15cXGQrJC8udGVzdChmW2ddKSYmKGZbZ109MD49ZltnXT8wOk1hdGgubWluKGZbZ10sbikpOyFhJiYxPGIuYXhpcy5sZW5ndGgmJihoPT09ZltnXT9mPXt9OnUmJihrKGIub25BZnRlckZpcnN0KSxmPXt9KSl9KTtrKGIub25BZnRlcil9fSl9O3AubWF4PWZ1bmN0aW9uKGEsZCl7dmFyIGI9XCJ4XCI9PT1kP1wiV2lkdGhcIjpcIkhlaWdodFwiLGg9XCJzY3JvbGxcIitiO2lmKCFuKGEpKXJldHVybiBhW2hdLSQoYSlbYi50b0xvd2VyQ2FzZSgpXSgpO3ZhciBiPVwiY2xpZW50XCIrYixrPWEub3duZXJEb2N1bWVudHx8YS5kb2N1bWVudCxsPWsuZG9jdW1lbnRFbGVtZW50LGs9ay5ib2R5O3JldHVybiBNYXRoLm1heChsW2hdLGtbaF0pLU1hdGgubWluKGxbYl0sa1tiXSl9OyQuVHdlZW4ucHJvcEhvb2tzLnNjcm9sbExlZnQ9JC5Ud2Vlbi5wcm9wSG9va3Muc2Nyb2xsVG9wPXtnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuICQoYS5lbGVtKVthLnByb3BdKCl9LCBzZXQ6ZnVuY3Rpb24oYSl7dmFyIGQ9dGhpcy5nZXQoYSk7aWYoYS5vcHRpb25zLmludGVycnVwdCYmYS5fbGFzdCYmYS5fbGFzdCE9PWQpcmV0dXJuICQoYS5lbGVtKS5zdG9wKCk7dmFyIGI9TWF0aC5yb3VuZChhLm5vdyk7ZCE9PWImJigkKGEuZWxlbSlbYS5wcm9wXShiKSxhLl9sYXN0PXRoaXMuZ2V0KGEpKX19O3JldHVybiBwfSk7IiwiLy8gU3RpY2t5IFBsdWdpbiB2MS4wLjQgZm9yIGpRdWVyeVxyXG4vLyA9PT09PT09PT09PT09XHJcbi8vIEF1dGhvcjogQW50aG9ueSBHYXJhbmRcclxuLy8gSW1wcm92ZW1lbnRzIGJ5IEdlcm1hbiBNLiBCcmF2byAoS3JvbnV6KSBhbmQgUnV1ZCBLYW1waHVpcyAocnV1ZGspXHJcbi8vIEltcHJvdmVtZW50cyBieSBMZW9uYXJkbyBDLiBEYXJvbmNvIChkYXJvbmNvKVxyXG4vLyBDcmVhdGVkOiAwMi8xNC8yMDExXHJcbi8vIERhdGU6IDA3LzIwLzIwMTVcclxuLy8gV2Vic2l0ZTogaHR0cDovL3N0aWNreWpzLmNvbS9cclxuLy8gRGVzY3JpcHRpb246IE1ha2VzIGFuIGVsZW1lbnQgb24gdGhlIHBhZ2Ugc3RpY2sgb24gdGhlIHNjcmVlbiBhcyB5b3Ugc2Nyb2xsXHJcbi8vICAgICAgICAgICAgICBJdCB3aWxsIG9ubHkgc2V0IHRoZSAndG9wJyBhbmQgJ3Bvc2l0aW9uJyBvZiB5b3VyIGVsZW1lbnQsIHlvdVxyXG4vLyAgICAgICAgICAgICAgbWlnaHQgbmVlZCB0byBhZGp1c3QgdGhlIHdpZHRoIGluIHNvbWUgY2FzZXMuXHJcblxyXG4oZnVuY3Rpb24gKGZhY3RvcnkpIHtcclxuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcclxuICAgICAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXHJcbiAgICAgICAgZGVmaW5lKFsnanF1ZXJ5J10sIGZhY3RvcnkpO1xyXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cykge1xyXG4gICAgICAgIC8vIE5vZGUvQ29tbW9uSlNcclxuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZSgnanF1ZXJ5JykpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBCcm93c2VyIGdsb2JhbHNcclxuICAgICAgICBmYWN0b3J5KGpRdWVyeSk7XHJcbiAgICB9XHJcbn0oZnVuY3Rpb24gKCQpIHtcclxuICAgIHZhciBzbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTsgLy8gc2F2ZSByZWYgdG8gb3JpZ2luYWwgc2xpY2UoKVxyXG4gICAgdmFyIHNwbGljZSA9IEFycmF5LnByb3RvdHlwZS5zcGxpY2U7IC8vIHNhdmUgcmVmIHRvIG9yaWdpbmFsIHNsaWNlKClcclxuXHJcbiAgdmFyIGRlZmF1bHRzID0ge1xyXG4gICAgICB0b3BTcGFjaW5nOiAwLFxyXG4gICAgICBib3R0b21TcGFjaW5nOiAwLFxyXG4gICAgICBjbGFzc05hbWU6ICdpcy1zdGlja3knLFxyXG4gICAgICB3cmFwcGVyQ2xhc3NOYW1lOiAnc3RpY2t5LXdyYXBwZXInLFxyXG4gICAgICBjZW50ZXI6IGZhbHNlLFxyXG4gICAgICBnZXRXaWR0aEZyb206ICcnLFxyXG4gICAgICB3aWR0aEZyb21XcmFwcGVyOiB0cnVlLCAvLyB3b3JrcyBvbmx5IHdoZW4gLmdldFdpZHRoRnJvbSBpcyBlbXB0eVxyXG4gICAgICByZXNwb25zaXZlV2lkdGg6IGZhbHNlLFxyXG4gICAgICB6SW5kZXg6ICdpbmhlcml0J1xyXG4gICAgfSxcclxuICAgICR3aW5kb3cgPSAkKHdpbmRvdyksXHJcbiAgICAkZG9jdW1lbnQgPSAkKGRvY3VtZW50KSxcclxuICAgIHN0aWNrZWQgPSBbXSxcclxuICAgIHdpbmRvd0hlaWdodCA9ICR3aW5kb3cuaGVpZ2h0KCksXHJcbiAgICBzY3JvbGxlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgc2Nyb2xsVG9wID0gJHdpbmRvdy5zY3JvbGxUb3AoKSxcclxuICAgICAgICBkb2N1bWVudEhlaWdodCA9ICRkb2N1bWVudC5oZWlnaHQoKSxcclxuICAgICAgICBkd2ggPSBkb2N1bWVudEhlaWdodCAtIHdpbmRvd0hlaWdodCxcclxuICAgICAgICBleHRyYSA9IChzY3JvbGxUb3AgPiBkd2gpID8gZHdoIC0gc2Nyb2xsVG9wIDogMDtcclxuXHJcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gc3RpY2tlZC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICB2YXIgcyA9IHN0aWNrZWRbaV0sXHJcbiAgICAgICAgICBlbGVtZW50VG9wID0gcy5zdGlja3lXcmFwcGVyLm9mZnNldCgpLnRvcCxcclxuICAgICAgICAgIGV0c2UgPSBlbGVtZW50VG9wIC0gcy50b3BTcGFjaW5nIC0gZXh0cmE7XHJcblxyXG4gICAgICAgIC8vdXBkYXRlIGhlaWdodCBpbiBjYXNlIG9mIGR5bmFtaWMgY29udGVudFxyXG4gICAgICAgIHMuc3RpY2t5V3JhcHBlci5jc3MoJ2hlaWdodCcsIHMuc3RpY2t5RWxlbWVudC5vdXRlckhlaWdodCgpKTtcclxuXHJcbiAgICAgICAgaWYgKHNjcm9sbFRvcCA8PSBldHNlKSB7XHJcbiAgICAgICAgICBpZiAocy5jdXJyZW50VG9wICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHMuc3RpY2t5RWxlbWVudFxyXG4gICAgICAgICAgICAgIC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgJ3dpZHRoJzogJycsXHJcbiAgICAgICAgICAgICAgICAncG9zaXRpb24nOiAnJyxcclxuICAgICAgICAgICAgICAgICd0b3AnOiAnJyxcclxuICAgICAgICAgICAgICAgICd6LWluZGV4JzogJydcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcy5zdGlja3lFbGVtZW50LnBhcmVudCgpLnJlbW92ZUNsYXNzKHMuY2xhc3NOYW1lKTtcclxuICAgICAgICAgICAgcy5zdGlja3lFbGVtZW50LnRyaWdnZXIoJ3N0aWNreS1lbmQnLCBbc10pO1xyXG4gICAgICAgICAgICBzLmN1cnJlbnRUb3AgPSBudWxsO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIHZhciBuZXdUb3AgPSBkb2N1bWVudEhlaWdodCAtIHMuc3RpY2t5RWxlbWVudC5vdXRlckhlaWdodCgpXHJcbiAgICAgICAgICAgIC0gcy50b3BTcGFjaW5nIC0gcy5ib3R0b21TcGFjaW5nIC0gc2Nyb2xsVG9wIC0gZXh0cmE7XHJcbiAgICAgICAgICBpZiAobmV3VG9wIDwgMCkge1xyXG4gICAgICAgICAgICBuZXdUb3AgPSBuZXdUb3AgKyBzLnRvcFNwYWNpbmc7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBuZXdUb3AgPSBzLnRvcFNwYWNpbmc7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAocy5jdXJyZW50VG9wICE9PSBuZXdUb3ApIHtcclxuICAgICAgICAgICAgdmFyIG5ld1dpZHRoO1xyXG4gICAgICAgICAgICBpZiAocy5nZXRXaWR0aEZyb20pIHtcclxuICAgICAgICAgICAgICAgIHBhZGRpbmcgPSAgcy5zdGlja3lFbGVtZW50LmlubmVyV2lkdGgoKSAtIHMuc3RpY2t5RWxlbWVudC53aWR0aCgpO1xyXG4gICAgICAgICAgICAgICAgbmV3V2lkdGggPSAkKHMuZ2V0V2lkdGhGcm9tKS53aWR0aCgpIC0gcGFkZGluZyB8fCBudWxsO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHMud2lkdGhGcm9tV3JhcHBlcikge1xyXG4gICAgICAgICAgICAgICAgbmV3V2lkdGggPSBzLnN0aWNreVdyYXBwZXIud2lkdGgoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobmV3V2lkdGggPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgbmV3V2lkdGggPSBzLnN0aWNreUVsZW1lbnQud2lkdGgoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzLnN0aWNreUVsZW1lbnRcclxuICAgICAgICAgICAgICAuY3NzKCd3aWR0aCcsIG5ld1dpZHRoKVxyXG4gICAgICAgICAgICAgIC5jc3MoJ3Bvc2l0aW9uJywgJ2ZpeGVkJylcclxuICAgICAgICAgICAgICAuY3NzKCd0b3AnLCBuZXdUb3ApXHJcbiAgICAgICAgICAgICAgLmNzcygnei1pbmRleCcsIHMuekluZGV4KTtcclxuXHJcbiAgICAgICAgICAgIHMuc3RpY2t5RWxlbWVudC5wYXJlbnQoKS5hZGRDbGFzcyhzLmNsYXNzTmFtZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAocy5jdXJyZW50VG9wID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgcy5zdGlja3lFbGVtZW50LnRyaWdnZXIoJ3N0aWNreS1zdGFydCcsIFtzXSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgLy8gc3RpY2t5IGlzIHN0YXJ0ZWQgYnV0IGl0IGhhdmUgdG8gYmUgcmVwb3NpdGlvbmVkXHJcbiAgICAgICAgICAgICAgcy5zdGlja3lFbGVtZW50LnRyaWdnZXIoJ3N0aWNreS11cGRhdGUnLCBbc10pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAocy5jdXJyZW50VG9wID09PSBzLnRvcFNwYWNpbmcgJiYgcy5jdXJyZW50VG9wID4gbmV3VG9wIHx8IHMuY3VycmVudFRvcCA9PT0gbnVsbCAmJiBuZXdUb3AgPCBzLnRvcFNwYWNpbmcpIHtcclxuICAgICAgICAgICAgICAvLyBqdXN0IHJlYWNoZWQgYm90dG9tIHx8IGp1c3Qgc3RhcnRlZCB0byBzdGljayBidXQgYm90dG9tIGlzIGFscmVhZHkgcmVhY2hlZFxyXG4gICAgICAgICAgICAgIHMuc3RpY2t5RWxlbWVudC50cmlnZ2VyKCdzdGlja3ktYm90dG9tLXJlYWNoZWQnLCBbc10pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYocy5jdXJyZW50VG9wICE9PSBudWxsICYmIG5ld1RvcCA9PT0gcy50b3BTcGFjaW5nICYmIHMuY3VycmVudFRvcCA8IG5ld1RvcCkge1xyXG4gICAgICAgICAgICAgIC8vIHN0aWNreSBpcyBzdGFydGVkICYmIHN0aWNrZWQgYXQgdG9wU3BhY2luZyAmJiBvdmVyZmxvd2luZyBmcm9tIHRvcCBqdXN0IGZpbmlzaGVkXHJcbiAgICAgICAgICAgICAgcy5zdGlja3lFbGVtZW50LnRyaWdnZXIoJ3N0aWNreS1ib3R0b20tdW5yZWFjaGVkJywgW3NdKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcy5jdXJyZW50VG9wID0gbmV3VG9wO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vIENoZWNrIGlmIHN0aWNreSBoYXMgcmVhY2hlZCBlbmQgb2YgY29udGFpbmVyIGFuZCBzdG9wIHN0aWNraW5nXHJcbiAgICAgICAgICB2YXIgc3RpY2t5V3JhcHBlckNvbnRhaW5lciA9IHMuc3RpY2t5V3JhcHBlci5wYXJlbnQoKTtcclxuICAgICAgICAgIHZhciB1bnN0aWNrID0gKHMuc3RpY2t5RWxlbWVudC5vZmZzZXQoKS50b3AgKyBzLnN0aWNreUVsZW1lbnQub3V0ZXJIZWlnaHQoKSA+PSBzdGlja3lXcmFwcGVyQ29udGFpbmVyLm9mZnNldCgpLnRvcCArIHN0aWNreVdyYXBwZXJDb250YWluZXIub3V0ZXJIZWlnaHQoKSkgJiYgKHMuc3RpY2t5RWxlbWVudC5vZmZzZXQoKS50b3AgPD0gcy50b3BTcGFjaW5nKTtcclxuXHJcbiAgICAgICAgICBpZiggdW5zdGljayApIHtcclxuICAgICAgICAgICAgcy5zdGlja3lFbGVtZW50XHJcbiAgICAgICAgICAgICAgLmNzcygncG9zaXRpb24nLCAnYWJzb2x1dGUnKVxyXG4gICAgICAgICAgICAgIC5jc3MoJ3RvcCcsICcnKVxyXG4gICAgICAgICAgICAgIC5jc3MoJ2JvdHRvbScsIDApXHJcbiAgICAgICAgICAgICAgLmNzcygnei1pbmRleCcsICcnKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHMuc3RpY2t5RWxlbWVudFxyXG4gICAgICAgICAgICAgIC5jc3MoJ3Bvc2l0aW9uJywgJ2ZpeGVkJylcclxuICAgICAgICAgICAgICAuY3NzKCd0b3AnLCBuZXdUb3ApXHJcbiAgICAgICAgICAgICAgLmNzcygnYm90dG9tJywgJycpXHJcbiAgICAgICAgICAgICAgLmNzcygnei1pbmRleCcsIHMuekluZGV4KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICByZXNpemVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHdpbmRvd0hlaWdodCA9ICR3aW5kb3cuaGVpZ2h0KCk7XHJcblxyXG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHN0aWNrZWQubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIHMgPSBzdGlja2VkW2ldO1xyXG4gICAgICAgIHZhciBuZXdXaWR0aCA9IG51bGw7XHJcbiAgICAgICAgaWYgKHMuZ2V0V2lkdGhGcm9tKSB7XHJcbiAgICAgICAgICAgIGlmIChzLnJlc3BvbnNpdmVXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgbmV3V2lkdGggPSAkKHMuZ2V0V2lkdGhGcm9tKS53aWR0aCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmKHMud2lkdGhGcm9tV3JhcHBlcikge1xyXG4gICAgICAgICAgICBuZXdXaWR0aCA9IHMuc3RpY2t5V3JhcHBlci53aWR0aCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobmV3V2lkdGggIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBzLnN0aWNreUVsZW1lbnQuY3NzKCd3aWR0aCcsIG5ld1dpZHRoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBtZXRob2RzID0ge1xyXG4gICAgICBpbml0OiBmdW5jdGlvbihvcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHZhciBvID0gJC5leHRlbmQoe30sIGRlZmF1bHRzLCBvcHRpb25zKTtcclxuICAgICAgICAgIHZhciBzdGlja3lFbGVtZW50ID0gJCh0aGlzKTtcclxuXHJcbiAgICAgICAgICB2YXIgc3RpY2t5SWQgPSBzdGlja3lFbGVtZW50LmF0dHIoJ2lkJyk7XHJcbiAgICAgICAgICB2YXIgd3JhcHBlcklkID0gc3RpY2t5SWQgPyBzdGlja3lJZCArICctJyArIGRlZmF1bHRzLndyYXBwZXJDbGFzc05hbWUgOiBkZWZhdWx0cy53cmFwcGVyQ2xhc3NOYW1lO1xyXG4gICAgICAgICAgdmFyIHdyYXBwZXIgPSAkKCc8ZGl2PjwvZGl2PicpXHJcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsIHdyYXBwZXJJZClcclxuICAgICAgICAgICAgLmFkZENsYXNzKG8ud3JhcHBlckNsYXNzTmFtZSk7XHJcblxyXG4gICAgICAgICAgc3RpY2t5RWxlbWVudC53cmFwQWxsKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5wYXJlbnQoXCIjXCIgKyB3cmFwcGVySWQpLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyYXBwZXI7XHJcbiAgICAgICAgICAgIH1cclxufSk7XHJcblxyXG4gICAgICAgICAgdmFyIHN0aWNreVdyYXBwZXIgPSBzdGlja3lFbGVtZW50LnBhcmVudCgpO1xyXG5cclxuICAgICAgICAgIGlmIChvLmNlbnRlcikge1xyXG4gICAgICAgICAgICBzdGlja3lXcmFwcGVyLmNzcyh7d2lkdGg6c3RpY2t5RWxlbWVudC5vdXRlcldpZHRoKCksbWFyZ2luTGVmdDpcImF1dG9cIixtYXJnaW5SaWdodDpcImF1dG9cIn0pO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmIChzdGlja3lFbGVtZW50LmNzcyhcImZsb2F0XCIpID09PSBcInJpZ2h0XCIpIHtcclxuICAgICAgICAgICAgc3RpY2t5RWxlbWVudC5jc3Moe1wiZmxvYXRcIjpcIm5vbmVcIn0pLnBhcmVudCgpLmNzcyh7XCJmbG9hdFwiOlwicmlnaHRcIn0pO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIG8uc3RpY2t5RWxlbWVudCA9IHN0aWNreUVsZW1lbnQ7XHJcbiAgICAgICAgICBvLnN0aWNreVdyYXBwZXIgPSBzdGlja3lXcmFwcGVyO1xyXG4gICAgICAgICAgby5jdXJyZW50VG9wICAgID0gbnVsbDtcclxuXHJcbiAgICAgICAgICBzdGlja2VkLnB1c2gobyk7XHJcblxyXG4gICAgICAgICAgbWV0aG9kcy5zZXRXcmFwcGVySGVpZ2h0KHRoaXMpO1xyXG4gICAgICAgICAgbWV0aG9kcy5zZXR1cENoYW5nZUxpc3RlbmVycyh0aGlzKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIHNldFdyYXBwZXJIZWlnaHQ6IGZ1bmN0aW9uKHN0aWNreUVsZW1lbnQpIHtcclxuICAgICAgICB2YXIgZWxlbWVudCA9ICQoc3RpY2t5RWxlbWVudCk7XHJcbiAgICAgICAgdmFyIHN0aWNreVdyYXBwZXIgPSBlbGVtZW50LnBhcmVudCgpO1xyXG4gICAgICAgIGlmIChzdGlja3lXcmFwcGVyKSB7XHJcbiAgICAgICAgICBzdGlja3lXcmFwcGVyLmNzcygnaGVpZ2h0JywgZWxlbWVudC5vdXRlckhlaWdodCgpKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBzZXR1cENoYW5nZUxpc3RlbmVyczogZnVuY3Rpb24oc3RpY2t5RWxlbWVudCkge1xyXG4gICAgICAgIGlmICh3aW5kb3cuTXV0YXRpb25PYnNlcnZlcikge1xyXG4gICAgICAgICAgdmFyIG11dGF0aW9uT2JzZXJ2ZXIgPSBuZXcgd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24obXV0YXRpb25zKSB7XHJcbiAgICAgICAgICAgIGlmIChtdXRhdGlvbnNbMF0uYWRkZWROb2Rlcy5sZW5ndGggfHwgbXV0YXRpb25zWzBdLnJlbW92ZWROb2Rlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICBtZXRob2RzLnNldFdyYXBwZXJIZWlnaHQoc3RpY2t5RWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgbXV0YXRpb25PYnNlcnZlci5vYnNlcnZlKHN0aWNreUVsZW1lbnQsIHtzdWJ0cmVlOiB0cnVlLCBjaGlsZExpc3Q6IHRydWV9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaWYgKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSB7XHJcbiAgICAgICAgICAgIHN0aWNreUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NTm9kZUluc2VydGVkJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgbWV0aG9kcy5zZXRXcmFwcGVySGVpZ2h0KHN0aWNreUVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9LCBmYWxzZSk7XHJcbiAgICAgICAgICAgIHN0aWNreUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NTm9kZVJlbW92ZWQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICBtZXRob2RzLnNldFdyYXBwZXJIZWlnaHQoc3RpY2t5RWxlbWVudCk7XHJcbiAgICAgICAgICAgIH0sIGZhbHNlKTtcclxuICAgICAgICAgIH0gZWxzZSBpZiAod2luZG93LmF0dGFjaEV2ZW50KSB7XHJcbiAgICAgICAgICAgIHN0aWNreUVsZW1lbnQuYXR0YWNoRXZlbnQoJ29uRE9NTm9kZUluc2VydGVkJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgbWV0aG9kcy5zZXRXcmFwcGVySGVpZ2h0KHN0aWNreUVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgc3RpY2t5RWxlbWVudC5hdHRhY2hFdmVudCgnb25ET01Ob2RlUmVtb3ZlZCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIG1ldGhvZHMuc2V0V3JhcHBlckhlaWdodChzdGlja3lFbGVtZW50KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICB1cGRhdGU6IHNjcm9sbGVyLFxyXG4gICAgICB1bnN0aWNrOiBmdW5jdGlvbihvcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICAgIHZhciB1bnN0aWNreUVsZW1lbnQgPSAkKHRoYXQpO1xyXG5cclxuICAgICAgICAgIHZhciByZW1vdmVJZHggPSAtMTtcclxuICAgICAgICAgIHZhciBpID0gc3RpY2tlZC5sZW5ndGg7XHJcbiAgICAgICAgICB3aGlsZSAoaS0tID4gMCkge1xyXG4gICAgICAgICAgICBpZiAoc3RpY2tlZFtpXS5zdGlja3lFbGVtZW50LmdldCgwKSA9PT0gdGhhdCkge1xyXG4gICAgICAgICAgICAgICAgc3BsaWNlLmNhbGwoc3RpY2tlZCxpLDEpO1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlSWR4ID0gaTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYocmVtb3ZlSWR4ICE9PSAtMSkge1xyXG4gICAgICAgICAgICB1bnN0aWNreUVsZW1lbnQudW53cmFwKCk7XHJcbiAgICAgICAgICAgIHVuc3RpY2t5RWxlbWVudFxyXG4gICAgICAgICAgICAgIC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgJ3dpZHRoJzogJycsXHJcbiAgICAgICAgICAgICAgICAncG9zaXRpb24nOiAnJyxcclxuICAgICAgICAgICAgICAgICd0b3AnOiAnJyxcclxuICAgICAgICAgICAgICAgICdmbG9hdCc6ICcnLFxyXG4gICAgICAgICAgICAgICAgJ3otaW5kZXgnOiAnJ1xyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgLy8gc2hvdWxkIGJlIG1vcmUgZWZmaWNpZW50IHRoYW4gdXNpbmcgJHdpbmRvdy5zY3JvbGwoc2Nyb2xsZXIpIGFuZCAkd2luZG93LnJlc2l6ZShyZXNpemVyKTpcclxuICBpZiAod2luZG93LmFkZEV2ZW50TGlzdGVuZXIpIHtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBzY3JvbGxlciwgZmFsc2UpO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHJlc2l6ZXIsIGZhbHNlKTtcclxuICB9IGVsc2UgaWYgKHdpbmRvdy5hdHRhY2hFdmVudCkge1xyXG4gICAgd2luZG93LmF0dGFjaEV2ZW50KCdvbnNjcm9sbCcsIHNjcm9sbGVyKTtcclxuICAgIHdpbmRvdy5hdHRhY2hFdmVudCgnb25yZXNpemUnLCByZXNpemVyKTtcclxuICB9XHJcblxyXG4gICQuZm4uc3RpY2t5ID0gZnVuY3Rpb24obWV0aG9kKSB7XHJcbiAgICBpZiAobWV0aG9kc1ttZXRob2RdKSB7XHJcbiAgICAgIHJldHVybiBtZXRob2RzW21ldGhvZF0uYXBwbHkodGhpcywgc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIG1ldGhvZCA9PT0gJ29iamVjdCcgfHwgIW1ldGhvZCApIHtcclxuICAgICAgcmV0dXJuIG1ldGhvZHMuaW5pdC5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAkLmVycm9yKCdNZXRob2QgJyArIG1ldGhvZCArICcgZG9lcyBub3QgZXhpc3Qgb24galF1ZXJ5LnN0aWNreScpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gICQuZm4udW5zdGljayA9IGZ1bmN0aW9uKG1ldGhvZCkge1xyXG4gICAgaWYgKG1ldGhvZHNbbWV0aG9kXSkge1xyXG4gICAgICByZXR1cm4gbWV0aG9kc1ttZXRob2RdLmFwcGx5KHRoaXMsIHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XHJcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBtZXRob2QgPT09ICdvYmplY3QnIHx8ICFtZXRob2QgKSB7XHJcbiAgICAgIHJldHVybiBtZXRob2RzLnVuc3RpY2suYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgJC5lcnJvcignTWV0aG9kICcgKyBtZXRob2QgKyAnIGRvZXMgbm90IGV4aXN0IG9uIGpRdWVyeS5zdGlja3knKTtcclxuICAgIH1cclxuICB9O1xyXG4gICQoZnVuY3Rpb24oKSB7XHJcbiAgICBzZXRUaW1lb3V0KHNjcm9sbGVyLCAwKTtcclxuICB9KTtcclxufSkpO1xyXG4iLCIvKlxuICogdGV4dGlsbGF0ZS5qc1xuICogaHR0cDovL2pzY2hyLmdpdGh1Yi5jb20vdGV4dGlsbGF0ZVxuICogTUlUIGxpY2Vuc2VkXG4gKlxuICogQ29weXJpZ2h0IChDKSAyMDEyLTIwMTMgSm9yZGFuIFNjaHJvdGVyXG4gKi9cblxuKGZ1bmN0aW9uICgkKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIGZ1bmN0aW9uIGlzSW5FZmZlY3QgKGVmZmVjdCkge1xuICAgIHJldHVybiAvSW4vLnRlc3QoZWZmZWN0KSB8fCAkLmluQXJyYXkoZWZmZWN0LCAkLmZuLnRleHRpbGxhdGUuZGVmYXVsdHMuaW5FZmZlY3RzKSA+PSAwO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGlzT3V0RWZmZWN0IChlZmZlY3QpIHtcbiAgICByZXR1cm4gL091dC8udGVzdChlZmZlY3QpIHx8ICQuaW5BcnJheShlZmZlY3QsICQuZm4udGV4dGlsbGF0ZS5kZWZhdWx0cy5vdXRFZmZlY3RzKSA+PSAwO1xuICB9O1xuXG5cbiAgZnVuY3Rpb24gc3RyaW5nVG9Cb29sZWFuKHN0cikge1xuICAgIGlmIChzdHIgIT09IFwidHJ1ZVwiICYmIHN0ciAhPT0gXCJmYWxzZVwiKSByZXR1cm4gc3RyO1xuICAgIHJldHVybiAoc3RyID09PSBcInRydWVcIik7XG4gIH07XG5cbiAgLy8gY3VzdG9tIGdldCBkYXRhIGFwaSBtZXRob2RcbiAgZnVuY3Rpb24gZ2V0RGF0YSAobm9kZSkge1xuICAgIHZhciBhdHRycyA9IG5vZGUuYXR0cmlidXRlcyB8fCBbXVxuICAgICAgLCBkYXRhID0ge307XG5cbiAgICBpZiAoIWF0dHJzLmxlbmd0aCkgcmV0dXJuIGRhdGE7XG5cbiAgICAkLmVhY2goYXR0cnMsIGZ1bmN0aW9uIChpLCBhdHRyKSB7XG4gICAgICB2YXIgbm9kZU5hbWUgPSBhdHRyLm5vZGVOYW1lLnJlcGxhY2UoL2RlbGF5c2NhbGUvLCAnZGVsYXlTY2FsZScpO1xuICAgICAgaWYgKC9eZGF0YS1pbi0qLy50ZXN0KG5vZGVOYW1lKSkge1xuICAgICAgICBkYXRhLmluID0gZGF0YS5pbiB8fCB7fTtcbiAgICAgICAgZGF0YS5pbltub2RlTmFtZS5yZXBsYWNlKC9kYXRhLWluLS8sICcnKV0gPSBzdHJpbmdUb0Jvb2xlYW4oYXR0ci5ub2RlVmFsdWUpO1xuICAgICAgfSBlbHNlIGlmICgvXmRhdGEtb3V0LSovLnRlc3Qobm9kZU5hbWUpKSB7XG4gICAgICAgIGRhdGEub3V0ID0gZGF0YS5vdXQgfHwge307XG4gICAgICAgIGRhdGEub3V0W25vZGVOYW1lLnJlcGxhY2UoL2RhdGEtb3V0LS8sICcnKV0gPXN0cmluZ1RvQm9vbGVhbihhdHRyLm5vZGVWYWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKC9eZGF0YS0qLy50ZXN0KG5vZGVOYW1lKSkge1xuICAgICAgICBkYXRhW25vZGVOYW1lLnJlcGxhY2UoL2RhdGEtLywgJycpXSA9IHN0cmluZ1RvQm9vbGVhbihhdHRyLm5vZGVWYWx1ZSk7XG4gICAgICB9XG4gICAgfSlcblxuICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgZnVuY3Rpb24gc2h1ZmZsZSAobykge1xuICAgICAgZm9yICh2YXIgaiwgeCwgaSA9IG8ubGVuZ3RoOyBpOyBqID0gcGFyc2VJbnQoTWF0aC5yYW5kb20oKSAqIGkpLCB4ID0gb1stLWldLCBvW2ldID0gb1tqXSwgb1tqXSA9IHgpO1xuICAgICAgcmV0dXJuIG87XG4gIH1cblxuICBmdW5jdGlvbiBhbmltYXRlICgkdCwgZWZmZWN0LCBjYikge1xuICAgICR0LmFkZENsYXNzKCdhbmltYXRlZCAnICsgZWZmZWN0KVxuICAgICAgLmNzcygndmlzaWJpbGl0eScsICd2aXNpYmxlJylcbiAgICAgIC5zaG93KCk7XG5cbiAgICAkdC5vbmUoJ3dlYmtpdEFuaW1hdGlvbkVuZCBtb3pBbmltYXRpb25FbmQgTVNBbmltYXRpb25FbmQgb2FuaW1hdGlvbmVuZCBhbmltYXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICR0LnJlbW92ZUNsYXNzKCdhbmltYXRlZCAnICsgZWZmZWN0KTtcbiAgICAgICAgY2IgJiYgY2IoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFuaW1hdGVUb2tlbnMgKCR0b2tlbnMsIG9wdGlvbnMsIGNiKSB7XG4gICAgdmFyIHRoYXQgPSB0aGlzXG4gICAgICAsIGNvdW50ID0gJHRva2Vucy5sZW5ndGg7XG5cbiAgICBpZiAoIWNvdW50KSB7XG4gICAgICBjYiAmJiBjYigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLnNodWZmbGUpICR0b2tlbnMgPSBzaHVmZmxlKCR0b2tlbnMpO1xuICAgIGlmIChvcHRpb25zLnJldmVyc2UpICR0b2tlbnMgPSAkdG9rZW5zLnRvQXJyYXkoKS5yZXZlcnNlKCk7XG5cbiAgICAkLmVhY2goJHRva2VucywgZnVuY3Rpb24gKGksIHQpIHtcbiAgICAgIHZhciAkdG9rZW4gPSAkKHQpO1xuXG4gICAgICBmdW5jdGlvbiBjb21wbGV0ZSAoKSB7XG4gICAgICAgIGlmIChpc0luRWZmZWN0KG9wdGlvbnMuZWZmZWN0KSkge1xuICAgICAgICAgICR0b2tlbi5jc3MoJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzT3V0RWZmZWN0KG9wdGlvbnMuZWZmZWN0KSkge1xuICAgICAgICAgICR0b2tlbi5jc3MoJ3Zpc2liaWxpdHknLCAnaGlkZGVuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY291bnQgLT0gMTtcbiAgICAgICAgaWYgKCFjb3VudCAmJiBjYikgY2IoKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGRlbGF5ID0gb3B0aW9ucy5zeW5jID8gb3B0aW9ucy5kZWxheSA6IG9wdGlvbnMuZGVsYXkgKiBpICogb3B0aW9ucy5kZWxheVNjYWxlO1xuXG4gICAgICAkdG9rZW4udGV4dCgpID9cbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IGFuaW1hdGUoJHRva2VuLCBvcHRpb25zLmVmZmVjdCwgY29tcGxldGUpIH0sIGRlbGF5KSA6XG4gICAgICAgIGNvbXBsZXRlKCk7XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIFRleHRpbGxhdGUgPSBmdW5jdGlvbiAoZWxlbWVudCwgb3B0aW9ucykge1xuICAgIHZhciBiYXNlID0gdGhpc1xuICAgICAgLCAkZWxlbWVudCA9ICQoZWxlbWVudCk7XG5cbiAgICBiYXNlLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBiYXNlLiR0ZXh0cyA9ICRlbGVtZW50LmZpbmQob3B0aW9ucy5zZWxlY3Rvcik7XG5cbiAgICAgIGlmICghYmFzZS4kdGV4dHMubGVuZ3RoKSB7XG4gICAgICAgIGJhc2UuJHRleHRzID0gJCgnPHVsIGNsYXNzPVwidGV4dHNcIj48bGk+JyArICRlbGVtZW50Lmh0bWwoKSArICc8L2xpPjwvdWw+Jyk7XG4gICAgICAgICRlbGVtZW50Lmh0bWwoYmFzZS4kdGV4dHMpO1xuICAgICAgfVxuXG4gICAgICBiYXNlLiR0ZXh0cy5oaWRlKCk7XG5cbiAgICAgIGJhc2UuJGN1cnJlbnQgPSAkKCc8c3Bhbj4nKVxuICAgICAgICAuaHRtbChiYXNlLiR0ZXh0cy5maW5kKCc6Zmlyc3QtY2hpbGQnKS5odG1sKCkpXG4gICAgICAgIC5wcmVwZW5kVG8oJGVsZW1lbnQpO1xuXG4gICAgICBpZiAoaXNJbkVmZmVjdChvcHRpb25zLmluLmVmZmVjdCkpIHtcbiAgICAgICAgYmFzZS4kY3VycmVudC5jc3MoJ3Zpc2liaWxpdHknLCAnaGlkZGVuJyk7XG4gICAgICB9IGVsc2UgaWYgKGlzT3V0RWZmZWN0KG9wdGlvbnMub3V0LmVmZmVjdCkpIHtcbiAgICAgICAgYmFzZS4kY3VycmVudC5jc3MoJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpO1xuICAgICAgfVxuXG4gICAgICBiYXNlLnNldE9wdGlvbnMob3B0aW9ucyk7XG5cbiAgICAgIGJhc2UudGltZW91dFJ1biA9IG51bGw7XG5cbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBiYXNlLm9wdGlvbnMuYXV0b1N0YXJ0ICYmIGJhc2Uuc3RhcnQoKTtcbiAgICAgIH0sIGJhc2Uub3B0aW9ucy5pbml0aWFsRGVsYXkpXG4gICAgfTtcblxuICAgIGJhc2Uuc2V0T3B0aW9ucyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICBiYXNlLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIH07XG5cbiAgICBiYXNlLnRyaWdnZXJFdmVudCA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICB2YXIgZSA9ICQuRXZlbnQobmFtZSArICcudGx0Jyk7XG4gICAgICAkZWxlbWVudC50cmlnZ2VyKGUsIGJhc2UpO1xuICAgICAgcmV0dXJuIGU7XG4gICAgfTtcblxuICAgIGJhc2UuaW4gPSBmdW5jdGlvbiAoaW5kZXgsIGNiKSB7XG4gICAgICBpbmRleCA9IGluZGV4IHx8IDA7XG5cbiAgICAgIHZhciAkZWxlbSA9IGJhc2UuJHRleHRzLmZpbmQoJzpudGgtY2hpbGQoJyArICgoaW5kZXh8fDApICsgMSkgKyAnKScpXG4gICAgICAgICwgb3B0aW9ucyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBiYXNlLm9wdGlvbnMsICRlbGVtLmxlbmd0aCA/IGdldERhdGEoJGVsZW1bMF0pIDoge30pXG4gICAgICAgICwgJHRva2VucztcblxuICAgICAgJGVsZW0uYWRkQ2xhc3MoJ2N1cnJlbnQnKTtcblxuICAgICAgYmFzZS50cmlnZ2VyRXZlbnQoJ2luQW5pbWF0aW9uQmVnaW4nKTtcbiAgICAgICRlbGVtZW50LmF0dHIoJ2RhdGEtYWN0aXZlJywgJGVsZW0uZGF0YSgnaWQnKSk7XG5cbiAgICAgIGJhc2UuJGN1cnJlbnRcbiAgICAgICAgLmh0bWwoJGVsZW0uaHRtbCgpKVxuICAgICAgICAubGV0dGVyaW5nKCd3b3JkcycpO1xuXG4gICAgICAvLyBzcGxpdCB3b3JkcyB0byBpbmRpdmlkdWFsIGNoYXJhY3RlcnMgaWYgdG9rZW4gdHlwZSBpcyBzZXQgdG8gJ2NoYXInXG4gICAgICBpZiAoYmFzZS5vcHRpb25zLnR5cGUgPT0gXCJjaGFyXCIpIHtcbiAgICAgICAgYmFzZS4kY3VycmVudC5maW5kKCdbY2xhc3NePVwid29yZFwiXScpXG4gICAgICAgICAgICAuY3NzKHtcbiAgICAgICAgICAgICAgJ2Rpc3BsYXknOiAnaW5saW5lLWJsb2NrJyxcbiAgICAgICAgICAgICAgLy8gZml4IGZvciBwb29yIGlvcyBwZXJmb3JtYW5jZVxuICAgICAgICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiAndHJhbnNsYXRlM2QoMCwwLDApJyxcbiAgICAgICAgICAgICAgJy1tb3otdHJhbnNmb3JtJzogJ3RyYW5zbGF0ZTNkKDAsMCwwKScsXG4gICAgICAgICAgICAgICctby10cmFuc2Zvcm0nOiAndHJhbnNsYXRlM2QoMCwwLDApJyxcbiAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6ICd0cmFuc2xhdGUzZCgwLDAsMCknXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVhY2goZnVuY3Rpb24gKCkgeyAkKHRoaXMpLmxldHRlcmluZygpIH0pO1xuICAgICAgfVxuXG4gICAgICAkdG9rZW5zID0gYmFzZS4kY3VycmVudFxuICAgICAgICAuZmluZCgnW2NsYXNzXj1cIicgKyBiYXNlLm9wdGlvbnMudHlwZSArICdcIl0nKVxuICAgICAgICAuY3NzKCdkaXNwbGF5JywgJ2lubGluZS1ibG9jaycpO1xuXG4gICAgICBpZiAoaXNJbkVmZmVjdChvcHRpb25zLmluLmVmZmVjdCkpIHtcbiAgICAgICAgJHRva2Vucy5jc3MoJ3Zpc2liaWxpdHknLCAnaGlkZGVuJyk7XG4gICAgICB9IGVsc2UgaWYgKGlzT3V0RWZmZWN0KG9wdGlvbnMuaW4uZWZmZWN0KSkge1xuICAgICAgICAkdG9rZW5zLmNzcygndmlzaWJpbGl0eScsICd2aXNpYmxlJyk7XG4gICAgICB9XG5cbiAgICAgIGJhc2UuY3VycmVudEluZGV4ID0gaW5kZXg7XG5cbiAgICAgIGFuaW1hdGVUb2tlbnMoJHRva2Vucywgb3B0aW9ucy5pbiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBiYXNlLnRyaWdnZXJFdmVudCgnaW5BbmltYXRpb25FbmQnKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuaW4uY2FsbGJhY2spIG9wdGlvbnMuaW4uY2FsbGJhY2soKTtcbiAgICAgICAgaWYgKGNiKSBjYihiYXNlKTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBiYXNlLm91dCA9IGZ1bmN0aW9uIChjYikge1xuICAgICAgdmFyICRlbGVtID0gYmFzZS4kdGV4dHMuZmluZCgnOm50aC1jaGlsZCgnICsgKChiYXNlLmN1cnJlbnRJbmRleHx8MCkgKyAxKSArICcpJylcbiAgICAgICAgLCAkdG9rZW5zID0gYmFzZS4kY3VycmVudC5maW5kKCdbY2xhc3NePVwiJyArIGJhc2Uub3B0aW9ucy50eXBlICsgJ1wiXScpXG4gICAgICAgICwgb3B0aW9ucyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBiYXNlLm9wdGlvbnMsICRlbGVtLmxlbmd0aCA/IGdldERhdGEoJGVsZW1bMF0pIDoge30pXG5cbiAgICAgIGJhc2UudHJpZ2dlckV2ZW50KCdvdXRBbmltYXRpb25CZWdpbicpO1xuXG4gICAgICBhbmltYXRlVG9rZW5zKCR0b2tlbnMsIG9wdGlvbnMub3V0LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRlbGVtLnJlbW92ZUNsYXNzKCdjdXJyZW50Jyk7XG4gICAgICAgIGJhc2UudHJpZ2dlckV2ZW50KCdvdXRBbmltYXRpb25FbmQnKTtcbiAgICAgICAgJGVsZW1lbnQucmVtb3ZlQXR0cignZGF0YS1hY3RpdmUnKTtcbiAgICAgICAgaWYgKG9wdGlvbnMub3V0LmNhbGxiYWNrKSBvcHRpb25zLm91dC5jYWxsYmFjaygpO1xuICAgICAgICBpZiAoY2IpIGNiKGJhc2UpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIGJhc2Uuc3RhcnQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBiYXNlLnRyaWdnZXJFdmVudCgnc3RhcnQnKTtcblxuICAgICAgICAoZnVuY3Rpb24gcnVuIChpbmRleCkge1xuICAgICAgICAgIGJhc2UuaW4oaW5kZXgsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBsZW5ndGggPSBiYXNlLiR0ZXh0cy5jaGlsZHJlbigpLmxlbmd0aDtcblxuICAgICAgICAgICAgaW5kZXggKz0gMTtcblxuICAgICAgICAgICAgaWYgKCFiYXNlLm9wdGlvbnMubG9vcCAmJiBpbmRleCA+PSBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgaWYgKGJhc2Uub3B0aW9ucy5jYWxsYmFjaykgYmFzZS5vcHRpb25zLmNhbGxiYWNrKCk7XG4gICAgICAgICAgICAgIGJhc2UudHJpZ2dlckV2ZW50KCdlbmQnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGluZGV4ID0gaW5kZXggJSBsZW5ndGg7XG5cbiAgICAgICAgICAgICAgYmFzZS50aW1lb3V0UnVuID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgYmFzZS5vdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgcnVuKGluZGV4KVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9LCBiYXNlLm9wdGlvbnMubWluRGlzcGxheVRpbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KGluZGV4IHx8IDApKTtcbiAgICAgIH0sIGJhc2Uub3B0aW9ucy5pbml0aWFsRGVsYXkpO1xuICAgIH07XG5cbiAgICBiYXNlLnN0b3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoYmFzZS50aW1lb3V0UnVuKSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwoYmFzZS50aW1lb3V0UnVuKTtcbiAgICAgICAgYmFzZS50aW1lb3V0UnVuID0gbnVsbDtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgYmFzZS5pbml0KCk7XG4gIH1cblxuICAkLmZuLnRleHRpbGxhdGUgPSBmdW5jdGlvbiAoc2V0dGluZ3MsIGFyZ3MpIHtcbiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciAkdGhpcyA9ICQodGhpcylcbiAgICAgICAgLCBkYXRhID0gJHRoaXMuZGF0YSgndGV4dGlsbGF0ZScpXG4gICAgICAgICwgb3B0aW9ucyA9ICQuZXh0ZW5kKHRydWUsIHt9LCAkLmZuLnRleHRpbGxhdGUuZGVmYXVsdHMsIGdldERhdGEodGhpcyksIHR5cGVvZiBzZXR0aW5ncyA9PSAnb2JqZWN0JyAmJiBzZXR0aW5ncyk7XG5cbiAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAkdGhpcy5kYXRhKCd0ZXh0aWxsYXRlJywgKGRhdGEgPSBuZXcgVGV4dGlsbGF0ZSh0aGlzLCBvcHRpb25zKSkpO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygc2V0dGluZ3MgPT0gJ3N0cmluZycpIHtcbiAgICAgICAgZGF0YVtzZXR0aW5nc10uYXBwbHkoZGF0YSwgW10uY29uY2F0KGFyZ3MpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRhdGEuc2V0T3B0aW9ucy5jYWxsKGRhdGEsIG9wdGlvbnMpO1xuICAgICAgfVxuICAgIH0pXG4gIH07XG5cbiAgJC5mbi50ZXh0aWxsYXRlLmRlZmF1bHRzID0ge1xuICAgIHNlbGVjdG9yOiAnLnRleHRzJyxcbiAgICBsb29wOiBmYWxzZSxcbiAgICBtaW5EaXNwbGF5VGltZTogMjAwMCxcbiAgICBpbml0aWFsRGVsYXk6IDAsXG4gICAgaW46IHtcbiAgICAgIGVmZmVjdDogJ2ZhZGVJbkxlZnRCaWcnLFxuICAgICAgZGVsYXlTY2FsZTogMS41LFxuICAgICAgZGVsYXk6IDUwLFxuICAgICAgc3luYzogZmFsc2UsXG4gICAgICByZXZlcnNlOiBmYWxzZSxcbiAgICAgIHNodWZmbGU6IGZhbHNlLFxuICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uICgpIHt9XG4gICAgfSxcbiAgICBvdXQ6IHtcbiAgICAgIGVmZmVjdDogJ2hpbmdlJyxcbiAgICAgIGRlbGF5U2NhbGU6IDEuNSxcbiAgICAgIGRlbGF5OiA1MCxcbiAgICAgIHN5bmM6IGZhbHNlLFxuICAgICAgcmV2ZXJzZTogZmFsc2UsXG4gICAgICBzaHVmZmxlOiBmYWxzZSxcbiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoKSB7fVxuICAgIH0sXG4gICAgYXV0b1N0YXJ0OiB0cnVlLFxuICAgIGluRWZmZWN0czogW10sXG4gICAgb3V0RWZmZWN0czogWyAnaGluZ2UnIF0sXG4gICAgY2FsbGJhY2s6IGZ1bmN0aW9uICgpIHt9LFxuICAgIHR5cGU6ICdjaGFyJ1xuICB9O1xuXG59KGpRdWVyeSkpO1xuIiwiLyohXHJcbiAqIEBmaWxlT3ZlcnZpZXcgVG91Y2hTd2lwZSAtIGpRdWVyeSBQbHVnaW5cclxuICogQHZlcnNpb24gMS42LjE4XHJcbiAqXHJcbiAqIEBhdXRob3IgTWF0dCBCcnlzb24gaHR0cDovL3d3dy5naXRodWIuY29tL21hdHRicnlzb25cclxuICogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vbWF0dGJyeXNvbi9Ub3VjaFN3aXBlLUpxdWVyeS1QbHVnaW5cclxuICogQHNlZSBodHRwOi8vbGFicy5yYW1waW50ZXJhY3RpdmUuY28udWsvdG91Y2hTd2lwZS9cclxuICogQHNlZSBodHRwOi8vcGx1Z2lucy5qcXVlcnkuY29tL3Byb2plY3QvdG91Y2hTd2lwZVxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTAtMjAxNSBNYXR0IEJyeXNvblxyXG4gKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgb3IgR1BMIFZlcnNpb24gMiBsaWNlbnNlcy5cclxuICpcclxuICovXHJcbiFmdW5jdGlvbihmYWN0b3J5KXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQmJmRlZmluZS5hbWQualF1ZXJ5P2RlZmluZShbXCJqcXVlcnlcIl0sZmFjdG9yeSk6ZmFjdG9yeShcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9yZXF1aXJlKFwianF1ZXJ5XCIpOmpRdWVyeSl9KGZ1bmN0aW9uKCQpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGluaXQob3B0aW9ucyl7cmV0dXJuIW9wdGlvbnN8fHZvaWQgMCE9PW9wdGlvbnMuYWxsb3dQYWdlU2Nyb2xsfHx2b2lkIDA9PT1vcHRpb25zLnN3aXBlJiZ2b2lkIDA9PT1vcHRpb25zLnN3aXBlU3RhdHVzfHwob3B0aW9ucy5hbGxvd1BhZ2VTY3JvbGw9Tk9ORSksdm9pZCAwIT09b3B0aW9ucy5jbGljayYmdm9pZCAwPT09b3B0aW9ucy50YXAmJihvcHRpb25zLnRhcD1vcHRpb25zLmNsaWNrKSxvcHRpb25zfHwob3B0aW9ucz17fSksb3B0aW9ucz0kLmV4dGVuZCh7fSwkLmZuLnN3aXBlLmRlZmF1bHRzLG9wdGlvbnMpLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciAkdGhpcz0kKHRoaXMpLHBsdWdpbj0kdGhpcy5kYXRhKFBMVUdJTl9OUyk7cGx1Z2lufHwocGx1Z2luPW5ldyBUb3VjaFN3aXBlKHRoaXMsb3B0aW9ucyksJHRoaXMuZGF0YShQTFVHSU5fTlMscGx1Z2luKSl9KX1mdW5jdGlvbiBUb3VjaFN3aXBlKGVsZW1lbnQsb3B0aW9ucyl7ZnVuY3Rpb24gdG91Y2hTdGFydChqcUV2ZW50KXtpZighKGdldFRvdWNoSW5Qcm9ncmVzcygpfHwkKGpxRXZlbnQudGFyZ2V0KS5jbG9zZXN0KG9wdGlvbnMuZXhjbHVkZWRFbGVtZW50cywkZWxlbWVudCkubGVuZ3RoPjApKXt2YXIgZXZlbnQ9anFFdmVudC5vcmlnaW5hbEV2ZW50P2pxRXZlbnQub3JpZ2luYWxFdmVudDpqcUV2ZW50O2lmKCFldmVudC5wb2ludGVyVHlwZXx8XCJtb3VzZVwiIT1ldmVudC5wb2ludGVyVHlwZXx8MCE9b3B0aW9ucy5mYWxsYmFja1RvTW91c2VFdmVudHMpe3ZhciByZXQsdG91Y2hlcz1ldmVudC50b3VjaGVzLGV2dD10b3VjaGVzP3RvdWNoZXNbMF06ZXZlbnQ7cmV0dXJuIHBoYXNlPVBIQVNFX1NUQVJULHRvdWNoZXM/ZmluZ2VyQ291bnQ9dG91Y2hlcy5sZW5ndGg6b3B0aW9ucy5wcmV2ZW50RGVmYXVsdEV2ZW50cyE9PSExJiZqcUV2ZW50LnByZXZlbnREZWZhdWx0KCksZGlzdGFuY2U9MCxkaXJlY3Rpb249bnVsbCxjdXJyZW50RGlyZWN0aW9uPW51bGwscGluY2hEaXJlY3Rpb249bnVsbCxkdXJhdGlvbj0wLHN0YXJ0VG91Y2hlc0Rpc3RhbmNlPTAsZW5kVG91Y2hlc0Rpc3RhbmNlPTAscGluY2hab29tPTEscGluY2hEaXN0YW5jZT0wLG1heGltdW1zTWFwPWNyZWF0ZU1heGltdW1zRGF0YSgpLGNhbmNlbE11bHRpRmluZ2VyUmVsZWFzZSgpLGNyZWF0ZUZpbmdlckRhdGEoMCxldnQpLCF0b3VjaGVzfHxmaW5nZXJDb3VudD09PW9wdGlvbnMuZmluZ2Vyc3x8b3B0aW9ucy5maW5nZXJzPT09QUxMX0ZJTkdFUlN8fGhhc1BpbmNoZXMoKT8oc3RhcnRUaW1lPWdldFRpbWVTdGFtcCgpLDI9PWZpbmdlckNvdW50JiYoY3JlYXRlRmluZ2VyRGF0YSgxLHRvdWNoZXNbMV0pLHN0YXJ0VG91Y2hlc0Rpc3RhbmNlPWVuZFRvdWNoZXNEaXN0YW5jZT1jYWxjdWxhdGVUb3VjaGVzRGlzdGFuY2UoZmluZ2VyRGF0YVswXS5zdGFydCxmaW5nZXJEYXRhWzFdLnN0YXJ0KSksKG9wdGlvbnMuc3dpcGVTdGF0dXN8fG9wdGlvbnMucGluY2hTdGF0dXMpJiYocmV0PXRyaWdnZXJIYW5kbGVyKGV2ZW50LHBoYXNlKSkpOnJldD0hMSxyZXQ9PT0hMT8ocGhhc2U9UEhBU0VfQ0FOQ0VMLHRyaWdnZXJIYW5kbGVyKGV2ZW50LHBoYXNlKSxyZXQpOihvcHRpb25zLmhvbGQmJihob2xkVGltZW91dD1zZXRUaW1lb3V0KCQucHJveHkoZnVuY3Rpb24oKXskZWxlbWVudC50cmlnZ2VyKFwiaG9sZFwiLFtldmVudC50YXJnZXRdKSxvcHRpb25zLmhvbGQmJihyZXQ9b3B0aW9ucy5ob2xkLmNhbGwoJGVsZW1lbnQsZXZlbnQsZXZlbnQudGFyZ2V0KSl9LHRoaXMpLG9wdGlvbnMubG9uZ1RhcFRocmVzaG9sZCkpLHNldFRvdWNoSW5Qcm9ncmVzcyghMCksbnVsbCl9fX1mdW5jdGlvbiB0b3VjaE1vdmUoanFFdmVudCl7dmFyIGV2ZW50PWpxRXZlbnQub3JpZ2luYWxFdmVudD9qcUV2ZW50Lm9yaWdpbmFsRXZlbnQ6anFFdmVudDtpZihwaGFzZSE9PVBIQVNFX0VORCYmcGhhc2UhPT1QSEFTRV9DQU5DRUwmJiFpbk11bHRpRmluZ2VyUmVsZWFzZSgpKXt2YXIgcmV0LHRvdWNoZXM9ZXZlbnQudG91Y2hlcyxldnQ9dG91Y2hlcz90b3VjaGVzWzBdOmV2ZW50LGN1cnJlbnRGaW5nZXI9dXBkYXRlRmluZ2VyRGF0YShldnQpO2lmKGVuZFRpbWU9Z2V0VGltZVN0YW1wKCksdG91Y2hlcyYmKGZpbmdlckNvdW50PXRvdWNoZXMubGVuZ3RoKSxvcHRpb25zLmhvbGQmJmNsZWFyVGltZW91dChob2xkVGltZW91dCkscGhhc2U9UEhBU0VfTU9WRSwyPT1maW5nZXJDb3VudCYmKDA9PXN0YXJ0VG91Y2hlc0Rpc3RhbmNlPyhjcmVhdGVGaW5nZXJEYXRhKDEsdG91Y2hlc1sxXSksc3RhcnRUb3VjaGVzRGlzdGFuY2U9ZW5kVG91Y2hlc0Rpc3RhbmNlPWNhbGN1bGF0ZVRvdWNoZXNEaXN0YW5jZShmaW5nZXJEYXRhWzBdLnN0YXJ0LGZpbmdlckRhdGFbMV0uc3RhcnQpKToodXBkYXRlRmluZ2VyRGF0YSh0b3VjaGVzWzFdKSxlbmRUb3VjaGVzRGlzdGFuY2U9Y2FsY3VsYXRlVG91Y2hlc0Rpc3RhbmNlKGZpbmdlckRhdGFbMF0uZW5kLGZpbmdlckRhdGFbMV0uZW5kKSxwaW5jaERpcmVjdGlvbj1jYWxjdWxhdGVQaW5jaERpcmVjdGlvbihmaW5nZXJEYXRhWzBdLmVuZCxmaW5nZXJEYXRhWzFdLmVuZCkpLHBpbmNoWm9vbT1jYWxjdWxhdGVQaW5jaFpvb20oc3RhcnRUb3VjaGVzRGlzdGFuY2UsZW5kVG91Y2hlc0Rpc3RhbmNlKSxwaW5jaERpc3RhbmNlPU1hdGguYWJzKHN0YXJ0VG91Y2hlc0Rpc3RhbmNlLWVuZFRvdWNoZXNEaXN0YW5jZSkpLGZpbmdlckNvdW50PT09b3B0aW9ucy5maW5nZXJzfHxvcHRpb25zLmZpbmdlcnM9PT1BTExfRklOR0VSU3x8IXRvdWNoZXN8fGhhc1BpbmNoZXMoKSl7aWYoZGlyZWN0aW9uPWNhbGN1bGF0ZURpcmVjdGlvbihjdXJyZW50RmluZ2VyLnN0YXJ0LGN1cnJlbnRGaW5nZXIuZW5kKSxjdXJyZW50RGlyZWN0aW9uPWNhbGN1bGF0ZURpcmVjdGlvbihjdXJyZW50RmluZ2VyLmxhc3QsY3VycmVudEZpbmdlci5lbmQpLHZhbGlkYXRlRGVmYXVsdEV2ZW50KGpxRXZlbnQsY3VycmVudERpcmVjdGlvbiksZGlzdGFuY2U9Y2FsY3VsYXRlRGlzdGFuY2UoY3VycmVudEZpbmdlci5zdGFydCxjdXJyZW50RmluZ2VyLmVuZCksZHVyYXRpb249Y2FsY3VsYXRlRHVyYXRpb24oKSxzZXRNYXhEaXN0YW5jZShkaXJlY3Rpb24sZGlzdGFuY2UpLHJldD10cmlnZ2VySGFuZGxlcihldmVudCxwaGFzZSksIW9wdGlvbnMudHJpZ2dlck9uVG91Y2hFbmR8fG9wdGlvbnMudHJpZ2dlck9uVG91Y2hMZWF2ZSl7dmFyIGluQm91bmRzPSEwO2lmKG9wdGlvbnMudHJpZ2dlck9uVG91Y2hMZWF2ZSl7dmFyIGJvdW5kcz1nZXRib3VuZHModGhpcyk7aW5Cb3VuZHM9aXNJbkJvdW5kcyhjdXJyZW50RmluZ2VyLmVuZCxib3VuZHMpfSFvcHRpb25zLnRyaWdnZXJPblRvdWNoRW5kJiZpbkJvdW5kcz9waGFzZT1nZXROZXh0UGhhc2UoUEhBU0VfTU9WRSk6b3B0aW9ucy50cmlnZ2VyT25Ub3VjaExlYXZlJiYhaW5Cb3VuZHMmJihwaGFzZT1nZXROZXh0UGhhc2UoUEhBU0VfRU5EKSkscGhhc2UhPVBIQVNFX0NBTkNFTCYmcGhhc2UhPVBIQVNFX0VORHx8dHJpZ2dlckhhbmRsZXIoZXZlbnQscGhhc2UpfX1lbHNlIHBoYXNlPVBIQVNFX0NBTkNFTCx0cmlnZ2VySGFuZGxlcihldmVudCxwaGFzZSk7cmV0PT09ITEmJihwaGFzZT1QSEFTRV9DQU5DRUwsdHJpZ2dlckhhbmRsZXIoZXZlbnQscGhhc2UpKX19ZnVuY3Rpb24gdG91Y2hFbmQoanFFdmVudCl7dmFyIGV2ZW50PWpxRXZlbnQub3JpZ2luYWxFdmVudD9qcUV2ZW50Lm9yaWdpbmFsRXZlbnQ6anFFdmVudCx0b3VjaGVzPWV2ZW50LnRvdWNoZXM7aWYodG91Y2hlcyl7aWYodG91Y2hlcy5sZW5ndGgmJiFpbk11bHRpRmluZ2VyUmVsZWFzZSgpKXJldHVybiBzdGFydE11bHRpRmluZ2VyUmVsZWFzZShldmVudCksITA7aWYodG91Y2hlcy5sZW5ndGgmJmluTXVsdGlGaW5nZXJSZWxlYXNlKCkpcmV0dXJuITB9cmV0dXJuIGluTXVsdGlGaW5nZXJSZWxlYXNlKCkmJihmaW5nZXJDb3VudD1maW5nZXJDb3VudEF0UmVsZWFzZSksZW5kVGltZT1nZXRUaW1lU3RhbXAoKSxkdXJhdGlvbj1jYWxjdWxhdGVEdXJhdGlvbigpLGRpZFN3aXBlQmFja1RvQ2FuY2VsKCl8fCF2YWxpZGF0ZVN3aXBlRGlzdGFuY2UoKT8ocGhhc2U9UEhBU0VfQ0FOQ0VMLHRyaWdnZXJIYW5kbGVyKGV2ZW50LHBoYXNlKSk6b3B0aW9ucy50cmlnZ2VyT25Ub3VjaEVuZHx8b3B0aW9ucy50cmlnZ2VyT25Ub3VjaEVuZD09PSExJiZwaGFzZT09PVBIQVNFX01PVkU/KG9wdGlvbnMucHJldmVudERlZmF1bHRFdmVudHMhPT0hMSYmanFFdmVudC5jYW5jZWxhYmxlIT09ITEmJmpxRXZlbnQucHJldmVudERlZmF1bHQoKSxwaGFzZT1QSEFTRV9FTkQsdHJpZ2dlckhhbmRsZXIoZXZlbnQscGhhc2UpKTohb3B0aW9ucy50cmlnZ2VyT25Ub3VjaEVuZCYmaGFzVGFwKCk/KHBoYXNlPVBIQVNFX0VORCx0cmlnZ2VySGFuZGxlckZvckdlc3R1cmUoZXZlbnQscGhhc2UsVEFQKSk6cGhhc2U9PT1QSEFTRV9NT1ZFJiYocGhhc2U9UEhBU0VfQ0FOQ0VMLHRyaWdnZXJIYW5kbGVyKGV2ZW50LHBoYXNlKSksc2V0VG91Y2hJblByb2dyZXNzKCExKSxudWxsfWZ1bmN0aW9uIHRvdWNoQ2FuY2VsKCl7ZmluZ2VyQ291bnQ9MCxlbmRUaW1lPTAsc3RhcnRUaW1lPTAsc3RhcnRUb3VjaGVzRGlzdGFuY2U9MCxlbmRUb3VjaGVzRGlzdGFuY2U9MCxwaW5jaFpvb209MSxjYW5jZWxNdWx0aUZpbmdlclJlbGVhc2UoKSxzZXRUb3VjaEluUHJvZ3Jlc3MoITEpfWZ1bmN0aW9uIHRvdWNoTGVhdmUoanFFdmVudCl7dmFyIGV2ZW50PWpxRXZlbnQub3JpZ2luYWxFdmVudD9qcUV2ZW50Lm9yaWdpbmFsRXZlbnQ6anFFdmVudDtvcHRpb25zLnRyaWdnZXJPblRvdWNoTGVhdmUmJihwaGFzZT1nZXROZXh0UGhhc2UoUEhBU0VfRU5EKSx0cmlnZ2VySGFuZGxlcihldmVudCxwaGFzZSkpfWZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVycygpeyRlbGVtZW50LnVuYmluZChTVEFSVF9FVix0b3VjaFN0YXJ0KSwkZWxlbWVudC51bmJpbmQoQ0FOQ0VMX0VWLHRvdWNoQ2FuY2VsKSwkZWxlbWVudC51bmJpbmQoTU9WRV9FVix0b3VjaE1vdmUpLCRlbGVtZW50LnVuYmluZChFTkRfRVYsdG91Y2hFbmQpLExFQVZFX0VWJiYkZWxlbWVudC51bmJpbmQoTEVBVkVfRVYsdG91Y2hMZWF2ZSksc2V0VG91Y2hJblByb2dyZXNzKCExKX1mdW5jdGlvbiBnZXROZXh0UGhhc2UoY3VycmVudFBoYXNlKXt2YXIgbmV4dFBoYXNlPWN1cnJlbnRQaGFzZSx2YWxpZFRpbWU9dmFsaWRhdGVTd2lwZVRpbWUoKSx2YWxpZERpc3RhbmNlPXZhbGlkYXRlU3dpcGVEaXN0YW5jZSgpLGRpZENhbmNlbD1kaWRTd2lwZUJhY2tUb0NhbmNlbCgpO3JldHVybiF2YWxpZFRpbWV8fGRpZENhbmNlbD9uZXh0UGhhc2U9UEhBU0VfQ0FOQ0VMOiF2YWxpZERpc3RhbmNlfHxjdXJyZW50UGhhc2UhPVBIQVNFX01PVkV8fG9wdGlvbnMudHJpZ2dlck9uVG91Y2hFbmQmJiFvcHRpb25zLnRyaWdnZXJPblRvdWNoTGVhdmU/IXZhbGlkRGlzdGFuY2UmJmN1cnJlbnRQaGFzZT09UEhBU0VfRU5EJiZvcHRpb25zLnRyaWdnZXJPblRvdWNoTGVhdmUmJihuZXh0UGhhc2U9UEhBU0VfQ0FOQ0VMKTpuZXh0UGhhc2U9UEhBU0VfRU5ELG5leHRQaGFzZX1mdW5jdGlvbiB0cmlnZ2VySGFuZGxlcihldmVudCxwaGFzZSl7dmFyIHJldCx0b3VjaGVzPWV2ZW50LnRvdWNoZXM7cmV0dXJuKGRpZFN3aXBlKCl8fGhhc1N3aXBlcygpKSYmKHJldD10cmlnZ2VySGFuZGxlckZvckdlc3R1cmUoZXZlbnQscGhhc2UsU1dJUEUpKSwoZGlkUGluY2goKXx8aGFzUGluY2hlcygpKSYmcmV0IT09ITEmJihyZXQ9dHJpZ2dlckhhbmRsZXJGb3JHZXN0dXJlKGV2ZW50LHBoYXNlLFBJTkNIKSksZGlkRG91YmxlVGFwKCkmJnJldCE9PSExP3JldD10cmlnZ2VySGFuZGxlckZvckdlc3R1cmUoZXZlbnQscGhhc2UsRE9VQkxFX1RBUCk6ZGlkTG9uZ1RhcCgpJiZyZXQhPT0hMT9yZXQ9dHJpZ2dlckhhbmRsZXJGb3JHZXN0dXJlKGV2ZW50LHBoYXNlLExPTkdfVEFQKTpkaWRUYXAoKSYmcmV0IT09ITEmJihyZXQ9dHJpZ2dlckhhbmRsZXJGb3JHZXN0dXJlKGV2ZW50LHBoYXNlLFRBUCkpLHBoYXNlPT09UEhBU0VfQ0FOQ0VMJiZ0b3VjaENhbmNlbChldmVudCkscGhhc2U9PT1QSEFTRV9FTkQmJih0b3VjaGVzP3RvdWNoZXMubGVuZ3RofHx0b3VjaENhbmNlbChldmVudCk6dG91Y2hDYW5jZWwoZXZlbnQpKSxyZXR9ZnVuY3Rpb24gdHJpZ2dlckhhbmRsZXJGb3JHZXN0dXJlKGV2ZW50LHBoYXNlLGdlc3R1cmUpe3ZhciByZXQ7aWYoZ2VzdHVyZT09U1dJUEUpe2lmKCRlbGVtZW50LnRyaWdnZXIoXCJzd2lwZVN0YXR1c1wiLFtwaGFzZSxkaXJlY3Rpb258fG51bGwsZGlzdGFuY2V8fDAsZHVyYXRpb258fDAsZmluZ2VyQ291bnQsZmluZ2VyRGF0YSxjdXJyZW50RGlyZWN0aW9uXSksb3B0aW9ucy5zd2lwZVN0YXR1cyYmKHJldD1vcHRpb25zLnN3aXBlU3RhdHVzLmNhbGwoJGVsZW1lbnQsZXZlbnQscGhhc2UsZGlyZWN0aW9ufHxudWxsLGRpc3RhbmNlfHwwLGR1cmF0aW9ufHwwLGZpbmdlckNvdW50LGZpbmdlckRhdGEsY3VycmVudERpcmVjdGlvbikscmV0PT09ITEpKXJldHVybiExO2lmKHBoYXNlPT1QSEFTRV9FTkQmJnZhbGlkYXRlU3dpcGUoKSl7aWYoY2xlYXJUaW1lb3V0KHNpbmdsZVRhcFRpbWVvdXQpLGNsZWFyVGltZW91dChob2xkVGltZW91dCksJGVsZW1lbnQudHJpZ2dlcihcInN3aXBlXCIsW2RpcmVjdGlvbixkaXN0YW5jZSxkdXJhdGlvbixmaW5nZXJDb3VudCxmaW5nZXJEYXRhLGN1cnJlbnREaXJlY3Rpb25dKSxvcHRpb25zLnN3aXBlJiYocmV0PW9wdGlvbnMuc3dpcGUuY2FsbCgkZWxlbWVudCxldmVudCxkaXJlY3Rpb24sZGlzdGFuY2UsZHVyYXRpb24sZmluZ2VyQ291bnQsZmluZ2VyRGF0YSxjdXJyZW50RGlyZWN0aW9uKSxyZXQ9PT0hMSkpcmV0dXJuITE7c3dpdGNoKGRpcmVjdGlvbil7Y2FzZSBMRUZUOiRlbGVtZW50LnRyaWdnZXIoXCJzd2lwZUxlZnRcIixbZGlyZWN0aW9uLGRpc3RhbmNlLGR1cmF0aW9uLGZpbmdlckNvdW50LGZpbmdlckRhdGEsY3VycmVudERpcmVjdGlvbl0pLG9wdGlvbnMuc3dpcGVMZWZ0JiYocmV0PW9wdGlvbnMuc3dpcGVMZWZ0LmNhbGwoJGVsZW1lbnQsZXZlbnQsZGlyZWN0aW9uLGRpc3RhbmNlLGR1cmF0aW9uLGZpbmdlckNvdW50LGZpbmdlckRhdGEsY3VycmVudERpcmVjdGlvbikpO2JyZWFrO2Nhc2UgUklHSFQ6JGVsZW1lbnQudHJpZ2dlcihcInN3aXBlUmlnaHRcIixbZGlyZWN0aW9uLGRpc3RhbmNlLGR1cmF0aW9uLGZpbmdlckNvdW50LGZpbmdlckRhdGEsY3VycmVudERpcmVjdGlvbl0pLG9wdGlvbnMuc3dpcGVSaWdodCYmKHJldD1vcHRpb25zLnN3aXBlUmlnaHQuY2FsbCgkZWxlbWVudCxldmVudCxkaXJlY3Rpb24sZGlzdGFuY2UsZHVyYXRpb24sZmluZ2VyQ291bnQsZmluZ2VyRGF0YSxjdXJyZW50RGlyZWN0aW9uKSk7YnJlYWs7Y2FzZSBVUDokZWxlbWVudC50cmlnZ2VyKFwic3dpcGVVcFwiLFtkaXJlY3Rpb24sZGlzdGFuY2UsZHVyYXRpb24sZmluZ2VyQ291bnQsZmluZ2VyRGF0YSxjdXJyZW50RGlyZWN0aW9uXSksb3B0aW9ucy5zd2lwZVVwJiYocmV0PW9wdGlvbnMuc3dpcGVVcC5jYWxsKCRlbGVtZW50LGV2ZW50LGRpcmVjdGlvbixkaXN0YW5jZSxkdXJhdGlvbixmaW5nZXJDb3VudCxmaW5nZXJEYXRhLGN1cnJlbnREaXJlY3Rpb24pKTticmVhaztjYXNlIERPV046JGVsZW1lbnQudHJpZ2dlcihcInN3aXBlRG93blwiLFtkaXJlY3Rpb24sZGlzdGFuY2UsZHVyYXRpb24sZmluZ2VyQ291bnQsZmluZ2VyRGF0YSxjdXJyZW50RGlyZWN0aW9uXSksb3B0aW9ucy5zd2lwZURvd24mJihyZXQ9b3B0aW9ucy5zd2lwZURvd24uY2FsbCgkZWxlbWVudCxldmVudCxkaXJlY3Rpb24sZGlzdGFuY2UsZHVyYXRpb24sZmluZ2VyQ291bnQsZmluZ2VyRGF0YSxjdXJyZW50RGlyZWN0aW9uKSl9fX1pZihnZXN0dXJlPT1QSU5DSCl7aWYoJGVsZW1lbnQudHJpZ2dlcihcInBpbmNoU3RhdHVzXCIsW3BoYXNlLHBpbmNoRGlyZWN0aW9ufHxudWxsLHBpbmNoRGlzdGFuY2V8fDAsZHVyYXRpb258fDAsZmluZ2VyQ291bnQscGluY2hab29tLGZpbmdlckRhdGFdKSxvcHRpb25zLnBpbmNoU3RhdHVzJiYocmV0PW9wdGlvbnMucGluY2hTdGF0dXMuY2FsbCgkZWxlbWVudCxldmVudCxwaGFzZSxwaW5jaERpcmVjdGlvbnx8bnVsbCxwaW5jaERpc3RhbmNlfHwwLGR1cmF0aW9ufHwwLGZpbmdlckNvdW50LHBpbmNoWm9vbSxmaW5nZXJEYXRhKSxyZXQ9PT0hMSkpcmV0dXJuITE7aWYocGhhc2U9PVBIQVNFX0VORCYmdmFsaWRhdGVQaW5jaCgpKXN3aXRjaChwaW5jaERpcmVjdGlvbil7Y2FzZSBJTjokZWxlbWVudC50cmlnZ2VyKFwicGluY2hJblwiLFtwaW5jaERpcmVjdGlvbnx8bnVsbCxwaW5jaERpc3RhbmNlfHwwLGR1cmF0aW9ufHwwLGZpbmdlckNvdW50LHBpbmNoWm9vbSxmaW5nZXJEYXRhXSksb3B0aW9ucy5waW5jaEluJiYocmV0PW9wdGlvbnMucGluY2hJbi5jYWxsKCRlbGVtZW50LGV2ZW50LHBpbmNoRGlyZWN0aW9ufHxudWxsLHBpbmNoRGlzdGFuY2V8fDAsZHVyYXRpb258fDAsZmluZ2VyQ291bnQscGluY2hab29tLGZpbmdlckRhdGEpKTticmVhaztjYXNlIE9VVDokZWxlbWVudC50cmlnZ2VyKFwicGluY2hPdXRcIixbcGluY2hEaXJlY3Rpb258fG51bGwscGluY2hEaXN0YW5jZXx8MCxkdXJhdGlvbnx8MCxmaW5nZXJDb3VudCxwaW5jaFpvb20sZmluZ2VyRGF0YV0pLG9wdGlvbnMucGluY2hPdXQmJihyZXQ9b3B0aW9ucy5waW5jaE91dC5jYWxsKCRlbGVtZW50LGV2ZW50LHBpbmNoRGlyZWN0aW9ufHxudWxsLHBpbmNoRGlzdGFuY2V8fDAsZHVyYXRpb258fDAsZmluZ2VyQ291bnQscGluY2hab29tLGZpbmdlckRhdGEpKX19cmV0dXJuIGdlc3R1cmU9PVRBUD9waGFzZSE9PVBIQVNFX0NBTkNFTCYmcGhhc2UhPT1QSEFTRV9FTkR8fChjbGVhclRpbWVvdXQoc2luZ2xlVGFwVGltZW91dCksY2xlYXJUaW1lb3V0KGhvbGRUaW1lb3V0KSxoYXNEb3VibGVUYXAoKSYmIWluRG91YmxlVGFwKCk/KGRvdWJsZVRhcFN0YXJ0VGltZT1nZXRUaW1lU3RhbXAoKSxzaW5nbGVUYXBUaW1lb3V0PXNldFRpbWVvdXQoJC5wcm94eShmdW5jdGlvbigpe2RvdWJsZVRhcFN0YXJ0VGltZT1udWxsLCRlbGVtZW50LnRyaWdnZXIoXCJ0YXBcIixbZXZlbnQudGFyZ2V0XSksb3B0aW9ucy50YXAmJihyZXQ9b3B0aW9ucy50YXAuY2FsbCgkZWxlbWVudCxldmVudCxldmVudC50YXJnZXQpKX0sdGhpcyksb3B0aW9ucy5kb3VibGVUYXBUaHJlc2hvbGQpKTooZG91YmxlVGFwU3RhcnRUaW1lPW51bGwsJGVsZW1lbnQudHJpZ2dlcihcInRhcFwiLFtldmVudC50YXJnZXRdKSxvcHRpb25zLnRhcCYmKHJldD1vcHRpb25zLnRhcC5jYWxsKCRlbGVtZW50LGV2ZW50LGV2ZW50LnRhcmdldCkpKSk6Z2VzdHVyZT09RE9VQkxFX1RBUD9waGFzZSE9PVBIQVNFX0NBTkNFTCYmcGhhc2UhPT1QSEFTRV9FTkR8fChjbGVhclRpbWVvdXQoc2luZ2xlVGFwVGltZW91dCksY2xlYXJUaW1lb3V0KGhvbGRUaW1lb3V0KSxkb3VibGVUYXBTdGFydFRpbWU9bnVsbCwkZWxlbWVudC50cmlnZ2VyKFwiZG91YmxldGFwXCIsW2V2ZW50LnRhcmdldF0pLG9wdGlvbnMuZG91YmxlVGFwJiYocmV0PW9wdGlvbnMuZG91YmxlVGFwLmNhbGwoJGVsZW1lbnQsZXZlbnQsZXZlbnQudGFyZ2V0KSkpOmdlc3R1cmU9PUxPTkdfVEFQJiYocGhhc2UhPT1QSEFTRV9DQU5DRUwmJnBoYXNlIT09UEhBU0VfRU5EfHwoY2xlYXJUaW1lb3V0KHNpbmdsZVRhcFRpbWVvdXQpLGRvdWJsZVRhcFN0YXJ0VGltZT1udWxsLCRlbGVtZW50LnRyaWdnZXIoXCJsb25ndGFwXCIsW2V2ZW50LnRhcmdldF0pLG9wdGlvbnMubG9uZ1RhcCYmKHJldD1vcHRpb25zLmxvbmdUYXAuY2FsbCgkZWxlbWVudCxldmVudCxldmVudC50YXJnZXQpKSkpLHJldH1mdW5jdGlvbiB2YWxpZGF0ZVN3aXBlRGlzdGFuY2UoKXt2YXIgdmFsaWQ9ITA7cmV0dXJuIG51bGwhPT1vcHRpb25zLnRocmVzaG9sZCYmKHZhbGlkPWRpc3RhbmNlPj1vcHRpb25zLnRocmVzaG9sZCksdmFsaWR9ZnVuY3Rpb24gZGlkU3dpcGVCYWNrVG9DYW5jZWwoKXt2YXIgY2FuY2VsbGVkPSExO3JldHVybiBudWxsIT09b3B0aW9ucy5jYW5jZWxUaHJlc2hvbGQmJm51bGwhPT1kaXJlY3Rpb24mJihjYW5jZWxsZWQ9Z2V0TWF4RGlzdGFuY2UoZGlyZWN0aW9uKS1kaXN0YW5jZT49b3B0aW9ucy5jYW5jZWxUaHJlc2hvbGQpLGNhbmNlbGxlZH1mdW5jdGlvbiB2YWxpZGF0ZVBpbmNoRGlzdGFuY2UoKXtyZXR1cm4gbnVsbD09PW9wdGlvbnMucGluY2hUaHJlc2hvbGR8fHBpbmNoRGlzdGFuY2U+PW9wdGlvbnMucGluY2hUaHJlc2hvbGR9ZnVuY3Rpb24gdmFsaWRhdGVTd2lwZVRpbWUoKXt2YXIgcmVzdWx0O3JldHVybiByZXN1bHQ9IW9wdGlvbnMubWF4VGltZVRocmVzaG9sZHx8IShkdXJhdGlvbj49b3B0aW9ucy5tYXhUaW1lVGhyZXNob2xkKX1mdW5jdGlvbiB2YWxpZGF0ZURlZmF1bHRFdmVudChqcUV2ZW50LGRpcmVjdGlvbil7aWYob3B0aW9ucy5wcmV2ZW50RGVmYXVsdEV2ZW50cyE9PSExKWlmKG9wdGlvbnMuYWxsb3dQYWdlU2Nyb2xsPT09Tk9ORSlqcUV2ZW50LnByZXZlbnREZWZhdWx0KCk7ZWxzZXt2YXIgYXV0bz1vcHRpb25zLmFsbG93UGFnZVNjcm9sbD09PUFVVE87c3dpdGNoKGRpcmVjdGlvbil7Y2FzZSBMRUZUOihvcHRpb25zLnN3aXBlTGVmdCYmYXV0b3x8IWF1dG8mJm9wdGlvbnMuYWxsb3dQYWdlU2Nyb2xsIT1IT1JJWk9OVEFMKSYmanFFdmVudC5wcmV2ZW50RGVmYXVsdCgpO2JyZWFrO2Nhc2UgUklHSFQ6KG9wdGlvbnMuc3dpcGVSaWdodCYmYXV0b3x8IWF1dG8mJm9wdGlvbnMuYWxsb3dQYWdlU2Nyb2xsIT1IT1JJWk9OVEFMKSYmanFFdmVudC5wcmV2ZW50RGVmYXVsdCgpO2JyZWFrO2Nhc2UgVVA6KG9wdGlvbnMuc3dpcGVVcCYmYXV0b3x8IWF1dG8mJm9wdGlvbnMuYWxsb3dQYWdlU2Nyb2xsIT1WRVJUSUNBTCkmJmpxRXZlbnQucHJldmVudERlZmF1bHQoKTticmVhaztjYXNlIERPV046KG9wdGlvbnMuc3dpcGVEb3duJiZhdXRvfHwhYXV0byYmb3B0aW9ucy5hbGxvd1BhZ2VTY3JvbGwhPVZFUlRJQ0FMKSYmanFFdmVudC5wcmV2ZW50RGVmYXVsdCgpO2JyZWFrO2Nhc2UgTk9ORTp9fX1mdW5jdGlvbiB2YWxpZGF0ZVBpbmNoKCl7dmFyIGhhc0NvcnJlY3RGaW5nZXJDb3VudD12YWxpZGF0ZUZpbmdlcnMoKSxoYXNFbmRQb2ludD12YWxpZGF0ZUVuZFBvaW50KCksaGFzQ29ycmVjdERpc3RhbmNlPXZhbGlkYXRlUGluY2hEaXN0YW5jZSgpO3JldHVybiBoYXNDb3JyZWN0RmluZ2VyQ291bnQmJmhhc0VuZFBvaW50JiZoYXNDb3JyZWN0RGlzdGFuY2V9ZnVuY3Rpb24gaGFzUGluY2hlcygpe3JldHVybiEhKG9wdGlvbnMucGluY2hTdGF0dXN8fG9wdGlvbnMucGluY2hJbnx8b3B0aW9ucy5waW5jaE91dCl9ZnVuY3Rpb24gZGlkUGluY2goKXtyZXR1cm4hKCF2YWxpZGF0ZVBpbmNoKCl8fCFoYXNQaW5jaGVzKCkpfWZ1bmN0aW9uIHZhbGlkYXRlU3dpcGUoKXt2YXIgaGFzVmFsaWRUaW1lPXZhbGlkYXRlU3dpcGVUaW1lKCksaGFzVmFsaWREaXN0YW5jZT12YWxpZGF0ZVN3aXBlRGlzdGFuY2UoKSxoYXNDb3JyZWN0RmluZ2VyQ291bnQ9dmFsaWRhdGVGaW5nZXJzKCksaGFzRW5kUG9pbnQ9dmFsaWRhdGVFbmRQb2ludCgpLGRpZENhbmNlbD1kaWRTd2lwZUJhY2tUb0NhbmNlbCgpLHZhbGlkPSFkaWRDYW5jZWwmJmhhc0VuZFBvaW50JiZoYXNDb3JyZWN0RmluZ2VyQ291bnQmJmhhc1ZhbGlkRGlzdGFuY2UmJmhhc1ZhbGlkVGltZTtyZXR1cm4gdmFsaWR9ZnVuY3Rpb24gaGFzU3dpcGVzKCl7cmV0dXJuISEob3B0aW9ucy5zd2lwZXx8b3B0aW9ucy5zd2lwZVN0YXR1c3x8b3B0aW9ucy5zd2lwZUxlZnR8fG9wdGlvbnMuc3dpcGVSaWdodHx8b3B0aW9ucy5zd2lwZVVwfHxvcHRpb25zLnN3aXBlRG93bil9ZnVuY3Rpb24gZGlkU3dpcGUoKXtyZXR1cm4hKCF2YWxpZGF0ZVN3aXBlKCl8fCFoYXNTd2lwZXMoKSl9ZnVuY3Rpb24gdmFsaWRhdGVGaW5nZXJzKCl7cmV0dXJuIGZpbmdlckNvdW50PT09b3B0aW9ucy5maW5nZXJzfHxvcHRpb25zLmZpbmdlcnM9PT1BTExfRklOR0VSU3x8IVNVUFBPUlRTX1RPVUNIfWZ1bmN0aW9uIHZhbGlkYXRlRW5kUG9pbnQoKXtyZXR1cm4gMCE9PWZpbmdlckRhdGFbMF0uZW5kLnh9ZnVuY3Rpb24gaGFzVGFwKCl7cmV0dXJuISFvcHRpb25zLnRhcH1mdW5jdGlvbiBoYXNEb3VibGVUYXAoKXtyZXR1cm4hIW9wdGlvbnMuZG91YmxlVGFwfWZ1bmN0aW9uIGhhc0xvbmdUYXAoKXtyZXR1cm4hIW9wdGlvbnMubG9uZ1RhcH1mdW5jdGlvbiB2YWxpZGF0ZURvdWJsZVRhcCgpe2lmKG51bGw9PWRvdWJsZVRhcFN0YXJ0VGltZSlyZXR1cm4hMTt2YXIgbm93PWdldFRpbWVTdGFtcCgpO3JldHVybiBoYXNEb3VibGVUYXAoKSYmbm93LWRvdWJsZVRhcFN0YXJ0VGltZTw9b3B0aW9ucy5kb3VibGVUYXBUaHJlc2hvbGR9ZnVuY3Rpb24gaW5Eb3VibGVUYXAoKXtyZXR1cm4gdmFsaWRhdGVEb3VibGVUYXAoKX1mdW5jdGlvbiB2YWxpZGF0ZVRhcCgpe3JldHVybigxPT09ZmluZ2VyQ291bnR8fCFTVVBQT1JUU19UT1VDSCkmJihpc05hTihkaXN0YW5jZSl8fGRpc3RhbmNlPG9wdGlvbnMudGhyZXNob2xkKX1mdW5jdGlvbiB2YWxpZGF0ZUxvbmdUYXAoKXtyZXR1cm4gZHVyYXRpb24+b3B0aW9ucy5sb25nVGFwVGhyZXNob2xkJiZkaXN0YW5jZTxET1VCTEVfVEFQX1RIUkVTSE9MRH1mdW5jdGlvbiBkaWRUYXAoKXtyZXR1cm4hKCF2YWxpZGF0ZVRhcCgpfHwhaGFzVGFwKCkpfWZ1bmN0aW9uIGRpZERvdWJsZVRhcCgpe3JldHVybiEoIXZhbGlkYXRlRG91YmxlVGFwKCl8fCFoYXNEb3VibGVUYXAoKSl9ZnVuY3Rpb24gZGlkTG9uZ1RhcCgpe3JldHVybiEoIXZhbGlkYXRlTG9uZ1RhcCgpfHwhaGFzTG9uZ1RhcCgpKX1mdW5jdGlvbiBzdGFydE11bHRpRmluZ2VyUmVsZWFzZShldmVudCl7cHJldmlvdXNUb3VjaEVuZFRpbWU9Z2V0VGltZVN0YW1wKCksZmluZ2VyQ291bnRBdFJlbGVhc2U9ZXZlbnQudG91Y2hlcy5sZW5ndGgrMX1mdW5jdGlvbiBjYW5jZWxNdWx0aUZpbmdlclJlbGVhc2UoKXtwcmV2aW91c1RvdWNoRW5kVGltZT0wLGZpbmdlckNvdW50QXRSZWxlYXNlPTB9ZnVuY3Rpb24gaW5NdWx0aUZpbmdlclJlbGVhc2UoKXt2YXIgd2l0aGluVGhyZXNob2xkPSExO2lmKHByZXZpb3VzVG91Y2hFbmRUaW1lKXt2YXIgZGlmZj1nZXRUaW1lU3RhbXAoKS1wcmV2aW91c1RvdWNoRW5kVGltZTtkaWZmPD1vcHRpb25zLmZpbmdlclJlbGVhc2VUaHJlc2hvbGQmJih3aXRoaW5UaHJlc2hvbGQ9ITApfXJldHVybiB3aXRoaW5UaHJlc2hvbGR9ZnVuY3Rpb24gZ2V0VG91Y2hJblByb2dyZXNzKCl7cmV0dXJuISgkZWxlbWVudC5kYXRhKFBMVUdJTl9OUytcIl9pbnRvdWNoXCIpIT09ITApfWZ1bmN0aW9uIHNldFRvdWNoSW5Qcm9ncmVzcyh2YWwpeyRlbGVtZW50JiYodmFsPT09ITA/KCRlbGVtZW50LmJpbmQoTU9WRV9FVix0b3VjaE1vdmUpLCRlbGVtZW50LmJpbmQoRU5EX0VWLHRvdWNoRW5kKSxMRUFWRV9FViYmJGVsZW1lbnQuYmluZChMRUFWRV9FVix0b3VjaExlYXZlKSk6KCRlbGVtZW50LnVuYmluZChNT1ZFX0VWLHRvdWNoTW92ZSwhMSksJGVsZW1lbnQudW5iaW5kKEVORF9FVix0b3VjaEVuZCwhMSksTEVBVkVfRVYmJiRlbGVtZW50LnVuYmluZChMRUFWRV9FVix0b3VjaExlYXZlLCExKSksJGVsZW1lbnQuZGF0YShQTFVHSU5fTlMrXCJfaW50b3VjaFwiLHZhbD09PSEwKSl9ZnVuY3Rpb24gY3JlYXRlRmluZ2VyRGF0YShpZCxldnQpe3ZhciBmPXtzdGFydDp7eDowLHk6MH0sbGFzdDp7eDowLHk6MH0sZW5kOnt4OjAseTowfX07cmV0dXJuIGYuc3RhcnQueD1mLmxhc3QueD1mLmVuZC54PWV2dC5wYWdlWHx8ZXZ0LmNsaWVudFgsZi5zdGFydC55PWYubGFzdC55PWYuZW5kLnk9ZXZ0LnBhZ2VZfHxldnQuY2xpZW50WSxmaW5nZXJEYXRhW2lkXT1mLGZ9ZnVuY3Rpb24gdXBkYXRlRmluZ2VyRGF0YShldnQpe3ZhciBpZD12b2lkIDAhPT1ldnQuaWRlbnRpZmllcj9ldnQuaWRlbnRpZmllcjowLGY9Z2V0RmluZ2VyRGF0YShpZCk7cmV0dXJuIG51bGw9PT1mJiYoZj1jcmVhdGVGaW5nZXJEYXRhKGlkLGV2dCkpLGYubGFzdC54PWYuZW5kLngsZi5sYXN0Lnk9Zi5lbmQueSxmLmVuZC54PWV2dC5wYWdlWHx8ZXZ0LmNsaWVudFgsZi5lbmQueT1ldnQucGFnZVl8fGV2dC5jbGllbnRZLGZ9ZnVuY3Rpb24gZ2V0RmluZ2VyRGF0YShpZCl7cmV0dXJuIGZpbmdlckRhdGFbaWRdfHxudWxsfWZ1bmN0aW9uIHNldE1heERpc3RhbmNlKGRpcmVjdGlvbixkaXN0YW5jZSl7ZGlyZWN0aW9uIT1OT05FJiYoZGlzdGFuY2U9TWF0aC5tYXgoZGlzdGFuY2UsZ2V0TWF4RGlzdGFuY2UoZGlyZWN0aW9uKSksbWF4aW11bXNNYXBbZGlyZWN0aW9uXS5kaXN0YW5jZT1kaXN0YW5jZSl9ZnVuY3Rpb24gZ2V0TWF4RGlzdGFuY2UoZGlyZWN0aW9uKXtpZihtYXhpbXVtc01hcFtkaXJlY3Rpb25dKXJldHVybiBtYXhpbXVtc01hcFtkaXJlY3Rpb25dLmRpc3RhbmNlfWZ1bmN0aW9uIGNyZWF0ZU1heGltdW1zRGF0YSgpe3ZhciBtYXhEYXRhPXt9O3JldHVybiBtYXhEYXRhW0xFRlRdPWNyZWF0ZU1heGltdW1WTyhMRUZUKSxtYXhEYXRhW1JJR0hUXT1jcmVhdGVNYXhpbXVtVk8oUklHSFQpLG1heERhdGFbVVBdPWNyZWF0ZU1heGltdW1WTyhVUCksbWF4RGF0YVtET1dOXT1jcmVhdGVNYXhpbXVtVk8oRE9XTiksbWF4RGF0YX1mdW5jdGlvbiBjcmVhdGVNYXhpbXVtVk8oZGlyKXtyZXR1cm57ZGlyZWN0aW9uOmRpcixkaXN0YW5jZTowfX1mdW5jdGlvbiBjYWxjdWxhdGVEdXJhdGlvbigpe3JldHVybiBlbmRUaW1lLXN0YXJ0VGltZX1mdW5jdGlvbiBjYWxjdWxhdGVUb3VjaGVzRGlzdGFuY2Uoc3RhcnRQb2ludCxlbmRQb2ludCl7dmFyIGRpZmZYPU1hdGguYWJzKHN0YXJ0UG9pbnQueC1lbmRQb2ludC54KSxkaWZmWT1NYXRoLmFicyhzdGFydFBvaW50LnktZW5kUG9pbnQueSk7cmV0dXJuIE1hdGgucm91bmQoTWF0aC5zcXJ0KGRpZmZYKmRpZmZYK2RpZmZZKmRpZmZZKSl9ZnVuY3Rpb24gY2FsY3VsYXRlUGluY2hab29tKHN0YXJ0RGlzdGFuY2UsZW5kRGlzdGFuY2Upe3ZhciBwZXJjZW50PWVuZERpc3RhbmNlL3N0YXJ0RGlzdGFuY2UqMTtyZXR1cm4gcGVyY2VudC50b0ZpeGVkKDIpfWZ1bmN0aW9uIGNhbGN1bGF0ZVBpbmNoRGlyZWN0aW9uKCl7cmV0dXJuIHBpbmNoWm9vbTwxP09VVDpJTn1mdW5jdGlvbiBjYWxjdWxhdGVEaXN0YW5jZShzdGFydFBvaW50LGVuZFBvaW50KXtyZXR1cm4gTWF0aC5yb3VuZChNYXRoLnNxcnQoTWF0aC5wb3coZW5kUG9pbnQueC1zdGFydFBvaW50LngsMikrTWF0aC5wb3coZW5kUG9pbnQueS1zdGFydFBvaW50LnksMikpKX1mdW5jdGlvbiBjYWxjdWxhdGVBbmdsZShzdGFydFBvaW50LGVuZFBvaW50KXt2YXIgeD1zdGFydFBvaW50LngtZW5kUG9pbnQueCx5PWVuZFBvaW50Lnktc3RhcnRQb2ludC55LHI9TWF0aC5hdGFuMih5LHgpLGFuZ2xlPU1hdGgucm91bmQoMTgwKnIvTWF0aC5QSSk7cmV0dXJuIGFuZ2xlPDAmJihhbmdsZT0zNjAtTWF0aC5hYnMoYW5nbGUpKSxhbmdsZX1mdW5jdGlvbiBjYWxjdWxhdGVEaXJlY3Rpb24oc3RhcnRQb2ludCxlbmRQb2ludCl7aWYoY29tcGFyZVBvaW50cyhzdGFydFBvaW50LGVuZFBvaW50KSlyZXR1cm4gTk9ORTt2YXIgYW5nbGU9Y2FsY3VsYXRlQW5nbGUoc3RhcnRQb2ludCxlbmRQb2ludCk7cmV0dXJuIGFuZ2xlPD00NSYmYW5nbGU+PTA/TEVGVDphbmdsZTw9MzYwJiZhbmdsZT49MzE1P0xFRlQ6YW5nbGU+PTEzNSYmYW5nbGU8PTIyNT9SSUdIVDphbmdsZT40NSYmYW5nbGU8MTM1P0RPV046VVB9ZnVuY3Rpb24gZ2V0VGltZVN0YW1wKCl7dmFyIG5vdz1uZXcgRGF0ZTtyZXR1cm4gbm93LmdldFRpbWUoKX1mdW5jdGlvbiBnZXRib3VuZHMoZWwpe2VsPSQoZWwpO3ZhciBvZmZzZXQ9ZWwub2Zmc2V0KCksYm91bmRzPXtsZWZ0Om9mZnNldC5sZWZ0LHJpZ2h0Om9mZnNldC5sZWZ0K2VsLm91dGVyV2lkdGgoKSx0b3A6b2Zmc2V0LnRvcCxib3R0b206b2Zmc2V0LnRvcCtlbC5vdXRlckhlaWdodCgpfTtyZXR1cm4gYm91bmRzfWZ1bmN0aW9uIGlzSW5Cb3VuZHMocG9pbnQsYm91bmRzKXtyZXR1cm4gcG9pbnQueD5ib3VuZHMubGVmdCYmcG9pbnQueDxib3VuZHMucmlnaHQmJnBvaW50Lnk+Ym91bmRzLnRvcCYmcG9pbnQueTxib3VuZHMuYm90dG9tfWZ1bmN0aW9uIGNvbXBhcmVQb2ludHMocG9pbnRBLHBvaW50Qil7cmV0dXJuIHBvaW50QS54PT1wb2ludEIueCYmcG9pbnRBLnk9PXBvaW50Qi55fXZhciBvcHRpb25zPSQuZXh0ZW5kKHt9LG9wdGlvbnMpLHVzZVRvdWNoRXZlbnRzPVNVUFBPUlRTX1RPVUNIfHxTVVBQT1JUU19QT0lOVEVSfHwhb3B0aW9ucy5mYWxsYmFja1RvTW91c2VFdmVudHMsU1RBUlRfRVY9dXNlVG91Y2hFdmVudHM/U1VQUE9SVFNfUE9JTlRFUj9TVVBQT1JUU19QT0lOVEVSX0lFMTA/XCJNU1BvaW50ZXJEb3duXCI6XCJwb2ludGVyZG93blwiOlwidG91Y2hzdGFydFwiOlwibW91c2Vkb3duXCIsTU9WRV9FVj11c2VUb3VjaEV2ZW50cz9TVVBQT1JUU19QT0lOVEVSP1NVUFBPUlRTX1BPSU5URVJfSUUxMD9cIk1TUG9pbnRlck1vdmVcIjpcInBvaW50ZXJtb3ZlXCI6XCJ0b3VjaG1vdmVcIjpcIm1vdXNlbW92ZVwiLEVORF9FVj11c2VUb3VjaEV2ZW50cz9TVVBQT1JUU19QT0lOVEVSP1NVUFBPUlRTX1BPSU5URVJfSUUxMD9cIk1TUG9pbnRlclVwXCI6XCJwb2ludGVydXBcIjpcInRvdWNoZW5kXCI6XCJtb3VzZXVwXCIsTEVBVkVfRVY9dXNlVG91Y2hFdmVudHM/U1VQUE9SVFNfUE9JTlRFUj9cIm1vdXNlbGVhdmVcIjpudWxsOlwibW91c2VsZWF2ZVwiLENBTkNFTF9FVj1TVVBQT1JUU19QT0lOVEVSP1NVUFBPUlRTX1BPSU5URVJfSUUxMD9cIk1TUG9pbnRlckNhbmNlbFwiOlwicG9pbnRlcmNhbmNlbFwiOlwidG91Y2hjYW5jZWxcIixkaXN0YW5jZT0wLGRpcmVjdGlvbj1udWxsLGN1cnJlbnREaXJlY3Rpb249bnVsbCxkdXJhdGlvbj0wLHN0YXJ0VG91Y2hlc0Rpc3RhbmNlPTAsZW5kVG91Y2hlc0Rpc3RhbmNlPTAscGluY2hab29tPTEscGluY2hEaXN0YW5jZT0wLHBpbmNoRGlyZWN0aW9uPTAsbWF4aW11bXNNYXA9bnVsbCwkZWxlbWVudD0kKGVsZW1lbnQpLHBoYXNlPVwic3RhcnRcIixmaW5nZXJDb3VudD0wLGZpbmdlckRhdGE9e30sc3RhcnRUaW1lPTAsZW5kVGltZT0wLHByZXZpb3VzVG91Y2hFbmRUaW1lPTAsZmluZ2VyQ291bnRBdFJlbGVhc2U9MCxkb3VibGVUYXBTdGFydFRpbWU9MCxzaW5nbGVUYXBUaW1lb3V0PW51bGwsaG9sZFRpbWVvdXQ9bnVsbDt0cnl7JGVsZW1lbnQuYmluZChTVEFSVF9FVix0b3VjaFN0YXJ0KSwkZWxlbWVudC5iaW5kKENBTkNFTF9FVix0b3VjaENhbmNlbCl9Y2F0Y2goZSl7JC5lcnJvcihcImV2ZW50cyBub3Qgc3VwcG9ydGVkIFwiK1NUQVJUX0VWK1wiLFwiK0NBTkNFTF9FVitcIiBvbiBqUXVlcnkuc3dpcGVcIil9dGhpcy5lbmFibGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXNhYmxlKCksJGVsZW1lbnQuYmluZChTVEFSVF9FVix0b3VjaFN0YXJ0KSwkZWxlbWVudC5iaW5kKENBTkNFTF9FVix0b3VjaENhbmNlbCksJGVsZW1lbnR9LHRoaXMuZGlzYWJsZT1mdW5jdGlvbigpe3JldHVybiByZW1vdmVMaXN0ZW5lcnMoKSwkZWxlbWVudH0sdGhpcy5kZXN0cm95PWZ1bmN0aW9uKCl7cmVtb3ZlTGlzdGVuZXJzKCksJGVsZW1lbnQuZGF0YShQTFVHSU5fTlMsbnVsbCksJGVsZW1lbnQ9bnVsbH0sdGhpcy5vcHRpb249ZnVuY3Rpb24ocHJvcGVydHksdmFsdWUpe2lmKFwib2JqZWN0XCI9PXR5cGVvZiBwcm9wZXJ0eSlvcHRpb25zPSQuZXh0ZW5kKG9wdGlvbnMscHJvcGVydHkpO2Vsc2UgaWYodm9pZCAwIT09b3B0aW9uc1twcm9wZXJ0eV0pe2lmKHZvaWQgMD09PXZhbHVlKXJldHVybiBvcHRpb25zW3Byb3BlcnR5XTtvcHRpb25zW3Byb3BlcnR5XT12YWx1ZX1lbHNle2lmKCFwcm9wZXJ0eSlyZXR1cm4gb3B0aW9uczskLmVycm9yKFwiT3B0aW9uIFwiK3Byb3BlcnR5K1wiIGRvZXMgbm90IGV4aXN0IG9uIGpRdWVyeS5zd2lwZS5vcHRpb25zXCIpfXJldHVybiBudWxsfX12YXIgVkVSU0lPTj1cIjEuNi4xOFwiLExFRlQ9XCJsZWZ0XCIsUklHSFQ9XCJyaWdodFwiLFVQPVwidXBcIixET1dOPVwiZG93blwiLElOPVwiaW5cIixPVVQ9XCJvdXRcIixOT05FPVwibm9uZVwiLEFVVE89XCJhdXRvXCIsU1dJUEU9XCJzd2lwZVwiLFBJTkNIPVwicGluY2hcIixUQVA9XCJ0YXBcIixET1VCTEVfVEFQPVwiZG91YmxldGFwXCIsTE9OR19UQVA9XCJsb25ndGFwXCIsSE9SSVpPTlRBTD1cImhvcml6b250YWxcIixWRVJUSUNBTD1cInZlcnRpY2FsXCIsQUxMX0ZJTkdFUlM9XCJhbGxcIixET1VCTEVfVEFQX1RIUkVTSE9MRD0xMCxQSEFTRV9TVEFSVD1cInN0YXJ0XCIsUEhBU0VfTU9WRT1cIm1vdmVcIixQSEFTRV9FTkQ9XCJlbmRcIixQSEFTRV9DQU5DRUw9XCJjYW5jZWxcIixTVVBQT1JUU19UT1VDSD1cIm9udG91Y2hzdGFydFwiaW4gd2luZG93LFNVUFBPUlRTX1BPSU5URVJfSUUxMD13aW5kb3cubmF2aWdhdG9yLm1zUG9pbnRlckVuYWJsZWQmJiF3aW5kb3cubmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkJiYhU1VQUE9SVFNfVE9VQ0gsU1VQUE9SVFNfUE9JTlRFUj0od2luZG93Lm5hdmlnYXRvci5wb2ludGVyRW5hYmxlZHx8d2luZG93Lm5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkKSYmIVNVUFBPUlRTX1RPVUNILFBMVUdJTl9OUz1cIlRvdWNoU3dpcGVcIixkZWZhdWx0cz17ZmluZ2VyczoxLHRocmVzaG9sZDo3NSxjYW5jZWxUaHJlc2hvbGQ6bnVsbCxwaW5jaFRocmVzaG9sZDoyMCxtYXhUaW1lVGhyZXNob2xkOm51bGwsZmluZ2VyUmVsZWFzZVRocmVzaG9sZDoyNTAsbG9uZ1RhcFRocmVzaG9sZDo1MDAsZG91YmxlVGFwVGhyZXNob2xkOjIwMCxzd2lwZTpudWxsLHN3aXBlTGVmdDpudWxsLHN3aXBlUmlnaHQ6bnVsbCxzd2lwZVVwOm51bGwsc3dpcGVEb3duOm51bGwsc3dpcGVTdGF0dXM6bnVsbCxwaW5jaEluOm51bGwscGluY2hPdXQ6bnVsbCxwaW5jaFN0YXR1czpudWxsLGNsaWNrOm51bGwsdGFwOm51bGwsZG91YmxlVGFwOm51bGwsbG9uZ1RhcDpudWxsLGhvbGQ6bnVsbCx0cmlnZ2VyT25Ub3VjaEVuZDohMCx0cmlnZ2VyT25Ub3VjaExlYXZlOiExLGFsbG93UGFnZVNjcm9sbDpcImF1dG9cIixmYWxsYmFja1RvTW91c2VFdmVudHM6ITAsZXhjbHVkZWRFbGVtZW50czpcIi5ub1N3aXBlXCIscHJldmVudERlZmF1bHRFdmVudHM6ITB9OyQuZm4uc3dpcGU9ZnVuY3Rpb24obWV0aG9kKXt2YXIgJHRoaXM9JCh0aGlzKSxwbHVnaW49JHRoaXMuZGF0YShQTFVHSU5fTlMpO2lmKHBsdWdpbiYmXCJzdHJpbmdcIj09dHlwZW9mIG1ldGhvZCl7aWYocGx1Z2luW21ldGhvZF0pcmV0dXJuIHBsdWdpblttZXRob2RdLmFwcGx5KHBsdWdpbixBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSkpOyQuZXJyb3IoXCJNZXRob2QgXCIrbWV0aG9kK1wiIGRvZXMgbm90IGV4aXN0IG9uIGpRdWVyeS5zd2lwZVwiKX1lbHNlIGlmKHBsdWdpbiYmXCJvYmplY3RcIj09dHlwZW9mIG1ldGhvZClwbHVnaW4ub3B0aW9uLmFwcGx5KHBsdWdpbixhcmd1bWVudHMpO2Vsc2UgaWYoIShwbHVnaW58fFwib2JqZWN0XCIhPXR5cGVvZiBtZXRob2QmJm1ldGhvZCkpcmV0dXJuIGluaXQuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiAkdGhpc30sJC5mbi5zd2lwZS52ZXJzaW9uPVZFUlNJT04sJC5mbi5zd2lwZS5kZWZhdWx0cz1kZWZhdWx0cywkLmZuLnN3aXBlLnBoYXNlcz17UEhBU0VfU1RBUlQ6UEhBU0VfU1RBUlQsUEhBU0VfTU9WRTpQSEFTRV9NT1ZFLFBIQVNFX0VORDpQSEFTRV9FTkQsUEhBU0VfQ0FOQ0VMOlBIQVNFX0NBTkNFTH0sJC5mbi5zd2lwZS5kaXJlY3Rpb25zPXtMRUZUOkxFRlQsUklHSFQ6UklHSFQsVVA6VVAsRE9XTjpET1dOLElOOklOLE9VVDpPVVR9LCQuZm4uc3dpcGUucGFnZVNjcm9sbD17Tk9ORTpOT05FLEhPUklaT05UQUw6SE9SSVpPTlRBTCxWRVJUSUNBTDpWRVJUSUNBTCxBVVRPOkFVVE99LCQuZm4uc3dpcGUuZmluZ2Vycz17T05FOjEsVFdPOjIsVEhSRUU6MyxGT1VSOjQsRklWRTo1LEFMTDpBTExfRklOR0VSU319KTsiLCIvKiEgalF1ZXJ5IFZhbGlkYXRpb24gUGx1Z2luIC0gdjEuMTkuMSAtIDYvMTUvMjAxOVxuICogaHR0cHM6Ly9qcXVlcnl2YWxpZGF0aW9uLm9yZy9cbiAqIENvcHlyaWdodCAoYykgMjAxOSBKw7ZybiBaYWVmZmVyZXI7IExpY2Vuc2VkIE1JVCAqL1xuIWZ1bmN0aW9uKGEpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW1wianF1ZXJ5XCJdLGEpOlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWEocmVxdWlyZShcImpxdWVyeVwiKSk6YShqUXVlcnkpfShmdW5jdGlvbihhKXthLmV4dGVuZChhLmZuLHt2YWxpZGF0ZTpmdW5jdGlvbihiKXtpZighdGhpcy5sZW5ndGgpcmV0dXJuIHZvaWQoYiYmYi5kZWJ1ZyYmd2luZG93LmNvbnNvbGUmJmNvbnNvbGUud2FybihcIk5vdGhpbmcgc2VsZWN0ZWQsIGNhbid0IHZhbGlkYXRlLCByZXR1cm5pbmcgbm90aGluZy5cIikpO3ZhciBjPWEuZGF0YSh0aGlzWzBdLFwidmFsaWRhdG9yXCIpO3JldHVybiBjP2M6KHRoaXMuYXR0cihcIm5vdmFsaWRhdGVcIixcIm5vdmFsaWRhdGVcIiksYz1uZXcgYS52YWxpZGF0b3IoYix0aGlzWzBdKSxhLmRhdGEodGhpc1swXSxcInZhbGlkYXRvclwiLGMpLGMuc2V0dGluZ3Mub25zdWJtaXQmJih0aGlzLm9uKFwiY2xpY2sudmFsaWRhdGVcIixcIjpzdWJtaXRcIixmdW5jdGlvbihiKXtjLnN1Ym1pdEJ1dHRvbj1iLmN1cnJlbnRUYXJnZXQsYSh0aGlzKS5oYXNDbGFzcyhcImNhbmNlbFwiKSYmKGMuY2FuY2VsU3VibWl0PSEwKSx2b2lkIDAhPT1hKHRoaXMpLmF0dHIoXCJmb3Jtbm92YWxpZGF0ZVwiKSYmKGMuY2FuY2VsU3VibWl0PSEwKX0pLHRoaXMub24oXCJzdWJtaXQudmFsaWRhdGVcIixmdW5jdGlvbihiKXtmdW5jdGlvbiBkKCl7dmFyIGQsZTtyZXR1cm4gYy5zdWJtaXRCdXR0b24mJihjLnNldHRpbmdzLnN1Ym1pdEhhbmRsZXJ8fGMuZm9ybVN1Ym1pdHRlZCkmJihkPWEoXCI8aW5wdXQgdHlwZT0naGlkZGVuJy8+XCIpLmF0dHIoXCJuYW1lXCIsYy5zdWJtaXRCdXR0b24ubmFtZSkudmFsKGEoYy5zdWJtaXRCdXR0b24pLnZhbCgpKS5hcHBlbmRUbyhjLmN1cnJlbnRGb3JtKSksIShjLnNldHRpbmdzLnN1Ym1pdEhhbmRsZXImJiFjLnNldHRpbmdzLmRlYnVnKXx8KGU9Yy5zZXR0aW5ncy5zdWJtaXRIYW5kbGVyLmNhbGwoYyxjLmN1cnJlbnRGb3JtLGIpLGQmJmQucmVtb3ZlKCksdm9pZCAwIT09ZSYmZSl9cmV0dXJuIGMuc2V0dGluZ3MuZGVidWcmJmIucHJldmVudERlZmF1bHQoKSxjLmNhbmNlbFN1Ym1pdD8oYy5jYW5jZWxTdWJtaXQ9ITEsZCgpKTpjLmZvcm0oKT9jLnBlbmRpbmdSZXF1ZXN0PyhjLmZvcm1TdWJtaXR0ZWQ9ITAsITEpOmQoKTooYy5mb2N1c0ludmFsaWQoKSwhMSl9KSksYyl9LHZhbGlkOmZ1bmN0aW9uKCl7dmFyIGIsYyxkO3JldHVybiBhKHRoaXNbMF0pLmlzKFwiZm9ybVwiKT9iPXRoaXMudmFsaWRhdGUoKS5mb3JtKCk6KGQ9W10sYj0hMCxjPWEodGhpc1swXS5mb3JtKS52YWxpZGF0ZSgpLHRoaXMuZWFjaChmdW5jdGlvbigpe2I9Yy5lbGVtZW50KHRoaXMpJiZiLGJ8fChkPWQuY29uY2F0KGMuZXJyb3JMaXN0KSl9KSxjLmVycm9yTGlzdD1kKSxifSxydWxlczpmdW5jdGlvbihiLGMpe3ZhciBkLGUsZixnLGgsaSxqPXRoaXNbMF0saz1cInVuZGVmaW5lZFwiIT10eXBlb2YgdGhpcy5hdHRyKFwiY29udGVudGVkaXRhYmxlXCIpJiZcImZhbHNlXCIhPT10aGlzLmF0dHIoXCJjb250ZW50ZWRpdGFibGVcIik7aWYobnVsbCE9aiYmKCFqLmZvcm0mJmsmJihqLmZvcm09dGhpcy5jbG9zZXN0KFwiZm9ybVwiKVswXSxqLm5hbWU9dGhpcy5hdHRyKFwibmFtZVwiKSksbnVsbCE9ai5mb3JtKSl7aWYoYilzd2l0Y2goZD1hLmRhdGEoai5mb3JtLFwidmFsaWRhdG9yXCIpLnNldHRpbmdzLGU9ZC5ydWxlcyxmPWEudmFsaWRhdG9yLnN0YXRpY1J1bGVzKGopLGIpe2Nhc2VcImFkZFwiOmEuZXh0ZW5kKGYsYS52YWxpZGF0b3Iubm9ybWFsaXplUnVsZShjKSksZGVsZXRlIGYubWVzc2FnZXMsZVtqLm5hbWVdPWYsYy5tZXNzYWdlcyYmKGQubWVzc2FnZXNbai5uYW1lXT1hLmV4dGVuZChkLm1lc3NhZ2VzW2oubmFtZV0sYy5tZXNzYWdlcykpO2JyZWFrO2Nhc2VcInJlbW92ZVwiOnJldHVybiBjPyhpPXt9LGEuZWFjaChjLnNwbGl0KC9cXHMvKSxmdW5jdGlvbihhLGIpe2lbYl09ZltiXSxkZWxldGUgZltiXX0pLGkpOihkZWxldGUgZVtqLm5hbWVdLGYpfXJldHVybiBnPWEudmFsaWRhdG9yLm5vcm1hbGl6ZVJ1bGVzKGEuZXh0ZW5kKHt9LGEudmFsaWRhdG9yLmNsYXNzUnVsZXMoaiksYS52YWxpZGF0b3IuYXR0cmlidXRlUnVsZXMoaiksYS52YWxpZGF0b3IuZGF0YVJ1bGVzKGopLGEudmFsaWRhdG9yLnN0YXRpY1J1bGVzKGopKSxqKSxnLnJlcXVpcmVkJiYoaD1nLnJlcXVpcmVkLGRlbGV0ZSBnLnJlcXVpcmVkLGc9YS5leHRlbmQoe3JlcXVpcmVkOmh9LGcpKSxnLnJlbW90ZSYmKGg9Zy5yZW1vdGUsZGVsZXRlIGcucmVtb3RlLGc9YS5leHRlbmQoZyx7cmVtb3RlOmh9KSksZ319fSksYS5leHRlbmQoYS5leHByLnBzZXVkb3N8fGEuZXhwcltcIjpcIl0se2JsYW5rOmZ1bmN0aW9uKGIpe3JldHVybiFhLnRyaW0oXCJcIithKGIpLnZhbCgpKX0sZmlsbGVkOmZ1bmN0aW9uKGIpe3ZhciBjPWEoYikudmFsKCk7cmV0dXJuIG51bGwhPT1jJiYhIWEudHJpbShcIlwiK2MpfSx1bmNoZWNrZWQ6ZnVuY3Rpb24oYil7cmV0dXJuIWEoYikucHJvcChcImNoZWNrZWRcIil9fSksYS52YWxpZGF0b3I9ZnVuY3Rpb24oYixjKXt0aGlzLnNldHRpbmdzPWEuZXh0ZW5kKCEwLHt9LGEudmFsaWRhdG9yLmRlZmF1bHRzLGIpLHRoaXMuY3VycmVudEZvcm09Yyx0aGlzLmluaXQoKX0sYS52YWxpZGF0b3IuZm9ybWF0PWZ1bmN0aW9uKGIsYyl7cmV0dXJuIDE9PT1hcmd1bWVudHMubGVuZ3RoP2Z1bmN0aW9uKCl7dmFyIGM9YS5tYWtlQXJyYXkoYXJndW1lbnRzKTtyZXR1cm4gYy51bnNoaWZ0KGIpLGEudmFsaWRhdG9yLmZvcm1hdC5hcHBseSh0aGlzLGMpfTp2b2lkIDA9PT1jP2I6KGFyZ3VtZW50cy5sZW5ndGg+MiYmYy5jb25zdHJ1Y3RvciE9PUFycmF5JiYoYz1hLm1ha2VBcnJheShhcmd1bWVudHMpLnNsaWNlKDEpKSxjLmNvbnN0cnVjdG9yIT09QXJyYXkmJihjPVtjXSksYS5lYWNoKGMsZnVuY3Rpb24oYSxjKXtiPWIucmVwbGFjZShuZXcgUmVnRXhwKFwiXFxcXHtcIithK1wiXFxcXH1cIixcImdcIiksZnVuY3Rpb24oKXtyZXR1cm4gY30pfSksYil9LGEuZXh0ZW5kKGEudmFsaWRhdG9yLHtkZWZhdWx0czp7bWVzc2FnZXM6e30sZ3JvdXBzOnt9LHJ1bGVzOnt9LGVycm9yQ2xhc3M6XCJlcnJvclwiLHBlbmRpbmdDbGFzczpcInBlbmRpbmdcIix2YWxpZENsYXNzOlwidmFsaWRcIixlcnJvckVsZW1lbnQ6XCJsYWJlbFwiLGZvY3VzQ2xlYW51cDohMSxmb2N1c0ludmFsaWQ6ITAsZXJyb3JDb250YWluZXI6YShbXSksZXJyb3JMYWJlbENvbnRhaW5lcjphKFtdKSxvbnN1Ym1pdDohMCxpZ25vcmU6XCI6aGlkZGVuXCIsaWdub3JlVGl0bGU6ITEsb25mb2N1c2luOmZ1bmN0aW9uKGEpe3RoaXMubGFzdEFjdGl2ZT1hLHRoaXMuc2V0dGluZ3MuZm9jdXNDbGVhbnVwJiYodGhpcy5zZXR0aW5ncy51bmhpZ2hsaWdodCYmdGhpcy5zZXR0aW5ncy51bmhpZ2hsaWdodC5jYWxsKHRoaXMsYSx0aGlzLnNldHRpbmdzLmVycm9yQ2xhc3MsdGhpcy5zZXR0aW5ncy52YWxpZENsYXNzKSx0aGlzLmhpZGVUaGVzZSh0aGlzLmVycm9yc0ZvcihhKSkpfSxvbmZvY3Vzb3V0OmZ1bmN0aW9uKGEpe3RoaXMuY2hlY2thYmxlKGEpfHwhKGEubmFtZSBpbiB0aGlzLnN1Ym1pdHRlZCkmJnRoaXMub3B0aW9uYWwoYSl8fHRoaXMuZWxlbWVudChhKX0sb25rZXl1cDpmdW5jdGlvbihiLGMpe3ZhciBkPVsxNiwxNywxOCwyMCwzNSwzNiwzNywzOCwzOSw0MCw0NSwxNDQsMjI1XTs5PT09Yy53aGljaCYmXCJcIj09PXRoaXMuZWxlbWVudFZhbHVlKGIpfHxhLmluQXJyYXkoYy5rZXlDb2RlLGQpIT09LTF8fChiLm5hbWUgaW4gdGhpcy5zdWJtaXR0ZWR8fGIubmFtZSBpbiB0aGlzLmludmFsaWQpJiZ0aGlzLmVsZW1lbnQoYil9LG9uY2xpY2s6ZnVuY3Rpb24oYSl7YS5uYW1lIGluIHRoaXMuc3VibWl0dGVkP3RoaXMuZWxlbWVudChhKTphLnBhcmVudE5vZGUubmFtZSBpbiB0aGlzLnN1Ym1pdHRlZCYmdGhpcy5lbGVtZW50KGEucGFyZW50Tm9kZSl9LGhpZ2hsaWdodDpmdW5jdGlvbihiLGMsZCl7XCJyYWRpb1wiPT09Yi50eXBlP3RoaXMuZmluZEJ5TmFtZShiLm5hbWUpLmFkZENsYXNzKGMpLnJlbW92ZUNsYXNzKGQpOmEoYikuYWRkQ2xhc3MoYykucmVtb3ZlQ2xhc3MoZCl9LHVuaGlnaGxpZ2h0OmZ1bmN0aW9uKGIsYyxkKXtcInJhZGlvXCI9PT1iLnR5cGU/dGhpcy5maW5kQnlOYW1lKGIubmFtZSkucmVtb3ZlQ2xhc3MoYykuYWRkQ2xhc3MoZCk6YShiKS5yZW1vdmVDbGFzcyhjKS5hZGRDbGFzcyhkKX19LHNldERlZmF1bHRzOmZ1bmN0aW9uKGIpe2EuZXh0ZW5kKGEudmFsaWRhdG9yLmRlZmF1bHRzLGIpfSxtZXNzYWdlczp7cmVxdWlyZWQ6XCJUaGlzIGZpZWxkIGlzIHJlcXVpcmVkLlwiLHJlbW90ZTpcIlBsZWFzZSBmaXggdGhpcyBmaWVsZC5cIixlbWFpbDpcIlBsZWFzZSBlbnRlciBhIHZhbGlkIGVtYWlsIGFkZHJlc3MuXCIsdXJsOlwiUGxlYXNlIGVudGVyIGEgdmFsaWQgVVJMLlwiLGRhdGU6XCJQbGVhc2UgZW50ZXIgYSB2YWxpZCBkYXRlLlwiLGRhdGVJU086XCJQbGVhc2UgZW50ZXIgYSB2YWxpZCBkYXRlIChJU08pLlwiLG51bWJlcjpcIlBsZWFzZSBlbnRlciBhIHZhbGlkIG51bWJlci5cIixkaWdpdHM6XCJQbGVhc2UgZW50ZXIgb25seSBkaWdpdHMuXCIsZXF1YWxUbzpcIlBsZWFzZSBlbnRlciB0aGUgc2FtZSB2YWx1ZSBhZ2Fpbi5cIixtYXhsZW5ndGg6YS52YWxpZGF0b3IuZm9ybWF0KFwiUGxlYXNlIGVudGVyIG5vIG1vcmUgdGhhbiB7MH0gY2hhcmFjdGVycy5cIiksbWlubGVuZ3RoOmEudmFsaWRhdG9yLmZvcm1hdChcIlBsZWFzZSBlbnRlciBhdCBsZWFzdCB7MH0gY2hhcmFjdGVycy5cIikscmFuZ2VsZW5ndGg6YS52YWxpZGF0b3IuZm9ybWF0KFwiUGxlYXNlIGVudGVyIGEgdmFsdWUgYmV0d2VlbiB7MH0gYW5kIHsxfSBjaGFyYWN0ZXJzIGxvbmcuXCIpLHJhbmdlOmEudmFsaWRhdG9yLmZvcm1hdChcIlBsZWFzZSBlbnRlciBhIHZhbHVlIGJldHdlZW4gezB9IGFuZCB7MX0uXCIpLG1heDphLnZhbGlkYXRvci5mb3JtYXQoXCJQbGVhc2UgZW50ZXIgYSB2YWx1ZSBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gezB9LlwiKSxtaW46YS52YWxpZGF0b3IuZm9ybWF0KFwiUGxlYXNlIGVudGVyIGEgdmFsdWUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHswfS5cIiksc3RlcDphLnZhbGlkYXRvci5mb3JtYXQoXCJQbGVhc2UgZW50ZXIgYSBtdWx0aXBsZSBvZiB7MH0uXCIpfSxhdXRvQ3JlYXRlUmFuZ2VzOiExLHByb3RvdHlwZTp7aW5pdDpmdW5jdGlvbigpe2Z1bmN0aW9uIGIoYil7dmFyIGM9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEodGhpcykuYXR0cihcImNvbnRlbnRlZGl0YWJsZVwiKSYmXCJmYWxzZVwiIT09YSh0aGlzKS5hdHRyKFwiY29udGVudGVkaXRhYmxlXCIpO2lmKCF0aGlzLmZvcm0mJmMmJih0aGlzLmZvcm09YSh0aGlzKS5jbG9zZXN0KFwiZm9ybVwiKVswXSx0aGlzLm5hbWU9YSh0aGlzKS5hdHRyKFwibmFtZVwiKSksZD09PXRoaXMuZm9ybSl7dmFyIGU9YS5kYXRhKHRoaXMuZm9ybSxcInZhbGlkYXRvclwiKSxmPVwib25cIitiLnR5cGUucmVwbGFjZSgvXnZhbGlkYXRlLyxcIlwiKSxnPWUuc2V0dGluZ3M7Z1tmXSYmIWEodGhpcykuaXMoZy5pZ25vcmUpJiZnW2ZdLmNhbGwoZSx0aGlzLGIpfX10aGlzLmxhYmVsQ29udGFpbmVyPWEodGhpcy5zZXR0aW5ncy5lcnJvckxhYmVsQ29udGFpbmVyKSx0aGlzLmVycm9yQ29udGV4dD10aGlzLmxhYmVsQ29udGFpbmVyLmxlbmd0aCYmdGhpcy5sYWJlbENvbnRhaW5lcnx8YSh0aGlzLmN1cnJlbnRGb3JtKSx0aGlzLmNvbnRhaW5lcnM9YSh0aGlzLnNldHRpbmdzLmVycm9yQ29udGFpbmVyKS5hZGQodGhpcy5zZXR0aW5ncy5lcnJvckxhYmVsQ29udGFpbmVyKSx0aGlzLnN1Ym1pdHRlZD17fSx0aGlzLnZhbHVlQ2FjaGU9e30sdGhpcy5wZW5kaW5nUmVxdWVzdD0wLHRoaXMucGVuZGluZz17fSx0aGlzLmludmFsaWQ9e30sdGhpcy5yZXNldCgpO3ZhciBjLGQ9dGhpcy5jdXJyZW50Rm9ybSxlPXRoaXMuZ3JvdXBzPXt9O2EuZWFjaCh0aGlzLnNldHRpbmdzLmdyb3VwcyxmdW5jdGlvbihiLGMpe1wic3RyaW5nXCI9PXR5cGVvZiBjJiYoYz1jLnNwbGl0KC9cXHMvKSksYS5lYWNoKGMsZnVuY3Rpb24oYSxjKXtlW2NdPWJ9KX0pLGM9dGhpcy5zZXR0aW5ncy5ydWxlcyxhLmVhY2goYyxmdW5jdGlvbihiLGQpe2NbYl09YS52YWxpZGF0b3Iubm9ybWFsaXplUnVsZShkKX0pLGEodGhpcy5jdXJyZW50Rm9ybSkub24oXCJmb2N1c2luLnZhbGlkYXRlIGZvY3Vzb3V0LnZhbGlkYXRlIGtleXVwLnZhbGlkYXRlXCIsXCI6dGV4dCwgW3R5cGU9J3Bhc3N3b3JkJ10sIFt0eXBlPSdmaWxlJ10sIHNlbGVjdCwgdGV4dGFyZWEsIFt0eXBlPSdudW1iZXInXSwgW3R5cGU9J3NlYXJjaCddLCBbdHlwZT0ndGVsJ10sIFt0eXBlPSd1cmwnXSwgW3R5cGU9J2VtYWlsJ10sIFt0eXBlPSdkYXRldGltZSddLCBbdHlwZT0nZGF0ZSddLCBbdHlwZT0nbW9udGgnXSwgW3R5cGU9J3dlZWsnXSwgW3R5cGU9J3RpbWUnXSwgW3R5cGU9J2RhdGV0aW1lLWxvY2FsJ10sIFt0eXBlPSdyYW5nZSddLCBbdHlwZT0nY29sb3InXSwgW3R5cGU9J3JhZGlvJ10sIFt0eXBlPSdjaGVja2JveCddLCBbY29udGVudGVkaXRhYmxlXSwgW3R5cGU9J2J1dHRvbiddXCIsYikub24oXCJjbGljay52YWxpZGF0ZVwiLFwic2VsZWN0LCBvcHRpb24sIFt0eXBlPSdyYWRpbyddLCBbdHlwZT0nY2hlY2tib3gnXVwiLGIpLHRoaXMuc2V0dGluZ3MuaW52YWxpZEhhbmRsZXImJmEodGhpcy5jdXJyZW50Rm9ybSkub24oXCJpbnZhbGlkLWZvcm0udmFsaWRhdGVcIix0aGlzLnNldHRpbmdzLmludmFsaWRIYW5kbGVyKX0sZm9ybTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNoZWNrRm9ybSgpLGEuZXh0ZW5kKHRoaXMuc3VibWl0dGVkLHRoaXMuZXJyb3JNYXApLHRoaXMuaW52YWxpZD1hLmV4dGVuZCh7fSx0aGlzLmVycm9yTWFwKSx0aGlzLnZhbGlkKCl8fGEodGhpcy5jdXJyZW50Rm9ybSkudHJpZ2dlckhhbmRsZXIoXCJpbnZhbGlkLWZvcm1cIixbdGhpc10pLHRoaXMuc2hvd0Vycm9ycygpLHRoaXMudmFsaWQoKX0sY2hlY2tGb3JtOmZ1bmN0aW9uKCl7dGhpcy5wcmVwYXJlRm9ybSgpO2Zvcih2YXIgYT0wLGI9dGhpcy5jdXJyZW50RWxlbWVudHM9dGhpcy5lbGVtZW50cygpO2JbYV07YSsrKXRoaXMuY2hlY2soYlthXSk7cmV0dXJuIHRoaXMudmFsaWQoKX0sZWxlbWVudDpmdW5jdGlvbihiKXt2YXIgYyxkLGU9dGhpcy5jbGVhbihiKSxmPXRoaXMudmFsaWRhdGlvblRhcmdldEZvcihlKSxnPXRoaXMsaD0hMDtyZXR1cm4gdm9pZCAwPT09Zj9kZWxldGUgdGhpcy5pbnZhbGlkW2UubmFtZV06KHRoaXMucHJlcGFyZUVsZW1lbnQoZiksdGhpcy5jdXJyZW50RWxlbWVudHM9YShmKSxkPXRoaXMuZ3JvdXBzW2YubmFtZV0sZCYmYS5lYWNoKHRoaXMuZ3JvdXBzLGZ1bmN0aW9uKGEsYil7Yj09PWQmJmEhPT1mLm5hbWUmJihlPWcudmFsaWRhdGlvblRhcmdldEZvcihnLmNsZWFuKGcuZmluZEJ5TmFtZShhKSkpLGUmJmUubmFtZSBpbiBnLmludmFsaWQmJihnLmN1cnJlbnRFbGVtZW50cy5wdXNoKGUpLGg9Zy5jaGVjayhlKSYmaCkpfSksYz10aGlzLmNoZWNrKGYpIT09ITEsaD1oJiZjLGM/dGhpcy5pbnZhbGlkW2YubmFtZV09ITE6dGhpcy5pbnZhbGlkW2YubmFtZV09ITAsdGhpcy5udW1iZXJPZkludmFsaWRzKCl8fCh0aGlzLnRvSGlkZT10aGlzLnRvSGlkZS5hZGQodGhpcy5jb250YWluZXJzKSksdGhpcy5zaG93RXJyb3JzKCksYShiKS5hdHRyKFwiYXJpYS1pbnZhbGlkXCIsIWMpKSxofSxzaG93RXJyb3JzOmZ1bmN0aW9uKGIpe2lmKGIpe3ZhciBjPXRoaXM7YS5leHRlbmQodGhpcy5lcnJvck1hcCxiKSx0aGlzLmVycm9yTGlzdD1hLm1hcCh0aGlzLmVycm9yTWFwLGZ1bmN0aW9uKGEsYil7cmV0dXJue21lc3NhZ2U6YSxlbGVtZW50OmMuZmluZEJ5TmFtZShiKVswXX19KSx0aGlzLnN1Y2Nlc3NMaXN0PWEuZ3JlcCh0aGlzLnN1Y2Nlc3NMaXN0LGZ1bmN0aW9uKGEpe3JldHVybiEoYS5uYW1lIGluIGIpfSl9dGhpcy5zZXR0aW5ncy5zaG93RXJyb3JzP3RoaXMuc2V0dGluZ3Muc2hvd0Vycm9ycy5jYWxsKHRoaXMsdGhpcy5lcnJvck1hcCx0aGlzLmVycm9yTGlzdCk6dGhpcy5kZWZhdWx0U2hvd0Vycm9ycygpfSxyZXNldEZvcm06ZnVuY3Rpb24oKXthLmZuLnJlc2V0Rm9ybSYmYSh0aGlzLmN1cnJlbnRGb3JtKS5yZXNldEZvcm0oKSx0aGlzLmludmFsaWQ9e30sdGhpcy5zdWJtaXR0ZWQ9e30sdGhpcy5wcmVwYXJlRm9ybSgpLHRoaXMuaGlkZUVycm9ycygpO3ZhciBiPXRoaXMuZWxlbWVudHMoKS5yZW1vdmVEYXRhKFwicHJldmlvdXNWYWx1ZVwiKS5yZW1vdmVBdHRyKFwiYXJpYS1pbnZhbGlkXCIpO3RoaXMucmVzZXRFbGVtZW50cyhiKX0scmVzZXRFbGVtZW50czpmdW5jdGlvbihhKXt2YXIgYjtpZih0aGlzLnNldHRpbmdzLnVuaGlnaGxpZ2h0KWZvcihiPTA7YVtiXTtiKyspdGhpcy5zZXR0aW5ncy51bmhpZ2hsaWdodC5jYWxsKHRoaXMsYVtiXSx0aGlzLnNldHRpbmdzLmVycm9yQ2xhc3MsXCJcIiksdGhpcy5maW5kQnlOYW1lKGFbYl0ubmFtZSkucmVtb3ZlQ2xhc3ModGhpcy5zZXR0aW5ncy52YWxpZENsYXNzKTtlbHNlIGEucmVtb3ZlQ2xhc3ModGhpcy5zZXR0aW5ncy5lcnJvckNsYXNzKS5yZW1vdmVDbGFzcyh0aGlzLnNldHRpbmdzLnZhbGlkQ2xhc3MpfSxudW1iZXJPZkludmFsaWRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub2JqZWN0TGVuZ3RoKHRoaXMuaW52YWxpZCl9LG9iamVjdExlbmd0aDpmdW5jdGlvbihhKXt2YXIgYixjPTA7Zm9yKGIgaW4gYSl2b2lkIDAhPT1hW2JdJiZudWxsIT09YVtiXSYmYVtiXSE9PSExJiZjKys7cmV0dXJuIGN9LGhpZGVFcnJvcnM6ZnVuY3Rpb24oKXt0aGlzLmhpZGVUaGVzZSh0aGlzLnRvSGlkZSl9LGhpZGVUaGVzZTpmdW5jdGlvbihhKXthLm5vdCh0aGlzLmNvbnRhaW5lcnMpLnRleHQoXCJcIiksdGhpcy5hZGRXcmFwcGVyKGEpLmhpZGUoKX0sdmFsaWQ6ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuc2l6ZSgpfSxzaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXJyb3JMaXN0Lmxlbmd0aH0sZm9jdXNJbnZhbGlkOmZ1bmN0aW9uKCl7aWYodGhpcy5zZXR0aW5ncy5mb2N1c0ludmFsaWQpdHJ5e2EodGhpcy5maW5kTGFzdEFjdGl2ZSgpfHx0aGlzLmVycm9yTGlzdC5sZW5ndGgmJnRoaXMuZXJyb3JMaXN0WzBdLmVsZW1lbnR8fFtdKS5maWx0ZXIoXCI6dmlzaWJsZVwiKS50cmlnZ2VyKFwiZm9jdXNcIikudHJpZ2dlcihcImZvY3VzaW5cIil9Y2F0Y2goYil7fX0sZmluZExhc3RBY3RpdmU6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLmxhc3RBY3RpdmU7cmV0dXJuIGImJjE9PT1hLmdyZXAodGhpcy5lcnJvckxpc3QsZnVuY3Rpb24oYSl7cmV0dXJuIGEuZWxlbWVudC5uYW1lPT09Yi5uYW1lfSkubGVuZ3RoJiZifSxlbGVtZW50czpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYz17fTtyZXR1cm4gYSh0aGlzLmN1cnJlbnRGb3JtKS5maW5kKFwiaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEsIFtjb250ZW50ZWRpdGFibGVdXCIpLm5vdChcIjpzdWJtaXQsIDpyZXNldCwgOmltYWdlLCA6ZGlzYWJsZWRcIikubm90KHRoaXMuc2V0dGluZ3MuaWdub3JlKS5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgZD10aGlzLm5hbWV8fGEodGhpcykuYXR0cihcIm5hbWVcIiksZT1cInVuZGVmaW5lZFwiIT10eXBlb2YgYSh0aGlzKS5hdHRyKFwiY29udGVudGVkaXRhYmxlXCIpJiZcImZhbHNlXCIhPT1hKHRoaXMpLmF0dHIoXCJjb250ZW50ZWRpdGFibGVcIik7cmV0dXJuIWQmJmIuc2V0dGluZ3MuZGVidWcmJndpbmRvdy5jb25zb2xlJiZjb25zb2xlLmVycm9yKFwiJW8gaGFzIG5vIG5hbWUgYXNzaWduZWRcIix0aGlzKSxlJiYodGhpcy5mb3JtPWEodGhpcykuY2xvc2VzdChcImZvcm1cIilbMF0sdGhpcy5uYW1lPWQpLHRoaXMuZm9ybT09PWIuY3VycmVudEZvcm0mJighKGQgaW4gY3x8IWIub2JqZWN0TGVuZ3RoKGEodGhpcykucnVsZXMoKSkpJiYoY1tkXT0hMCwhMCkpfSl9LGNsZWFuOmZ1bmN0aW9uKGIpe3JldHVybiBhKGIpWzBdfSxlcnJvcnM6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLnNldHRpbmdzLmVycm9yQ2xhc3Muc3BsaXQoXCIgXCIpLmpvaW4oXCIuXCIpO3JldHVybiBhKHRoaXMuc2V0dGluZ3MuZXJyb3JFbGVtZW50K1wiLlwiK2IsdGhpcy5lcnJvckNvbnRleHQpfSxyZXNldEludGVybmFsczpmdW5jdGlvbigpe3RoaXMuc3VjY2Vzc0xpc3Q9W10sdGhpcy5lcnJvckxpc3Q9W10sdGhpcy5lcnJvck1hcD17fSx0aGlzLnRvU2hvdz1hKFtdKSx0aGlzLnRvSGlkZT1hKFtdKX0scmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLnJlc2V0SW50ZXJuYWxzKCksdGhpcy5jdXJyZW50RWxlbWVudHM9YShbXSl9LHByZXBhcmVGb3JtOmZ1bmN0aW9uKCl7dGhpcy5yZXNldCgpLHRoaXMudG9IaWRlPXRoaXMuZXJyb3JzKCkuYWRkKHRoaXMuY29udGFpbmVycyl9LHByZXBhcmVFbGVtZW50OmZ1bmN0aW9uKGEpe3RoaXMucmVzZXQoKSx0aGlzLnRvSGlkZT10aGlzLmVycm9yc0ZvcihhKX0sZWxlbWVudFZhbHVlOmZ1bmN0aW9uKGIpe3ZhciBjLGQsZT1hKGIpLGY9Yi50eXBlLGc9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGUuYXR0cihcImNvbnRlbnRlZGl0YWJsZVwiKSYmXCJmYWxzZVwiIT09ZS5hdHRyKFwiY29udGVudGVkaXRhYmxlXCIpO3JldHVyblwicmFkaW9cIj09PWZ8fFwiY2hlY2tib3hcIj09PWY/dGhpcy5maW5kQnlOYW1lKGIubmFtZSkuZmlsdGVyKFwiOmNoZWNrZWRcIikudmFsKCk6XCJudW1iZXJcIj09PWYmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBiLnZhbGlkaXR5P2IudmFsaWRpdHkuYmFkSW5wdXQ/XCJOYU5cIjplLnZhbCgpOihjPWc/ZS50ZXh0KCk6ZS52YWwoKSxcImZpbGVcIj09PWY/XCJDOlxcXFxmYWtlcGF0aFxcXFxcIj09PWMuc3Vic3RyKDAsMTIpP2Muc3Vic3RyKDEyKTooZD1jLmxhc3RJbmRleE9mKFwiL1wiKSxkPj0wP2Muc3Vic3RyKGQrMSk6KGQ9Yy5sYXN0SW5kZXhPZihcIlxcXFxcIiksZD49MD9jLnN1YnN0cihkKzEpOmMpKTpcInN0cmluZ1wiPT10eXBlb2YgYz9jLnJlcGxhY2UoL1xcci9nLFwiXCIpOmMpfSxjaGVjazpmdW5jdGlvbihiKXtiPXRoaXMudmFsaWRhdGlvblRhcmdldEZvcih0aGlzLmNsZWFuKGIpKTt2YXIgYyxkLGUsZixnPWEoYikucnVsZXMoKSxoPWEubWFwKGcsZnVuY3Rpb24oYSxiKXtyZXR1cm4gYn0pLmxlbmd0aCxpPSExLGo9dGhpcy5lbGVtZW50VmFsdWUoYik7XCJmdW5jdGlvblwiPT10eXBlb2YgZy5ub3JtYWxpemVyP2Y9Zy5ub3JtYWxpemVyOlwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMuc2V0dGluZ3Mubm9ybWFsaXplciYmKGY9dGhpcy5zZXR0aW5ncy5ub3JtYWxpemVyKSxmJiYoaj1mLmNhbGwoYixqKSxkZWxldGUgZy5ub3JtYWxpemVyKTtmb3IoZCBpbiBnKXtlPXttZXRob2Q6ZCxwYXJhbWV0ZXJzOmdbZF19O3RyeXtpZihjPWEudmFsaWRhdG9yLm1ldGhvZHNbZF0uY2FsbCh0aGlzLGosYixlLnBhcmFtZXRlcnMpLFwiZGVwZW5kZW5jeS1taXNtYXRjaFwiPT09YyYmMT09PWgpe2k9ITA7Y29udGludWV9aWYoaT0hMSxcInBlbmRpbmdcIj09PWMpcmV0dXJuIHZvaWQodGhpcy50b0hpZGU9dGhpcy50b0hpZGUubm90KHRoaXMuZXJyb3JzRm9yKGIpKSk7aWYoIWMpcmV0dXJuIHRoaXMuZm9ybWF0QW5kQWRkKGIsZSksITF9Y2F0Y2goayl7dGhyb3cgdGhpcy5zZXR0aW5ncy5kZWJ1ZyYmd2luZG93LmNvbnNvbGUmJmNvbnNvbGUubG9nKFwiRXhjZXB0aW9uIG9jY3VycmVkIHdoZW4gY2hlY2tpbmcgZWxlbWVudCBcIitiLmlkK1wiLCBjaGVjayB0aGUgJ1wiK2UubWV0aG9kK1wiJyBtZXRob2QuXCIsayksayBpbnN0YW5jZW9mIFR5cGVFcnJvciYmKGsubWVzc2FnZSs9XCIuICBFeGNlcHRpb24gb2NjdXJyZWQgd2hlbiBjaGVja2luZyBlbGVtZW50IFwiK2IuaWQrXCIsIGNoZWNrIHRoZSAnXCIrZS5tZXRob2QrXCInIG1ldGhvZC5cIiksa319aWYoIWkpcmV0dXJuIHRoaXMub2JqZWN0TGVuZ3RoKGcpJiZ0aGlzLnN1Y2Nlc3NMaXN0LnB1c2goYiksITB9LGN1c3RvbURhdGFNZXNzYWdlOmZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEoYikuZGF0YShcIm1zZ1wiK2MuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrYy5zdWJzdHJpbmcoMSkudG9Mb3dlckNhc2UoKSl8fGEoYikuZGF0YShcIm1zZ1wiKX0sY3VzdG9tTWVzc2FnZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuc2V0dGluZ3MubWVzc2FnZXNbYV07cmV0dXJuIGMmJihjLmNvbnN0cnVjdG9yPT09U3RyaW5nP2M6Y1tiXSl9LGZpbmREZWZpbmVkOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTxhcmd1bWVudHMubGVuZ3RoO2ErKylpZih2b2lkIDAhPT1hcmd1bWVudHNbYV0pcmV0dXJuIGFyZ3VtZW50c1thXX0sZGVmYXVsdE1lc3NhZ2U6ZnVuY3Rpb24oYixjKXtcInN0cmluZ1wiPT10eXBlb2YgYyYmKGM9e21ldGhvZDpjfSk7dmFyIGQ9dGhpcy5maW5kRGVmaW5lZCh0aGlzLmN1c3RvbU1lc3NhZ2UoYi5uYW1lLGMubWV0aG9kKSx0aGlzLmN1c3RvbURhdGFNZXNzYWdlKGIsYy5tZXRob2QpLCF0aGlzLnNldHRpbmdzLmlnbm9yZVRpdGxlJiZiLnRpdGxlfHx2b2lkIDAsYS52YWxpZGF0b3IubWVzc2FnZXNbYy5tZXRob2RdLFwiPHN0cm9uZz5XYXJuaW5nOiBObyBtZXNzYWdlIGRlZmluZWQgZm9yIFwiK2IubmFtZStcIjwvc3Ryb25nPlwiKSxlPS9cXCQ/XFx7KFxcZCspXFx9L2c7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZD9kPWQuY2FsbCh0aGlzLGMucGFyYW1ldGVycyxiKTplLnRlc3QoZCkmJihkPWEudmFsaWRhdG9yLmZvcm1hdChkLnJlcGxhY2UoZSxcInskMX1cIiksYy5wYXJhbWV0ZXJzKSksZH0sZm9ybWF0QW5kQWRkOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5kZWZhdWx0TWVzc2FnZShhLGIpO3RoaXMuZXJyb3JMaXN0LnB1c2goe21lc3NhZ2U6YyxlbGVtZW50OmEsbWV0aG9kOmIubWV0aG9kfSksdGhpcy5lcnJvck1hcFthLm5hbWVdPWMsdGhpcy5zdWJtaXR0ZWRbYS5uYW1lXT1jfSxhZGRXcmFwcGVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnNldHRpbmdzLndyYXBwZXImJihhPWEuYWRkKGEucGFyZW50KHRoaXMuc2V0dGluZ3Mud3JhcHBlcikpKSxhfSxkZWZhdWx0U2hvd0Vycm9yczpmdW5jdGlvbigpe3ZhciBhLGIsYztmb3IoYT0wO3RoaXMuZXJyb3JMaXN0W2FdO2ErKyljPXRoaXMuZXJyb3JMaXN0W2FdLHRoaXMuc2V0dGluZ3MuaGlnaGxpZ2h0JiZ0aGlzLnNldHRpbmdzLmhpZ2hsaWdodC5jYWxsKHRoaXMsYy5lbGVtZW50LHRoaXMuc2V0dGluZ3MuZXJyb3JDbGFzcyx0aGlzLnNldHRpbmdzLnZhbGlkQ2xhc3MpLHRoaXMuc2hvd0xhYmVsKGMuZWxlbWVudCxjLm1lc3NhZ2UpO2lmKHRoaXMuZXJyb3JMaXN0Lmxlbmd0aCYmKHRoaXMudG9TaG93PXRoaXMudG9TaG93LmFkZCh0aGlzLmNvbnRhaW5lcnMpKSx0aGlzLnNldHRpbmdzLnN1Y2Nlc3MpZm9yKGE9MDt0aGlzLnN1Y2Nlc3NMaXN0W2FdO2ErKyl0aGlzLnNob3dMYWJlbCh0aGlzLnN1Y2Nlc3NMaXN0W2FdKTtpZih0aGlzLnNldHRpbmdzLnVuaGlnaGxpZ2h0KWZvcihhPTAsYj10aGlzLnZhbGlkRWxlbWVudHMoKTtiW2FdO2ErKyl0aGlzLnNldHRpbmdzLnVuaGlnaGxpZ2h0LmNhbGwodGhpcyxiW2FdLHRoaXMuc2V0dGluZ3MuZXJyb3JDbGFzcyx0aGlzLnNldHRpbmdzLnZhbGlkQ2xhc3MpO3RoaXMudG9IaWRlPXRoaXMudG9IaWRlLm5vdCh0aGlzLnRvU2hvdyksdGhpcy5oaWRlRXJyb3JzKCksdGhpcy5hZGRXcmFwcGVyKHRoaXMudG9TaG93KS5zaG93KCl9LHZhbGlkRWxlbWVudHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jdXJyZW50RWxlbWVudHMubm90KHRoaXMuaW52YWxpZEVsZW1lbnRzKCkpfSxpbnZhbGlkRWxlbWVudHM6ZnVuY3Rpb24oKXtyZXR1cm4gYSh0aGlzLmVycm9yTGlzdCkubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWxlbWVudH0pfSxzaG93TGFiZWw6ZnVuY3Rpb24oYixjKXt2YXIgZCxlLGYsZyxoPXRoaXMuZXJyb3JzRm9yKGIpLGk9dGhpcy5pZE9yTmFtZShiKSxqPWEoYikuYXR0cihcImFyaWEtZGVzY3JpYmVkYnlcIik7aC5sZW5ndGg/KGgucmVtb3ZlQ2xhc3ModGhpcy5zZXR0aW5ncy52YWxpZENsYXNzKS5hZGRDbGFzcyh0aGlzLnNldHRpbmdzLmVycm9yQ2xhc3MpLGguaHRtbChjKSk6KGg9YShcIjxcIit0aGlzLnNldHRpbmdzLmVycm9yRWxlbWVudCtcIj5cIikuYXR0cihcImlkXCIsaStcIi1lcnJvclwiKS5hZGRDbGFzcyh0aGlzLnNldHRpbmdzLmVycm9yQ2xhc3MpLmh0bWwoY3x8XCJcIiksZD1oLHRoaXMuc2V0dGluZ3Mud3JhcHBlciYmKGQ9aC5oaWRlKCkuc2hvdygpLndyYXAoXCI8XCIrdGhpcy5zZXR0aW5ncy53cmFwcGVyK1wiLz5cIikucGFyZW50KCkpLHRoaXMubGFiZWxDb250YWluZXIubGVuZ3RoP3RoaXMubGFiZWxDb250YWluZXIuYXBwZW5kKGQpOnRoaXMuc2V0dGluZ3MuZXJyb3JQbGFjZW1lbnQ/dGhpcy5zZXR0aW5ncy5lcnJvclBsYWNlbWVudC5jYWxsKHRoaXMsZCxhKGIpKTpkLmluc2VydEFmdGVyKGIpLGguaXMoXCJsYWJlbFwiKT9oLmF0dHIoXCJmb3JcIixpKTowPT09aC5wYXJlbnRzKFwibGFiZWxbZm9yPSdcIit0aGlzLmVzY2FwZUNzc01ldGEoaSkrXCInXVwiKS5sZW5ndGgmJihmPWguYXR0cihcImlkXCIpLGo/ai5tYXRjaChuZXcgUmVnRXhwKFwiXFxcXGJcIit0aGlzLmVzY2FwZUNzc01ldGEoZikrXCJcXFxcYlwiKSl8fChqKz1cIiBcIitmKTpqPWYsYShiKS5hdHRyKFwiYXJpYS1kZXNjcmliZWRieVwiLGopLGU9dGhpcy5ncm91cHNbYi5uYW1lXSxlJiYoZz10aGlzLGEuZWFjaChnLmdyb3VwcyxmdW5jdGlvbihiLGMpe2M9PT1lJiZhKFwiW25hbWU9J1wiK2cuZXNjYXBlQ3NzTWV0YShiKStcIiddXCIsZy5jdXJyZW50Rm9ybSkuYXR0cihcImFyaWEtZGVzY3JpYmVkYnlcIixoLmF0dHIoXCJpZFwiKSl9KSkpKSwhYyYmdGhpcy5zZXR0aW5ncy5zdWNjZXNzJiYoaC50ZXh0KFwiXCIpLFwic3RyaW5nXCI9PXR5cGVvZiB0aGlzLnNldHRpbmdzLnN1Y2Nlc3M/aC5hZGRDbGFzcyh0aGlzLnNldHRpbmdzLnN1Y2Nlc3MpOnRoaXMuc2V0dGluZ3Muc3VjY2VzcyhoLGIpKSx0aGlzLnRvU2hvdz10aGlzLnRvU2hvdy5hZGQoaCl9LGVycm9yc0ZvcjpmdW5jdGlvbihiKXt2YXIgYz10aGlzLmVzY2FwZUNzc01ldGEodGhpcy5pZE9yTmFtZShiKSksZD1hKGIpLmF0dHIoXCJhcmlhLWRlc2NyaWJlZGJ5XCIpLGU9XCJsYWJlbFtmb3I9J1wiK2MrXCInXSwgbGFiZWxbZm9yPSdcIitjK1wiJ10gKlwiO3JldHVybiBkJiYoZT1lK1wiLCAjXCIrdGhpcy5lc2NhcGVDc3NNZXRhKGQpLnJlcGxhY2UoL1xccysvZyxcIiwgI1wiKSksdGhpcy5lcnJvcnMoKS5maWx0ZXIoZSl9LGVzY2FwZUNzc01ldGE6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZSgvKFtcXFxcIVwiIyQlJicoKSorLC5cXC86Ozw9Pj9AXFxbXFxdXmB7fH1+XSkvZyxcIlxcXFwkMVwiKX0saWRPck5hbWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ3JvdXBzW2EubmFtZV18fCh0aGlzLmNoZWNrYWJsZShhKT9hLm5hbWU6YS5pZHx8YS5uYW1lKX0sdmFsaWRhdGlvblRhcmdldEZvcjpmdW5jdGlvbihiKXtyZXR1cm4gdGhpcy5jaGVja2FibGUoYikmJihiPXRoaXMuZmluZEJ5TmFtZShiLm5hbWUpKSxhKGIpLm5vdCh0aGlzLnNldHRpbmdzLmlnbm9yZSlbMF19LGNoZWNrYWJsZTpmdW5jdGlvbihhKXtyZXR1cm4vcmFkaW98Y2hlY2tib3gvaS50ZXN0KGEudHlwZSl9LGZpbmRCeU5hbWU6ZnVuY3Rpb24oYil7cmV0dXJuIGEodGhpcy5jdXJyZW50Rm9ybSkuZmluZChcIltuYW1lPSdcIit0aGlzLmVzY2FwZUNzc01ldGEoYikrXCInXVwiKX0sZ2V0TGVuZ3RoOmZ1bmN0aW9uKGIsYyl7c3dpdGNoKGMubm9kZU5hbWUudG9Mb3dlckNhc2UoKSl7Y2FzZVwic2VsZWN0XCI6cmV0dXJuIGEoXCJvcHRpb246c2VsZWN0ZWRcIixjKS5sZW5ndGg7Y2FzZVwiaW5wdXRcIjppZih0aGlzLmNoZWNrYWJsZShjKSlyZXR1cm4gdGhpcy5maW5kQnlOYW1lKGMubmFtZSkuZmlsdGVyKFwiOmNoZWNrZWRcIikubGVuZ3RofXJldHVybiBiLmxlbmd0aH0sZGVwZW5kOmZ1bmN0aW9uKGEsYil7cmV0dXJuIXRoaXMuZGVwZW5kVHlwZXNbdHlwZW9mIGFdfHx0aGlzLmRlcGVuZFR5cGVzW3R5cGVvZiBhXShhLGIpfSxkZXBlbmRUeXBlczp7XCJib29sZWFuXCI6ZnVuY3Rpb24oYSl7cmV0dXJuIGF9LHN0cmluZzpmdW5jdGlvbihiLGMpe3JldHVybiEhYShiLGMuZm9ybSkubGVuZ3RofSxcImZ1bmN0aW9uXCI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYShiKX19LG9wdGlvbmFsOmZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMuZWxlbWVudFZhbHVlKGIpO3JldHVybiFhLnZhbGlkYXRvci5tZXRob2RzLnJlcXVpcmVkLmNhbGwodGhpcyxjLGIpJiZcImRlcGVuZGVuY3ktbWlzbWF0Y2hcIn0sc3RhcnRSZXF1ZXN0OmZ1bmN0aW9uKGIpe3RoaXMucGVuZGluZ1tiLm5hbWVdfHwodGhpcy5wZW5kaW5nUmVxdWVzdCsrLGEoYikuYWRkQ2xhc3ModGhpcy5zZXR0aW5ncy5wZW5kaW5nQ2xhc3MpLHRoaXMucGVuZGluZ1tiLm5hbWVdPSEwKX0sc3RvcFJlcXVlc3Q6ZnVuY3Rpb24oYixjKXt0aGlzLnBlbmRpbmdSZXF1ZXN0LS0sdGhpcy5wZW5kaW5nUmVxdWVzdDwwJiYodGhpcy5wZW5kaW5nUmVxdWVzdD0wKSxkZWxldGUgdGhpcy5wZW5kaW5nW2IubmFtZV0sYShiKS5yZW1vdmVDbGFzcyh0aGlzLnNldHRpbmdzLnBlbmRpbmdDbGFzcyksYyYmMD09PXRoaXMucGVuZGluZ1JlcXVlc3QmJnRoaXMuZm9ybVN1Ym1pdHRlZCYmdGhpcy5mb3JtKCk/KGEodGhpcy5jdXJyZW50Rm9ybSkuc3VibWl0KCksdGhpcy5zdWJtaXRCdXR0b24mJmEoXCJpbnB1dDpoaWRkZW5bbmFtZT0nXCIrdGhpcy5zdWJtaXRCdXR0b24ubmFtZStcIiddXCIsdGhpcy5jdXJyZW50Rm9ybSkucmVtb3ZlKCksdGhpcy5mb3JtU3VibWl0dGVkPSExKTohYyYmMD09PXRoaXMucGVuZGluZ1JlcXVlc3QmJnRoaXMuZm9ybVN1Ym1pdHRlZCYmKGEodGhpcy5jdXJyZW50Rm9ybSkudHJpZ2dlckhhbmRsZXIoXCJpbnZhbGlkLWZvcm1cIixbdGhpc10pLHRoaXMuZm9ybVN1Ym1pdHRlZD0hMSl9LHByZXZpb3VzVmFsdWU6ZnVuY3Rpb24oYixjKXtyZXR1cm4gYz1cInN0cmluZ1wiPT10eXBlb2YgYyYmY3x8XCJyZW1vdGVcIixhLmRhdGEoYixcInByZXZpb3VzVmFsdWVcIil8fGEuZGF0YShiLFwicHJldmlvdXNWYWx1ZVwiLHtvbGQ6bnVsbCx2YWxpZDohMCxtZXNzYWdlOnRoaXMuZGVmYXVsdE1lc3NhZ2UoYix7bWV0aG9kOmN9KX0pfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5yZXNldEZvcm0oKSxhKHRoaXMuY3VycmVudEZvcm0pLm9mZihcIi52YWxpZGF0ZVwiKS5yZW1vdmVEYXRhKFwidmFsaWRhdG9yXCIpLmZpbmQoXCIudmFsaWRhdGUtZXF1YWxUby1ibHVyXCIpLm9mZihcIi52YWxpZGF0ZS1lcXVhbFRvXCIpLnJlbW92ZUNsYXNzKFwidmFsaWRhdGUtZXF1YWxUby1ibHVyXCIpLmZpbmQoXCIudmFsaWRhdGUtbGVzc1RoYW4tYmx1clwiKS5vZmYoXCIudmFsaWRhdGUtbGVzc1RoYW5cIikucmVtb3ZlQ2xhc3MoXCJ2YWxpZGF0ZS1sZXNzVGhhbi1ibHVyXCIpLmZpbmQoXCIudmFsaWRhdGUtbGVzc1RoYW5FcXVhbC1ibHVyXCIpLm9mZihcIi52YWxpZGF0ZS1sZXNzVGhhbkVxdWFsXCIpLnJlbW92ZUNsYXNzKFwidmFsaWRhdGUtbGVzc1RoYW5FcXVhbC1ibHVyXCIpLmZpbmQoXCIudmFsaWRhdGUtZ3JlYXRlclRoYW5FcXVhbC1ibHVyXCIpLm9mZihcIi52YWxpZGF0ZS1ncmVhdGVyVGhhbkVxdWFsXCIpLnJlbW92ZUNsYXNzKFwidmFsaWRhdGUtZ3JlYXRlclRoYW5FcXVhbC1ibHVyXCIpLmZpbmQoXCIudmFsaWRhdGUtZ3JlYXRlclRoYW4tYmx1clwiKS5vZmYoXCIudmFsaWRhdGUtZ3JlYXRlclRoYW5cIikucmVtb3ZlQ2xhc3MoXCJ2YWxpZGF0ZS1ncmVhdGVyVGhhbi1ibHVyXCIpfX0sY2xhc3NSdWxlU2V0dGluZ3M6e3JlcXVpcmVkOntyZXF1aXJlZDohMH0sZW1haWw6e2VtYWlsOiEwfSx1cmw6e3VybDohMH0sZGF0ZTp7ZGF0ZTohMH0sZGF0ZUlTTzp7ZGF0ZUlTTzohMH0sbnVtYmVyOntudW1iZXI6ITB9LGRpZ2l0czp7ZGlnaXRzOiEwfSxjcmVkaXRjYXJkOntjcmVkaXRjYXJkOiEwfX0sYWRkQ2xhc3NSdWxlczpmdW5jdGlvbihiLGMpe2IuY29uc3RydWN0b3I9PT1TdHJpbmc/dGhpcy5jbGFzc1J1bGVTZXR0aW5nc1tiXT1jOmEuZXh0ZW5kKHRoaXMuY2xhc3NSdWxlU2V0dGluZ3MsYil9LGNsYXNzUnVsZXM6ZnVuY3Rpb24oYil7dmFyIGM9e30sZD1hKGIpLmF0dHIoXCJjbGFzc1wiKTtyZXR1cm4gZCYmYS5lYWNoKGQuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKCl7dGhpcyBpbiBhLnZhbGlkYXRvci5jbGFzc1J1bGVTZXR0aW5ncyYmYS5leHRlbmQoYyxhLnZhbGlkYXRvci5jbGFzc1J1bGVTZXR0aW5nc1t0aGlzXSl9KSxjfSxub3JtYWxpemVBdHRyaWJ1dGVSdWxlOmZ1bmN0aW9uKGEsYixjLGQpey9taW58bWF4fHN0ZXAvLnRlc3QoYykmJihudWxsPT09Ynx8L251bWJlcnxyYW5nZXx0ZXh0Ly50ZXN0KGIpKSYmKGQ9TnVtYmVyKGQpLGlzTmFOKGQpJiYoZD12b2lkIDApKSxkfHwwPT09ZD9hW2NdPWQ6Yj09PWMmJlwicmFuZ2VcIiE9PWImJihhW2NdPSEwKX0sYXR0cmlidXRlUnVsZXM6ZnVuY3Rpb24oYil7dmFyIGMsZCxlPXt9LGY9YShiKSxnPWIuZ2V0QXR0cmlidXRlKFwidHlwZVwiKTtmb3IoYyBpbiBhLnZhbGlkYXRvci5tZXRob2RzKVwicmVxdWlyZWRcIj09PWM/KGQ9Yi5nZXRBdHRyaWJ1dGUoYyksXCJcIj09PWQmJihkPSEwKSxkPSEhZCk6ZD1mLmF0dHIoYyksdGhpcy5ub3JtYWxpemVBdHRyaWJ1dGVSdWxlKGUsZyxjLGQpO3JldHVybiBlLm1heGxlbmd0aCYmLy0xfDIxNDc0ODM2NDd8NTI0Mjg4Ly50ZXN0KGUubWF4bGVuZ3RoKSYmZGVsZXRlIGUubWF4bGVuZ3RoLGV9LGRhdGFSdWxlczpmdW5jdGlvbihiKXt2YXIgYyxkLGU9e30sZj1hKGIpLGc9Yi5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpO2ZvcihjIGluIGEudmFsaWRhdG9yLm1ldGhvZHMpZD1mLmRhdGEoXCJydWxlXCIrYy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStjLnN1YnN0cmluZygxKS50b0xvd2VyQ2FzZSgpKSxcIlwiPT09ZCYmKGQ9ITApLHRoaXMubm9ybWFsaXplQXR0cmlidXRlUnVsZShlLGcsYyxkKTtyZXR1cm4gZX0sc3RhdGljUnVsZXM6ZnVuY3Rpb24oYil7dmFyIGM9e30sZD1hLmRhdGEoYi5mb3JtLFwidmFsaWRhdG9yXCIpO3JldHVybiBkLnNldHRpbmdzLnJ1bGVzJiYoYz1hLnZhbGlkYXRvci5ub3JtYWxpemVSdWxlKGQuc2V0dGluZ3MucnVsZXNbYi5uYW1lXSl8fHt9KSxjfSxub3JtYWxpemVSdWxlczpmdW5jdGlvbihiLGMpe3JldHVybiBhLmVhY2goYixmdW5jdGlvbihkLGUpe2lmKGU9PT0hMSlyZXR1cm4gdm9pZCBkZWxldGUgYltkXTtpZihlLnBhcmFtfHxlLmRlcGVuZHMpe3ZhciBmPSEwO3N3aXRjaCh0eXBlb2YgZS5kZXBlbmRzKXtjYXNlXCJzdHJpbmdcIjpmPSEhYShlLmRlcGVuZHMsYy5mb3JtKS5sZW5ndGg7YnJlYWs7Y2FzZVwiZnVuY3Rpb25cIjpmPWUuZGVwZW5kcy5jYWxsKGMsYyl9Zj9iW2RdPXZvaWQgMD09PWUucGFyYW18fGUucGFyYW06KGEuZGF0YShjLmZvcm0sXCJ2YWxpZGF0b3JcIikucmVzZXRFbGVtZW50cyhhKGMpKSxkZWxldGUgYltkXSl9fSksYS5lYWNoKGIsZnVuY3Rpb24oZCxlKXtiW2RdPWEuaXNGdW5jdGlvbihlKSYmXCJub3JtYWxpemVyXCIhPT1kP2UoYyk6ZX0pLGEuZWFjaChbXCJtaW5sZW5ndGhcIixcIm1heGxlbmd0aFwiXSxmdW5jdGlvbigpe2JbdGhpc10mJihiW3RoaXNdPU51bWJlcihiW3RoaXNdKSl9KSxhLmVhY2goW1wicmFuZ2VsZW5ndGhcIixcInJhbmdlXCJdLGZ1bmN0aW9uKCl7dmFyIGM7Ylt0aGlzXSYmKGEuaXNBcnJheShiW3RoaXNdKT9iW3RoaXNdPVtOdW1iZXIoYlt0aGlzXVswXSksTnVtYmVyKGJbdGhpc11bMV0pXTpcInN0cmluZ1wiPT10eXBlb2YgYlt0aGlzXSYmKGM9Ylt0aGlzXS5yZXBsYWNlKC9bXFxbXFxdXS9nLFwiXCIpLnNwbGl0KC9bXFxzLF0rLyksYlt0aGlzXT1bTnVtYmVyKGNbMF0pLE51bWJlcihjWzFdKV0pKX0pLGEudmFsaWRhdG9yLmF1dG9DcmVhdGVSYW5nZXMmJihudWxsIT1iLm1pbiYmbnVsbCE9Yi5tYXgmJihiLnJhbmdlPVtiLm1pbixiLm1heF0sZGVsZXRlIGIubWluLGRlbGV0ZSBiLm1heCksbnVsbCE9Yi5taW5sZW5ndGgmJm51bGwhPWIubWF4bGVuZ3RoJiYoYi5yYW5nZWxlbmd0aD1bYi5taW5sZW5ndGgsYi5tYXhsZW5ndGhdLGRlbGV0ZSBiLm1pbmxlbmd0aCxkZWxldGUgYi5tYXhsZW5ndGgpKSxifSxub3JtYWxpemVSdWxlOmZ1bmN0aW9uKGIpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBiKXt2YXIgYz17fTthLmVhY2goYi5zcGxpdCgvXFxzLyksZnVuY3Rpb24oKXtjW3RoaXNdPSEwfSksYj1jfXJldHVybiBifSxhZGRNZXRob2Q6ZnVuY3Rpb24oYixjLGQpe2EudmFsaWRhdG9yLm1ldGhvZHNbYl09YyxhLnZhbGlkYXRvci5tZXNzYWdlc1tiXT12b2lkIDAhPT1kP2Q6YS52YWxpZGF0b3IubWVzc2FnZXNbYl0sYy5sZW5ndGg8MyYmYS52YWxpZGF0b3IuYWRkQ2xhc3NSdWxlcyhiLGEudmFsaWRhdG9yLm5vcm1hbGl6ZVJ1bGUoYikpfSxtZXRob2RzOntyZXF1aXJlZDpmdW5jdGlvbihiLGMsZCl7aWYoIXRoaXMuZGVwZW5kKGQsYykpcmV0dXJuXCJkZXBlbmRlbmN5LW1pc21hdGNoXCI7aWYoXCJzZWxlY3RcIj09PWMubm9kZU5hbWUudG9Mb3dlckNhc2UoKSl7dmFyIGU9YShjKS52YWwoKTtyZXR1cm4gZSYmZS5sZW5ndGg+MH1yZXR1cm4gdGhpcy5jaGVja2FibGUoYyk/dGhpcy5nZXRMZW5ndGgoYixjKT4wOnZvaWQgMCE9PWImJm51bGwhPT1iJiZiLmxlbmd0aD4wfSxlbWFpbDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm9wdGlvbmFsKGIpfHwvXlthLXpBLVowLTkuISMkJSYnKitcXC89P15fYHt8fX4tXStAW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KD86XFwuW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KSokLy50ZXN0KGEpfSx1cmw6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5vcHRpb25hbChiKXx8L14oPzooPzooPzpodHRwcz98ZnRwKTopP1xcL1xcLykoPzpcXFMrKD86OlxcUyopP0ApPyg/Oig/ISg/OjEwfDEyNykoPzpcXC5cXGR7MSwzfSl7M30pKD8hKD86MTY5XFwuMjU0fDE5MlxcLjE2OCkoPzpcXC5cXGR7MSwzfSl7Mn0pKD8hMTcyXFwuKD86MVs2LTldfDJcXGR8M1swLTFdKSg/OlxcLlxcZHsxLDN9KXsyfSkoPzpbMS05XVxcZD98MVxcZFxcZHwyWzAxXVxcZHwyMlswLTNdKSg/OlxcLig/OjE/XFxkezEsMn18MlswLTRdXFxkfDI1WzAtNV0pKXsyfSg/OlxcLig/OlsxLTldXFxkP3wxXFxkXFxkfDJbMC00XVxcZHwyNVswLTRdKSl8KD86KD86W2EtelxcdTAwYTEtXFx1ZmZmZjAtOV0tKikqW2EtelxcdTAwYTEtXFx1ZmZmZjAtOV0rKSg/OlxcLig/OlthLXpcXHUwMGExLVxcdWZmZmYwLTldLSopKlthLXpcXHUwMGExLVxcdWZmZmYwLTldKykqKD86XFwuKD86W2EtelxcdTAwYTEtXFx1ZmZmZl17Mix9KSkuPykoPzo6XFxkezIsNX0pPyg/OltcXC8/I11cXFMqKT8kL2kudGVzdChhKX0sZGF0ZTpmdW5jdGlvbigpe3ZhciBhPSExO3JldHVybiBmdW5jdGlvbihiLGMpe3JldHVybiBhfHwoYT0hMCx0aGlzLnNldHRpbmdzLmRlYnVnJiZ3aW5kb3cuY29uc29sZSYmY29uc29sZS53YXJuKFwiVGhlIGBkYXRlYCBtZXRob2QgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIHZlcnNpb24gJzIuMC4wJy5cXG5QbGVhc2UgZG9uJ3QgdXNlIGl0LCBzaW5jZSBpdCByZWxpZXMgb24gdGhlIERhdGUgY29uc3RydWN0b3IsIHdoaWNoXFxuYmVoYXZlcyB2ZXJ5IGRpZmZlcmVudGx5IGFjcm9zcyBicm93c2VycyBhbmQgbG9jYWxlcy4gVXNlIGBkYXRlSVNPYFxcbmluc3RlYWQgb3Igb25lIG9mIHRoZSBsb2NhbGUgc3BlY2lmaWMgbWV0aG9kcyBpbiBgbG9jYWxpemF0aW9ucy9gXFxuYW5kIGBhZGRpdGlvbmFsLW1ldGhvZHMuanNgLlwiKSksdGhpcy5vcHRpb25hbChjKXx8IS9JbnZhbGlkfE5hTi8udGVzdChuZXcgRGF0ZShiKS50b1N0cmluZygpKX19KCksZGF0ZUlTTzpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm9wdGlvbmFsKGIpfHwvXlxcZHs0fVtcXC9cXC1dKDA/WzEtOV18MVswMTJdKVtcXC9cXC1dKDA/WzEtOV18WzEyXVswLTldfDNbMDFdKSQvLnRlc3QoYSl9LG51bWJlcjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm9wdGlvbmFsKGIpfHwvXig/Oi0/XFxkK3wtP1xcZHsxLDN9KD86LFxcZHszfSkrKT8oPzpcXC5cXGQrKT8kLy50ZXN0KGEpfSxkaWdpdHM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5vcHRpb25hbChiKXx8L15cXGQrJC8udGVzdChhKX0sbWlubGVuZ3RoOmZ1bmN0aW9uKGIsYyxkKXt2YXIgZT1hLmlzQXJyYXkoYik/Yi5sZW5ndGg6dGhpcy5nZXRMZW5ndGgoYixjKTtyZXR1cm4gdGhpcy5vcHRpb25hbChjKXx8ZT49ZH0sbWF4bGVuZ3RoOmZ1bmN0aW9uKGIsYyxkKXt2YXIgZT1hLmlzQXJyYXkoYik/Yi5sZW5ndGg6dGhpcy5nZXRMZW5ndGgoYixjKTtyZXR1cm4gdGhpcy5vcHRpb25hbChjKXx8ZTw9ZH0scmFuZ2VsZW5ndGg6ZnVuY3Rpb24oYixjLGQpe3ZhciBlPWEuaXNBcnJheShiKT9iLmxlbmd0aDp0aGlzLmdldExlbmd0aChiLGMpO3JldHVybiB0aGlzLm9wdGlvbmFsKGMpfHxlPj1kWzBdJiZlPD1kWzFdfSxtaW46ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB0aGlzLm9wdGlvbmFsKGIpfHxhPj1jfSxtYXg6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB0aGlzLm9wdGlvbmFsKGIpfHxhPD1jfSxyYW5nZTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHRoaXMub3B0aW9uYWwoYil8fGE+PWNbMF0mJmE8PWNbMV19LHN0ZXA6ZnVuY3Rpb24oYixjLGQpe3ZhciBlLGY9YShjKS5hdHRyKFwidHlwZVwiKSxnPVwiU3RlcCBhdHRyaWJ1dGUgb24gaW5wdXQgdHlwZSBcIitmK1wiIGlzIG5vdCBzdXBwb3J0ZWQuXCIsaD1bXCJ0ZXh0XCIsXCJudW1iZXJcIixcInJhbmdlXCJdLGk9bmV3IFJlZ0V4cChcIlxcXFxiXCIrZitcIlxcXFxiXCIpLGo9ZiYmIWkudGVzdChoLmpvaW4oKSksaz1mdW5jdGlvbihhKXt2YXIgYj0oXCJcIithKS5tYXRjaCgvKD86XFwuKFxcZCspKT8kLyk7cmV0dXJuIGImJmJbMV0/YlsxXS5sZW5ndGg6MH0sbD1mdW5jdGlvbihhKXtyZXR1cm4gTWF0aC5yb3VuZChhKk1hdGgucG93KDEwLGUpKX0sbT0hMDtpZihqKXRocm93IG5ldyBFcnJvcihnKTtyZXR1cm4gZT1rKGQpLChrKGIpPmV8fGwoYiklbChkKSE9PTApJiYobT0hMSksdGhpcy5vcHRpb25hbChjKXx8bX0sZXF1YWxUbzpmdW5jdGlvbihiLGMsZCl7dmFyIGU9YShkKTtyZXR1cm4gdGhpcy5zZXR0aW5ncy5vbmZvY3Vzb3V0JiZlLm5vdChcIi52YWxpZGF0ZS1lcXVhbFRvLWJsdXJcIikubGVuZ3RoJiZlLmFkZENsYXNzKFwidmFsaWRhdGUtZXF1YWxUby1ibHVyXCIpLm9uKFwiYmx1ci52YWxpZGF0ZS1lcXVhbFRvXCIsZnVuY3Rpb24oKXthKGMpLnZhbGlkKCl9KSxiPT09ZS52YWwoKX0scmVtb3RlOmZ1bmN0aW9uKGIsYyxkLGUpe2lmKHRoaXMub3B0aW9uYWwoYykpcmV0dXJuXCJkZXBlbmRlbmN5LW1pc21hdGNoXCI7ZT1cInN0cmluZ1wiPT10eXBlb2YgZSYmZXx8XCJyZW1vdGVcIjt2YXIgZixnLGgsaT10aGlzLnByZXZpb3VzVmFsdWUoYyxlKTtyZXR1cm4gdGhpcy5zZXR0aW5ncy5tZXNzYWdlc1tjLm5hbWVdfHwodGhpcy5zZXR0aW5ncy5tZXNzYWdlc1tjLm5hbWVdPXt9KSxpLm9yaWdpbmFsTWVzc2FnZT1pLm9yaWdpbmFsTWVzc2FnZXx8dGhpcy5zZXR0aW5ncy5tZXNzYWdlc1tjLm5hbWVdW2VdLHRoaXMuc2V0dGluZ3MubWVzc2FnZXNbYy5uYW1lXVtlXT1pLm1lc3NhZ2UsZD1cInN0cmluZ1wiPT10eXBlb2YgZCYme3VybDpkfXx8ZCxoPWEucGFyYW0oYS5leHRlbmQoe2RhdGE6Yn0sZC5kYXRhKSksaS5vbGQ9PT1oP2kudmFsaWQ6KGkub2xkPWgsZj10aGlzLHRoaXMuc3RhcnRSZXF1ZXN0KGMpLGc9e30sZ1tjLm5hbWVdPWIsYS5hamF4KGEuZXh0ZW5kKCEwLHttb2RlOlwiYWJvcnRcIixwb3J0OlwidmFsaWRhdGVcIitjLm5hbWUsZGF0YVR5cGU6XCJqc29uXCIsZGF0YTpnLGNvbnRleHQ6Zi5jdXJyZW50Rm9ybSxzdWNjZXNzOmZ1bmN0aW9uKGEpe3ZhciBkLGcsaCxqPWE9PT0hMHx8XCJ0cnVlXCI9PT1hO2Yuc2V0dGluZ3MubWVzc2FnZXNbYy5uYW1lXVtlXT1pLm9yaWdpbmFsTWVzc2FnZSxqPyhoPWYuZm9ybVN1Ym1pdHRlZCxmLnJlc2V0SW50ZXJuYWxzKCksZi50b0hpZGU9Zi5lcnJvcnNGb3IoYyksZi5mb3JtU3VibWl0dGVkPWgsZi5zdWNjZXNzTGlzdC5wdXNoKGMpLGYuaW52YWxpZFtjLm5hbWVdPSExLGYuc2hvd0Vycm9ycygpKTooZD17fSxnPWF8fGYuZGVmYXVsdE1lc3NhZ2UoYyx7bWV0aG9kOmUscGFyYW1ldGVyczpifSksZFtjLm5hbWVdPWkubWVzc2FnZT1nLGYuaW52YWxpZFtjLm5hbWVdPSEwLGYuc2hvd0Vycm9ycyhkKSksaS52YWxpZD1qLGYuc3RvcFJlcXVlc3QoYyxqKX19LGQpKSxcInBlbmRpbmdcIil9fX0pO3ZhciBiLGM9e307cmV0dXJuIGEuYWpheFByZWZpbHRlcj9hLmFqYXhQcmVmaWx0ZXIoZnVuY3Rpb24oYSxiLGQpe3ZhciBlPWEucG9ydDtcImFib3J0XCI9PT1hLm1vZGUmJihjW2VdJiZjW2VdLmFib3J0KCksY1tlXT1kKX0pOihiPWEuYWpheCxhLmFqYXg9ZnVuY3Rpb24oZCl7dmFyIGU9KFwibW9kZVwiaW4gZD9kOmEuYWpheFNldHRpbmdzKS5tb2RlLGY9KFwicG9ydFwiaW4gZD9kOmEuYWpheFNldHRpbmdzKS5wb3J0O3JldHVyblwiYWJvcnRcIj09PWU/KGNbZl0mJmNbZl0uYWJvcnQoKSxjW2ZdPWIuYXBwbHkodGhpcyxhcmd1bWVudHMpLGNbZl0pOmIuYXBwbHkodGhpcyxhcmd1bWVudHMpfSksYX0pOyIsIi8qISBLaW5ldGljSlMgdjUuMS4wIDIwMTQtMDMtMjcgaHR0cDovL3d3dy5raW5ldGljanMuY29tIGJ5IEVyaWMgUm93ZWxsIEBlcmljZHJvd2VsbCAtIE1JVCBMaWNlbnNlIGh0dHBzOi8vZ2l0aHViLmNvbS9lcmljZHJvd2VsbC9LaW5ldGljSlMvd2lraS9MaWNlbnNlKi9cclxudmFyIEtpbmV0aWM9e307IWZ1bmN0aW9uKGEpe3ZhciBiPU1hdGguUEkvMTgwO0tpbmV0aWM9e3ZlcnNpb246XCI1LjEuMFwiLHN0YWdlczpbXSxpZENvdW50ZXI6MCxpZHM6e30sbmFtZXM6e30sc2hhcGVzOnt9LGxpc3RlbkNsaWNrVGFwOiExLGluRGJsQ2xpY2tXaW5kb3c6ITEsZW5hYmxlVHJhY2U6ITEsdHJhY2VBcnJNYXg6MTAwLGRibENsaWNrV2luZG93OjQwMCxwaXhlbFJhdGlvOnZvaWQgMCxkcmFnRGlzdGFuY2U6MCxhbmdsZURlZzohMCxVQTpmdW5jdGlvbigpe3ZhciBiPWEubmF2aWdhdG9yJiZhLm5hdmlnYXRvci51c2VyQWdlbnR8fFwiXCIsYz1iLnRvTG93ZXJDYXNlKCksZD0vKGNocm9tZSlbIFxcL10oW1xcdy5dKykvLmV4ZWMoYyl8fC8od2Via2l0KVsgXFwvXShbXFx3Ll0rKS8uZXhlYyhjKXx8LyhvcGVyYSkoPzouKnZlcnNpb258KVsgXFwvXShbXFx3Ll0rKS8uZXhlYyhjKXx8Lyhtc2llKSAoW1xcdy5dKykvLmV4ZWMoYyl8fGMuaW5kZXhPZihcImNvbXBhdGlibGVcIik8MCYmLyhtb3ppbGxhKSg/Oi4qPyBydjooW1xcdy5dKyl8KS8uZXhlYyhjKXx8W10sZT0hIWIubWF0Y2goL0FuZHJvaWR8QmxhY2tCZXJyeXxpUGhvbmV8aVBhZHxpUG9kfE9wZXJhIE1pbml8SUVNb2JpbGUvaSk7cmV0dXJue2Jyb3dzZXI6ZFsxXXx8XCJcIix2ZXJzaW9uOmRbMl18fFwiMFwiLG1vYmlsZTplfX0oKSxGaWx0ZXJzOnt9LE5vZGU6ZnVuY3Rpb24oYSl7dGhpcy5faW5pdChhKX0sU2hhcGU6ZnVuY3Rpb24oYSl7dGhpcy5fX2luaXQoYSl9LENvbnRhaW5lcjpmdW5jdGlvbihhKXt0aGlzLl9faW5pdChhKX0sU3RhZ2U6ZnVuY3Rpb24oYSl7dGhpcy5fX19pbml0KGEpfSxCYXNlTGF5ZXI6ZnVuY3Rpb24oYSl7dGhpcy5fX19pbml0KGEpfSxMYXllcjpmdW5jdGlvbihhKXt0aGlzLl9fX19pbml0KGEpfSxGYXN0TGF5ZXI6ZnVuY3Rpb24oYSl7dGhpcy5fX19faW5pdChhKX0sR3JvdXA6ZnVuY3Rpb24oYSl7dGhpcy5fX19pbml0KGEpfSxpc0RyYWdnaW5nOmZ1bmN0aW9uKCl7dmFyIGE9S2luZXRpYy5ERDtyZXR1cm4gYT9hLmlzRHJhZ2dpbmc6ITF9LGlzRHJhZ1JlYWR5OmZ1bmN0aW9uKCl7dmFyIGE9S2luZXRpYy5ERDtyZXR1cm4gYT8hIWEubm9kZTohMX0sX2FkZElkOmZ1bmN0aW9uKGEsYil7dm9pZCAwIT09YiYmKHRoaXMuaWRzW2JdPWEpfSxfcmVtb3ZlSWQ6ZnVuY3Rpb24oYSl7dm9pZCAwIT09YSYmZGVsZXRlIHRoaXMuaWRzW2FdfSxfYWRkTmFtZTpmdW5jdGlvbihhLGIpe3ZvaWQgMCE9PWImJih2b2lkIDA9PT10aGlzLm5hbWVzW2JdJiYodGhpcy5uYW1lc1tiXT1bXSksdGhpcy5uYW1lc1tiXS5wdXNoKGEpKX0sX3JlbW92ZU5hbWU6ZnVuY3Rpb24oYSxiKXtpZih2b2lkIDAhPT1hKXt2YXIgYz10aGlzLm5hbWVzW2FdO2lmKHZvaWQgMCE9PWMpe2Zvcih2YXIgZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgZT1jW2RdO2UuX2lkPT09YiYmYy5zcGxpY2UoZCwxKX0wPT09Yy5sZW5ndGgmJmRlbGV0ZSB0aGlzLm5hbWVzW2FdfX19LGdldEFuZ2xlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmFuZ2xlRGVnP2EqYjphfX19KHRoaXMpLGZ1bmN0aW9uKGEsYil7aWYoXCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMpe3ZhciBjPXJlcXVpcmUoXCJjYW52YXNcIiksZD1yZXF1aXJlKFwianNkb21cIikuanNkb20sZT1kKFwiPCFET0NUWVBFIGh0bWw+PGh0bWw+PGhlYWQ+PC9oZWFkPjxib2R5PjwvYm9keT48L2h0bWw+XCIpLGY9YigpO3JldHVybiBLaW5ldGljLmRvY3VtZW50PWUsS2luZXRpYy53aW5kb3c9S2luZXRpYy5kb2N1bWVudC5jcmVhdGVXaW5kb3coKSxLaW5ldGljLndpbmRvdy5JbWFnZT1jLkltYWdlLEtpbmV0aWMucm9vdD1hLEtpbmV0aWMuX25vZGVDYW52YXM9Yyx2b2lkKG1vZHVsZS5leHBvcnRzPWYpfVwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZCYmZGVmaW5lKGIpLEtpbmV0aWMuZG9jdW1lbnQ9ZG9jdW1lbnQsS2luZXRpYy53aW5kb3c9d2luZG93LEtpbmV0aWMucm9vdD1hfSgoMSxldmFsKShcInRoaXNcIiksZnVuY3Rpb24oKXtyZXR1cm4gS2luZXRpY30pLGZ1bmN0aW9uKCl7S2luZXRpYy5Db2xsZWN0aW9uPWZ1bmN0aW9uKCl7dmFyIGE9W10uc2xpY2UuY2FsbChhcmd1bWVudHMpLGI9YS5sZW5ndGgsYz0wO2Zvcih0aGlzLmxlbmd0aD1iO2I+YztjKyspdGhpc1tjXT1hW2NdO3JldHVybiB0aGlzfSxLaW5ldGljLkNvbGxlY3Rpb24ucHJvdG90eXBlPVtdLEtpbmV0aWMuQ29sbGVjdGlvbi5wcm90b3R5cGUuZWFjaD1mdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPHRoaXMubGVuZ3RoO2IrKylhKHRoaXNbYl0sYil9LEtpbmV0aWMuQ29sbGVjdGlvbi5wcm90b3R5cGUudG9BcnJheT1mdW5jdGlvbigpe3ZhciBhLGI9W10sYz10aGlzLmxlbmd0aDtmb3IoYT0wO2M+YTthKyspYi5wdXNoKHRoaXNbYV0pO3JldHVybiBifSxLaW5ldGljLkNvbGxlY3Rpb24udG9Db2xsZWN0aW9uPWZ1bmN0aW9uKGEpe3ZhciBiLGM9bmV3IEtpbmV0aWMuQ29sbGVjdGlvbixkPWEubGVuZ3RoO2ZvcihiPTA7ZD5iO2IrKyljLnB1c2goYVtiXSk7cmV0dXJuIGN9LEtpbmV0aWMuQ29sbGVjdGlvbi5fbWFwTWV0aG9kPWZ1bmN0aW9uKGEpe0tpbmV0aWMuQ29sbGVjdGlvbi5wcm90b3R5cGVbYV09ZnVuY3Rpb24oKXt2YXIgYixjPXRoaXMubGVuZ3RoLGQ9W10uc2xpY2UuY2FsbChhcmd1bWVudHMpO2ZvcihiPTA7Yz5iO2IrKyl0aGlzW2JdW2FdLmFwcGx5KHRoaXNbYl0sZCk7cmV0dXJuIHRoaXN9fSxLaW5ldGljLkNvbGxlY3Rpb24ubWFwTWV0aG9kcz1mdW5jdGlvbihhKXt2YXIgYj1hLnByb3RvdHlwZTtmb3IodmFyIGMgaW4gYilLaW5ldGljLkNvbGxlY3Rpb24uX21hcE1ldGhvZChjKX0sS2luZXRpYy5UcmFuc2Zvcm09ZnVuY3Rpb24oYSl7dGhpcy5tPWEmJmEuc2xpY2UoKXx8WzEsMCwwLDEsMCwwXX0sS2luZXRpYy5UcmFuc2Zvcm0ucHJvdG90eXBlPXtjb3B5OmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBLaW5ldGljLlRyYW5zZm9ybSh0aGlzLm0pfSxwb2ludDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm07cmV0dXJue3g6YlswXSphLngrYlsyXSphLnkrYls0XSx5OmJbMV0qYS54K2JbM10qYS55K2JbNV19fSx0cmFuc2xhdGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5tWzRdKz10aGlzLm1bMF0qYSt0aGlzLm1bMl0qYix0aGlzLm1bNV0rPXRoaXMubVsxXSphK3RoaXMubVszXSpiLHRoaXN9LHNjYWxlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMubVswXSo9YSx0aGlzLm1bMV0qPWEsdGhpcy5tWzJdKj1iLHRoaXMubVszXSo9Yix0aGlzfSxyb3RhdGU6ZnVuY3Rpb24oYSl7dmFyIGI9TWF0aC5jb3MoYSksYz1NYXRoLnNpbihhKSxkPXRoaXMubVswXSpiK3RoaXMubVsyXSpjLGU9dGhpcy5tWzFdKmIrdGhpcy5tWzNdKmMsZj10aGlzLm1bMF0qLWMrdGhpcy5tWzJdKmIsZz10aGlzLm1bMV0qLWMrdGhpcy5tWzNdKmI7cmV0dXJuIHRoaXMubVswXT1kLHRoaXMubVsxXT1lLHRoaXMubVsyXT1mLHRoaXMubVszXT1nLHRoaXN9LGdldFRyYW5zbGF0aW9uOmZ1bmN0aW9uKCl7cmV0dXJue3g6dGhpcy5tWzRdLHk6dGhpcy5tWzVdfX0sc2tldzpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMubVswXSt0aGlzLm1bMl0qYixkPXRoaXMubVsxXSt0aGlzLm1bM10qYixlPXRoaXMubVsyXSt0aGlzLm1bMF0qYSxmPXRoaXMubVszXSt0aGlzLm1bMV0qYTtyZXR1cm4gdGhpcy5tWzBdPWMsdGhpcy5tWzFdPWQsdGhpcy5tWzJdPWUsdGhpcy5tWzNdPWYsdGhpc30sbXVsdGlwbHk6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5tWzBdKmEubVswXSt0aGlzLm1bMl0qYS5tWzFdLGM9dGhpcy5tWzFdKmEubVswXSt0aGlzLm1bM10qYS5tWzFdLGQ9dGhpcy5tWzBdKmEubVsyXSt0aGlzLm1bMl0qYS5tWzNdLGU9dGhpcy5tWzFdKmEubVsyXSt0aGlzLm1bM10qYS5tWzNdLGY9dGhpcy5tWzBdKmEubVs0XSt0aGlzLm1bMl0qYS5tWzVdK3RoaXMubVs0XSxnPXRoaXMubVsxXSphLm1bNF0rdGhpcy5tWzNdKmEubVs1XSt0aGlzLm1bNV07cmV0dXJuIHRoaXMubVswXT1iLHRoaXMubVsxXT1jLHRoaXMubVsyXT1kLHRoaXMubVszXT1lLHRoaXMubVs0XT1mLHRoaXMubVs1XT1nLHRoaXN9LGludmVydDpmdW5jdGlvbigpe3ZhciBhPTEvKHRoaXMubVswXSp0aGlzLm1bM10tdGhpcy5tWzFdKnRoaXMubVsyXSksYj10aGlzLm1bM10qYSxjPS10aGlzLm1bMV0qYSxkPS10aGlzLm1bMl0qYSxlPXRoaXMubVswXSphLGY9YSoodGhpcy5tWzJdKnRoaXMubVs1XS10aGlzLm1bM10qdGhpcy5tWzRdKSxnPWEqKHRoaXMubVsxXSp0aGlzLm1bNF0tdGhpcy5tWzBdKnRoaXMubVs1XSk7cmV0dXJuIHRoaXMubVswXT1iLHRoaXMubVsxXT1jLHRoaXMubVsyXT1kLHRoaXMubVszXT1lLHRoaXMubVs0XT1mLHRoaXMubVs1XT1nLHRoaXN9LGdldE1hdHJpeDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm19LHNldEFic29sdXRlUG9zaXRpb246ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLm1bMF0sZD10aGlzLm1bMV0sZT10aGlzLm1bMl0sZj10aGlzLm1bM10sZz10aGlzLm1bNF0saD10aGlzLm1bNV0saT0oYyooYi1oKS1kKihhLWcpKS8oYypmLWQqZSksaj0oYS1nLWUqaSkvYztyZXR1cm4gdGhpcy50cmFuc2xhdGUoaixpKX19O3ZhciBhPVwiMmRcIixiPVwiW29iamVjdCBBcnJheV1cIixjPVwiW29iamVjdCBOdW1iZXJdXCIsZD1cIltvYmplY3QgU3RyaW5nXVwiLGU9TWF0aC5QSS8xODAsZj0xODAvTWF0aC5QSSxnPVwiI1wiLGg9XCJcIixpPVwiMFwiLGo9XCJLaW5ldGljIHdhcm5pbmc6IFwiLGs9XCJLaW5ldGljIGVycm9yOiBcIixsPVwicmdiKFwiLG09e2FxdWE6WzAsMjU1LDI1NV0sbGltZTpbMCwyNTUsMF0sc2lsdmVyOlsxOTIsMTkyLDE5Ml0sYmxhY2s6WzAsMCwwXSxtYXJvb246WzEyOCwwLDBdLHRlYWw6WzAsMTI4LDEyOF0sYmx1ZTpbMCwwLDI1NV0sbmF2eTpbMCwwLDEyOF0sd2hpdGU6WzI1NSwyNTUsMjU1XSxmdWNoc2lhOlsyNTUsMCwyNTVdLG9saXZlOlsxMjgsMTI4LDBdLHllbGxvdzpbMjU1LDI1NSwwXSxvcmFuZ2U6WzI1NSwxNjUsMF0sZ3JheTpbMTI4LDEyOCwxMjhdLHB1cnBsZTpbMTI4LDAsMTI4XSxncmVlbjpbMCwxMjgsMF0scmVkOlsyNTUsMCwwXSxwaW5rOlsyNTUsMTkyLDIwM10sY3lhbjpbMCwyNTUsMjU1XSx0cmFuc3BhcmVudDpbMjU1LDI1NSwyNTUsMF19LG49L3JnYlxcKChcXGR7MSwzfSksKFxcZHsxLDN9KSwoXFxkezEsM30pXFwpLztLaW5ldGljLlV0aWw9e19pc0VsZW1lbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuISghYXx8MSE9YS5ub2RlVHlwZSl9LF9pc0Z1bmN0aW9uOmZ1bmN0aW9uKGEpe3JldHVybiEhKGEmJmEuY29uc3RydWN0b3ImJmEuY2FsbCYmYS5hcHBseSl9LF9pc09iamVjdDpmdW5jdGlvbihhKXtyZXR1cm4hIWEmJmEuY29uc3RydWN0b3I9PU9iamVjdH0sX2lzQXJyYXk6ZnVuY3Rpb24oYSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKT09Yn0sX2lzTnVtYmVyOmZ1bmN0aW9uKGEpe3JldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSk9PWN9LF9pc1N0cmluZzpmdW5jdGlvbihhKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpPT1kfSxfdGhyb3R0bGU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnPW51bGwsaD0wO2N8fChjPXt9KTt2YXIgaT1mdW5jdGlvbigpe2g9Yy5sZWFkaW5nPT09ITE/MDoobmV3IERhdGUpLmdldFRpbWUoKSxnPW51bGwsZj1hLmFwcGx5KGQsZSksZD1lPW51bGx9O3JldHVybiBmdW5jdGlvbigpe3ZhciBqPShuZXcgRGF0ZSkuZ2V0VGltZSgpO2h8fGMubGVhZGluZyE9PSExfHwoaD1qKTt2YXIgaz1iLShqLWgpO3JldHVybiBkPXRoaXMsZT1hcmd1bWVudHMsMD49az8oY2xlYXJUaW1lb3V0KGcpLGc9bnVsbCxoPWosZj1hLmFwcGx5KGQsZSksZD1lPW51bGwpOmd8fGMudHJhaWxpbmc9PT0hMXx8KGc9c2V0VGltZW91dChpLGspKSxmfX0sX2hhc01ldGhvZHM6ZnVuY3Rpb24oYSl7dmFyIGIsYz1bXTtmb3IoYiBpbiBhKXRoaXMuX2lzRnVuY3Rpb24oYVtiXSkmJmMucHVzaChiKTtyZXR1cm4gYy5sZW5ndGg+MH0sY3JlYXRlQ2FudmFzRWxlbWVudDpmdW5jdGlvbigpe3ZhciBhPUtpbmV0aWMuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtyZXR1cm4gYS5zdHlsZT1hLnN0eWxlfHx7fSxhfSxpc0Jyb3dzZXI6ZnVuY3Rpb24oKXtyZXR1cm5cIm9iamVjdFwiIT10eXBlb2YgZXhwb3J0c30sX2lzSW5Eb2N1bWVudDpmdW5jdGlvbihhKXtmb3IoO2E9YS5wYXJlbnROb2RlOylpZihhPT1LaW5ldGljLmRvY3VtZW50KXJldHVybiEwO3JldHVybiExfSxfc2ltcGxpZnlBcnJheTpmdW5jdGlvbihhKXt2YXIgYixjLGQ9W10sZT1hLmxlbmd0aCxmPUtpbmV0aWMuVXRpbDtmb3IoYj0wO2U+YjtiKyspYz1hW2JdLGYuX2lzTnVtYmVyKGMpP2M9TWF0aC5yb3VuZCgxZTMqYykvMWUzOmYuX2lzU3RyaW5nKGMpfHwoYz1jLnRvU3RyaW5nKCkpLGQucHVzaChjKTtyZXR1cm4gZH0sX2dldEltYWdlOmZ1bmN0aW9uKGIsYyl7dmFyIGQsZTtpZihiKWlmKHRoaXMuX2lzRWxlbWVudChiKSljKGIpO2Vsc2UgaWYodGhpcy5faXNTdHJpbmcoYikpZD1uZXcgS2luZXRpYy53aW5kb3cuSW1hZ2UsZC5vbmxvYWQ9ZnVuY3Rpb24oKXtjKGQpfSxkLnNyYz1iO2Vsc2UgaWYoYi5kYXRhKXtlPUtpbmV0aWMuVXRpbC5jcmVhdGVDYW52YXNFbGVtZW50KCksZS53aWR0aD1iLndpZHRoLGUuaGVpZ2h0PWIuaGVpZ2h0O3ZhciBmPWUuZ2V0Q29udGV4dChhKTtmLnB1dEltYWdlRGF0YShiLDAsMCksdGhpcy5fZ2V0SW1hZ2UoZS50b0RhdGFVUkwoKSxjKX1lbHNlIGMobnVsbCk7ZWxzZSBjKG51bGwpfSxfZ2V0UkdCQVN0cmluZzpmdW5jdGlvbihhKXt2YXIgYj1hLnJlZHx8MCxjPWEuZ3JlZW58fDAsZD1hLmJsdWV8fDAsZT1hLmFscGhhfHwxO3JldHVybltcInJnYmEoXCIsYixcIixcIixjLFwiLFwiLGQsXCIsXCIsZSxcIilcIl0uam9pbihoKX0sX3JnYlRvSGV4OmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4oKDE8PDI0KSsoYTw8MTYpKyhiPDw4KStjKS50b1N0cmluZygxNikuc2xpY2UoMSl9LF9oZXhUb1JnYjpmdW5jdGlvbihhKXthPWEucmVwbGFjZShnLGgpO3ZhciBiPXBhcnNlSW50KGEsMTYpO3JldHVybntyOmI+PjE2JjI1NSxnOmI+PjgmMjU1LGI6MjU1JmJ9fSxnZXRSYW5kb21Db2xvcjpmdW5jdGlvbigpe2Zvcih2YXIgYT0oMTY3NzcyMTUqTWF0aC5yYW5kb20oKTw8MCkudG9TdHJpbmcoMTYpO2EubGVuZ3RoPDY7KWE9aSthO3JldHVybiBnK2F9LGdldDpmdW5jdGlvbihhLGIpe3JldHVybiB2b2lkIDA9PT1hP2I6YX0sZ2V0UkdCOmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiBhIGluIG0/KGI9bVthXSx7cjpiWzBdLGc6YlsxXSxiOmJbMl19KTphWzBdPT09Zz90aGlzLl9oZXhUb1JnYihhLnN1YnN0cmluZygxKSk6YS5zdWJzdHIoMCw0KT09PWw/KGI9bi5leGVjKGEucmVwbGFjZSgvIC9nLFwiXCIpKSx7cjpwYXJzZUludChiWzFdLDEwKSxnOnBhcnNlSW50KGJbMl0sMTApLGI6cGFyc2VJbnQoYlszXSwxMCl9KTp7cjowLGc6MCxiOjB9fSxfbWVyZ2U6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLl9jbG9uZShiKTtmb3IodmFyIGQgaW4gYSljW2RdPXRoaXMuX2lzT2JqZWN0KGFbZF0pP3RoaXMuX21lcmdlKGFbZF0sY1tkXSk6YVtkXTtyZXR1cm4gY30sY2xvbmVPYmplY3Q6ZnVuY3Rpb24oYSl7dmFyIGI9e307Zm9yKHZhciBjIGluIGEpYltjXT10aGlzLl9pc09iamVjdChhW2NdKT90aGlzLmNsb25lT2JqZWN0KGFbY10pOnRoaXMuX2lzQXJyYXkoYVtjXSk/dGhpcy5jbG9uZUFycmF5KGFbY10pOmFbY107cmV0dXJuIGJ9LGNsb25lQXJyYXk6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuc2xpY2UoMCl9LF9kZWdUb1JhZDpmdW5jdGlvbihhKXtyZXR1cm4gYSplfSxfcmFkVG9EZWc6ZnVuY3Rpb24oYSl7cmV0dXJuIGEqZn0sX2NhcGl0YWxpemU6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrYS5zbGljZSgxKX0sZXJyb3I6ZnVuY3Rpb24oYSl7dGhyb3cgbmV3IEVycm9yKGsrYSl9LHdhcm46ZnVuY3Rpb24oYSl7S2luZXRpYy5yb290LmNvbnNvbGUmJmNvbnNvbGUud2FybiYmY29uc29sZS53YXJuKGorYSl9LGV4dGVuZDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyBpbiBiLnByb3RvdHlwZSljIGluIGEucHJvdG90eXBlfHwoYS5wcm90b3R5cGVbY109Yi5wcm90b3R5cGVbY10pfSxhZGRNZXRob2RzOmZ1bmN0aW9uKGEsYil7dmFyIGM7Zm9yKGMgaW4gYilhLnByb3RvdHlwZVtjXT1iW2NdfSxfZ2V0Q29udHJvbFBvaW50czpmdW5jdGlvbihhLGIsYyxkLGUsZixnKXt2YXIgaD1NYXRoLnNxcnQoTWF0aC5wb3coYy1hLDIpK01hdGgucG93KGQtYiwyKSksaT1NYXRoLnNxcnQoTWF0aC5wb3coZS1jLDIpK01hdGgucG93KGYtZCwyKSksaj1nKmgvKGgraSksaz1nKmkvKGgraSksbD1jLWoqKGUtYSksbT1kLWoqKGYtYiksbj1jK2sqKGUtYSksbz1kK2sqKGYtYik7cmV0dXJuW2wsbSxuLG9dfSxfZXhwYW5kUG9pbnRzOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlPWEubGVuZ3RoLGY9W107Zm9yKGM9MjtlLTI+YztjKz0yKWQ9S2luZXRpYy5VdGlsLl9nZXRDb250cm9sUG9pbnRzKGFbYy0yXSxhW2MtMV0sYVtjXSxhW2MrMV0sYVtjKzJdLGFbYyszXSxiKSxmLnB1c2goZFswXSksZi5wdXNoKGRbMV0pLGYucHVzaChhW2NdKSxmLnB1c2goYVtjKzFdKSxmLnB1c2goZFsyXSksZi5wdXNoKGRbM10pO3JldHVybiBmfSxfcmVtb3ZlTGFzdExldHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gYS5zdWJzdHJpbmcoMCxhLmxlbmd0aC0xKX19fSgpLGZ1bmN0aW9uKCl7dmFyIGE9S2luZXRpYy5VdGlsLmNyZWF0ZUNhbnZhc0VsZW1lbnQoKSxiPWEuZ2V0Q29udGV4dChcIjJkXCIpLGM9S2luZXRpYy5VQS5tb2JpbGU/ZnVuY3Rpb24oKXt2YXIgYT13aW5kb3cuZGV2aWNlUGl4ZWxSYXRpb3x8MSxjPWIud2Via2l0QmFja2luZ1N0b3JlUGl4ZWxSYXRpb3x8Yi5tb3pCYWNraW5nU3RvcmVQaXhlbFJhdGlvfHxiLm1zQmFja2luZ1N0b3JlUGl4ZWxSYXRpb3x8Yi5vQmFja2luZ1N0b3JlUGl4ZWxSYXRpb3x8Yi5iYWNraW5nU3RvcmVQaXhlbFJhdGlvfHwxO3JldHVybiBhL2N9KCk6MTtLaW5ldGljLkNhbnZhcz1mdW5jdGlvbihhKXt0aGlzLmluaXQoYSl9LEtpbmV0aWMuQ2FudmFzLnByb3RvdHlwZT17aW5pdDpmdW5jdGlvbihhKXthPWF8fHt9O3ZhciBiPWEucGl4ZWxSYXRpb3x8S2luZXRpYy5waXhlbFJhdGlvfHxjO3RoaXMucGl4ZWxSYXRpbz1iLHRoaXMuX2NhbnZhcz1LaW5ldGljLlV0aWwuY3JlYXRlQ2FudmFzRWxlbWVudCgpLHRoaXMuX2NhbnZhcy5zdHlsZS5wYWRkaW5nPTAsdGhpcy5fY2FudmFzLnN0eWxlLm1hcmdpbj0wLHRoaXMuX2NhbnZhcy5zdHlsZS5ib3JkZXI9MCx0aGlzLl9jYW52YXMuc3R5bGUuYmFja2dyb3VuZD1cInRyYW5zcGFyZW50XCIsdGhpcy5fY2FudmFzLnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIix0aGlzLl9jYW52YXMuc3R5bGUudG9wPTAsdGhpcy5fY2FudmFzLnN0eWxlLmxlZnQ9MH0sZ2V0Q29udGV4dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRleHR9LGdldFBpeGVsUmF0aW86ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5waXhlbFJhdGlvfSxzZXRQaXhlbFJhdGlvOmZ1bmN0aW9uKGEpe3RoaXMucGl4ZWxSYXRpbz1hLHRoaXMuc2V0U2l6ZSh0aGlzLmdldFdpZHRoKCksdGhpcy5nZXRIZWlnaHQoKSl9LHNldFdpZHRoOmZ1bmN0aW9uKGEpe3RoaXMud2lkdGg9dGhpcy5fY2FudmFzLndpZHRoPWEqdGhpcy5waXhlbFJhdGlvLHRoaXMuX2NhbnZhcy5zdHlsZS53aWR0aD1hK1wicHhcIn0sc2V0SGVpZ2h0OmZ1bmN0aW9uKGEpe3RoaXMuaGVpZ2h0PXRoaXMuX2NhbnZhcy5oZWlnaHQ9YSp0aGlzLnBpeGVsUmF0aW8sdGhpcy5fY2FudmFzLnN0eWxlLmhlaWdodD1hK1wicHhcIn0sZ2V0V2lkdGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53aWR0aH0sZ2V0SGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGVpZ2h0fSxzZXRTaXplOmZ1bmN0aW9uKGEsYil7dGhpcy5zZXRXaWR0aChhKSx0aGlzLnNldEhlaWdodChiKX0sdG9EYXRhVVJMOmZ1bmN0aW9uKGEsYil7dHJ5e3JldHVybiB0aGlzLl9jYW52YXMudG9EYXRhVVJMKGEsYil9Y2F0Y2goYyl7dHJ5e3JldHVybiB0aGlzLl9jYW52YXMudG9EYXRhVVJMKCl9Y2F0Y2goZCl7cmV0dXJuIEtpbmV0aWMuVXRpbC53YXJuKFwiVW5hYmxlIHRvIGdldCBkYXRhIFVSTC4gXCIrZC5tZXNzYWdlKSxcIlwifX19fSxLaW5ldGljLlNjZW5lQ2FudmFzPWZ1bmN0aW9uKGEpe2E9YXx8e307dmFyIGI9YS53aWR0aHx8MCxjPWEuaGVpZ2h0fHwwO0tpbmV0aWMuQ2FudmFzLmNhbGwodGhpcyxhKSx0aGlzLmNvbnRleHQ9bmV3IEtpbmV0aWMuU2NlbmVDb250ZXh0KHRoaXMpLHRoaXMuc2V0U2l6ZShiLGMpfSxLaW5ldGljLlNjZW5lQ2FudmFzLnByb3RvdHlwZT17c2V0V2lkdGg6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5waXhlbFJhdGlvLGM9dGhpcy5nZXRDb250ZXh0KCkuX2NvbnRleHQ7S2luZXRpYy5DYW52YXMucHJvdG90eXBlLnNldFdpZHRoLmNhbGwodGhpcyxhKSxjLnNjYWxlKGIsYil9LHNldEhlaWdodDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnBpeGVsUmF0aW8sYz10aGlzLmdldENvbnRleHQoKS5fY29udGV4dDtLaW5ldGljLkNhbnZhcy5wcm90b3R5cGUuc2V0SGVpZ2h0LmNhbGwodGhpcyxhKSxjLnNjYWxlKGIsYil9fSxLaW5ldGljLlV0aWwuZXh0ZW5kKEtpbmV0aWMuU2NlbmVDYW52YXMsS2luZXRpYy5DYW52YXMpLEtpbmV0aWMuSGl0Q2FudmFzPWZ1bmN0aW9uKGEpe2E9YXx8e307dmFyIGI9YS53aWR0aHx8MCxjPWEuaGVpZ2h0fHwwO0tpbmV0aWMuQ2FudmFzLmNhbGwodGhpcyxhKSx0aGlzLmNvbnRleHQ9bmV3IEtpbmV0aWMuSGl0Q29udGV4dCh0aGlzKSx0aGlzLnNldFNpemUoYixjKX0sS2luZXRpYy5VdGlsLmV4dGVuZChLaW5ldGljLkhpdENhbnZhcyxLaW5ldGljLkNhbnZhcyl9KCksZnVuY3Rpb24oKXt2YXIgYT1cIixcIixiPVwiKFwiLGM9XCIpXCIsZD1cIihbXCIsZT1cIl0pXCIsZj1cIjtcIixnPVwiKClcIixoPVwiPVwiLGk9W1wiYXJjXCIsXCJhcmNUb1wiLFwiYmVnaW5QYXRoXCIsXCJiZXppZXJDdXJ2ZVRvXCIsXCJjbGVhclJlY3RcIixcImNsaXBcIixcImNsb3NlUGF0aFwiLFwiY3JlYXRlTGluZWFyR3JhZGllbnRcIixcImNyZWF0ZVBhdHRlcm5cIixcImNyZWF0ZVJhZGlhbEdyYWRpZW50XCIsXCJkcmF3SW1hZ2VcIixcImZpbGxcIixcImZpbGxUZXh0XCIsXCJnZXRJbWFnZURhdGFcIixcImNyZWF0ZUltYWdlRGF0YVwiLFwibGluZVRvXCIsXCJtb3ZlVG9cIixcInB1dEltYWdlRGF0YVwiLFwicXVhZHJhdGljQ3VydmVUb1wiLFwicmVjdFwiLFwicmVzdG9yZVwiLFwicm90YXRlXCIsXCJzYXZlXCIsXCJzY2FsZVwiLFwic2V0TGluZURhc2hcIixcInNldFRyYW5zZm9ybVwiLFwic3Ryb2tlXCIsXCJzdHJva2VUZXh0XCIsXCJ0cmFuc2Zvcm1cIixcInRyYW5zbGF0ZVwiXTtLaW5ldGljLkNvbnRleHQ9ZnVuY3Rpb24oYSl7dGhpcy5pbml0KGEpfSxLaW5ldGljLkNvbnRleHQucHJvdG90eXBlPXtpbml0OmZ1bmN0aW9uKGEpe3RoaXMuY2FudmFzPWEsdGhpcy5fY29udGV4dD1hLl9jYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpLEtpbmV0aWMuZW5hYmxlVHJhY2UmJih0aGlzLnRyYWNlQXJyPVtdLHRoaXMuX2VuYWJsZVRyYWNlKCkpfSxmaWxsU2hhcGU6ZnVuY3Rpb24oYSl7YS5nZXRGaWxsRW5hYmxlZCgpJiZ0aGlzLl9maWxsKGEpfSxzdHJva2VTaGFwZTpmdW5jdGlvbihhKXthLmdldFN0cm9rZUVuYWJsZWQoKSYmdGhpcy5fc3Ryb2tlKGEpfSxmaWxsU3Ryb2tlU2hhcGU6ZnVuY3Rpb24oYSl7dmFyIGI9YS5nZXRGaWxsRW5hYmxlZCgpO2ImJnRoaXMuX2ZpbGwoYSksYS5nZXRTdHJva2VFbmFibGVkKCkmJnRoaXMuX3N0cm9rZShhKX0sZ2V0VHJhY2U6ZnVuY3Rpb24oaSl7dmFyIGosayxsLG0sbj10aGlzLnRyYWNlQXJyLG89bi5sZW5ndGgscD1cIlwiO2ZvcihqPTA7bz5qO2orKylrPW5bal0sbD1rLm1ldGhvZCxsPyhtPWsuYXJncyxwKz1sLHArPWk/ZzpLaW5ldGljLlV0aWwuX2lzQXJyYXkobVswXSk/ZCttLmpvaW4oYSkrZTpiK20uam9pbihhKStjKToocCs9ay5wcm9wZXJ0eSxpfHwocCs9aCtrLnZhbCkpLHArPWY7cmV0dXJuIHB9LGNsZWFyVHJhY2U6ZnVuY3Rpb24oKXt0aGlzLnRyYWNlQXJyPVtdfSxfdHJhY2U6ZnVuY3Rpb24oYSl7dmFyIGIsYz10aGlzLnRyYWNlQXJyO2MucHVzaChhKSxiPWMubGVuZ3RoLGI+PUtpbmV0aWMudHJhY2VBcnJNYXgmJmMuc2hpZnQoKX0scmVzZXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldENhbnZhcygpLmdldFBpeGVsUmF0aW8oKTt0aGlzLnNldFRyYW5zZm9ybSgxKmEsMCwwLDEqYSwwLDApfSxnZXRDYW52YXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jYW52YXN9LGNsZWFyOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0Q2FudmFzKCk7YT90aGlzLmNsZWFyUmVjdChhLnh8fDAsYS55fHwwLGEud2lkdGh8fDAsYS5oZWlnaHR8fDApOnRoaXMuY2xlYXJSZWN0KDAsMCxiLmdldFdpZHRoKCksYi5nZXRIZWlnaHQoKSl9LF9hcHBseUxpbmVDYXA6ZnVuY3Rpb24oYSl7dmFyIGI9YS5nZXRMaW5lQ2FwKCk7YiYmdGhpcy5zZXRBdHRyKFwibGluZUNhcFwiLGIpfSxfYXBwbHlPcGFjaXR5OmZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2V0QWJzb2x1dGVPcGFjaXR5KCk7MSE9PWImJnRoaXMuc2V0QXR0cihcImdsb2JhbEFscGhhXCIsYil9LF9hcHBseUxpbmVKb2luOmZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2V0TGluZUpvaW4oKTtiJiZ0aGlzLnNldEF0dHIoXCJsaW5lSm9pblwiLGIpfSxzZXRBdHRyOmZ1bmN0aW9uKGEsYil7dGhpcy5fY29udGV4dFthXT1ifSxhcmM6ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHM7dGhpcy5fY29udGV4dC5hcmMoYVswXSxhWzFdLGFbMl0sYVszXSxhWzRdLGFbNV0pfSxiZWdpblBhdGg6ZnVuY3Rpb24oKXt0aGlzLl9jb250ZXh0LmJlZ2luUGF0aCgpfSxiZXppZXJDdXJ2ZVRvOmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzO3RoaXMuX2NvbnRleHQuYmV6aWVyQ3VydmVUbyhhWzBdLGFbMV0sYVsyXSxhWzNdLGFbNF0sYVs1XSl9LGNsZWFyUmVjdDpmdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50czt0aGlzLl9jb250ZXh0LmNsZWFyUmVjdChhWzBdLGFbMV0sYVsyXSxhWzNdKX0sY2xpcDpmdW5jdGlvbigpe3RoaXMuX2NvbnRleHQuY2xpcCgpfSxjbG9zZVBhdGg6ZnVuY3Rpb24oKXt0aGlzLl9jb250ZXh0LmNsb3NlUGF0aCgpfSxjcmVhdGVJbWFnZURhdGE6ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHM7cmV0dXJuIDI9PT1hLmxlbmd0aD90aGlzLl9jb250ZXh0LmNyZWF0ZUltYWdlRGF0YShhWzBdLGFbMV0pOjE9PT1hLmxlbmd0aD90aGlzLl9jb250ZXh0LmNyZWF0ZUltYWdlRGF0YShhWzBdKTp2b2lkIDB9LGNyZWF0ZUxpbmVhckdyYWRpZW50OmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzO3JldHVybiB0aGlzLl9jb250ZXh0LmNyZWF0ZUxpbmVhckdyYWRpZW50KGFbMF0sYVsxXSxhWzJdLGFbM10pfSxjcmVhdGVQYXR0ZXJuOmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzO3JldHVybiB0aGlzLl9jb250ZXh0LmNyZWF0ZVBhdHRlcm4oYVswXSxhWzFdKX0sY3JlYXRlUmFkaWFsR3JhZGllbnQ6ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHM7cmV0dXJuIHRoaXMuX2NvbnRleHQuY3JlYXRlUmFkaWFsR3JhZGllbnQoYVswXSxhWzFdLGFbMl0sYVszXSxhWzRdLGFbNV0pfSxkcmF3SW1hZ2U6ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHMsYj10aGlzLl9jb250ZXh0OzM9PT1hLmxlbmd0aD9iLmRyYXdJbWFnZShhWzBdLGFbMV0sYVsyXSk6NT09PWEubGVuZ3RoP2IuZHJhd0ltYWdlKGFbMF0sYVsxXSxhWzJdLGFbM10sYVs0XSk6OT09PWEubGVuZ3RoJiZiLmRyYXdJbWFnZShhWzBdLGFbMV0sYVsyXSxhWzNdLGFbNF0sYVs1XSxhWzZdLGFbN10sYVs4XSl9LGZpbGw6ZnVuY3Rpb24oKXt0aGlzLl9jb250ZXh0LmZpbGwoKX0sZmlsbFRleHQ6ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHM7dGhpcy5fY29udGV4dC5maWxsVGV4dChhWzBdLGFbMV0sYVsyXSl9LGdldEltYWdlRGF0YTpmdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50cztyZXR1cm4gdGhpcy5fY29udGV4dC5nZXRJbWFnZURhdGEoYVswXSxhWzFdLGFbMl0sYVszXSl9LGxpbmVUbzpmdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50czt0aGlzLl9jb250ZXh0LmxpbmVUbyhhWzBdLGFbMV0pfSxtb3ZlVG86ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHM7dGhpcy5fY29udGV4dC5tb3ZlVG8oYVswXSxhWzFdKX0scmVjdDpmdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50czt0aGlzLl9jb250ZXh0LnJlY3QoYVswXSxhWzFdLGFbMl0sYVszXSl9LHB1dEltYWdlRGF0YTpmdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50czt0aGlzLl9jb250ZXh0LnB1dEltYWdlRGF0YShhWzBdLGFbMV0sYVsyXSl9LHF1YWRyYXRpY0N1cnZlVG86ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHM7dGhpcy5fY29udGV4dC5xdWFkcmF0aWNDdXJ2ZVRvKGFbMF0sYVsxXSxhWzJdLGFbM10pfSxyZXN0b3JlOmZ1bmN0aW9uKCl7dGhpcy5fY29udGV4dC5yZXN0b3JlKCl9LHJvdGF0ZTpmdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50czt0aGlzLl9jb250ZXh0LnJvdGF0ZShhWzBdKX0sc2F2ZTpmdW5jdGlvbigpe3RoaXMuX2NvbnRleHQuc2F2ZSgpfSxzY2FsZTpmdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50czt0aGlzLl9jb250ZXh0LnNjYWxlKGFbMF0sYVsxXSl9LHNldExpbmVEYXNoOmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzLGI9dGhpcy5fY29udGV4dDt0aGlzLl9jb250ZXh0LnNldExpbmVEYXNoP2Iuc2V0TGluZURhc2goYVswXSk6XCJtb3pEYXNoXCJpbiBiP2IubW96RGFzaD1hWzBdOlwid2Via2l0TGluZURhc2hcImluIGImJihiLndlYmtpdExpbmVEYXNoPWFbMF0pfSxzZXRUcmFuc2Zvcm06ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHM7dGhpcy5fY29udGV4dC5zZXRUcmFuc2Zvcm0oYVswXSxhWzFdLGFbMl0sYVszXSxhWzRdLGFbNV0pfSxzdHJva2U6ZnVuY3Rpb24oKXt0aGlzLl9jb250ZXh0LnN0cm9rZSgpfSxzdHJva2VUZXh0OmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzO3RoaXMuX2NvbnRleHQuc3Ryb2tlVGV4dChhWzBdLGFbMV0sYVsyXSl9LHRyYW5zZm9ybTpmdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50czt0aGlzLl9jb250ZXh0LnRyYW5zZm9ybShhWzBdLGFbMV0sYVsyXSxhWzNdLGFbNF0sYVs1XSl9LHRyYW5zbGF0ZTpmdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50czt0aGlzLl9jb250ZXh0LnRyYW5zbGF0ZShhWzBdLGFbMV0pfSxfZW5hYmxlVHJhY2U6ZnVuY3Rpb24oKXt2YXIgYSxiLGM9dGhpcyxkPWkubGVuZ3RoLGU9S2luZXRpYy5VdGlsLl9zaW1wbGlmeUFycmF5LGY9dGhpcy5zZXRBdHRyLGc9ZnVuY3Rpb24oYSl7dmFyIGQsZj1jW2FdO2NbYV09ZnVuY3Rpb24oKXtyZXR1cm4gYj1lKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKSksZD1mLmFwcGx5KGMsYXJndW1lbnRzKSxjLl90cmFjZSh7bWV0aG9kOmEsYXJnczpifSksZH19O2ZvcihhPTA7ZD5hO2ErKylnKGlbYV0pO2Muc2V0QXR0cj1mdW5jdGlvbigpe2YuYXBwbHkoYyxhcmd1bWVudHMpLGMuX3RyYWNlKHtwcm9wZXJ0eTphcmd1bWVudHNbMF0sdmFsOmFyZ3VtZW50c1sxXX0pfX19LEtpbmV0aWMuU2NlbmVDb250ZXh0PWZ1bmN0aW9uKGEpe0tpbmV0aWMuQ29udGV4dC5jYWxsKHRoaXMsYSl9LEtpbmV0aWMuU2NlbmVDb250ZXh0LnByb3RvdHlwZT17X2ZpbGxDb2xvcjpmdW5jdGlvbihhKXt2YXIgYj1hLmZpbGwoKXx8S2luZXRpYy5VdGlsLl9nZXRSR0JBU3RyaW5nKHtyZWQ6YS5maWxsUmVkKCksZ3JlZW46YS5maWxsR3JlZW4oKSxibHVlOmEuZmlsbEJsdWUoKSxhbHBoYTphLmZpbGxBbHBoYSgpfSk7dGhpcy5zZXRBdHRyKFwiZmlsbFN0eWxlXCIsYiksYS5fZmlsbEZ1bmModGhpcyl9LF9maWxsUGF0dGVybjpmdW5jdGlvbihhKXt2YXIgYj1hLmdldEZpbGxQYXR0ZXJuSW1hZ2UoKSxjPWEuZ2V0RmlsbFBhdHRlcm5YKCksZD1hLmdldEZpbGxQYXR0ZXJuWSgpLGU9YS5nZXRGaWxsUGF0dGVyblNjYWxlKCksZj1LaW5ldGljLmdldEFuZ2xlKGEuZ2V0RmlsbFBhdHRlcm5Sb3RhdGlvbigpKSxnPWEuZ2V0RmlsbFBhdHRlcm5PZmZzZXQoKSxoPWEuZ2V0RmlsbFBhdHRlcm5SZXBlYXQoKTsoY3x8ZCkmJnRoaXMudHJhbnNsYXRlKGN8fDAsZHx8MCksZiYmdGhpcy5yb3RhdGUoZiksZSYmdGhpcy5zY2FsZShlLngsZS55KSxnJiZ0aGlzLnRyYW5zbGF0ZSgtMSpnLngsLTEqZy55KSx0aGlzLnNldEF0dHIoXCJmaWxsU3R5bGVcIix0aGlzLmNyZWF0ZVBhdHRlcm4oYixofHxcInJlcGVhdFwiKSksdGhpcy5maWxsKCl9LF9maWxsTGluZWFyR3JhZGllbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5nZXRGaWxsTGluZWFyR3JhZGllbnRTdGFydFBvaW50KCksYz1hLmdldEZpbGxMaW5lYXJHcmFkaWVudEVuZFBvaW50KCksZD1hLmdldEZpbGxMaW5lYXJHcmFkaWVudENvbG9yU3RvcHMoKSxlPXRoaXMuY3JlYXRlTGluZWFyR3JhZGllbnQoYi54LGIueSxjLngsYy55KTtpZihkKXtmb3IodmFyIGY9MDtmPGQubGVuZ3RoO2YrPTIpZS5hZGRDb2xvclN0b3AoZFtmXSxkW2YrMV0pO3RoaXMuc2V0QXR0cihcImZpbGxTdHlsZVwiLGUpLHRoaXMuZmlsbCgpfX0sX2ZpbGxSYWRpYWxHcmFkaWVudDpmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5nZXRGaWxsUmFkaWFsR3JhZGllbnRTdGFydFBvaW50KCksYz1hLmdldEZpbGxSYWRpYWxHcmFkaWVudEVuZFBvaW50KCksZD1hLmdldEZpbGxSYWRpYWxHcmFkaWVudFN0YXJ0UmFkaXVzKCksZT1hLmdldEZpbGxSYWRpYWxHcmFkaWVudEVuZFJhZGl1cygpLGY9YS5nZXRGaWxsUmFkaWFsR3JhZGllbnRDb2xvclN0b3BzKCksZz10aGlzLmNyZWF0ZVJhZGlhbEdyYWRpZW50KGIueCxiLnksZCxjLngsYy55LGUpLGg9MDtoPGYubGVuZ3RoO2grPTIpZy5hZGRDb2xvclN0b3AoZltoXSxmW2grMV0pO3RoaXMuc2V0QXR0cihcImZpbGxTdHlsZVwiLGcpLHRoaXMuZmlsbCgpfSxfZmlsbDpmdW5jdGlvbihhKXt2YXIgYj1hLmZpbGwoKXx8YS5maWxsUmVkKCl8fGEuZmlsbEdyZWVuKCl8fGEuZmlsbEJsdWUoKSxjPWEuZ2V0RmlsbFBhdHRlcm5JbWFnZSgpLGQ9YS5nZXRGaWxsTGluZWFyR3JhZGllbnRDb2xvclN0b3BzKCksZT1hLmdldEZpbGxSYWRpYWxHcmFkaWVudENvbG9yU3RvcHMoKSxmPWEuZ2V0RmlsbFByaW9yaXR5KCk7YiYmXCJjb2xvclwiPT09Zj90aGlzLl9maWxsQ29sb3IoYSk6YyYmXCJwYXR0ZXJuXCI9PT1mP3RoaXMuX2ZpbGxQYXR0ZXJuKGEpOmQmJlwibGluZWFyLWdyYWRpZW50XCI9PT1mP3RoaXMuX2ZpbGxMaW5lYXJHcmFkaWVudChhKTplJiZcInJhZGlhbC1ncmFkaWVudFwiPT09Zj90aGlzLl9maWxsUmFkaWFsR3JhZGllbnQoYSk6Yj90aGlzLl9maWxsQ29sb3IoYSk6Yz90aGlzLl9maWxsUGF0dGVybihhKTpkP3RoaXMuX2ZpbGxMaW5lYXJHcmFkaWVudChhKTplJiZ0aGlzLl9maWxsUmFkaWFsR3JhZGllbnQoYSl9LF9zdHJva2U6ZnVuY3Rpb24oYSl7dmFyIGI9YS5kYXNoKCksYz1hLmdldFN0cm9rZVNjYWxlRW5hYmxlZCgpO2EuaGFzU3Ryb2tlKCkmJihjfHwodGhpcy5zYXZlKCksdGhpcy5zZXRUcmFuc2Zvcm0oMSwwLDAsMSwwLDApKSx0aGlzLl9hcHBseUxpbmVDYXAoYSksYiYmYS5kYXNoRW5hYmxlZCgpJiZ0aGlzLnNldExpbmVEYXNoKGIpLHRoaXMuc2V0QXR0cihcImxpbmVXaWR0aFwiLGEuc3Ryb2tlV2lkdGgoKSksdGhpcy5zZXRBdHRyKFwic3Ryb2tlU3R5bGVcIixhLnN0cm9rZSgpfHxLaW5ldGljLlV0aWwuX2dldFJHQkFTdHJpbmcoe3JlZDphLnN0cm9rZVJlZCgpLGdyZWVuOmEuc3Ryb2tlR3JlZW4oKSxibHVlOmEuc3Ryb2tlQmx1ZSgpLGFscGhhOmEuc3Ryb2tlQWxwaGEoKX0pKSxhLl9zdHJva2VGdW5jKHRoaXMpLGN8fHRoaXMucmVzdG9yZSgpKX0sX2FwcGx5U2hhZG93OmZ1bmN0aW9uKGEpe3ZhciBiPUtpbmV0aWMuVXRpbCxjPWEuZ2V0QWJzb2x1dGVPcGFjaXR5KCksZD1iLmdldChhLmdldFNoYWRvd0NvbG9yKCksXCJibGFja1wiKSxlPWIuZ2V0KGEuZ2V0U2hhZG93Qmx1cigpLDUpLGY9Yi5nZXQoYS5nZXRTaGFkb3dPcGFjaXR5KCksMSksZz1iLmdldChhLmdldFNoYWRvd09mZnNldCgpLHt4OjAseTowfSk7ZiYmdGhpcy5zZXRBdHRyKFwiZ2xvYmFsQWxwaGFcIixmKmMpLHRoaXMuc2V0QXR0cihcInNoYWRvd0NvbG9yXCIsZCksdGhpcy5zZXRBdHRyKFwic2hhZG93Qmx1clwiLGUpLHRoaXMuc2V0QXR0cihcInNoYWRvd09mZnNldFhcIixnLngpLHRoaXMuc2V0QXR0cihcInNoYWRvd09mZnNldFlcIixnLnkpfX0sS2luZXRpYy5VdGlsLmV4dGVuZChLaW5ldGljLlNjZW5lQ29udGV4dCxLaW5ldGljLkNvbnRleHQpLEtpbmV0aWMuSGl0Q29udGV4dD1mdW5jdGlvbihhKXtLaW5ldGljLkNvbnRleHQuY2FsbCh0aGlzLGEpfSxLaW5ldGljLkhpdENvbnRleHQucHJvdG90eXBlPXtfZmlsbDpmdW5jdGlvbihhKXt0aGlzLnNhdmUoKSx0aGlzLnNldEF0dHIoXCJmaWxsU3R5bGVcIixhLmNvbG9yS2V5KSxhLl9maWxsRnVuY0hpdCh0aGlzKSx0aGlzLnJlc3RvcmUoKX0sX3N0cm9rZTpmdW5jdGlvbihhKXthLmhhc1N0cm9rZSgpJiYodGhpcy5fYXBwbHlMaW5lQ2FwKGEpLHRoaXMuc2V0QXR0cihcImxpbmVXaWR0aFwiLGEuc3Ryb2tlV2lkdGgoKSksdGhpcy5zZXRBdHRyKFwic3Ryb2tlU3R5bGVcIixhLmNvbG9yS2V5KSxhLl9zdHJva2VGdW5jSGl0KHRoaXMpKX19LEtpbmV0aWMuVXRpbC5leHRlbmQoS2luZXRpYy5IaXRDb250ZXh0LEtpbmV0aWMuQ29udGV4dCl9KCksZnVuY3Rpb24oKXt2YXIgYT1cImdldFwiLGI9XCJzZXRcIjtLaW5ldGljLkZhY3Rvcnk9e2FkZEdldHRlclNldHRlcjpmdW5jdGlvbihhLGIsYyxkLGUpe3RoaXMuYWRkR2V0dGVyKGEsYixjKSx0aGlzLmFkZFNldHRlcihhLGIsZCxlKSx0aGlzLmFkZE92ZXJsb2FkZWRHZXR0ZXJTZXR0ZXIoYSxiKX0sYWRkR2V0dGVyOmZ1bmN0aW9uKGIsYyxkKXt2YXIgZT1hK0tpbmV0aWMuVXRpbC5fY2FwaXRhbGl6ZShjKTtiLnByb3RvdHlwZVtlXT1mdW5jdGlvbigpe3ZhciBhPXRoaXMuYXR0cnNbY107cmV0dXJuIHZvaWQgMD09PWE/ZDphfX0sYWRkU2V0dGVyOmZ1bmN0aW9uKGEsYyxkLGUpe3ZhciBmPWIrS2luZXRpYy5VdGlsLl9jYXBpdGFsaXplKGMpO2EucHJvdG90eXBlW2ZdPWZ1bmN0aW9uKGEpe3JldHVybiBkJiYoYT1kLmNhbGwodGhpcyxhKSksdGhpcy5fc2V0QXR0cihjLGEpLGUmJmUuY2FsbCh0aGlzKSx0aGlzfX0sYWRkQ29tcG9uZW50c0dldHRlclNldHRlcjpmdW5jdGlvbihjLGQsZSxmLGcpe3ZhciBoLGksaj1lLmxlbmd0aCxrPUtpbmV0aWMuVXRpbC5fY2FwaXRhbGl6ZSxsPWErayhkKSxtPWIrayhkKTtjLnByb3RvdHlwZVtsXT1mdW5jdGlvbigpe3ZhciBhPXt9O2ZvcihoPTA7aj5oO2grKylpPWVbaF0sYVtpXT10aGlzLmdldEF0dHIoZCtrKGkpKTtyZXR1cm4gYX0sYy5wcm90b3R5cGVbbV09ZnVuY3Rpb24oYSl7dmFyIGIsYz10aGlzLmF0dHJzW2RdO2YmJihhPWYuY2FsbCh0aGlzLGEpKTtmb3IoYiBpbiBhKXRoaXMuX3NldEF0dHIoZCtrKGIpLGFbYl0pO3JldHVybiB0aGlzLl9maXJlQ2hhbmdlRXZlbnQoZCxjLGEpLGcmJmcuY2FsbCh0aGlzKSx0aGlzfSx0aGlzLmFkZE92ZXJsb2FkZWRHZXR0ZXJTZXR0ZXIoYyxkKX0sYWRkT3ZlcmxvYWRlZEdldHRlclNldHRlcjpmdW5jdGlvbihjLGQpe3ZhciBlPUtpbmV0aWMuVXRpbC5fY2FwaXRhbGl6ZShkKSxmPWIrZSxnPWErZTtjLnByb3RvdHlwZVtkXT1mdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh0aGlzW2ZdKGFyZ3VtZW50c1swXSksdGhpcyk6dGhpc1tnXSgpfX0sYmFja0NvbXBhdDpmdW5jdGlvbihhLGIpe3ZhciBjO2ZvcihjIGluIGIpYS5wcm90b3R5cGVbY109YS5wcm90b3R5cGVbYltjXV19LGFmdGVyU2V0RmlsdGVyOmZ1bmN0aW9uKCl7dGhpcy5fZmlsdGVyVXBUb0RhdGU9ITF9fSxLaW5ldGljLlZhbGlkYXRvcnM9e1JHQkNvbXBvbmVudDpmdW5jdGlvbihhKXtyZXR1cm4gYT4yNTU/MjU1OjA+YT8wOk1hdGgucm91bmQoYSl9LGFscGhhQ29tcG9uZW50OmZ1bmN0aW9uKGEpe3JldHVybiBhPjE/MToxZS00PmE/MWUtNDphfX19KCksZnVuY3Rpb24oKXt2YXIgYT1cImFic29sdXRlT3BhY2l0eVwiLGI9XCJhYnNvbHV0ZVRyYW5zZm9ybVwiLGM9XCJDaGFuZ2VcIixkPVwiY2hpbGRyZW5cIixlPVwiLlwiLGY9XCJcIixnPVwiZ2V0XCIsaD1cImlkXCIsaT1cImtpbmV0aWNcIixqPVwibGlzdGVuaW5nXCIsaz1cIm1vdXNlZW50ZXJcIixsPVwibW91c2VsZWF2ZVwiLG09XCJuYW1lXCIsbj1cInNldFwiLG89XCJTaGFwZVwiLHA9XCIgXCIscT1cInN0YWdlXCIscj1cInRyYW5zZm9ybVwiLHM9XCJTdGFnZVwiLHQ9XCJ2aXNpYmxlXCIsdT1bXCJpZFwiXSx2PVtcInhDaGFuZ2Uua2luZXRpY1wiLFwieUNoYW5nZS5raW5ldGljXCIsXCJzY2FsZVhDaGFuZ2Uua2luZXRpY1wiLFwic2NhbGVZQ2hhbmdlLmtpbmV0aWNcIixcInNrZXdYQ2hhbmdlLmtpbmV0aWNcIixcInNrZXdZQ2hhbmdlLmtpbmV0aWNcIixcInJvdGF0aW9uQ2hhbmdlLmtpbmV0aWNcIixcIm9mZnNldFhDaGFuZ2Uua2luZXRpY1wiLFwib2Zmc2V0WUNoYW5nZS5raW5ldGljXCIsXCJ0cmFuc2Zvcm1zRW5hYmxlZENoYW5nZS5raW5ldGljXCJdLmpvaW4ocCk7S2luZXRpYy5VdGlsLmFkZE1ldGhvZHMoS2luZXRpYy5Ob2RlLHtfaW5pdDpmdW5jdGlvbihjKXt2YXIgZD10aGlzO3RoaXMuX2lkPUtpbmV0aWMuaWRDb3VudGVyKyssdGhpcy5ldmVudExpc3RlbmVycz17fSx0aGlzLmF0dHJzPXt9LHRoaXMuX2NhY2hlPXt9LHRoaXMuX2ZpbHRlclVwVG9EYXRlPSExLHRoaXMuc2V0QXR0cnMoYyksdGhpcy5vbih2LGZ1bmN0aW9uKCl7dGhpcy5fY2xlYXJDYWNoZShyKSxkLl9jbGVhclNlbGZBbmREZXNjZW5kYW50Q2FjaGUoYil9KSx0aGlzLm9uKFwidmlzaWJsZUNoYW5nZS5raW5ldGljXCIsZnVuY3Rpb24oKXtkLl9jbGVhclNlbGZBbmREZXNjZW5kYW50Q2FjaGUodCl9KSx0aGlzLm9uKFwibGlzdGVuaW5nQ2hhbmdlLmtpbmV0aWNcIixmdW5jdGlvbigpe2QuX2NsZWFyU2VsZkFuZERlc2NlbmRhbnRDYWNoZShqKX0pLHRoaXMub24oXCJvcGFjaXR5Q2hhbmdlLmtpbmV0aWNcIixmdW5jdGlvbigpe2QuX2NsZWFyU2VsZkFuZERlc2NlbmRhbnRDYWNoZShhKX0pfSxfY2xlYXJDYWNoZTpmdW5jdGlvbihhKXthP2RlbGV0ZSB0aGlzLl9jYWNoZVthXTp0aGlzLl9jYWNoZT17fX0sX2dldENhY2hlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5fY2FjaGVbYV07cmV0dXJuIHZvaWQgMD09PWMmJih0aGlzLl9jYWNoZVthXT1iLmNhbGwodGhpcykpLHRoaXMuX2NhY2hlW2FdfSxfY2xlYXJTZWxmQW5kRGVzY2VuZGFudENhY2hlOmZ1bmN0aW9uKGEpe3RoaXMuX2NsZWFyQ2FjaGUoYSksdGhpcy5jaGlsZHJlbiYmdGhpcy5nZXRDaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oYil7Yi5fY2xlYXJTZWxmQW5kRGVzY2VuZGFudENhY2hlKGEpfSl9LGNsZWFyQ2FjaGU6ZnVuY3Rpb24oKXtyZXR1cm4gZGVsZXRlIHRoaXMuX2NhY2hlLmNhbnZhcyx0aGlzLl9maWx0ZXJVcFRvRGF0ZT0hMSx0aGlzfSxjYWNoZTpmdW5jdGlvbihhKXt7dmFyIGI9YXx8e30sYz1iLnh8fDAsZD1iLnl8fDAsZT1iLndpZHRofHx0aGlzLndpZHRoKCksZj1iLmhlaWdodHx8dGhpcy5oZWlnaHQoKSxnPWIuZHJhd0JvcmRlcnx8ITE7dGhpcy5nZXRMYXllcigpfWlmKDA9PT1lfHwwPT09ZilyZXR1cm4gdm9pZCBLaW5ldGljLlV0aWwud2FybihcIldpZHRoIG9yIGhlaWdodCBvZiBjYWNoaW5nIGNvbmZpZ3VyYXRpb24gZXF1YWxzIDAuIENhY2hlIGlzIGlnbm9yZWQuXCIpO3ZhciBoPW5ldyBLaW5ldGljLlNjZW5lQ2FudmFzKHtwaXhlbFJhdGlvOjEsd2lkdGg6ZSxoZWlnaHQ6Zn0pLGk9bmV3IEtpbmV0aWMuU2NlbmVDYW52YXMoe3BpeGVsUmF0aW86MSx3aWR0aDplLGhlaWdodDpmfSksaj1uZXcgS2luZXRpYy5IaXRDYW52YXMoe3dpZHRoOmUsaGVpZ2h0OmZ9KSxrPSh0aGlzLnRyYW5zZm9ybXNFbmFibGVkKCksdGhpcy54KCksdGhpcy55KCksaC5nZXRDb250ZXh0KCkpLGw9ai5nZXRDb250ZXh0KCk7cmV0dXJuIHRoaXMuY2xlYXJDYWNoZSgpLGsuc2F2ZSgpLGwuc2F2ZSgpLGcmJihrLnNhdmUoKSxrLmJlZ2luUGF0aCgpLGsucmVjdCgwLDAsZSxmKSxrLmNsb3NlUGF0aCgpLGsuc2V0QXR0cihcInN0cm9rZVN0eWxlXCIsXCJyZWRcIiksay5zZXRBdHRyKFwibGluZVdpZHRoXCIsNSksay5zdHJva2UoKSxrLnJlc3RvcmUoKSksay50cmFuc2xhdGUoLTEqYywtMSpkKSxsLnRyYW5zbGF0ZSgtMSpjLC0xKmQpLFwiU2hhcGVcIj09PXRoaXMubm9kZVR5cGUmJihrLnRyYW5zbGF0ZSgtMSp0aGlzLngoKSwtMSp0aGlzLnkoKSksbC50cmFuc2xhdGUoLTEqdGhpcy54KCksLTEqdGhpcy55KCkpKSx0aGlzLmRyYXdTY2VuZShoLHRoaXMpLHRoaXMuZHJhd0hpdChqLHRoaXMpLGsucmVzdG9yZSgpLGwucmVzdG9yZSgpLHRoaXMuX2NhY2hlLmNhbnZhcz17c2NlbmU6aCxmaWx0ZXI6aSxoaXQ6an0sdGhpc30sX2RyYXdDYWNoZWRTY2VuZUNhbnZhczpmdW5jdGlvbihhKXthLnNhdmUoKSx0aGlzLmdldExheWVyKCkuX2FwcGx5VHJhbnNmb3JtKHRoaXMsYSksYS5kcmF3SW1hZ2UodGhpcy5fZ2V0Q2FjaGVkU2NlbmVDYW52YXMoKS5fY2FudmFzLDAsMCksYS5yZXN0b3JlKCl9LF9nZXRDYWNoZWRTY2VuZUNhbnZhczpmdW5jdGlvbigpe3ZhciBhLGIsYyxkLGU9dGhpcy5maWx0ZXJzKCksZj10aGlzLl9jYWNoZS5jYW52YXMsZz1mLnNjZW5lLGg9Zi5maWx0ZXIsaT1oLmdldENvbnRleHQoKTtpZihlKXtpZighdGhpcy5fZmlsdGVyVXBUb0RhdGUpe3RyeXtmb3IoYT1lLmxlbmd0aCxpLmNsZWFyKCksaS5kcmF3SW1hZ2UoZy5fY2FudmFzLDAsMCksYj1pLmdldEltYWdlRGF0YSgwLDAsaC5nZXRXaWR0aCgpLGguZ2V0SGVpZ2h0KCkpLGM9MDthPmM7YysrKWQ9ZVtjXSxkLmNhbGwodGhpcyxiKSxpLnB1dEltYWdlRGF0YShiLDAsMCl9Y2F0Y2goail7S2luZXRpYy5VdGlsLndhcm4oXCJVbmFibGUgdG8gYXBwbHkgZmlsdGVyLiBcIitqLm1lc3NhZ2UpfXRoaXMuX2ZpbHRlclVwVG9EYXRlPSEwfXJldHVybiBofXJldHVybiBnfSxfZHJhd0NhY2hlZEhpdENhbnZhczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLl9jYWNoZS5jYW52YXMsYz1iLmhpdDthLnNhdmUoKSx0aGlzLmdldExheWVyKCkuX2FwcGx5VHJhbnNmb3JtKHRoaXMsYSksYS5kcmF3SW1hZ2UoYy5fY2FudmFzLDAsMCksYS5yZXN0b3JlKCl9LG9uOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxnLGgsaSxqPWEuc3BsaXQocCksaz1qLmxlbmd0aDtmb3IoYz0wO2s+YztjKyspZD1qW2NdLGc9ZC5zcGxpdChlKSxoPWdbMF0saT1nWzFdfHxmLHRoaXMuZXZlbnRMaXN0ZW5lcnNbaF18fCh0aGlzLmV2ZW50TGlzdGVuZXJzW2hdPVtdKSx0aGlzLmV2ZW50TGlzdGVuZXJzW2hdLnB1c2goe25hbWU6aSxoYW5kbGVyOmJ9KTtyZXR1cm4gdGhpc30sb2ZmOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxmLGcsaCxpPWEuc3BsaXQocCksaj1pLmxlbmd0aDtmb3IoYj0wO2o+YjtiKyspaWYoZD1pW2JdLGY9ZC5zcGxpdChlKSxnPWZbMF0saD1mWzFdLGcpdGhpcy5ldmVudExpc3RlbmVyc1tnXSYmdGhpcy5fb2ZmKGcsaCk7ZWxzZSBmb3IoYyBpbiB0aGlzLmV2ZW50TGlzdGVuZXJzKXRoaXMuX29mZihjLGgpO3JldHVybiB0aGlzfSxkaXNwYXRjaEV2ZW50OmZ1bmN0aW9uKGEpe3ZhciBiPXt0YXJnZXQ6dGhpcyx0eXBlOmEudHlwZSxldnQ6YX07dGhpcy5maXJlKGEudHlwZSxiKX0sYWRkRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbihhLGIpe3RoaXMub24oYSxmdW5jdGlvbihhKXtiLmNhbGwodGhpcyxhLmV2dCl9KX0scmVtb3ZlOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5nZXRQYXJlbnQoKTtyZXR1cm4gYyYmYy5jaGlsZHJlbiYmKGMuY2hpbGRyZW4uc3BsaWNlKHRoaXMuaW5kZXgsMSksYy5fc2V0Q2hpbGRyZW5JbmRpY2VzKCksZGVsZXRlIHRoaXMucGFyZW50KSx0aGlzLl9jbGVhclNlbGZBbmREZXNjZW5kYW50Q2FjaGUocSksdGhpcy5fY2xlYXJTZWxmQW5kRGVzY2VuZGFudENhY2hlKGIpLHRoaXMuX2NsZWFyU2VsZkFuZERlc2NlbmRhbnRDYWNoZSh0KSx0aGlzLl9jbGVhclNlbGZBbmREZXNjZW5kYW50Q2FjaGUoaiksdGhpcy5fY2xlYXJTZWxmQW5kRGVzY2VuZGFudENhY2hlKGEpLHRoaXN9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtLaW5ldGljLl9yZW1vdmVJZCh0aGlzLmdldElkKCkpLEtpbmV0aWMuX3JlbW92ZU5hbWUodGhpcy5nZXROYW1lKCksdGhpcy5faWQpLHRoaXMucmVtb3ZlKCl9LGdldEF0dHI6ZnVuY3Rpb24oYSl7dmFyIGI9ZytLaW5ldGljLlV0aWwuX2NhcGl0YWxpemUoYSk7cmV0dXJuIEtpbmV0aWMuVXRpbC5faXNGdW5jdGlvbih0aGlzW2JdKT90aGlzW2JdKCk6dGhpcy5hdHRyc1thXX0sZ2V0QW5jZXN0b3JzOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuZ2V0UGFyZW50KCksYj1uZXcgS2luZXRpYy5Db2xsZWN0aW9uO2E7KWIucHVzaChhKSxhPWEuZ2V0UGFyZW50KCk7cmV0dXJuIGJ9LGdldEF0dHJzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXR0cnN8fHt9fSxzZXRBdHRyczpmdW5jdGlvbihhKXt2YXIgYixjO2lmKGEpZm9yKGIgaW4gYSliPT09ZHx8KGM9bitLaW5ldGljLlV0aWwuX2NhcGl0YWxpemUoYiksS2luZXRpYy5VdGlsLl9pc0Z1bmN0aW9uKHRoaXNbY10pP3RoaXNbY10oYVtiXSk6dGhpcy5fc2V0QXR0cihiLGFbYl0pKTtyZXR1cm4gdGhpc30saXNMaXN0ZW5pbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0Q2FjaGUoaix0aGlzLl9pc0xpc3RlbmluZyl9LF9pc0xpc3RlbmluZzpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0TGlzdGVuaW5nKCksYj10aGlzLmdldFBhcmVudCgpO3JldHVyblwiaW5oZXJpdFwiPT09YT9iP2IuaXNMaXN0ZW5pbmcoKTohMDphfSxpc1Zpc2libGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0Q2FjaGUodCx0aGlzLl9pc1Zpc2libGUpfSxfaXNWaXNpYmxlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRWaXNpYmxlKCksYj10aGlzLmdldFBhcmVudCgpO3JldHVyblwiaW5oZXJpdFwiPT09YT9iP2IuaXNWaXNpYmxlKCk6ITA6YX0sc2hvdWxkRHJhd0hpdDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0TGF5ZXIoKTtyZXR1cm4gYSYmYS5oaXRHcmFwaEVuYWJsZWQoKSYmdGhpcy5pc0xpc3RlbmluZygpJiZ0aGlzLmlzVmlzaWJsZSgpJiYhS2luZXRpYy5pc0RyYWdnaW5nKCl9LHNob3c6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXRWaXNpYmxlKCEwKSx0aGlzfSxoaWRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2V0VmlzaWJsZSghMSksdGhpc30sZ2V0WkluZGV4OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5kZXh8fDB9LGdldEFic29sdXRlWkluZGV4OmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShpKXtmb3IoYj1bXSxjPWkubGVuZ3RoLGQ9MDtjPmQ7ZCsrKWU9aVtkXSxoKyssZS5ub2RlVHlwZSE9PW8mJihiPWIuY29uY2F0KGUuZ2V0Q2hpbGRyZW4oKS50b0FycmF5KCkpKSxlLl9pZD09PWcuX2lkJiYoZD1jKTtiLmxlbmd0aD4wJiZiWzBdLmdldERlcHRoKCk8PWYmJmEoYil9dmFyIGIsYyxkLGUsZj10aGlzLmdldERlcHRoKCksZz10aGlzLGg9MDtyZXR1cm4gZy5ub2RlVHlwZSE9PXMmJmEoZy5nZXRTdGFnZSgpLmdldENoaWxkcmVuKCkpLGh9LGdldERlcHRoOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYj10aGlzLnBhcmVudDtiOylhKyssYj1iLnBhcmVudDtyZXR1cm4gYX0sc2V0UG9zaXRpb246ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuc2V0WChhLngpLHRoaXMuc2V0WShhLnkpLHRoaXN9LGdldFBvc2l0aW9uOmZ1bmN0aW9uKCl7cmV0dXJue3g6dGhpcy5nZXRYKCkseTp0aGlzLmdldFkoKX19LGdldEFic29sdXRlUG9zaXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldEFic29sdXRlVHJhbnNmb3JtKCkuZ2V0TWF0cml4KCksYj1uZXcgS2luZXRpYy5UcmFuc2Zvcm0sYz10aGlzLm9mZnNldCgpO3JldHVybiBiLm09YS5zbGljZSgpLGIudHJhbnNsYXRlKGMueCxjLnkpLGIuZ2V0VHJhbnNsYXRpb24oKX0sc2V0QWJzb2x1dGVQb3NpdGlvbjpmdW5jdGlvbihhKXt2YXIgYixjPXRoaXMuX2NsZWFyVHJhbnNmb3JtKCk7cmV0dXJuIHRoaXMuYXR0cnMueD1jLngsdGhpcy5hdHRycy55PWMueSxkZWxldGUgYy54LGRlbGV0ZSBjLnksYj10aGlzLmdldEFic29sdXRlVHJhbnNmb3JtKCksYi5pbnZlcnQoKSxiLnRyYW5zbGF0ZShhLngsYS55KSxhPXt4OnRoaXMuYXR0cnMueCtiLmdldFRyYW5zbGF0aW9uKCkueCx5OnRoaXMuYXR0cnMueStiLmdldFRyYW5zbGF0aW9uKCkueX0sdGhpcy5zZXRQb3NpdGlvbih7eDphLngseTphLnl9KSx0aGlzLl9zZXRUcmFuc2Zvcm0oYyksdGhpc30sX3NldFRyYW5zZm9ybTpmdW5jdGlvbihhKXt2YXIgYztmb3IoYyBpbiBhKXRoaXMuYXR0cnNbY109YVtjXTt0aGlzLl9jbGVhckNhY2hlKHIpLHRoaXMuX2NsZWFyU2VsZkFuZERlc2NlbmRhbnRDYWNoZShiKX0sX2NsZWFyVHJhbnNmb3JtOmZ1bmN0aW9uKCl7dmFyIGE9e3g6dGhpcy5nZXRYKCkseTp0aGlzLmdldFkoKSxyb3RhdGlvbjp0aGlzLmdldFJvdGF0aW9uKCksc2NhbGVYOnRoaXMuZ2V0U2NhbGVYKCksc2NhbGVZOnRoaXMuZ2V0U2NhbGVZKCksb2Zmc2V0WDp0aGlzLmdldE9mZnNldFgoKSxvZmZzZXRZOnRoaXMuZ2V0T2Zmc2V0WSgpLHNrZXdYOnRoaXMuZ2V0U2tld1goKSxza2V3WTp0aGlzLmdldFNrZXdZKCl9O3JldHVybiB0aGlzLmF0dHJzLng9MCx0aGlzLmF0dHJzLnk9MCx0aGlzLmF0dHJzLnJvdGF0aW9uPTAsdGhpcy5hdHRycy5zY2FsZVg9MSx0aGlzLmF0dHJzLnNjYWxlWT0xLHRoaXMuYXR0cnMub2Zmc2V0WD0wLHRoaXMuYXR0cnMub2Zmc2V0WT0wLHRoaXMuYXR0cnMuc2tld1g9MCx0aGlzLmF0dHJzLnNrZXdZPTAsdGhpcy5fY2xlYXJDYWNoZShyKSx0aGlzLl9jbGVhclNlbGZBbmREZXNjZW5kYW50Q2FjaGUoYiksYX0sbW92ZTpmdW5jdGlvbihhKXt2YXIgYj1hLngsYz1hLnksZD10aGlzLmdldFgoKSxlPXRoaXMuZ2V0WSgpO3JldHVybiB2b2lkIDAhPT1iJiYoZCs9Yiksdm9pZCAwIT09YyYmKGUrPWMpLHRoaXMuc2V0UG9zaXRpb24oe3g6ZCx5OmV9KSx0aGlzfSxfZWFjaEFuY2VzdG9yUmV2ZXJzZTpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZT1bXSxmPXRoaXMuZ2V0UGFyZW50KCk7aWYoYiYmYi5faWQ9PT10aGlzLl9pZClyZXR1cm4gYSh0aGlzKSwhMDtmb3IoZS51bnNoaWZ0KHRoaXMpO2YmJighYnx8Zi5faWQhPT1iLl9pZCk7KWUudW5zaGlmdChmKSxmPWYucGFyZW50O2ZvcihjPWUubGVuZ3RoLGQ9MDtjPmQ7ZCsrKWEoZVtkXSl9LHJvdGF0ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5zZXRSb3RhdGlvbih0aGlzLmdldFJvdGF0aW9uKCkrYSksdGhpc30sbW92ZVRvVG9wOmZ1bmN0aW9uKCl7aWYoIXRoaXMucGFyZW50KXJldHVybiB2b2lkIEtpbmV0aWMuVXRpbC53YXJuKFwiTm9kZSBoYXMgbm8gcGFyZW50LiBtb3ZlVG9Ub3AgZnVuY3Rpb24gaXMgaWdub3JlZC5cIik7dmFyIGE9dGhpcy5pbmRleDtyZXR1cm4gdGhpcy5wYXJlbnQuY2hpbGRyZW4uc3BsaWNlKGEsMSksdGhpcy5wYXJlbnQuY2hpbGRyZW4ucHVzaCh0aGlzKSx0aGlzLnBhcmVudC5fc2V0Q2hpbGRyZW5JbmRpY2VzKCksITB9LG1vdmVVcDpmdW5jdGlvbigpe2lmKCF0aGlzLnBhcmVudClyZXR1cm4gdm9pZCBLaW5ldGljLlV0aWwud2FybihcIk5vZGUgaGFzIG5vIHBhcmVudC4gbW92ZVVwIGZ1bmN0aW9uIGlzIGlnbm9yZWQuXCIpO3ZhciBhPXRoaXMuaW5kZXgsYj10aGlzLnBhcmVudC5nZXRDaGlsZHJlbigpLmxlbmd0aDtyZXR1cm4gYi0xPmE/KHRoaXMucGFyZW50LmNoaWxkcmVuLnNwbGljZShhLDEpLHRoaXMucGFyZW50LmNoaWxkcmVuLnNwbGljZShhKzEsMCx0aGlzKSx0aGlzLnBhcmVudC5fc2V0Q2hpbGRyZW5JbmRpY2VzKCksITApOiExfSxtb3ZlRG93bjpmdW5jdGlvbigpe2lmKCF0aGlzLnBhcmVudClyZXR1cm4gdm9pZCBLaW5ldGljLlV0aWwud2FybihcIk5vZGUgaGFzIG5vIHBhcmVudC4gbW92ZURvd24gZnVuY3Rpb24gaXMgaWdub3JlZC5cIik7dmFyIGE9dGhpcy5pbmRleDtyZXR1cm4gYT4wPyh0aGlzLnBhcmVudC5jaGlsZHJlbi5zcGxpY2UoYSwxKSx0aGlzLnBhcmVudC5jaGlsZHJlbi5zcGxpY2UoYS0xLDAsdGhpcyksdGhpcy5wYXJlbnQuX3NldENoaWxkcmVuSW5kaWNlcygpLCEwKTohMX0sbW92ZVRvQm90dG9tOmZ1bmN0aW9uKCl7aWYoIXRoaXMucGFyZW50KXJldHVybiB2b2lkIEtpbmV0aWMuVXRpbC53YXJuKFwiTm9kZSBoYXMgbm8gcGFyZW50LiBtb3ZlVG9Cb3R0b20gZnVuY3Rpb24gaXMgaWdub3JlZC5cIik7dmFyIGE9dGhpcy5pbmRleDtyZXR1cm4gYT4wPyh0aGlzLnBhcmVudC5jaGlsZHJlbi5zcGxpY2UoYSwxKSx0aGlzLnBhcmVudC5jaGlsZHJlbi51bnNoaWZ0KHRoaXMpLHRoaXMucGFyZW50Ll9zZXRDaGlsZHJlbkluZGljZXMoKSwhMCk6ITF9LHNldFpJbmRleDpmdW5jdGlvbihhKXtpZighdGhpcy5wYXJlbnQpcmV0dXJuIHZvaWQgS2luZXRpYy5VdGlsLndhcm4oXCJOb2RlIGhhcyBubyBwYXJlbnQuIHpJbmRleCBwYXJhbWV0ZXIgaXMgaWdub3JlZC5cIik7dmFyIGI9dGhpcy5pbmRleDtyZXR1cm4gdGhpcy5wYXJlbnQuY2hpbGRyZW4uc3BsaWNlKGIsMSksdGhpcy5wYXJlbnQuY2hpbGRyZW4uc3BsaWNlKGEsMCx0aGlzKSx0aGlzLnBhcmVudC5fc2V0Q2hpbGRyZW5JbmRpY2VzKCksdGhpc30sZ2V0QWJzb2x1dGVPcGFjaXR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldENhY2hlKGEsdGhpcy5fZ2V0QWJzb2x1dGVPcGFjaXR5KX0sX2dldEFic29sdXRlT3BhY2l0eTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0T3BhY2l0eSgpO3JldHVybiB0aGlzLmdldFBhcmVudCgpJiYoYSo9dGhpcy5nZXRQYXJlbnQoKS5nZXRBYnNvbHV0ZU9wYWNpdHkoKSksYX0sbW92ZVRvOmZ1bmN0aW9uKGEpe3JldHVybiBLaW5ldGljLk5vZGUucHJvdG90eXBlLnJlbW92ZS5jYWxsKHRoaXMpLGEuYWRkKHRoaXMpLHRoaXN9LHRvT2JqZWN0OmZ1bmN0aW9uKCl7dmFyIGEsYixjLGQsZT1LaW5ldGljLlV0aWwsZj17fSxnPXRoaXMuZ2V0QXR0cnMoKTtmLmF0dHJzPXt9O2ZvcihhIGluIGcpYj1nW2FdLGUuX2lzRnVuY3Rpb24oYil8fGUuX2lzRWxlbWVudChiKXx8ZS5faXNPYmplY3QoYikmJmUuX2hhc01ldGhvZHMoYil8fChjPXRoaXNbYV0sZGVsZXRlIGdbYV0sZD1jP2MuY2FsbCh0aGlzKTpudWxsLGdbYV09YixkIT09YiYmKGYuYXR0cnNbYV09YikpO3JldHVybiBmLmNsYXNzTmFtZT10aGlzLmdldENsYXNzTmFtZSgpLGZ9LHRvSlNPTjpmdW5jdGlvbigpe3JldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLnRvT2JqZWN0KCkpfSxnZXRQYXJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnR9LGdldExheWVyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRQYXJlbnQoKTtyZXR1cm4gYT9hLmdldExheWVyKCk6bnVsbH0sZ2V0U3RhZ2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0Q2FjaGUocSx0aGlzLl9nZXRTdGFnZSl9LF9nZXRTdGFnZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0UGFyZW50KCk7cmV0dXJuIGE/YS5nZXRTdGFnZSgpOnZvaWQgMH0sZmlyZTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGM/dGhpcy5fZmlyZUFuZEJ1YmJsZShhLGJ8fHt9KTp0aGlzLl9maXJlKGEsYnx8e30pLHRoaXN9LGdldEFic29sdXRlVHJhbnNmb3JtOmZ1bmN0aW9uKGEpe3JldHVybiBhP3RoaXMuX2dldEFic29sdXRlVHJhbnNmb3JtKGEpOnRoaXMuX2dldENhY2hlKGIsdGhpcy5fZ2V0QWJzb2x1dGVUcmFuc2Zvcm0pfSxfZ2V0QWJzb2x1dGVUcmFuc2Zvcm06ZnVuY3Rpb24oYSl7dmFyIGIsYyxkPW5ldyBLaW5ldGljLlRyYW5zZm9ybTtyZXR1cm4gdGhpcy5fZWFjaEFuY2VzdG9yUmV2ZXJzZShmdW5jdGlvbihhKXtiPWEudHJhbnNmb3Jtc0VuYWJsZWQoKSxjPWEuZ2V0VHJhbnNmb3JtKCksXCJhbGxcIj09PWI/ZC5tdWx0aXBseShjKTpcInBvc2l0aW9uXCI9PT1iJiZkLnRyYW5zbGF0ZShhLngoKSxhLnkoKSl9LGEpLGR9LGdldFRyYW5zZm9ybTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRDYWNoZShyLHRoaXMuX2dldFRyYW5zZm9ybSl9LF9nZXRUcmFuc2Zvcm06ZnVuY3Rpb24oKXt2YXIgYT1uZXcgS2luZXRpYy5UcmFuc2Zvcm0sYj10aGlzLmdldFgoKSxjPXRoaXMuZ2V0WSgpLGQ9S2luZXRpYy5nZXRBbmdsZSh0aGlzLmdldFJvdGF0aW9uKCkpLGU9dGhpcy5nZXRTY2FsZVgoKSxmPXRoaXMuZ2V0U2NhbGVZKCksZz10aGlzLmdldFNrZXdYKCksaD10aGlzLmdldFNrZXdZKCksaT10aGlzLmdldE9mZnNldFgoKSxqPXRoaXMuZ2V0T2Zmc2V0WSgpO3JldHVybigwIT09Ynx8MCE9PWMpJiZhLnRyYW5zbGF0ZShiLGMpLDAhPT1kJiZhLnJvdGF0ZShkKSwoMCE9PWd8fDAhPT1oKSYmYS5za2V3KGcsaCksKDEhPT1lfHwxIT09ZikmJmEuc2NhbGUoZSxmKSwoMCE9PWl8fDAhPT1qKSYmYS50cmFuc2xhdGUoLTEqaSwtMSpqKSxhfSxjbG9uZTpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGc9dGhpcy5nZXRDbGFzc05hbWUoKSxoPUtpbmV0aWMuVXRpbC5jbG9uZU9iamVjdCh0aGlzLmF0dHJzKTtmb3IodmFyIGogaW4gdSl7dmFyIGs9dVtqXTtkZWxldGUgaFtrXX1mb3IoYiBpbiBhKWhbYl09YVtiXTt2YXIgbD1uZXcgS2luZXRpY1tnXShoKTtmb3IoYiBpbiB0aGlzLmV2ZW50TGlzdGVuZXJzKWZvcihjPXRoaXMuZXZlbnRMaXN0ZW5lcnNbYl0sZD1jLmxlbmd0aCxlPTA7ZD5lO2UrKylmPWNbZV0sZi5uYW1lLmluZGV4T2YoaSk8MCYmKGwuZXZlbnRMaXN0ZW5lcnNbYl18fChsLmV2ZW50TGlzdGVuZXJzW2JdPVtdKSxsLmV2ZW50TGlzdGVuZXJzW2JdLnB1c2goZikpO3JldHVybiBsfSx0b0RhdGFVUkw6ZnVuY3Rpb24oYSl7YT1hfHx7fTt2YXIgYj1hLm1pbWVUeXBlfHxudWxsLGM9YS5xdWFsaXR5fHxudWxsLGQ9dGhpcy5nZXRTdGFnZSgpLGU9YS54fHwwLGY9YS55fHwwLGc9bmV3IEtpbmV0aWMuU2NlbmVDYW52YXMoe3dpZHRoOmEud2lkdGh8fHRoaXMuZ2V0V2lkdGgoKXx8KGQ/ZC5nZXRXaWR0aCgpOjApLGhlaWdodDphLmhlaWdodHx8dGhpcy5nZXRIZWlnaHQoKXx8KGQ/ZC5nZXRIZWlnaHQoKTowKSxwaXhlbFJhdGlvOjF9KSxoPWcuZ2V0Q29udGV4dCgpO3JldHVybiBoLnNhdmUoKSwoZXx8ZikmJmgudHJhbnNsYXRlKC0xKmUsLTEqZiksdGhpcy5kcmF3U2NlbmUoZyksaC5yZXN0b3JlKCksZy50b0RhdGFVUkwoYixjKX0sdG9JbWFnZTpmdW5jdGlvbihhKXtLaW5ldGljLlV0aWwuX2dldEltYWdlKHRoaXMudG9EYXRhVVJMKGEpLGZ1bmN0aW9uKGIpe2EuY2FsbGJhY2soYil9KX0sc2V0U2l6ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5zZXRXaWR0aChhLndpZHRoKSx0aGlzLnNldEhlaWdodChhLmhlaWdodCksdGhpc30sZ2V0U2l6ZTpmdW5jdGlvbigpe3JldHVybnt3aWR0aDp0aGlzLmdldFdpZHRoKCksaGVpZ2h0OnRoaXMuZ2V0SGVpZ2h0KCl9fSxnZXRXaWR0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmF0dHJzLndpZHRofHwwfSxnZXRIZWlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hdHRycy5oZWlnaHR8fDB9LGdldENsYXNzTmFtZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNsYXNzTmFtZXx8dGhpcy5ub2RlVHlwZX0sZ2V0VHlwZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGVUeXBlfSxnZXREcmFnRGlzdGFuY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5hdHRycy5kcmFnRGlzdGFuY2U/dGhpcy5hdHRycy5kcmFnRGlzdGFuY2U6dGhpcy5wYXJlbnQ/dGhpcy5wYXJlbnQuZ2V0RHJhZ0Rpc3RhbmNlKCk6S2luZXRpYy5kcmFnRGlzdGFuY2V9LF9nZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubm9kZVR5cGU9PT1hP1t0aGlzXTpbXX0sX29mZjpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZT10aGlzLmV2ZW50TGlzdGVuZXJzW2FdO2ZvcihjPTA7YzxlLmxlbmd0aDtjKyspaWYoZD1lW2NdLm5hbWUsIShcImtpbmV0aWNcIj09PWQmJlwia2luZXRpY1wiIT09Ynx8YiYmZCE9PWIpKXtpZihlLnNwbGljZShjLDEpLDA9PT1lLmxlbmd0aCl7ZGVsZXRlIHRoaXMuZXZlbnRMaXN0ZW5lcnNbYV07YnJlYWt9Yy0tfX0sX2ZpcmVDaGFuZ2VFdmVudDpmdW5jdGlvbihhLGIsZCl7dGhpcy5fZmlyZShhK2Mse29sZFZhbDpiLG5ld1ZhbDpkfSl9LHNldElkOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0SWQoKTtyZXR1cm4gS2luZXRpYy5fcmVtb3ZlSWQoYiksS2luZXRpYy5fYWRkSWQodGhpcyxhKSx0aGlzLl9zZXRBdHRyKGgsYSksdGhpc1xyXG59LHNldE5hbWU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXROYW1lKCk7cmV0dXJuIEtpbmV0aWMuX3JlbW92ZU5hbWUoYix0aGlzLl9pZCksS2luZXRpYy5fYWRkTmFtZSh0aGlzLGEpLHRoaXMuX3NldEF0dHIobSxhKSx0aGlzfSxzZXRBdHRyOmZ1bmN0aW9uKCl7dmFyIGE9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSxiPWFbMF0sYz1hWzFdLGQ9bitLaW5ldGljLlV0aWwuX2NhcGl0YWxpemUoYiksZT10aGlzW2RdO3JldHVybiBLaW5ldGljLlV0aWwuX2lzRnVuY3Rpb24oZSk/ZS5jYWxsKHRoaXMsYyk6dGhpcy5fc2V0QXR0cihiLGMpLHRoaXN9LF9zZXRBdHRyOmZ1bmN0aW9uKGEsYil7dmFyIGM7dm9pZCAwIT09YiYmKGM9dGhpcy5hdHRyc1thXSx0aGlzLmF0dHJzW2FdPWIsdGhpcy5fZmlyZUNoYW5nZUV2ZW50KGEsYyxiKSl9LF9zZXRDb21wb25lbnRBdHRyOmZ1bmN0aW9uKGEsYixjKXt2YXIgZDt2b2lkIDAhPT1jJiYoZD10aGlzLmF0dHJzW2FdLGR8fCh0aGlzLmF0dHJzW2FdPXRoaXMuZ2V0QXR0cihhKSksdGhpcy5hdHRyc1thXVtiXT1jLHRoaXMuX2ZpcmVDaGFuZ2VFdmVudChhLGQsYykpfSxfZmlyZUFuZEJ1YmJsZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9ITA7YiYmdGhpcy5ub2RlVHlwZT09PW8mJihiLnRhcmdldD10aGlzKSxhPT09ayYmYyYmdGhpcy5faWQ9PT1jLl9pZD9kPSExOmE9PT1sJiZjJiZ0aGlzLl9pZD09PWMuX2lkJiYoZD0hMSksZCYmKHRoaXMuX2ZpcmUoYSxiKSxiJiYhYi5jYW5jZWxCdWJibGUmJnRoaXMucGFyZW50JiYoYyYmYy5wYXJlbnQ/dGhpcy5fZmlyZUFuZEJ1YmJsZS5jYWxsKHRoaXMucGFyZW50LGEsYixjLnBhcmVudCk6dGhpcy5fZmlyZUFuZEJ1YmJsZS5jYWxsKHRoaXMucGFyZW50LGEsYikpKX0sX2ZpcmU6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPXRoaXMuZXZlbnRMaXN0ZW5lcnNbYV07aWYoYi50eXBlPWEsZClmb3IoYz0wO2M8ZC5sZW5ndGg7YysrKWRbY10uaGFuZGxlci5jYWxsKHRoaXMsYil9LGRyYXc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kcmF3U2NlbmUoKSx0aGlzLmRyYXdIaXQoKSx0aGlzfX0pLEtpbmV0aWMuTm9kZS5jcmVhdGU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5fY3JlYXRlTm9kZShKU09OLnBhcnNlKGEpLGIpfSxLaW5ldGljLk5vZGUuX2NyZWF0ZU5vZGU9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZj1LaW5ldGljLk5vZGUucHJvdG90eXBlLmdldENsYXNzTmFtZS5jYWxsKGEpLGc9YS5jaGlsZHJlbjtpZihiJiYoYS5hdHRycy5jb250YWluZXI9YiksYz1uZXcgS2luZXRpY1tmXShhLmF0dHJzKSxnKWZvcihkPWcubGVuZ3RoLGU9MDtkPmU7ZSsrKWMuYWRkKHRoaXMuX2NyZWF0ZU5vZGUoZ1tlXSkpO3JldHVybiBjfSxLaW5ldGljLkZhY3RvcnkuYWRkT3ZlcmxvYWRlZEdldHRlclNldHRlcihLaW5ldGljLk5vZGUsXCJwb3NpdGlvblwiKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuTm9kZSxcInhcIiwwKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuTm9kZSxcInlcIiwwKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuTm9kZSxcIm9wYWNpdHlcIiwxKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyKEtpbmV0aWMuTm9kZSxcIm5hbWVcIiksS2luZXRpYy5GYWN0b3J5LmFkZE92ZXJsb2FkZWRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5Ob2RlLFwibmFtZVwiKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyKEtpbmV0aWMuTm9kZSxcImlkXCIpLEtpbmV0aWMuRmFjdG9yeS5hZGRPdmVybG9hZGVkR2V0dGVyU2V0dGVyKEtpbmV0aWMuTm9kZSxcImlkXCIpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5Ob2RlLFwicm90YXRpb25cIiwwKSxLaW5ldGljLkZhY3RvcnkuYWRkQ29tcG9uZW50c0dldHRlclNldHRlcihLaW5ldGljLk5vZGUsXCJzY2FsZVwiLFtcInhcIixcInlcIl0pLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5Ob2RlLFwic2NhbGVYXCIsMSksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLk5vZGUsXCJzY2FsZVlcIiwxKSxLaW5ldGljLkZhY3RvcnkuYWRkQ29tcG9uZW50c0dldHRlclNldHRlcihLaW5ldGljLk5vZGUsXCJza2V3XCIsW1wieFwiLFwieVwiXSksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLk5vZGUsXCJza2V3WFwiLDApLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5Ob2RlLFwic2tld1lcIiwwKSxLaW5ldGljLkZhY3RvcnkuYWRkQ29tcG9uZW50c0dldHRlclNldHRlcihLaW5ldGljLk5vZGUsXCJvZmZzZXRcIixbXCJ4XCIsXCJ5XCJdKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuTm9kZSxcIm9mZnNldFhcIiwwKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuTm9kZSxcIm9mZnNldFlcIiwwKSxLaW5ldGljLkZhY3RvcnkuYWRkU2V0dGVyKEtpbmV0aWMuTm9kZSxcImRyYWdEaXN0YW5jZVwiKSxLaW5ldGljLkZhY3RvcnkuYWRkT3ZlcmxvYWRlZEdldHRlclNldHRlcihLaW5ldGljLk5vZGUsXCJkcmFnRGlzdGFuY2VcIiksS2luZXRpYy5GYWN0b3J5LmFkZFNldHRlcihLaW5ldGljLk5vZGUsXCJ3aWR0aFwiLDApLEtpbmV0aWMuRmFjdG9yeS5hZGRPdmVybG9hZGVkR2V0dGVyU2V0dGVyKEtpbmV0aWMuTm9kZSxcIndpZHRoXCIpLEtpbmV0aWMuRmFjdG9yeS5hZGRTZXR0ZXIoS2luZXRpYy5Ob2RlLFwiaGVpZ2h0XCIsMCksS2luZXRpYy5GYWN0b3J5LmFkZE92ZXJsb2FkZWRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5Ob2RlLFwiaGVpZ2h0XCIpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5Ob2RlLFwibGlzdGVuaW5nXCIsXCJpbmhlcml0XCIpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5Ob2RlLFwiZmlsdGVyc1wiLHZvaWQgMCxmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fZmlsdGVyVXBUb0RhdGU9ITEsYX0pLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5Ob2RlLFwidmlzaWJsZVwiLFwiaW5oZXJpdFwiKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuTm9kZSxcInRyYW5zZm9ybXNFbmFibGVkXCIsXCJhbGxcIiksS2luZXRpYy5GYWN0b3J5LmFkZE92ZXJsb2FkZWRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5Ob2RlLFwic2l6ZVwiKSxLaW5ldGljLkZhY3RvcnkuYmFja0NvbXBhdChLaW5ldGljLk5vZGUse3JvdGF0ZURlZzpcInJvdGF0ZVwiLHNldFJvdGF0aW9uRGVnOlwic2V0Um90YXRpb25cIixnZXRSb3RhdGlvbkRlZzpcImdldFJvdGF0aW9uXCJ9KSxLaW5ldGljLkNvbGxlY3Rpb24ubWFwTWV0aG9kcyhLaW5ldGljLk5vZGUpfSgpLGZ1bmN0aW9uKCl7S2luZXRpYy5GaWx0ZXJzLkdyYXlzY2FsZT1mdW5jdGlvbihhKXt2YXIgYixjLGQ9YS5kYXRhLGU9ZC5sZW5ndGg7Zm9yKGI9MDtlPmI7Yis9NCljPS4zNCpkW2JdKy41KmRbYisxXSsuMTYqZFtiKzJdLGRbYl09YyxkW2IrMV09YyxkW2IrMl09Y319KCksZnVuY3Rpb24oKXtLaW5ldGljLkZpbHRlcnMuQnJpZ2h0ZW49ZnVuY3Rpb24oYSl7dmFyIGIsYz0yNTUqdGhpcy5icmlnaHRuZXNzKCksZD1hLmRhdGEsZT1kLmxlbmd0aDtmb3IoYj0wO2U+YjtiKz00KWRbYl0rPWMsZFtiKzFdKz1jLGRbYisyXSs9Y30sS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLk5vZGUsXCJicmlnaHRuZXNzXCIsMCxudWxsLEtpbmV0aWMuRmFjdG9yeS5hZnRlclNldEZpbHRlcil9KCksZnVuY3Rpb24oKXtLaW5ldGljLkZpbHRlcnMuSW52ZXJ0PWZ1bmN0aW9uKGEpe3ZhciBiLGM9YS5kYXRhLGQ9Yy5sZW5ndGg7Zm9yKGI9MDtkPmI7Yis9NCljW2JdPTI1NS1jW2JdLGNbYisxXT0yNTUtY1tiKzFdLGNbYisyXT0yNTUtY1tiKzJdfX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXt0aGlzLnI9MCx0aGlzLmc9MCx0aGlzLmI9MCx0aGlzLmE9MCx0aGlzLm5leHQ9bnVsbH1mdW5jdGlvbiBiKGIsZSl7dmFyIGYsZyxoLGksaixrLGwsbSxuLG8scCxxLHIscyx0LHUsdix3LHgseSx6LEEsQixDLEQ9Yi5kYXRhLEU9Yi53aWR0aCxGPWIuaGVpZ2h0LEc9ZStlKzEsSD1FLTEsST1GLTEsSj1lKzEsSz1KKihKKzEpLzIsTD1uZXcgYSxNPW51bGwsTj1MLE89bnVsbCxQPW51bGwsUT1jW2VdLFI9ZFtlXTtmb3IoaD0xO0c+aDtoKyspTj1OLm5leHQ9bmV3IGEsaD09SiYmKE09Tik7Zm9yKE4ubmV4dD1MLGw9az0wLGc9MDtGPmc7ZysrKXtmb3IodT12PXc9eD1tPW49bz1wPTAscT1KKih5PURba10pLHI9Siooej1EW2srMV0pLHM9SiooQT1EW2srMl0pLHQ9SiooQj1EW2srM10pLG0rPUsqeSxuKz1LKnosbys9SypBLHArPUsqQixOPUwsaD0wO0o+aDtoKyspTi5yPXksTi5nPXosTi5iPUEsTi5hPUIsTj1OLm5leHQ7Zm9yKGg9MTtKPmg7aCsrKWk9aysoKGg+SD9IOmgpPDwyKSxtKz0oTi5yPXk9RFtpXSkqKEM9Si1oKSxuKz0oTi5nPXo9RFtpKzFdKSpDLG8rPShOLmI9QT1EW2krMl0pKkMscCs9KE4uYT1CPURbaSszXSkqQyx1Kz15LHYrPXosdys9QSx4Kz1CLE49Ti5uZXh0O2ZvcihPPUwsUD1NLGY9MDtFPmY7ZisrKURbayszXT1CPXAqUT4+UiwwIT09Qj8oQj0yNTUvQixEW2tdPShtKlE+PlIpKkIsRFtrKzFdPShuKlE+PlIpKkIsRFtrKzJdPShvKlE+PlIpKkIpOkRba109RFtrKzFdPURbaysyXT0wLG0tPXEsbi09cixvLT1zLHAtPXQscS09Ty5yLHItPU8uZyxzLT1PLmIsdC09Ty5hLGk9bCsoKGk9ZitlKzEpPEg/aTpIKTw8Mix1Kz1PLnI9RFtpXSx2Kz1PLmc9RFtpKzFdLHcrPU8uYj1EW2krMl0seCs9Ty5hPURbaSszXSxtKz11LG4rPXYsbys9dyxwKz14LE89Ty5uZXh0LHErPXk9UC5yLHIrPXo9UC5nLHMrPUE9UC5iLHQrPUI9UC5hLHUtPXksdi09eix3LT1BLHgtPUIsUD1QLm5leHQsays9NDtsKz1FfWZvcihmPTA7RT5mO2YrKyl7Zm9yKHY9dz14PXU9bj1vPXA9bT0wLGs9Zjw8MixxPUoqKHk9RFtrXSkscj1KKih6PURbaysxXSkscz1KKihBPURbaysyXSksdD1KKihCPURbayszXSksbSs9Syp5LG4rPUsqeixvKz1LKkEscCs9SypCLE49TCxoPTA7Sj5oO2grKylOLnI9eSxOLmc9eixOLmI9QSxOLmE9QixOPU4ubmV4dDtmb3Ioaj1FLGg9MTtlPj1oO2grKylrPWorZjw8MixtKz0oTi5yPXk9RFtrXSkqKEM9Si1oKSxuKz0oTi5nPXo9RFtrKzFdKSpDLG8rPShOLmI9QT1EW2srMl0pKkMscCs9KE4uYT1CPURbayszXSkqQyx1Kz15LHYrPXosdys9QSx4Kz1CLE49Ti5uZXh0LEk+aCYmKGorPUUpO2ZvcihrPWYsTz1MLFA9TSxnPTA7Rj5nO2crKylpPWs8PDIsRFtpKzNdPUI9cCpRPj5SLEI+MD8oQj0yNTUvQixEW2ldPShtKlE+PlIpKkIsRFtpKzFdPShuKlE+PlIpKkIsRFtpKzJdPShvKlE+PlIpKkIpOkRbaV09RFtpKzFdPURbaSsyXT0wLG0tPXEsbi09cixvLT1zLHAtPXQscS09Ty5yLHItPU8uZyxzLT1PLmIsdC09Ty5hLGk9ZisoKGk9ZytKKTxJP2k6SSkqRTw8MixtKz11Kz1PLnI9RFtpXSxuKz12Kz1PLmc9RFtpKzFdLG8rPXcrPU8uYj1EW2krMl0scCs9eCs9Ty5hPURbaSszXSxPPU8ubmV4dCxxKz15PVAucixyKz16PVAuZyxzKz1BPVAuYix0Kz1CPVAuYSx1LT15LHYtPXosdy09QSx4LT1CLFA9UC5uZXh0LGsrPUV9fXZhciBjPVs1MTIsNTEyLDQ1Niw1MTIsMzI4LDQ1NiwzMzUsNTEyLDQwNSwzMjgsMjcxLDQ1NiwzODgsMzM1LDI5Miw1MTIsNDU0LDQwNSwzNjQsMzI4LDI5OCwyNzEsNDk2LDQ1Niw0MjAsMzg4LDM2MCwzMzUsMzEyLDI5MiwyNzMsNTEyLDQ4Miw0NTQsNDI4LDQwNSwzODMsMzY0LDM0NSwzMjgsMzEyLDI5OCwyODQsMjcxLDI1OSw0OTYsNDc1LDQ1Niw0MzcsNDIwLDQwNCwzODgsMzc0LDM2MCwzNDcsMzM1LDMyMywzMTIsMzAyLDI5MiwyODIsMjczLDI2NSw1MTIsNDk3LDQ4Miw0NjgsNDU0LDQ0MSw0MjgsNDE3LDQwNSwzOTQsMzgzLDM3MywzNjQsMzU0LDM0NSwzMzcsMzI4LDMyMCwzMTIsMzA1LDI5OCwyOTEsMjg0LDI3OCwyNzEsMjY1LDI1OSw1MDcsNDk2LDQ4NSw0NzUsNDY1LDQ1Niw0NDYsNDM3LDQyOCw0MjAsNDEyLDQwNCwzOTYsMzg4LDM4MSwzNzQsMzY3LDM2MCwzNTQsMzQ3LDM0MSwzMzUsMzI5LDMyMywzMTgsMzEyLDMwNywzMDIsMjk3LDI5MiwyODcsMjgyLDI3OCwyNzMsMjY5LDI2NSwyNjEsNTEyLDUwNSw0OTcsNDg5LDQ4Miw0NzUsNDY4LDQ2MSw0NTQsNDQ3LDQ0MSw0MzUsNDI4LDQyMiw0MTcsNDExLDQwNSwzOTksMzk0LDM4OSwzODMsMzc4LDM3MywzNjgsMzY0LDM1OSwzNTQsMzUwLDM0NSwzNDEsMzM3LDMzMiwzMjgsMzI0LDMyMCwzMTYsMzEyLDMwOSwzMDUsMzAxLDI5OCwyOTQsMjkxLDI4NywyODQsMjgxLDI3OCwyNzQsMjcxLDI2OCwyNjUsMjYyLDI1OSwyNTcsNTA3LDUwMSw0OTYsNDkxLDQ4NSw0ODAsNDc1LDQ3MCw0NjUsNDYwLDQ1Niw0NTEsNDQ2LDQ0Miw0MzcsNDMzLDQyOCw0MjQsNDIwLDQxNiw0MTIsNDA4LDQwNCw0MDAsMzk2LDM5MiwzODgsMzg1LDM4MSwzNzcsMzc0LDM3MCwzNjcsMzYzLDM2MCwzNTcsMzU0LDM1MCwzNDcsMzQ0LDM0MSwzMzgsMzM1LDMzMiwzMjksMzI2LDMyMywzMjAsMzE4LDMxNSwzMTIsMzEwLDMwNywzMDQsMzAyLDI5OSwyOTcsMjk0LDI5MiwyODksMjg3LDI4NSwyODIsMjgwLDI3OCwyNzUsMjczLDI3MSwyNjksMjY3LDI2NSwyNjMsMjYxLDI1OV0sZD1bOSwxMSwxMiwxMywxMywxNCwxNCwxNSwxNSwxNSwxNSwxNiwxNiwxNiwxNiwxNywxNywxNywxNywxNywxNywxNywxOCwxOCwxOCwxOCwxOCwxOCwxOCwxOCwxOCwxOSwxOSwxOSwxOSwxOSwxOSwxOSwxOSwxOSwxOSwxOSwxOSwxOSwxOSwyMCwyMCwyMCwyMCwyMCwyMCwyMCwyMCwyMCwyMCwyMCwyMCwyMCwyMCwyMCwyMCwyMCwyMCwyMSwyMSwyMSwyMSwyMSwyMSwyMSwyMSwyMSwyMSwyMSwyMSwyMSwyMSwyMSwyMSwyMSwyMSwyMSwyMSwyMSwyMSwyMSwyMSwyMSwyMSwyMSwyMiwyMiwyMiwyMiwyMiwyMiwyMiwyMiwyMiwyMiwyMiwyMiwyMiwyMiwyMiwyMiwyMiwyMiwyMiwyMiwyMiwyMiwyMiwyMiwyMiwyMiwyMiwyMiwyMiwyMiwyMiwyMiwyMiwyMiwyMiwyMiwyMiwyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyMywyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNF07S2luZXRpYy5GaWx0ZXJzLkJsdXI9ZnVuY3Rpb24oYSl7dmFyIGM9TWF0aC5yb3VuZCh0aGlzLmJsdXJSYWRpdXMoKSk7Yz4wJiZiKGEsYyl9LEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5Ob2RlLFwiYmx1clJhZGl1c1wiLDAsbnVsbCxLaW5ldGljLkZhY3RvcnkuYWZ0ZXJTZXRGaWx0ZXIpfSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGIsYyl7dmFyIGQ9NCooYyphLndpZHRoK2IpLGU9W107cmV0dXJuIGUucHVzaChhLmRhdGFbZCsrXSxhLmRhdGFbZCsrXSxhLmRhdGFbZCsrXSxhLmRhdGFbZCsrXSksZX1mdW5jdGlvbiBiKGEsYil7cmV0dXJuIE1hdGguc3FydChNYXRoLnBvdyhhWzBdLWJbMF0sMikrTWF0aC5wb3coYVsxXS1iWzFdLDIpK01hdGgucG93KGFbMl0tYlsyXSwyKSl9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGI9WzAsMCwwXSxjPTA7YzxhLmxlbmd0aDtjKyspYlswXSs9YVtjXVswXSxiWzFdKz1hW2NdWzFdLGJbMl0rPWFbY11bMl07cmV0dXJuIGJbMF0vPWEubGVuZ3RoLGJbMV0vPWEubGVuZ3RoLGJbMl0vPWEubGVuZ3RoLGJ9ZnVuY3Rpb24gZChkLGUpe3ZhciBmPWEoZCwwLDApLGc9YShkLGQud2lkdGgtMSwwKSxoPWEoZCwwLGQuaGVpZ2h0LTEpLGk9YShkLGQud2lkdGgtMSxkLmhlaWdodC0xKSxqPWV8fDEwO2lmKGIoZixnKTxqJiZiKGcsaSk8aiYmYihpLGgpPGomJmIoaCxmKTxqKXtmb3IodmFyIGs9YyhbZyxmLGksaF0pLGw9W10sbT0wO208ZC53aWR0aCpkLmhlaWdodDttKyspe3ZhciBuPWIoayxbZC5kYXRhWzQqbV0sZC5kYXRhWzQqbSsxXSxkLmRhdGFbNCptKzJdXSk7bFttXT1qPm4/MDoyNTV9cmV0dXJuIGx9fWZ1bmN0aW9uIGUoYSxiKXtmb3IodmFyIGM9MDtjPGEud2lkdGgqYS5oZWlnaHQ7YysrKWEuZGF0YVs0KmMrM109YltjXX1mdW5jdGlvbiBmKGEsYixjKXtmb3IodmFyIGQ9WzEsMSwxLDEsMCwxLDEsMSwxXSxlPU1hdGgucm91bmQoTWF0aC5zcXJ0KGQubGVuZ3RoKSksZj1NYXRoLmZsb29yKGUvMiksZz1bXSxoPTA7Yz5oO2grKylmb3IodmFyIGk9MDtiPmk7aSsrKXtmb3IodmFyIGo9aCpiK2ksaz0wLGw9MDtlPmw7bCsrKWZvcih2YXIgbT0wO2U+bTttKyspe3ZhciBuPWgrbC1mLG89aSttLWY7aWYobj49MCYmYz5uJiZvPj0wJiZiPm8pe3ZhciBwPW4qYitvLHE9ZFtsKmUrbV07ays9YVtwXSpxfX1nW2pdPTIwNDA9PT1rPzI1NTowfXJldHVybiBnfWZ1bmN0aW9uIGcoYSxiLGMpe2Zvcih2YXIgZD1bMSwxLDEsMSwxLDEsMSwxLDFdLGU9TWF0aC5yb3VuZChNYXRoLnNxcnQoZC5sZW5ndGgpKSxmPU1hdGguZmxvb3IoZS8yKSxnPVtdLGg9MDtjPmg7aCsrKWZvcih2YXIgaT0wO2I+aTtpKyspe2Zvcih2YXIgaj1oKmIraSxrPTAsbD0wO2U+bDtsKyspZm9yKHZhciBtPTA7ZT5tO20rKyl7dmFyIG49aCtsLWYsbz1pK20tZjtpZihuPj0wJiZjPm4mJm8+PTAmJmI+byl7dmFyIHA9bipiK28scT1kW2wqZSttXTtrKz1hW3BdKnF9fWdbal09az49MTAyMD8yNTU6MH1yZXR1cm4gZ31mdW5jdGlvbiBoKGEsYixjKXtmb3IodmFyIGQ9WzEvOSwxLzksMS85LDEvOSwxLzksMS85LDEvOSwxLzksMS85XSxlPU1hdGgucm91bmQoTWF0aC5zcXJ0KGQubGVuZ3RoKSksZj1NYXRoLmZsb29yKGUvMiksZz1bXSxoPTA7Yz5oO2grKylmb3IodmFyIGk9MDtiPmk7aSsrKXtmb3IodmFyIGo9aCpiK2ksaz0wLGw9MDtlPmw7bCsrKWZvcih2YXIgbT0wO2U+bTttKyspe3ZhciBuPWgrbC1mLG89aSttLWY7aWYobj49MCYmYz5uJiZvPj0wJiZiPm8pe3ZhciBwPW4qYitvLHE9ZFtsKmUrbV07ays9YVtwXSpxfX1nW2pdPWt9cmV0dXJuIGd9S2luZXRpYy5GaWx0ZXJzLk1hc2s9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy50aHJlc2hvbGQoKSxjPWQoYSxiKTtyZXR1cm4gYyYmKGM9ZihjLGEud2lkdGgsYS5oZWlnaHQpLGM9ZyhjLGEud2lkdGgsYS5oZWlnaHQpLGM9aChjLGEud2lkdGgsYS5oZWlnaHQpLGUoYSxjKSksYX0sS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLk5vZGUsXCJ0aHJlc2hvbGRcIiwwLG51bGwsS2luZXRpYy5GYWN0b3J5LmFmdGVyU2V0RmlsdGVyKX0oKSxmdW5jdGlvbigpe0tpbmV0aWMuRmlsdGVycy5SR0I9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkPWEuZGF0YSxlPWQubGVuZ3RoLGY9dGhpcy5yZWQoKSxnPXRoaXMuZ3JlZW4oKSxoPXRoaXMuYmx1ZSgpO2ZvcihiPTA7ZT5iO2IrPTQpYz0oLjM0KmRbYl0rLjUqZFtiKzFdKy4xNipkW2IrMl0pLzI1NSxkW2JdPWMqZixkW2IrMV09YypnLGRbYisyXT1jKmgsZFtiKzNdPWRbYiszXX0sS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLk5vZGUsXCJyZWRcIiwwLGZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl9maWx0ZXJVcFRvRGF0ZT0hMSxhPjI1NT8yNTU6MD5hPzA6TWF0aC5yb3VuZChhKX0pLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5Ob2RlLFwiZ3JlZW5cIiwwLGZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl9maWx0ZXJVcFRvRGF0ZT0hMSxhPjI1NT8yNTU6MD5hPzA6TWF0aC5yb3VuZChhKX0pLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5Ob2RlLFwiYmx1ZVwiLDAsS2luZXRpYy5WYWxpZGF0b3JzLlJHQkNvbXBvbmVudCxLaW5ldGljLkZhY3RvcnkuYWZ0ZXJTZXRGaWx0ZXIpfSgpLGZ1bmN0aW9uKCl7S2luZXRpYy5GaWx0ZXJzLkhTVj1mdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGc9YS5kYXRhLGg9Zy5sZW5ndGgsaT1NYXRoLnBvdygyLHRoaXMudmFsdWUoKSksaj1NYXRoLnBvdygyLHRoaXMuc2F0dXJhdGlvbigpKSxrPU1hdGguYWJzKHRoaXMuaHVlKCkrMzYwKSUzNjAsbD1pKmoqTWF0aC5jb3MoaypNYXRoLlBJLzE4MCksbT1pKmoqTWF0aC5zaW4oaypNYXRoLlBJLzE4MCksbj0uMjk5KmkrLjcwMSpsKy4xNjcqbSxvPS41ODcqaS0uNTg3KmwrLjMzKm0scD0uMTE0KmktLjExNCpsLS40OTcqbSxxPS4yOTkqaS0uMjk5KmwtLjMyOCptLHI9LjU4NyppKy40MTMqbCsuMDM1Km0scz0uMTE0KmktLjExNCpsKy4yOTMqbSx0PS4yOTkqaS0uMypsKzEuMjUqbSx1PS41ODcqaS0uNTg2KmwtMS4wNSptLHY9LjExNCppKy44ODYqbC0uMiptO2ZvcihiPTA7aD5iO2IrPTQpYz1nW2IrMF0sZD1nW2IrMV0sZT1nW2IrMl0sZj1nW2IrM10sZ1tiKzBdPW4qYytvKmQrcCplLGdbYisxXT1xKmMrcipkK3MqZSxnW2IrMl09dCpjK3UqZCt2KmUsZ1tiKzNdPWZ9LEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5Ob2RlLFwiaHVlXCIsMCxudWxsLEtpbmV0aWMuRmFjdG9yeS5hZnRlclNldEZpbHRlciksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLk5vZGUsXCJzYXR1cmF0aW9uXCIsMCxudWxsLEtpbmV0aWMuRmFjdG9yeS5hZnRlclNldEZpbHRlciksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLk5vZGUsXCJ2YWx1ZVwiLDAsbnVsbCxLaW5ldGljLkZhY3RvcnkuYWZ0ZXJTZXRGaWx0ZXIpfSgpLGZ1bmN0aW9uKCl7S2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLk5vZGUsXCJodWVcIiwwLG51bGwsS2luZXRpYy5GYWN0b3J5LmFmdGVyU2V0RmlsdGVyKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuTm9kZSxcInNhdHVyYXRpb25cIiwwLG51bGwsS2luZXRpYy5GYWN0b3J5LmFmdGVyU2V0RmlsdGVyKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuTm9kZSxcImx1bWluYW5jZVwiLDAsbnVsbCxLaW5ldGljLkZhY3RvcnkuYWZ0ZXJTZXRGaWx0ZXIpLEtpbmV0aWMuRmlsdGVycy5IU0w9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnPWEuZGF0YSxoPWcubGVuZ3RoLGk9MSxqPU1hdGgucG93KDIsdGhpcy5zYXR1cmF0aW9uKCkpLGs9TWF0aC5hYnModGhpcy5odWUoKSszNjApJTM2MCxsPTEyNyp0aGlzLmx1bWluYW5jZSgpLG09aSpqKk1hdGguY29zKGsqTWF0aC5QSS8xODApLG49aSpqKk1hdGguc2luKGsqTWF0aC5QSS8xODApLG89LjI5OSppKy43MDEqbSsuMTY3Km4scD0uNTg3KmktLjU4NyptKy4zMypuLHE9LjExNCppLS4xMTQqbS0uNDk3Km4scj0uMjk5KmktLjI5OSptLS4zMjgqbixzPS41ODcqaSsuNDEzKm0rLjAzNSpuLHQ9LjExNCppLS4xMTQqbSsuMjkzKm4sdT0uMjk5KmktLjMqbSsxLjI1Km4sdj0uNTg3KmktLjU4NiptLTEuMDUqbix3PS4xMTQqaSsuODg2Km0tLjIqbjtmb3IoYj0wO2g+YjtiKz00KWM9Z1tiKzBdLGQ9Z1tiKzFdLGU9Z1tiKzJdLGY9Z1tiKzNdLGdbYiswXT1vKmMrcCpkK3EqZStsLGdbYisxXT1yKmMrcypkK3QqZStsLGdbYisyXT11KmMrdipkK3cqZStsLGdbYiszXT1mfX0oKSxmdW5jdGlvbigpe0tpbmV0aWMuRmlsdGVycy5FbWJvc3M9ZnVuY3Rpb24oYSl7dmFyIGI9MTAqdGhpcy5lbWJvc3NTdHJlbmd0aCgpLGM9MjU1KnRoaXMuZW1ib3NzV2hpdGVMZXZlbCgpLGQ9dGhpcy5lbWJvc3NEaXJlY3Rpb24oKSxlPXRoaXMuZW1ib3NzQmxlbmQoKSxmPTAsZz0wLGg9YS5kYXRhLGk9YS53aWR0aCxqPWEuaGVpZ2h0LGs9NCppLGw9ajtzd2l0Y2goZCl7Y2FzZVwidG9wLWxlZnRcIjpmPS0xLGc9LTE7YnJlYWs7Y2FzZVwidG9wXCI6Zj0tMSxnPTA7YnJlYWs7Y2FzZVwidG9wLXJpZ2h0XCI6Zj0tMSxnPTE7YnJlYWs7Y2FzZVwicmlnaHRcIjpmPTAsZz0xO2JyZWFrO2Nhc2VcImJvdHRvbS1yaWdodFwiOmY9MSxnPTE7YnJlYWs7Y2FzZVwiYm90dG9tXCI6Zj0xLGc9MDticmVhaztjYXNlXCJib3R0b20tbGVmdFwiOmY9MSxnPS0xO2JyZWFrO2Nhc2VcImxlZnRcIjpmPTAsZz0tMX1kb3t2YXIgbT0obC0xKSprLG49ZjsxPmwrbiYmKG49MCksbCtuPmomJihuPTApO3ZhciBvPShsLTErbikqaSo0LHA9aTtkb3t2YXIgcT1tKzQqKHAtMSkscj1nOzE+cCtyJiYocj0wKSxwK3I+aSYmKHI9MCk7dmFyIHM9bys0KihwLTErciksdD1oW3FdLWhbc10sdT1oW3ErMV0taFtzKzFdLHY9aFtxKzJdLWhbcysyXSx3PXQseD13PjA/dzotdyx5PXU+MD91Oi11LHo9dj4wP3Y6LXY7aWYoeT54JiYodz11KSx6PngmJih3PXYpLHcqPWIsZSl7dmFyIEE9aFtxXSt3LEI9aFtxKzFdK3csQz1oW3ErMl0rdztoW3FdPUE+MjU1PzI1NTowPkE/MDpBLGhbcSsxXT1CPjI1NT8yNTU6MD5CPzA6QixoW3ErMl09Qz4yNTU/MjU1OjA+Qz8wOkN9ZWxzZXt2YXIgRD1jLXc7MD5EP0Q9MDpEPjI1NSYmKEQ9MjU1KSxoW3FdPWhbcSsxXT1oW3ErMl09RH19d2hpbGUoLS1wKX13aGlsZSgtLWwpfSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuTm9kZSxcImVtYm9zc1N0cmVuZ3RoXCIsLjUsbnVsbCxLaW5ldGljLkZhY3RvcnkuYWZ0ZXJTZXRGaWx0ZXIpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5Ob2RlLFwiZW1ib3NzV2hpdGVMZXZlbFwiLC41LG51bGwsS2luZXRpYy5GYWN0b3J5LmFmdGVyU2V0RmlsdGVyKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuTm9kZSxcImVtYm9zc0RpcmVjdGlvblwiLFwidG9wLWxlZnRcIixudWxsLEtpbmV0aWMuRmFjdG9yeS5hZnRlclNldEZpbHRlciksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLk5vZGUsXCJlbWJvc3NCbGVuZFwiLCExLG51bGwsS2luZXRpYy5GYWN0b3J5LmFmdGVyU2V0RmlsdGVyKX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxiLGMsZCxlKXt2YXIgZixnPWMtYixoPWUtZDtyZXR1cm4gMD09PWc/ZCtoLzI6MD09PWg/ZDooZj0oYS1iKS9nLGY9aCpmK2QpfUtpbmV0aWMuRmlsdGVycy5FbmhhbmNlPWZ1bmN0aW9uKGIpe3ZhciBjLGQsZSxmLGc9Yi5kYXRhLGg9Zy5sZW5ndGgsaT1nWzBdLGo9aSxrPWdbMV0sbD1rLG09Z1syXSxuPW0sbz1nWzNdLHA9byxxPXRoaXMuZW5oYW5jZSgpO2lmKDAhPT1xKXtmb3IoZj0wO2g+ZjtmKz00KWM9Z1tmKzBdLGk+Yz9pPWM6Yz5qJiYoaj1jKSxkPWdbZisxXSxrPmQ/az1kOmQ+bCYmKGw9ZCksZT1nW2YrMl0sbT5lP209ZTplPm4mJihuPWUpO2o9PT1pJiYoaj0yNTUsaT0wKSxsPT09ayYmKGw9MjU1LGs9MCksbj09PW0mJihuPTI1NSxtPTApLHA9PT1vJiYocD0yNTUsbz0wKTt2YXIgcixzLHQsdSx2LHcseCx5LHosQSxCLEM7Zm9yKHE+MD8ocz1qK3EqKDI1NS1qKSx0PWktcSooaS0wKSx2PWwrcSooMjU1LWwpLHc9ay1xKihrLTApLHk9bitxKigyNTUtbiksQz1tLXEqKG0tMCksQj1wK3EqKDI1NS1wKSx6PW8tcSooby0wKSk6KHI9LjUqKGoraSkscz1qK3EqKGotciksdD1pK3EqKGktciksdT0uNSoobCtrKSx2PWwrcSoobC11KSx3PWsrcSooay11KSx4PS41KihuK20pLHk9bitxKihuLXgpLEM9bStxKihtLXgpLEE9LjUqKHArbyksQj1wK3EqKHAtQSksej1vK3EqKG8tQSkpLGY9MDtoPmY7Zis9NClnW2YrMF09YShnW2YrMF0saSxqLHQscyksZ1tmKzFdPWEoZ1tmKzFdLGssbCx3LHYpLGdbZisyXT1hKGdbZisyXSxtLG4sQyx5KX19LEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5Ob2RlLFwiZW5oYW5jZVwiLDAsbnVsbCxLaW5ldGljLkZhY3RvcnkuYWZ0ZXJTZXRGaWx0ZXIpfSgpLGZ1bmN0aW9uKCl7S2luZXRpYy5GaWx0ZXJzLlBvc3Rlcml6ZT1mdW5jdGlvbihhKXt2YXIgYixjPU1hdGgucm91bmQoMjU0KnRoaXMubGV2ZWxzKCkpKzEsZD1hLmRhdGEsZT1kLmxlbmd0aCxmPTI1NS9jO2ZvcihiPTA7ZT5iO2IrPTEpZFtiXT1NYXRoLmZsb29yKGRbYl0vZikqZn0sS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLk5vZGUsXCJsZXZlbHNcIiwuNSxudWxsLEtpbmV0aWMuRmFjdG9yeS5hZnRlclNldEZpbHRlcil9KCksZnVuY3Rpb24oKXtLaW5ldGljLkZpbHRlcnMuTm9pc2U9ZnVuY3Rpb24oYSl7dmFyIGIsYz0yNTUqdGhpcy5ub2lzZSgpLGQ9YS5kYXRhLGU9ZC5sZW5ndGgsZj1jLzI7Zm9yKGI9MDtlPmI7Yis9NClkW2IrMF0rPWYtMipmKk1hdGgucmFuZG9tKCksZFtiKzFdKz1mLTIqZipNYXRoLnJhbmRvbSgpLGRbYisyXSs9Zi0yKmYqTWF0aC5yYW5kb20oKX0sS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLk5vZGUsXCJub2lzZVwiLC4yLG51bGwsS2luZXRpYy5GYWN0b3J5LmFmdGVyU2V0RmlsdGVyKX0oKSxmdW5jdGlvbigpe0tpbmV0aWMuRmlsdGVycy5QaXhlbGF0ZT1mdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaCxpLGosayxsLG0sbixvLHA9TWF0aC5jZWlsKHRoaXMucGl4ZWxTaXplKCkpLHE9YS53aWR0aCxyPWEuaGVpZ2h0LHM9TWF0aC5jZWlsKHEvcCksdD1NYXRoLmNlaWwoci9wKTtmb3IoYT1hLmRhdGEsbT0wO3M+bTttKz0xKWZvcihuPTA7dD5uO24rPTEpe2ZvcihlPTAsZj0wLGc9MCxoPTAsaT1tKnAsaj1pK3Asaz1uKnAsbD1rK3Asbz0wLGI9aTtqPmI7Yis9MSlpZighKGI+PXEpKWZvcihjPWs7bD5jO2MrPTEpYz49cnx8KGQ9NCoocSpjK2IpLGUrPWFbZCswXSxmKz1hW2QrMV0sZys9YVtkKzJdLGgrPWFbZCszXSxvKz0xKTtmb3IoZS89byxmLz1vLGcvPW8sYj1pO2o+YjtiKz0xKWlmKCEoYj49cSkpZm9yKGM9aztsPmM7Yys9MSljPj1yfHwoZD00KihxKmMrYiksYVtkKzBdPWUsYVtkKzFdPWYsYVtkKzJdPWcsYVtkKzNdPWgpfX0sS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLk5vZGUsXCJwaXhlbFNpemVcIiw4LG51bGwsS2luZXRpYy5GYWN0b3J5LmFmdGVyU2V0RmlsdGVyKX0oKSxmdW5jdGlvbigpe0tpbmV0aWMuRmlsdGVycy5UaHJlc2hvbGQ9ZnVuY3Rpb24oYSl7dmFyIGIsYz0yNTUqdGhpcy50aHJlc2hvbGQoKSxkPWEuZGF0YSxlPWQubGVuZ3RoO2ZvcihiPTA7ZT5iO2IrPTEpZFtiXT1kW2JdPGM/MDoyNTV9LEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5Ob2RlLFwidGhyZXNob2xkXCIsLjUsbnVsbCxLaW5ldGljLkZhY3RvcnkuYWZ0ZXJTZXRGaWx0ZXIpfSgpLGZ1bmN0aW9uKCl7S2luZXRpYy5GaWx0ZXJzLlNlcGlhPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoLGksaixrPWEuZGF0YSxsPWEud2lkdGgsbT1hLmhlaWdodCxuPTQqbDtkb3tiPShtLTEpKm4sYz1sO2RvIGQ9Yis0KihjLTEpLGU9a1tkXSxmPWtbZCsxXSxnPWtbZCsyXSxoPS4zOTMqZSsuNzY5KmYrLjE4OSpnLGk9LjM0OSplKy42ODYqZisuMTY4Kmcsaj0uMjcyKmUrLjUzNCpmKy4xMzEqZyxrW2RdPWg+MjU1PzI1NTpoLGtbZCsxXT1pPjI1NT8yNTU6aSxrW2QrMl09aj4yNTU/MjU1Omosa1tkKzNdPWtbZCszXTt3aGlsZSgtLWMpfXdoaWxlKC0tbSl9fSgpLGZ1bmN0aW9uKCl7S2luZXRpYy5GaWx0ZXJzLlNvbGFyaXplPWZ1bmN0aW9uKGEpe3ZhciBiPWEuZGF0YSxjPWEud2lkdGgsZD1hLmhlaWdodCxlPTQqYyxmPWQ7ZG97dmFyIGc9KGYtMSkqZSxoPWM7ZG97dmFyIGk9Zys0KihoLTEpLGo9YltpXSxrPWJbaSsxXSxsPWJbaSsyXTtqPjEyNyYmKGo9MjU1LWopLGs+MTI3JiYoaz0yNTUtayksbD4xMjcmJihsPTI1NS1sKSxiW2ldPWosYltpKzFdPWssYltpKzJdPWx9d2hpbGUoLS1oKX13aGlsZSgtLWYpfX0oKSxmdW5jdGlvbigpe3ZhciBhPWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuZGF0YSxpPWIuZGF0YSxqPWEud2lkdGgsaz1hLmhlaWdodCxsPWMucG9sYXJDZW50ZXJYfHxqLzIsbT1jLnBvbGFyQ2VudGVyWXx8ay8yLG49MCxvPTAscD0wLHE9MCxyPU1hdGguc3FydChsKmwrbSptKTtlPWotbCxmPWstbSxnPU1hdGguc3FydChlKmUrZipmKSxyPWc+cj9nOnI7dmFyIHMsdCx1LHYsdz1rLHg9aix5PTM2MC94Kk1hdGguUEkvMTgwO2Zvcih0PTA7eD50O3QrPTEpZm9yKHU9TWF0aC5zaW4odCp5KSx2PU1hdGguY29zKHQqeSkscz0wO3c+cztzKz0xKWU9TWF0aC5mbG9vcihsK3Iqcy93KnYpLGY9TWF0aC5mbG9vcihtK3Iqcy93KnUpLGQ9NCooZipqK2UpLG49aFtkKzBdLG89aFtkKzFdLHA9aFtkKzJdLHE9aFtkKzNdLGQ9NCoodCtzKmopLGlbZCswXT1uLGlbZCsxXT1vLGlbZCsyXT1wLGlbZCszXT1xfSxiPWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoLGksaj1hLmRhdGEsaz1iLmRhdGEsbD1hLndpZHRoLG09YS5oZWlnaHQsbj1jLnBvbGFyQ2VudGVyWHx8bC8yLG89Yy5wb2xhckNlbnRlcll8fG0vMixwPTAscT0wLHI9MCxzPTAsdD1NYXRoLnNxcnQobipuK28qbyk7ZT1sLW4sZj1tLW8saT1NYXRoLnNxcnQoZSplK2YqZiksdD1pPnQ/aTp0O3ZhciB1LHYsdyx4LHk9bSx6PWwsQT1jLnBvbGFyUm90YXRpb258fDA7Zm9yKGU9MDtsPmU7ZSs9MSlmb3IoZj0wO20+ZjtmKz0xKWc9ZS1uLGg9Zi1vLHU9TWF0aC5zcXJ0KGcqZytoKmgpKnkvdCx2PSgxODAqTWF0aC5hdGFuMihoLGcpL01hdGguUEkrMzYwK0EpJTM2MCx2PXYqei8zNjAsdz1NYXRoLmZsb29yKHYpLHg9TWF0aC5mbG9vcih1KSxkPTQqKHgqbCt3KSxwPWpbZCswXSxxPWpbZCsxXSxyPWpbZCsyXSxzPWpbZCszXSxkPTQqKGYqbCtlKSxrW2QrMF09cCxrW2QrMV09cSxrW2QrMl09cixrW2QrM109c30sYz1LaW5ldGljLlV0aWwuY3JlYXRlQ2FudmFzRWxlbWVudCgpO0tpbmV0aWMuRmlsdGVycy5LYWxlaWRvc2NvcGU9ZnVuY3Rpb24oZCl7dmFyIGUsZixnLGgsaSxqLGssbCxtLG4sbz1kLndpZHRoLHA9ZC5oZWlnaHQscT1NYXRoLnJvdW5kKHRoaXMua2FsZWlkb3Njb3BlUG93ZXIoKSkscj1NYXRoLnJvdW5kKHRoaXMua2FsZWlkb3Njb3BlQW5nbGUoKSkscz1NYXRoLmZsb29yKG8qKHIlMzYwKS8zNjApO2lmKCEoMT5xKSl7Yy53aWR0aD1vLGMuaGVpZ2h0PXA7dmFyIHQ9Yy5nZXRDb250ZXh0KFwiMmRcIikuZ2V0SW1hZ2VEYXRhKDAsMCxvLHApO2EoZCx0LHtwb2xhckNlbnRlclg6by8yLHBvbGFyQ2VudGVyWTpwLzJ9KTtmb3IodmFyIHU9by9NYXRoLnBvdygyLHEpOzg+PXU7KXU9Mip1LHEtPTE7dT1NYXRoLmNlaWwodSk7dmFyIHY9dSx3PTAseD12LHk9MTtmb3Iocyt1Pm8mJih3PXYseD0wLHk9LTEpLGY9MDtwPmY7Zis9MSlmb3IoZT13O2UhPT14O2UrPXkpZz1NYXRoLnJvdW5kKGUrcyklbyxtPTQqKG8qZitnKSxpPXQuZGF0YVttKzBdLGo9dC5kYXRhW20rMV0saz10LmRhdGFbbSsyXSxsPXQuZGF0YVttKzNdLG49NCoobypmK2UpLHQuZGF0YVtuKzBdPWksdC5kYXRhW24rMV09aix0LmRhdGFbbisyXT1rLHQuZGF0YVtuKzNdPWw7Zm9yKGY9MDtwPmY7Zis9MSlmb3Iodj1NYXRoLmZsb29yKHUpLGg9MDtxPmg7aCs9MSl7Zm9yKGU9MDt2KzE+ZTtlKz0xKW09NCoobypmK2UpLGk9dC5kYXRhW20rMF0saj10LmRhdGFbbSsxXSxrPXQuZGF0YVttKzJdLGw9dC5kYXRhW20rM10sbj00KihvKmYrMip2LWUtMSksdC5kYXRhW24rMF09aSx0LmRhdGFbbisxXT1qLHQuZGF0YVtuKzJdPWssdC5kYXRhW24rM109bDt2Kj0yfWIodCxkLHtwb2xhclJvdGF0aW9uOjB9KX19LEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5Ob2RlLFwia2FsZWlkb3Njb3BlUG93ZXJcIiwyLG51bGwsS2luZXRpYy5GYWN0b3J5LmFmdGVyU2V0RmlsdGVyKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuTm9kZSxcImthbGVpZG9zY29wZUFuZ2xlXCIsMCxudWxsLEtpbmV0aWMuRmFjdG9yeS5hZnRlclNldEZpbHRlcil9KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe0tpbmV0aWMucm9vdC5zZXRUaW1lb3V0KGEsMWUzLzYwKX1mdW5jdGlvbiBiKCl7cmV0dXJuIGUuYXBwbHkoS2luZXRpYy5yb290LGFyZ3VtZW50cyl9dmFyIGM9NTAwLGQ9ZnVuY3Rpb24oKXtyZXR1cm4gS2luZXRpYy5yb290LnBlcmZvcm1hbmNlJiZLaW5ldGljLnJvb3QucGVyZm9ybWFuY2Uubm93P2Z1bmN0aW9uKCl7cmV0dXJuIEtpbmV0aWMucm9vdC5wZXJmb3JtYW5jZS5ub3coKX06ZnVuY3Rpb24oKXtyZXR1cm4obmV3IERhdGUpLmdldFRpbWUoKX19KCksZT1mdW5jdGlvbigpe3JldHVybiBLaW5ldGljLnJvb3QucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxLaW5ldGljLnJvb3Qud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxLaW5ldGljLnJvb3QubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxLaW5ldGljLnJvb3Qub1JlcXVlc3RBbmltYXRpb25GcmFtZXx8S2luZXRpYy5yb290Lm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxhfSgpO0tpbmV0aWMuQW5pbWF0aW9uPWZ1bmN0aW9uKGEsYil7dmFyIGM9S2luZXRpYy5BbmltYXRpb247dGhpcy5mdW5jPWEsdGhpcy5zZXRMYXllcnMoYiksdGhpcy5pZD1jLmFuaW1JZENvdW50ZXIrKyx0aGlzLmZyYW1lPXt0aW1lOjAsdGltZURpZmY6MCxsYXN0VGltZTpkKCl9fSxLaW5ldGljLkFuaW1hdGlvbi5wcm90b3R5cGU9e3NldExheWVyczpmdW5jdGlvbihhKXt2YXIgYj1bXTtiPWE/YS5sZW5ndGg+MD9hOlthXTpbXSx0aGlzLmxheWVycz1ifSxnZXRMYXllcnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sYXllcnN9LGFkZExheWVyOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZD10aGlzLmxheWVycztpZihkKXtmb3IoYj1kLmxlbmd0aCxjPTA7Yj5jO2MrKylpZihkW2NdLl9pZD09PWEuX2lkKXJldHVybiExfWVsc2UgdGhpcy5sYXllcnM9W107cmV0dXJuIHRoaXMubGF5ZXJzLnB1c2goYSksITB9LGlzUnVubmluZzpmdW5jdGlvbigpe3ZhciBhLGI9S2luZXRpYy5BbmltYXRpb24sYz1iLmFuaW1hdGlvbnMsZD1jLmxlbmd0aDtmb3IoYT0wO2Q+YTthKyspaWYoY1thXS5pZD09PXRoaXMuaWQpcmV0dXJuITA7cmV0dXJuITF9LHN0YXJ0OmZ1bmN0aW9uKCl7dmFyIGE9S2luZXRpYy5BbmltYXRpb247dGhpcy5zdG9wKCksdGhpcy5mcmFtZS50aW1lRGlmZj0wLHRoaXMuZnJhbWUubGFzdFRpbWU9ZCgpLGEuX2FkZEFuaW1hdGlvbih0aGlzKX0sc3RvcDpmdW5jdGlvbigpe0tpbmV0aWMuQW5pbWF0aW9uLl9yZW1vdmVBbmltYXRpb24odGhpcyl9LF91cGRhdGVGcmFtZU9iamVjdDpmdW5jdGlvbihhKXt0aGlzLmZyYW1lLnRpbWVEaWZmPWEtdGhpcy5mcmFtZS5sYXN0VGltZSx0aGlzLmZyYW1lLmxhc3RUaW1lPWEsdGhpcy5mcmFtZS50aW1lKz10aGlzLmZyYW1lLnRpbWVEaWZmLHRoaXMuZnJhbWUuZnJhbWVSYXRlPTFlMy90aGlzLmZyYW1lLnRpbWVEaWZmfX0sS2luZXRpYy5BbmltYXRpb24uYW5pbWF0aW9ucz1bXSxLaW5ldGljLkFuaW1hdGlvbi5hbmltSWRDb3VudGVyPTAsS2luZXRpYy5BbmltYXRpb24uYW5pbVJ1bm5pbmc9ITEsS2luZXRpYy5BbmltYXRpb24uX2FkZEFuaW1hdGlvbj1mdW5jdGlvbihhKXt0aGlzLmFuaW1hdGlvbnMucHVzaChhKSx0aGlzLl9oYW5kbGVBbmltYXRpb24oKX0sS2luZXRpYy5BbmltYXRpb24uX3JlbW92ZUFuaW1hdGlvbj1mdW5jdGlvbihhKXt2YXIgYixjPWEuaWQsZD10aGlzLmFuaW1hdGlvbnMsZT1kLmxlbmd0aDtmb3IoYj0wO2U+YjtiKyspaWYoZFtiXS5pZD09PWMpe3RoaXMuYW5pbWF0aW9ucy5zcGxpY2UoYiwxKTticmVha319LEtpbmV0aWMuQW5pbWF0aW9uLl9ydW5GcmFtZXM9ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZSxmLGcsaCxpLGo9e30saz10aGlzLmFuaW1hdGlvbnM7Zm9yKGU9MDtlPGsubGVuZ3RoO2UrKyl7Zm9yKGE9a1tlXSxiPWEubGF5ZXJzLGM9YS5mdW5jLGEuX3VwZGF0ZUZyYW1lT2JqZWN0KGQoKSksZz1iLmxlbmd0aCxmPTA7Zz5mO2YrKyloPWJbZl0sdm9pZCAwIT09aC5faWQmJihqW2guX2lkXT1oKTtjJiZjLmNhbGwoYSxhLmZyYW1lKX1mb3IoaSBpbiBqKWpbaV0uZHJhdygpfSxLaW5ldGljLkFuaW1hdGlvbi5fYW5pbWF0aW9uTG9vcD1mdW5jdGlvbigpe3ZhciBhPUtpbmV0aWMuQW5pbWF0aW9uO2EuYW5pbWF0aW9ucy5sZW5ndGg/KGIoYS5fYW5pbWF0aW9uTG9vcCksYS5fcnVuRnJhbWVzKCkpOmEuYW5pbVJ1bm5pbmc9ITF9LEtpbmV0aWMuQW5pbWF0aW9uLl9oYW5kbGVBbmltYXRpb249ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3RoaXMuYW5pbVJ1bm5pbmd8fCh0aGlzLmFuaW1SdW5uaW5nPSEwLGEuX2FuaW1hdGlvbkxvb3AoKSl9O3ZhciBmPUtpbmV0aWMuTm9kZS5wcm90b3R5cGUubW92ZVRvO0tpbmV0aWMuTm9kZS5wcm90b3R5cGUubW92ZVRvPWZ1bmN0aW9uKGEpe2YuY2FsbCh0aGlzLGEpfSxLaW5ldGljLkxheWVyLnByb3RvdHlwZS5iYXRjaERyYXc9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9S2luZXRpYy5BbmltYXRpb247dGhpcy5iYXRjaEFuaW18fCh0aGlzLmJhdGNoQW5pbT1uZXcgYihmdW5jdGlvbigpe2EubGFzdEJhdGNoRHJhd1RpbWUmJmQoKS1hLmxhc3RCYXRjaERyYXdUaW1lPmMmJmEuYmF0Y2hBbmltLnN0b3AoKX0sdGhpcykpLHRoaXMubGFzdEJhdGNoRHJhd1RpbWU9ZCgpLHRoaXMuYmF0Y2hBbmltLmlzUnVubmluZygpfHwodGhpcy5kcmF3KCksdGhpcy5iYXRjaEFuaW0uc3RhcnQoKSl9LEtpbmV0aWMuU3RhZ2UucHJvdG90eXBlLmJhdGNoRHJhdz1mdW5jdGlvbigpe3RoaXMuZ2V0Q2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uKGEpe2EuYmF0Y2hEcmF3KCl9KX19KCgxLGV2YWwpKFwidGhpc1wiKSksZnVuY3Rpb24oKXt2YXIgYT17bm9kZToxLGR1cmF0aW9uOjEsZWFzaW5nOjEsb25GaW5pc2g6MSx5b3lvOjF9LGI9MSxjPTIsZD0zLGU9MDtLaW5ldGljLlR3ZWVuPWZ1bmN0aW9uKGIpe3ZhciBjLGQ9dGhpcyxnPWIubm9kZSxoPWcuX2lkLGk9Yi5kdXJhdGlvbnx8MSxqPWIuZWFzaW5nfHxLaW5ldGljLkVhc2luZ3MuTGluZWFyLGs9ISFiLnlveW87dGhpcy5ub2RlPWcsdGhpcy5faWQ9ZSsrLHRoaXMuYW5pbT1uZXcgS2luZXRpYy5BbmltYXRpb24oZnVuY3Rpb24oKXtkLnR3ZWVuLm9uRW50ZXJGcmFtZSgpfSxnLmdldExheWVyKCkpLHRoaXMudHdlZW49bmV3IGYoYyxmdW5jdGlvbihhKXtkLl90d2VlbkZ1bmMoYSl9LGosMCwxLDFlMyppLGspLHRoaXMuX2FkZExpc3RlbmVycygpLEtpbmV0aWMuVHdlZW4uYXR0cnNbaF18fChLaW5ldGljLlR3ZWVuLmF0dHJzW2hdPXt9KSxLaW5ldGljLlR3ZWVuLmF0dHJzW2hdW3RoaXMuX2lkXXx8KEtpbmV0aWMuVHdlZW4uYXR0cnNbaF1bdGhpcy5faWRdPXt9KSxLaW5ldGljLlR3ZWVuLnR3ZWVuc1toXXx8KEtpbmV0aWMuVHdlZW4udHdlZW5zW2hdPXt9KTtmb3IoYyBpbiBiKXZvaWQgMD09PWFbY10mJnRoaXMuX2FkZEF0dHIoYyxiW2NdKTt0aGlzLnJlc2V0KCksdGhpcy5vbkZpbmlzaD1iLm9uRmluaXNoLHRoaXMub25SZXNldD1iLm9uUmVzZXR9LEtpbmV0aWMuVHdlZW4uYXR0cnM9e30sS2luZXRpYy5Ud2Vlbi50d2VlbnM9e30sS2luZXRpYy5Ud2Vlbi5wcm90b3R5cGU9e19hZGRBdHRyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGYsZyxoPXRoaXMubm9kZSxpPWguX2lkO2lmKGU9S2luZXRpYy5Ud2Vlbi50d2VlbnNbaV1bYV0sZSYmZGVsZXRlIEtpbmV0aWMuVHdlZW4uYXR0cnNbaV1bZV1bYV0sYz1oLmdldEF0dHIoYSksS2luZXRpYy5VdGlsLl9pc0FycmF5KGIpKWZvcihkPVtdLGc9Yi5sZW5ndGgsZj0wO2c+ZjtmKyspZC5wdXNoKGJbZl0tY1tmXSk7ZWxzZSBkPWItYztLaW5ldGljLlR3ZWVuLmF0dHJzW2ldW3RoaXMuX2lkXVthXT17c3RhcnQ6YyxkaWZmOmR9LEtpbmV0aWMuVHdlZW4udHdlZW5zW2ldW2FdPXRoaXMuX2lkfSxfdHdlZW5GdW5jOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoLGk9dGhpcy5ub2RlLGo9S2luZXRpYy5Ud2Vlbi5hdHRyc1tpLl9pZF1bdGhpcy5faWRdO2ZvcihiIGluIGope2lmKGM9altiXSxkPWMuc3RhcnQsZT1jLmRpZmYsS2luZXRpYy5VdGlsLl9pc0FycmF5KGQpKWZvcihmPVtdLGg9ZC5sZW5ndGgsZz0wO2g+ZztnKyspZi5wdXNoKGRbZ10rZVtnXSphKTtlbHNlIGY9ZCtlKmE7aS5zZXRBdHRyKGIsZil9fSxfYWRkTGlzdGVuZXJzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpczt0aGlzLnR3ZWVuLm9uUGxheT1mdW5jdGlvbigpe2EuYW5pbS5zdGFydCgpfSx0aGlzLnR3ZWVuLm9uUmV2ZXJzZT1mdW5jdGlvbigpe2EuYW5pbS5zdGFydCgpfSx0aGlzLnR3ZWVuLm9uUGF1c2U9ZnVuY3Rpb24oKXthLmFuaW0uc3RvcCgpfSx0aGlzLnR3ZWVuLm9uRmluaXNoPWZ1bmN0aW9uKCl7YS5vbkZpbmlzaCYmYS5vbkZpbmlzaCgpfSx0aGlzLnR3ZWVuLm9uUmVzZXQ9ZnVuY3Rpb24oKXthLm9uUmVzZXQmJmEub25SZXNldCgpfX0scGxheTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnR3ZWVuLnBsYXkoKSx0aGlzfSxyZXZlcnNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHdlZW4ucmV2ZXJzZSgpLHRoaXN9LHJlc2V0OmZ1bmN0aW9uKCl7dGhpcy5ub2RlO3JldHVybiB0aGlzLnR3ZWVuLnJlc2V0KCksdGhpc30sc2VlazpmdW5jdGlvbihhKXt0aGlzLm5vZGU7cmV0dXJuIHRoaXMudHdlZW4uc2VlaygxZTMqYSksdGhpc30scGF1c2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50d2Vlbi5wYXVzZSgpLHRoaXN9LGZpbmlzaDpmdW5jdGlvbigpe3RoaXMubm9kZTtyZXR1cm4gdGhpcy50d2Vlbi5maW5pc2goKSx0aGlzfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGEsYj10aGlzLm5vZGUuX2lkLGM9dGhpcy5faWQsZD1LaW5ldGljLlR3ZWVuLnR3ZWVuc1tiXTt0aGlzLnBhdXNlKCk7Zm9yKGEgaW4gZClkZWxldGUgS2luZXRpYy5Ud2Vlbi50d2VlbnNbYl1bYV07ZGVsZXRlIEtpbmV0aWMuVHdlZW4uYXR0cnNbYl1bY119fTt2YXIgZj1mdW5jdGlvbihhLGIsYyxkLGUsZixnKXt0aGlzLnByb3A9YSx0aGlzLnByb3BGdW5jPWIsdGhpcy5iZWdpbj1kLHRoaXMuX3Bvcz1kLHRoaXMuZHVyYXRpb249Zix0aGlzLl9jaGFuZ2U9MCx0aGlzLnByZXZQb3M9MCx0aGlzLnlveW89Zyx0aGlzLl90aW1lPTAsdGhpcy5fcG9zaXRpb249MCx0aGlzLl9zdGFydFRpbWU9MCx0aGlzLl9maW5pc2g9MCx0aGlzLmZ1bmM9Yyx0aGlzLl9jaGFuZ2U9ZS10aGlzLmJlZ2luLHRoaXMucGF1c2UoKX07Zi5wcm90b3R5cGU9e2ZpcmU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpc1thXTtiJiZiKCl9LHNldFRpbWU6ZnVuY3Rpb24oYSl7YT50aGlzLmR1cmF0aW9uP3RoaXMueW95bz8odGhpcy5fdGltZT10aGlzLmR1cmF0aW9uLHRoaXMucmV2ZXJzZSgpKTp0aGlzLmZpbmlzaCgpOjA+YT90aGlzLnlveW8/KHRoaXMuX3RpbWU9MCx0aGlzLnBsYXkoKSk6dGhpcy5yZXNldCgpOih0aGlzLl90aW1lPWEsdGhpcy51cGRhdGUoKSl9LGdldFRpbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGltZX0sc2V0UG9zaXRpb246ZnVuY3Rpb24oYSl7dGhpcy5wcmV2UG9zPXRoaXMuX3Bvcyx0aGlzLnByb3BGdW5jKGEpLHRoaXMuX3Bvcz1hfSxnZXRQb3NpdGlvbjpmdW5jdGlvbihhKXtyZXR1cm4gdm9pZCAwPT09YSYmKGE9dGhpcy5fdGltZSksdGhpcy5mdW5jKGEsdGhpcy5iZWdpbix0aGlzLl9jaGFuZ2UsdGhpcy5kdXJhdGlvbil9LHBsYXk6ZnVuY3Rpb24oKXt0aGlzLnN0YXRlPWMsdGhpcy5fc3RhcnRUaW1lPXRoaXMuZ2V0VGltZXIoKS10aGlzLl90aW1lLHRoaXMub25FbnRlckZyYW1lKCksdGhpcy5maXJlKFwib25QbGF5XCIpfSxyZXZlcnNlOmZ1bmN0aW9uKCl7dGhpcy5zdGF0ZT1kLHRoaXMuX3RpbWU9dGhpcy5kdXJhdGlvbi10aGlzLl90aW1lLHRoaXMuX3N0YXJ0VGltZT10aGlzLmdldFRpbWVyKCktdGhpcy5fdGltZSx0aGlzLm9uRW50ZXJGcmFtZSgpLHRoaXMuZmlyZShcIm9uUmV2ZXJzZVwiKX0sc2VlazpmdW5jdGlvbihhKXt0aGlzLnBhdXNlKCksdGhpcy5fdGltZT1hLHRoaXMudXBkYXRlKCksdGhpcy5maXJlKFwib25TZWVrXCIpfSxyZXNldDpmdW5jdGlvbigpe3RoaXMucGF1c2UoKSx0aGlzLl90aW1lPTAsdGhpcy51cGRhdGUoKSx0aGlzLmZpcmUoXCJvblJlc2V0XCIpfSxmaW5pc2g6ZnVuY3Rpb24oKXt0aGlzLnBhdXNlKCksdGhpcy5fdGltZT10aGlzLmR1cmF0aW9uLHRoaXMudXBkYXRlKCksdGhpcy5maXJlKFwib25GaW5pc2hcIil9LHVwZGF0ZTpmdW5jdGlvbigpe3RoaXMuc2V0UG9zaXRpb24odGhpcy5nZXRQb3NpdGlvbih0aGlzLl90aW1lKSl9LG9uRW50ZXJGcmFtZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0VGltZXIoKS10aGlzLl9zdGFydFRpbWU7dGhpcy5zdGF0ZT09PWM/dGhpcy5zZXRUaW1lKGEpOnRoaXMuc3RhdGU9PT1kJiZ0aGlzLnNldFRpbWUodGhpcy5kdXJhdGlvbi1hKX0scGF1c2U6ZnVuY3Rpb24oKXt0aGlzLnN0YXRlPWIsdGhpcy5maXJlKFwib25QYXVzZVwiKX0sZ2V0VGltZXI6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IERhdGUpLmdldFRpbWUoKX19LEtpbmV0aWMuRWFzaW5ncz17QmFja0Vhc2VJbjpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT0xLjcwMTU4O3JldHVybiBjKihhLz1kKSphKigoZSsxKSphLWUpK2J9LEJhY2tFYXNlT3V0OmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPTEuNzAxNTg7cmV0dXJuIGMqKChhPWEvZC0xKSphKigoZSsxKSphK2UpKzEpK2J9LEJhY2tFYXNlSW5PdXQ6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9MS43MDE1ODtyZXR1cm4oYS89ZC8yKTwxP2MvMiphKmEqKCgoZSo9MS41MjUpKzEpKmEtZSkrYjpjLzIqKChhLT0yKSphKigoKGUqPTEuNTI1KSsxKSphK2UpKzIpK2J9LEVsYXN0aWNFYXNlSW46ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3ZhciBnPTA7cmV0dXJuIDA9PT1hP2I6MT09KGEvPWQpP2IrYzooZnx8KGY9LjMqZCksIWV8fGU8TWF0aC5hYnMoYyk/KGU9YyxnPWYvNCk6Zz1mLygyKk1hdGguUEkpKk1hdGguYXNpbihjL2UpLC0oZSpNYXRoLnBvdygyLDEwKihhLT0xKSkqTWF0aC5zaW4oMiooYSpkLWcpKk1hdGguUEkvZikpK2IpfSxFbGFzdGljRWFzZU91dDpmdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGc9MDtyZXR1cm4gMD09PWE/YjoxPT0oYS89ZCk/YitjOihmfHwoZj0uMypkKSwhZXx8ZTxNYXRoLmFicyhjKT8oZT1jLGc9Zi80KTpnPWYvKDIqTWF0aC5QSSkqTWF0aC5hc2luKGMvZSksZSpNYXRoLnBvdygyLC0xMCphKSpNYXRoLnNpbigyKihhKmQtZykqTWF0aC5QSS9mKStjK2IpfSxFbGFzdGljRWFzZUluT3V0OmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2YXIgZz0wO3JldHVybiAwPT09YT9iOjI9PShhLz1kLzIpP2IrYzooZnx8KGY9LjMqZCoxLjUpLCFlfHxlPE1hdGguYWJzKGMpPyhlPWMsZz1mLzQpOmc9Zi8oMipNYXRoLlBJKSpNYXRoLmFzaW4oYy9lKSwxPmE/LS41KmUqTWF0aC5wb3coMiwxMCooYS09MSkpKk1hdGguc2luKDIqKGEqZC1nKSpNYXRoLlBJL2YpK2I6ZSpNYXRoLnBvdygyLC0xMCooYS09MSkpKk1hdGguc2luKDIqKGEqZC1nKSpNYXRoLlBJL2YpKi41K2MrYil9LEJvdW5jZUVhc2VPdXQ6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuKGEvPWQpPDEvMi43NT83LjU2MjUqYyphKmErYjoyLzIuNzU+YT9jKig3LjU2MjUqKGEtPTEuNS8yLjc1KSphKy43NSkrYjoyLjUvMi43NT5hP2MqKDcuNTYyNSooYS09Mi4yNS8yLjc1KSphKy45Mzc1KStiOmMqKDcuNTYyNSooYS09Mi42MjUvMi43NSkqYSsuOTg0Mzc1KStifSxCb3VuY2VFYXNlSW46ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIGMtS2luZXRpYy5FYXNpbmdzLkJvdW5jZUVhc2VPdXQoZC1hLDAsYyxkKStifSxCb3VuY2VFYXNlSW5PdXQ6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIGQvMj5hPy41KktpbmV0aWMuRWFzaW5ncy5Cb3VuY2VFYXNlSW4oMiphLDAsYyxkKStiOi41KktpbmV0aWMuRWFzaW5ncy5Cb3VuY2VFYXNlT3V0KDIqYS1kLDAsYyxkKSsuNSpjK2J9LEVhc2VJbjpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gYyooYS89ZCkqYStifSxFYXNlT3V0OmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybi1jKihhLz1kKSooYS0yKStifSxFYXNlSW5PdXQ6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuKGEvPWQvMik8MT9jLzIqYSphK2I6LWMvMiooLS1hKihhLTIpLTEpK2J9LFN0cm9uZ0Vhc2VJbjpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gYyooYS89ZCkqYSphKmEqYStifSxTdHJvbmdFYXNlT3V0OmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBjKigoYT1hL2QtMSkqYSphKmEqYSsxKStifSxTdHJvbmdFYXNlSW5PdXQ6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuKGEvPWQvMik8MT9jLzIqYSphKmEqYSphK2I6Yy8yKigoYS09MikqYSphKmEqYSsyKStifSxMaW5lYXI6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIGMqYS9kK2J9fX0oKSxmdW5jdGlvbigpe0tpbmV0aWMuREQ9e2FuaW06bmV3IEtpbmV0aWMuQW5pbWF0aW9uLGlzRHJhZ2dpbmc6ITEsb2Zmc2V0Ont4OjAseTowfSxub2RlOm51bGwsX2RyYWc6ZnVuY3Rpb24oYSl7dmFyIGI9S2luZXRpYy5ERCxjPWIubm9kZTtpZihjKXtpZighYi5pc0RyYWdnaW5nKXt2YXIgZD1jLmdldFN0YWdlKCkuZ2V0UG9pbnRlclBvc2l0aW9uKCksZT1jLmRyYWdEaXN0YW5jZSgpLGY9TWF0aC5tYXgoTWF0aC5hYnMoZC54LWIuc3RhcnRQb2ludGVyUG9zLngpLE1hdGguYWJzKGQueS1iLnN0YXJ0UG9pbnRlclBvcy55KSk7aWYoZT5mKXJldHVybn1jLl9zZXREcmFnUG9zaXRpb24oYSksYi5pc0RyYWdnaW5nfHwoYi5pc0RyYWdnaW5nPSEwLGMuZmlyZShcImRyYWdzdGFydFwiLHt0eXBlOlwiZHJhZ3N0YXJ0XCIsdGFyZ2V0OmMsZXZ0OmF9LCEwKSksYy5maXJlKFwiZHJhZ21vdmVcIix7dHlwZTpcImRyYWdtb3ZlXCIsdGFyZ2V0OmMsZXZ0OmF9LCEwKX19LF9lbmREcmFnQmVmb3JlOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZD1LaW5ldGljLkRELGU9ZC5ub2RlO2UmJihiPWUubm9kZVR5cGUsYz1lLmdldExheWVyKCksZC5hbmltLnN0b3AoKSxkLmlzRHJhZ2dpbmcmJihkLmlzRHJhZ2dpbmc9ITEsS2luZXRpYy5saXN0ZW5DbGlja1RhcD0hMSxhJiYoYS5kcmFnRW5kTm9kZT1lKSksZGVsZXRlIGQubm9kZSwoY3x8ZSkuZHJhdygpKX0sX2VuZERyYWdBZnRlcjpmdW5jdGlvbihhKXthPWF8fHt9O3ZhciBiPWEuZHJhZ0VuZE5vZGU7YSYmYiYmYi5maXJlKFwiZHJhZ2VuZFwiLHt0eXBlOlwiZHJhZ2VuZFwiLHRhcmdldDpiLGV2dDphfSwhMCl9fSxLaW5ldGljLk5vZGUucHJvdG90eXBlLnN0YXJ0RHJhZz1mdW5jdGlvbigpe3ZhciBhPUtpbmV0aWMuREQsYj10aGlzLmdldFN0YWdlKCksYz10aGlzLmdldExheWVyKCksZD1iLmdldFBvaW50ZXJQb3NpdGlvbigpLGU9dGhpcy5nZXRBYnNvbHV0ZVBvc2l0aW9uKCk7ZCYmKGEubm9kZSYmYS5ub2RlLnN0b3BEcmFnKCksYS5ub2RlPXRoaXMsYS5zdGFydFBvaW50ZXJQb3M9ZCxhLm9mZnNldC54PWQueC1lLngsYS5vZmZzZXQueT1kLnktZS55LGEuYW5pbS5zZXRMYXllcnMoY3x8dGhpcy5nZXRMYXllcnMoKSksYS5hbmltLnN0YXJ0KCksdGhpcy5fc2V0RHJhZ1Bvc2l0aW9uKCkpfSxLaW5ldGljLk5vZGUucHJvdG90eXBlLl9zZXREcmFnUG9zaXRpb249ZnVuY3Rpb24oYSl7dmFyIGI9S2luZXRpYy5ERCxjPXRoaXMuZ2V0U3RhZ2UoKS5nZXRQb2ludGVyUG9zaXRpb24oKSxkPXRoaXMuZ2V0RHJhZ0JvdW5kRnVuYygpO2lmKGMpe3ZhciBlPXt4OmMueC1iLm9mZnNldC54LHk6Yy55LWIub2Zmc2V0Lnl9O3ZvaWQgMCE9PWQmJihlPWQuY2FsbCh0aGlzLGUsYSkpLHRoaXMuc2V0QWJzb2x1dGVQb3NpdGlvbihlKX19LEtpbmV0aWMuTm9kZS5wcm90b3R5cGUuc3RvcERyYWc9ZnVuY3Rpb24oKXt2YXIgYT1LaW5ldGljLkRELGI9e307YS5fZW5kRHJhZ0JlZm9yZShiKSxhLl9lbmREcmFnQWZ0ZXIoYil9LEtpbmV0aWMuTm9kZS5wcm90b3R5cGUuc2V0RHJhZ2dhYmxlPWZ1bmN0aW9uKGEpe3RoaXMuX3NldEF0dHIoXCJkcmFnZ2FibGVcIixhKSx0aGlzLl9kcmFnQ2hhbmdlKCl9O3ZhciBhPUtpbmV0aWMuTm9kZS5wcm90b3R5cGUuZGVzdHJveTtLaW5ldGljLk5vZGUucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt2YXIgYj1LaW5ldGljLkREO2Iubm9kZSYmYi5ub2RlLl9pZD09PXRoaXMuX2lkJiZ0aGlzLnN0b3BEcmFnKCksYS5jYWxsKHRoaXMpfSxLaW5ldGljLk5vZGUucHJvdG90eXBlLmlzRHJhZ2dpbmc9ZnVuY3Rpb24oKXt2YXIgYT1LaW5ldGljLkREO3JldHVybiBhLm5vZGUmJmEubm9kZS5faWQ9PT10aGlzLl9pZCYmYS5pc0RyYWdnaW5nfSxLaW5ldGljLk5vZGUucHJvdG90eXBlLl9saXN0ZW5EcmFnPWZ1bmN0aW9uKCl7dmFyIGE9dGhpczt0aGlzLl9kcmFnQ2xlYW51cCgpLFwiU3RhZ2VcIj09PXRoaXMuZ2V0Q2xhc3NOYW1lKCk/dGhpcy5vbihcImNvbnRlbnRNb3VzZWRvd24ua2luZXRpYyBjb250ZW50VG91Y2hzdGFydC5raW5ldGljXCIsZnVuY3Rpb24oYil7S2luZXRpYy5ERC5ub2RlfHxhLnN0YXJ0RHJhZyhiKX0pOnRoaXMub24oXCJtb3VzZWRvd24ua2luZXRpYyB0b3VjaHN0YXJ0LmtpbmV0aWNcIixmdW5jdGlvbihiKXtLaW5ldGljLkRELm5vZGV8fGEuc3RhcnREcmFnKGIpfSl9LEtpbmV0aWMuTm9kZS5wcm90b3R5cGUuX2RyYWdDaGFuZ2U9ZnVuY3Rpb24oKXtpZih0aGlzLmF0dHJzLmRyYWdnYWJsZSl0aGlzLl9saXN0ZW5EcmFnKCk7ZWxzZXt0aGlzLl9kcmFnQ2xlYW51cCgpO3ZhciBhPXRoaXMuZ2V0U3RhZ2UoKSxiPUtpbmV0aWMuREQ7YSYmYi5ub2RlJiZiLm5vZGUuX2lkPT09dGhpcy5faWQmJmIubm9kZS5zdG9wRHJhZygpfX0sS2luZXRpYy5Ob2RlLnByb3RvdHlwZS5fZHJhZ0NsZWFudXA9ZnVuY3Rpb24oKXtcIlN0YWdlXCI9PT10aGlzLmdldENsYXNzTmFtZSgpPyh0aGlzLm9mZihcImNvbnRlbnRNb3VzZWRvd24ua2luZXRpY1wiKSx0aGlzLm9mZihcImNvbnRlbnRUb3VjaHN0YXJ0LmtpbmV0aWNcIikpOih0aGlzLm9mZihcIm1vdXNlZG93bi5raW5ldGljXCIpLHRoaXMub2ZmKFwidG91Y2hzdGFydC5raW5ldGljXCIpKX0sS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLk5vZGUsXCJkcmFnQm91bmRGdW5jXCIpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXIoS2luZXRpYy5Ob2RlLFwiZHJhZ2dhYmxlXCIsITEpLEtpbmV0aWMuRmFjdG9yeS5hZGRPdmVybG9hZGVkR2V0dGVyU2V0dGVyKEtpbmV0aWMuTm9kZSxcImRyYWdnYWJsZVwiKTt2YXIgYj1LaW5ldGljLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtiLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsS2luZXRpYy5ERC5fZW5kRHJhZ0JlZm9yZSwhMCksYi5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIixLaW5ldGljLkRELl9lbmREcmFnQmVmb3JlLCEwKSxiLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsS2luZXRpYy5ERC5fZW5kRHJhZ0FmdGVyLCExKSxiLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLEtpbmV0aWMuREQuX2VuZERyYWdBZnRlciwhMSl9KCksZnVuY3Rpb24oKXtLaW5ldGljLlV0aWwuYWRkTWV0aG9kcyhLaW5ldGljLkNvbnRhaW5lcix7X19pbml0OmZ1bmN0aW9uKGEpe3RoaXMuY2hpbGRyZW49bmV3IEtpbmV0aWMuQ29sbGVjdGlvbixLaW5ldGljLk5vZGUuY2FsbCh0aGlzLGEpfSxnZXRDaGlsZHJlbjpmdW5jdGlvbihhKXtpZihhKXt2YXIgYj1uZXcgS2luZXRpYy5Db2xsZWN0aW9uO3JldHVybiB0aGlzLmNoaWxkcmVuLmVhY2goZnVuY3Rpb24oYyl7YShjKSYmYi5wdXNoKGMpfSksYn1yZXR1cm4gdGhpcy5jaGlsZHJlbn0saGFzQ2hpbGRyZW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRDaGlsZHJlbigpLmxlbmd0aD4wfSxyZW1vdmVDaGlsZHJlbjpmdW5jdGlvbigpe2Zvcih2YXIgYSxiPUtpbmV0aWMuQ29sbGVjdGlvbi50b0NvbGxlY3Rpb24odGhpcy5jaGlsZHJlbiksYz0wO2M8Yi5sZW5ndGg7YysrKWE9YltjXSxkZWxldGUgYS5wYXJlbnQsYS5pbmRleD0wLGEuaGFzQ2hpbGRyZW4oKSYmYS5yZW1vdmVDaGlsZHJlbigpLGEucmVtb3ZlKCk7cmV0dXJuIGI9bnVsbCx0aGlzLmNoaWxkcmVuPW5ldyBLaW5ldGljLkNvbGxlY3Rpb24sdGhpc30sZGVzdHJveUNoaWxkcmVuOmZ1bmN0aW9uKCl7Zm9yKHZhciBhLGI9S2luZXRpYy5Db2xsZWN0aW9uLnRvQ29sbGVjdGlvbih0aGlzLmNoaWxkcmVuKSxjPTA7YzxiLmxlbmd0aDtjKyspYT1iW2NdLGRlbGV0ZSBhLnBhcmVudCxhLmluZGV4PTAsYS5kZXN0cm95KCk7cmV0dXJuIGI9bnVsbCx0aGlzLmNoaWxkcmVuPW5ldyBLaW5ldGljLkNvbGxlY3Rpb24sdGhpc30sYWRkOmZ1bmN0aW9uKGEpe2lmKCEoYXJndW1lbnRzLmxlbmd0aD4xKSl7aWYoYS5nZXRQYXJlbnQoKSlyZXR1cm4gdm9pZCBhLm1vdmVUbyh0aGlzKTt2YXIgYj10aGlzLmNoaWxkcmVuO3JldHVybiB0aGlzLl92YWxpZGF0ZUFkZChhKSxhLmluZGV4PWIubGVuZ3RoLGEucGFyZW50PXRoaXMsYi5wdXNoKGEpLHRoaXMuX2ZpcmUoXCJhZGRcIix7Y2hpbGQ6YX0pLHRoaXN9Zm9yKHZhciBjPTA7Yzxhcmd1bWVudHMubGVuZ3RoO2MrKyl0aGlzLmFkZChhcmd1bWVudHNbY10pfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5oYXNDaGlsZHJlbigpJiZ0aGlzLmRlc3Ryb3lDaGlsZHJlbigpLEtpbmV0aWMuTm9kZS5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMpfSxmaW5kOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoLGk9W10saj1hLnJlcGxhY2UoLyAvZyxcIlwiKS5zcGxpdChcIixcIiksaz1qLmxlbmd0aDtmb3IoYj0wO2s+YjtiKyspaWYoZD1qW2JdLFwiI1wiPT09ZC5jaGFyQXQoMCkpZj10aGlzLl9nZXROb2RlQnlJZChkLnNsaWNlKDEpKSxmJiZpLnB1c2goZik7ZWxzZSBpZihcIi5cIj09PWQuY2hhckF0KDApKWU9dGhpcy5fZ2V0Tm9kZXNCeU5hbWUoZC5zbGljZSgxKSksaT1pLmNvbmNhdChlKTtlbHNlIGZvcihnPXRoaXMuZ2V0Q2hpbGRyZW4oKSxoPWcubGVuZ3RoLGM9MDtoPmM7YysrKWk9aS5jb25jYXQoZ1tjXS5fZ2V0KGQpKTtyZXR1cm4gS2luZXRpYy5Db2xsZWN0aW9uLnRvQ29sbGVjdGlvbihpKX0sX2dldE5vZGVCeUlkOmZ1bmN0aW9uKGEpe3ZhciBiPUtpbmV0aWMuaWRzW2FdO3JldHVybiB2b2lkIDAhPT1iJiZ0aGlzLmlzQW5jZXN0b3JPZihiKT9iOm51bGx9LF9nZXROb2Rlc0J5TmFtZTpmdW5jdGlvbihhKXt2YXIgYj1LaW5ldGljLm5hbWVzW2FdfHxbXTtyZXR1cm4gdGhpcy5fZ2V0RGVzY2VuZGFudHMoYil9LF9nZXQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPUtpbmV0aWMuTm9kZS5wcm90b3R5cGUuX2dldC5jYWxsKHRoaXMsYSksYz10aGlzLmdldENoaWxkcmVuKCksZD1jLmxlbmd0aCxlPTA7ZD5lO2UrKyliPWIuY29uY2F0KGNbZV0uX2dldChhKSk7cmV0dXJuIGJ9LHRvT2JqZWN0OmZ1bmN0aW9uKCl7dmFyIGE9S2luZXRpYy5Ob2RlLnByb3RvdHlwZS50b09iamVjdC5jYWxsKHRoaXMpO2EuY2hpbGRyZW49W107Zm9yKHZhciBiPXRoaXMuZ2V0Q2hpbGRyZW4oKSxjPWIubGVuZ3RoLGQ9MDtjPmQ7ZCsrKXt2YXIgZT1iW2RdO2EuY2hpbGRyZW4ucHVzaChlLnRvT2JqZWN0KCkpfXJldHVybiBhfSxfZ2V0RGVzY2VuZGFudHM6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9YS5sZW5ndGgsZD0wO2M+ZDtkKyspe3ZhciBlPWFbZF07dGhpcy5pc0FuY2VzdG9yT2YoZSkmJmIucHVzaChlKX1yZXR1cm4gYn0saXNBbmNlc3Rvck9mOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLmdldFBhcmVudCgpO2I7KXtpZihiLl9pZD09PXRoaXMuX2lkKXJldHVybiEwO2I9Yi5nZXRQYXJlbnQoKX1yZXR1cm4hMX0sY2xvbmU6ZnVuY3Rpb24oYSl7dmFyIGI9S2luZXRpYy5Ob2RlLnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMsYSk7cmV0dXJuIHRoaXMuZ2V0Q2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uKGEpe2IuYWRkKGEuY2xvbmUoKSl9KSxifSxnZXRBbGxJbnRlcnNlY3Rpb25zOmZ1bmN0aW9uKGEpe3ZhciBiPVtdO3JldHVybiB0aGlzLmZpbmQoXCJTaGFwZVwiKS5lYWNoKGZ1bmN0aW9uKGMpe2MuaXNWaXNpYmxlKCkmJmMuaW50ZXJzZWN0cyhhKSYmYi5wdXNoKGMpfSksYn0sX3NldENoaWxkcmVuSW5kaWNlczpmdW5jdGlvbigpe3RoaXMuY2hpbGRyZW4uZWFjaChmdW5jdGlvbihhLGIpe2EuaW5kZXg9Yn0pfSxkcmF3U2NlbmU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldExheWVyKCksZD1hfHxjJiZjLmdldENhbnZhcygpLGU9ZCYmZC5nZXRDb250ZXh0KCksZj10aGlzLl9jYWNoZS5jYW52YXMsZz1mJiZmLnNjZW5lO3JldHVybiB0aGlzLmlzVmlzaWJsZSgpJiYoZz90aGlzLl9kcmF3Q2FjaGVkU2NlbmVDYW52YXMoZSk6dGhpcy5fZHJhd0NoaWxkcmVuKGQsXCJkcmF3U2NlbmVcIixiKSksdGhpc1xyXG59LGRyYXdIaXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldExheWVyKCksZD1hfHxjJiZjLmhpdENhbnZhcyxlPWQmJmQuZ2V0Q29udGV4dCgpLGY9dGhpcy5fY2FjaGUuY2FudmFzLGc9ZiYmZi5oaXQ7cmV0dXJuIHRoaXMuc2hvdWxkRHJhd0hpdCgpJiYoZz90aGlzLl9kcmF3Q2FjaGVkSGl0Q2FudmFzKGUpOnRoaXMuX2RyYXdDaGlsZHJlbihkLFwiZHJhd0hpdFwiLGIpKSx0aGlzfSxfZHJhd0NoaWxkcmVuOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9dGhpcy5nZXRMYXllcigpLGc9YSYmYS5nZXRDb250ZXh0KCksaD10aGlzLmdldENsaXBXaWR0aCgpLGk9dGhpcy5nZXRDbGlwSGVpZ2h0KCksaj1oJiZpO2omJmYmJihkPXRoaXMuZ2V0Q2xpcFgoKSxlPXRoaXMuZ2V0Q2xpcFkoKSxnLnNhdmUoKSxmLl9hcHBseVRyYW5zZm9ybSh0aGlzLGcpLGcuYmVnaW5QYXRoKCksZy5yZWN0KGQsZSxoLGkpLGcuY2xpcCgpLGcucmVzZXQoKSksdGhpcy5jaGlsZHJlbi5lYWNoKGZ1bmN0aW9uKGQpe2RbYl0oYSxjKX0pLGomJmcucmVzdG9yZSgpfX0pLEtpbmV0aWMuVXRpbC5leHRlbmQoS2luZXRpYy5Db250YWluZXIsS2luZXRpYy5Ob2RlKSxLaW5ldGljLkNvbnRhaW5lci5wcm90b3R5cGUuZ2V0PUtpbmV0aWMuQ29udGFpbmVyLnByb3RvdHlwZS5maW5kLEtpbmV0aWMuRmFjdG9yeS5hZGRDb21wb25lbnRzR2V0dGVyU2V0dGVyKEtpbmV0aWMuQ29udGFpbmVyLFwiY2xpcFwiLFtcInhcIixcInlcIixcIndpZHRoXCIsXCJoZWlnaHRcIl0pLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5Db250YWluZXIsXCJjbGlwWFwiKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuQ29udGFpbmVyLFwiY2xpcFlcIiksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLkNvbnRhaW5lcixcImNsaXBXaWR0aFwiKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuQ29udGFpbmVyLFwiY2xpcEhlaWdodFwiKSxLaW5ldGljLkNvbGxlY3Rpb24ubWFwTWV0aG9kcyhLaW5ldGljLkNvbnRhaW5lcil9KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe2EuZmlsbCgpfWZ1bmN0aW9uIGIoYSl7YS5zdHJva2UoKX1mdW5jdGlvbiBjKGEpe2EuZmlsbCgpfWZ1bmN0aW9uIGQoYSl7YS5zdHJva2UoKX1mdW5jdGlvbiBlKCl7dGhpcy5fY2xlYXJDYWNoZShmKX12YXIgZj1cImhhc1NoYWRvd1wiO0tpbmV0aWMuVXRpbC5hZGRNZXRob2RzKEtpbmV0aWMuU2hhcGUse19faW5pdDpmdW5jdGlvbihmKXt0aGlzLm5vZGVUeXBlPVwiU2hhcGVcIix0aGlzLl9maWxsRnVuYz1hLHRoaXMuX3N0cm9rZUZ1bmM9Yix0aGlzLl9maWxsRnVuY0hpdD1jLHRoaXMuX3N0cm9rZUZ1bmNIaXQ9ZDtmb3IodmFyIGcsaD1LaW5ldGljLnNoYXBlczs7KWlmKGc9S2luZXRpYy5VdGlsLmdldFJhbmRvbUNvbG9yKCksZyYmIShnIGluIGgpKWJyZWFrO3RoaXMuY29sb3JLZXk9ZyxoW2ddPXRoaXMsS2luZXRpYy5Ob2RlLmNhbGwodGhpcyxmKSx0aGlzLm9uKFwic2hhZG93Q29sb3JDaGFuZ2Uua2luZXRpYyBzaGFkb3dCbHVyQ2hhbmdlLmtpbmV0aWMgc2hhZG93T2Zmc2V0Q2hhbmdlLmtpbmV0aWMgc2hhZG93T3BhY2l0eUNoYW5nZS5raW5ldGljIHNoYWRvd0VuYWJsZWRDaGFuZ2Uua2luZXRpY1wiLGUpfSxoYXNDaGlsZHJlbjpmdW5jdGlvbigpe3JldHVybiExfSxnZXRDaGlsZHJlbjpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDb250ZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0TGF5ZXIoKS5nZXRDb250ZXh0KCl9LGdldENhbnZhczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldExheWVyKCkuZ2V0Q2FudmFzKCl9LGhhc1NoYWRvdzpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRDYWNoZShmLHRoaXMuX2hhc1NoYWRvdyl9LF9oYXNTaGFkb3c6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRTaGFkb3dFbmFibGVkKCkmJjAhPT10aGlzLmdldFNoYWRvd09wYWNpdHkoKSYmISEodGhpcy5nZXRTaGFkb3dDb2xvcigpfHx0aGlzLmdldFNoYWRvd0JsdXIoKXx8dGhpcy5nZXRTaGFkb3dPZmZzZXRYKCl8fHRoaXMuZ2V0U2hhZG93T2Zmc2V0WSgpKX0saGFzRmlsbDpmdW5jdGlvbigpe3JldHVybiEhKHRoaXMuZ2V0RmlsbCgpfHx0aGlzLmdldEZpbGxQYXR0ZXJuSW1hZ2UoKXx8dGhpcy5nZXRGaWxsTGluZWFyR3JhZGllbnRDb2xvclN0b3BzKCl8fHRoaXMuZ2V0RmlsbFJhZGlhbEdyYWRpZW50Q29sb3JTdG9wcygpKX0saGFzU3Ryb2tlOmZ1bmN0aW9uKCl7cmV0dXJuISEodGhpcy5zdHJva2UoKXx8dGhpcy5zdHJva2VSZWQoKXx8dGhpcy5zdHJva2VHcmVlbigpfHx0aGlzLnN0cm9rZUJsdWUoKSl9LF9nZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY2xhc3NOYW1lPT09YXx8dGhpcy5ub2RlVHlwZT09PWE/W3RoaXNdOltdfSxpbnRlcnNlY3RzOmZ1bmN0aW9uKGEpe3ZhciBiLGM9dGhpcy5nZXRTdGFnZSgpLGQ9Yy5idWZmZXJIaXRDYW52YXM7cmV0dXJuIGQuZ2V0Q29udGV4dCgpLmNsZWFyKCksdGhpcy5kcmF3U2NlbmUoZCksYj1kLmNvbnRleHQuZ2V0SW1hZ2VEYXRhKE1hdGgucm91bmQoYS54KSxNYXRoLnJvdW5kKGEueSksMSwxKS5kYXRhLGJbM10+MH0sZGVzdHJveTpmdW5jdGlvbigpe0tpbmV0aWMuTm9kZS5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMpLGRlbGV0ZSBLaW5ldGljLnNoYXBlc1t0aGlzLmNvbG9yS2V5XX0sX3VzZUJ1ZmZlckNhbnZhczpmdW5jdGlvbigpe3JldHVybih0aGlzLmhhc1NoYWRvdygpfHwxIT09dGhpcy5nZXRBYnNvbHV0ZU9wYWNpdHkoKSkmJnRoaXMuaGFzRmlsbCgpJiZ0aGlzLmhhc1N0cm9rZSgpJiZ0aGlzLmdldFN0YWdlKCl9LGRyYXdTY2VuZTpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmPXRoaXMuZ2V0TGF5ZXIoKSxnPWF8fGYuZ2V0Q2FudmFzKCksaD1nLmdldENvbnRleHQoKSxpPXRoaXMuX2NhY2hlLmNhbnZhcyxqPXRoaXMuc2NlbmVGdW5jKCksaz10aGlzLmhhc1NoYWRvdygpO3JldHVybiB0aGlzLmlzVmlzaWJsZSgpJiYoaT90aGlzLl9kcmF3Q2FjaGVkU2NlbmVDYW52YXMoaCk6aiYmKGguc2F2ZSgpLHRoaXMuX3VzZUJ1ZmZlckNhbnZhcygpPyhjPXRoaXMuZ2V0U3RhZ2UoKSxkPWMuYnVmZmVyQ2FudmFzLGU9ZC5nZXRDb250ZXh0KCksZS5jbGVhcigpLGUuc2F2ZSgpLGUuX2FwcGx5TGluZUpvaW4odGhpcyksZi5fYXBwbHlUcmFuc2Zvcm0odGhpcyxlLGIpLGouY2FsbCh0aGlzLGUpLGUucmVzdG9yZSgpLGsmJihoLnNhdmUoKSxoLl9hcHBseVNoYWRvdyh0aGlzKSxoLmRyYXdJbWFnZShkLl9jYW52YXMsMCwwKSxoLnJlc3RvcmUoKSksaC5fYXBwbHlPcGFjaXR5KHRoaXMpLGguZHJhd0ltYWdlKGQuX2NhbnZhcywwLDApKTooaC5fYXBwbHlMaW5lSm9pbih0aGlzKSxmLl9hcHBseVRyYW5zZm9ybSh0aGlzLGgsYiksayYmKGguc2F2ZSgpLGguX2FwcGx5U2hhZG93KHRoaXMpLGouY2FsbCh0aGlzLGgpLGgucmVzdG9yZSgpKSxoLl9hcHBseU9wYWNpdHkodGhpcyksai5jYWxsKHRoaXMsaCkpLGgucmVzdG9yZSgpKSksdGhpc30sZHJhd0hpdDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0TGF5ZXIoKSxkPWF8fGMuaGl0Q2FudmFzLGU9ZC5nZXRDb250ZXh0KCksZj10aGlzLmhpdEZ1bmMoKXx8dGhpcy5zY2VuZUZ1bmMoKSxnPXRoaXMuX2NhY2hlLmNhbnZhcyxoPWcmJmcuaGl0O3JldHVybiB0aGlzLnNob3VsZERyYXdIaXQoKSYmKGg/dGhpcy5fZHJhd0NhY2hlZEhpdENhbnZhcyhlKTpmJiYoZS5zYXZlKCksZS5fYXBwbHlMaW5lSm9pbih0aGlzKSxjLl9hcHBseVRyYW5zZm9ybSh0aGlzLGUsYiksZi5jYWxsKHRoaXMsZSksZS5yZXN0b3JlKCkpKSx0aGlzfSxkcmF3SGl0RnJvbUNhY2hlOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoLGksaj1hfHwwLGs9dGhpcy5fY2FjaGUuY2FudmFzLGw9dGhpcy5fZ2V0Q2FjaGVkU2NlbmVDYW52YXMoKSxtPWwuZ2V0Q29udGV4dCgpLG49ay5oaXQsbz1uLmdldENvbnRleHQoKSxwPWwuZ2V0V2lkdGgoKSxxPWwuZ2V0SGVpZ2h0KCk7by5jbGVhcigpO3RyeXtmb3IoYj1tLmdldEltYWdlRGF0YSgwLDAscCxxKSxjPWIuZGF0YSxkPW8uZ2V0SW1hZ2VEYXRhKDAsMCxwLHEpLGU9ZC5kYXRhLGY9Yy5sZW5ndGgsZz1LaW5ldGljLlV0aWwuX2hleFRvUmdiKHRoaXMuY29sb3JLZXkpLGg9MDtmPmg7aCs9NClpPWNbaCszXSxpPmomJihlW2hdPWcucixlW2grMV09Zy5nLGVbaCsyXT1nLmIsZVtoKzNdPTI1NSk7by5wdXRJbWFnZURhdGEoZCwwLDApfWNhdGNoKHIpe0tpbmV0aWMuVXRpbC53YXJuKFwiVW5hYmxlIHRvIGRyYXcgaGl0IGdyYXBoIGZyb20gY2FjaGVkIHNjZW5lIGNhbnZhcy4gXCIrci5tZXNzYWdlKX1yZXR1cm4gdGhpc319KSxLaW5ldGljLlV0aWwuZXh0ZW5kKEtpbmV0aWMuU2hhcGUsS2luZXRpYy5Ob2RlKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU2hhcGUsXCJzdHJva2VcIiksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwic3Ryb2tlUmVkXCIsMCxLaW5ldGljLlZhbGlkYXRvcnMuUkdCQ29tcG9uZW50KSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU2hhcGUsXCJzdHJva2VHcmVlblwiLDAsS2luZXRpYy5WYWxpZGF0b3JzLlJHQkNvbXBvbmVudCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwic3Ryb2tlQmx1ZVwiLDAsS2luZXRpYy5WYWxpZGF0b3JzLlJHQkNvbXBvbmVudCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwic3Ryb2tlQWxwaGFcIiwxLEtpbmV0aWMuVmFsaWRhdG9ycy5hbHBoYUNvbXBvbmVudCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwic3Ryb2tlV2lkdGhcIiwyKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU2hhcGUsXCJsaW5lSm9pblwiKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU2hhcGUsXCJsaW5lQ2FwXCIpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TaGFwZSxcInNjZW5lRnVuY1wiKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU2hhcGUsXCJoaXRGdW5jXCIpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TaGFwZSxcImRhc2hcIiksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwic2hhZG93Q29sb3JcIiksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwic2hhZG93UmVkXCIsMCxLaW5ldGljLlZhbGlkYXRvcnMuUkdCQ29tcG9uZW50KSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU2hhcGUsXCJzaGFkb3dHcmVlblwiLDAsS2luZXRpYy5WYWxpZGF0b3JzLlJHQkNvbXBvbmVudCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwic2hhZG93Qmx1ZVwiLDAsS2luZXRpYy5WYWxpZGF0b3JzLlJHQkNvbXBvbmVudCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwic2hhZG93QWxwaGFcIiwxLEtpbmV0aWMuVmFsaWRhdG9ycy5hbHBoYUNvbXBvbmVudCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwic2hhZG93Qmx1clwiKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU2hhcGUsXCJzaGFkb3dPcGFjaXR5XCIpLEtpbmV0aWMuRmFjdG9yeS5hZGRDb21wb25lbnRzR2V0dGVyU2V0dGVyKEtpbmV0aWMuU2hhcGUsXCJzaGFkb3dPZmZzZXRcIixbXCJ4XCIsXCJ5XCJdKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU2hhcGUsXCJzaGFkb3dPZmZzZXRYXCIsMCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwic2hhZG93T2Zmc2V0WVwiLDApLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TaGFwZSxcImZpbGxQYXR0ZXJuSW1hZ2VcIiksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwiZmlsbFwiKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU2hhcGUsXCJmaWxsUmVkXCIsMCxLaW5ldGljLlZhbGlkYXRvcnMuUkdCQ29tcG9uZW50KSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU2hhcGUsXCJmaWxsR3JlZW5cIiwwLEtpbmV0aWMuVmFsaWRhdG9ycy5SR0JDb21wb25lbnQpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TaGFwZSxcImZpbGxCbHVlXCIsMCxLaW5ldGljLlZhbGlkYXRvcnMuUkdCQ29tcG9uZW50KSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU2hhcGUsXCJmaWxsQWxwaGFcIiwxLEtpbmV0aWMuVmFsaWRhdG9ycy5hbHBoYUNvbXBvbmVudCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwiZmlsbFBhdHRlcm5YXCIsMCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwiZmlsbFBhdHRlcm5ZXCIsMCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwiZmlsbExpbmVhckdyYWRpZW50Q29sb3JTdG9wc1wiKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU2hhcGUsXCJmaWxsUmFkaWFsR3JhZGllbnRTdGFydFJhZGl1c1wiLDApLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TaGFwZSxcImZpbGxSYWRpYWxHcmFkaWVudEVuZFJhZGl1c1wiLDApLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TaGFwZSxcImZpbGxSYWRpYWxHcmFkaWVudENvbG9yU3RvcHNcIiksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwiZmlsbFBhdHRlcm5SZXBlYXRcIixcInJlcGVhdFwiKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU2hhcGUsXCJmaWxsRW5hYmxlZFwiLCEwKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU2hhcGUsXCJzdHJva2VFbmFibGVkXCIsITApLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TaGFwZSxcInNoYWRvd0VuYWJsZWRcIiwhMCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwiZGFzaEVuYWJsZWRcIiwhMCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwic3Ryb2tlU2NhbGVFbmFibGVkXCIsITApLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TaGFwZSxcImZpbGxQcmlvcml0eVwiLFwiY29sb3JcIiksS2luZXRpYy5GYWN0b3J5LmFkZENvbXBvbmVudHNHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TaGFwZSxcImZpbGxQYXR0ZXJuT2Zmc2V0XCIsW1wieFwiLFwieVwiXSksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwiZmlsbFBhdHRlcm5PZmZzZXRYXCIsMCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwiZmlsbFBhdHRlcm5PZmZzZXRZXCIsMCksS2luZXRpYy5GYWN0b3J5LmFkZENvbXBvbmVudHNHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TaGFwZSxcImZpbGxQYXR0ZXJuU2NhbGVcIixbXCJ4XCIsXCJ5XCJdKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU2hhcGUsXCJmaWxsUGF0dGVyblNjYWxlWFwiLDEpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TaGFwZSxcImZpbGxQYXR0ZXJuU2NhbGVZXCIsMSksS2luZXRpYy5GYWN0b3J5LmFkZENvbXBvbmVudHNHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TaGFwZSxcImZpbGxMaW5lYXJHcmFkaWVudFN0YXJ0UG9pbnRcIixbXCJ4XCIsXCJ5XCJdKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU2hhcGUsXCJmaWxsTGluZWFyR3JhZGllbnRTdGFydFBvaW50WFwiLDApLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TaGFwZSxcImZpbGxMaW5lYXJHcmFkaWVudFN0YXJ0UG9pbnRZXCIsMCksS2luZXRpYy5GYWN0b3J5LmFkZENvbXBvbmVudHNHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TaGFwZSxcImZpbGxMaW5lYXJHcmFkaWVudEVuZFBvaW50XCIsW1wieFwiLFwieVwiXSksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwiZmlsbExpbmVhckdyYWRpZW50RW5kUG9pbnRYXCIsMCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwiZmlsbExpbmVhckdyYWRpZW50RW5kUG9pbnRZXCIsMCksS2luZXRpYy5GYWN0b3J5LmFkZENvbXBvbmVudHNHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TaGFwZSxcImZpbGxSYWRpYWxHcmFkaWVudFN0YXJ0UG9pbnRcIixbXCJ4XCIsXCJ5XCJdKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU2hhcGUsXCJmaWxsUmFkaWFsR3JhZGllbnRTdGFydFBvaW50WFwiLDApLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TaGFwZSxcImZpbGxSYWRpYWxHcmFkaWVudFN0YXJ0UG9pbnRZXCIsMCksS2luZXRpYy5GYWN0b3J5LmFkZENvbXBvbmVudHNHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TaGFwZSxcImZpbGxSYWRpYWxHcmFkaWVudEVuZFBvaW50XCIsW1wieFwiLFwieVwiXSksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwiZmlsbFJhZGlhbEdyYWRpZW50RW5kUG9pbnRYXCIsMCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwiZmlsbFJhZGlhbEdyYWRpZW50RW5kUG9pbnRZXCIsMCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwiZmlsbFBhdHRlcm5Sb3RhdGlvblwiLDApLEtpbmV0aWMuRmFjdG9yeS5iYWNrQ29tcGF0KEtpbmV0aWMuU2hhcGUse2Rhc2hBcnJheTpcImRhc2hcIixnZXREYXNoQXJyYXk6XCJnZXREYXNoXCIsc2V0RGFzaEFycmF5OlwiZ2V0RGFzaFwiLGRyYXdGdW5jOlwic2NlbmVGdW5jXCIsZ2V0RHJhd0Z1bmM6XCJnZXRTY2VuZUZ1bmNcIixzZXREcmF3RnVuYzpcInNldFNjZW5lRnVuY1wiLGRyYXdIaXRGdW5jOlwiaGl0RnVuY1wiLGdldERyYXdIaXRGdW5jOlwiZ2V0SGl0RnVuY1wiLHNldERyYXdIaXRGdW5jOlwic2V0SGl0RnVuY1wifSksS2luZXRpYy5Db2xsZWN0aW9uLm1hcE1ldGhvZHMoS2luZXRpYy5TaGFwZSl9KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsYil7YS5jb250ZW50LmFkZEV2ZW50TGlzdGVuZXIoYixmdW5jdGlvbihjKXthW0krYl0oYyl9LCExKX12YXIgYj1cIlN0YWdlXCIsYz1cInN0cmluZ1wiLGQ9XCJweFwiLGU9XCJtb3VzZW91dFwiLGY9XCJtb3VzZWxlYXZlXCIsZz1cIm1vdXNlb3ZlclwiLGg9XCJtb3VzZWVudGVyXCIsaT1cIm1vdXNlbW92ZVwiLGo9XCJtb3VzZWRvd25cIixrPVwibW91c2V1cFwiLGw9XCJjbGlja1wiLG09XCJkYmxjbGlja1wiLG49XCJ0b3VjaHN0YXJ0XCIsbz1cInRvdWNoZW5kXCIscD1cInRhcFwiLHE9XCJkYmx0YXBcIixyPVwidG91Y2htb3ZlXCIscz1cImNvbnRlbnRNb3VzZW91dFwiLHQ9XCJjb250ZW50TW91c2VvdmVyXCIsdT1cImNvbnRlbnRNb3VzZW1vdmVcIix2PVwiY29udGVudE1vdXNlZG93blwiLHc9XCJjb250ZW50TW91c2V1cFwiLHg9XCJjb250ZW50Q2xpY2tcIix5PVwiY29udGVudERibGNsaWNrXCIsej1cImNvbnRlbnRUb3VjaHN0YXJ0XCIsQT1cImNvbnRlbnRUb3VjaGVuZFwiLEI9XCJjb250ZW50RGJsdGFwXCIsQz1cImNvbnRlbnRUb3VjaG1vdmVcIixEPVwiZGl2XCIsRT1cInJlbGF0aXZlXCIsRj1cImlubGluZS1ibG9ja1wiLEc9XCJraW5ldGljanMtY29udGVudFwiLEg9XCIgXCIsST1cIl9cIixKPVwiY29udGFpbmVyXCIsSz1cIlwiLEw9W2osaSxrLGUsbixyLG8sZ10sTT1MLmxlbmd0aDtLaW5ldGljLlV0aWwuYWRkTWV0aG9kcyhLaW5ldGljLlN0YWdlLHtfX19pbml0OmZ1bmN0aW9uKGEpe3RoaXMubm9kZVR5cGU9YixLaW5ldGljLkNvbnRhaW5lci5jYWxsKHRoaXMsYSksdGhpcy5faWQ9S2luZXRpYy5pZENvdW50ZXIrKyx0aGlzLl9idWlsZERPTSgpLHRoaXMuX2JpbmRDb250ZW50RXZlbnRzKCksdGhpcy5fZW5hYmxlTmVzdGVkVHJhbnNmb3Jtcz0hMSxLaW5ldGljLnN0YWdlcy5wdXNoKHRoaXMpfSxfdmFsaWRhdGVBZGQ6ZnVuY3Rpb24oYSl7XCJMYXllclwiIT09YS5nZXRUeXBlKCkmJktpbmV0aWMuVXRpbC5lcnJvcihcIllvdSBtYXkgb25seSBhZGQgbGF5ZXJzIHRvIHRoZSBzdGFnZS5cIil9LHNldENvbnRhaW5lcjpmdW5jdGlvbihhKXtpZih0eXBlb2YgYT09PWMpe3ZhciBiPWE7aWYoYT1LaW5ldGljLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEpLCFhKXRocm93XCJDYW4gbm90IGZpbmQgY29udGFpbmVyIGluIGRvY3VtZW50IHdpdGggaWQgXCIrYn1yZXR1cm4gdGhpcy5fc2V0QXR0cihKLGEpLHRoaXN9LHNob3VsZERyYXdIaXQ6ZnVuY3Rpb24oKXtyZXR1cm4hMH0sZHJhdzpmdW5jdGlvbigpe3JldHVybiBLaW5ldGljLk5vZGUucHJvdG90eXBlLmRyYXcuY2FsbCh0aGlzKSx0aGlzfSxzZXRIZWlnaHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIEtpbmV0aWMuTm9kZS5wcm90b3R5cGUuc2V0SGVpZ2h0LmNhbGwodGhpcyxhKSx0aGlzLl9yZXNpemVET00oKSx0aGlzfSxzZXRXaWR0aDpmdW5jdGlvbihhKXtyZXR1cm4gS2luZXRpYy5Ob2RlLnByb3RvdHlwZS5zZXRXaWR0aC5jYWxsKHRoaXMsYSksdGhpcy5fcmVzaXplRE9NKCksdGhpc30sY2xlYXI6ZnVuY3Rpb24oKXt2YXIgYSxiPXRoaXMuY2hpbGRyZW4sYz1iLmxlbmd0aDtmb3IoYT0wO2M+YTthKyspYlthXS5jbGVhcigpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbihhKXtyZXR1cm4gYXx8KGE9e30pLGEuY29udGFpbmVyPUtpbmV0aWMuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChEKSxLaW5ldGljLkNvbnRhaW5lci5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzLGEpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jb250ZW50O0tpbmV0aWMuQ29udGFpbmVyLnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyksYSYmS2luZXRpYy5VdGlsLl9pc0luRG9jdW1lbnQoYSkmJnRoaXMuZ2V0Q29udGFpbmVyKCkucmVtb3ZlQ2hpbGQoYSk7dmFyIGI9S2luZXRpYy5zdGFnZXMuaW5kZXhPZih0aGlzKTtiPi0xJiZLaW5ldGljLnN0YWdlcy5zcGxpY2UoYiwxKX0sZ2V0UG9pbnRlclBvc2l0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucG9pbnRlclBvc30sZ2V0U3RhZ2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sZ2V0Q29udGVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnR9LHRvRGF0YVVSTDpmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGUpe3ZhciBmPWlbZV0saj1mLnRvRGF0YVVSTCgpLGs9bmV3IEtpbmV0aWMud2luZG93LkltYWdlO2sub25sb2FkPWZ1bmN0aW9uKCl7aC5kcmF3SW1hZ2UoaywwLDApLGU8aS5sZW5ndGgtMT9iKGUrMSk6YS5jYWxsYmFjayhnLnRvRGF0YVVSTChjLGQpKX0say5zcmM9an1hPWF8fHt9O3ZhciBjPWEubWltZVR5cGV8fG51bGwsZD1hLnF1YWxpdHl8fG51bGwsZT1hLnh8fDAsZj1hLnl8fDAsZz1uZXcgS2luZXRpYy5TY2VuZUNhbnZhcyh7d2lkdGg6YS53aWR0aHx8dGhpcy5nZXRXaWR0aCgpLGhlaWdodDphLmhlaWdodHx8dGhpcy5nZXRIZWlnaHQoKSxwaXhlbFJhdGlvOjF9KSxoPWcuZ2V0Q29udGV4dCgpLl9jb250ZXh0LGk9dGhpcy5jaGlsZHJlbjsoZXx8ZikmJmgudHJhbnNsYXRlKC0xKmUsLTEqZiksYigwKX0sdG9JbWFnZTpmdW5jdGlvbihhKXt2YXIgYj1hLmNhbGxiYWNrO2EuY2FsbGJhY2s9ZnVuY3Rpb24oYSl7S2luZXRpYy5VdGlsLl9nZXRJbWFnZShhLGZ1bmN0aW9uKGEpe2IoYSl9KX0sdGhpcy50b0RhdGFVUkwoYSl9LGdldEludGVyc2VjdGlvbjpmdW5jdGlvbihhKXt2YXIgYixjLGQ9dGhpcy5nZXRDaGlsZHJlbigpLGU9ZC5sZW5ndGgsZj1lLTE7Zm9yKGI9ZjtiPj0wO2ItLSlpZihjPWRbYl0uZ2V0SW50ZXJzZWN0aW9uKGEpKXJldHVybiBjO3JldHVybiBudWxsfSxfcmVzaXplRE9NOmZ1bmN0aW9uKCl7aWYodGhpcy5jb250ZW50KXt2YXIgYSxiLGM9dGhpcy5nZXRXaWR0aCgpLGU9dGhpcy5nZXRIZWlnaHQoKSxmPXRoaXMuZ2V0Q2hpbGRyZW4oKSxnPWYubGVuZ3RoO2Zvcih0aGlzLmNvbnRlbnQuc3R5bGUud2lkdGg9YytkLHRoaXMuY29udGVudC5zdHlsZS5oZWlnaHQ9ZStkLHRoaXMuYnVmZmVyQ2FudmFzLnNldFNpemUoYyxlKSx0aGlzLmJ1ZmZlckhpdENhbnZhcy5zZXRTaXplKGMsZSksYT0wO2c+YTthKyspYj1mW2FdLGIuZ2V0Q2FudmFzKCkuc2V0U2l6ZShjLGUpLGIuaGl0Q2FudmFzLnNldFNpemUoYyxlKSxiLmRyYXcoKX19LGFkZDpmdW5jdGlvbihhKXtpZighKGFyZ3VtZW50cy5sZW5ndGg+MSkpcmV0dXJuIEtpbmV0aWMuQ29udGFpbmVyLnByb3RvdHlwZS5hZGQuY2FsbCh0aGlzLGEpLGEuX3NldENhbnZhc1NpemUodGhpcy53aWR0aCgpLHRoaXMuaGVpZ2h0KCkpLGEuZHJhdygpLHRoaXMuY29udGVudC5hcHBlbmRDaGlsZChhLmNhbnZhcy5fY2FudmFzKSx0aGlzO2Zvcih2YXIgYj0wO2I8YXJndW1lbnRzLmxlbmd0aDtiKyspdGhpcy5hZGQoYXJndW1lbnRzW2JdKX0sZ2V0UGFyZW50OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LGdldExheWVyOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LGdldExheWVyczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldENoaWxkcmVuKCl9LF9iaW5kQ29udGVudEV2ZW50czpmdW5jdGlvbigpe2Zvcih2YXIgYj0wO00+YjtiKyspYSh0aGlzLExbYl0pfSxfbW91c2VvdmVyOmZ1bmN0aW9uKGEpe0tpbmV0aWMuVUEubW9iaWxlfHwodGhpcy5fc2V0UG9pbnRlclBvc2l0aW9uKGEpLHRoaXMuX2ZpcmUodCx7ZXZ0OmF9KSl9LF9tb3VzZW91dDpmdW5jdGlvbihhKXtpZighS2luZXRpYy5VQS5tb2JpbGUpe3RoaXMuX3NldFBvaW50ZXJQb3NpdGlvbihhKTt2YXIgYj10aGlzLnRhcmdldFNoYXBlO2ImJiFLaW5ldGljLmlzRHJhZ2dpbmcoKSYmKGIuX2ZpcmVBbmRCdWJibGUoZSx7ZXZ0OmF9KSxiLl9maXJlQW5kQnViYmxlKGYse2V2dDphfSksdGhpcy50YXJnZXRTaGFwZT1udWxsKSx0aGlzLnBvaW50ZXJQb3M9dm9pZCAwLHRoaXMuX2ZpcmUocyx7ZXZ0OmF9KX19LF9tb3VzZW1vdmU6ZnVuY3Rpb24oYSl7aWYoIUtpbmV0aWMuVUEubW9iaWxlKXt0aGlzLl9zZXRQb2ludGVyUG9zaXRpb24oYSk7dmFyIGI9S2luZXRpYy5ERCxjPXRoaXMuZ2V0SW50ZXJzZWN0aW9uKHRoaXMuZ2V0UG9pbnRlclBvc2l0aW9uKCkpO2MmJmMuaXNMaXN0ZW5pbmcoKT9LaW5ldGljLmlzRHJhZ2dpbmcoKXx8dGhpcy50YXJnZXRTaGFwZSYmdGhpcy50YXJnZXRTaGFwZS5faWQ9PT1jLl9pZD9jLl9maXJlQW5kQnViYmxlKGkse2V2dDphfSk6KHRoaXMudGFyZ2V0U2hhcGUmJih0aGlzLnRhcmdldFNoYXBlLl9maXJlQW5kQnViYmxlKGUse2V2dDphfSxjKSx0aGlzLnRhcmdldFNoYXBlLl9maXJlQW5kQnViYmxlKGYse2V2dDphfSxjKSksYy5fZmlyZUFuZEJ1YmJsZShnLHtldnQ6YX0sdGhpcy50YXJnZXRTaGFwZSksYy5fZmlyZUFuZEJ1YmJsZShoLHtldnQ6YX0sdGhpcy50YXJnZXRTaGFwZSksdGhpcy50YXJnZXRTaGFwZT1jKTp0aGlzLnRhcmdldFNoYXBlJiYhS2luZXRpYy5pc0RyYWdnaW5nKCkmJih0aGlzLnRhcmdldFNoYXBlLl9maXJlQW5kQnViYmxlKGUse2V2dDphfSksdGhpcy50YXJnZXRTaGFwZS5fZmlyZUFuZEJ1YmJsZShmLHtldnQ6YX0pLHRoaXMudGFyZ2V0U2hhcGU9bnVsbCksdGhpcy5fZmlyZSh1LHtldnQ6YX0pLGImJmIuX2RyYWcoYSl9YS5wcmV2ZW50RGVmYXVsdCYmYS5wcmV2ZW50RGVmYXVsdCgpfSxfbW91c2Vkb3duOmZ1bmN0aW9uKGEpe2lmKCFLaW5ldGljLlVBLm1vYmlsZSl7dGhpcy5fc2V0UG9pbnRlclBvc2l0aW9uKGEpO3ZhciBiPXRoaXMuZ2V0SW50ZXJzZWN0aW9uKHRoaXMuZ2V0UG9pbnRlclBvc2l0aW9uKCkpO0tpbmV0aWMubGlzdGVuQ2xpY2tUYXA9ITAsYiYmYi5pc0xpc3RlbmluZygpJiYodGhpcy5jbGlja1N0YXJ0U2hhcGU9YixiLl9maXJlQW5kQnViYmxlKGose2V2dDphfSkpLHRoaXMuX2ZpcmUodix7ZXZ0OmF9KX1hLnByZXZlbnREZWZhdWx0JiZhLnByZXZlbnREZWZhdWx0KCl9LF9tb3VzZXVwOmZ1bmN0aW9uKGEpe2lmKCFLaW5ldGljLlVBLm1vYmlsZSl7dGhpcy5fc2V0UG9pbnRlclBvc2l0aW9uKGEpO3ZhciBiPXRoaXMuZ2V0SW50ZXJzZWN0aW9uKHRoaXMuZ2V0UG9pbnRlclBvc2l0aW9uKCkpLGM9dGhpcy5jbGlja1N0YXJ0U2hhcGUsZD0hMTtLaW5ldGljLmluRGJsQ2xpY2tXaW5kb3c/KGQ9ITAsS2luZXRpYy5pbkRibENsaWNrV2luZG93PSExKTpLaW5ldGljLmluRGJsQ2xpY2tXaW5kb3c9ITAsc2V0VGltZW91dChmdW5jdGlvbigpe0tpbmV0aWMuaW5EYmxDbGlja1dpbmRvdz0hMX0sS2luZXRpYy5kYmxDbGlja1dpbmRvdyksYiYmYi5pc0xpc3RlbmluZygpJiYoYi5fZmlyZUFuZEJ1YmJsZShrLHtldnQ6YX0pLEtpbmV0aWMubGlzdGVuQ2xpY2tUYXAmJmMmJmMuX2lkPT09Yi5faWQmJihiLl9maXJlQW5kQnViYmxlKGwse2V2dDphfSksZCYmYi5fZmlyZUFuZEJ1YmJsZShtLHtldnQ6YX0pKSksdGhpcy5fZmlyZSh3LHtldnQ6YX0pLEtpbmV0aWMubGlzdGVuQ2xpY2tUYXAmJih0aGlzLl9maXJlKHgse2V2dDphfSksZCYmdGhpcy5fZmlyZSh5LHtldnQ6YX0pKSxLaW5ldGljLmxpc3RlbkNsaWNrVGFwPSExfWEucHJldmVudERlZmF1bHQmJmEucHJldmVudERlZmF1bHQoKX0sX3RvdWNoc3RhcnQ6ZnVuY3Rpb24oYSl7dGhpcy5fc2V0UG9pbnRlclBvc2l0aW9uKGEpO3ZhciBiPXRoaXMuZ2V0SW50ZXJzZWN0aW9uKHRoaXMuZ2V0UG9pbnRlclBvc2l0aW9uKCkpO0tpbmV0aWMubGlzdGVuQ2xpY2tUYXA9ITAsYiYmYi5pc0xpc3RlbmluZygpJiYodGhpcy50YXBTdGFydFNoYXBlPWIsYi5fZmlyZUFuZEJ1YmJsZShuLHtldnQ6YX0pLGIuaXNMaXN0ZW5pbmcoKSYmYS5wcmV2ZW50RGVmYXVsdCYmYS5wcmV2ZW50RGVmYXVsdCgpKSx0aGlzLl9maXJlKHose2V2dDphfSl9LF90b3VjaGVuZDpmdW5jdGlvbihhKXt0aGlzLl9zZXRQb2ludGVyUG9zaXRpb24oYSk7dmFyIGI9dGhpcy5nZXRJbnRlcnNlY3Rpb24odGhpcy5nZXRQb2ludGVyUG9zaXRpb24oKSksYz0hMTtLaW5ldGljLmluRGJsQ2xpY2tXaW5kb3c/KGM9ITAsS2luZXRpYy5pbkRibENsaWNrV2luZG93PSExKTpLaW5ldGljLmluRGJsQ2xpY2tXaW5kb3c9ITAsc2V0VGltZW91dChmdW5jdGlvbigpe0tpbmV0aWMuaW5EYmxDbGlja1dpbmRvdz0hMX0sS2luZXRpYy5kYmxDbGlja1dpbmRvdyksYiYmYi5pc0xpc3RlbmluZygpJiYoYi5fZmlyZUFuZEJ1YmJsZShvLHtldnQ6YX0pLEtpbmV0aWMubGlzdGVuQ2xpY2tUYXAmJmIuX2lkPT09dGhpcy50YXBTdGFydFNoYXBlLl9pZCYmKGIuX2ZpcmVBbmRCdWJibGUocCx7ZXZ0OmF9KSxjJiZiLl9maXJlQW5kQnViYmxlKHEse2V2dDphfSkpLGIuaXNMaXN0ZW5pbmcoKSYmYS5wcmV2ZW50RGVmYXVsdCYmYS5wcmV2ZW50RGVmYXVsdCgpKSxLaW5ldGljLmxpc3RlbkNsaWNrVGFwJiYodGhpcy5fZmlyZShBLHtldnQ6YX0pLGMmJnRoaXMuX2ZpcmUoQix7ZXZ0OmF9KSksS2luZXRpYy5saXN0ZW5DbGlja1RhcD0hMX0sX3RvdWNobW92ZTpmdW5jdGlvbihhKXt0aGlzLl9zZXRQb2ludGVyUG9zaXRpb24oYSk7dmFyIGI9S2luZXRpYy5ERCxjPXRoaXMuZ2V0SW50ZXJzZWN0aW9uKHRoaXMuZ2V0UG9pbnRlclBvc2l0aW9uKCkpO2MmJmMuaXNMaXN0ZW5pbmcoKSYmKGMuX2ZpcmVBbmRCdWJibGUocix7ZXZ0OmF9KSxjLmlzTGlzdGVuaW5nKCkmJmEucHJldmVudERlZmF1bHQmJmEucHJldmVudERlZmF1bHQoKSksdGhpcy5fZmlyZShDLHtldnQ6YX0pLGImJmIuX2RyYWcoYSl9LF9zZXRQb2ludGVyUG9zaXRpb246ZnVuY3Rpb24oYSl7dmFyIGIsYz10aGlzLl9nZXRDb250ZW50UG9zaXRpb24oKSxkPWEub2Zmc2V0WCxlPWEuY2xpZW50WCxmPW51bGwsZz1udWxsO2E9YT9hOndpbmRvdy5ldmVudCx2b2lkIDAhPT1hLnRvdWNoZXM/YS50b3VjaGVzLmxlbmd0aD4wJiYoYj1hLnRvdWNoZXNbMF0sZj1iLmNsaWVudFgtYy5sZWZ0LGc9Yi5jbGllbnRZLWMudG9wKTp2b2lkIDAhPT1kPyhmPWQsZz1hLm9mZnNldFkpOlwibW96aWxsYVwiPT09S2luZXRpYy5VQS5icm93c2VyPyhmPWEubGF5ZXJYLGc9YS5sYXllclkpOnZvaWQgMCE9PWUmJmMmJihmPWUtYy5sZWZ0LGc9YS5jbGllbnRZLWMudG9wKSxudWxsIT09ZiYmbnVsbCE9PWcmJih0aGlzLnBvaW50ZXJQb3M9e3g6Zix5Omd9KX0sX2dldENvbnRlbnRQb3NpdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMuY29udGVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3Q/dGhpcy5jb250ZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOnt0b3A6MCxsZWZ0OjB9O3JldHVybnt0b3A6YS50b3AsbGVmdDphLmxlZnR9fSxfYnVpbGRET006ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldENvbnRhaW5lcigpO2lmKCFhKXtpZihLaW5ldGljLlV0aWwuaXNCcm93c2VyKCkpdGhyb3dcIlN0YWdlIGhhcyBub3QgY29udGFpbmVyLiBCdXQgY29udGFpbmVyIGlzIHJlcXVpcmVkXCI7YT1LaW5ldGljLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoRCl9YS5pbm5lckhUTUw9Syx0aGlzLmNvbnRlbnQ9S2luZXRpYy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KEQpLHRoaXMuY29udGVudC5zdHlsZS5wb3NpdGlvbj1FLHRoaXMuY29udGVudC5zdHlsZS5kaXNwbGF5PUYsdGhpcy5jb250ZW50LmNsYXNzTmFtZT1HLHRoaXMuY29udGVudC5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsXCJwcmVzZW50YXRpb25cIiksYS5hcHBlbmRDaGlsZCh0aGlzLmNvbnRlbnQpLHRoaXMuYnVmZmVyQ2FudmFzPW5ldyBLaW5ldGljLlNjZW5lQ2FudmFzKHtwaXhlbFJhdGlvOjF9KSx0aGlzLmJ1ZmZlckhpdENhbnZhcz1uZXcgS2luZXRpYy5IaXRDYW52YXMsdGhpcy5fcmVzaXplRE9NKCl9LF9vbkNvbnRlbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9YS5zcGxpdChIKSxmPWUubGVuZ3RoO2ZvcihjPTA7Zj5jO2MrKylkPWVbY10sdGhpcy5jb250ZW50LmFkZEV2ZW50TGlzdGVuZXIoZCxiLCExKX0sY2FjaGU6ZnVuY3Rpb24oKXtLaW5ldGljLlV0aWwud2FybihcIkNhY2hlIGZ1bmN0aW9uIGlzIG5vdCBhbGxvd2VkIGZvciBzdGFnZS4gWW91IG1heSB1c2UgY2FjaGUgb25seSBmb3IgbGF5ZXJzLCBncm91cHMgYW5kIHNoYXBlcy5cIil9LGNsZWFyQ2FjaGU6ZnVuY3Rpb24oKXt9fSksS2luZXRpYy5VdGlsLmV4dGVuZChLaW5ldGljLlN0YWdlLEtpbmV0aWMuQ29udGFpbmVyKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyKEtpbmV0aWMuU3RhZ2UsXCJjb250YWluZXJcIiksS2luZXRpYy5GYWN0b3J5LmFkZE92ZXJsb2FkZWRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TdGFnZSxcImNvbnRhaW5lclwiKX0oKSxmdW5jdGlvbigpe0tpbmV0aWMuVXRpbC5hZGRNZXRob2RzKEtpbmV0aWMuQmFzZUxheWVyLHtfX19pbml0OmZ1bmN0aW9uKGEpe3RoaXMubm9kZVR5cGU9XCJMYXllclwiLEtpbmV0aWMuQ29udGFpbmVyLmNhbGwodGhpcyxhKX0sY3JlYXRlUE5HU3RyZWFtOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2FudmFzLl9jYW52YXMuY3JlYXRlUE5HU3RyZWFtKCl9LGdldENhbnZhczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNhbnZhc30sZ2V0SGl0Q2FudmFzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGl0Q2FudmFzfSxnZXRDb250ZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0Q2FudmFzKCkuZ2V0Q29udGV4dCgpfSxjbGVhcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRDb250ZXh0KCkuY2xlYXIoYSksdGhpcy5nZXRIaXRDYW52YXMoKS5nZXRDb250ZXh0KCkuY2xlYXIoYSksdGhpc30sc2V0WkluZGV4OmZ1bmN0aW9uKGEpe0tpbmV0aWMuTm9kZS5wcm90b3R5cGUuc2V0WkluZGV4LmNhbGwodGhpcyxhKTt2YXIgYj10aGlzLmdldFN0YWdlKCk7cmV0dXJuIGImJihiLmNvbnRlbnQucmVtb3ZlQ2hpbGQodGhpcy5nZXRDYW52YXMoKS5fY2FudmFzKSxhPGIuZ2V0Q2hpbGRyZW4oKS5sZW5ndGgtMT9iLmNvbnRlbnQuaW5zZXJ0QmVmb3JlKHRoaXMuZ2V0Q2FudmFzKCkuX2NhbnZhcyxiLmdldENoaWxkcmVuKClbYSsxXS5nZXRDYW52YXMoKS5fY2FudmFzKTpiLmNvbnRlbnQuYXBwZW5kQ2hpbGQodGhpcy5nZXRDYW52YXMoKS5fY2FudmFzKSksdGhpc30sbW92ZVRvVG9wOmZ1bmN0aW9uKCl7S2luZXRpYy5Ob2RlLnByb3RvdHlwZS5tb3ZlVG9Ub3AuY2FsbCh0aGlzKTt2YXIgYT10aGlzLmdldFN0YWdlKCk7YSYmKGEuY29udGVudC5yZW1vdmVDaGlsZCh0aGlzLmdldENhbnZhcygpLl9jYW52YXMpLGEuY29udGVudC5hcHBlbmRDaGlsZCh0aGlzLmdldENhbnZhcygpLl9jYW52YXMpKX0sbW92ZVVwOmZ1bmN0aW9uKCl7aWYoS2luZXRpYy5Ob2RlLnByb3RvdHlwZS5tb3ZlVXAuY2FsbCh0aGlzKSl7dmFyIGE9dGhpcy5nZXRTdGFnZSgpO2EmJihhLmNvbnRlbnQucmVtb3ZlQ2hpbGQodGhpcy5nZXRDYW52YXMoKS5fY2FudmFzKSx0aGlzLmluZGV4PGEuZ2V0Q2hpbGRyZW4oKS5sZW5ndGgtMT9hLmNvbnRlbnQuaW5zZXJ0QmVmb3JlKHRoaXMuZ2V0Q2FudmFzKCkuX2NhbnZhcyxhLmdldENoaWxkcmVuKClbdGhpcy5pbmRleCsxXS5nZXRDYW52YXMoKS5fY2FudmFzKTphLmNvbnRlbnQuYXBwZW5kQ2hpbGQodGhpcy5nZXRDYW52YXMoKS5fY2FudmFzKSl9fSxtb3ZlRG93bjpmdW5jdGlvbigpe2lmKEtpbmV0aWMuTm9kZS5wcm90b3R5cGUubW92ZURvd24uY2FsbCh0aGlzKSl7dmFyIGE9dGhpcy5nZXRTdGFnZSgpO2lmKGEpe3ZhciBiPWEuZ2V0Q2hpbGRyZW4oKTthLmNvbnRlbnQucmVtb3ZlQ2hpbGQodGhpcy5nZXRDYW52YXMoKS5fY2FudmFzKSxhLmNvbnRlbnQuaW5zZXJ0QmVmb3JlKHRoaXMuZ2V0Q2FudmFzKCkuX2NhbnZhcyxiW3RoaXMuaW5kZXgrMV0uZ2V0Q2FudmFzKCkuX2NhbnZhcyl9fX0sbW92ZVRvQm90dG9tOmZ1bmN0aW9uKCl7aWYoS2luZXRpYy5Ob2RlLnByb3RvdHlwZS5tb3ZlVG9Cb3R0b20uY2FsbCh0aGlzKSl7dmFyIGE9dGhpcy5nZXRTdGFnZSgpO2lmKGEpe3ZhciBiPWEuZ2V0Q2hpbGRyZW4oKTthLmNvbnRlbnQucmVtb3ZlQ2hpbGQodGhpcy5nZXRDYW52YXMoKS5fY2FudmFzKSxhLmNvbnRlbnQuaW5zZXJ0QmVmb3JlKHRoaXMuZ2V0Q2FudmFzKCkuX2NhbnZhcyxiWzFdLmdldENhbnZhcygpLl9jYW52YXMpfX19LGdldExheWVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LHJlbW92ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0Q2FudmFzKCkuX2NhbnZhcztyZXR1cm4gS2luZXRpYy5Ob2RlLnByb3RvdHlwZS5yZW1vdmUuY2FsbCh0aGlzKSxhJiZhLnBhcmVudE5vZGUmJktpbmV0aWMuVXRpbC5faXNJbkRvY3VtZW50KGEpJiZhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSksdGhpc30sZ2V0U3RhZ2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnR9fSksS2luZXRpYy5VdGlsLmV4dGVuZChLaW5ldGljLkJhc2VMYXllcixLaW5ldGljLkNvbnRhaW5lciksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLkJhc2VMYXllcixcImNsZWFyQmVmb3JlRHJhd1wiLCEwKSxLaW5ldGljLkNvbGxlY3Rpb24ubWFwTWV0aG9kcyhLaW5ldGljLkJhc2VMYXllcil9KCksZnVuY3Rpb24oKXt2YXIgYT1cIiNcIixiPVwiYmVmb3JlRHJhd1wiLGM9XCJkcmF3XCIsZD1be3g6MCx5OjB9LHt4Oi0xLHk6MH0se3g6LTEseTotMX0se3g6MCx5Oi0xfSx7eDoxLHk6LTF9LHt4OjEseTowfSx7eDoxLHk6MX0se3g6MCx5OjF9LHt4Oi0xLHk6MX1dLGU9ZC5sZW5ndGg7S2luZXRpYy5VdGlsLmFkZE1ldGhvZHMoS2luZXRpYy5MYXllcix7X19fX2luaXQ6ZnVuY3Rpb24oYSl7dGhpcy5ub2RlVHlwZT1cIkxheWVyXCIsdGhpcy5jYW52YXM9bmV3IEtpbmV0aWMuU2NlbmVDYW52YXMsdGhpcy5oaXRDYW52YXM9bmV3IEtpbmV0aWMuSGl0Q2FudmFzLEtpbmV0aWMuQmFzZUxheWVyLmNhbGwodGhpcyxhKX0sX3NldENhbnZhc1NpemU6ZnVuY3Rpb24oYSxiKXt0aGlzLmNhbnZhcy5zZXRTaXplKGEsYiksdGhpcy5oaXRDYW52YXMuc2V0U2l6ZShhLGIpfSxfdmFsaWRhdGVBZGQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5nZXRUeXBlKCk7XCJHcm91cFwiIT09YiYmXCJTaGFwZVwiIT09YiYmS2luZXRpYy5VdGlsLmVycm9yKFwiWW91IG1heSBvbmx5IGFkZCBncm91cHMgYW5kIHNoYXBlcyB0byBhIGxheWVyLlwiKX0sZ2V0SW50ZXJzZWN0aW9uOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZixnO2lmKCF0aGlzLmhpdEdyYXBoRW5hYmxlZCgpfHwhdGhpcy5pc1Zpc2libGUoKSlyZXR1cm4gbnVsbDtmb3IoYz0wO2U+YztjKyspe2lmKGY9ZFtjXSxiPXRoaXMuX2dldEludGVyc2VjdGlvbih7eDphLngrZi54LHk6YS55K2YueX0pLGc9Yi5zaGFwZSlyZXR1cm4gZztpZighYi5hbnRpYWxpYXNlZClyZXR1cm4gbnVsbH19LF9nZXRJbnRlcnNlY3Rpb246ZnVuY3Rpb24oYil7dmFyIGMsZCxlPXRoaXMuaGl0Q2FudmFzLmNvbnRleHQuX2NvbnRleHQuZ2V0SW1hZ2VEYXRhKGIueCxiLnksMSwxKS5kYXRhLGY9ZVszXTtyZXR1cm4gMjU1PT09Zj8oYz1LaW5ldGljLlV0aWwuX3JnYlRvSGV4KGVbMF0sZVsxXSxlWzJdKSxkPUtpbmV0aWMuc2hhcGVzW2ErY10se3NoYXBlOmR9KTpmPjA/e2FudGlhbGlhc2VkOiEwfTp7fX0sZHJhd1NjZW5lOmZ1bmN0aW9uKGEsZCl7dmFyIGU9dGhpcy5nZXRMYXllcigpLGY9YXx8ZSYmZS5nZXRDYW52YXMoKTtyZXR1cm4gdGhpcy5fZmlyZShiLHtub2RlOnRoaXN9KSx0aGlzLmdldENsZWFyQmVmb3JlRHJhdygpJiZmLmdldENvbnRleHQoKS5jbGVhcigpLEtpbmV0aWMuQ29udGFpbmVyLnByb3RvdHlwZS5kcmF3U2NlbmUuY2FsbCh0aGlzLGYsZCksdGhpcy5fZmlyZShjLHtub2RlOnRoaXN9KSx0aGlzfSxfYXBwbHlUcmFuc2Zvcm06ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEuZ2V0QWJzb2x1dGVUcmFuc2Zvcm0oYykuZ2V0TWF0cml4KCk7Yi50cmFuc2Zvcm0oZFswXSxkWzFdLGRbMl0sZFszXSxkWzRdLGRbNV0pfSxkcmF3SGl0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRMYXllcigpLGQ9YXx8YyYmYy5oaXRDYW52YXM7cmV0dXJuIGMmJmMuZ2V0Q2xlYXJCZWZvcmVEcmF3KCkmJmMuZ2V0SGl0Q2FudmFzKCkuZ2V0Q29udGV4dCgpLmNsZWFyKCksS2luZXRpYy5Db250YWluZXIucHJvdG90eXBlLmRyYXdIaXQuY2FsbCh0aGlzLGQsYiksdGhpc30sY2xlYXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0Q29udGV4dCgpLmNsZWFyKGEpLHRoaXMuZ2V0SGl0Q2FudmFzKCkuZ2V0Q29udGV4dCgpLmNsZWFyKGEpLHRoaXN9LHNldFZpc2libGU6ZnVuY3Rpb24oYSl7cmV0dXJuIEtpbmV0aWMuTm9kZS5wcm90b3R5cGUuc2V0VmlzaWJsZS5jYWxsKHRoaXMsYSksYT8odGhpcy5nZXRDYW52YXMoKS5fY2FudmFzLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiLHRoaXMuaGl0Q2FudmFzLl9jYW52YXMuc3R5bGUuZGlzcGxheT1cImJsb2NrXCIpOih0aGlzLmdldENhbnZhcygpLl9jYW52YXMuc3R5bGUuZGlzcGxheT1cIm5vbmVcIix0aGlzLmhpdENhbnZhcy5fY2FudmFzLnN0eWxlLmRpc3BsYXk9XCJub25lXCIpLHRoaXN9LGVuYWJsZUhpdEdyYXBoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2V0SGl0R3JhcGhFbmFibGVkKCEwKSx0aGlzfSxkaXNhYmxlSGl0R3JhcGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXRIaXRHcmFwaEVuYWJsZWQoITEpLHRoaXN9fSksS2luZXRpYy5VdGlsLmV4dGVuZChLaW5ldGljLkxheWVyLEtpbmV0aWMuQmFzZUxheWVyKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuTGF5ZXIsXCJoaXRHcmFwaEVuYWJsZWRcIiwhMCksS2luZXRpYy5Db2xsZWN0aW9uLm1hcE1ldGhvZHMoS2luZXRpYy5MYXllcil9KCksZnVuY3Rpb24oKXtLaW5ldGljLlV0aWwuYWRkTWV0aG9kcyhLaW5ldGljLkZhc3RMYXllcix7X19fX2luaXQ6ZnVuY3Rpb24oYSl7dGhpcy5ub2RlVHlwZT1cIkxheWVyXCIsdGhpcy5jYW52YXM9bmV3IEtpbmV0aWMuU2NlbmVDYW52YXMsS2luZXRpYy5CYXNlTGF5ZXIuY2FsbCh0aGlzLGEpfSxfdmFsaWRhdGVBZGQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5nZXRUeXBlKCk7XCJTaGFwZVwiIT09YiYmS2luZXRpYy5VdGlsLmVycm9yKFwiWW91IG1heSBvbmx5IGFkZCBzaGFwZXMgdG8gYSBmYXN0IGxheWVyLlwiKX0sX3NldENhbnZhc1NpemU6ZnVuY3Rpb24oYSxiKXt0aGlzLmNhbnZhcy5zZXRTaXplKGEsYil9LGhpdEdyYXBoRW5hYmxlZDpmdW5jdGlvbigpe3JldHVybiExfSxnZXRJbnRlcnNlY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0sZHJhd1NjZW5lOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0TGF5ZXIoKSxjPWF8fGImJmIuZ2V0Q2FudmFzKCk7cmV0dXJuIHRoaXMuZ2V0Q2xlYXJCZWZvcmVEcmF3KCkmJmMuZ2V0Q29udGV4dCgpLmNsZWFyKCksS2luZXRpYy5Db250YWluZXIucHJvdG90eXBlLmRyYXdTY2VuZS5jYWxsKHRoaXMsYyksdGhpc30sX2FwcGx5VHJhbnNmb3JtOmZ1bmN0aW9uKGEsYixjKXtpZighY3x8Yy5faWQhPT10aGlzLl9pZCl7dmFyIGQ9YS5nZXRUcmFuc2Zvcm0oKS5nZXRNYXRyaXgoKTtiLnRyYW5zZm9ybShkWzBdLGRbMV0sZFsyXSxkWzNdLGRbNF0sZFs1XSl9fSxkcmF3OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZHJhd1NjZW5lKCksdGhpc30sY2xlYXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0Q29udGV4dCgpLmNsZWFyKGEpLHRoaXN9LHNldFZpc2libGU6ZnVuY3Rpb24oYSl7cmV0dXJuIEtpbmV0aWMuTm9kZS5wcm90b3R5cGUuc2V0VmlzaWJsZS5jYWxsKHRoaXMsYSksdGhpcy5nZXRDYW52YXMoKS5fY2FudmFzLnN0eWxlLmRpc3BsYXk9YT9cImJsb2NrXCI6XCJub25lXCIsdGhpc319KSxLaW5ldGljLlV0aWwuZXh0ZW5kKEtpbmV0aWMuRmFzdExheWVyLEtpbmV0aWMuQmFzZUxheWVyKSxLaW5ldGljLkNvbGxlY3Rpb24ubWFwTWV0aG9kcyhLaW5ldGljLkZhc3RMYXllcil9KCksZnVuY3Rpb24oKXtLaW5ldGljLlV0aWwuYWRkTWV0aG9kcyhLaW5ldGljLkdyb3VwLHtfX19pbml0OmZ1bmN0aW9uKGEpe3RoaXMubm9kZVR5cGU9XCJHcm91cFwiLEtpbmV0aWMuQ29udGFpbmVyLmNhbGwodGhpcyxhKX0sX3ZhbGlkYXRlQWRkOmZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2V0VHlwZSgpO1wiR3JvdXBcIiE9PWImJlwiU2hhcGVcIiE9PWImJktpbmV0aWMuVXRpbC5lcnJvcihcIllvdSBtYXkgb25seSBhZGQgZ3JvdXBzIGFuZCBzaGFwZXMgdG8gZ3JvdXBzLlwiKX19KSxLaW5ldGljLlV0aWwuZXh0ZW5kKEtpbmV0aWMuR3JvdXAsS2luZXRpYy5Db250YWluZXIpLEtpbmV0aWMuQ29sbGVjdGlvbi5tYXBNZXRob2RzKEtpbmV0aWMuR3JvdXApfSgpLGZ1bmN0aW9uKCl7S2luZXRpYy5SZWN0PWZ1bmN0aW9uKGEpe3RoaXMuX19faW5pdChhKX0sS2luZXRpYy5SZWN0LnByb3RvdHlwZT17X19faW5pdDpmdW5jdGlvbihhKXtLaW5ldGljLlNoYXBlLmNhbGwodGhpcyxhKSx0aGlzLmNsYXNzTmFtZT1cIlJlY3RcIix0aGlzLnNjZW5lRnVuYyh0aGlzLl9zY2VuZUZ1bmMpfSxfc2NlbmVGdW5jOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0Q29ybmVyUmFkaXVzKCksYz10aGlzLmdldFdpZHRoKCksZD10aGlzLmdldEhlaWdodCgpO2EuYmVnaW5QYXRoKCksYj8oYS5tb3ZlVG8oYiwwKSxhLmxpbmVUbyhjLWIsMCksYS5hcmMoYy1iLGIsYiwzKk1hdGguUEkvMiwwLCExKSxhLmxpbmVUbyhjLGQtYiksYS5hcmMoYy1iLGQtYixiLDAsTWF0aC5QSS8yLCExKSxhLmxpbmVUbyhiLGQpLGEuYXJjKGIsZC1iLGIsTWF0aC5QSS8yLE1hdGguUEksITEpLGEubGluZVRvKDAsYiksYS5hcmMoYixiLGIsTWF0aC5QSSwzKk1hdGguUEkvMiwhMSkpOmEucmVjdCgwLDAsYyxkKSxhLmNsb3NlUGF0aCgpLGEuZmlsbFN0cm9rZVNoYXBlKHRoaXMpfX0sS2luZXRpYy5VdGlsLmV4dGVuZChLaW5ldGljLlJlY3QsS2luZXRpYy5TaGFwZSksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlJlY3QsXCJjb3JuZXJSYWRpdXNcIiwwKSxLaW5ldGljLkNvbGxlY3Rpb24ubWFwTWV0aG9kcyhLaW5ldGljLlJlY3QpfSgpLGZ1bmN0aW9uKCl7dmFyIGE9MipNYXRoLlBJLTFlLTQsYj1cIkNpcmNsZVwiO0tpbmV0aWMuQ2lyY2xlPWZ1bmN0aW9uKGEpe3RoaXMuX19faW5pdChhKX0sS2luZXRpYy5DaXJjbGUucHJvdG90eXBlPXtfX19pbml0OmZ1bmN0aW9uKGEpe0tpbmV0aWMuU2hhcGUuY2FsbCh0aGlzLGEpLHRoaXMuY2xhc3NOYW1lPWIsdGhpcy5zY2VuZUZ1bmModGhpcy5fc2NlbmVGdW5jKX0sX3NjZW5lRnVuYzpmdW5jdGlvbihiKXtiLmJlZ2luUGF0aCgpLGIuYXJjKDAsMCx0aGlzLmdldFJhZGl1cygpLDAsYSwhMSksYi5jbG9zZVBhdGgoKSxiLmZpbGxTdHJva2VTaGFwZSh0aGlzKX0sZ2V0V2lkdGg6ZnVuY3Rpb24oKXtyZXR1cm4gMip0aGlzLmdldFJhZGl1cygpfSxnZXRIZWlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gMip0aGlzLmdldFJhZGl1cygpfSxzZXRXaWR0aDpmdW5jdGlvbihhKXtLaW5ldGljLk5vZGUucHJvdG90eXBlLnNldFdpZHRoLmNhbGwodGhpcyxhKSx0aGlzLnNldFJhZGl1cyhhLzIpfSxzZXRIZWlnaHQ6ZnVuY3Rpb24oYSl7S2luZXRpYy5Ob2RlLnByb3RvdHlwZS5zZXRIZWlnaHQuY2FsbCh0aGlzLGEpLHRoaXMuc2V0UmFkaXVzKGEvMil9fSxLaW5ldGljLlV0aWwuZXh0ZW5kKEtpbmV0aWMuQ2lyY2xlLEtpbmV0aWMuU2hhcGUpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5DaXJjbGUsXCJyYWRpdXNcIiwwKSxLaW5ldGljLkNvbGxlY3Rpb24ubWFwTWV0aG9kcyhLaW5ldGljLkNpcmNsZSl9KCksZnVuY3Rpb24oKXt2YXIgYT0yKk1hdGguUEktMWUtNCxiPVwiRWxsaXBzZVwiO0tpbmV0aWMuRWxsaXBzZT1mdW5jdGlvbihhKXt0aGlzLl9fX2luaXQoYSl9LEtpbmV0aWMuRWxsaXBzZS5wcm90b3R5cGU9e19fX2luaXQ6ZnVuY3Rpb24oYSl7S2luZXRpYy5TaGFwZS5jYWxsKHRoaXMsYSksdGhpcy5jbGFzc05hbWU9Yix0aGlzLnNjZW5lRnVuYyh0aGlzLl9zY2VuZUZ1bmMpfSxfc2NlbmVGdW5jOmZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMuZ2V0UmFkaXVzKCksZD1jLngsZT1jLnk7Yi5iZWdpblBhdGgoKSxiLnNhdmUoKSxkIT09ZSYmYi5zY2FsZSgxLGUvZCksYi5hcmMoMCwwLGQsMCxhLCExKSxiLnJlc3RvcmUoKSxiLmNsb3NlUGF0aCgpLGIuZmlsbFN0cm9rZVNoYXBlKHRoaXMpfSxnZXRXaWR0aDpmdW5jdGlvbigpe3JldHVybiAyKnRoaXMuZ2V0UmFkaXVzKCkueH0sZ2V0SGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIDIqdGhpcy5nZXRSYWRpdXMoKS55fSxzZXRXaWR0aDpmdW5jdGlvbihhKXtLaW5ldGljLk5vZGUucHJvdG90eXBlLnNldFdpZHRoLmNhbGwodGhpcyxhKSx0aGlzLnNldFJhZGl1cyh7eDphLzJ9KX0sc2V0SGVpZ2h0OmZ1bmN0aW9uKGEpe0tpbmV0aWMuTm9kZS5wcm90b3R5cGUuc2V0SGVpZ2h0LmNhbGwodGhpcyxhKSx0aGlzLnNldFJhZGl1cyh7eTphLzJ9KX19LEtpbmV0aWMuVXRpbC5leHRlbmQoS2luZXRpYy5FbGxpcHNlLEtpbmV0aWMuU2hhcGUpLEtpbmV0aWMuRmFjdG9yeS5hZGRDb21wb25lbnRzR2V0dGVyU2V0dGVyKEtpbmV0aWMuRWxsaXBzZSxcInJhZGl1c1wiLFtcInhcIixcInlcIl0pLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5FbGxpcHNlLFwicmFkaXVzWFwiLDApLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5FbGxpcHNlLFwicmFkaXVzWVwiLDApLEtpbmV0aWMuQ29sbGVjdGlvbi5tYXBNZXRob2RzKEtpbmV0aWMuRWxsaXBzZSl9KCksZnVuY3Rpb24oKXt2YXIgYT0yKk1hdGguUEktMWUtNDtLaW5ldGljLlJpbmc9ZnVuY3Rpb24oYSl7dGhpcy5fX19pbml0KGEpfSxLaW5ldGljLlJpbmcucHJvdG90eXBlPXtfX19pbml0OmZ1bmN0aW9uKGEpe0tpbmV0aWMuU2hhcGUuY2FsbCh0aGlzLGEpLHRoaXMuY2xhc3NOYW1lPVwiUmluZ1wiLHRoaXMuc2NlbmVGdW5jKHRoaXMuX3NjZW5lRnVuYyl9LF9zY2VuZUZ1bmM6ZnVuY3Rpb24oYil7Yi5iZWdpblBhdGgoKSxiLmFyYygwLDAsdGhpcy5nZXRJbm5lclJhZGl1cygpLDAsYSwhMSksYi5tb3ZlVG8odGhpcy5nZXRPdXRlclJhZGl1cygpLDApLGIuYXJjKDAsMCx0aGlzLmdldE91dGVyUmFkaXVzKCksYSwwLCEwKSxiLmNsb3NlUGF0aCgpLGIuZmlsbFN0cm9rZVNoYXBlKHRoaXMpfSxnZXRXaWR0aDpmdW5jdGlvbigpe3JldHVybiAyKnRoaXMuZ2V0T3V0ZXJSYWRpdXMoKX0sZ2V0SGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIDIqdGhpcy5nZXRPdXRlclJhZGl1cygpfSxzZXRXaWR0aDpmdW5jdGlvbihhKXtLaW5ldGljLk5vZGUucHJvdG90eXBlLnNldFdpZHRoLmNhbGwodGhpcyxhKSx0aGlzLnNldE91dGVyUmFkaXVzKGEvMil9LHNldEhlaWdodDpmdW5jdGlvbihhKXtLaW5ldGljLk5vZGUucHJvdG90eXBlLnNldEhlaWdodC5jYWxsKHRoaXMsYSksdGhpcy5zZXRPdXRlclJhZGl1cyhhLzIpfX0sS2luZXRpYy5VdGlsLmV4dGVuZChLaW5ldGljLlJpbmcsS2luZXRpYy5TaGFwZSksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlJpbmcsXCJpbm5lclJhZGl1c1wiLDApLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5SaW5nLFwib3V0ZXJSYWRpdXNcIiwwKSxLaW5ldGljLkNvbGxlY3Rpb24ubWFwTWV0aG9kcyhLaW5ldGljLlJpbmcpfSgpLGZ1bmN0aW9uKCl7S2luZXRpYy5XZWRnZT1mdW5jdGlvbihhKXt0aGlzLl9fX2luaXQoYSl9LEtpbmV0aWMuV2VkZ2UucHJvdG90eXBlPXtfX19pbml0OmZ1bmN0aW9uKGEpe0tpbmV0aWMuU2hhcGUuY2FsbCh0aGlzLGEpLHRoaXMuY2xhc3NOYW1lPVwiV2VkZ2VcIix0aGlzLnNjZW5lRnVuYyh0aGlzLl9zY2VuZUZ1bmMpfSxfc2NlbmVGdW5jOmZ1bmN0aW9uKGEpe2EuYmVnaW5QYXRoKCksYS5hcmMoMCwwLHRoaXMuZ2V0UmFkaXVzKCksMCxLaW5ldGljLmdldEFuZ2xlKHRoaXMuZ2V0QW5nbGUoKSksdGhpcy5nZXRDbG9ja3dpc2UoKSksYS5saW5lVG8oMCwwKSxhLmNsb3NlUGF0aCgpLGEuZmlsbFN0cm9rZVNoYXBlKHRoaXMpfX0sS2luZXRpYy5VdGlsLmV4dGVuZChLaW5ldGljLldlZGdlLEtpbmV0aWMuU2hhcGUpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5XZWRnZSxcInJhZGl1c1wiLDApLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5XZWRnZSxcImFuZ2xlXCIsMCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLldlZGdlLFwiY2xvY2t3aXNlXCIsITEpLEtpbmV0aWMuRmFjdG9yeS5iYWNrQ29tcGF0KEtpbmV0aWMuV2VkZ2Use2FuZ2xlRGVnOlwiYW5nbGVcIixnZXRBbmdsZURlZzpcImdldEFuZ2xlXCIsc2V0QW5nbGVEZWc6XCJzZXRBbmdsZVwifSksS2luZXRpYy5Db2xsZWN0aW9uLm1hcE1ldGhvZHMoS2luZXRpYy5XZWRnZSl9KCksZnVuY3Rpb24oKXtNYXRoLlBJLzE4MDtLaW5ldGljLkFyYz1mdW5jdGlvbihhKXt0aGlzLl9fX2luaXQoYSl9LEtpbmV0aWMuQXJjLnByb3RvdHlwZT17X19faW5pdDpmdW5jdGlvbihhKXtLaW5ldGljLlNoYXBlLmNhbGwodGhpcyxhKSx0aGlzLmNsYXNzTmFtZT1cIkFyY1wiLHRoaXMuc2NlbmVGdW5jKHRoaXMuX3NjZW5lRnVuYyl9LF9zY2VuZUZ1bmM6ZnVuY3Rpb24oYSl7dmFyIGI9S2luZXRpYy5nZXRBbmdsZSh0aGlzLmFuZ2xlKCkpLGM9dGhpcy5jbG9ja3dpc2UoKTthLmJlZ2luUGF0aCgpLGEuYXJjKDAsMCx0aGlzLmdldE91dGVyUmFkaXVzKCksMCxiLGMpLGEuYXJjKDAsMCx0aGlzLmdldElubmVyUmFkaXVzKCksYiwwLCFjKSxhLmNsb3NlUGF0aCgpLGEuZmlsbFN0cm9rZVNoYXBlKHRoaXMpfX0sS2luZXRpYy5VdGlsLmV4dGVuZChLaW5ldGljLkFyYyxLaW5ldGljLlNoYXBlKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuQXJjLFwiaW5uZXJSYWRpdXNcIiwwKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuQXJjLFwib3V0ZXJSYWRpdXNcIiwwKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuQXJjLFwiYW5nbGVcIiwwKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuQXJjLFwiY2xvY2t3aXNlXCIsITEpLEtpbmV0aWMuQ29sbGVjdGlvbi5tYXBNZXRob2RzKEtpbmV0aWMuQXJjKX0oKSxmdW5jdGlvbigpe3ZhciBhPVwiSW1hZ2VcIjtLaW5ldGljLkltYWdlPWZ1bmN0aW9uKGEpe3RoaXMuX19faW5pdChhKX0sS2luZXRpYy5JbWFnZS5wcm90b3R5cGU9e19fX2luaXQ6ZnVuY3Rpb24oYil7S2luZXRpYy5TaGFwZS5jYWxsKHRoaXMsYiksdGhpcy5jbGFzc05hbWU9YSx0aGlzLnNjZW5lRnVuYyh0aGlzLl9zY2VuZUZ1bmMpLHRoaXMuaGl0RnVuYyh0aGlzLl9oaXRGdW5jKX0sX3VzZUJ1ZmZlckNhbnZhczpmdW5jdGlvbigpe3JldHVybih0aGlzLmhhc1NoYWRvdygpfHwxIT09dGhpcy5nZXRBYnNvbHV0ZU9wYWNpdHkoKSkmJnRoaXMuaGFzU3Ryb2tlKCl9LF9zY2VuZUZ1bmM6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZj10aGlzLmdldFdpZHRoKCksZz10aGlzLmdldEhlaWdodCgpLGg9dGhpcy5nZXRJbWFnZSgpO2gmJihiPXRoaXMuZ2V0Q3JvcCgpLGM9Yi53aWR0aCxkPWIuaGVpZ2h0LGU9YyYmZD9baCxiLngsYi55LGMsZCwwLDAsZixnXTpbaCwwLDAsZixnXSksYS5iZWdpblBhdGgoKSxhLnJlY3QoMCwwLGYsZyksYS5jbG9zZVBhdGgoKSxhLmZpbGxTdHJva2VTaGFwZSh0aGlzKSxoJiZhLmRyYXdJbWFnZS5hcHBseShhLGUpfSxfaGl0RnVuYzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldFdpZHRoKCksYz10aGlzLmdldEhlaWdodCgpO2EuYmVnaW5QYXRoKCksYS5yZWN0KDAsMCxiLGMpLGEuY2xvc2VQYXRoKCksYS5maWxsU3Ryb2tlU2hhcGUodGhpcyl9LGdldFdpZHRoOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRJbWFnZSgpO3JldHVybiB0aGlzLmF0dHJzLndpZHRofHwoYT9hLndpZHRoOjApfSxnZXRIZWlnaHQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldEltYWdlKCk7cmV0dXJuIHRoaXMuYXR0cnMuaGVpZ2h0fHwoYT9hLmhlaWdodDowKX19LEtpbmV0aWMuVXRpbC5leHRlbmQoS2luZXRpYy5JbWFnZSxLaW5ldGljLlNoYXBlKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuSW1hZ2UsXCJpbWFnZVwiKSxLaW5ldGljLkZhY3RvcnkuYWRkQ29tcG9uZW50c0dldHRlclNldHRlcihLaW5ldGljLkltYWdlLFwiY3JvcFwiLFtcInhcIixcInlcIixcIndpZHRoXCIsXCJoZWlnaHRcIl0pLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5JbWFnZSxcImNyb3BYXCIsMCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLkltYWdlLFwiY3JvcFlcIiwwKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuSW1hZ2UsXCJjcm9wV2lkdGhcIiwwKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuSW1hZ2UsXCJjcm9wSGVpZ2h0XCIsMCksS2luZXRpYy5Db2xsZWN0aW9uLm1hcE1ldGhvZHMoS2luZXRpYy5JbWFnZSl9KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe2EuZmlsbFRleHQodGhpcy5wYXJ0aWFsVGV4dCwwLDApfWZ1bmN0aW9uIGIoYSl7YS5zdHJva2VUZXh0KHRoaXMucGFydGlhbFRleHQsMCwwKX12YXIgYz1cImF1dG9cIixkPVwiY2VudGVyXCIsZT1cIkNoYW5nZS5raW5ldGljXCIsZj1cIjJkXCIsZz1cIi1cIixoPVwiXCIsaT1cImxlZnRcIixqPVwidGV4dFwiLGs9XCJUZXh0XCIsbD1cIm1pZGRsZVwiLG09XCJub3JtYWxcIixuPVwicHggXCIsbz1cIiBcIixwPVwicmlnaHRcIixxPVwid29yZFwiLHI9XCJjaGFyXCIscz1cIm5vbmVcIix0PVtcImZvbnRGYW1pbHlcIixcImZvbnRTaXplXCIsXCJmb250U3R5bGVcIixcImZvbnRWYXJpYW50XCIsXCJwYWRkaW5nXCIsXCJhbGlnblwiLFwibGluZUhlaWdodFwiLFwidGV4dFwiLFwid2lkdGhcIixcImhlaWdodFwiLFwid3JhcFwiXSx1PXQubGVuZ3RoLHY9S2luZXRpYy5VdGlsLmNyZWF0ZUNhbnZhc0VsZW1lbnQoKS5nZXRDb250ZXh0KGYpO0tpbmV0aWMuVGV4dD1mdW5jdGlvbihhKXt0aGlzLl9fX2luaXQoYSl9LEtpbmV0aWMuVGV4dC5wcm90b3R5cGU9e19fX2luaXQ6ZnVuY3Rpb24oZCl7dmFyIGY9dGhpczt2b2lkIDA9PT1kLndpZHRoJiYoZC53aWR0aD1jKSx2b2lkIDA9PT1kLmhlaWdodCYmKGQuaGVpZ2h0PWMpLEtpbmV0aWMuU2hhcGUuY2FsbCh0aGlzLGQpLHRoaXMuX2ZpbGxGdW5jPWEsdGhpcy5fc3Ryb2tlRnVuYz1iLHRoaXMuY2xhc3NOYW1lPWs7Zm9yKHZhciBnPTA7dT5nO2crKyl0aGlzLm9uKHRbZ10rZSxmLl9zZXRUZXh0RGF0YSk7dGhpcy5fc2V0VGV4dERhdGEoKSx0aGlzLnNjZW5lRnVuYyh0aGlzLl9zY2VuZUZ1bmMpLHRoaXMuaGl0RnVuYyh0aGlzLl9oaXRGdW5jKX0sX3NjZW5lRnVuYzpmdW5jdGlvbihhKXt2YXIgYixjPXRoaXMuZ2V0UGFkZGluZygpLGU9dGhpcy5nZXRUZXh0SGVpZ2h0KCksZj10aGlzLmdldExpbmVIZWlnaHQoKSplLGc9dGhpcy50ZXh0QXJyLGg9Zy5sZW5ndGgsaj10aGlzLmdldFdpZHRoKCk7Zm9yKGEuc2V0QXR0cihcImZvbnRcIix0aGlzLl9nZXRDb250ZXh0Rm9udCgpKSxhLnNldEF0dHIoXCJ0ZXh0QmFzZWxpbmVcIixsKSxhLnNldEF0dHIoXCJ0ZXh0QWxpZ25cIixpKSxhLnNhdmUoKSxhLnRyYW5zbGF0ZShjLDApLGEudHJhbnNsYXRlKDAsYytlLzIpLGI9MDtoPmI7YisrKXt2YXIgaz1nW2JdLG09ay50ZXh0LG49ay53aWR0aDthLnNhdmUoKSx0aGlzLmdldEFsaWduKCk9PT1wP2EudHJhbnNsYXRlKGotbi0yKmMsMCk6dGhpcy5nZXRBbGlnbigpPT09ZCYmYS50cmFuc2xhdGUoKGotbi0yKmMpLzIsMCksdGhpcy5wYXJ0aWFsVGV4dD1tLGEuZmlsbFN0cm9rZVNoYXBlKHRoaXMpLGEucmVzdG9yZSgpLGEudHJhbnNsYXRlKDAsZil9YS5yZXN0b3JlKCl9LF9oaXRGdW5jOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0V2lkdGgoKSxjPXRoaXMuZ2V0SGVpZ2h0KCk7YS5iZWdpblBhdGgoKSxhLnJlY3QoMCwwLGIsYyksYS5jbG9zZVBhdGgoKSxhLmZpbGxTdHJva2VTaGFwZSh0aGlzKX0sc2V0VGV4dDpmdW5jdGlvbihhKXt2YXIgYj1LaW5ldGljLlV0aWwuX2lzU3RyaW5nKGEpP2E6YS50b1N0cmluZygpO3JldHVybiB0aGlzLl9zZXRBdHRyKGosYiksdGhpc30sZ2V0V2lkdGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hdHRycy53aWR0aD09PWM/dGhpcy5nZXRUZXh0V2lkdGgoKSsyKnRoaXMuZ2V0UGFkZGluZygpOnRoaXMuYXR0cnMud2lkdGh9LGdldEhlaWdodDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmF0dHJzLmhlaWdodD09PWM/dGhpcy5nZXRUZXh0SGVpZ2h0KCkqdGhpcy50ZXh0QXJyLmxlbmd0aCp0aGlzLmdldExpbmVIZWlnaHQoKSsyKnRoaXMuZ2V0UGFkZGluZygpOnRoaXMuYXR0cnMuaGVpZ2h0fSxnZXRUZXh0V2lkdGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0V2lkdGh9LGdldFRleHRIZWlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0SGVpZ2h0fSxfZ2V0VGV4dFNpemU6ZnVuY3Rpb24oYSl7dmFyIGIsYz12LGQ9dGhpcy5nZXRGb250U2l6ZSgpO3JldHVybiBjLnNhdmUoKSxjLmZvbnQ9dGhpcy5fZ2V0Q29udGV4dEZvbnQoKSxiPWMubWVhc3VyZVRleHQoYSksYy5yZXN0b3JlKCkse3dpZHRoOmIud2lkdGgsaGVpZ2h0OnBhcnNlSW50KGQsMTApfX0sX2dldENvbnRleHRGb250OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0Rm9udFN0eWxlKCkrbyt0aGlzLmdldEZvbnRWYXJpYW50KCkrbyt0aGlzLmdldEZvbnRTaXplKCkrbit0aGlzLmdldEZvbnRGYW1pbHkoKX0sX2FkZFRleHRMaW5lOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMudGV4dEFyci5wdXNoKHt0ZXh0OmEsd2lkdGg6Yn0pfSxfZ2V0VGV4dFdpZHRoOmZ1bmN0aW9uKGEpe3JldHVybiB2Lm1lYXN1cmVUZXh0KGEpLndpZHRofSxfc2V0VGV4dERhdGE6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldFRleHQoKS5zcGxpdChcIlxcblwiKSxiPSt0aGlzLmdldEZvbnRTaXplKCksZD0wLGU9dGhpcy5nZXRMaW5lSGVpZ2h0KCkqYixmPXRoaXMuYXR0cnMud2lkdGgsaD10aGlzLmF0dHJzLmhlaWdodCxpPWYhPT1jLGo9aCE9PWMsaz10aGlzLmdldFBhZGRpbmcoKSxsPWYtMiprLG09aC0yKmssbj0wLHA9dGhpcy5nZXRXcmFwKCkscT1wIT09cyx0PXAhPT1yJiZxO3RoaXMudGV4dEFycj1bXSx2LnNhdmUoKSx2LmZvbnQ9dGhpcy5fZ2V0Q29udGV4dEZvbnQoKTtcclxuZm9yKHZhciB1PTAsdz1hLmxlbmd0aDt3PnU7Kyt1KXt2YXIgeD1hW3VdLHk9dGhpcy5fZ2V0VGV4dFdpZHRoKHgpO2lmKGkmJnk+bClmb3IoO3gubGVuZ3RoPjA7KXtmb3IodmFyIHo9MCxBPXgubGVuZ3RoLEI9XCJcIixDPTA7QT56Oyl7dmFyIEQ9eitBPj4+MSxFPXguc2xpY2UoMCxEKzEpLEY9dGhpcy5fZ2V0VGV4dFdpZHRoKEUpO2w+PUY/KHo9RCsxLEI9RSxDPUYpOkE9RH1pZighQilicmVhaztpZih0KXt2YXIgRz1NYXRoLm1heChCLmxhc3RJbmRleE9mKG8pLEIubGFzdEluZGV4T2YoZykpKzE7Rz4wJiYoej1HLEI9Qi5zbGljZSgwLHopLEM9dGhpcy5fZ2V0VGV4dFdpZHRoKEIpKX1pZih0aGlzLl9hZGRUZXh0TGluZShCLEMpLGQ9TWF0aC5tYXgoZCxDKSxuKz1lLCFxfHxqJiZuK2U+bSlicmVhaztpZih4PXguc2xpY2UoeikseC5sZW5ndGg+MCYmKHk9dGhpcy5fZ2V0VGV4dFdpZHRoKHgpLGw+PXkpKXt0aGlzLl9hZGRUZXh0TGluZSh4LHkpLG4rPWUsZD1NYXRoLm1heChkLHkpO2JyZWFrfX1lbHNlIHRoaXMuX2FkZFRleHRMaW5lKHgseSksbis9ZSxkPU1hdGgubWF4KGQseSk7aWYoaiYmbitlPm0pYnJlYWt9di5yZXN0b3JlKCksdGhpcy50ZXh0SGVpZ2h0PWIsdGhpcy50ZXh0V2lkdGg9ZH19LEtpbmV0aWMuVXRpbC5leHRlbmQoS2luZXRpYy5UZXh0LEtpbmV0aWMuU2hhcGUpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5UZXh0LFwiZm9udEZhbWlseVwiLFwiQXJpYWxcIiksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlRleHQsXCJmb250U2l6ZVwiLDEyKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuVGV4dCxcImZvbnRTdHlsZVwiLG0pLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5UZXh0LFwiZm9udFZhcmlhbnRcIixtKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuVGV4dCxcInBhZGRpbmdcIiwwKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuVGV4dCxcImFsaWduXCIsaSksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlRleHQsXCJsaW5lSGVpZ2h0XCIsMSksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlRleHQsXCJ3cmFwXCIscSksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlcihLaW5ldGljLlRleHQsXCJ0ZXh0XCIsaCksS2luZXRpYy5GYWN0b3J5LmFkZE92ZXJsb2FkZWRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5UZXh0LFwidGV4dFwiKSxLaW5ldGljLkNvbGxlY3Rpb24ubWFwTWV0aG9kcyhLaW5ldGljLlRleHQpfSgpLGZ1bmN0aW9uKCl7S2luZXRpYy5MaW5lPWZ1bmN0aW9uKGEpe3RoaXMuX19faW5pdChhKX0sS2luZXRpYy5MaW5lLnByb3RvdHlwZT17X19faW5pdDpmdW5jdGlvbihhKXtLaW5ldGljLlNoYXBlLmNhbGwodGhpcyxhKSx0aGlzLmNsYXNzTmFtZT1cIkxpbmVcIix0aGlzLm9uKFwicG9pbnRzQ2hhbmdlLmtpbmV0aWMgdGVuc2lvbkNoYW5nZS5raW5ldGljIGNsb3NlZENoYW5nZS5raW5ldGljXCIsZnVuY3Rpb24oKXt0aGlzLl9jbGVhckNhY2hlKFwidGVuc2lvblBvaW50c1wiKX0pLHRoaXMuc2NlbmVGdW5jKHRoaXMuX3NjZW5lRnVuYyl9LF9zY2VuZUZ1bmM6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGU9dGhpcy5nZXRQb2ludHMoKSxmPWUubGVuZ3RoLGc9dGhpcy5nZXRUZW5zaW9uKCksaD10aGlzLmdldENsb3NlZCgpO2lmKGEuYmVnaW5QYXRoKCksYS5tb3ZlVG8oZVswXSxlWzFdKSwwIT09ZyYmZj40KXtmb3IoYj10aGlzLmdldFRlbnNpb25Qb2ludHMoKSxjPWIubGVuZ3RoLGQ9aD8wOjQsaHx8YS5xdWFkcmF0aWNDdXJ2ZVRvKGJbMF0sYlsxXSxiWzJdLGJbM10pO2MtMj5kOylhLmJlemllckN1cnZlVG8oYltkKytdLGJbZCsrXSxiW2QrK10sYltkKytdLGJbZCsrXSxiW2QrK10pO2h8fGEucXVhZHJhdGljQ3VydmVUbyhiW2MtMl0sYltjLTFdLGVbZi0yXSxlW2YtMV0pfWVsc2UgZm9yKGQ9MjtmPmQ7ZCs9MilhLmxpbmVUbyhlW2RdLGVbZCsxXSk7aD8oYS5jbG9zZVBhdGgoKSxhLmZpbGxTdHJva2VTaGFwZSh0aGlzKSk6YS5zdHJva2VTaGFwZSh0aGlzKX0sZ2V0VGVuc2lvblBvaW50czpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRDYWNoZShcInRlbnNpb25Qb2ludHNcIix0aGlzLl9nZXRUZW5zaW9uUG9pbnRzKX0sX2dldFRlbnNpb25Qb2ludHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRDbG9zZWQoKT90aGlzLl9nZXRUZW5zaW9uUG9pbnRzQ2xvc2VkKCk6S2luZXRpYy5VdGlsLl9leHBhbmRQb2ludHModGhpcy5nZXRQb2ludHMoKSx0aGlzLmdldFRlbnNpb24oKSl9LF9nZXRUZW5zaW9uUG9pbnRzQ2xvc2VkOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRQb2ludHMoKSxiPWEubGVuZ3RoLGM9dGhpcy5nZXRUZW5zaW9uKCksZD1LaW5ldGljLlV0aWwsZT1kLl9nZXRDb250cm9sUG9pbnRzKGFbYi0yXSxhW2ItMV0sYVswXSxhWzFdLGFbMl0sYVszXSxjKSxmPWQuX2dldENvbnRyb2xQb2ludHMoYVtiLTRdLGFbYi0zXSxhW2ItMl0sYVtiLTFdLGFbMF0sYVsxXSxjKSxnPUtpbmV0aWMuVXRpbC5fZXhwYW5kUG9pbnRzKGEsYyksaD1bZVsyXSxlWzNdXS5jb25jYXQoZykuY29uY2F0KFtmWzBdLGZbMV0sYVtiLTJdLGFbYi0xXSxmWzJdLGZbM10sZVswXSxlWzFdLGFbMF0sYVsxXV0pO3JldHVybiBofX0sS2luZXRpYy5VdGlsLmV4dGVuZChLaW5ldGljLkxpbmUsS2luZXRpYy5TaGFwZSksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLkxpbmUsXCJjbG9zZWRcIiwhMSksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLkxpbmUsXCJ0ZW5zaW9uXCIsMCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLkxpbmUsXCJwb2ludHNcIiksS2luZXRpYy5Db2xsZWN0aW9uLm1hcE1ldGhvZHMoS2luZXRpYy5MaW5lKX0oKSxmdW5jdGlvbigpe0tpbmV0aWMuU3ByaXRlPWZ1bmN0aW9uKGEpe3RoaXMuX19faW5pdChhKX0sS2luZXRpYy5TcHJpdGUucHJvdG90eXBlPXtfX19pbml0OmZ1bmN0aW9uKGEpe0tpbmV0aWMuU2hhcGUuY2FsbCh0aGlzLGEpLHRoaXMuY2xhc3NOYW1lPVwiU3ByaXRlXCIsdGhpcy5hbmltPW5ldyBLaW5ldGljLkFuaW1hdGlvbix0aGlzLm9uKFwiYW5pbWF0aW9uQ2hhbmdlLmtpbmV0aWNcIixmdW5jdGlvbigpe3RoaXMuZnJhbWVJbmRleCgwKX0pLHRoaXMub24oXCJmcmFtZVJhdGVDaGFuZ2Uua2luZXRpY1wiLGZ1bmN0aW9uKCl7dGhpcy5hbmltLmlzUnVubmluZygpJiYoY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKSx0aGlzLl9zZXRJbnRlcnZhbCgpKX0pLHRoaXMuc2NlbmVGdW5jKHRoaXMuX3NjZW5lRnVuYyksdGhpcy5oaXRGdW5jKHRoaXMuX2hpdEZ1bmMpfSxfc2NlbmVGdW5jOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0QW5pbWF0aW9uKCksYz10aGlzLmZyYW1lSW5kZXgoKSxkPTQqYyxlPXRoaXMuZ2V0QW5pbWF0aW9ucygpW2JdLGY9ZVtkKzBdLGc9ZVtkKzFdLGg9ZVtkKzJdLGk9ZVtkKzNdLGo9dGhpcy5nZXRJbWFnZSgpO2omJmEuZHJhd0ltYWdlKGosZixnLGgsaSwwLDAsaCxpKX0sX2hpdEZ1bmM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRBbmltYXRpb24oKSxjPXRoaXMuZnJhbWVJbmRleCgpLGQ9NCpjLGU9dGhpcy5nZXRBbmltYXRpb25zKClbYl0sZj1lW2QrMl0sZz1lW2QrM107YS5iZWdpblBhdGgoKSxhLnJlY3QoMCwwLGYsZyksYS5jbG9zZVBhdGgoKSxhLmZpbGxTaGFwZSh0aGlzKX0sX3VzZUJ1ZmZlckNhbnZhczpmdW5jdGlvbigpe3JldHVybih0aGlzLmhhc1NoYWRvdygpfHwxIT09dGhpcy5nZXRBYnNvbHV0ZU9wYWNpdHkoKSkmJnRoaXMuaGFzU3Ryb2tlKCl9LF9zZXRJbnRlcnZhbDpmdW5jdGlvbigpe3ZhciBhPXRoaXM7dGhpcy5pbnRlcnZhbD1zZXRJbnRlcnZhbChmdW5jdGlvbigpe2EuX3VwZGF0ZUluZGV4KCl9LDFlMy90aGlzLmdldEZyYW1lUmF0ZSgpKX0sc3RhcnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldExheWVyKCk7dGhpcy5hbmltLnNldExheWVycyhhKSx0aGlzLl9zZXRJbnRlcnZhbCgpLHRoaXMuYW5pbS5zdGFydCgpfSxzdG9wOmZ1bmN0aW9uKCl7dGhpcy5hbmltLnN0b3AoKSxjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpfSxpc1J1bm5pbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hbmltLmlzUnVubmluZygpfSxfdXBkYXRlSW5kZXg6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmZyYW1lSW5kZXgoKSxiPXRoaXMuZ2V0QW5pbWF0aW9uKCksYz10aGlzLmdldEFuaW1hdGlvbnMoKSxkPWNbYl0sZT1kLmxlbmd0aC80O3RoaXMuZnJhbWVJbmRleChlLTE+YT9hKzE6MCl9fSxLaW5ldGljLlV0aWwuZXh0ZW5kKEtpbmV0aWMuU3ByaXRlLEtpbmV0aWMuU2hhcGUpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TcHJpdGUsXCJhbmltYXRpb25cIiksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNwcml0ZSxcImFuaW1hdGlvbnNcIiksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNwcml0ZSxcImltYWdlXCIpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TcHJpdGUsXCJmcmFtZUluZGV4XCIsMCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNwcml0ZSxcImZyYW1lUmF0ZVwiLDE3KSxLaW5ldGljLkZhY3RvcnkuYmFja0NvbXBhdChLaW5ldGljLlNwcml0ZSx7aW5kZXg6XCJmcmFtZUluZGV4XCIsZ2V0SW5kZXg6XCJnZXRGcmFtZUluZGV4XCIsc2V0SW5kZXg6XCJzZXRGcmFtZUluZGV4XCJ9KSxLaW5ldGljLkNvbGxlY3Rpb24ubWFwTWV0aG9kcyhLaW5ldGljLlNwcml0ZSl9KCksZnVuY3Rpb24oKXtLaW5ldGljLlBhdGg9ZnVuY3Rpb24oYSl7dGhpcy5fX19pbml0KGEpfSxLaW5ldGljLlBhdGgucHJvdG90eXBlPXtfX19pbml0OmZ1bmN0aW9uKGEpe3RoaXMuZGF0YUFycmF5PVtdO3ZhciBiPXRoaXM7S2luZXRpYy5TaGFwZS5jYWxsKHRoaXMsYSksdGhpcy5jbGFzc05hbWU9XCJQYXRoXCIsdGhpcy5kYXRhQXJyYXk9S2luZXRpYy5QYXRoLnBhcnNlUGF0aERhdGEodGhpcy5nZXREYXRhKCkpLHRoaXMub24oXCJkYXRhQ2hhbmdlLmtpbmV0aWNcIixmdW5jdGlvbigpe2IuZGF0YUFycmF5PUtpbmV0aWMuUGF0aC5wYXJzZVBhdGhEYXRhKHRoaXMuZ2V0RGF0YSgpKX0pLHRoaXMuc2NlbmVGdW5jKHRoaXMuX3NjZW5lRnVuYyl9LF9zY2VuZUZ1bmM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5kYXRhQXJyYXksYz0hMTthLmJlZ2luUGF0aCgpO2Zvcih2YXIgZD0wO2Q8Yi5sZW5ndGg7ZCsrKXt2YXIgZT1iW2RdLmNvbW1hbmQsZj1iW2RdLnBvaW50cztzd2l0Y2goZSl7Y2FzZVwiTFwiOmEubGluZVRvKGZbMF0sZlsxXSk7YnJlYWs7Y2FzZVwiTVwiOmEubW92ZVRvKGZbMF0sZlsxXSk7YnJlYWs7Y2FzZVwiQ1wiOmEuYmV6aWVyQ3VydmVUbyhmWzBdLGZbMV0sZlsyXSxmWzNdLGZbNF0sZls1XSk7YnJlYWs7Y2FzZVwiUVwiOmEucXVhZHJhdGljQ3VydmVUbyhmWzBdLGZbMV0sZlsyXSxmWzNdKTticmVhaztjYXNlXCJBXCI6dmFyIGc9ZlswXSxoPWZbMV0saT1mWzJdLGo9ZlszXSxrPWZbNF0sbD1mWzVdLG09Zls2XSxuPWZbN10sbz1pPmo/aTpqLHA9aT5qPzE6aS9qLHE9aT5qP2ovaToxO2EudHJhbnNsYXRlKGcsaCksYS5yb3RhdGUobSksYS5zY2FsZShwLHEpLGEuYXJjKDAsMCxvLGssaytsLDEtbiksYS5zY2FsZSgxL3AsMS9xKSxhLnJvdGF0ZSgtbSksYS50cmFuc2xhdGUoLWcsLWgpO2JyZWFrO2Nhc2VcInpcIjphLmNsb3NlUGF0aCgpLGM9ITB9fWM/YS5maWxsU3Ryb2tlU2hhcGUodGhpcyk6YS5zdHJva2VTaGFwZSh0aGlzKX19LEtpbmV0aWMuVXRpbC5leHRlbmQoS2luZXRpYy5QYXRoLEtpbmV0aWMuU2hhcGUpLEtpbmV0aWMuUGF0aC5nZXRMaW5lTGVuZ3RoPWZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBNYXRoLnNxcnQoKGMtYSkqKGMtYSkrKGQtYikqKGQtYikpfSxLaW5ldGljLlBhdGguZ2V0UG9pbnRPbkxpbmU9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7dm9pZCAwPT09ZiYmKGY9Yiksdm9pZCAwPT09ZyYmKGc9Yyk7dmFyIGg9KGUtYykvKGQtYisxZS04KSxpPU1hdGguc3FydChhKmEvKDEraCpoKSk7Yj5kJiYoaSo9LTEpO3ZhciBqLGs9aCppO2lmKGQ9PT1iKWo9e3g6Zix5Omcra307ZWxzZSBpZigoZy1jKS8oZi1iKzFlLTgpPT09aClqPXt4OmYraSx5Omcra307ZWxzZXt2YXIgbCxtLG49dGhpcy5nZXRMaW5lTGVuZ3RoKGIsYyxkLGUpO2lmKDFlLTg+bilyZXR1cm4gdm9pZCAwO3ZhciBvPShmLWIpKihkLWIpKyhnLWMpKihlLWMpO28vPW4qbixsPWIrbyooZC1iKSxtPWMrbyooZS1jKTt2YXIgcD10aGlzLmdldExpbmVMZW5ndGgoZixnLGwsbSkscT1NYXRoLnNxcnQoYSphLXAqcCk7aT1NYXRoLnNxcnQocSpxLygxK2gqaCkpLGI+ZCYmKGkqPS0xKSxrPWgqaSxqPXt4OmwraSx5Om0ra319cmV0dXJuIGp9LEtpbmV0aWMuUGF0aC5nZXRQb2ludE9uQ3ViaWNCZXppZXI9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoLGkpe2Z1bmN0aW9uIGooYSl7cmV0dXJuIGEqYSphfWZ1bmN0aW9uIGsoYSl7cmV0dXJuIDMqYSphKigxLWEpfWZ1bmN0aW9uIGwoYSl7cmV0dXJuIDMqYSooMS1hKSooMS1hKX1mdW5jdGlvbiBtKGEpe3JldHVybigxLWEpKigxLWEpKigxLWEpfXZhciBuPWgqaihhKStmKmsoYSkrZCpsKGEpK2IqbShhKSxvPWkqaihhKStnKmsoYSkrZSpsKGEpK2MqbShhKTtyZXR1cm57eDpuLHk6b319LEtpbmV0aWMuUGF0aC5nZXRQb2ludE9uUXVhZHJhdGljQmV6aWVyPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcpe2Z1bmN0aW9uIGgoYSl7cmV0dXJuIGEqYX1mdW5jdGlvbiBpKGEpe3JldHVybiAyKmEqKDEtYSl9ZnVuY3Rpb24gaihhKXtyZXR1cm4oMS1hKSooMS1hKX12YXIgaz1mKmgoYSkrZCppKGEpK2IqaihhKSxsPWcqaChhKStlKmkoYSkrYypqKGEpO3JldHVybnt4OmsseTpsfX0sS2luZXRpYy5QYXRoLmdldFBvaW50T25FbGxpcHRpY2FsQXJjPWZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2YXIgZz1NYXRoLmNvcyhmKSxoPU1hdGguc2luKGYpLGk9e3g6YypNYXRoLmNvcyhlKSx5OmQqTWF0aC5zaW4oZSl9O3JldHVybnt4OmErKGkueCpnLWkueSpoKSx5OmIrKGkueCpoK2kueSpnKX19LEtpbmV0aWMuUGF0aC5wYXJzZVBhdGhEYXRhPWZ1bmN0aW9uKGEpe2lmKCFhKXJldHVybltdO3ZhciBiPWEsYz1bXCJtXCIsXCJNXCIsXCJsXCIsXCJMXCIsXCJ2XCIsXCJWXCIsXCJoXCIsXCJIXCIsXCJ6XCIsXCJaXCIsXCJjXCIsXCJDXCIsXCJxXCIsXCJRXCIsXCJ0XCIsXCJUXCIsXCJzXCIsXCJTXCIsXCJhXCIsXCJBXCJdO2I9Yi5yZXBsYWNlKG5ldyBSZWdFeHAoXCIgXCIsXCJnXCIpLFwiLFwiKTtmb3IodmFyIGQ9MDtkPGMubGVuZ3RoO2QrKyliPWIucmVwbGFjZShuZXcgUmVnRXhwKGNbZF0sXCJnXCIpLFwifFwiK2NbZF0pO3ZhciBlPWIuc3BsaXQoXCJ8XCIpLGY9W10sZz0wLGg9MDtmb3IoZD0xO2Q8ZS5sZW5ndGg7ZCsrKXt2YXIgaT1lW2RdLGo9aS5jaGFyQXQoMCk7aT1pLnNsaWNlKDEpLGk9aS5yZXBsYWNlKG5ldyBSZWdFeHAoXCIsLVwiLFwiZ1wiKSxcIi1cIiksaT1pLnJlcGxhY2UobmV3IFJlZ0V4cChcIi1cIixcImdcIiksXCIsLVwiKSxpPWkucmVwbGFjZShuZXcgUmVnRXhwKFwiZSwtXCIsXCJnXCIpLFwiZS1cIik7dmFyIGs9aS5zcGxpdChcIixcIik7ay5sZW5ndGg+MCYmXCJcIj09PWtbMF0mJmsuc2hpZnQoKTtmb3IodmFyIGw9MDtsPGsubGVuZ3RoO2wrKylrW2xdPXBhcnNlRmxvYXQoa1tsXSk7Zm9yKDtrLmxlbmd0aD4wJiYhaXNOYU4oa1swXSk7KXt2YXIgbSxuLG8scCxxLHIscyx0LHUsdix3PW51bGwseD1bXSx5PWcsej1oO3N3aXRjaChqKXtjYXNlXCJsXCI6Zys9ay5zaGlmdCgpLGgrPWsuc2hpZnQoKSx3PVwiTFwiLHgucHVzaChnLGgpO2JyZWFrO2Nhc2VcIkxcIjpnPWsuc2hpZnQoKSxoPWsuc2hpZnQoKSx4LnB1c2goZyxoKTticmVhaztjYXNlXCJtXCI6dmFyIEE9ay5zaGlmdCgpLEI9ay5zaGlmdCgpO2lmKGcrPUEsaCs9Qix3PVwiTVwiLGYubGVuZ3RoPjImJlwielwiPT09ZltmLmxlbmd0aC0xXS5jb21tYW5kKWZvcih2YXIgQz1mLmxlbmd0aC0yO0M+PTA7Qy0tKWlmKFwiTVwiPT09ZltDXS5jb21tYW5kKXtnPWZbQ10ucG9pbnRzWzBdK0EsaD1mW0NdLnBvaW50c1sxXStCO2JyZWFrfXgucHVzaChnLGgpLGo9XCJsXCI7YnJlYWs7Y2FzZVwiTVwiOmc9ay5zaGlmdCgpLGg9ay5zaGlmdCgpLHc9XCJNXCIseC5wdXNoKGcsaCksaj1cIkxcIjticmVhaztjYXNlXCJoXCI6Zys9ay5zaGlmdCgpLHc9XCJMXCIseC5wdXNoKGcsaCk7YnJlYWs7Y2FzZVwiSFwiOmc9ay5zaGlmdCgpLHc9XCJMXCIseC5wdXNoKGcsaCk7YnJlYWs7Y2FzZVwidlwiOmgrPWsuc2hpZnQoKSx3PVwiTFwiLHgucHVzaChnLGgpO2JyZWFrO2Nhc2VcIlZcIjpoPWsuc2hpZnQoKSx3PVwiTFwiLHgucHVzaChnLGgpO2JyZWFrO2Nhc2VcIkNcIjp4LnB1c2goay5zaGlmdCgpLGsuc2hpZnQoKSxrLnNoaWZ0KCksay5zaGlmdCgpKSxnPWsuc2hpZnQoKSxoPWsuc2hpZnQoKSx4LnB1c2goZyxoKTticmVhaztjYXNlXCJjXCI6eC5wdXNoKGcray5zaGlmdCgpLGgray5zaGlmdCgpLGcray5zaGlmdCgpLGgray5zaGlmdCgpKSxnKz1rLnNoaWZ0KCksaCs9ay5zaGlmdCgpLHc9XCJDXCIseC5wdXNoKGcsaCk7YnJlYWs7Y2FzZVwiU1wiOm49ZyxvPWgsbT1mW2YubGVuZ3RoLTFdLFwiQ1wiPT09bS5jb21tYW5kJiYobj1nKyhnLW0ucG9pbnRzWzJdKSxvPWgrKGgtbS5wb2ludHNbM10pKSx4LnB1c2gobixvLGsuc2hpZnQoKSxrLnNoaWZ0KCkpLGc9ay5zaGlmdCgpLGg9ay5zaGlmdCgpLHc9XCJDXCIseC5wdXNoKGcsaCk7YnJlYWs7Y2FzZVwic1wiOm49ZyxvPWgsbT1mW2YubGVuZ3RoLTFdLFwiQ1wiPT09bS5jb21tYW5kJiYobj1nKyhnLW0ucG9pbnRzWzJdKSxvPWgrKGgtbS5wb2ludHNbM10pKSx4LnB1c2gobixvLGcray5zaGlmdCgpLGgray5zaGlmdCgpKSxnKz1rLnNoaWZ0KCksaCs9ay5zaGlmdCgpLHc9XCJDXCIseC5wdXNoKGcsaCk7YnJlYWs7Y2FzZVwiUVwiOngucHVzaChrLnNoaWZ0KCksay5zaGlmdCgpKSxnPWsuc2hpZnQoKSxoPWsuc2hpZnQoKSx4LnB1c2goZyxoKTticmVhaztjYXNlXCJxXCI6eC5wdXNoKGcray5zaGlmdCgpLGgray5zaGlmdCgpKSxnKz1rLnNoaWZ0KCksaCs9ay5zaGlmdCgpLHc9XCJRXCIseC5wdXNoKGcsaCk7YnJlYWs7Y2FzZVwiVFwiOm49ZyxvPWgsbT1mW2YubGVuZ3RoLTFdLFwiUVwiPT09bS5jb21tYW5kJiYobj1nKyhnLW0ucG9pbnRzWzBdKSxvPWgrKGgtbS5wb2ludHNbMV0pKSxnPWsuc2hpZnQoKSxoPWsuc2hpZnQoKSx3PVwiUVwiLHgucHVzaChuLG8sZyxoKTticmVhaztjYXNlXCJ0XCI6bj1nLG89aCxtPWZbZi5sZW5ndGgtMV0sXCJRXCI9PT1tLmNvbW1hbmQmJihuPWcrKGctbS5wb2ludHNbMF0pLG89aCsoaC1tLnBvaW50c1sxXSkpLGcrPWsuc2hpZnQoKSxoKz1rLnNoaWZ0KCksdz1cIlFcIix4LnB1c2gobixvLGcsaCk7YnJlYWs7Y2FzZVwiQVwiOnA9ay5zaGlmdCgpLHE9ay5zaGlmdCgpLHI9ay5zaGlmdCgpLHM9ay5zaGlmdCgpLHQ9ay5zaGlmdCgpLHU9Zyx2PWgsZz1rLnNoaWZ0KCksaD1rLnNoaWZ0KCksdz1cIkFcIix4PXRoaXMuY29udmVydEVuZHBvaW50VG9DZW50ZXJQYXJhbWV0ZXJpemF0aW9uKHUsdixnLGgscyx0LHAscSxyKTticmVhaztjYXNlXCJhXCI6cD1rLnNoaWZ0KCkscT1rLnNoaWZ0KCkscj1rLnNoaWZ0KCkscz1rLnNoaWZ0KCksdD1rLnNoaWZ0KCksdT1nLHY9aCxnKz1rLnNoaWZ0KCksaCs9ay5zaGlmdCgpLHc9XCJBXCIseD10aGlzLmNvbnZlcnRFbmRwb2ludFRvQ2VudGVyUGFyYW1ldGVyaXphdGlvbih1LHYsZyxoLHMsdCxwLHEscil9Zi5wdXNoKHtjb21tYW5kOnd8fGoscG9pbnRzOngsc3RhcnQ6e3g6eSx5Onp9LHBhdGhMZW5ndGg6dGhpcy5jYWxjTGVuZ3RoKHkseix3fHxqLHgpfSl9KFwielwiPT09anx8XCJaXCI9PT1qKSYmZi5wdXNoKHtjb21tYW5kOlwielwiLHBvaW50czpbXSxzdGFydDp2b2lkIDAscGF0aExlbmd0aDowfSl9cmV0dXJuIGZ9LEtpbmV0aWMuUGF0aC5jYWxjTGVuZ3RoPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlLGYsZyxoLGk9S2luZXRpYy5QYXRoO3N3aXRjaChjKXtjYXNlXCJMXCI6cmV0dXJuIGkuZ2V0TGluZUxlbmd0aChhLGIsZFswXSxkWzFdKTtjYXNlXCJDXCI6Zm9yKGU9MCxmPWkuZ2V0UG9pbnRPbkN1YmljQmV6aWVyKDAsYSxiLGRbMF0sZFsxXSxkWzJdLGRbM10sZFs0XSxkWzVdKSxoPS4wMTsxPj1oO2grPS4wMSlnPWkuZ2V0UG9pbnRPbkN1YmljQmV6aWVyKGgsYSxiLGRbMF0sZFsxXSxkWzJdLGRbM10sZFs0XSxkWzVdKSxlKz1pLmdldExpbmVMZW5ndGgoZi54LGYueSxnLngsZy55KSxmPWc7cmV0dXJuIGU7Y2FzZVwiUVwiOmZvcihlPTAsZj1pLmdldFBvaW50T25RdWFkcmF0aWNCZXppZXIoMCxhLGIsZFswXSxkWzFdLGRbMl0sZFszXSksaD0uMDE7MT49aDtoKz0uMDEpZz1pLmdldFBvaW50T25RdWFkcmF0aWNCZXppZXIoaCxhLGIsZFswXSxkWzFdLGRbMl0sZFszXSksZSs9aS5nZXRMaW5lTGVuZ3RoKGYueCxmLnksZy54LGcueSksZj1nO3JldHVybiBlO2Nhc2VcIkFcIjplPTA7dmFyIGo9ZFs0XSxrPWRbNV0sbD1kWzRdK2ssbT1NYXRoLlBJLzE4MDtpZihNYXRoLmFicyhqLWwpPG0mJihtPU1hdGguYWJzKGotbCkpLGY9aS5nZXRQb2ludE9uRWxsaXB0aWNhbEFyYyhkWzBdLGRbMV0sZFsyXSxkWzNdLGosMCksMD5rKWZvcihoPWotbTtoPmw7aC09bSlnPWkuZ2V0UG9pbnRPbkVsbGlwdGljYWxBcmMoZFswXSxkWzFdLGRbMl0sZFszXSxoLDApLGUrPWkuZ2V0TGluZUxlbmd0aChmLngsZi55LGcueCxnLnkpLGY9ZztlbHNlIGZvcihoPWorbTtsPmg7aCs9bSlnPWkuZ2V0UG9pbnRPbkVsbGlwdGljYWxBcmMoZFswXSxkWzFdLGRbMl0sZFszXSxoLDApLGUrPWkuZ2V0TGluZUxlbmd0aChmLngsZi55LGcueCxnLnkpLGY9ZztyZXR1cm4gZz1pLmdldFBvaW50T25FbGxpcHRpY2FsQXJjKGRbMF0sZFsxXSxkWzJdLGRbM10sbCwwKSxlKz1pLmdldExpbmVMZW5ndGgoZi54LGYueSxnLngsZy55KX1yZXR1cm4gMH0sS2luZXRpYy5QYXRoLmNvbnZlcnRFbmRwb2ludFRvQ2VudGVyUGFyYW1ldGVyaXphdGlvbj1mdW5jdGlvbihhLGIsYyxkLGUsZixnLGgsaSl7dmFyIGo9aSooTWF0aC5QSS8xODApLGs9TWF0aC5jb3MoaikqKGEtYykvMitNYXRoLnNpbihqKSooYi1kKS8yLGw9LTEqTWF0aC5zaW4oaikqKGEtYykvMitNYXRoLmNvcyhqKSooYi1kKS8yLG09ayprLyhnKmcpK2wqbC8oaCpoKTttPjEmJihnKj1NYXRoLnNxcnQobSksaCo9TWF0aC5zcXJ0KG0pKTt2YXIgbj1NYXRoLnNxcnQoKGcqZypoKmgtZypnKmwqbC1oKmgqayprKS8oZypnKmwqbCtoKmgqayprKSk7ZT09PWYmJihuKj0tMSksaXNOYU4obikmJihuPTApO3ZhciBvPW4qZypsL2gscD1uKi1oKmsvZyxxPShhK2MpLzIrTWF0aC5jb3Moaikqby1NYXRoLnNpbihqKSpwLHI9KGIrZCkvMitNYXRoLnNpbihqKSpvK01hdGguY29zKGopKnAscz1mdW5jdGlvbihhKXtyZXR1cm4gTWF0aC5zcXJ0KGFbMF0qYVswXSthWzFdKmFbMV0pfSx0PWZ1bmN0aW9uKGEsYil7cmV0dXJuKGFbMF0qYlswXSthWzFdKmJbMV0pLyhzKGEpKnMoYikpfSx1PWZ1bmN0aW9uKGEsYil7cmV0dXJuKGFbMF0qYlsxXTxhWzFdKmJbMF0/LTE6MSkqTWF0aC5hY29zKHQoYSxiKSl9LHY9dShbMSwwXSxbKGstbykvZywobC1wKS9oXSksdz1bKGstbykvZywobC1wKS9oXSx4PVsoLTEqay1vKS9nLCgtMSpsLXApL2hdLHk9dSh3LHgpO3JldHVybiB0KHcseCk8PS0xJiYoeT1NYXRoLlBJKSx0KHcseCk+PTEmJih5PTApLDA9PT1mJiZ5PjAmJih5LT0yKk1hdGguUEkpLDE9PT1mJiYwPnkmJih5Kz0yKk1hdGguUEkpLFtxLHIsZyxoLHYseSxqLGZdfSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuUGF0aCxcImRhdGFcIiksS2luZXRpYy5Db2xsZWN0aW9uLm1hcE1ldGhvZHMoS2luZXRpYy5QYXRoKX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7YS5maWxsVGV4dCh0aGlzLnBhcnRpYWxUZXh0LDAsMCl9ZnVuY3Rpb24gYihhKXthLnN0cm9rZVRleHQodGhpcy5wYXJ0aWFsVGV4dCwwLDApfXZhciBjPVwiXCIsZD1cIm5vcm1hbFwiO0tpbmV0aWMuVGV4dFBhdGg9ZnVuY3Rpb24oYSl7dGhpcy5fX19pbml0KGEpfSxLaW5ldGljLlRleHRQYXRoLnByb3RvdHlwZT17X19faW5pdDpmdW5jdGlvbihjKXt2YXIgZD10aGlzO3RoaXMuZHVtbXlDYW52YXM9S2luZXRpYy5VdGlsLmNyZWF0ZUNhbnZhc0VsZW1lbnQoKSx0aGlzLmRhdGFBcnJheT1bXSxLaW5ldGljLlNoYXBlLmNhbGwodGhpcyxjKSx0aGlzLl9maWxsRnVuYz1hLHRoaXMuX3N0cm9rZUZ1bmM9Yix0aGlzLl9maWxsRnVuY0hpdD1hLHRoaXMuX3N0cm9rZUZ1bmNIaXQ9Yix0aGlzLmNsYXNzTmFtZT1cIlRleHRQYXRoXCIsdGhpcy5kYXRhQXJyYXk9S2luZXRpYy5QYXRoLnBhcnNlUGF0aERhdGEodGhpcy5hdHRycy5kYXRhKSx0aGlzLm9uKFwiZGF0YUNoYW5nZS5raW5ldGljXCIsZnVuY3Rpb24oKXtkLmRhdGFBcnJheT1LaW5ldGljLlBhdGgucGFyc2VQYXRoRGF0YSh0aGlzLmF0dHJzLmRhdGEpfSksdGhpcy5vbihcInRleHRDaGFuZ2Uua2luZXRpYyB0ZXh0U3Ryb2tlLmtpbmV0aWMgdGV4dFN0cm9rZVdpZHRoLmtpbmV0aWNcIixkLl9zZXRUZXh0RGF0YSksZC5fc2V0VGV4dERhdGEoKSx0aGlzLnNjZW5lRnVuYyh0aGlzLl9zY2VuZUZ1bmMpfSxfc2NlbmVGdW5jOmZ1bmN0aW9uKGEpe2Euc2V0QXR0cihcImZvbnRcIix0aGlzLl9nZXRDb250ZXh0Rm9udCgpKSxhLnNldEF0dHIoXCJ0ZXh0QmFzZWxpbmVcIixcIm1pZGRsZVwiKSxhLnNldEF0dHIoXCJ0ZXh0QWxpZ25cIixcImxlZnRcIiksYS5zYXZlKCk7Zm9yKHZhciBiPXRoaXMuZ2x5cGhJbmZvLGM9MDtjPGIubGVuZ3RoO2MrKyl7YS5zYXZlKCk7dmFyIGQ9YltjXS5wMDthLnRyYW5zbGF0ZShkLngsZC55KSxhLnJvdGF0ZShiW2NdLnJvdGF0aW9uKSx0aGlzLnBhcnRpYWxUZXh0PWJbY10udGV4dCxhLmZpbGxTdHJva2VTaGFwZSh0aGlzKSxhLnJlc3RvcmUoKX1hLnJlc3RvcmUoKX0sZ2V0VGV4dFdpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dFdpZHRofSxnZXRUZXh0SGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dEhlaWdodH0sc2V0VGV4dDpmdW5jdGlvbihhKXtLaW5ldGljLlRleHQucHJvdG90eXBlLnNldFRleHQuY2FsbCh0aGlzLGEpfSxfZ2V0VGV4dFNpemU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5kdW1teUNhbnZhcyxjPWIuZ2V0Q29udGV4dChcIjJkXCIpO2Muc2F2ZSgpLGMuZm9udD10aGlzLl9nZXRDb250ZXh0Rm9udCgpO3ZhciBkPWMubWVhc3VyZVRleHQoYSk7cmV0dXJuIGMucmVzdG9yZSgpLHt3aWR0aDpkLndpZHRoLGhlaWdodDpwYXJzZUludCh0aGlzLmF0dHJzLmZvbnRTaXplLDEwKX19LF9zZXRUZXh0RGF0YTpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj10aGlzLl9nZXRUZXh0U2l6ZSh0aGlzLmF0dHJzLnRleHQpO3RoaXMudGV4dFdpZHRoPWIud2lkdGgsdGhpcy50ZXh0SGVpZ2h0PWIuaGVpZ2h0LHRoaXMuZ2x5cGhJbmZvPVtdO2Zvcih2YXIgYyxkLGUsZj10aGlzLmF0dHJzLnRleHQuc3BsaXQoXCJcIiksZz0tMSxoPTAsaT1mdW5jdGlvbigpe2g9MDtmb3IodmFyIGI9YS5kYXRhQXJyYXksZD1nKzE7ZDxiLmxlbmd0aDtkKyspe2lmKGJbZF0ucGF0aExlbmd0aD4wKXJldHVybiBnPWQsYltkXTtcIk1cIj09YltkXS5jb21tYW5kJiYoYz17eDpiW2RdLnBvaW50c1swXSx5OmJbZF0ucG9pbnRzWzFdfSl9cmV0dXJue319LGo9ZnVuY3Rpb24oYil7dmFyIGY9YS5fZ2V0VGV4dFNpemUoYikud2lkdGgsZz0wLGo9MDtmb3IoZD12b2lkIDA7TWF0aC5hYnMoZi1nKS9mPi4wMSYmMjU+ajspe2orKztmb3IodmFyIGs9Zzt2b2lkIDA9PT1lOyllPWkoKSxlJiZrK2UucGF0aExlbmd0aDxmJiYoays9ZS5wYXRoTGVuZ3RoLGU9dm9pZCAwKTtpZihlPT09e318fHZvaWQgMD09PWMpcmV0dXJuIHZvaWQgMDt2YXIgbD0hMTtzd2l0Y2goZS5jb21tYW5kKXtjYXNlXCJMXCI6S2luZXRpYy5QYXRoLmdldExpbmVMZW5ndGgoYy54LGMueSxlLnBvaW50c1swXSxlLnBvaW50c1sxXSk+Zj9kPUtpbmV0aWMuUGF0aC5nZXRQb2ludE9uTGluZShmLGMueCxjLnksZS5wb2ludHNbMF0sZS5wb2ludHNbMV0sYy54LGMueSk6ZT12b2lkIDA7YnJlYWs7Y2FzZVwiQVwiOnZhciBtPWUucG9pbnRzWzRdLG49ZS5wb2ludHNbNV0sbz1lLnBvaW50c1s0XStuOzA9PT1oP2g9bSsxZS04OmY+Zz9oKz1NYXRoLlBJLzE4MCpuL01hdGguYWJzKG4pOmgtPU1hdGguUEkvMzYwKm4vTWF0aC5hYnMobiksKDA+biYmbz5ofHxuPj0wJiZoPm8pJiYoaD1vLGw9ITApLGQ9S2luZXRpYy5QYXRoLmdldFBvaW50T25FbGxpcHRpY2FsQXJjKGUucG9pbnRzWzBdLGUucG9pbnRzWzFdLGUucG9pbnRzWzJdLGUucG9pbnRzWzNdLGgsZS5wb2ludHNbNl0pO2JyZWFrO2Nhc2VcIkNcIjowPT09aD9oPWY+ZS5wYXRoTGVuZ3RoPzFlLTg6Zi9lLnBhdGhMZW5ndGg6Zj5nP2grPShmLWcpL2UucGF0aExlbmd0aDpoLT0oZy1mKS9lLnBhdGhMZW5ndGgsaD4xJiYoaD0xLGw9ITApLGQ9S2luZXRpYy5QYXRoLmdldFBvaW50T25DdWJpY0JlemllcihoLGUuc3RhcnQueCxlLnN0YXJ0LnksZS5wb2ludHNbMF0sZS5wb2ludHNbMV0sZS5wb2ludHNbMl0sZS5wb2ludHNbM10sZS5wb2ludHNbNF0sZS5wb2ludHNbNV0pO2JyZWFrO2Nhc2VcIlFcIjowPT09aD9oPWYvZS5wYXRoTGVuZ3RoOmY+Zz9oKz0oZi1nKS9lLnBhdGhMZW5ndGg6aC09KGctZikvZS5wYXRoTGVuZ3RoLGg+MSYmKGg9MSxsPSEwKSxkPUtpbmV0aWMuUGF0aC5nZXRQb2ludE9uUXVhZHJhdGljQmV6aWVyKGgsZS5zdGFydC54LGUuc3RhcnQueSxlLnBvaW50c1swXSxlLnBvaW50c1sxXSxlLnBvaW50c1syXSxlLnBvaW50c1szXSl9dm9pZCAwIT09ZCYmKGc9S2luZXRpYy5QYXRoLmdldExpbmVMZW5ndGgoYy54LGMueSxkLngsZC55KSksbCYmKGw9ITEsZT12b2lkIDApfX0saz0wO2s8Zi5sZW5ndGgmJihqKGZba10pLHZvaWQgMCE9PWMmJnZvaWQgMCE9PWQpO2srKyl7dmFyIGw9S2luZXRpYy5QYXRoLmdldExpbmVMZW5ndGgoYy54LGMueSxkLngsZC55KSxtPTAsbj1LaW5ldGljLlBhdGguZ2V0UG9pbnRPbkxpbmUobStsLzIsYy54LGMueSxkLngsZC55KSxvPU1hdGguYXRhbjIoZC55LWMueSxkLngtYy54KTt0aGlzLmdseXBoSW5mby5wdXNoKHt0cmFuc3Bvc2VYOm4ueCx0cmFuc3Bvc2VZOm4ueSx0ZXh0OmZba10scm90YXRpb246byxwMDpjLHAxOmR9KSxjPWR9fX0sS2luZXRpYy5UZXh0UGF0aC5wcm90b3R5cGUuX2dldENvbnRleHRGb250PUtpbmV0aWMuVGV4dC5wcm90b3R5cGUuX2dldENvbnRleHRGb250LEtpbmV0aWMuVXRpbC5leHRlbmQoS2luZXRpYy5UZXh0UGF0aCxLaW5ldGljLlNoYXBlKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuVGV4dFBhdGgsXCJmb250RmFtaWx5XCIsXCJBcmlhbFwiKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuVGV4dFBhdGgsXCJmb250U2l6ZVwiLDEyKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuVGV4dFBhdGgsXCJmb250U3R5bGVcIixkKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuVGV4dFBhdGgsXCJmb250VmFyaWFudFwiLGQpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXIoS2luZXRpYy5UZXh0UGF0aCxcInRleHRcIixjKSxLaW5ldGljLkNvbGxlY3Rpb24ubWFwTWV0aG9kcyhLaW5ldGljLlRleHRQYXRoKX0oKSxmdW5jdGlvbigpe0tpbmV0aWMuUmVndWxhclBvbHlnb249ZnVuY3Rpb24oYSl7dGhpcy5fX19pbml0KGEpfSxLaW5ldGljLlJlZ3VsYXJQb2x5Z29uLnByb3RvdHlwZT17X19faW5pdDpmdW5jdGlvbihhKXtLaW5ldGljLlNoYXBlLmNhbGwodGhpcyxhKSx0aGlzLmNsYXNzTmFtZT1cIlJlZ3VsYXJQb2x5Z29uXCIsdGhpcy5zY2VuZUZ1bmModGhpcy5fc2NlbmVGdW5jKX0sX3NjZW5lRnVuYzpmdW5jdGlvbihhKXt2YXIgYixjLGQsZT10aGlzLmF0dHJzLnNpZGVzLGY9dGhpcy5hdHRycy5yYWRpdXM7Zm9yKGEuYmVnaW5QYXRoKCksYS5tb3ZlVG8oMCwwLWYpLGI9MTtlPmI7YisrKWM9ZipNYXRoLnNpbigyKmIqTWF0aC5QSS9lKSxkPS0xKmYqTWF0aC5jb3MoMipiKk1hdGguUEkvZSksYS5saW5lVG8oYyxkKTthLmNsb3NlUGF0aCgpLGEuZmlsbFN0cm9rZVNoYXBlKHRoaXMpfX0sS2luZXRpYy5VdGlsLmV4dGVuZChLaW5ldGljLlJlZ3VsYXJQb2x5Z29uLEtpbmV0aWMuU2hhcGUpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5SZWd1bGFyUG9seWdvbixcInJhZGl1c1wiLDApLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5SZWd1bGFyUG9seWdvbixcInNpZGVzXCIsMCksS2luZXRpYy5Db2xsZWN0aW9uLm1hcE1ldGhvZHMoS2luZXRpYy5SZWd1bGFyUG9seWdvbil9KCksZnVuY3Rpb24oKXtLaW5ldGljLlN0YXI9ZnVuY3Rpb24oYSl7dGhpcy5fX19pbml0KGEpfSxLaW5ldGljLlN0YXIucHJvdG90eXBlPXtfX19pbml0OmZ1bmN0aW9uKGEpe0tpbmV0aWMuU2hhcGUuY2FsbCh0aGlzLGEpLHRoaXMuY2xhc3NOYW1lPVwiU3RhclwiLHRoaXMuc2NlbmVGdW5jKHRoaXMuX3NjZW5lRnVuYyl9LF9zY2VuZUZ1bmM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5pbm5lclJhZGl1cygpLGM9dGhpcy5vdXRlclJhZGl1cygpLGQ9dGhpcy5udW1Qb2ludHMoKTthLmJlZ2luUGF0aCgpLGEubW92ZVRvKDAsMC1jKTtmb3IodmFyIGU9MTsyKmQ+ZTtlKyspe3ZhciBmPWUlMj09PTA/YzpiLGc9ZipNYXRoLnNpbihlKk1hdGguUEkvZCksaD0tMSpmKk1hdGguY29zKGUqTWF0aC5QSS9kKTthLmxpbmVUbyhnLGgpfWEuY2xvc2VQYXRoKCksYS5maWxsU3Ryb2tlU2hhcGUodGhpcyl9fSxLaW5ldGljLlV0aWwuZXh0ZW5kKEtpbmV0aWMuU3RhcixLaW5ldGljLlNoYXBlKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU3RhcixcIm51bVBvaW50c1wiLDUpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TdGFyLFwiaW5uZXJSYWRpdXNcIiwwKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU3RhcixcIm91dGVyUmFkaXVzXCIsMCksS2luZXRpYy5Db2xsZWN0aW9uLm1hcE1ldGhvZHMoS2luZXRpYy5TdGFyKX0oKSxmdW5jdGlvbigpe3ZhciBhPVtcImZvbnRGYW1pbHlcIixcImZvbnRTaXplXCIsXCJmb250U3R5bGVcIixcInBhZGRpbmdcIixcImxpbmVIZWlnaHRcIixcInRleHRcIl0sYj1cIkNoYW5nZS5raW5ldGljXCIsYz1cIm5vbmVcIixkPVwidXBcIixlPVwicmlnaHRcIixmPVwiZG93blwiLGc9XCJsZWZ0XCIsaD1cIkxhYmVsXCIsaT1hLmxlbmd0aDtLaW5ldGljLkxhYmVsPWZ1bmN0aW9uKGEpe3RoaXMuX19fX2luaXQoYSl9LEtpbmV0aWMuTGFiZWwucHJvdG90eXBlPXtfX19faW5pdDpmdW5jdGlvbihhKXt2YXIgYj10aGlzO3RoaXMuY2xhc3NOYW1lPWgsS2luZXRpYy5Hcm91cC5jYWxsKHRoaXMsYSksdGhpcy5vbihcImFkZC5raW5ldGljXCIsZnVuY3Rpb24oYSl7Yi5fYWRkTGlzdGVuZXJzKGEuY2hpbGQpLGIuX3N5bmMoKX0pfSxnZXRUZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZmluZChcIlRleHRcIilbMF19LGdldFRhZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZpbmQoXCJUYWdcIilbMF19LF9hZGRMaXN0ZW5lcnM6ZnVuY3Rpb24oYyl7dmFyIGQsZT10aGlzLGY9ZnVuY3Rpb24oKXtlLl9zeW5jKCl9O2ZvcihkPTA7aT5kO2QrKyljLm9uKGFbZF0rYixmKX0sZ2V0V2lkdGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRUZXh0KCkuZ2V0V2lkdGgoKX0sZ2V0SGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0VGV4dCgpLmdldEhlaWdodCgpfSxfc3luYzpmdW5jdGlvbigpe3ZhciBhLGIsYyxoLGksaixrLGw9dGhpcy5nZXRUZXh0KCksbT10aGlzLmdldFRhZygpO2lmKGwmJm0pe3N3aXRjaChhPWwuZ2V0V2lkdGgoKSxiPWwuZ2V0SGVpZ2h0KCksYz1tLmdldFBvaW50ZXJEaXJlY3Rpb24oKSxoPW0uZ2V0UG9pbnRlcldpZHRoKCksaz1tLmdldFBvaW50ZXJIZWlnaHQoKSxpPTAsaj0wLGMpe2Nhc2UgZDppPWEvMixqPS0xKms7YnJlYWs7Y2FzZSBlOmk9YStoLGo9Yi8yO2JyZWFrO2Nhc2UgZjppPWEvMixqPWIrazticmVhaztjYXNlIGc6aT0tMSpoLGo9Yi8yfW0uc2V0QXR0cnMoe3g6LTEqaSx5Oi0xKmosd2lkdGg6YSxoZWlnaHQ6Yn0pLGwuc2V0QXR0cnMoe3g6LTEqaSx5Oi0xKmp9KX19fSxLaW5ldGljLlV0aWwuZXh0ZW5kKEtpbmV0aWMuTGFiZWwsS2luZXRpYy5Hcm91cCksS2luZXRpYy5Db2xsZWN0aW9uLm1hcE1ldGhvZHMoS2luZXRpYy5MYWJlbCksS2luZXRpYy5UYWc9ZnVuY3Rpb24oYSl7dGhpcy5fX19pbml0KGEpfSxLaW5ldGljLlRhZy5wcm90b3R5cGU9e19fX2luaXQ6ZnVuY3Rpb24oYSl7S2luZXRpYy5TaGFwZS5jYWxsKHRoaXMsYSksdGhpcy5jbGFzc05hbWU9XCJUYWdcIix0aGlzLnNjZW5lRnVuYyh0aGlzLl9zY2VuZUZ1bmMpfSxfc2NlbmVGdW5jOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0V2lkdGgoKSxjPXRoaXMuZ2V0SGVpZ2h0KCksaD10aGlzLmdldFBvaW50ZXJEaXJlY3Rpb24oKSxpPXRoaXMuZ2V0UG9pbnRlcldpZHRoKCksaj10aGlzLmdldFBvaW50ZXJIZWlnaHQoKTthLmJlZ2luUGF0aCgpLGEubW92ZVRvKDAsMCksaD09PWQmJihhLmxpbmVUbygoYi1pKS8yLDApLGEubGluZVRvKGIvMiwtMSpqKSxhLmxpbmVUbygoYitpKS8yLDApKSxhLmxpbmVUbyhiLDApLGg9PT1lJiYoYS5saW5lVG8oYiwoYy1qKS8yKSxhLmxpbmVUbyhiK2ksYy8yKSxhLmxpbmVUbyhiLChjK2opLzIpKSxhLmxpbmVUbyhiLGMpLGg9PT1mJiYoYS5saW5lVG8oKGIraSkvMixjKSxhLmxpbmVUbyhiLzIsYytqKSxhLmxpbmVUbygoYi1pKS8yLGMpKSxhLmxpbmVUbygwLGMpLGg9PT1nJiYoYS5saW5lVG8oMCwoYytqKS8yKSxhLmxpbmVUbygtMSppLGMvMiksYS5saW5lVG8oMCwoYy1qKS8yKSksYS5jbG9zZVBhdGgoKSxhLmZpbGxTdHJva2VTaGFwZSh0aGlzKX19LEtpbmV0aWMuVXRpbC5leHRlbmQoS2luZXRpYy5UYWcsS2luZXRpYy5TaGFwZSksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlRhZyxcInBvaW50ZXJEaXJlY3Rpb25cIixjKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuVGFnLFwicG9pbnRlcldpZHRoXCIsMCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlRhZyxcInBvaW50ZXJIZWlnaHRcIiwwKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuVGFnLFwiY29ybmVyUmFkaXVzXCIsMCksS2luZXRpYy5Db2xsZWN0aW9uLm1hcE1ldGhvZHMoS2luZXRpYy5UYWcpfSgpOyIsIi8qXG4gQ29weXJpZ2h0IChDKSBGZWRlcmljbyBaaXZvbG8gMjAxOFxuIERpc3RyaWJ1dGVkIHVuZGVyIHRoZSBNSVQgTGljZW5zZSAobGljZW5zZSB0ZXJtcyBhcmUgYXQgaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVCkuXG4gKi8oZnVuY3Rpb24oZSx0KXsnb2JqZWN0Jz09dHlwZW9mIGV4cG9ydHMmJid1bmRlZmluZWQnIT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPXQoKTonZnVuY3Rpb24nPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZSh0KTplLlBvcHBlcj10KCl9KSh0aGlzLGZ1bmN0aW9uKCl7J3VzZSBzdHJpY3QnO2Z1bmN0aW9uIGUoZSl7cmV0dXJuIGUmJidbb2JqZWN0IEZ1bmN0aW9uXSc9PT17fS50b1N0cmluZy5jYWxsKGUpfWZ1bmN0aW9uIHQoZSx0KXtpZigxIT09ZS5ub2RlVHlwZSlyZXR1cm5bXTt2YXIgbz1nZXRDb21wdXRlZFN0eWxlKGUsbnVsbCk7cmV0dXJuIHQ/b1t0XTpvfWZ1bmN0aW9uIG8oZSl7cmV0dXJuJ0hUTUwnPT09ZS5ub2RlTmFtZT9lOmUucGFyZW50Tm9kZXx8ZS5ob3N0fWZ1bmN0aW9uIG4oZSl7aWYoIWUpcmV0dXJuIGRvY3VtZW50LmJvZHk7c3dpdGNoKGUubm9kZU5hbWUpe2Nhc2UnSFRNTCc6Y2FzZSdCT0RZJzpyZXR1cm4gZS5vd25lckRvY3VtZW50LmJvZHk7Y2FzZScjZG9jdW1lbnQnOnJldHVybiBlLmJvZHk7fXZhciBpPXQoZSkscj1pLm92ZXJmbG93LHA9aS5vdmVyZmxvd1gscz1pLm92ZXJmbG93WTtyZXR1cm4gLyhhdXRvfHNjcm9sbHxvdmVybGF5KS8udGVzdChyK3MrcCk/ZTpuKG8oZSkpfWZ1bmN0aW9uIHIoZSl7cmV0dXJuIDExPT09ZT9yZToxMD09PWU/cGU6cmV8fHBlfWZ1bmN0aW9uIHAoZSl7aWYoIWUpcmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtmb3IodmFyIG89cigxMCk/ZG9jdW1lbnQuYm9keTpudWxsLG49ZS5vZmZzZXRQYXJlbnQ7bj09PW8mJmUubmV4dEVsZW1lbnRTaWJsaW5nOyluPShlPWUubmV4dEVsZW1lbnRTaWJsaW5nKS5vZmZzZXRQYXJlbnQ7dmFyIGk9biYmbi5ub2RlTmFtZTtyZXR1cm4gaSYmJ0JPRFknIT09aSYmJ0hUTUwnIT09aT8tMSE9PVsnVEQnLCdUQUJMRSddLmluZGV4T2Yobi5ub2RlTmFtZSkmJidzdGF0aWMnPT09dChuLCdwb3NpdGlvbicpP3Aobik6bjplP2Uub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ6ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50fWZ1bmN0aW9uIHMoZSl7dmFyIHQ9ZS5ub2RlTmFtZTtyZXR1cm4nQk9EWSchPT10JiYoJ0hUTUwnPT09dHx8cChlLmZpcnN0RWxlbWVudENoaWxkKT09PWUpfWZ1bmN0aW9uIGQoZSl7cmV0dXJuIG51bGw9PT1lLnBhcmVudE5vZGU/ZTpkKGUucGFyZW50Tm9kZSl9ZnVuY3Rpb24gYShlLHQpe2lmKCFlfHwhZS5ub2RlVHlwZXx8IXR8fCF0Lm5vZGVUeXBlKXJldHVybiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7dmFyIG89ZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbih0KSZOb2RlLkRPQ1VNRU5UX1BPU0lUSU9OX0ZPTExPV0lORyxuPW8/ZTp0LGk9bz90OmUscj1kb2N1bWVudC5jcmVhdGVSYW5nZSgpO3Iuc2V0U3RhcnQobiwwKSxyLnNldEVuZChpLDApO3ZhciBsPXIuY29tbW9uQW5jZXN0b3JDb250YWluZXI7aWYoZSE9PWwmJnQhPT1sfHxuLmNvbnRhaW5zKGkpKXJldHVybiBzKGwpP2w6cChsKTt2YXIgZj1kKGUpO3JldHVybiBmLmhvc3Q/YShmLmhvc3QsdCk6YShlLGQodCkuaG9zdCl9ZnVuY3Rpb24gbChlKXt2YXIgdD0xPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06J3RvcCcsbz0ndG9wJz09PXQ/J3Njcm9sbFRvcCc6J3Njcm9sbExlZnQnLG49ZS5ub2RlTmFtZTtpZignQk9EWSc9PT1ufHwnSFRNTCc9PT1uKXt2YXIgaT1lLm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LHI9ZS5vd25lckRvY3VtZW50LnNjcm9sbGluZ0VsZW1lbnR8fGk7cmV0dXJuIHJbb119cmV0dXJuIGVbb119ZnVuY3Rpb24gZihlLHQpe3ZhciBvPTI8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzJdJiZhcmd1bWVudHNbMl0sbj1sKHQsJ3RvcCcpLGk9bCh0LCdsZWZ0Jykscj1vPy0xOjE7cmV0dXJuIGUudG9wKz1uKnIsZS5ib3R0b20rPW4qcixlLmxlZnQrPWkqcixlLnJpZ2h0Kz1pKnIsZX1mdW5jdGlvbiBtKGUsdCl7dmFyIG89J3gnPT09dD8nTGVmdCc6J1RvcCcsbj0nTGVmdCc9PW8/J1JpZ2h0JzonQm90dG9tJztyZXR1cm4gcGFyc2VGbG9hdChlWydib3JkZXInK28rJ1dpZHRoJ10sMTApK3BhcnNlRmxvYXQoZVsnYm9yZGVyJytuKydXaWR0aCddLDEwKX1mdW5jdGlvbiBoKGUsdCxvLG4pe3JldHVybiAkKHRbJ29mZnNldCcrZV0sdFsnc2Nyb2xsJytlXSxvWydjbGllbnQnK2VdLG9bJ29mZnNldCcrZV0sb1snc2Nyb2xsJytlXSxyKDEwKT9vWydvZmZzZXQnK2VdK25bJ21hcmdpbicrKCdIZWlnaHQnPT09ZT8nVG9wJzonTGVmdCcpXStuWydtYXJnaW4nKygnSGVpZ2h0Jz09PWU/J0JvdHRvbSc6J1JpZ2h0JyldOjApfWZ1bmN0aW9uIGMoKXt2YXIgZT1kb2N1bWVudC5ib2R5LHQ9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LG89cigxMCkmJmdldENvbXB1dGVkU3R5bGUodCk7cmV0dXJue2hlaWdodDpoKCdIZWlnaHQnLGUsdCxvKSx3aWR0aDpoKCdXaWR0aCcsZSx0LG8pfX1mdW5jdGlvbiBnKGUpe3JldHVybiBsZSh7fSxlLHtyaWdodDplLmxlZnQrZS53aWR0aCxib3R0b206ZS50b3ArZS5oZWlnaHR9KX1mdW5jdGlvbiB1KGUpe3ZhciBvPXt9O3RyeXtpZihyKDEwKSl7bz1lLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3ZhciBuPWwoZSwndG9wJyksaT1sKGUsJ2xlZnQnKTtvLnRvcCs9bixvLmxlZnQrPWksby5ib3R0b20rPW4sby5yaWdodCs9aX1lbHNlIG89ZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKX1jYXRjaCh0KXt9dmFyIHA9e2xlZnQ6by5sZWZ0LHRvcDpvLnRvcCx3aWR0aDpvLnJpZ2h0LW8ubGVmdCxoZWlnaHQ6by5ib3R0b20tby50b3B9LHM9J0hUTUwnPT09ZS5ub2RlTmFtZT9jKCk6e30sZD1zLndpZHRofHxlLmNsaWVudFdpZHRofHxwLnJpZ2h0LXAubGVmdCxhPXMuaGVpZ2h0fHxlLmNsaWVudEhlaWdodHx8cC5ib3R0b20tcC50b3AsZj1lLm9mZnNldFdpZHRoLWQsaD1lLm9mZnNldEhlaWdodC1hO2lmKGZ8fGgpe3ZhciB1PXQoZSk7Zi09bSh1LCd4JyksaC09bSh1LCd5JykscC53aWR0aC09ZixwLmhlaWdodC09aH1yZXR1cm4gZyhwKX1mdW5jdGlvbiBiKGUsbyl7dmFyIGk9Mjxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0mJmFyZ3VtZW50c1syXSxwPXIoMTApLHM9J0hUTUwnPT09by5ub2RlTmFtZSxkPXUoZSksYT11KG8pLGw9bihlKSxtPXQobyksaD1wYXJzZUZsb2F0KG0uYm9yZGVyVG9wV2lkdGgsMTApLGM9cGFyc2VGbG9hdChtLmJvcmRlckxlZnRXaWR0aCwxMCk7aSYmJ0hUTUwnPT09by5ub2RlTmFtZSYmKGEudG9wPSQoYS50b3AsMCksYS5sZWZ0PSQoYS5sZWZ0LDApKTt2YXIgYj1nKHt0b3A6ZC50b3AtYS50b3AtaCxsZWZ0OmQubGVmdC1hLmxlZnQtYyx3aWR0aDpkLndpZHRoLGhlaWdodDpkLmhlaWdodH0pO2lmKGIubWFyZ2luVG9wPTAsYi5tYXJnaW5MZWZ0PTAsIXAmJnMpe3ZhciB5PXBhcnNlRmxvYXQobS5tYXJnaW5Ub3AsMTApLHc9cGFyc2VGbG9hdChtLm1hcmdpbkxlZnQsMTApO2IudG9wLT1oLXksYi5ib3R0b20tPWgteSxiLmxlZnQtPWMtdyxiLnJpZ2h0LT1jLXcsYi5tYXJnaW5Ub3A9eSxiLm1hcmdpbkxlZnQ9d31yZXR1cm4ocCYmIWk/by5jb250YWlucyhsKTpvPT09bCYmJ0JPRFknIT09bC5ub2RlTmFtZSkmJihiPWYoYixvKSksYn1mdW5jdGlvbiB5KGUpe3ZhciB0PTE8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzFdJiZhcmd1bWVudHNbMV0sbz1lLm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LG49YihlLG8pLGk9JChvLmNsaWVudFdpZHRoLHdpbmRvdy5pbm5lcldpZHRofHwwKSxyPSQoby5jbGllbnRIZWlnaHQsd2luZG93LmlubmVySGVpZ2h0fHwwKSxwPXQ/MDpsKG8pLHM9dD8wOmwobywnbGVmdCcpLGQ9e3RvcDpwLW4udG9wK24ubWFyZ2luVG9wLGxlZnQ6cy1uLmxlZnQrbi5tYXJnaW5MZWZ0LHdpZHRoOmksaGVpZ2h0OnJ9O3JldHVybiBnKGQpfWZ1bmN0aW9uIHcoZSl7dmFyIG49ZS5ub2RlTmFtZTtyZXR1cm4nQk9EWSc9PT1ufHwnSFRNTCc9PT1uPyExOidmaXhlZCc9PT10KGUsJ3Bvc2l0aW9uJyl8fHcobyhlKSl9ZnVuY3Rpb24gRShlKXtpZighZXx8IWUucGFyZW50RWxlbWVudHx8cigpKXJldHVybiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7Zm9yKHZhciBvPWUucGFyZW50RWxlbWVudDtvJiYnbm9uZSc9PT10KG8sJ3RyYW5zZm9ybScpOylvPW8ucGFyZW50RWxlbWVudDtyZXR1cm4gb3x8ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50fWZ1bmN0aW9uIHYoZSx0LGkscil7dmFyIHA9NDxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbNF0mJmFyZ3VtZW50c1s0XSxzPXt0b3A6MCxsZWZ0OjB9LGQ9cD9FKGUpOmEoZSx0KTtpZigndmlld3BvcnQnPT09cilzPXkoZCxwKTtlbHNle3ZhciBsOydzY3JvbGxQYXJlbnQnPT09cj8obD1uKG8odCkpLCdCT0RZJz09PWwubm9kZU5hbWUmJihsPWUub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpKTond2luZG93Jz09PXI/bD1lLm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Omw9cjt2YXIgZj1iKGwsZCxwKTtpZignSFRNTCc9PT1sLm5vZGVOYW1lJiYhdyhkKSl7dmFyIG09YygpLGg9bS5oZWlnaHQsZz1tLndpZHRoO3MudG9wKz1mLnRvcC1mLm1hcmdpblRvcCxzLmJvdHRvbT1oK2YudG9wLHMubGVmdCs9Zi5sZWZ0LWYubWFyZ2luTGVmdCxzLnJpZ2h0PWcrZi5sZWZ0fWVsc2Ugcz1mfXJldHVybiBzLmxlZnQrPWkscy50b3ArPWkscy5yaWdodC09aSxzLmJvdHRvbS09aSxzfWZ1bmN0aW9uIHgoZSl7dmFyIHQ9ZS53aWR0aCxvPWUuaGVpZ2h0O3JldHVybiB0Km99ZnVuY3Rpb24gTyhlLHQsbyxuLGkpe3ZhciByPTU8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzVdP2FyZ3VtZW50c1s1XTowO2lmKC0xPT09ZS5pbmRleE9mKCdhdXRvJykpcmV0dXJuIGU7dmFyIHA9dihvLG4scixpKSxzPXt0b3A6e3dpZHRoOnAud2lkdGgsaGVpZ2h0OnQudG9wLXAudG9wfSxyaWdodDp7d2lkdGg6cC5yaWdodC10LnJpZ2h0LGhlaWdodDpwLmhlaWdodH0sYm90dG9tOnt3aWR0aDpwLndpZHRoLGhlaWdodDpwLmJvdHRvbS10LmJvdHRvbX0sbGVmdDp7d2lkdGg6dC5sZWZ0LXAubGVmdCxoZWlnaHQ6cC5oZWlnaHR9fSxkPU9iamVjdC5rZXlzKHMpLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gbGUoe2tleTplfSxzW2VdLHthcmVhOngoc1tlXSl9KX0pLnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5hcmVhLWUuYXJlYX0pLGE9ZC5maWx0ZXIoZnVuY3Rpb24oZSl7dmFyIHQ9ZS53aWR0aCxuPWUuaGVpZ2h0O3JldHVybiB0Pj1vLmNsaWVudFdpZHRoJiZuPj1vLmNsaWVudEhlaWdodH0pLGw9MDxhLmxlbmd0aD9hWzBdLmtleTpkWzBdLmtleSxmPWUuc3BsaXQoJy0nKVsxXTtyZXR1cm4gbCsoZj8nLScrZjonJyl9ZnVuY3Rpb24gTChlLHQsbyl7dmFyIG49Mzxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbM10/YXJndW1lbnRzWzNdOm51bGwsaT1uP0UodCk6YSh0LG8pO3JldHVybiBiKG8saSxuKX1mdW5jdGlvbiBTKGUpe3ZhciB0PWdldENvbXB1dGVkU3R5bGUoZSksbz1wYXJzZUZsb2F0KHQubWFyZ2luVG9wKStwYXJzZUZsb2F0KHQubWFyZ2luQm90dG9tKSxuPXBhcnNlRmxvYXQodC5tYXJnaW5MZWZ0KStwYXJzZUZsb2F0KHQubWFyZ2luUmlnaHQpLGk9e3dpZHRoOmUub2Zmc2V0V2lkdGgrbixoZWlnaHQ6ZS5vZmZzZXRIZWlnaHQrb307cmV0dXJuIGl9ZnVuY3Rpb24gVChlKXt2YXIgdD17bGVmdDoncmlnaHQnLHJpZ2h0OidsZWZ0Jyxib3R0b206J3RvcCcsdG9wOidib3R0b20nfTtyZXR1cm4gZS5yZXBsYWNlKC9sZWZ0fHJpZ2h0fGJvdHRvbXx0b3AvZyxmdW5jdGlvbihlKXtyZXR1cm4gdFtlXX0pfWZ1bmN0aW9uIEMoZSx0LG8pe289by5zcGxpdCgnLScpWzBdO3ZhciBuPVMoZSksaT17d2lkdGg6bi53aWR0aCxoZWlnaHQ6bi5oZWlnaHR9LHI9LTEhPT1bJ3JpZ2h0JywnbGVmdCddLmluZGV4T2YobykscD1yPyd0b3AnOidsZWZ0JyxzPXI/J2xlZnQnOid0b3AnLGQ9cj8naGVpZ2h0Jzond2lkdGgnLGE9cj8nd2lkdGgnOidoZWlnaHQnO3JldHVybiBpW3BdPXRbcF0rdFtkXS8yLW5bZF0vMixpW3NdPW89PT1zP3Rbc10tblthXTp0W1QocyldLGl9ZnVuY3Rpb24gRChlLHQpe3JldHVybiBBcnJheS5wcm90b3R5cGUuZmluZD9lLmZpbmQodCk6ZS5maWx0ZXIodClbMF19ZnVuY3Rpb24gTihlLHQsbyl7aWYoQXJyYXkucHJvdG90eXBlLmZpbmRJbmRleClyZXR1cm4gZS5maW5kSW5kZXgoZnVuY3Rpb24oZSl7cmV0dXJuIGVbdF09PT1vfSk7dmFyIG49RChlLGZ1bmN0aW9uKGUpe3JldHVybiBlW3RdPT09b30pO3JldHVybiBlLmluZGV4T2Yobil9ZnVuY3Rpb24gUCh0LG8sbil7dmFyIGk9dm9pZCAwPT09bj90OnQuc2xpY2UoMCxOKHQsJ25hbWUnLG4pKTtyZXR1cm4gaS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3RbJ2Z1bmN0aW9uJ10mJmNvbnNvbGUud2FybignYG1vZGlmaWVyLmZ1bmN0aW9uYCBpcyBkZXByZWNhdGVkLCB1c2UgYG1vZGlmaWVyLmZuYCEnKTt2YXIgbj10WydmdW5jdGlvbiddfHx0LmZuO3QuZW5hYmxlZCYmZShuKSYmKG8ub2Zmc2V0cy5wb3BwZXI9ZyhvLm9mZnNldHMucG9wcGVyKSxvLm9mZnNldHMucmVmZXJlbmNlPWcoby5vZmZzZXRzLnJlZmVyZW5jZSksbz1uKG8sdCkpfSksb31mdW5jdGlvbiBrKCl7aWYoIXRoaXMuc3RhdGUuaXNEZXN0cm95ZWQpe3ZhciBlPXtpbnN0YW5jZTp0aGlzLHN0eWxlczp7fSxhcnJvd1N0eWxlczp7fSxhdHRyaWJ1dGVzOnt9LGZsaXBwZWQ6ITEsb2Zmc2V0czp7fX07ZS5vZmZzZXRzLnJlZmVyZW5jZT1MKHRoaXMuc3RhdGUsdGhpcy5wb3BwZXIsdGhpcy5yZWZlcmVuY2UsdGhpcy5vcHRpb25zLnBvc2l0aW9uRml4ZWQpLGUucGxhY2VtZW50PU8odGhpcy5vcHRpb25zLnBsYWNlbWVudCxlLm9mZnNldHMucmVmZXJlbmNlLHRoaXMucG9wcGVyLHRoaXMucmVmZXJlbmNlLHRoaXMub3B0aW9ucy5tb2RpZmllcnMuZmxpcC5ib3VuZGFyaWVzRWxlbWVudCx0aGlzLm9wdGlvbnMubW9kaWZpZXJzLmZsaXAucGFkZGluZyksZS5vcmlnaW5hbFBsYWNlbWVudD1lLnBsYWNlbWVudCxlLnBvc2l0aW9uRml4ZWQ9dGhpcy5vcHRpb25zLnBvc2l0aW9uRml4ZWQsZS5vZmZzZXRzLnBvcHBlcj1DKHRoaXMucG9wcGVyLGUub2Zmc2V0cy5yZWZlcmVuY2UsZS5wbGFjZW1lbnQpLGUub2Zmc2V0cy5wb3BwZXIucG9zaXRpb249dGhpcy5vcHRpb25zLnBvc2l0aW9uRml4ZWQ/J2ZpeGVkJzonYWJzb2x1dGUnLGU9UCh0aGlzLm1vZGlmaWVycyxlKSx0aGlzLnN0YXRlLmlzQ3JlYXRlZD90aGlzLm9wdGlvbnMub25VcGRhdGUoZSk6KHRoaXMuc3RhdGUuaXNDcmVhdGVkPSEwLHRoaXMub3B0aW9ucy5vbkNyZWF0ZShlKSl9fWZ1bmN0aW9uIFcoZSx0KXtyZXR1cm4gZS5zb21lKGZ1bmN0aW9uKGUpe3ZhciBvPWUubmFtZSxuPWUuZW5hYmxlZDtyZXR1cm4gbiYmbz09PXR9KX1mdW5jdGlvbiBCKGUpe2Zvcih2YXIgdD1bITEsJ21zJywnV2Via2l0JywnTW96JywnTyddLG89ZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStlLnNsaWNlKDEpLG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIGk9dFtuXSxyPWk/JycraStvOmU7aWYoJ3VuZGVmaW5lZCchPXR5cGVvZiBkb2N1bWVudC5ib2R5LnN0eWxlW3JdKXJldHVybiByfXJldHVybiBudWxsfWZ1bmN0aW9uIEgoKXtyZXR1cm4gdGhpcy5zdGF0ZS5pc0Rlc3Ryb3llZD0hMCxXKHRoaXMubW9kaWZpZXJzLCdhcHBseVN0eWxlJykmJih0aGlzLnBvcHBlci5yZW1vdmVBdHRyaWJ1dGUoJ3gtcGxhY2VtZW50JyksdGhpcy5wb3BwZXIuc3R5bGUucG9zaXRpb249JycsdGhpcy5wb3BwZXIuc3R5bGUudG9wPScnLHRoaXMucG9wcGVyLnN0eWxlLmxlZnQ9JycsdGhpcy5wb3BwZXIuc3R5bGUucmlnaHQ9JycsdGhpcy5wb3BwZXIuc3R5bGUuYm90dG9tPScnLHRoaXMucG9wcGVyLnN0eWxlLndpbGxDaGFuZ2U9JycsdGhpcy5wb3BwZXIuc3R5bGVbQigndHJhbnNmb3JtJyldPScnKSx0aGlzLmRpc2FibGVFdmVudExpc3RlbmVycygpLHRoaXMub3B0aW9ucy5yZW1vdmVPbkRlc3Ryb3kmJnRoaXMucG9wcGVyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5wb3BwZXIpLHRoaXN9ZnVuY3Rpb24gQShlKXt2YXIgdD1lLm93bmVyRG9jdW1lbnQ7cmV0dXJuIHQ/dC5kZWZhdWx0Vmlldzp3aW5kb3d9ZnVuY3Rpb24gTShlLHQsbyxpKXt2YXIgcj0nQk9EWSc9PT1lLm5vZGVOYW1lLHA9cj9lLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc6ZTtwLmFkZEV2ZW50TGlzdGVuZXIodCxvLHtwYXNzaXZlOiEwfSkscnx8TShuKHAucGFyZW50Tm9kZSksdCxvLGkpLGkucHVzaChwKX1mdW5jdGlvbiBJKGUsdCxvLGkpe28udXBkYXRlQm91bmQ9aSxBKGUpLmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsby51cGRhdGVCb3VuZCx7cGFzc2l2ZTohMH0pO3ZhciByPW4oZSk7cmV0dXJuIE0ociwnc2Nyb2xsJyxvLnVwZGF0ZUJvdW5kLG8uc2Nyb2xsUGFyZW50cyksby5zY3JvbGxFbGVtZW50PXIsby5ldmVudHNFbmFibGVkPSEwLG99ZnVuY3Rpb24gRigpe3RoaXMuc3RhdGUuZXZlbnRzRW5hYmxlZHx8KHRoaXMuc3RhdGU9SSh0aGlzLnJlZmVyZW5jZSx0aGlzLm9wdGlvbnMsdGhpcy5zdGF0ZSx0aGlzLnNjaGVkdWxlVXBkYXRlKSl9ZnVuY3Rpb24gUihlLHQpe3JldHVybiBBKGUpLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsdC51cGRhdGVCb3VuZCksdC5zY3JvbGxQYXJlbnRzLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLHQudXBkYXRlQm91bmQpfSksdC51cGRhdGVCb3VuZD1udWxsLHQuc2Nyb2xsUGFyZW50cz1bXSx0LnNjcm9sbEVsZW1lbnQ9bnVsbCx0LmV2ZW50c0VuYWJsZWQ9ITEsdH1mdW5jdGlvbiBVKCl7dGhpcy5zdGF0ZS5ldmVudHNFbmFibGVkJiYoY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5zY2hlZHVsZVVwZGF0ZSksdGhpcy5zdGF0ZT1SKHRoaXMucmVmZXJlbmNlLHRoaXMuc3RhdGUpKX1mdW5jdGlvbiBZKGUpe3JldHVybicnIT09ZSYmIWlzTmFOKHBhcnNlRmxvYXQoZSkpJiZpc0Zpbml0ZShlKX1mdW5jdGlvbiBqKGUsdCl7T2JqZWN0LmtleXModCkuZm9yRWFjaChmdW5jdGlvbihvKXt2YXIgbj0nJzstMSE9PVsnd2lkdGgnLCdoZWlnaHQnLCd0b3AnLCdyaWdodCcsJ2JvdHRvbScsJ2xlZnQnXS5pbmRleE9mKG8pJiZZKHRbb10pJiYobj0ncHgnKSxlLnN0eWxlW29dPXRbb10rbn0pfWZ1bmN0aW9uIEsoZSx0KXtPYmplY3Qua2V5cyh0KS5mb3JFYWNoKGZ1bmN0aW9uKG8pe3ZhciBuPXRbb107ITE9PT1uP2UucmVtb3ZlQXR0cmlidXRlKG8pOmUuc2V0QXR0cmlidXRlKG8sdFtvXSl9KX1mdW5jdGlvbiBxKGUsdCxvKXt2YXIgbj1EKGUsZnVuY3Rpb24oZSl7dmFyIG89ZS5uYW1lO3JldHVybiBvPT09dH0pLGk9ISFuJiZlLnNvbWUoZnVuY3Rpb24oZSl7cmV0dXJuIGUubmFtZT09PW8mJmUuZW5hYmxlZCYmZS5vcmRlcjxuLm9yZGVyfSk7aWYoIWkpe3ZhciByPSdgJyt0KydgJztjb25zb2xlLndhcm4oJ2AnK28rJ2AnKycgbW9kaWZpZXIgaXMgcmVxdWlyZWQgYnkgJytyKycgbW9kaWZpZXIgaW4gb3JkZXIgdG8gd29yaywgYmUgc3VyZSB0byBpbmNsdWRlIGl0IGJlZm9yZSAnK3IrJyEnKX1yZXR1cm4gaX1mdW5jdGlvbiBHKGUpe3JldHVybidlbmQnPT09ZT8nc3RhcnQnOidzdGFydCc9PT1lPydlbmQnOmV9ZnVuY3Rpb24geihlKXt2YXIgdD0xPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSYmYXJndW1lbnRzWzFdLG89bWUuaW5kZXhPZihlKSxuPW1lLnNsaWNlKG8rMSkuY29uY2F0KG1lLnNsaWNlKDAsbykpO3JldHVybiB0P24ucmV2ZXJzZSgpOm59ZnVuY3Rpb24gVihlLHQsbyxuKXt2YXIgaT1lLm1hdGNoKC8oKD86XFwtfFxcKyk/XFxkKlxcLj9cXGQqKSguKikvKSxyPStpWzFdLHA9aVsyXTtpZighcilyZXR1cm4gZTtpZigwPT09cC5pbmRleE9mKCclJykpe3ZhciBzO3N3aXRjaChwKXtjYXNlJyVwJzpzPW87YnJlYWs7Y2FzZSclJzpjYXNlJyVyJzpkZWZhdWx0OnM9bjt9dmFyIGQ9ZyhzKTtyZXR1cm4gZFt0XS8xMDAqcn1pZigndmgnPT09cHx8J3Z3Jz09PXApe3ZhciBhO3JldHVybiBhPSd2aCc9PT1wPyQoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCx3aW5kb3cuaW5uZXJIZWlnaHR8fDApOiQoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoLHdpbmRvdy5pbm5lcldpZHRofHwwKSxhLzEwMCpyfXJldHVybiByfWZ1bmN0aW9uIF8oZSx0LG8sbil7dmFyIGk9WzAsMF0scj0tMSE9PVsncmlnaHQnLCdsZWZ0J10uaW5kZXhPZihuKSxwPWUuc3BsaXQoLyhcXCt8XFwtKS8pLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS50cmltKCl9KSxzPXAuaW5kZXhPZihEKHAsZnVuY3Rpb24oZSl7cmV0dXJuLTEhPT1lLnNlYXJjaCgvLHxcXHMvKX0pKTtwW3NdJiYtMT09PXBbc10uaW5kZXhPZignLCcpJiZjb25zb2xlLndhcm4oJ09mZnNldHMgc2VwYXJhdGVkIGJ5IHdoaXRlIHNwYWNlKHMpIGFyZSBkZXByZWNhdGVkLCB1c2UgYSBjb21tYSAoLCkgaW5zdGVhZC4nKTt2YXIgZD0vXFxzKixcXHMqfFxccysvLGE9LTE9PT1zP1twXTpbcC5zbGljZSgwLHMpLmNvbmNhdChbcFtzXS5zcGxpdChkKVswXV0pLFtwW3NdLnNwbGl0KGQpWzFdXS5jb25jYXQocC5zbGljZShzKzEpKV07cmV0dXJuIGE9YS5tYXAoZnVuY3Rpb24oZSxuKXt2YXIgaT0oMT09PW4/IXI6cik/J2hlaWdodCc6J3dpZHRoJyxwPSExO3JldHVybiBlLnJlZHVjZShmdW5jdGlvbihlLHQpe3JldHVybicnPT09ZVtlLmxlbmd0aC0xXSYmLTEhPT1bJysnLCctJ10uaW5kZXhPZih0KT8oZVtlLmxlbmd0aC0xXT10LHA9ITAsZSk6cD8oZVtlLmxlbmd0aC0xXSs9dCxwPSExLGUpOmUuY29uY2F0KHQpfSxbXSkubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBWKGUsaSx0LG8pfSl9KSxhLmZvckVhY2goZnVuY3Rpb24oZSx0KXtlLmZvckVhY2goZnVuY3Rpb24obyxuKXtZKG8pJiYoaVt0XSs9byooJy0nPT09ZVtuLTFdPy0xOjEpKX0pfSksaX1mdW5jdGlvbiBYKGUsdCl7dmFyIG8sbj10Lm9mZnNldCxpPWUucGxhY2VtZW50LHI9ZS5vZmZzZXRzLHA9ci5wb3BwZXIscz1yLnJlZmVyZW5jZSxkPWkuc3BsaXQoJy0nKVswXTtyZXR1cm4gbz1ZKCtuKT9bK24sMF06XyhuLHAscyxkKSwnbGVmdCc9PT1kPyhwLnRvcCs9b1swXSxwLmxlZnQtPW9bMV0pOidyaWdodCc9PT1kPyhwLnRvcCs9b1swXSxwLmxlZnQrPW9bMV0pOid0b3AnPT09ZD8ocC5sZWZ0Kz1vWzBdLHAudG9wLT1vWzFdKTonYm90dG9tJz09PWQmJihwLmxlZnQrPW9bMF0scC50b3ArPW9bMV0pLGUucG9wcGVyPXAsZX1mb3IodmFyIEo9TWF0aC5taW4sUT1NYXRoLnJvdW5kLFo9TWF0aC5mbG9vciwkPU1hdGgubWF4LGVlPSd1bmRlZmluZWQnIT10eXBlb2Ygd2luZG93JiYndW5kZWZpbmVkJyE9dHlwZW9mIGRvY3VtZW50LHRlPVsnRWRnZScsJ1RyaWRlbnQnLCdGaXJlZm94J10sb2U9MCxuZT0wO25lPHRlLmxlbmd0aDtuZSs9MSlpZihlZSYmMDw9bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKHRlW25lXSkpe29lPTE7YnJlYWt9dmFyIGk9ZWUmJndpbmRvdy5Qcm9taXNlLGllPWk/ZnVuY3Rpb24oZSl7dmFyIHQ9ITE7cmV0dXJuIGZ1bmN0aW9uKCl7dHx8KHQ9ITAsd2luZG93LlByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24oKXt0PSExLGUoKX0pKX19OmZ1bmN0aW9uKGUpe3ZhciB0PSExO3JldHVybiBmdW5jdGlvbigpe3R8fCh0PSEwLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt0PSExLGUoKX0sb2UpKX19LHJlPWVlJiYhISh3aW5kb3cuTVNJbnB1dE1ldGhvZENvbnRleHQmJmRvY3VtZW50LmRvY3VtZW50TW9kZSkscGU9ZWUmJi9NU0lFIDEwLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLHNlPWZ1bmN0aW9uKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uJyl9LGRlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgbyxuPTA7bjx0Lmxlbmd0aDtuKyspbz10W25dLG8uZW51bWVyYWJsZT1vLmVudW1lcmFibGV8fCExLG8uY29uZmlndXJhYmxlPSEwLCd2YWx1ZSdpbiBvJiYoby53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsby5rZXksbyl9cmV0dXJuIGZ1bmN0aW9uKHQsbyxuKXtyZXR1cm4gbyYmZSh0LnByb3RvdHlwZSxvKSxuJiZlKHQsbiksdH19KCksYWU9ZnVuY3Rpb24oZSx0LG8pe3JldHVybiB0IGluIGU/T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7dmFsdWU6byxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pOmVbdF09byxlfSxsZT1PYmplY3QuYXNzaWdufHxmdW5jdGlvbihlKXtmb3IodmFyIHQsbz0xO288YXJndW1lbnRzLmxlbmd0aDtvKyspZm9yKHZhciBuIGluIHQ9YXJndW1lbnRzW29dLHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbikmJihlW25dPXRbbl0pO3JldHVybiBlfSxmZT1bJ2F1dG8tc3RhcnQnLCdhdXRvJywnYXV0by1lbmQnLCd0b3Atc3RhcnQnLCd0b3AnLCd0b3AtZW5kJywncmlnaHQtc3RhcnQnLCdyaWdodCcsJ3JpZ2h0LWVuZCcsJ2JvdHRvbS1lbmQnLCdib3R0b20nLCdib3R0b20tc3RhcnQnLCdsZWZ0LWVuZCcsJ2xlZnQnLCdsZWZ0LXN0YXJ0J10sbWU9ZmUuc2xpY2UoMyksaGU9e0ZMSVA6J2ZsaXAnLENMT0NLV0lTRTonY2xvY2t3aXNlJyxDT1VOVEVSQ0xPQ0tXSVNFOidjb3VudGVyY2xvY2t3aXNlJ30sY2U9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KG8sbil7dmFyIGk9dGhpcyxyPTI8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTp7fTtzZSh0aGlzLHQpLHRoaXMuc2NoZWR1bGVVcGRhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGkudXBkYXRlKX0sdGhpcy51cGRhdGU9aWUodGhpcy51cGRhdGUuYmluZCh0aGlzKSksdGhpcy5vcHRpb25zPWxlKHt9LHQuRGVmYXVsdHMsciksdGhpcy5zdGF0ZT17aXNEZXN0cm95ZWQ6ITEsaXNDcmVhdGVkOiExLHNjcm9sbFBhcmVudHM6W119LHRoaXMucmVmZXJlbmNlPW8mJm8uanF1ZXJ5P29bMF06byx0aGlzLnBvcHBlcj1uJiZuLmpxdWVyeT9uWzBdOm4sdGhpcy5vcHRpb25zLm1vZGlmaWVycz17fSxPYmplY3Qua2V5cyhsZSh7fSx0LkRlZmF1bHRzLm1vZGlmaWVycyxyLm1vZGlmaWVycykpLmZvckVhY2goZnVuY3Rpb24oZSl7aS5vcHRpb25zLm1vZGlmaWVyc1tlXT1sZSh7fSx0LkRlZmF1bHRzLm1vZGlmaWVyc1tlXXx8e30sci5tb2RpZmllcnM/ci5tb2RpZmllcnNbZV06e30pfSksdGhpcy5tb2RpZmllcnM9T2JqZWN0LmtleXModGhpcy5vcHRpb25zLm1vZGlmaWVycykubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBsZSh7bmFtZTplfSxpLm9wdGlvbnMubW9kaWZpZXJzW2VdKX0pLnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5vcmRlci10Lm9yZGVyfSksdGhpcy5tb2RpZmllcnMuZm9yRWFjaChmdW5jdGlvbih0KXt0LmVuYWJsZWQmJmUodC5vbkxvYWQpJiZ0Lm9uTG9hZChpLnJlZmVyZW5jZSxpLnBvcHBlcixpLm9wdGlvbnMsdCxpLnN0YXRlKX0pLHRoaXMudXBkYXRlKCk7dmFyIHA9dGhpcy5vcHRpb25zLmV2ZW50c0VuYWJsZWQ7cCYmdGhpcy5lbmFibGVFdmVudExpc3RlbmVycygpLHRoaXMuc3RhdGUuZXZlbnRzRW5hYmxlZD1wfXJldHVybiBkZSh0LFt7a2V5Oid1cGRhdGUnLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIGsuY2FsbCh0aGlzKX19LHtrZXk6J2Rlc3Ryb3knLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIEguY2FsbCh0aGlzKX19LHtrZXk6J2VuYWJsZUV2ZW50TGlzdGVuZXJzJyx2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBGLmNhbGwodGhpcyl9fSx7a2V5OidkaXNhYmxlRXZlbnRMaXN0ZW5lcnMnLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIFUuY2FsbCh0aGlzKX19XSksdH0oKTtyZXR1cm4gY2UuVXRpbHM9KCd1bmRlZmluZWQnPT10eXBlb2Ygd2luZG93P2dsb2JhbDp3aW5kb3cpLlBvcHBlclV0aWxzLGNlLnBsYWNlbWVudHM9ZmUsY2UuRGVmYXVsdHM9e3BsYWNlbWVudDonYm90dG9tJyxwb3NpdGlvbkZpeGVkOiExLGV2ZW50c0VuYWJsZWQ6ITAscmVtb3ZlT25EZXN0cm95OiExLG9uQ3JlYXRlOmZ1bmN0aW9uKCl7fSxvblVwZGF0ZTpmdW5jdGlvbigpe30sbW9kaWZpZXJzOntzaGlmdDp7b3JkZXI6MTAwLGVuYWJsZWQ6ITAsZm46ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wbGFjZW1lbnQsbz10LnNwbGl0KCctJylbMF0sbj10LnNwbGl0KCctJylbMV07aWYobil7dmFyIGk9ZS5vZmZzZXRzLHI9aS5yZWZlcmVuY2UscD1pLnBvcHBlcixzPS0xIT09Wydib3R0b20nLCd0b3AnXS5pbmRleE9mKG8pLGQ9cz8nbGVmdCc6J3RvcCcsYT1zPyd3aWR0aCc6J2hlaWdodCcsbD17c3RhcnQ6YWUoe30sZCxyW2RdKSxlbmQ6YWUoe30sZCxyW2RdK3JbYV0tcFthXSl9O2Uub2Zmc2V0cy5wb3BwZXI9bGUoe30scCxsW25dKX1yZXR1cm4gZX19LG9mZnNldDp7b3JkZXI6MjAwLGVuYWJsZWQ6ITAsZm46WCxvZmZzZXQ6MH0scHJldmVudE92ZXJmbG93OntvcmRlcjozMDAsZW5hYmxlZDohMCxmbjpmdW5jdGlvbihlLHQpe3ZhciBvPXQuYm91bmRhcmllc0VsZW1lbnR8fHAoZS5pbnN0YW5jZS5wb3BwZXIpO2UuaW5zdGFuY2UucmVmZXJlbmNlPT09byYmKG89cChvKSk7dmFyIG49QigndHJhbnNmb3JtJyksaT1lLmluc3RhbmNlLnBvcHBlci5zdHlsZSxyPWkudG9wLHM9aS5sZWZ0LGQ9aVtuXTtpLnRvcD0nJyxpLmxlZnQ9JycsaVtuXT0nJzt2YXIgYT12KGUuaW5zdGFuY2UucG9wcGVyLGUuaW5zdGFuY2UucmVmZXJlbmNlLHQucGFkZGluZyxvLGUucG9zaXRpb25GaXhlZCk7aS50b3A9cixpLmxlZnQ9cyxpW25dPWQsdC5ib3VuZGFyaWVzPWE7dmFyIGw9dC5wcmlvcml0eSxmPWUub2Zmc2V0cy5wb3BwZXIsbT17cHJpbWFyeTpmdW5jdGlvbihlKXt2YXIgbz1mW2VdO3JldHVybiBmW2VdPGFbZV0mJiF0LmVzY2FwZVdpdGhSZWZlcmVuY2UmJihvPSQoZltlXSxhW2VdKSksYWUoe30sZSxvKX0sc2Vjb25kYXJ5OmZ1bmN0aW9uKGUpe3ZhciBvPSdyaWdodCc9PT1lPydsZWZ0JzondG9wJyxuPWZbb107cmV0dXJuIGZbZV0+YVtlXSYmIXQuZXNjYXBlV2l0aFJlZmVyZW5jZSYmKG49SihmW29dLGFbZV0tKCdyaWdodCc9PT1lP2Yud2lkdGg6Zi5oZWlnaHQpKSksYWUoe30sbyxuKX19O3JldHVybiBsLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9LTE9PT1bJ2xlZnQnLCd0b3AnXS5pbmRleE9mKGUpPydzZWNvbmRhcnknOidwcmltYXJ5JztmPWxlKHt9LGYsbVt0XShlKSl9KSxlLm9mZnNldHMucG9wcGVyPWYsZX0scHJpb3JpdHk6WydsZWZ0JywncmlnaHQnLCd0b3AnLCdib3R0b20nXSxwYWRkaW5nOjUsYm91bmRhcmllc0VsZW1lbnQ6J3Njcm9sbFBhcmVudCd9LGtlZXBUb2dldGhlcjp7b3JkZXI6NDAwLGVuYWJsZWQ6ITAsZm46ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5vZmZzZXRzLG89dC5wb3BwZXIsbj10LnJlZmVyZW5jZSxpPWUucGxhY2VtZW50LnNwbGl0KCctJylbMF0scj1aLHA9LTEhPT1bJ3RvcCcsJ2JvdHRvbSddLmluZGV4T2YoaSkscz1wPydyaWdodCc6J2JvdHRvbScsZD1wPydsZWZ0JzondG9wJyxhPXA/J3dpZHRoJzonaGVpZ2h0JztyZXR1cm4gb1tzXTxyKG5bZF0pJiYoZS5vZmZzZXRzLnBvcHBlcltkXT1yKG5bZF0pLW9bYV0pLG9bZF0+cihuW3NdKSYmKGUub2Zmc2V0cy5wb3BwZXJbZF09cihuW3NdKSksZX19LGFycm93OntvcmRlcjo1MDAsZW5hYmxlZDohMCxmbjpmdW5jdGlvbihlLG8pe3ZhciBuO2lmKCFxKGUuaW5zdGFuY2UubW9kaWZpZXJzLCdhcnJvdycsJ2tlZXBUb2dldGhlcicpKXJldHVybiBlO3ZhciBpPW8uZWxlbWVudDtpZignc3RyaW5nJz09dHlwZW9mIGkpe2lmKGk9ZS5pbnN0YW5jZS5wb3BwZXIucXVlcnlTZWxlY3RvcihpKSwhaSlyZXR1cm4gZTt9ZWxzZSBpZighZS5pbnN0YW5jZS5wb3BwZXIuY29udGFpbnMoaSkpcmV0dXJuIGNvbnNvbGUud2FybignV0FSTklORzogYGFycm93LmVsZW1lbnRgIG11c3QgYmUgY2hpbGQgb2YgaXRzIHBvcHBlciBlbGVtZW50IScpLGU7dmFyIHI9ZS5wbGFjZW1lbnQuc3BsaXQoJy0nKVswXSxwPWUub2Zmc2V0cyxzPXAucG9wcGVyLGQ9cC5yZWZlcmVuY2UsYT0tMSE9PVsnbGVmdCcsJ3JpZ2h0J10uaW5kZXhPZihyKSxsPWE/J2hlaWdodCc6J3dpZHRoJyxmPWE/J1RvcCc6J0xlZnQnLG09Zi50b0xvd2VyQ2FzZSgpLGg9YT8nbGVmdCc6J3RvcCcsYz1hPydib3R0b20nOidyaWdodCcsdT1TKGkpW2xdO2RbY10tdTxzW21dJiYoZS5vZmZzZXRzLnBvcHBlclttXS09c1ttXS0oZFtjXS11KSksZFttXSt1PnNbY10mJihlLm9mZnNldHMucG9wcGVyW21dKz1kW21dK3Utc1tjXSksZS5vZmZzZXRzLnBvcHBlcj1nKGUub2Zmc2V0cy5wb3BwZXIpO3ZhciBiPWRbbV0rZFtsXS8yLXUvMix5PXQoZS5pbnN0YW5jZS5wb3BwZXIpLHc9cGFyc2VGbG9hdCh5WydtYXJnaW4nK2ZdLDEwKSxFPXBhcnNlRmxvYXQoeVsnYm9yZGVyJytmKydXaWR0aCddLDEwKSx2PWItZS5vZmZzZXRzLnBvcHBlclttXS13LUU7cmV0dXJuIHY9JChKKHNbbF0tdSx2KSwwKSxlLmFycm93RWxlbWVudD1pLGUub2Zmc2V0cy5hcnJvdz0obj17fSxhZShuLG0sUSh2KSksYWUobixoLCcnKSxuKSxlfSxlbGVtZW50OidbeC1hcnJvd10nfSxmbGlwOntvcmRlcjo2MDAsZW5hYmxlZDohMCxmbjpmdW5jdGlvbihlLHQpe2lmKFcoZS5pbnN0YW5jZS5tb2RpZmllcnMsJ2lubmVyJykpcmV0dXJuIGU7aWYoZS5mbGlwcGVkJiZlLnBsYWNlbWVudD09PWUub3JpZ2luYWxQbGFjZW1lbnQpcmV0dXJuIGU7dmFyIG89dihlLmluc3RhbmNlLnBvcHBlcixlLmluc3RhbmNlLnJlZmVyZW5jZSx0LnBhZGRpbmcsdC5ib3VuZGFyaWVzRWxlbWVudCxlLnBvc2l0aW9uRml4ZWQpLG49ZS5wbGFjZW1lbnQuc3BsaXQoJy0nKVswXSxpPVQobikscj1lLnBsYWNlbWVudC5zcGxpdCgnLScpWzFdfHwnJyxwPVtdO3N3aXRjaCh0LmJlaGF2aW9yKXtjYXNlIGhlLkZMSVA6cD1bbixpXTticmVhaztjYXNlIGhlLkNMT0NLV0lTRTpwPXoobik7YnJlYWs7Y2FzZSBoZS5DT1VOVEVSQ0xPQ0tXSVNFOnA9eihuLCEwKTticmVhaztkZWZhdWx0OnA9dC5iZWhhdmlvcjt9cmV0dXJuIHAuZm9yRWFjaChmdW5jdGlvbihzLGQpe2lmKG4hPT1zfHxwLmxlbmd0aD09PWQrMSlyZXR1cm4gZTtuPWUucGxhY2VtZW50LnNwbGl0KCctJylbMF0saT1UKG4pO3ZhciBhPWUub2Zmc2V0cy5wb3BwZXIsbD1lLm9mZnNldHMucmVmZXJlbmNlLGY9WixtPSdsZWZ0Jz09PW4mJmYoYS5yaWdodCk+ZihsLmxlZnQpfHwncmlnaHQnPT09biYmZihhLmxlZnQpPGYobC5yaWdodCl8fCd0b3AnPT09biYmZihhLmJvdHRvbSk+ZihsLnRvcCl8fCdib3R0b20nPT09biYmZihhLnRvcCk8ZihsLmJvdHRvbSksaD1mKGEubGVmdCk8ZihvLmxlZnQpLGM9ZihhLnJpZ2h0KT5mKG8ucmlnaHQpLGc9ZihhLnRvcCk8ZihvLnRvcCksdT1mKGEuYm90dG9tKT5mKG8uYm90dG9tKSxiPSdsZWZ0Jz09PW4mJmh8fCdyaWdodCc9PT1uJiZjfHwndG9wJz09PW4mJmd8fCdib3R0b20nPT09biYmdSx5PS0xIT09Wyd0b3AnLCdib3R0b20nXS5pbmRleE9mKG4pLHc9ISF0LmZsaXBWYXJpYXRpb25zJiYoeSYmJ3N0YXJ0Jz09PXImJmh8fHkmJidlbmQnPT09ciYmY3x8IXkmJidzdGFydCc9PT1yJiZnfHwheSYmJ2VuZCc9PT1yJiZ1KTsobXx8Ynx8dykmJihlLmZsaXBwZWQ9ITAsKG18fGIpJiYobj1wW2QrMV0pLHcmJihyPUcocikpLGUucGxhY2VtZW50PW4rKHI/Jy0nK3I6JycpLGUub2Zmc2V0cy5wb3BwZXI9bGUoe30sZS5vZmZzZXRzLnBvcHBlcixDKGUuaW5zdGFuY2UucG9wcGVyLGUub2Zmc2V0cy5yZWZlcmVuY2UsZS5wbGFjZW1lbnQpKSxlPVAoZS5pbnN0YW5jZS5tb2RpZmllcnMsZSwnZmxpcCcpKX0pLGV9LGJlaGF2aW9yOidmbGlwJyxwYWRkaW5nOjUsYm91bmRhcmllc0VsZW1lbnQ6J3ZpZXdwb3J0J30saW5uZXI6e29yZGVyOjcwMCxlbmFibGVkOiExLGZuOmZ1bmN0aW9uKGUpe3ZhciB0PWUucGxhY2VtZW50LG89dC5zcGxpdCgnLScpWzBdLG49ZS5vZmZzZXRzLGk9bi5wb3BwZXIscj1uLnJlZmVyZW5jZSxwPS0xIT09WydsZWZ0JywncmlnaHQnXS5pbmRleE9mKG8pLHM9LTE9PT1bJ3RvcCcsJ2xlZnQnXS5pbmRleE9mKG8pO3JldHVybiBpW3A/J2xlZnQnOid0b3AnXT1yW29dLShzP2lbcD8nd2lkdGgnOidoZWlnaHQnXTowKSxlLnBsYWNlbWVudD1UKHQpLGUub2Zmc2V0cy5wb3BwZXI9ZyhpKSxlfX0saGlkZTp7b3JkZXI6ODAwLGVuYWJsZWQ6ITAsZm46ZnVuY3Rpb24oZSl7aWYoIXEoZS5pbnN0YW5jZS5tb2RpZmllcnMsJ2hpZGUnLCdwcmV2ZW50T3ZlcmZsb3cnKSlyZXR1cm4gZTt2YXIgdD1lLm9mZnNldHMucmVmZXJlbmNlLG89RChlLmluc3RhbmNlLm1vZGlmaWVycyxmdW5jdGlvbihlKXtyZXR1cm4ncHJldmVudE92ZXJmbG93Jz09PWUubmFtZX0pLmJvdW5kYXJpZXM7aWYodC5ib3R0b208by50b3B8fHQubGVmdD5vLnJpZ2h0fHx0LnRvcD5vLmJvdHRvbXx8dC5yaWdodDxvLmxlZnQpe2lmKCEwPT09ZS5oaWRlKXJldHVybiBlO2UuaGlkZT0hMCxlLmF0dHJpYnV0ZXNbJ3gtb3V0LW9mLWJvdW5kYXJpZXMnXT0nJ31lbHNle2lmKCExPT09ZS5oaWRlKXJldHVybiBlO2UuaGlkZT0hMSxlLmF0dHJpYnV0ZXNbJ3gtb3V0LW9mLWJvdW5kYXJpZXMnXT0hMX1yZXR1cm4gZX19LGNvbXB1dGVTdHlsZTp7b3JkZXI6ODUwLGVuYWJsZWQ6ITAsZm46ZnVuY3Rpb24oZSx0KXt2YXIgbz10Lngsbj10LnksaT1lLm9mZnNldHMucG9wcGVyLHI9RChlLmluc3RhbmNlLm1vZGlmaWVycyxmdW5jdGlvbihlKXtyZXR1cm4nYXBwbHlTdHlsZSc9PT1lLm5hbWV9KS5ncHVBY2NlbGVyYXRpb247dm9pZCAwIT09ciYmY29uc29sZS53YXJuKCdXQVJOSU5HOiBgZ3B1QWNjZWxlcmF0aW9uYCBvcHRpb24gbW92ZWQgdG8gYGNvbXB1dGVTdHlsZWAgbW9kaWZpZXIgYW5kIHdpbGwgbm90IGJlIHN1cHBvcnRlZCBpbiBmdXR1cmUgdmVyc2lvbnMgb2YgUG9wcGVyLmpzIScpO3ZhciBzLGQsYT12b2lkIDA9PT1yP3QuZ3B1QWNjZWxlcmF0aW9uOnIsbD1wKGUuaW5zdGFuY2UucG9wcGVyKSxmPXUobCksbT17cG9zaXRpb246aS5wb3NpdGlvbn0saD17bGVmdDpaKGkubGVmdCksdG9wOlEoaS50b3ApLGJvdHRvbTpRKGkuYm90dG9tKSxyaWdodDpaKGkucmlnaHQpfSxjPSdib3R0b20nPT09bz8ndG9wJzonYm90dG9tJyxnPSdyaWdodCc9PT1uPydsZWZ0JzoncmlnaHQnLGI9QigndHJhbnNmb3JtJyk7aWYoZD0nYm90dG9tJz09Yz8tZi5oZWlnaHQraC5ib3R0b206aC50b3Ascz0ncmlnaHQnPT1nPy1mLndpZHRoK2gucmlnaHQ6aC5sZWZ0LGEmJmIpbVtiXT0ndHJhbnNsYXRlM2QoJytzKydweCwgJytkKydweCwgMCknLG1bY109MCxtW2ddPTAsbS53aWxsQ2hhbmdlPSd0cmFuc2Zvcm0nO2Vsc2V7dmFyIHk9J2JvdHRvbSc9PWM/LTE6MSx3PSdyaWdodCc9PWc/LTE6MTttW2NdPWQqeSxtW2ddPXMqdyxtLndpbGxDaGFuZ2U9YysnLCAnK2d9dmFyIEU9e1wieC1wbGFjZW1lbnRcIjplLnBsYWNlbWVudH07cmV0dXJuIGUuYXR0cmlidXRlcz1sZSh7fSxFLGUuYXR0cmlidXRlcyksZS5zdHlsZXM9bGUoe30sbSxlLnN0eWxlcyksZS5hcnJvd1N0eWxlcz1sZSh7fSxlLm9mZnNldHMuYXJyb3csZS5hcnJvd1N0eWxlcyksZX0sZ3B1QWNjZWxlcmF0aW9uOiEwLHg6J2JvdHRvbScseToncmlnaHQnfSxhcHBseVN0eWxlOntvcmRlcjo5MDAsZW5hYmxlZDohMCxmbjpmdW5jdGlvbihlKXtyZXR1cm4gaihlLmluc3RhbmNlLnBvcHBlcixlLnN0eWxlcyksSyhlLmluc3RhbmNlLnBvcHBlcixlLmF0dHJpYnV0ZXMpLGUuYXJyb3dFbGVtZW50JiZPYmplY3Qua2V5cyhlLmFycm93U3R5bGVzKS5sZW5ndGgmJmooZS5hcnJvd0VsZW1lbnQsZS5hcnJvd1N0eWxlcyksZX0sb25Mb2FkOmZ1bmN0aW9uKGUsdCxvLG4saSl7dmFyIHI9TChpLHQsZSxvLnBvc2l0aW9uRml4ZWQpLHA9TyhvLnBsYWNlbWVudCxyLHQsZSxvLm1vZGlmaWVycy5mbGlwLmJvdW5kYXJpZXNFbGVtZW50LG8ubW9kaWZpZXJzLmZsaXAucGFkZGluZyk7cmV0dXJuIHQuc2V0QXR0cmlidXRlKCd4LXBsYWNlbWVudCcscCksaih0LHtwb3NpdGlvbjpvLnBvc2l0aW9uRml4ZWQ/J2ZpeGVkJzonYWJzb2x1dGUnfSksb30sZ3B1QWNjZWxlcmF0aW9uOnZvaWQgMH19fSxjZX0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cG9wcGVyLm1pbi5qcy5tYXBcbiIsIi8qISBTY3JvbGxNYWdpYyB2Mi4wLjUgfCAoYykgMjAxNSBKYW4gUGFlcGtlIChAamFucGFlcGtlKSB8IGxpY2Vuc2UgJiBpbmZvOiBodHRwOi8vc2Nyb2xsbWFnaWMuaW8gKi9cclxuIWZ1bmN0aW9uKGUsdCl7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZSh0KTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz10KCk6ZS5TY3JvbGxNYWdpYz10KCl9KHRoaXMsZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjt2YXIgZT1mdW5jdGlvbigpe307ZS52ZXJzaW9uPVwiMi4wLjVcIix3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNld2hlZWxcIixmdW5jdGlvbigpe30pO3ZhciB0PVwiZGF0YS1zY3JvbGxtYWdpYy1waW4tc3BhY2VyXCI7ZS5Db250cm9sbGVyPWZ1bmN0aW9uKHIpe3ZhciBvLHMsYT1cIlNjcm9sbE1hZ2ljLkNvbnRyb2xsZXJcIixsPVwiRk9SV0FSRFwiLGM9XCJSRVZFUlNFXCIsdT1cIlBBVVNFRFwiLGY9bi5kZWZhdWx0cyxkPXRoaXMsaD1pLmV4dGVuZCh7fSxmLHIpLGc9W10scD0hMSx2PTAsbT11LHc9ITAseT0wLFM9ITAsYj1mdW5jdGlvbigpe2Zvcih2YXIgZSBpbiBoKWYuaGFzT3duUHJvcGVydHkoZSl8fGRlbGV0ZSBoW2VdO2lmKGguY29udGFpbmVyPWkuZ2V0LmVsZW1lbnRzKGguY29udGFpbmVyKVswXSwhaC5jb250YWluZXIpdGhyb3cgYStcIiBpbml0IGZhaWxlZC5cIjt3PWguY29udGFpbmVyPT09d2luZG93fHxoLmNvbnRhaW5lcj09PWRvY3VtZW50LmJvZHl8fCFkb2N1bWVudC5ib2R5LmNvbnRhaW5zKGguY29udGFpbmVyKSx3JiYoaC5jb250YWluZXI9d2luZG93KSx5PXooKSxoLmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsVCksaC5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLFQpLGgucmVmcmVzaEludGVydmFsPXBhcnNlSW50KGgucmVmcmVzaEludGVydmFsKXx8Zi5yZWZyZXNoSW50ZXJ2YWwsRSgpfSxFPWZ1bmN0aW9uKCl7aC5yZWZyZXNoSW50ZXJ2YWw+MCYmKHM9d2luZG93LnNldFRpbWVvdXQoQSxoLnJlZnJlc2hJbnRlcnZhbCkpfSx4PWZ1bmN0aW9uKCl7cmV0dXJuIGgudmVydGljYWw/aS5nZXQuc2Nyb2xsVG9wKGguY29udGFpbmVyKTppLmdldC5zY3JvbGxMZWZ0KGguY29udGFpbmVyKX0sej1mdW5jdGlvbigpe3JldHVybiBoLnZlcnRpY2FsP2kuZ2V0LmhlaWdodChoLmNvbnRhaW5lcik6aS5nZXQud2lkdGgoaC5jb250YWluZXIpfSxDPXRoaXMuX3NldFNjcm9sbFBvcz1mdW5jdGlvbihlKXtoLnZlcnRpY2FsP3c/d2luZG93LnNjcm9sbFRvKGkuZ2V0LnNjcm9sbExlZnQoKSxlKTpoLmNvbnRhaW5lci5zY3JvbGxUb3A9ZTp3P3dpbmRvdy5zY3JvbGxUbyhlLGkuZ2V0LnNjcm9sbFRvcCgpKTpoLmNvbnRhaW5lci5zY3JvbGxMZWZ0PWV9LEY9ZnVuY3Rpb24oKXtpZihTJiZwKXt2YXIgZT1pLnR5cGUuQXJyYXkocCk/cDpnLnNsaWNlKDApO3A9ITE7dmFyIHQ9djt2PWQuc2Nyb2xsUG9zKCk7dmFyIG49di10OzAhPT1uJiYobT1uPjA/bDpjKSxtPT09YyYmZS5yZXZlcnNlKCksZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UudXBkYXRlKCEwKX0pfX0sTD1mdW5jdGlvbigpe289aS5yQUYoRil9LFQ9ZnVuY3Rpb24oZSl7XCJyZXNpemVcIj09ZS50eXBlJiYoeT16KCksbT11KSxwIT09ITAmJihwPSEwLEwoKSl9LEE9ZnVuY3Rpb24oKXtpZighdyYmeSE9eigpKXt2YXIgZTt0cnl7ZT1uZXcgRXZlbnQoXCJyZXNpemVcIix7YnViYmxlczohMSxjYW5jZWxhYmxlOiExfSl9Y2F0Y2godCl7ZT1kb2N1bWVudC5jcmVhdGVFdmVudChcIkV2ZW50XCIpLGUuaW5pdEV2ZW50KFwicmVzaXplXCIsITEsITEpfWguY29udGFpbmVyLmRpc3BhdGNoRXZlbnQoZSl9Zy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UucmVmcmVzaCgpfSksRSgpfTt0aGlzLl9vcHRpb25zPWg7dmFyIE89ZnVuY3Rpb24oZSl7aWYoZS5sZW5ndGg8PTEpcmV0dXJuIGU7dmFyIHQ9ZS5zbGljZSgwKTtyZXR1cm4gdC5zb3J0KGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuc2Nyb2xsT2Zmc2V0KCk+dC5zY3JvbGxPZmZzZXQoKT8xOi0xfSksdH07cmV0dXJuIHRoaXMuYWRkU2NlbmU9ZnVuY3Rpb24odCl7aWYoaS50eXBlLkFycmF5KHQpKXQuZm9yRWFjaChmdW5jdGlvbihlKXtkLmFkZFNjZW5lKGUpfSk7ZWxzZSBpZih0IGluc3RhbmNlb2YgZS5TY2VuZSlpZih0LmNvbnRyb2xsZXIoKSE9PWQpdC5hZGRUbyhkKTtlbHNlIGlmKGcuaW5kZXhPZih0KTwwKXtnLnB1c2godCksZz1PKGcpLHQub24oXCJzaGlmdC5jb250cm9sbGVyX3NvcnRcIixmdW5jdGlvbigpe2c9TyhnKX0pO2Zvcih2YXIgbiBpbiBoLmdsb2JhbFNjZW5lT3B0aW9ucyl0W25dJiZ0W25dLmNhbGwodCxoLmdsb2JhbFNjZW5lT3B0aW9uc1tuXSl9cmV0dXJuIGR9LHRoaXMucmVtb3ZlU2NlbmU9ZnVuY3Rpb24oZSl7aWYoaS50eXBlLkFycmF5KGUpKWUuZm9yRWFjaChmdW5jdGlvbihlKXtkLnJlbW92ZVNjZW5lKGUpfSk7ZWxzZXt2YXIgdD1nLmluZGV4T2YoZSk7dD4tMSYmKGUub2ZmKFwic2hpZnQuY29udHJvbGxlcl9zb3J0XCIpLGcuc3BsaWNlKHQsMSksZS5yZW1vdmUoKSl9cmV0dXJuIGR9LHRoaXMudXBkYXRlU2NlbmU9ZnVuY3Rpb24odCxuKXtyZXR1cm4gaS50eXBlLkFycmF5KHQpP3QuZm9yRWFjaChmdW5jdGlvbihlKXtkLnVwZGF0ZVNjZW5lKGUsbil9KTpuP3QudXBkYXRlKCEwKTpwIT09ITAmJnQgaW5zdGFuY2VvZiBlLlNjZW5lJiYocD1wfHxbXSwtMT09cC5pbmRleE9mKHQpJiZwLnB1c2godCkscD1PKHApLEwoKSksZH0sdGhpcy51cGRhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIFQoe3R5cGU6XCJyZXNpemVcIn0pLGUmJkYoKSxkfSx0aGlzLnNjcm9sbFRvPWZ1bmN0aW9uKG4scil7aWYoaS50eXBlLk51bWJlcihuKSlDLmNhbGwoaC5jb250YWluZXIsbixyKTtlbHNlIGlmKG4gaW5zdGFuY2VvZiBlLlNjZW5lKW4uY29udHJvbGxlcigpPT09ZCYmZC5zY3JvbGxUbyhuLnNjcm9sbE9mZnNldCgpLHIpO2Vsc2UgaWYoaS50eXBlLkZ1bmN0aW9uKG4pKUM9bjtlbHNle3ZhciBvPWkuZ2V0LmVsZW1lbnRzKG4pWzBdO2lmKG8pe2Zvcig7by5wYXJlbnROb2RlLmhhc0F0dHJpYnV0ZSh0KTspbz1vLnBhcmVudE5vZGU7dmFyIHM9aC52ZXJ0aWNhbD9cInRvcFwiOlwibGVmdFwiLGE9aS5nZXQub2Zmc2V0KGguY29udGFpbmVyKSxsPWkuZ2V0Lm9mZnNldChvKTt3fHwoYVtzXS09ZC5zY3JvbGxQb3MoKSksZC5zY3JvbGxUbyhsW3NdLWFbc10scil9fXJldHVybiBkfSx0aGlzLnNjcm9sbFBvcz1mdW5jdGlvbihlKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oaS50eXBlLkZ1bmN0aW9uKGUpJiYoeD1lKSxkKTp4LmNhbGwoZCl9LHRoaXMuaW5mbz1mdW5jdGlvbihlKXt2YXIgdD17c2l6ZTp5LHZlcnRpY2FsOmgudmVydGljYWwsc2Nyb2xsUG9zOnYsc2Nyb2xsRGlyZWN0aW9uOm0sY29udGFpbmVyOmguY29udGFpbmVyLGlzRG9jdW1lbnQ6d307cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/dm9pZCAwIT09dFtlXT90W2VdOnZvaWQgMDp0fSx0aGlzLmxvZ2xldmVsPWZ1bmN0aW9uKCl7cmV0dXJuIGR9LHRoaXMuZW5hYmxlZD1mdW5jdGlvbihlKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oUyE9ZSYmKFM9ISFlLGQudXBkYXRlU2NlbmUoZywhMCkpLGQpOlN9LHRoaXMuZGVzdHJveT1mdW5jdGlvbihlKXt3aW5kb3cuY2xlYXJUaW1lb3V0KHMpO2Zvcih2YXIgdD1nLmxlbmd0aDt0LS07KWdbdF0uZGVzdHJveShlKTtyZXR1cm4gaC5jb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLFQpLGguY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIixUKSxpLmNBRihvKSxudWxsfSxiKCksZH07dmFyIG49e2RlZmF1bHRzOntjb250YWluZXI6d2luZG93LHZlcnRpY2FsOiEwLGdsb2JhbFNjZW5lT3B0aW9uczp7fSxsb2dsZXZlbDoyLHJlZnJlc2hJbnRlcnZhbDoxMDB9fTtlLkNvbnRyb2xsZXIuYWRkT3B0aW9uPWZ1bmN0aW9uKGUsdCl7bi5kZWZhdWx0c1tlXT10fSxlLkNvbnRyb2xsZXIuZXh0ZW5kPWZ1bmN0aW9uKHQpe3ZhciBuPXRoaXM7ZS5Db250cm9sbGVyPWZ1bmN0aW9uKCl7cmV0dXJuIG4uYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuJHN1cGVyPWkuZXh0ZW5kKHt9LHRoaXMpLHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfSxpLmV4dGVuZChlLkNvbnRyb2xsZXIsbiksZS5Db250cm9sbGVyLnByb3RvdHlwZT1uLnByb3RvdHlwZSxlLkNvbnRyb2xsZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUuQ29udHJvbGxlcn0sZS5TY2VuZT1mdW5jdGlvbihuKXt2YXIgbyxzLGE9XCJCRUZPUkVcIixsPVwiRFVSSU5HXCIsYz1cIkFGVEVSXCIsdT1yLmRlZmF1bHRzLGY9dGhpcyxkPWkuZXh0ZW5kKHt9LHUsbiksaD1hLGc9MCxwPXtzdGFydDowLGVuZDowfSx2PTAsbT0hMCx3PWZ1bmN0aW9uKCl7Zm9yKHZhciBlIGluIGQpdS5oYXNPd25Qcm9wZXJ0eShlKXx8ZGVsZXRlIGRbZV07Zm9yKHZhciB0IGluIHUpTCh0KTtDKCl9LHk9e307dGhpcy5vbj1mdW5jdGlvbihlLHQpe3JldHVybiBpLnR5cGUuRnVuY3Rpb24odCkmJihlPWUudHJpbSgpLnNwbGl0KFwiIFwiKSxlLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIG49ZS5zcGxpdChcIi5cIikscj1uWzBdLGk9blsxXTtcIipcIiE9ciYmKHlbcl18fCh5W3JdPVtdKSx5W3JdLnB1c2goe25hbWVzcGFjZTppfHxcIlwiLGNhbGxiYWNrOnR9KSl9KSksZn0sdGhpcy5vZmY9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT8oZT1lLnRyaW0oKS5zcGxpdChcIiBcIiksZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciBuPWUuc3BsaXQoXCIuXCIpLHI9blswXSxpPW5bMV18fFwiXCIsbz1cIipcIj09PXI/T2JqZWN0LmtleXMoeSk6W3JdO28uZm9yRWFjaChmdW5jdGlvbihlKXtmb3IodmFyIG49eVtlXXx8W10scj1uLmxlbmd0aDtyLS07KXt2YXIgbz1uW3JdOyFvfHxpIT09by5uYW1lc3BhY2UmJlwiKlwiIT09aXx8dCYmdCE9by5jYWxsYmFja3x8bi5zcGxpY2UociwxKX1uLmxlbmd0aHx8ZGVsZXRlIHlbZV19KX0pLGYpOmZ9LHRoaXMudHJpZ2dlcj1mdW5jdGlvbih0LG4pe2lmKHQpe3ZhciByPXQudHJpbSgpLnNwbGl0KFwiLlwiKSxpPXJbMF0sbz1yWzFdLHM9eVtpXTtzJiZzLmZvckVhY2goZnVuY3Rpb24odCl7byYmbyE9PXQubmFtZXNwYWNlfHx0LmNhbGxiYWNrLmNhbGwoZixuZXcgZS5FdmVudChpLHQubmFtZXNwYWNlLGYsbikpfSl9cmV0dXJuIGZ9LGYub24oXCJjaGFuZ2UuaW50ZXJuYWxcIixmdW5jdGlvbihlKXtcImxvZ2xldmVsXCIhPT1lLndoYXQmJlwidHdlZW5DaGFuZ2VzXCIhPT1lLndoYXQmJihcInRyaWdnZXJFbGVtZW50XCI9PT1lLndoYXQ/RSgpOlwicmV2ZXJzZVwiPT09ZS53aGF0JiZmLnVwZGF0ZSgpKX0pLm9uKFwic2hpZnQuaW50ZXJuYWxcIixmdW5jdGlvbigpe1MoKSxmLnVwZGF0ZSgpfSksdGhpcy5hZGRUbz1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIGUuQ29udHJvbGxlciYmcyE9dCYmKHMmJnMucmVtb3ZlU2NlbmUoZikscz10LEMoKSxiKCEwKSxFKCEwKSxTKCkscy5pbmZvKFwiY29udGFpbmVyXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix4KSx0LmFkZFNjZW5lKGYpLGYudHJpZ2dlcihcImFkZFwiLHtjb250cm9sbGVyOnN9KSxmLnVwZGF0ZSgpKSxmfSx0aGlzLmVuYWJsZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG0hPWUmJihtPSEhZSxmLnVwZGF0ZSghMCkpLGYpOm19LHRoaXMucmVtb3ZlPWZ1bmN0aW9uKCl7aWYocyl7cy5pbmZvKFwiY29udGFpbmVyXCIpLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix4KTt2YXIgZT1zO3M9dm9pZCAwLGUucmVtb3ZlU2NlbmUoZiksZi50cmlnZ2VyKFwicmVtb3ZlXCIpfXJldHVybiBmfSx0aGlzLmRlc3Ryb3k9ZnVuY3Rpb24oZSl7cmV0dXJuIGYudHJpZ2dlcihcImRlc3Ryb3lcIix7cmVzZXQ6ZX0pLGYucmVtb3ZlKCksZi5vZmYoXCIqLipcIiksbnVsbH0sdGhpcy51cGRhdGU9ZnVuY3Rpb24oZSl7aWYocylpZihlKWlmKHMuZW5hYmxlZCgpJiZtKXt2YXIgdCxuPXMuaW5mbyhcInNjcm9sbFBvc1wiKTt0PWQuZHVyYXRpb24+MD8obi1wLnN0YXJ0KS8ocC5lbmQtcC5zdGFydCk6bj49cC5zdGFydD8xOjAsZi50cmlnZ2VyKFwidXBkYXRlXCIse3N0YXJ0UG9zOnAuc3RhcnQsZW5kUG9zOnAuZW5kLHNjcm9sbFBvczpufSksZi5wcm9ncmVzcyh0KX1lbHNlIFQmJmg9PT1sJiZPKCEwKTtlbHNlIHMudXBkYXRlU2NlbmUoZiwhMSk7cmV0dXJuIGZ9LHRoaXMucmVmcmVzaD1mdW5jdGlvbigpe3JldHVybiBiKCksRSgpLGZ9LHRoaXMucHJvZ3Jlc3M9ZnVuY3Rpb24oZSl7aWYoYXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9ITEsbj1oLHI9cz9zLmluZm8oXCJzY3JvbGxEaXJlY3Rpb25cIik6XCJQQVVTRURcIixpPWQucmV2ZXJzZXx8ZT49ZztpZigwPT09ZC5kdXJhdGlvbj8odD1nIT1lLGc9MT5lJiZpPzA6MSxoPTA9PT1nP2E6bCk6MD5lJiZoIT09YSYmaT8oZz0wLGg9YSx0PSEwKTplPj0wJiYxPmUmJmk/KGc9ZSxoPWwsdD0hMCk6ZT49MSYmaCE9PWM/KGc9MSxoPWMsdD0hMCk6aCE9PWx8fGl8fE8oKSx0KXt2YXIgbz17cHJvZ3Jlc3M6ZyxzdGF0ZTpoLHNjcm9sbERpcmVjdGlvbjpyfSx1PWghPW4scD1mdW5jdGlvbihlKXtmLnRyaWdnZXIoZSxvKX07dSYmbiE9PWwmJihwKFwiZW50ZXJcIikscChuPT09YT9cInN0YXJ0XCI6XCJlbmRcIikpLHAoXCJwcm9ncmVzc1wiKSx1JiZoIT09bCYmKHAoaD09PWE/XCJzdGFydFwiOlwiZW5kXCIpLHAoXCJsZWF2ZVwiKSl9cmV0dXJuIGZ9cmV0dXJuIGd9O3ZhciBTPWZ1bmN0aW9uKCl7cD17c3RhcnQ6ditkLm9mZnNldH0scyYmZC50cmlnZ2VyRWxlbWVudCYmKHAuc3RhcnQtPXMuaW5mbyhcInNpemVcIikqZC50cmlnZ2VySG9vaykscC5lbmQ9cC5zdGFydCtkLmR1cmF0aW9ufSxiPWZ1bmN0aW9uKGUpe2lmKG8pe3ZhciB0PVwiZHVyYXRpb25cIjtGKHQsby5jYWxsKGYpKSYmIWUmJihmLnRyaWdnZXIoXCJjaGFuZ2VcIix7d2hhdDp0LG5ld3ZhbDpkW3RdfSksZi50cmlnZ2VyKFwic2hpZnRcIix7cmVhc29uOnR9KSl9fSxFPWZ1bmN0aW9uKGUpe3ZhciBuPTAscj1kLnRyaWdnZXJFbGVtZW50O2lmKHMmJnIpe2Zvcih2YXIgbz1zLmluZm8oKSxhPWkuZ2V0Lm9mZnNldChvLmNvbnRhaW5lciksbD1vLnZlcnRpY2FsP1widG9wXCI6XCJsZWZ0XCI7ci5wYXJlbnROb2RlLmhhc0F0dHJpYnV0ZSh0KTspcj1yLnBhcmVudE5vZGU7dmFyIGM9aS5nZXQub2Zmc2V0KHIpO28uaXNEb2N1bWVudHx8KGFbbF0tPXMuc2Nyb2xsUG9zKCkpLG49Y1tsXS1hW2xdfXZhciB1PW4hPXY7dj1uLHUmJiFlJiZmLnRyaWdnZXIoXCJzaGlmdFwiLHtyZWFzb246XCJ0cmlnZ2VyRWxlbWVudFBvc2l0aW9uXCJ9KX0seD1mdW5jdGlvbigpe2QudHJpZ2dlckhvb2s+MCYmZi50cmlnZ2VyKFwic2hpZnRcIix7cmVhc29uOlwiY29udGFpbmVyUmVzaXplXCJ9KX0sej1pLmV4dGVuZChyLnZhbGlkYXRlLHtkdXJhdGlvbjpmdW5jdGlvbihlKXtpZihpLnR5cGUuU3RyaW5nKGUpJiZlLm1hdGNoKC9eKFxcLnxcXGQpKlxcZCslJC8pKXt2YXIgdD1wYXJzZUZsb2F0KGUpLzEwMDtlPWZ1bmN0aW9uKCl7cmV0dXJuIHM/cy5pbmZvKFwic2l6ZVwiKSp0OjB9fWlmKGkudHlwZS5GdW5jdGlvbihlKSl7bz1lO3RyeXtlPXBhcnNlRmxvYXQobygpKX1jYXRjaChuKXtlPS0xfX1pZihlPXBhcnNlRmxvYXQoZSksIWkudHlwZS5OdW1iZXIoZSl8fDA+ZSl0aHJvdyBvPyhvPXZvaWQgMCwwKTowO3JldHVybiBlfX0pLEM9ZnVuY3Rpb24oZSl7ZT1hcmd1bWVudHMubGVuZ3RoP1tlXTpPYmplY3Qua2V5cyh6KSxlLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ7aWYoeltlXSl0cnl7dD16W2VdKGRbZV0pfWNhdGNoKG4pe3Q9dVtlXX1maW5hbGx5e2RbZV09dH19KX0sRj1mdW5jdGlvbihlLHQpe3ZhciBuPSExLHI9ZFtlXTtyZXR1cm4gZFtlXSE9dCYmKGRbZV09dCxDKGUpLG49ciE9ZFtlXSksbn0sTD1mdW5jdGlvbihlKXtmW2VdfHwoZltlXT1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oXCJkdXJhdGlvblwiPT09ZSYmKG89dm9pZCAwKSxGKGUsdCkmJihmLnRyaWdnZXIoXCJjaGFuZ2VcIix7d2hhdDplLG5ld3ZhbDpkW2VdfSksci5zaGlmdHMuaW5kZXhPZihlKT4tMSYmZi50cmlnZ2VyKFwic2hpZnRcIix7cmVhc29uOmV9KSksZik6ZFtlXX0pfTt0aGlzLmNvbnRyb2xsZXI9ZnVuY3Rpb24oKXtyZXR1cm4gc30sdGhpcy5zdGF0ZT1mdW5jdGlvbigpe3JldHVybiBofSx0aGlzLnNjcm9sbE9mZnNldD1mdW5jdGlvbigpe3JldHVybiBwLnN0YXJ0fSx0aGlzLnRyaWdnZXJQb3NpdGlvbj1mdW5jdGlvbigpe3ZhciBlPWQub2Zmc2V0O3JldHVybiBzJiYoZSs9ZC50cmlnZ2VyRWxlbWVudD92OnMuaW5mbyhcInNpemVcIikqZi50cmlnZ2VySG9vaygpKSxlfTt2YXIgVCxBO2Yub24oXCJzaGlmdC5pbnRlcm5hbFwiLGZ1bmN0aW9uKGUpe3ZhciB0PVwiZHVyYXRpb25cIj09PWUucmVhc29uOyhoPT09YyYmdHx8aD09PWwmJjA9PT1kLmR1cmF0aW9uKSYmTygpLHQmJl8oKX0pLm9uKFwicHJvZ3Jlc3MuaW50ZXJuYWxcIixmdW5jdGlvbigpe08oKX0pLm9uKFwiYWRkLmludGVybmFsXCIsZnVuY3Rpb24oKXtfKCl9KS5vbihcImRlc3Ryb3kuaW50ZXJuYWxcIixmdW5jdGlvbihlKXtmLnJlbW92ZVBpbihlLnJlc2V0KX0pO3ZhciBPPWZ1bmN0aW9uKGUpe2lmKFQmJnMpe3ZhciB0PXMuaW5mbygpLG49QS5zcGFjZXIuZmlyc3RDaGlsZDtpZihlfHxoIT09bCl7dmFyIHI9e3Bvc2l0aW9uOkEuaW5GbG93P1wicmVsYXRpdmVcIjpcImFic29sdXRlXCIsdG9wOjAsbGVmdDowfSxvPWkuY3NzKG4sXCJwb3NpdGlvblwiKSE9ci5wb3NpdGlvbjtBLnB1c2hGb2xsb3dlcnM/ZC5kdXJhdGlvbj4wJiYoaD09PWMmJjA9PT1wYXJzZUZsb2F0KGkuY3NzKEEuc3BhY2VyLFwicGFkZGluZy10b3BcIikpP289ITA6aD09PWEmJjA9PT1wYXJzZUZsb2F0KGkuY3NzKEEuc3BhY2VyLFwicGFkZGluZy1ib3R0b21cIikpJiYobz0hMCkpOnJbdC52ZXJ0aWNhbD9cInRvcFwiOlwibGVmdFwiXT1kLmR1cmF0aW9uKmcsaS5jc3MobixyKSxvJiZfKCl9ZWxzZXtcImZpeGVkXCIhPWkuY3NzKG4sXCJwb3NpdGlvblwiKSYmKGkuY3NzKG4se3Bvc2l0aW9uOlwiZml4ZWRcIn0pLF8oKSk7dmFyIHU9aS5nZXQub2Zmc2V0KEEuc3BhY2VyLCEwKSxmPWQucmV2ZXJzZXx8MD09PWQuZHVyYXRpb24/dC5zY3JvbGxQb3MtcC5zdGFydDpNYXRoLnJvdW5kKGcqZC5kdXJhdGlvbioxMCkvMTA7dVt0LnZlcnRpY2FsP1widG9wXCI6XCJsZWZ0XCJdKz1mLGkuY3NzKEEuc3BhY2VyLmZpcnN0Q2hpbGQse3RvcDp1LnRvcCxsZWZ0OnUubGVmdH0pfX19LF89ZnVuY3Rpb24oKXtpZihUJiZzJiZBLmluRmxvdyl7dmFyIGU9aD09PWwsdD1zLmluZm8oXCJ2ZXJ0aWNhbFwiKSxuPUEuc3BhY2VyLmZpcnN0Q2hpbGQscj1pLmlzTWFyZ2luQ29sbGFwc2VUeXBlKGkuY3NzKEEuc3BhY2VyLFwiZGlzcGxheVwiKSksbz17fTtBLnJlbFNpemUud2lkdGh8fEEucmVsU2l6ZS5hdXRvRnVsbFdpZHRoP2U/aS5jc3MoVCx7d2lkdGg6aS5nZXQud2lkdGgoQS5zcGFjZXIpfSk6aS5jc3MoVCx7d2lkdGg6XCIxMDAlXCJ9KToob1tcIm1pbi13aWR0aFwiXT1pLmdldC53aWR0aCh0P1Q6biwhMCwhMCksby53aWR0aD1lP29bXCJtaW4td2lkdGhcIl06XCJhdXRvXCIpLEEucmVsU2l6ZS5oZWlnaHQ/ZT9pLmNzcyhULHtoZWlnaHQ6aS5nZXQuaGVpZ2h0KEEuc3BhY2VyKS0oQS5wdXNoRm9sbG93ZXJzP2QuZHVyYXRpb246MCl9KTppLmNzcyhULHtoZWlnaHQ6XCIxMDAlXCJ9KToob1tcIm1pbi1oZWlnaHRcIl09aS5nZXQuaGVpZ2h0KHQ/bjpULCEwLCFyKSxvLmhlaWdodD1lP29bXCJtaW4taGVpZ2h0XCJdOlwiYXV0b1wiKSxBLnB1c2hGb2xsb3dlcnMmJihvW1wicGFkZGluZ1wiKyh0P1wiVG9wXCI6XCJMZWZ0XCIpXT1kLmR1cmF0aW9uKmcsb1tcInBhZGRpbmdcIisodD9cIkJvdHRvbVwiOlwiUmlnaHRcIildPWQuZHVyYXRpb24qKDEtZykpLGkuY3NzKEEuc3BhY2VyLG8pfX0sTj1mdW5jdGlvbigpe3MmJlQmJmg9PT1sJiYhcy5pbmZvKFwiaXNEb2N1bWVudFwiKSYmTygpfSxQPWZ1bmN0aW9uKCl7cyYmVCYmaD09PWwmJigoQS5yZWxTaXplLndpZHRofHxBLnJlbFNpemUuYXV0b0Z1bGxXaWR0aCkmJmkuZ2V0LndpZHRoKHdpbmRvdykhPWkuZ2V0LndpZHRoKEEuc3BhY2VyLnBhcmVudE5vZGUpfHxBLnJlbFNpemUuaGVpZ2h0JiZpLmdldC5oZWlnaHQod2luZG93KSE9aS5nZXQuaGVpZ2h0KEEuc3BhY2VyLnBhcmVudE5vZGUpKSYmXygpfSxEPWZ1bmN0aW9uKGUpe3MmJlQmJmg9PT1sJiYhcy5pbmZvKFwiaXNEb2N1bWVudFwiKSYmKGUucHJldmVudERlZmF1bHQoKSxzLl9zZXRTY3JvbGxQb3Mocy5pbmZvKFwic2Nyb2xsUG9zXCIpLSgoZS53aGVlbERlbHRhfHxlW3MuaW5mbyhcInZlcnRpY2FsXCIpP1wid2hlZWxEZWx0YVlcIjpcIndoZWVsRGVsdGFYXCJdKS8zfHwzMCotZS5kZXRhaWwpKSl9O3RoaXMuc2V0UGluPWZ1bmN0aW9uKGUsbil7dmFyIHI9e3B1c2hGb2xsb3dlcnM6ITAsc3BhY2VyQ2xhc3M6XCJzY3JvbGxtYWdpYy1waW4tc3BhY2VyXCJ9O2lmKG49aS5leHRlbmQoe30scixuKSxlPWkuZ2V0LmVsZW1lbnRzKGUpWzBdLCFlKXJldHVybiBmO2lmKFwiZml4ZWRcIj09PWkuY3NzKGUsXCJwb3NpdGlvblwiKSlyZXR1cm4gZjtpZihUKXtpZihUPT09ZSlyZXR1cm4gZjtmLnJlbW92ZVBpbigpfVQ9ZTt2YXIgbz1ULnBhcmVudE5vZGUuc3R5bGUuZGlzcGxheSxzPVtcInRvcFwiLFwibGVmdFwiLFwiYm90dG9tXCIsXCJyaWdodFwiLFwibWFyZ2luXCIsXCJtYXJnaW5MZWZ0XCIsXCJtYXJnaW5SaWdodFwiLFwibWFyZ2luVG9wXCIsXCJtYXJnaW5Cb3R0b21cIl07VC5wYXJlbnROb2RlLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7dmFyIGE9XCJhYnNvbHV0ZVwiIT1pLmNzcyhULFwicG9zaXRpb25cIiksbD1pLmNzcyhULHMuY29uY2F0KFtcImRpc3BsYXlcIl0pKSxjPWkuY3NzKFQsW1wid2lkdGhcIixcImhlaWdodFwiXSk7VC5wYXJlbnROb2RlLnN0eWxlLmRpc3BsYXk9bywhYSYmbi5wdXNoRm9sbG93ZXJzJiYobi5wdXNoRm9sbG93ZXJzPSExKTt2YXIgdT1ULnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksVCksZD1pLmV4dGVuZChsLHtwb3NpdGlvbjphP1wicmVsYXRpdmVcIjpcImFic29sdXRlXCIsYm94U2l6aW5nOlwiY29udGVudC1ib3hcIixtb3pCb3hTaXppbmc6XCJjb250ZW50LWJveFwiLHdlYmtpdEJveFNpemluZzpcImNvbnRlbnQtYm94XCJ9KTtpZihhfHxpLmV4dGVuZChkLGkuY3NzKFQsW1wid2lkdGhcIixcImhlaWdodFwiXSkpLGkuY3NzKHUsZCksdS5zZXRBdHRyaWJ1dGUodCxcIlwiKSxpLmFkZENsYXNzKHUsbi5zcGFjZXJDbGFzcyksQT17c3BhY2VyOnUscmVsU2l6ZTp7d2lkdGg6XCIlXCI9PT1jLndpZHRoLnNsaWNlKC0xKSxoZWlnaHQ6XCIlXCI9PT1jLmhlaWdodC5zbGljZSgtMSksYXV0b0Z1bGxXaWR0aDpcImF1dG9cIj09PWMud2lkdGgmJmEmJmkuaXNNYXJnaW5Db2xsYXBzZVR5cGUobC5kaXNwbGF5KX0scHVzaEZvbGxvd2VyczpuLnB1c2hGb2xsb3dlcnMsaW5GbG93OmF9LCFULl9fX29yaWdTdHlsZSl7VC5fX19vcmlnU3R5bGU9e307dmFyIGg9VC5zdHlsZSxnPXMuY29uY2F0KFtcIndpZHRoXCIsXCJoZWlnaHRcIixcInBvc2l0aW9uXCIsXCJib3hTaXppbmdcIixcIm1vekJveFNpemluZ1wiLFwid2Via2l0Qm94U2l6aW5nXCJdKTtnLmZvckVhY2goZnVuY3Rpb24oZSl7VC5fX19vcmlnU3R5bGVbZV09aFtlXXx8XCJcIn0pfXJldHVybiBBLnJlbFNpemUud2lkdGgmJmkuY3NzKHUse3dpZHRoOmMud2lkdGh9KSxBLnJlbFNpemUuaGVpZ2h0JiZpLmNzcyh1LHtoZWlnaHQ6Yy5oZWlnaHR9KSx1LmFwcGVuZENoaWxkKFQpLGkuY3NzKFQse3Bvc2l0aW9uOmE/XCJyZWxhdGl2ZVwiOlwiYWJzb2x1dGVcIixtYXJnaW46XCJhdXRvXCIsdG9wOlwiYXV0b1wiLGxlZnQ6XCJhdXRvXCIsYm90dG9tOlwiYXV0b1wiLHJpZ2h0OlwiYXV0b1wifSksKEEucmVsU2l6ZS53aWR0aHx8QS5yZWxTaXplLmF1dG9GdWxsV2lkdGgpJiZpLmNzcyhULHtib3hTaXppbmc6XCJib3JkZXItYm94XCIsbW96Qm94U2l6aW5nOlwiYm9yZGVyLWJveFwiLHdlYmtpdEJveFNpemluZzpcImJvcmRlci1ib3hcIn0pLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsTiksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIixOKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLFApLFQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNld2hlZWxcIixEKSxULmFkZEV2ZW50TGlzdGVuZXIoXCJET01Nb3VzZVNjcm9sbFwiLEQpLE8oKSxmfSx0aGlzLnJlbW92ZVBpbj1mdW5jdGlvbihlKXtpZihUKXtpZihoPT09bCYmTyghMCksZXx8IXMpe3ZhciBuPUEuc3BhY2VyLmZpcnN0Q2hpbGQ7aWYobi5oYXNBdHRyaWJ1dGUodCkpe3ZhciByPUEuc3BhY2VyLnN0eWxlLG89W1wibWFyZ2luXCIsXCJtYXJnaW5MZWZ0XCIsXCJtYXJnaW5SaWdodFwiLFwibWFyZ2luVG9wXCIsXCJtYXJnaW5Cb3R0b21cIl07bWFyZ2lucz17fSxvLmZvckVhY2goZnVuY3Rpb24oZSl7bWFyZ2luc1tlXT1yW2VdfHxcIlwifSksaS5jc3MobixtYXJnaW5zKX1BLnNwYWNlci5wYXJlbnROb2RlLmluc2VydEJlZm9yZShuLEEuc3BhY2VyKSxBLnNwYWNlci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKEEuc3BhY2VyKSxULnBhcmVudE5vZGUuaGFzQXR0cmlidXRlKHQpfHwoaS5jc3MoVCxULl9fX29yaWdTdHlsZSksZGVsZXRlIFQuX19fb3JpZ1N0eWxlKX13aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLE4pLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsTiksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIixQKSxULnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXdoZWVsXCIsRCksVC5yZW1vdmVFdmVudExpc3RlbmVyKFwiRE9NTW91c2VTY3JvbGxcIixEKSxUPXZvaWQgMH1yZXR1cm4gZn07dmFyIFIsaz1bXTtyZXR1cm4gZi5vbihcImRlc3Ryb3kuaW50ZXJuYWxcIixmdW5jdGlvbihlKXtmLnJlbW92ZUNsYXNzVG9nZ2xlKGUucmVzZXQpfSksdGhpcy5zZXRDbGFzc1RvZ2dsZT1mdW5jdGlvbihlLHQpe3ZhciBuPWkuZ2V0LmVsZW1lbnRzKGUpO3JldHVybiAwIT09bi5sZW5ndGgmJmkudHlwZS5TdHJpbmcodCk/KGsubGVuZ3RoPjAmJmYucmVtb3ZlQ2xhc3NUb2dnbGUoKSxSPXQsaz1uLGYub24oXCJlbnRlci5pbnRlcm5hbF9jbGFzcyBsZWF2ZS5pbnRlcm5hbF9jbGFzc1wiLGZ1bmN0aW9uKGUpe3ZhciB0PVwiZW50ZXJcIj09PWUudHlwZT9pLmFkZENsYXNzOmkucmVtb3ZlQ2xhc3M7ay5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QoZSxSKX0pfSksZik6Zn0sdGhpcy5yZW1vdmVDbGFzc1RvZ2dsZT1mdW5jdGlvbihlKXtyZXR1cm4gZSYmay5mb3JFYWNoKGZ1bmN0aW9uKGUpe2kucmVtb3ZlQ2xhc3MoZSxSKX0pLGYub2ZmKFwic3RhcnQuaW50ZXJuYWxfY2xhc3MgZW5kLmludGVybmFsX2NsYXNzXCIpLFI9dm9pZCAwLGs9W10sZn0sdygpLGZ9O3ZhciByPXtkZWZhdWx0czp7ZHVyYXRpb246MCxvZmZzZXQ6MCx0cmlnZ2VyRWxlbWVudDp2b2lkIDAsdHJpZ2dlckhvb2s6LjUscmV2ZXJzZTohMCxsb2dsZXZlbDoyfSx2YWxpZGF0ZTp7b2Zmc2V0OmZ1bmN0aW9uKGUpe2lmKGU9cGFyc2VGbG9hdChlKSwhaS50eXBlLk51bWJlcihlKSl0aHJvdyAwO3JldHVybiBlfSx0cmlnZ2VyRWxlbWVudDpmdW5jdGlvbihlKXtpZihlPWV8fHZvaWQgMCl7dmFyIHQ9aS5nZXQuZWxlbWVudHMoZSlbMF07aWYoIXQpdGhyb3cgMDtlPXR9cmV0dXJuIGV9LHRyaWdnZXJIb29rOmZ1bmN0aW9uKGUpe3ZhciB0PXtvbkNlbnRlcjouNSxvbkVudGVyOjEsb25MZWF2ZTowfTtpZihpLnR5cGUuTnVtYmVyKGUpKWU9TWF0aC5tYXgoMCxNYXRoLm1pbihwYXJzZUZsb2F0KGUpLDEpKTtlbHNle2lmKCEoZSBpbiB0KSl0aHJvdyAwO2U9dFtlXX1yZXR1cm4gZX0scmV2ZXJzZTpmdW5jdGlvbihlKXtyZXR1cm4hIWV9fSxzaGlmdHM6W1wiZHVyYXRpb25cIixcIm9mZnNldFwiLFwidHJpZ2dlckhvb2tcIl19O2UuU2NlbmUuYWRkT3B0aW9uPWZ1bmN0aW9uKGUsdCxuLGkpe2UgaW4gci5kZWZhdWx0c3x8KHIuZGVmYXVsdHNbZV09dCxyLnZhbGlkYXRlW2VdPW4saSYmci5zaGlmdHMucHVzaChlKSl9LGUuU2NlbmUuZXh0ZW5kPWZ1bmN0aW9uKHQpe3ZhciBuPXRoaXM7ZS5TY2VuZT1mdW5jdGlvbigpe3JldHVybiBuLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLiRzdXBlcj1pLmV4dGVuZCh7fSx0aGlzKSx0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc30saS5leHRlbmQoZS5TY2VuZSxuKSxlLlNjZW5lLnByb3RvdHlwZT1uLnByb3RvdHlwZSxlLlNjZW5lLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLlNjZW5lfSxlLkV2ZW50PWZ1bmN0aW9uKGUsdCxuLHIpe3I9cnx8e307Zm9yKHZhciBpIGluIHIpdGhpc1tpXT1yW2ldO3JldHVybiB0aGlzLnR5cGU9ZSx0aGlzLnRhcmdldD10aGlzLmN1cnJlbnRUYXJnZXQ9bix0aGlzLm5hbWVzcGFjZT10fHxcIlwiLHRoaXMudGltZVN0YW1wPXRoaXMudGltZXN0YW1wPURhdGUubm93KCksdGhpc307dmFyIGk9ZS5fdXRpbD1mdW5jdGlvbihlKXt2YXIgdCxuPXt9LHI9ZnVuY3Rpb24oZSl7cmV0dXJuIHBhcnNlRmxvYXQoZSl8fDB9LGk9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY3VycmVudFN0eWxlP3QuY3VycmVudFN0eWxlOmUuZ2V0Q29tcHV0ZWRTdHlsZSh0KX0sbz1mdW5jdGlvbih0LG4sbyxzKXtpZihuPW49PT1kb2N1bWVudD9lOm4sbj09PWUpcz0hMTtlbHNlIGlmKCFmLkRvbUVsZW1lbnQobikpcmV0dXJuIDA7dD10LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK3Quc3Vic3RyKDEpLnRvTG93ZXJDYXNlKCk7dmFyIGE9KG8/bltcIm9mZnNldFwiK3RdfHxuW1wib3V0ZXJcIit0XTpuW1wiY2xpZW50XCIrdF18fG5bXCJpbm5lclwiK3RdKXx8MDtpZihvJiZzKXt2YXIgbD1pKG4pO2ErPVwiSGVpZ2h0XCI9PT10P3IobC5tYXJnaW5Ub3ApK3IobC5tYXJnaW5Cb3R0b20pOnIobC5tYXJnaW5MZWZ0KStyKGwubWFyZ2luUmlnaHQpfXJldHVybiBhfSxzPWZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoL15bXmEtel0rKFthLXpdKS9nLFwiJDFcIikucmVwbGFjZSgvLShbYS16XSkvZyxmdW5jdGlvbihlKXtyZXR1cm4gZVsxXS50b1VwcGVyQ2FzZSgpfSl9O24uZXh0ZW5kPWZ1bmN0aW9uKGUpe2ZvcihlPWV8fHt9LHQ9MTt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKWlmKGFyZ3VtZW50c1t0XSlmb3IodmFyIG4gaW4gYXJndW1lbnRzW3RdKWFyZ3VtZW50c1t0XS5oYXNPd25Qcm9wZXJ0eShuKSYmKGVbbl09YXJndW1lbnRzW3RdW25dKTtyZXR1cm4gZX0sbi5pc01hcmdpbkNvbGxhcHNlVHlwZT1mdW5jdGlvbihlKXtyZXR1cm5bXCJibG9ja1wiLFwiZmxleFwiLFwibGlzdC1pdGVtXCIsXCJ0YWJsZVwiLFwiLXdlYmtpdC1ib3hcIl0uaW5kZXhPZihlKT4tMX07dmFyIGE9MCxsPVtcIm1zXCIsXCJtb3pcIixcIndlYmtpdFwiLFwib1wiXSxjPWUucmVxdWVzdEFuaW1hdGlvbkZyYW1lLHU9ZS5jYW5jZWxBbmltYXRpb25GcmFtZTtmb3IodD0wOyFjJiZ0PGwubGVuZ3RoOysrdCljPWVbbFt0XStcIlJlcXVlc3RBbmltYXRpb25GcmFtZVwiXSx1PWVbbFt0XStcIkNhbmNlbEFuaW1hdGlvbkZyYW1lXCJdfHxlW2xbdF0rXCJDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIl07Y3x8KGM9ZnVuY3Rpb24odCl7dmFyIG49KG5ldyBEYXRlKS5nZXRUaW1lKCkscj1NYXRoLm1heCgwLDE2LShuLWEpKSxpPWUuc2V0VGltZW91dChmdW5jdGlvbigpe3QobityKX0scik7cmV0dXJuIGE9bityLGl9KSx1fHwodT1mdW5jdGlvbih0KXtlLmNsZWFyVGltZW91dCh0KX0pLG4uckFGPWMuYmluZChlKSxuLmNBRj11LmJpbmQoZSk7dmFyIGY9bi50eXBlPWZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkucmVwbGFjZSgvXlxcW29iamVjdCAoLispXFxdJC8sXCIkMVwiKS50b0xvd2VyQ2FzZSgpfTtmLlN0cmluZz1mdW5jdGlvbihlKXtyZXR1cm5cInN0cmluZ1wiPT09ZihlKX0sZi5GdW5jdGlvbj1mdW5jdGlvbihlKXtyZXR1cm5cImZ1bmN0aW9uXCI9PT1mKGUpfSxmLkFycmF5PWZ1bmN0aW9uKGUpe3JldHVybiBBcnJheS5pc0FycmF5KGUpfSxmLk51bWJlcj1mdW5jdGlvbihlKXtyZXR1cm4hZi5BcnJheShlKSYmZS1wYXJzZUZsb2F0KGUpKzE+PTB9LGYuRG9tRWxlbWVudD1mdW5jdGlvbihlKXtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgSFRNTEVsZW1lbnQ/ZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50OmUmJlwib2JqZWN0XCI9PXR5cGVvZiBlJiZudWxsIT09ZSYmMT09PWUubm9kZVR5cGUmJlwic3RyaW5nXCI9PXR5cGVvZiBlLm5vZGVOYW1lfTt2YXIgZD1uLmdldD17fTtyZXR1cm4gZC5lbGVtZW50cz1mdW5jdGlvbih0KXt2YXIgbj1bXTtpZihmLlN0cmluZyh0KSl0cnl7dD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHQpfWNhdGNoKHIpe3JldHVybiBufWlmKFwibm9kZWxpc3RcIj09PWYodCl8fGYuQXJyYXkodCkpZm9yKHZhciBpPTAsbz1uLmxlbmd0aD10Lmxlbmd0aDtvPmk7aSsrKXt2YXIgcz10W2ldO25baV09Zi5Eb21FbGVtZW50KHMpP3M6ZC5lbGVtZW50cyhzKX1lbHNlKGYuRG9tRWxlbWVudCh0KXx8dD09PWRvY3VtZW50fHx0PT09ZSkmJihuPVt0XSk7cmV0dXJuIG59LGQuc2Nyb2xsVG9wPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZcIm51bWJlclwiPT10eXBlb2YgdC5zY3JvbGxUb3A/dC5zY3JvbGxUb3A6ZS5wYWdlWU9mZnNldHx8MH0sZC5zY3JvbGxMZWZ0PWZ1bmN0aW9uKHQpe3JldHVybiB0JiZcIm51bWJlclwiPT10eXBlb2YgdC5zY3JvbGxMZWZ0P3Quc2Nyb2xsTGVmdDplLnBhZ2VYT2Zmc2V0fHwwfSxkLndpZHRoPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbyhcIndpZHRoXCIsZSx0LG4pfSxkLmhlaWdodD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIG8oXCJoZWlnaHRcIixlLHQsbil9LGQub2Zmc2V0PWZ1bmN0aW9uKGUsdCl7dmFyIG49e3RvcDowLGxlZnQ6MH07aWYoZSYmZS5nZXRCb3VuZGluZ0NsaWVudFJlY3Qpe3ZhciByPWUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7bi50b3A9ci50b3Asbi5sZWZ0PXIubGVmdCx0fHwobi50b3ArPWQuc2Nyb2xsVG9wKCksbi5sZWZ0Kz1kLnNjcm9sbExlZnQoKSl9cmV0dXJuIG59LG4uYWRkQ2xhc3M9ZnVuY3Rpb24oZSx0KXt0JiYoZS5jbGFzc0xpc3Q/ZS5jbGFzc0xpc3QuYWRkKHQpOmUuY2xhc3NOYW1lKz1cIiBcIit0KX0sbi5yZW1vdmVDbGFzcz1mdW5jdGlvbihlLHQpe3QmJihlLmNsYXNzTGlzdD9lLmNsYXNzTGlzdC5yZW1vdmUodCk6ZS5jbGFzc05hbWU9ZS5jbGFzc05hbWUucmVwbGFjZShSZWdFeHAoXCIoXnxcXFxcYilcIit0LnNwbGl0KFwiIFwiKS5qb2luKFwifFwiKStcIihcXFxcYnwkKVwiLFwiZ2lcIiksXCIgXCIpKX0sbi5jc3M9ZnVuY3Rpb24oZSx0KXtpZihmLlN0cmluZyh0KSlyZXR1cm4gaShlKVtzKHQpXTtpZihmLkFycmF5KHQpKXt2YXIgbj17fSxyPWkoZSk7cmV0dXJuIHQuZm9yRWFjaChmdW5jdGlvbihlKXtuW2VdPXJbcyhlKV19KSxufWZvcih2YXIgbyBpbiB0KXt2YXIgYT10W29dO2E9PXBhcnNlRmxvYXQoYSkmJihhKz1cInB4XCIpLGUuc3R5bGVbcyhvKV09YX19LG59KHdpbmRvd3x8e30pO3JldHVybiBlfSk7IiwiLyoqXG4gKiBzdGlja3ktc2lkZWJhciAtIEEgSmF2YVNjcmlwdCBwbHVnaW4gZm9yIG1ha2luZyBzbWFydCBhbmQgaGlnaCBwZXJmb3JtYW5jZS5cbiAqIEB2ZXJzaW9uIHYzLjMuMVxuICogQGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Fib3VvbGlhL3N0aWNreS1zaWRlYmFyXG4gKiBAYXV0aG9yIEFobWVkIEJvdWh1b2xpYVxuICogQGxpY2Vuc2UgVGhlIE1JVCBMaWNlbnNlIChNSVQpXG4qKi9cbiFmdW5jdGlvbih0LGUpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlP2UoZXhwb3J0cyk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXCJleHBvcnRzXCJdLGUpOmUodC5TdGlja3lTaWRlYmFyPXt9KX0odGhpcyxmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjtcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzpcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZiYmc2VsZjt2YXIgZSxpLG49KGZ1bmN0aW9uKHQsZSl7KGZ1bmN0aW9uKHQpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBsLG4sZT1mdW5jdGlvbigpe2Z1bmN0aW9uIG4odCxlKXtmb3IodmFyIGk9MDtpPGUubGVuZ3RoO2krKyl7dmFyIG49ZVtpXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBuJiYobi53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsbi5rZXksbil9fXJldHVybiBmdW5jdGlvbih0LGUsaSl7cmV0dXJuIGUmJm4odC5wcm90b3R5cGUsZSksaSYmbih0LGkpLHR9fSgpLGk9KGw9XCIuc3RpY2t5U2lkZWJhclwiLG49e3RvcFNwYWNpbmc6MCxib3R0b21TcGFjaW5nOjAsY29udGFpbmVyU2VsZWN0b3I6ITEsaW5uZXJXcmFwcGVyU2VsZWN0b3I6XCIuaW5uZXItd3JhcHBlci1zdGlja3lcIixzdGlja3lDbGFzczpcImlzLWFmZml4ZWRcIixyZXNpemVTZW5zb3I6ITAsbWluV2lkdGg6ITF9LGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYyh0KXt2YXIgZT10aGlzLGk9MTxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O2lmKGZ1bmN0aW9uKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX0odGhpcyxjKSx0aGlzLm9wdGlvbnM9Yy5leHRlbmQobixpKSx0aGlzLnNpZGViYXI9XCJzdHJpbmdcIj09dHlwZW9mIHQ/ZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0KTp0LHZvaWQgMD09PXRoaXMuc2lkZWJhcil0aHJvdyBuZXcgRXJyb3IoXCJUaGVyZSBpcyBubyBzcGVjaWZpYyBzaWRlYmFyIGVsZW1lbnQuXCIpO3RoaXMuc2lkZWJhcklubmVyPSExLHRoaXMuY29udGFpbmVyPXRoaXMuc2lkZWJhci5wYXJlbnRFbGVtZW50LHRoaXMuYWZmaXhlZFR5cGU9XCJTVEFUSUNcIix0aGlzLmRpcmVjdGlvbj1cImRvd25cIix0aGlzLnN1cHBvcnQ9e3RyYW5zZm9ybTohMSx0cmFuc2Zvcm0zZDohMX0sdGhpcy5faW5pdGlhbGl6ZWQ9ITEsdGhpcy5fcmVTdHlsZT0hMSx0aGlzLl9icmVha3BvaW50PSExLHRoaXMuZGltZW5zaW9ucz17dHJhbnNsYXRlWTowLG1heFRyYW5zbGF0ZVk6MCx0b3BTcGFjaW5nOjAsbGFzdFRvcFNwYWNpbmc6MCxib3R0b21TcGFjaW5nOjAsbGFzdEJvdHRvbVNwYWNpbmc6MCxzaWRlYmFySGVpZ2h0OjAsc2lkZWJhcldpZHRoOjAsY29udGFpbmVyVG9wOjAsY29udGFpbmVySGVpZ2h0OjAsdmlld3BvcnRIZWlnaHQ6MCx2aWV3cG9ydFRvcDowLGxhc3RWaWV3cG9ydFRvcDowfSxbXCJoYW5kbGVFdmVudFwiXS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2VbdF09ZVt0XS5iaW5kKGUpfSksdGhpcy5pbml0aWFsaXplKCl9cmV0dXJuIGUoYyxbe2tleTpcImluaXRpYWxpemVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBpPXRoaXM7aWYodGhpcy5fc2V0U3VwcG9ydEZlYXR1cmVzKCksdGhpcy5vcHRpb25zLmlubmVyV3JhcHBlclNlbGVjdG9yJiYodGhpcy5zaWRlYmFySW5uZXI9dGhpcy5zaWRlYmFyLnF1ZXJ5U2VsZWN0b3IodGhpcy5vcHRpb25zLmlubmVyV3JhcHBlclNlbGVjdG9yKSxudWxsPT09dGhpcy5zaWRlYmFySW5uZXImJih0aGlzLnNpZGViYXJJbm5lcj0hMSkpLCF0aGlzLnNpZGViYXJJbm5lcil7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtmb3IodC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLFwiaW5uZXItd3JhcHBlci1zdGlja3lcIiksdGhpcy5zaWRlYmFyLmFwcGVuZENoaWxkKHQpO3RoaXMuc2lkZWJhci5maXJzdENoaWxkIT10Oyl0LmFwcGVuZENoaWxkKHRoaXMuc2lkZWJhci5maXJzdENoaWxkKTt0aGlzLnNpZGViYXJJbm5lcj10aGlzLnNpZGViYXIucXVlcnlTZWxlY3RvcihcIi5pbm5lci13cmFwcGVyLXN0aWNreVwiKX1pZih0aGlzLm9wdGlvbnMuY29udGFpbmVyU2VsZWN0b3Ipe3ZhciBlPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5vcHRpb25zLmNvbnRhaW5lclNlbGVjdG9yKTtpZigoZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlKSkuZm9yRWFjaChmdW5jdGlvbih0LGUpe3QuY29udGFpbnMoaS5zaWRlYmFyKSYmKGkuY29udGFpbmVyPXQpfSksIWUubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcIlRoZSBjb250YWluZXIgZG9lcyBub3QgY29udGFpbnMgb24gdGhlIHNpZGViYXIuXCIpfVwiZnVuY3Rpb25cIiE9dHlwZW9mIHRoaXMub3B0aW9ucy50b3BTcGFjaW5nJiYodGhpcy5vcHRpb25zLnRvcFNwYWNpbmc9cGFyc2VJbnQodGhpcy5vcHRpb25zLnRvcFNwYWNpbmcpfHwwKSxcImZ1bmN0aW9uXCIhPXR5cGVvZiB0aGlzLm9wdGlvbnMuYm90dG9tU3BhY2luZyYmKHRoaXMub3B0aW9ucy5ib3R0b21TcGFjaW5nPXBhcnNlSW50KHRoaXMub3B0aW9ucy5ib3R0b21TcGFjaW5nKXx8MCksdGhpcy5fd2lkdGhCcmVha3BvaW50KCksdGhpcy5jYWxjRGltZW5zaW9ucygpLHRoaXMuc3RpY2t5UG9zaXRpb24oKSx0aGlzLmJpbmRFdmVudHMoKSx0aGlzLl9pbml0aWFsaXplZD0hMH19LHtrZXk6XCJiaW5kRXZlbnRzXCIsdmFsdWU6ZnVuY3Rpb24oKXt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLHRoaXMse3Bhc3NpdmU6ITAsY2FwdHVyZTohMX0pLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsdGhpcyx7cGFzc2l2ZTohMCxjYXB0dXJlOiExfSksdGhpcy5zaWRlYmFyLmFkZEV2ZW50TGlzdGVuZXIoXCJ1cGRhdGVcIitsLHRoaXMpLHRoaXMub3B0aW9ucy5yZXNpemVTZW5zb3ImJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBSZXNpemVTZW5zb3ImJihuZXcgUmVzaXplU2Vuc29yKHRoaXMuc2lkZWJhcklubmVyLHRoaXMuaGFuZGxlRXZlbnQpLG5ldyBSZXNpemVTZW5zb3IodGhpcy5jb250YWluZXIsdGhpcy5oYW5kbGVFdmVudCkpfX0se2tleTpcImhhbmRsZUV2ZW50XCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy51cGRhdGVTdGlja3kodCl9fSx7a2V5OlwiY2FsY0RpbWVuc2lvbnNcIix2YWx1ZTpmdW5jdGlvbigpe2lmKCF0aGlzLl9icmVha3BvaW50KXt2YXIgdD10aGlzLmRpbWVuc2lvbnM7dC5jb250YWluZXJUb3A9Yy5vZmZzZXRSZWxhdGl2ZSh0aGlzLmNvbnRhaW5lcikudG9wLHQuY29udGFpbmVySGVpZ2h0PXRoaXMuY29udGFpbmVyLmNsaWVudEhlaWdodCx0LmNvbnRhaW5lckJvdHRvbT10LmNvbnRhaW5lclRvcCt0LmNvbnRhaW5lckhlaWdodCx0LnNpZGViYXJIZWlnaHQ9dGhpcy5zaWRlYmFySW5uZXIub2Zmc2V0SGVpZ2h0LHQuc2lkZWJhcldpZHRoPXRoaXMuc2lkZWJhcklubmVyLm9mZnNldFdpZHRoLHQudmlld3BvcnRIZWlnaHQ9d2luZG93LmlubmVySGVpZ2h0LHQubWF4VHJhbnNsYXRlWT10LmNvbnRhaW5lckhlaWdodC10LnNpZGViYXJIZWlnaHQsdGhpcy5fY2FsY0RpbWVuc2lvbnNXaXRoU2Nyb2xsKCl9fX0se2tleTpcIl9jYWxjRGltZW5zaW9uc1dpdGhTY3JvbGxcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZGltZW5zaW9uczt0LnNpZGViYXJMZWZ0PWMub2Zmc2V0UmVsYXRpdmUodGhpcy5zaWRlYmFyKS5sZWZ0LHQudmlld3BvcnRUb3A9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcHx8ZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AsdC52aWV3cG9ydEJvdHRvbT10LnZpZXdwb3J0VG9wK3Qudmlld3BvcnRIZWlnaHQsdC52aWV3cG9ydExlZnQ9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnR8fGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdCx0LnRvcFNwYWNpbmc9dGhpcy5vcHRpb25zLnRvcFNwYWNpbmcsdC5ib3R0b21TcGFjaW5nPXRoaXMub3B0aW9ucy5ib3R0b21TcGFjaW5nLFwiZnVuY3Rpb25cIj09dHlwZW9mIHQudG9wU3BhY2luZyYmKHQudG9wU3BhY2luZz1wYXJzZUludCh0LnRvcFNwYWNpbmcodGhpcy5zaWRlYmFyKSl8fDApLFwiZnVuY3Rpb25cIj09dHlwZW9mIHQuYm90dG9tU3BhY2luZyYmKHQuYm90dG9tU3BhY2luZz1wYXJzZUludCh0LmJvdHRvbVNwYWNpbmcodGhpcy5zaWRlYmFyKSl8fDApLFwiVklFV1BPUlQtVE9QXCI9PT10aGlzLmFmZml4ZWRUeXBlP3QudG9wU3BhY2luZzx0Lmxhc3RUb3BTcGFjaW5nJiYodC50cmFuc2xhdGVZKz10Lmxhc3RUb3BTcGFjaW5nLXQudG9wU3BhY2luZyx0aGlzLl9yZVN0eWxlPSEwKTpcIlZJRVdQT1JULUJPVFRPTVwiPT09dGhpcy5hZmZpeGVkVHlwZSYmdC5ib3R0b21TcGFjaW5nPHQubGFzdEJvdHRvbVNwYWNpbmcmJih0LnRyYW5zbGF0ZVkrPXQubGFzdEJvdHRvbVNwYWNpbmctdC5ib3R0b21TcGFjaW5nLHRoaXMuX3JlU3R5bGU9ITApLHQubGFzdFRvcFNwYWNpbmc9dC50b3BTcGFjaW5nLHQubGFzdEJvdHRvbVNwYWNpbmc9dC5ib3R0b21TcGFjaW5nfX0se2tleTpcImlzU2lkZWJhckZpdHNWaWV3cG9ydFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5kaW1lbnNpb25zLGU9XCJkb3duXCI9PT10aGlzLnNjcm9sbERpcmVjdGlvbj90Lmxhc3RCb3R0b21TcGFjaW5nOnQubGFzdFRvcFNwYWNpbmc7cmV0dXJuIHRoaXMuZGltZW5zaW9ucy5zaWRlYmFySGVpZ2h0K2U8dGhpcy5kaW1lbnNpb25zLnZpZXdwb3J0SGVpZ2h0fX0se2tleTpcIm9ic2VydmVTY3JvbGxEaXJcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZGltZW5zaW9ucztpZih0Lmxhc3RWaWV3cG9ydFRvcCE9PXQudmlld3BvcnRUb3Ape3ZhciBlPVwiZG93blwiPT09dGhpcy5kaXJlY3Rpb24/TWF0aC5taW46TWF0aC5tYXg7dC52aWV3cG9ydFRvcD09PWUodC52aWV3cG9ydFRvcCx0Lmxhc3RWaWV3cG9ydFRvcCkmJih0aGlzLmRpcmVjdGlvbj1cImRvd25cIj09PXRoaXMuZGlyZWN0aW9uP1widXBcIjpcImRvd25cIil9fX0se2tleTpcImdldEFmZml4VHlwZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fY2FsY0RpbWVuc2lvbnNXaXRoU2Nyb2xsKCk7dmFyIHQ9dGhpcy5kaW1lbnNpb25zLGU9dC52aWV3cG9ydFRvcCt0LnRvcFNwYWNpbmcsaT10aGlzLmFmZml4ZWRUeXBlO3JldHVybiBlPD10LmNvbnRhaW5lclRvcHx8dC5jb250YWluZXJIZWlnaHQ8PXQuc2lkZWJhckhlaWdodD8odC50cmFuc2xhdGVZPTAsaT1cIlNUQVRJQ1wiKTppPVwidXBcIj09PXRoaXMuZGlyZWN0aW9uP3RoaXMuX2dldEFmZml4VHlwZVNjcm9sbGluZ1VwKCk6dGhpcy5fZ2V0QWZmaXhUeXBlU2Nyb2xsaW5nRG93bigpLHQudHJhbnNsYXRlWT1NYXRoLm1heCgwLHQudHJhbnNsYXRlWSksdC50cmFuc2xhdGVZPU1hdGgubWluKHQuY29udGFpbmVySGVpZ2h0LHQudHJhbnNsYXRlWSksdC50cmFuc2xhdGVZPU1hdGgucm91bmQodC50cmFuc2xhdGVZKSx0Lmxhc3RWaWV3cG9ydFRvcD10LnZpZXdwb3J0VG9wLGl9fSx7a2V5OlwiX2dldEFmZml4VHlwZVNjcm9sbGluZ0Rvd25cIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZGltZW5zaW9ucyxlPXQuc2lkZWJhckhlaWdodCt0LmNvbnRhaW5lclRvcCxpPXQudmlld3BvcnRUb3ArdC50b3BTcGFjaW5nLG49dC52aWV3cG9ydEJvdHRvbS10LmJvdHRvbVNwYWNpbmcsbz10aGlzLmFmZml4ZWRUeXBlO3JldHVybiB0aGlzLmlzU2lkZWJhckZpdHNWaWV3cG9ydCgpP3Quc2lkZWJhckhlaWdodCtpPj10LmNvbnRhaW5lckJvdHRvbT8odC50cmFuc2xhdGVZPXQuY29udGFpbmVyQm90dG9tLWUsbz1cIkNPTlRBSU5FUi1CT1RUT01cIik6aT49dC5jb250YWluZXJUb3AmJih0LnRyYW5zbGF0ZVk9aS10LmNvbnRhaW5lclRvcCxvPVwiVklFV1BPUlQtVE9QXCIpOnQuY29udGFpbmVyQm90dG9tPD1uPyh0LnRyYW5zbGF0ZVk9dC5jb250YWluZXJCb3R0b20tZSxvPVwiQ09OVEFJTkVSLUJPVFRPTVwiKTplK3QudHJhbnNsYXRlWTw9bj8odC50cmFuc2xhdGVZPW4tZSxvPVwiVklFV1BPUlQtQk9UVE9NXCIpOnQuY29udGFpbmVyVG9wK3QudHJhbnNsYXRlWTw9aSYmMCE9PXQudHJhbnNsYXRlWSYmdC5tYXhUcmFuc2xhdGVZIT09dC50cmFuc2xhdGVZJiYobz1cIlZJRVdQT1JULVVOQk9UVE9NXCIpLG99fSx7a2V5OlwiX2dldEFmZml4VHlwZVNjcm9sbGluZ1VwXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmRpbWVuc2lvbnMsZT10LnNpZGViYXJIZWlnaHQrdC5jb250YWluZXJUb3AsaT10LnZpZXdwb3J0VG9wK3QudG9wU3BhY2luZyxuPXQudmlld3BvcnRCb3R0b20tdC5ib3R0b21TcGFjaW5nLG89dGhpcy5hZmZpeGVkVHlwZTtyZXR1cm4gaTw9dC50cmFuc2xhdGVZK3QuY29udGFpbmVyVG9wPyh0LnRyYW5zbGF0ZVk9aS10LmNvbnRhaW5lclRvcCxvPVwiVklFV1BPUlQtVE9QXCIpOnQuY29udGFpbmVyQm90dG9tPD1uPyh0LnRyYW5zbGF0ZVk9dC5jb250YWluZXJCb3R0b20tZSxvPVwiQ09OVEFJTkVSLUJPVFRPTVwiKTp0aGlzLmlzU2lkZWJhckZpdHNWaWV3cG9ydCgpfHx0LmNvbnRhaW5lclRvcDw9aSYmMCE9PXQudHJhbnNsYXRlWSYmdC5tYXhUcmFuc2xhdGVZIT09dC50cmFuc2xhdGVZJiYobz1cIlZJRVdQT1JULVVOQk9UVE9NXCIpLG99fSx7a2V5OlwiX2dldFN0eWxlXCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYodm9pZCAwIT09dCl7dmFyIGU9e2lubmVyOnt9LG91dGVyOnt9fSxpPXRoaXMuZGltZW5zaW9ucztzd2l0Y2godCl7Y2FzZVwiVklFV1BPUlQtVE9QXCI6ZS5pbm5lcj17cG9zaXRpb246XCJmaXhlZFwiLHRvcDppLnRvcFNwYWNpbmcsbGVmdDppLnNpZGViYXJMZWZ0LWkudmlld3BvcnRMZWZ0LHdpZHRoOmkuc2lkZWJhcldpZHRofTticmVhaztjYXNlXCJWSUVXUE9SVC1CT1RUT01cIjplLmlubmVyPXtwb3NpdGlvbjpcImZpeGVkXCIsdG9wOlwiYXV0b1wiLGxlZnQ6aS5zaWRlYmFyTGVmdCxib3R0b206aS5ib3R0b21TcGFjaW5nLHdpZHRoOmkuc2lkZWJhcldpZHRofTticmVhaztjYXNlXCJDT05UQUlORVItQk9UVE9NXCI6Y2FzZVwiVklFV1BPUlQtVU5CT1RUT01cIjp2YXIgbj10aGlzLl9nZXRUcmFuc2xhdGUoMCxpLnRyYW5zbGF0ZVkrXCJweFwiKTtlLmlubmVyPW4/e3RyYW5zZm9ybTpufTp7cG9zaXRpb246XCJhYnNvbHV0ZVwiLHRvcDppLnRyYW5zbGF0ZVksd2lkdGg6aS5zaWRlYmFyV2lkdGh9fXN3aXRjaCh0KXtjYXNlXCJWSUVXUE9SVC1UT1BcIjpjYXNlXCJWSUVXUE9SVC1CT1RUT01cIjpjYXNlXCJWSUVXUE9SVC1VTkJPVFRPTVwiOmNhc2VcIkNPTlRBSU5FUi1CT1RUT01cIjplLm91dGVyPXtoZWlnaHQ6aS5zaWRlYmFySGVpZ2h0LHBvc2l0aW9uOlwicmVsYXRpdmVcIn19cmV0dXJuIGUub3V0ZXI9Yy5leHRlbmQoe2hlaWdodDpcIlwiLHBvc2l0aW9uOlwiXCJ9LGUub3V0ZXIpLGUuaW5uZXI9Yy5leHRlbmQoe3Bvc2l0aW9uOlwicmVsYXRpdmVcIix0b3A6XCJcIixsZWZ0OlwiXCIsYm90dG9tOlwiXCIsd2lkdGg6XCJcIix0cmFuc2Zvcm06XCJcIn0sZS5pbm5lciksZX19fSx7a2V5Olwic3RpY2t5UG9zaXRpb25cIix2YWx1ZTpmdW5jdGlvbih0KXtpZighdGhpcy5fYnJlYWtwb2ludCl7dD10aGlzLl9yZVN0eWxlfHx0fHwhMSx0aGlzLm9wdGlvbnMudG9wU3BhY2luZyx0aGlzLm9wdGlvbnMuYm90dG9tU3BhY2luZzt2YXIgZT10aGlzLmdldEFmZml4VHlwZSgpLGk9dGhpcy5fZ2V0U3R5bGUoZSk7aWYoKHRoaXMuYWZmaXhlZFR5cGUhPWV8fHQpJiZlKXt2YXIgbj1cImFmZml4LlwiK2UudG9Mb3dlckNhc2UoKS5yZXBsYWNlKFwidmlld3BvcnQtXCIsXCJcIikrbDtmb3IodmFyIG8gaW4gYy5ldmVudFRyaWdnZXIodGhpcy5zaWRlYmFyLG4pLFwiU1RBVElDXCI9PT1lP2MucmVtb3ZlQ2xhc3ModGhpcy5zaWRlYmFyLHRoaXMub3B0aW9ucy5zdGlja3lDbGFzcyk6Yy5hZGRDbGFzcyh0aGlzLnNpZGViYXIsdGhpcy5vcHRpb25zLnN0aWNreUNsYXNzKSxpLm91dGVyKXt2YXIgcz1cIm51bWJlclwiPT10eXBlb2YgaS5vdXRlcltvXT9cInB4XCI6XCJcIjt0aGlzLnNpZGViYXIuc3R5bGVbb109aS5vdXRlcltvXStzfWZvcih2YXIgciBpbiBpLmlubmVyKXt2YXIgYT1cIm51bWJlclwiPT10eXBlb2YgaS5pbm5lcltyXT9cInB4XCI6XCJcIjt0aGlzLnNpZGViYXJJbm5lci5zdHlsZVtyXT1pLmlubmVyW3JdK2F9dmFyIHA9XCJhZmZpeGVkLlwiK2UudG9Mb3dlckNhc2UoKS5yZXBsYWNlKFwidmlld3BvcnQtXCIsXCJcIikrbDtjLmV2ZW50VHJpZ2dlcih0aGlzLnNpZGViYXIscCl9ZWxzZSB0aGlzLl9pbml0aWFsaXplZCYmKHRoaXMuc2lkZWJhcklubmVyLnN0eWxlLmxlZnQ9aS5pbm5lci5sZWZ0KTt0aGlzLmFmZml4ZWRUeXBlPWV9fX0se2tleTpcIl93aWR0aEJyZWFrcG9pbnRcIix2YWx1ZTpmdW5jdGlvbigpe3dpbmRvdy5pbm5lcldpZHRoPD10aGlzLm9wdGlvbnMubWluV2lkdGg/KHRoaXMuX2JyZWFrcG9pbnQ9ITAsdGhpcy5hZmZpeGVkVHlwZT1cIlNUQVRJQ1wiLHRoaXMuc2lkZWJhci5yZW1vdmVBdHRyaWJ1dGUoXCJzdHlsZVwiKSxjLnJlbW92ZUNsYXNzKHRoaXMuc2lkZWJhcix0aGlzLm9wdGlvbnMuc3RpY2t5Q2xhc3MpLHRoaXMuc2lkZWJhcklubmVyLnJlbW92ZUF0dHJpYnV0ZShcInN0eWxlXCIpKTp0aGlzLl9icmVha3BvaW50PSExfX0se2tleTpcInVwZGF0ZVN0aWNreVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQsZT10aGlzLGk9MDxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O3RoaXMuX3J1bm5pbmd8fCh0aGlzLl9ydW5uaW5nPSEwLHQ9aS50eXBlLHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpe3N3aXRjaCh0KXtjYXNlXCJzY3JvbGxcIjplLl9jYWxjRGltZW5zaW9uc1dpdGhTY3JvbGwoKSxlLm9ic2VydmVTY3JvbGxEaXIoKSxlLnN0aWNreVBvc2l0aW9uKCk7YnJlYWs7Y2FzZVwicmVzaXplXCI6ZGVmYXVsdDplLl93aWR0aEJyZWFrcG9pbnQoKSxlLmNhbGNEaW1lbnNpb25zKCksZS5zdGlja3lQb3NpdGlvbighMCl9ZS5fcnVubmluZz0hMX0pKX19LHtrZXk6XCJfc2V0U3VwcG9ydEZlYXR1cmVzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnN1cHBvcnQ7dC50cmFuc2Zvcm09Yy5zdXBwb3J0VHJhbnNmb3JtKCksdC50cmFuc2Zvcm0zZD1jLnN1cHBvcnRUcmFuc2Zvcm0oITApfX0se2tleTpcIl9nZXRUcmFuc2xhdGVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PTA8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTowLGU9MTxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOjAsaT0yPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06MDtyZXR1cm4gdGhpcy5zdXBwb3J0LnRyYW5zZm9ybTNkP1widHJhbnNsYXRlM2QoXCIrdCtcIiwgXCIrZStcIiwgXCIraStcIilcIjohIXRoaXMuc3VwcG9ydC50cmFuc2xhdGUmJlwidHJhbnNsYXRlKFwiK3QrXCIsIFwiK2UrXCIpXCJ9fSx7a2V5OlwiZGVzdHJveVwiLHZhbHVlOmZ1bmN0aW9uKCl7d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0aGlzLHtjYXB0dXJlOiExfSksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIix0aGlzLHtjYXB0dXJlOiExfSksdGhpcy5zaWRlYmFyLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5vcHRpb25zLnN0aWNreUNsYXNzKSx0aGlzLnNpZGViYXIuc3R5bGUubWluSGVpZ2h0PVwiXCIsdGhpcy5zaWRlYmFyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ1cGRhdGVcIitsLHRoaXMpO3ZhciB0PXtpbm5lcjp7fSxvdXRlcjp7fX07Zm9yKHZhciBlIGluIHQuaW5uZXI9e3Bvc2l0aW9uOlwiXCIsdG9wOlwiXCIsbGVmdDpcIlwiLGJvdHRvbTpcIlwiLHdpZHRoOlwiXCIsdHJhbnNmb3JtOlwiXCJ9LHQub3V0ZXI9e2hlaWdodDpcIlwiLHBvc2l0aW9uOlwiXCJ9LHQub3V0ZXIpdGhpcy5zaWRlYmFyLnN0eWxlW2VdPXQub3V0ZXJbZV07Zm9yKHZhciBpIGluIHQuaW5uZXIpdGhpcy5zaWRlYmFySW5uZXIuc3R5bGVbaV09dC5pbm5lcltpXTt0aGlzLm9wdGlvbnMucmVzaXplU2Vuc29yJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgUmVzaXplU2Vuc29yJiYoUmVzaXplU2Vuc29yLmRldGFjaCh0aGlzLnNpZGViYXJJbm5lcix0aGlzLmhhbmRsZUV2ZW50KSxSZXNpemVTZW5zb3IuZGV0YWNoKHRoaXMuY29udGFpbmVyLHRoaXMuaGFuZGxlRXZlbnQpKX19XSxbe2tleTpcInN1cHBvcnRUcmFuc2Zvcm1cIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgaT0hMSxlPXQ/XCJwZXJzcGVjdGl2ZVwiOlwidHJhbnNmb3JtXCIsbj1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2Uuc2xpY2UoMSksbz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3VwcG9ydFwiKS5zdHlsZTtyZXR1cm4oZStcIiBcIitbXCJXZWJraXRcIixcIk1velwiLFwiT1wiLFwibXNcIl0uam9pbihuK1wiIFwiKStuKS5zcGxpdChcIiBcIikuZm9yRWFjaChmdW5jdGlvbih0LGUpe2lmKHZvaWQgMCE9PW9bdF0pcmV0dXJuIGk9dCwhMX0pLGl9fSx7a2V5OlwiZXZlbnRUcmlnZ2VyXCIsdmFsdWU6ZnVuY3Rpb24odCxlLGkpe3RyeXt2YXIgbj1uZXcgQ3VzdG9tRXZlbnQoZSx7ZGV0YWlsOml9KX1jYXRjaCh0KXsobj1kb2N1bWVudC5jcmVhdGVFdmVudChcIkN1c3RvbUV2ZW50XCIpKS5pbml0Q3VzdG9tRXZlbnQoZSwhMCwhMCxpKX10LmRpc3BhdGNoRXZlbnQobil9fSx7a2V5OlwiZXh0ZW5kXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgaT17fTtmb3IodmFyIG4gaW4gdCl2b2lkIDAhPT1lW25dP2lbbl09ZVtuXTppW25dPXRbbl07cmV0dXJuIGl9fSx7a2V5Olwib2Zmc2V0UmVsYXRpdmVcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT17bGVmdDowLHRvcDowfTtkb3t2YXIgaT10Lm9mZnNldFRvcCxuPXQub2Zmc2V0TGVmdDtpc05hTihpKXx8KGUudG9wKz1pKSxpc05hTihuKXx8KGUubGVmdCs9biksdD1cIkJPRFlcIj09PXQudGFnTmFtZT90LnBhcmVudEVsZW1lbnQ6dC5vZmZzZXRQYXJlbnR9d2hpbGUodCk7cmV0dXJuIGV9fSx7a2V5OlwiYWRkQ2xhc3NcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2MuaGFzQ2xhc3ModCxlKXx8KHQuY2xhc3NMaXN0P3QuY2xhc3NMaXN0LmFkZChlKTp0LmNsYXNzTmFtZSs9XCIgXCIrZSl9fSx7a2V5OlwicmVtb3ZlQ2xhc3NcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2MuaGFzQ2xhc3ModCxlKSYmKHQuY2xhc3NMaXN0P3QuY2xhc3NMaXN0LnJlbW92ZShlKTp0LmNsYXNzTmFtZT10LmNsYXNzTmFtZS5yZXBsYWNlKG5ldyBSZWdFeHAoXCIoXnxcXFxcYilcIitlLnNwbGl0KFwiIFwiKS5qb2luKFwifFwiKStcIihcXFxcYnwkKVwiLFwiZ2lcIiksXCIgXCIpKX19LHtrZXk6XCJoYXNDbGFzc1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuY2xhc3NMaXN0P3QuY2xhc3NMaXN0LmNvbnRhaW5zKGUpOm5ldyBSZWdFeHAoXCIoXnwgKVwiK2UrXCIoIHwkKVwiLFwiZ2lcIikudGVzdCh0LmNsYXNzTmFtZSl9fSx7a2V5OlwiZGVmYXVsdHNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbn19XSksY30oKSk7dC5kZWZhdWx0PWksd2luZG93LlN0aWNreVNpZGViYXI9aX0pKGUpfShlPXtleHBvcnRzOnt9fSxlLmV4cG9ydHMpLGUuZXhwb3J0cyksbz0oaT1uKSYmaS5fX2VzTW9kdWxlJiZPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaSxcImRlZmF1bHRcIik/aS5kZWZhdWx0Omk7dC5kZWZhdWx0PW8sdC5fX21vZHVsZUV4cG9ydHM9bixPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KX0pOyIsIi8qIVxyXG4gKiBcclxuICogICB0eXBlZC5qcyAtIEEgSmF2YVNjcmlwdCBUeXBpbmcgQW5pbWF0aW9uIExpYnJhcnlcclxuICogICBBdXRob3I6IE1hdHQgQm9sZHQgPG1lQG1hdHRib2xkdC5jb20+XHJcbiAqICAgVmVyc2lvbjogdjIuMC40XHJcbiAqICAgVXJsOiBodHRwczovL2dpdGh1Yi5jb20vbWF0dGJvbGR0L3R5cGVkLmpzXHJcbiAqICAgTGljZW5zZShzKTogTUlUXHJcbiAqIFxyXG4gKi9cclxuKGZ1bmN0aW9uKHQsZSl7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9ZSgpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW10sZSk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0cy5UeXBlZD1lKCk6dC5UeXBlZD1lKCl9KSh0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUobil7aWYoc1tuXSlyZXR1cm4gc1tuXS5leHBvcnRzO3ZhciBpPXNbbl09e2V4cG9ydHM6e30saWQ6bixsb2FkZWQ6ITF9O3JldHVybiB0W25dLmNhbGwoaS5leHBvcnRzLGksaS5leHBvcnRzLGUpLGkubG9hZGVkPSEwLGkuZXhwb3J0c312YXIgcz17fTtyZXR1cm4gZS5tPXQsZS5jPXMsZS5wPVwiXCIsZSgwKX0oW2Z1bmN0aW9uKHQsZSxzKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIHM9MDtzPGUubGVuZ3RoO3MrKyl7dmFyIG49ZVtzXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBuJiYobi53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsbi5rZXksbil9fXJldHVybiBmdW5jdGlvbihlLHMsbil7cmV0dXJuIHMmJnQoZS5wcm90b3R5cGUscyksbiYmdChlLG4pLGV9fSgpLHI9cygxKSxvPXMoMyksYT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSxzKXtuKHRoaXMsdCksci5pbml0aWFsaXplci5sb2FkKHRoaXMscyxlKSx0aGlzLmJlZ2luKCl9cmV0dXJuIGkodCxbe2tleTpcInRvZ2dsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5wYXVzZS5zdGF0dXM/dGhpcy5zdGFydCgpOnRoaXMuc3RvcCgpfX0se2tleTpcInN0b3BcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMudHlwaW5nQ29tcGxldGV8fHRoaXMucGF1c2Uuc3RhdHVzfHwodGhpcy50b2dnbGVCbGlua2luZyghMCksdGhpcy5wYXVzZS5zdGF0dXM9ITAsdGhpcy5vcHRpb25zLm9uU3RvcCh0aGlzLmFycmF5UG9zLHRoaXMpKX19LHtrZXk6XCJzdGFydFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy50eXBpbmdDb21wbGV0ZXx8dGhpcy5wYXVzZS5zdGF0dXMmJih0aGlzLnBhdXNlLnN0YXR1cz0hMSx0aGlzLnBhdXNlLnR5cGV3cml0ZT90aGlzLnR5cGV3cml0ZSh0aGlzLnBhdXNlLmN1clN0cmluZyx0aGlzLnBhdXNlLmN1clN0clBvcyk6dGhpcy5iYWNrc3BhY2UodGhpcy5wYXVzZS5jdXJTdHJpbmcsdGhpcy5wYXVzZS5jdXJTdHJQb3MpLHRoaXMub3B0aW9ucy5vblN0YXJ0KHRoaXMuYXJyYXlQb3MsdGhpcykpfX0se2tleTpcImRlc3Ryb3lcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMucmVzZXQoITEpLHRoaXMub3B0aW9ucy5vbkRlc3Ryb3kodGhpcyl9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg8PTB8fHZvaWQgMD09PWFyZ3VtZW50c1swXXx8YXJndW1lbnRzWzBdO2NsZWFySW50ZXJ2YWwodGhpcy50aW1lb3V0KSx0aGlzLnJlcGxhY2VUZXh0KFwiXCIpLHRoaXMuY3Vyc29yJiZ0aGlzLmN1cnNvci5wYXJlbnROb2RlJiYodGhpcy5jdXJzb3IucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmN1cnNvciksdGhpcy5jdXJzb3I9bnVsbCksdGhpcy5zdHJQb3M9MCx0aGlzLmFycmF5UG9zPTAsdGhpcy5jdXJMb29wPTAsdCYmKHRoaXMuaW5zZXJ0Q3Vyc29yKCksdGhpcy5vcHRpb25zLm9uUmVzZXQodGhpcyksdGhpcy5iZWdpbigpKX19LHtrZXk6XCJiZWdpblwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLnR5cGluZ0NvbXBsZXRlPSExLHRoaXMuc2h1ZmZsZVN0cmluZ3NJZk5lZWRlZCh0aGlzKSx0aGlzLmluc2VydEN1cnNvcigpLHRoaXMuYmluZElucHV0Rm9jdXNFdmVudHMmJnRoaXMuYmluZEZvY3VzRXZlbnRzKCksdGhpcy50aW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXt0LmN1cnJlbnRFbENvbnRlbnQmJjAhPT10LmN1cnJlbnRFbENvbnRlbnQubGVuZ3RoP3QuYmFja3NwYWNlKHQuY3VycmVudEVsQ29udGVudCx0LmN1cnJlbnRFbENvbnRlbnQubGVuZ3RoKTp0LnR5cGV3cml0ZSh0LnN0cmluZ3NbdC5zZXF1ZW5jZVt0LmFycmF5UG9zXV0sdC5zdHJQb3MpfSx0aGlzLnN0YXJ0RGVsYXkpfX0se2tleTpcInR5cGV3cml0ZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIHM9dGhpczt0aGlzLmZhZGVPdXQmJnRoaXMuZWwuY2xhc3NMaXN0LmNvbnRhaW5zKHRoaXMuZmFkZU91dENsYXNzKSYmKHRoaXMuZWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmZhZGVPdXRDbGFzcyksdGhpcy5jdXJzb3ImJnRoaXMuY3Vyc29yLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5mYWRlT3V0Q2xhc3MpKTt2YXIgbj10aGlzLmh1bWFuaXplcih0aGlzLnR5cGVTcGVlZCksaT0xO3JldHVybiB0aGlzLnBhdXNlLnN0YXR1cz09PSEwP3ZvaWQgdGhpcy5zZXRQYXVzZVN0YXR1cyh0LGUsITApOnZvaWQodGhpcy50aW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtlPW8uaHRtbFBhcnNlci50eXBlSHRtbENoYXJzKHQsZSxzKTt2YXIgbj0wLHI9dC5zdWJzdHIoZSk7aWYoXCJeXCI9PT1yLmNoYXJBdCgwKSYmL15cXF5cXGQrLy50ZXN0KHIpKXt2YXIgYT0xO3I9L1xcZCsvLmV4ZWMocilbMF0sYSs9ci5sZW5ndGgsbj1wYXJzZUludChyKSxzLnRlbXBvcmFyeVBhdXNlPSEwLHMub3B0aW9ucy5vblR5cGluZ1BhdXNlZChzLmFycmF5UG9zLHMpLHQ9dC5zdWJzdHJpbmcoMCxlKSt0LnN1YnN0cmluZyhlK2EpLHMudG9nZ2xlQmxpbmtpbmcoITApfWlmKFwiYFwiPT09ci5jaGFyQXQoMCkpe2Zvcig7XCJgXCIhPT10LnN1YnN0cihlK2kpLmNoYXJBdCgwKSYmKGkrKywhKGUraT50Lmxlbmd0aCkpOyk7dmFyIHU9dC5zdWJzdHJpbmcoMCxlKSxsPXQuc3Vic3RyaW5nKHUubGVuZ3RoKzEsZStpKSxjPXQuc3Vic3RyaW5nKGUraSsxKTt0PXUrbCtjLGktLX1zLnRpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpe3MudG9nZ2xlQmxpbmtpbmcoITEpLGU9PT10Lmxlbmd0aD9zLmRvbmVUeXBpbmcodCxlKTpzLmtlZXBUeXBpbmcodCxlLGkpLHMudGVtcG9yYXJ5UGF1c2UmJihzLnRlbXBvcmFyeVBhdXNlPSExLHMub3B0aW9ucy5vblR5cGluZ1Jlc3VtZWQocy5hcnJheVBvcyxzKSl9LG4pfSxuKSl9fSx7a2V5Olwia2VlcFR5cGluZ1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxzKXswPT09ZSYmKHRoaXMudG9nZ2xlQmxpbmtpbmcoITEpLHRoaXMub3B0aW9ucy5wcmVTdHJpbmdUeXBlZCh0aGlzLmFycmF5UG9zLHRoaXMpKSxlKz1zO3ZhciBuPXQuc3Vic3RyKDAsZSk7dGhpcy5yZXBsYWNlVGV4dChuKSx0aGlzLnR5cGV3cml0ZSh0LGUpfX0se2tleTpcImRvbmVUeXBpbmdcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBzPXRoaXM7dGhpcy5vcHRpb25zLm9uU3RyaW5nVHlwZWQodGhpcy5hcnJheVBvcyx0aGlzKSx0aGlzLnRvZ2dsZUJsaW5raW5nKCEwKSx0aGlzLmFycmF5UG9zPT09dGhpcy5zdHJpbmdzLmxlbmd0aC0xJiYodGhpcy5jb21wbGV0ZSgpLHRoaXMubG9vcD09PSExfHx0aGlzLmN1ckxvb3A9PT10aGlzLmxvb3BDb3VudCl8fCh0aGlzLnRpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpe3MuYmFja3NwYWNlKHQsZSl9LHRoaXMuYmFja0RlbGF5KSl9fSx7a2V5OlwiYmFja3NwYWNlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgcz10aGlzO2lmKHRoaXMucGF1c2Uuc3RhdHVzPT09ITApcmV0dXJuIHZvaWQgdGhpcy5zZXRQYXVzZVN0YXR1cyh0LGUsITApO2lmKHRoaXMuZmFkZU91dClyZXR1cm4gdGhpcy5pbml0RmFkZU91dCgpO3RoaXMudG9nZ2xlQmxpbmtpbmcoITEpO3ZhciBuPXRoaXMuaHVtYW5pemVyKHRoaXMuYmFja1NwZWVkKTt0aGlzLnRpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpe2U9by5odG1sUGFyc2VyLmJhY2tTcGFjZUh0bWxDaGFycyh0LGUscyk7dmFyIG49dC5zdWJzdHIoMCxlKTtpZihzLnJlcGxhY2VUZXh0KG4pLHMuc21hcnRCYWNrc3BhY2Upe3ZhciBpPXMuc3RyaW5nc1tzLmFycmF5UG9zKzFdO2kmJm49PT1pLnN1YnN0cigwLGUpP3Muc3RvcE51bT1lOnMuc3RvcE51bT0wfWU+cy5zdG9wTnVtPyhlLS0scy5iYWNrc3BhY2UodCxlKSk6ZTw9cy5zdG9wTnVtJiYocy5hcnJheVBvcysrLHMuYXJyYXlQb3M9PT1zLnN0cmluZ3MubGVuZ3RoPyhzLmFycmF5UG9zPTAscy5vcHRpb25zLm9uTGFzdFN0cmluZ0JhY2tzcGFjZWQoKSxzLnNodWZmbGVTdHJpbmdzSWZOZWVkZWQoKSxzLmJlZ2luKCkpOnMudHlwZXdyaXRlKHMuc3RyaW5nc1tzLnNlcXVlbmNlW3MuYXJyYXlQb3NdXSxlKSl9LG4pfX0se2tleTpcImNvbXBsZXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMub25Db21wbGV0ZSh0aGlzKSx0aGlzLmxvb3A/dGhpcy5jdXJMb29wKys6dGhpcy50eXBpbmdDb21wbGV0ZT0hMH19LHtrZXk6XCJzZXRQYXVzZVN0YXR1c1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxzKXt0aGlzLnBhdXNlLnR5cGV3cml0ZT1zLHRoaXMucGF1c2UuY3VyU3RyaW5nPXQsdGhpcy5wYXVzZS5jdXJTdHJQb3M9ZX19LHtrZXk6XCJ0b2dnbGVCbGlua2luZ1wiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKHRoaXMuY3Vyc29yJiYhdGhpcy5wYXVzZS5zdGF0dXMmJnRoaXMuY3Vyc29yQmxpbmtpbmchPT10KXt0aGlzLmN1cnNvckJsaW5raW5nPXQ7dmFyIGU9dD9cImluZmluaXRlXCI6MDt0aGlzLmN1cnNvci5zdHlsZS5hbmltYXRpb25JdGVyYXRpb25Db3VudD1lfX19LHtrZXk6XCJodW1hbml6ZXJcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpKnQvMikrdH19LHtrZXk6XCJzaHVmZmxlU3RyaW5nc0lmTmVlZGVkXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnNodWZmbGUmJih0aGlzLnNlcXVlbmNlPXRoaXMuc2VxdWVuY2Uuc29ydChmdW5jdGlvbigpe3JldHVybiBNYXRoLnJhbmRvbSgpLS41fSkpfX0se2tleTpcImluaXRGYWRlT3V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3JldHVybiB0aGlzLmVsLmNsYXNzTmFtZSs9XCIgXCIrdGhpcy5mYWRlT3V0Q2xhc3MsdGhpcy5jdXJzb3ImJih0aGlzLmN1cnNvci5jbGFzc05hbWUrPVwiIFwiK3RoaXMuZmFkZU91dENsYXNzKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5hcnJheVBvcysrLHQucmVwbGFjZVRleHQoXCJcIiksdC5zdHJpbmdzLmxlbmd0aD50LmFycmF5UG9zP3QudHlwZXdyaXRlKHQuc3RyaW5nc1t0LnNlcXVlbmNlW3QuYXJyYXlQb3NdXSwwKToodC50eXBld3JpdGUodC5zdHJpbmdzWzBdLDApLHQuYXJyYXlQb3M9MCl9LHRoaXMuZmFkZU91dERlbGF5KX19LHtrZXk6XCJyZXBsYWNlVGV4dFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuYXR0cj90aGlzLmVsLnNldEF0dHJpYnV0ZSh0aGlzLmF0dHIsdCk6dGhpcy5pc0lucHV0P3RoaXMuZWwudmFsdWU9dDpcImh0bWxcIj09PXRoaXMuY29udGVudFR5cGU/dGhpcy5lbC5pbm5lckhUTUw9dDp0aGlzLmVsLnRleHRDb250ZW50PXR9fSx7a2V5OlwiYmluZEZvY3VzRXZlbnRzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuaXNJbnB1dCYmKHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsZnVuY3Rpb24oZSl7dC5zdG9wKCl9KSx0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsZnVuY3Rpb24oZSl7dC5lbC52YWx1ZSYmMCE9PXQuZWwudmFsdWUubGVuZ3RofHx0LnN0YXJ0KCl9KSl9fSx7a2V5OlwiaW5zZXJ0Q3Vyc29yXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnNob3dDdXJzb3ImJih0aGlzLmN1cnNvcnx8KHRoaXMuY3Vyc29yPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpLHRoaXMuY3Vyc29yLmNsYXNzTmFtZT1cInR5cGVkLWN1cnNvclwiLHRoaXMuY3Vyc29yLmlubmVySFRNTD10aGlzLmN1cnNvckNoYXIsdGhpcy5lbC5wYXJlbnROb2RlJiZ0aGlzLmVsLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMuY3Vyc29yLHRoaXMuZWwubmV4dFNpYmxpbmcpKSl9fV0pLHR9KCk7ZVtcImRlZmF1bHRcIl09YSx0LmV4cG9ydHM9ZVtcImRlZmF1bHRcIl19LGZ1bmN0aW9uKHQsZSxzKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7XCJkZWZhdWx0XCI6dH19ZnVuY3Rpb24gaSh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHI9T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTE7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl7dmFyIHM9YXJndW1lbnRzW2VdO2Zvcih2YXIgbiBpbiBzKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLG4pJiYodFtuXT1zW25dKX1yZXR1cm4gdH0sbz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIHM9MDtzPGUubGVuZ3RoO3MrKyl7dmFyIG49ZVtzXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBuJiYobi53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsbi5rZXksbil9fXJldHVybiBmdW5jdGlvbihlLHMsbil7cmV0dXJuIHMmJnQoZS5wcm90b3R5cGUscyksbiYmdChlLG4pLGV9fSgpLGE9cygyKSx1PW4oYSksbD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtpKHRoaXMsdCl9cmV0dXJuIG8odCxbe2tleTpcImxvYWRcIix2YWx1ZTpmdW5jdGlvbih0LGUscyl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHM/dC5lbD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKHMpOnQuZWw9cyx0Lm9wdGlvbnM9cih7fSx1W1wiZGVmYXVsdFwiXSxlKSx0LmlzSW5wdXQ9XCJpbnB1dFwiPT09dC5lbC50YWdOYW1lLnRvTG93ZXJDYXNlKCksdC5hdHRyPXQub3B0aW9ucy5hdHRyLHQuYmluZElucHV0Rm9jdXNFdmVudHM9dC5vcHRpb25zLmJpbmRJbnB1dEZvY3VzRXZlbnRzLHQuc2hvd0N1cnNvcj0hdC5pc0lucHV0JiZ0Lm9wdGlvbnMuc2hvd0N1cnNvcix0LmN1cnNvckNoYXI9dC5vcHRpb25zLmN1cnNvckNoYXIsdC5jdXJzb3JCbGlua2luZz0hMCx0LmVsQ29udGVudD10LmF0dHI/dC5lbC5nZXRBdHRyaWJ1dGUodC5hdHRyKTp0LmVsLnRleHRDb250ZW50LHQuY29udGVudFR5cGU9dC5vcHRpb25zLmNvbnRlbnRUeXBlLHQudHlwZVNwZWVkPXQub3B0aW9ucy50eXBlU3BlZWQsdC5zdGFydERlbGF5PXQub3B0aW9ucy5zdGFydERlbGF5LHQuYmFja1NwZWVkPXQub3B0aW9ucy5iYWNrU3BlZWQsdC5zbWFydEJhY2tzcGFjZT10Lm9wdGlvbnMuc21hcnRCYWNrc3BhY2UsdC5iYWNrRGVsYXk9dC5vcHRpb25zLmJhY2tEZWxheSx0LmZhZGVPdXQ9dC5vcHRpb25zLmZhZGVPdXQsdC5mYWRlT3V0Q2xhc3M9dC5vcHRpb25zLmZhZGVPdXRDbGFzcyx0LmZhZGVPdXREZWxheT10Lm9wdGlvbnMuZmFkZU91dERlbGF5LHQuaXNQYXVzZWQ9ITEsdC5zdHJpbmdzPXQub3B0aW9ucy5zdHJpbmdzLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC50cmltKCl9KSxcInN0cmluZ1wiPT10eXBlb2YgdC5vcHRpb25zLnN0cmluZ3NFbGVtZW50P3Quc3RyaW5nc0VsZW1lbnQ9ZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0Lm9wdGlvbnMuc3RyaW5nc0VsZW1lbnQpOnQuc3RyaW5nc0VsZW1lbnQ9dC5vcHRpb25zLnN0cmluZ3NFbGVtZW50LHQuc3RyaW5nc0VsZW1lbnQpe3Quc3RyaW5ncz1bXSx0LnN0cmluZ3NFbGVtZW50LnN0eWxlLmRpc3BsYXk9XCJub25lXCI7dmFyIG49QXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KHQuc3RyaW5nc0VsZW1lbnQuY2hpbGRyZW4pLGk9ITAsbz0hMSxhPXZvaWQgMDt0cnl7Zm9yKHZhciBsLGM9bltTeW1ib2wuaXRlcmF0b3JdKCk7IShpPShsPWMubmV4dCgpKS5kb25lKTtpPSEwKXt2YXIgcD1sLnZhbHVlO3Quc3RyaW5ncy5wdXNoKHAuaW5uZXJIVE1MLnRyaW0oKSl9fWNhdGNoKGgpe289ITAsYT1ofWZpbmFsbHl7dHJ5eyFpJiZjW1wicmV0dXJuXCJdJiZjW1wicmV0dXJuXCJdKCl9ZmluYWxseXtpZihvKXRocm93IGF9fX10LnN0clBvcz0wLHQuYXJyYXlQb3M9MCx0LnN0b3BOdW09MCx0Lmxvb3A9dC5vcHRpb25zLmxvb3AsdC5sb29wQ291bnQ9dC5vcHRpb25zLmxvb3BDb3VudCx0LmN1ckxvb3A9MCx0LnNodWZmbGU9dC5vcHRpb25zLnNodWZmbGUsdC5zZXF1ZW5jZT1bXSx0LnBhdXNlPXtzdGF0dXM6ITEsdHlwZXdyaXRlOiEwLGN1clN0cmluZzpcIlwiLGN1clN0clBvczowfSx0LnR5cGluZ0NvbXBsZXRlPSExO2Zvcih2YXIgZiBpbiB0LnN0cmluZ3MpdC5zZXF1ZW5jZVtmXT1mO3QuY3VycmVudEVsQ29udGVudD10aGlzLmdldEN1cnJlbnRFbENvbnRlbnQodCksdC5hdXRvSW5zZXJ0Q3NzPXQub3B0aW9ucy5hdXRvSW5zZXJ0Q3NzLHRoaXMuYXBwZW5kQW5pbWF0aW9uQ3NzKHQpfX0se2tleTpcImdldEN1cnJlbnRFbENvbnRlbnRcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1cIlwiO3JldHVybiBlPXQuYXR0cj90LmVsLmdldEF0dHJpYnV0ZSh0LmF0dHIpOnQuaXNJbnB1dD90LmVsLnZhbHVlOlwiaHRtbFwiPT09dC5jb250ZW50VHlwZT90LmVsLmlubmVySFRNTDp0LmVsLnRleHRDb250ZW50fX0se2tleTpcImFwcGVuZEFuaW1hdGlvbkNzc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKHQuYXV0b0luc2VydENzcyYmdC5zaG93Q3Vyc29yJiZ0LmZhZGVPdXQpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtlLnR5cGU9XCJ0ZXh0L2Nzc1wiO3ZhciBzPVwiXCI7dC5zaG93Q3Vyc29yJiYocys9XCJcXG4gICAgICAgIC50eXBlZC1jdXJzb3J7XFxuICAgICAgICAgIG9wYWNpdHk6IDE7XFxuICAgICAgICAgIGFuaW1hdGlvbjogdHlwZWRqc0JsaW5rIDAuN3MgaW5maW5pdGU7XFxuICAgICAgICAgIC13ZWJraXQtYW5pbWF0aW9uOiB0eXBlZGpzQmxpbmsgMC43cyBpbmZpbml0ZTtcXG4gICAgICAgICAgICAgICAgICBhbmltYXRpb246IHR5cGVkanNCbGluayAwLjdzIGluZmluaXRlO1xcbiAgICAgICAgfVxcbiAgICAgICAgQGtleWZyYW1lcyB0eXBlZGpzQmxpbmt7XFxuICAgICAgICAgIDUwJSB7IG9wYWNpdHk6IDAuMDsgfVxcbiAgICAgICAgfVxcbiAgICAgICAgQC13ZWJraXQta2V5ZnJhbWVzIHR5cGVkanNCbGlua3tcXG4gICAgICAgICAgMCUgeyBvcGFjaXR5OiAxOyB9XFxuICAgICAgICAgIDUwJSB7IG9wYWNpdHk6IDAuMDsgfVxcbiAgICAgICAgICAxMDAlIHsgb3BhY2l0eTogMTsgfVxcbiAgICAgICAgfVxcbiAgICAgIFwiKSx0LmZhZGVPdXQmJihzKz1cIlxcbiAgICAgICAgLnR5cGVkLWZhZGUtb3V0e1xcbiAgICAgICAgICBvcGFjaXR5OiAwO1xcbiAgICAgICAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IC4yNXM7XFxuICAgICAgICAgIC13ZWJraXQtYW5pbWF0aW9uOiAwO1xcbiAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogMDtcXG4gICAgICAgIH1cXG4gICAgICBcIiksMCE9PWUubGVuZ3RoJiYoZS5pbm5lckhUTUw9cyxkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGUpKX19fV0pLHR9KCk7ZVtcImRlZmF1bHRcIl09bDt2YXIgYz1uZXcgbDtlLmluaXRpYWxpemVyPWN9LGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHM9e3N0cmluZ3M6W1wiVGhlc2UgYXJlIHRoZSBkZWZhdWx0IHZhbHVlcy4uLlwiLFwiWW91IGtub3cgd2hhdCB5b3Ugc2hvdWxkIGRvP1wiLFwiVXNlIHlvdXIgb3duIVwiLFwiSGF2ZSBhIGdyZWF0IGRheSFcIl0sc3RyaW5nc0VsZW1lbnQ6bnVsbCx0eXBlU3BlZWQ6MCxzdGFydERlbGF5OjAsYmFja1NwZWVkOjAsc21hcnRCYWNrc3BhY2U6ITAsc2h1ZmZsZTohMSxiYWNrRGVsYXk6NzAwLGZhZGVPdXQ6ITEsZmFkZU91dENsYXNzOlwidHlwZWQtZmFkZS1vdXRcIixmYWRlT3V0RGVsYXk6NTAwLGxvb3A6ITEsbG9vcENvdW50OjEvMCxzaG93Q3Vyc29yOiEwLGN1cnNvckNoYXI6XCJ8XCIsYXV0b0luc2VydENzczohMCxhdHRyOm51bGwsYmluZElucHV0Rm9jdXNFdmVudHM6ITEsY29udGVudFR5cGU6XCJodG1sXCIsb25Db21wbGV0ZTpmdW5jdGlvbih0KXt9LHByZVN0cmluZ1R5cGVkOmZ1bmN0aW9uKHQsZSl7fSxvblN0cmluZ1R5cGVkOmZ1bmN0aW9uKHQsZSl7fSxvbkxhc3RTdHJpbmdCYWNrc3BhY2VkOmZ1bmN0aW9uKHQpe30sb25UeXBpbmdQYXVzZWQ6ZnVuY3Rpb24odCxlKXt9LG9uVHlwaW5nUmVzdW1lZDpmdW5jdGlvbih0LGUpe30sb25SZXNldDpmdW5jdGlvbih0KXt9LG9uU3RvcDpmdW5jdGlvbih0LGUpe30sb25TdGFydDpmdW5jdGlvbih0LGUpe30sb25EZXN0cm95OmZ1bmN0aW9uKHQpe319O2VbXCJkZWZhdWx0XCJdPXMsdC5leHBvcnRzPWVbXCJkZWZhdWx0XCJdfSxmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHModCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgcz0wO3M8ZS5sZW5ndGg7cysrKXt2YXIgbj1lW3NdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKGUscyxuKXtyZXR1cm4gcyYmdChlLnByb3RvdHlwZSxzKSxuJiZ0KGUsbiksZX19KCksaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtzKHRoaXMsdCl9cmV0dXJuIG4odCxbe2tleTpcInR5cGVIdG1sQ2hhcnNcIix2YWx1ZTpmdW5jdGlvbih0LGUscyl7aWYoXCJodG1sXCIhPT1zLmNvbnRlbnRUeXBlKXJldHVybiBlO3ZhciBuPXQuc3Vic3RyKGUpLmNoYXJBdCgwKTtpZihcIjxcIj09PW58fFwiJlwiPT09bil7dmFyIGk9XCJcIjtmb3IoaT1cIjxcIj09PW4/XCI+XCI6XCI7XCI7dC5zdWJzdHIoZSsxKS5jaGFyQXQoMCkhPT1pJiYoZSsrLCEoZSsxPnQubGVuZ3RoKSk7KTtlKyt9cmV0dXJuIGV9fSx7a2V5OlwiYmFja1NwYWNlSHRtbENoYXJzXCIsdmFsdWU6ZnVuY3Rpb24odCxlLHMpe2lmKFwiaHRtbFwiIT09cy5jb250ZW50VHlwZSlyZXR1cm4gZTt2YXIgbj10LnN1YnN0cihlKS5jaGFyQXQoMCk7aWYoXCI+XCI9PT1ufHxcIjtcIj09PW4pe3ZhciBpPVwiXCI7Zm9yKGk9XCI+XCI9PT1uP1wiPFwiOlwiJlwiO3Quc3Vic3RyKGUtMSkuY2hhckF0KDApIT09aSYmKGUtLSwhKGU8MCkpOyk7ZS0tfXJldHVybiBlfX1dKSx0fSgpO2VbXCJkZWZhdWx0XCJdPWk7dmFyIHI9bmV3IGk7ZS5odG1sUGFyc2VyPXJ9XSl9KTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHlwZWQubWluLmpzLm1hcFxyXG4iLCIhZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKHQpe2lmKHZvaWQgMD09PXQpdGhyb3cgbmV3IEVycm9yKCdQYXRoZm9ybWVyIFtjb25zdHJ1Y3Rvcl06IFwiZWxlbWVudFwiIHBhcmFtZXRlciBpcyByZXF1aXJlZCcpO2lmKHQuY29uc3RydWN0b3I9PT1TdHJpbmcmJiEodD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0KSkpdGhyb3cgbmV3IEVycm9yKCdQYXRoZm9ybWVyIFtjb25zdHJ1Y3Rvcl06IFwiZWxlbWVudFwiIHBhcmFtZXRlciBpcyBub3QgcmVsYXRlZCB0byBhbiBleGlzdGluZyBJRCcpO2lmKCEodCBpbnN0YW5jZW9mIHdpbmRvdy5TVkdFbGVtZW50fHx0IGluc3RhbmNlb2Ygd2luZG93LlNWR0dFbGVtZW50fHwvXnN2ZyQvaS50ZXN0KHQubm9kZU5hbWUpKSl0aHJvdyBuZXcgRXJyb3IoJ1BhdGhmb3JtZXIgW2NvbnN0cnVjdG9yXTogXCJlbGVtZW50XCIgcGFyYW1ldGVyIG11c3QgYmUgYSBzdHJpbmcgb3IgYSBTVkdlbGVtZW50Jyk7dGhpcy5lbD10LHRoaXMuc2Nhbih0KX12YXIgbixlLHQsaDtmdW5jdGlvbiBpKHQsZSxyKXtuKCksdGhpcy5pc1JlYWR5PSExLHRoaXMuc2V0RWxlbWVudCh0LGUpLHRoaXMuc2V0T3B0aW9ucyhlKSx0aGlzLnNldENhbGxiYWNrKHIpLHRoaXMuaXNSZWFkeSYmdGhpcy5pbml0KCl9ci5wcm90b3R5cGUuVFlQRVM9W1wibGluZVwiLFwiZWxsaXBzZVwiLFwiY2lyY2xlXCIsXCJwb2x5Z29uXCIsXCJwb2x5bGluZVwiLFwicmVjdFwiXSxyLnByb3RvdHlwZS5BVFRSX1dBVENIPVtcImN4XCIsXCJjeVwiLFwicG9pbnRzXCIsXCJyXCIsXCJyeFwiLFwicnlcIixcInhcIixcIngxXCIsXCJ4MlwiLFwieVwiLFwieTFcIixcInkyXCJdLHIucHJvdG90eXBlLnNjYW49ZnVuY3Rpb24odCl7Zm9yKHZhciBlLHIsbixpPXQucXVlcnlTZWxlY3RvckFsbCh0aGlzLlRZUEVTLmpvaW4oXCIsXCIpKSxhPTA7YTxpLmxlbmd0aDthKyspcj0oMCx0aGlzWyhlPWlbYV0pLnRhZ05hbWUudG9Mb3dlckNhc2UoKStcIlRvUGF0aFwiXSkodGhpcy5wYXJzZUF0dHIoZS5hdHRyaWJ1dGVzKSksbj10aGlzLnBhdGhNYWtlcihlLHIpLGUucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQobixlKX0sci5wcm90b3R5cGUubGluZVRvUGF0aD1mdW5jdGlvbih0KXt2YXIgZT17fSxyPXQueDF8fDAsbj10LnkxfHwwLGk9dC54Mnx8MCxhPXQueTJ8fDA7cmV0dXJuIGUuZD1cIk1cIityK1wiLFwiK24rXCJMXCIraStcIixcIithLGV9LHIucHJvdG90eXBlLnJlY3RUb1BhdGg9ZnVuY3Rpb24odCl7dmFyIGU9e30scj1wYXJzZUZsb2F0KHQueCl8fDAsbj1wYXJzZUZsb2F0KHQueSl8fDAsaT1wYXJzZUZsb2F0KHQud2lkdGgpfHwwLGE9cGFyc2VGbG9hdCh0LmhlaWdodCl8fDA7aWYodC5yeHx8dC5yeSl7dmFyIG89cGFyc2VJbnQodC5yeCwxMCl8fC0xLHM9cGFyc2VJbnQodC5yeSwxMCl8fC0xO289TWF0aC5taW4oTWF0aC5tYXgobzwwP3M6bywwKSxpLzIpLHM9TWF0aC5taW4oTWF0aC5tYXgoczwwP286cywwKSxhLzIpLGUuZD1cIk0gXCIrKHIrbykrXCIsXCIrbitcIiBMIFwiKyhyK2ktbykrXCIsXCIrbitcIiBBIFwiK28rXCIsXCIrcytcIiwwLDAsMSxcIisocitpKStcIixcIisobitzKStcIiBMIFwiKyhyK2kpK1wiLFwiKyhuK2EtcykrXCIgQSBcIitvK1wiLFwiK3MrXCIsMCwwLDEsXCIrKHIraS1vKStcIixcIisobithKStcIiBMIFwiKyhyK28pK1wiLFwiKyhuK2EpK1wiIEEgXCIrbytcIixcIitzK1wiLDAsMCwxLFwiK3IrXCIsXCIrKG4rYS1zKStcIiBMIFwiK3IrXCIsXCIrKG4rcykrXCIgQSBcIitvK1wiLFwiK3MrXCIsMCwwLDEsXCIrKHIrbykrXCIsXCIrbn1lbHNlIGUuZD1cIk1cIityK1wiIFwiK24rXCIgTFwiKyhyK2kpK1wiIFwiK24rXCIgTFwiKyhyK2kpK1wiIFwiKyhuK2EpK1wiIExcIityK1wiIFwiKyhuK2EpK1wiIFpcIjtyZXR1cm4gZX0sci5wcm90b3R5cGUucG9seWxpbmVUb1BhdGg9ZnVuY3Rpb24odCl7dmFyIGUscixuPXt9LGk9dC5wb2ludHMudHJpbSgpLnNwbGl0KFwiIFwiKTtpZigtMT09PXQucG9pbnRzLmluZGV4T2YoXCIsXCIpKXt2YXIgYT1bXTtmb3IoZT0wO2U8aS5sZW5ndGg7ZSs9MilhLnB1c2goaVtlXStcIixcIitpW2UrMV0pO2k9YX1mb3Iocj1cIk1cIitpWzBdLGU9MTtlPGkubGVuZ3RoO2UrKyktMSE9PWlbZV0uaW5kZXhPZihcIixcIikmJihyKz1cIkxcIitpW2VdKTtyZXR1cm4gbi5kPXIsbn0sci5wcm90b3R5cGUucG9seWdvblRvUGF0aD1mdW5jdGlvbih0KXt2YXIgZT1yLnByb3RvdHlwZS5wb2x5bGluZVRvUGF0aCh0KTtyZXR1cm4gZS5kKz1cIlpcIixlfSxyLnByb3RvdHlwZS5lbGxpcHNlVG9QYXRoPWZ1bmN0aW9uKHQpe3ZhciBlPXt9LHI9cGFyc2VGbG9hdCh0LnJ4KXx8MCxuPXBhcnNlRmxvYXQodC5yeSl8fDAsaT1wYXJzZUZsb2F0KHQuY3gpfHwwLGE9cGFyc2VGbG9hdCh0LmN5KXx8MCxvPWktcixzPWEsaD1wYXJzZUZsb2F0KGkpK3BhcnNlRmxvYXQociksbD1hO3JldHVybiBlLmQ9XCJNXCIrbytcIixcIitzK1wiQVwiK3IrXCIsXCIrbitcIiAwLDEsMSBcIitoK1wiLFwiK2wrXCJBXCIrcitcIixcIituK1wiIDAsMSwxIFwiK28rXCIsXCIrbCxlfSxyLnByb3RvdHlwZS5jaXJjbGVUb1BhdGg9ZnVuY3Rpb24odCl7dmFyIGU9e30scj1wYXJzZUZsb2F0KHQucil8fDAsbj1wYXJzZUZsb2F0KHQuY3gpfHwwLGk9cGFyc2VGbG9hdCh0LmN5KXx8MCxhPW4tcixvPWkscz1wYXJzZUZsb2F0KG4pK3BhcnNlRmxvYXQociksaD1pO3JldHVybiBlLmQ9XCJNXCIrYStcIixcIitvK1wiQVwiK3IrXCIsXCIrcitcIiAwLDEsMSBcIitzK1wiLFwiK2grXCJBXCIrcitcIixcIityK1wiIDAsMSwxIFwiK2ErXCIsXCIraCxlfSxyLnByb3RvdHlwZS5wYXRoTWFrZXI9ZnVuY3Rpb24odCxlKXt2YXIgcixuLGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcInBhdGhcIik7Zm9yKHI9MDtyPHQuYXR0cmlidXRlcy5sZW5ndGg7cisrKW49dC5hdHRyaWJ1dGVzW3JdLC0xPT09dGhpcy5BVFRSX1dBVENILmluZGV4T2Yobi5uYW1lKSYmaS5zZXRBdHRyaWJ1dGUobi5uYW1lLG4udmFsdWUpO2ZvcihyIGluIGUpaS5zZXRBdHRyaWJ1dGUocixlW3JdKTtyZXR1cm4gaX0sci5wcm90b3R5cGUucGFyc2VBdHRyPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxyPXt9LG49MDtuPHQubGVuZ3RoO24rKyl7aWYoZT10W25dLC0xIT09dGhpcy5BVFRSX1dBVENILmluZGV4T2YoZS5uYW1lKSYmLTEhPT1lLnZhbHVlLmluZGV4T2YoXCIlXCIpKXRocm93IG5ldyBFcnJvcihcIlBhdGhmb3JtZXIgW3BhcnNlQXR0cl06IGEgU1ZHIHNoYXBlIGdvdCB2YWx1ZXMgaW4gcGVyY2VudGFnZS4gVGhpcyBjYW5ub3QgYmUgdHJhbnNmb3JtZWQgaW50byAncGF0aCcgdGFncy4gUGxlYXNlIHVzZSAndmlld0JveCcuXCIpO3JbZS5uYW1lXT1lLnZhbHVlfXJldHVybiByfSxpLkxJTkVBUj1mdW5jdGlvbih0KXtyZXR1cm4gdH0saS5FQVNFPWZ1bmN0aW9uKHQpe3JldHVybi1NYXRoLmNvcyh0Kk1hdGguUEkpLzIrLjV9LGkuRUFTRV9PVVQ9ZnVuY3Rpb24odCl7cmV0dXJuIDEtTWF0aC5wb3coMS10LDMpfSxpLkVBU0VfSU49ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGgucG93KHQsMyl9LGkuRUFTRV9PVVRfQk9VTkNFPWZ1bmN0aW9uKHQpe3ZhciBlPTEtTWF0aC5jb3ModCooLjUqTWF0aC5QSSkpLHI9TWF0aC5wb3coZSwxLjUpLG49TWF0aC5wb3coMS10LDIpO3JldHVybiAxLW4rKDEtTWF0aC5hYnMoTWF0aC5jb3MociooMi41Kk1hdGguUEkpKSkpKm59LGkucHJvdG90eXBlLnNldEVsZW1lbnQ9ZnVuY3Rpb24oZSxyKXt2YXIgdCxuO2lmKHZvaWQgMD09PWUpdGhyb3cgbmV3IEVycm9yKCdWaXZ1cyBbY29uc3RydWN0b3JdOiBcImVsZW1lbnRcIiBwYXJhbWV0ZXIgaXMgcmVxdWlyZWQnKTtpZihlLmNvbnN0cnVjdG9yPT09U3RyaW5nJiYhKGU9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZSkpKXRocm93IG5ldyBFcnJvcignVml2dXMgW2NvbnN0cnVjdG9yXTogXCJlbGVtZW50XCIgcGFyYW1ldGVyIGlzIG5vdCByZWxhdGVkIHRvIGFuIGV4aXN0aW5nIElEJyk7aWYodGhpcy5wYXJlbnRFbD1lLHImJnIuZmlsZSl7bj10aGlzLHQ9ZnVuY3Rpb24oKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3QuaW5uZXJIVE1MPXRoaXMucmVzcG9uc2VUZXh0O3ZhciBlPXQucXVlcnlTZWxlY3RvcihcInN2Z1wiKTtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJWaXZ1cyBbbG9hZF06IENhbm5vdCBmaW5kIHRoZSBTVkcgaW4gdGhlIGxvYWRlZCBmaWxlIDogXCIrci5maWxlKTtuLmVsPWUsbi5lbC5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLFwiMTAwJVwiKSxuLmVsLnNldEF0dHJpYnV0ZShcImhlaWdodFwiLFwiMTAwJVwiKSxuLnBhcmVudEVsLmFwcGVuZENoaWxkKG4uZWwpLG4uaXNSZWFkeT0hMCxuLmluaXQoKSxuPW51bGx9O3ZhciBpPW5ldyB3aW5kb3cuWE1MSHR0cFJlcXVlc3Q7cmV0dXJuIGkuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIix0KSxpLm9wZW4oXCJHRVRcIixyLmZpbGUpLHZvaWQgaS5zZW5kKCl9c3dpdGNoKGUuY29uc3RydWN0b3Ipe2Nhc2Ugd2luZG93LlNWR1NWR0VsZW1lbnQ6Y2FzZSB3aW5kb3cuU1ZHRWxlbWVudDpjYXNlIHdpbmRvdy5TVkdHRWxlbWVudDp0aGlzLmVsPWUsdGhpcy5pc1JlYWR5PSEwO2JyZWFrO2Nhc2Ugd2luZG93LkhUTUxPYmplY3RFbGVtZW50Om49dGhpcywodD1mdW5jdGlvbih0KXtpZighbi5pc1JlYWR5KXtpZihuLmVsPWUuY29udGVudERvY3VtZW50JiZlLmNvbnRlbnREb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwic3ZnXCIpLCFuLmVsJiZ0KXRocm93IG5ldyBFcnJvcihcIlZpdnVzIFtjb25zdHJ1Y3Rvcl06IG9iamVjdCBsb2FkZWQgZG9lcyBub3QgY29udGFpbiBhbnkgU1ZHXCIpO24uZWwmJihlLmdldEF0dHJpYnV0ZShcImJ1aWx0LWJ5LXZpdnVzXCIpJiYobi5wYXJlbnRFbC5pbnNlcnRCZWZvcmUobi5lbCxlKSxuLnBhcmVudEVsLnJlbW92ZUNoaWxkKGUpLG4uZWwuc2V0QXR0cmlidXRlKFwid2lkdGhcIixcIjEwMCVcIiksbi5lbC5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIixcIjEwMCVcIikpLG4uaXNSZWFkeT0hMCxuLmluaXQoKSxuPW51bGwpfX0pKCl8fGUuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIix0KTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcignVml2dXMgW2NvbnN0cnVjdG9yXTogXCJlbGVtZW50XCIgcGFyYW1ldGVyIGlzIG5vdCB2YWxpZCAob3IgbWlzcyB0aGUgXCJmaWxlXCIgYXR0cmlidXRlKScpfX0saS5wcm90b3R5cGUuc2V0T3B0aW9ucz1mdW5jdGlvbih0KXt2YXIgZT1bXCJkZWxheWVkXCIsXCJzeW5jXCIsXCJhc3luY1wiLFwibnN5bmNcIixcIm9uZUJ5T25lXCIsXCJzY2VuYXJpb1wiLFwic2NlbmFyaW8tc3luY1wiXSxyPVtcImluVmlld3BvcnRcIixcIm1hbnVhbFwiLFwiYXV0b3N0YXJ0XCJdO2lmKHZvaWQgMCE9PXQmJnQuY29uc3RydWN0b3IhPT1PYmplY3QpdGhyb3cgbmV3IEVycm9yKCdWaXZ1cyBbY29uc3RydWN0b3JdOiBcIm9wdGlvbnNcIiBwYXJhbWV0ZXIgbXVzdCBiZSBhbiBvYmplY3QnKTtpZigodD10fHx7fSkudHlwZSYmLTE9PT1lLmluZGV4T2YodC50eXBlKSl0aHJvdyBuZXcgRXJyb3IoXCJWaXZ1cyBbY29uc3RydWN0b3JdOiBcIit0LnR5cGUrXCIgaXMgbm90IGFuIGV4aXN0aW5nIGFuaW1hdGlvbiBgdHlwZWBcIik7aWYodGhpcy50eXBlPXQudHlwZXx8ZVswXSx0LnN0YXJ0JiYtMT09PXIuaW5kZXhPZih0LnN0YXJ0KSl0aHJvdyBuZXcgRXJyb3IoXCJWaXZ1cyBbY29uc3RydWN0b3JdOiBcIit0LnN0YXJ0K1wiIGlzIG5vdCBhbiBleGlzdGluZyBgc3RhcnRgIG9wdGlvblwiKTtpZih0aGlzLnN0YXJ0PXQuc3RhcnR8fHJbMF0sdGhpcy5pc0lFPS0xIT09d2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIk1TSUVcIil8fC0xIT09d2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIlRyaWRlbnQvXCIpfHwtMSE9PXdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCJFZGdlL1wiKSx0aGlzLmR1cmF0aW9uPWgodC5kdXJhdGlvbiwxMjApLHRoaXMuZGVsYXk9aCh0LmRlbGF5LG51bGwpLHRoaXMuZGFzaEdhcD1oKHQuZGFzaEdhcCwxKSx0aGlzLmZvcmNlUmVuZGVyPXQuaGFzT3duUHJvcGVydHkoXCJmb3JjZVJlbmRlclwiKT8hIXQuZm9yY2VSZW5kZXI6dGhpcy5pc0lFLHRoaXMucmV2ZXJzZVN0YWNrPSEhdC5yZXZlcnNlU3RhY2ssdGhpcy5zZWxmRGVzdHJveT0hIXQuc2VsZkRlc3Ryb3ksdGhpcy5vblJlYWR5PXQub25SZWFkeSx0aGlzLm1hcD1bXSx0aGlzLmZyYW1lTGVuZ3RoPXRoaXMuY3VycmVudEZyYW1lPXRoaXMuZGVsYXlVbml0PXRoaXMuc3BlZWQ9dGhpcy5oYW5kbGU9bnVsbCx0aGlzLmlnbm9yZUludmlzaWJsZT0hIXQuaGFzT3duUHJvcGVydHkoXCJpZ25vcmVJbnZpc2libGVcIikmJiEhdC5pZ25vcmVJbnZpc2libGUsdGhpcy5hbmltVGltaW5nRnVuY3Rpb249dC5hbmltVGltaW5nRnVuY3Rpb258fGkuTElORUFSLHRoaXMucGF0aFRpbWluZ0Z1bmN0aW9uPXQucGF0aFRpbWluZ0Z1bmN0aW9ufHxpLkxJTkVBUix0aGlzLmRlbGF5Pj10aGlzLmR1cmF0aW9uKXRocm93IG5ldyBFcnJvcihcIlZpdnVzIFtjb25zdHJ1Y3Rvcl06IGRlbGF5IG11c3QgYmUgc2hvcnRlciB0aGFuIGR1cmF0aW9uXCIpfSxpLnByb3RvdHlwZS5zZXRDYWxsYmFjaz1mdW5jdGlvbih0KXtpZih0JiZ0LmNvbnN0cnVjdG9yIT09RnVuY3Rpb24pdGhyb3cgbmV3IEVycm9yKCdWaXZ1cyBbY29uc3RydWN0b3JdOiBcImNhbGxiYWNrXCIgcGFyYW1ldGVyIG11c3QgYmUgYSBmdW5jdGlvbicpO3RoaXMuY2FsbGJhY2s9dHx8ZnVuY3Rpb24oKXt9fSxpLnByb3RvdHlwZS5tYXBwaW5nPWZ1bmN0aW9uKCl7dmFyIHQsZSxyLG4saSxhLG8scztmb3Iocz1hPW89MCxlPXRoaXMuZWwucXVlcnlTZWxlY3RvckFsbChcInBhdGhcIiksdD0wO3Q8ZS5sZW5ndGg7dCsrKXI9ZVt0XSx0aGlzLmlzSW52aXNpYmxlKHIpfHwoaT17ZWw6cixsZW5ndGg6TWF0aC5jZWlsKHIuZ2V0VG90YWxMZW5ndGgoKSl9LGlzTmFOKGkubGVuZ3RoKT93aW5kb3cuY29uc29sZSYmY29uc29sZS53YXJuJiZjb25zb2xlLndhcm4oXCJWaXZ1cyBbbWFwcGluZ106IGNhbm5vdCByZXRyaWV2ZSBhIHBhdGggZWxlbWVudCBsZW5ndGhcIixyKToodGhpcy5tYXAucHVzaChpKSxyLnN0eWxlLnN0cm9rZURhc2hhcnJheT1pLmxlbmd0aCtcIiBcIisoaS5sZW5ndGgrMip0aGlzLmRhc2hHYXApLHIuc3R5bGUuc3Ryb2tlRGFzaG9mZnNldD1pLmxlbmd0aCt0aGlzLmRhc2hHYXAsaS5sZW5ndGgrPXRoaXMuZGFzaEdhcCxhKz1pLmxlbmd0aCx0aGlzLnJlbmRlclBhdGgodCkpKTtmb3IoYT0wPT09YT8xOmEsdGhpcy5kZWxheT1udWxsPT09dGhpcy5kZWxheT90aGlzLmR1cmF0aW9uLzM6dGhpcy5kZWxheSx0aGlzLmRlbGF5VW5pdD10aGlzLmRlbGF5LygxPGUubGVuZ3RoP2UubGVuZ3RoLTE6MSksdGhpcy5yZXZlcnNlU3RhY2smJnRoaXMubWFwLnJldmVyc2UoKSx0PTA7dDx0aGlzLm1hcC5sZW5ndGg7dCsrKXtzd2l0Y2goaT10aGlzLm1hcFt0XSx0aGlzLnR5cGUpe2Nhc2VcImRlbGF5ZWRcIjppLnN0YXJ0QXQ9dGhpcy5kZWxheVVuaXQqdCxpLmR1cmF0aW9uPXRoaXMuZHVyYXRpb24tdGhpcy5kZWxheTticmVhaztjYXNlXCJvbmVCeU9uZVwiOmkuc3RhcnRBdD1vL2EqdGhpcy5kdXJhdGlvbixpLmR1cmF0aW9uPWkubGVuZ3RoL2EqdGhpcy5kdXJhdGlvbjticmVhaztjYXNlXCJzeW5jXCI6Y2FzZVwiYXN5bmNcIjpjYXNlXCJuc3luY1wiOmkuc3RhcnRBdD0wLGkuZHVyYXRpb249dGhpcy5kdXJhdGlvbjticmVhaztjYXNlXCJzY2VuYXJpby1zeW5jXCI6cj1pLmVsLG49dGhpcy5wYXJzZUF0dHIociksaS5zdGFydEF0PXMrKGgobltcImRhdGEtZGVsYXlcIl0sdGhpcy5kZWxheVVuaXQpfHwwKSxpLmR1cmF0aW9uPWgobltcImRhdGEtZHVyYXRpb25cIl0sdGhpcy5kdXJhdGlvbikscz12b2lkIDAhPT1uW1wiZGF0YS1hc3luY1wiXT9pLnN0YXJ0QXQ6aS5zdGFydEF0K2kuZHVyYXRpb24sdGhpcy5mcmFtZUxlbmd0aD1NYXRoLm1heCh0aGlzLmZyYW1lTGVuZ3RoLGkuc3RhcnRBdCtpLmR1cmF0aW9uKTticmVhaztjYXNlXCJzY2VuYXJpb1wiOnI9aS5lbCxuPXRoaXMucGFyc2VBdHRyKHIpLGkuc3RhcnRBdD1oKG5bXCJkYXRhLXN0YXJ0XCJdLHRoaXMuZGVsYXlVbml0KXx8MCxpLmR1cmF0aW9uPWgobltcImRhdGEtZHVyYXRpb25cIl0sdGhpcy5kdXJhdGlvbiksdGhpcy5mcmFtZUxlbmd0aD1NYXRoLm1heCh0aGlzLmZyYW1lTGVuZ3RoLGkuc3RhcnRBdCtpLmR1cmF0aW9uKX1vKz1pLmxlbmd0aCx0aGlzLmZyYW1lTGVuZ3RoPXRoaXMuZnJhbWVMZW5ndGh8fHRoaXMuZHVyYXRpb259fSxpLnByb3RvdHlwZS5kcmF3ZXI9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2lmKHRoaXMuY3VycmVudEZyYW1lKz10aGlzLnNwZWVkLHRoaXMuY3VycmVudEZyYW1lPD0wKXRoaXMuc3RvcCgpLHRoaXMucmVzZXQoKTtlbHNle2lmKCEodGhpcy5jdXJyZW50RnJhbWU+PXRoaXMuZnJhbWVMZW5ndGgpKXJldHVybiB0aGlzLnRyYWNlKCksdm9pZCh0aGlzLmhhbmRsZT1lKGZ1bmN0aW9uKCl7dC5kcmF3ZXIoKX0pKTt0aGlzLnN0b3AoKSx0aGlzLmN1cnJlbnRGcmFtZT10aGlzLmZyYW1lTGVuZ3RoLHRoaXMudHJhY2UoKSx0aGlzLnNlbGZEZXN0cm95JiZ0aGlzLmRlc3Ryb3koKX10aGlzLmNhbGxiYWNrKHRoaXMpLHRoaXMuaW5zdGFuY2VDYWxsYmFjayYmKHRoaXMuaW5zdGFuY2VDYWxsYmFjayh0aGlzKSx0aGlzLmluc3RhbmNlQ2FsbGJhY2s9bnVsbCl9LGkucHJvdG90eXBlLnRyYWNlPWZ1bmN0aW9uKCl7dmFyIHQsZSxyLG47Zm9yKG49dGhpcy5hbmltVGltaW5nRnVuY3Rpb24odGhpcy5jdXJyZW50RnJhbWUvdGhpcy5mcmFtZUxlbmd0aCkqdGhpcy5mcmFtZUxlbmd0aCx0PTA7dDx0aGlzLm1hcC5sZW5ndGg7dCsrKWU9KG4tKHI9dGhpcy5tYXBbdF0pLnN0YXJ0QXQpL3IuZHVyYXRpb24sZT10aGlzLnBhdGhUaW1pbmdGdW5jdGlvbihNYXRoLm1heCgwLE1hdGgubWluKDEsZSkpKSxyLnByb2dyZXNzIT09ZSYmKHIucHJvZ3Jlc3M9ZSxyLmVsLnN0eWxlLnN0cm9rZURhc2hvZmZzZXQ9TWF0aC5mbG9vcihyLmxlbmd0aCooMS1lKSksdGhpcy5yZW5kZXJQYXRoKHQpKX0saS5wcm90b3R5cGUucmVuZGVyUGF0aD1mdW5jdGlvbih0KXtpZih0aGlzLmZvcmNlUmVuZGVyJiZ0aGlzLm1hcCYmdGhpcy5tYXBbdF0pe3ZhciBlPXRoaXMubWFwW3RdLHI9ZS5lbC5jbG9uZU5vZGUoITApO2UuZWwucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQocixlLmVsKSxlLmVsPXJ9fSxpLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dGhpcy5mcmFtZUxlbmd0aD0wLHRoaXMuY3VycmVudEZyYW1lPTAsdGhpcy5tYXA9W10sbmV3IHIodGhpcy5lbCksdGhpcy5tYXBwaW5nKCksdGhpcy5zdGFydGVyKCksdGhpcy5vblJlYWR5JiZ0aGlzLm9uUmVhZHkodGhpcyl9LGkucHJvdG90eXBlLnN0YXJ0ZXI9ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5zdGFydCl7Y2FzZVwibWFudWFsXCI6cmV0dXJuO2Nhc2VcImF1dG9zdGFydFwiOnRoaXMucGxheSgpO2JyZWFrO2Nhc2VcImluVmlld3BvcnRcIjp2YXIgdD10aGlzLGU9ZnVuY3Rpb24oKXt0LmlzSW5WaWV3cG9ydCh0LnBhcmVudEVsLDEpJiYodC5wbGF5KCksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIixlKSl9O3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsZSksZSgpfX0saS5wcm90b3R5cGUuZ2V0U3RhdHVzPWZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLmN1cnJlbnRGcmFtZT9cInN0YXJ0XCI6dGhpcy5jdXJyZW50RnJhbWU9PT10aGlzLmZyYW1lTGVuZ3RoP1wiZW5kXCI6XCJwcm9ncmVzc1wifSxpLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNldEZyYW1lUHJvZ3Jlc3MoMCl9LGkucHJvdG90eXBlLmZpbmlzaD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNldEZyYW1lUHJvZ3Jlc3MoMSl9LGkucHJvdG90eXBlLnNldEZyYW1lUHJvZ3Jlc3M9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9TWF0aC5taW4oMSxNYXRoLm1heCgwLHQpKSx0aGlzLmN1cnJlbnRGcmFtZT1NYXRoLnJvdW5kKHRoaXMuZnJhbWVMZW5ndGgqdCksdGhpcy50cmFjZSgpLHRoaXN9LGkucHJvdG90eXBlLnBsYXk9ZnVuY3Rpb24odCxlKXtpZih0aGlzLmluc3RhbmNlQ2FsbGJhY2s9bnVsbCx0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0KXRoaXMuaW5zdGFuY2VDYWxsYmFjaz10LHQ9bnVsbDtlbHNlIGlmKHQmJlwibnVtYmVyXCIhPXR5cGVvZiB0KXRocm93IG5ldyBFcnJvcihcIlZpdnVzIFtwbGF5XTogaW52YWxpZCBzcGVlZFwiKTtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgZSYmIXRoaXMuaW5zdGFuY2VDYWxsYmFjayYmKHRoaXMuaW5zdGFuY2VDYWxsYmFjaz1lKSx0aGlzLnNwZWVkPXR8fDEsdGhpcy5oYW5kbGV8fHRoaXMuZHJhd2VyKCksdGhpc30saS5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhhbmRsZSYmKHQodGhpcy5oYW5kbGUpLHRoaXMuaGFuZGxlPW51bGwpLHRoaXN9LGkucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt2YXIgdCxlO2Zvcih0aGlzLnN0b3AoKSx0PTA7dDx0aGlzLm1hcC5sZW5ndGg7dCsrKShlPXRoaXMubWFwW3RdKS5lbC5zdHlsZS5zdHJva2VEYXNob2Zmc2V0PW51bGwsZS5lbC5zdHlsZS5zdHJva2VEYXNoYXJyYXk9bnVsbCx0aGlzLnJlbmRlclBhdGgodCl9LGkucHJvdG90eXBlLmlzSW52aXNpYmxlPWZ1bmN0aW9uKHQpe3ZhciBlLHI9dC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWlnbm9yZVwiKTtyZXR1cm4gbnVsbCE9PXI/XCJmYWxzZVwiIT09cjohIXRoaXMuaWdub3JlSW52aXNpYmxlJiYoIShlPXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpLndpZHRoJiYhZS5oZWlnaHQpfSxpLnByb3RvdHlwZS5wYXJzZUF0dHI9ZnVuY3Rpb24odCl7dmFyIGUscj17fTtpZih0JiZ0LmF0dHJpYnV0ZXMpZm9yKHZhciBuPTA7bjx0LmF0dHJpYnV0ZXMubGVuZ3RoO24rKylyWyhlPXQuYXR0cmlidXRlc1tuXSkubmFtZV09ZS52YWx1ZTtyZXR1cm4gcn0saS5wcm90b3R5cGUuaXNJblZpZXdwb3J0PWZ1bmN0aW9uKHQsZSl7dmFyIHI9dGhpcy5zY3JvbGxZKCksbj1yK3RoaXMuZ2V0Vmlld3BvcnRIKCksaT10LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGE9aS5oZWlnaHQsbz1yK2kudG9wO3JldHVybiBvK2EqKGU9ZXx8MCk8PW4mJnI8PW8rYX0saS5wcm90b3R5cGUuZ2V0Vmlld3BvcnRIPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5kb2NFbGVtLmNsaWVudEhlaWdodCxlPXdpbmRvdy5pbm5lckhlaWdodDtyZXR1cm4gdDxlP2U6dH0saS5wcm90b3R5cGUuc2Nyb2xsWT1mdW5jdGlvbigpe3JldHVybiB3aW5kb3cucGFnZVlPZmZzZXR8fHRoaXMuZG9jRWxlbS5zY3JvbGxUb3B9LG49ZnVuY3Rpb24oKXtpLnByb3RvdHlwZS5kb2NFbGVtfHwoaS5wcm90b3R5cGUuZG9jRWxlbT13aW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LGU9d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZXx8d2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZXx8d2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZXx8d2luZG93Lm9SZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5tc1JlcXVlc3RBbmltYXRpb25GcmFtZXx8ZnVuY3Rpb24odCl7cmV0dXJuIHdpbmRvdy5zZXRUaW1lb3V0KHQsMWUzLzYwKX0sdD13aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWV8fHdpbmRvdy53ZWJraXRDYW5jZWxBbmltYXRpb25GcmFtZXx8d2luZG93Lm1vekNhbmNlbEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cub0NhbmNlbEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cubXNDYW5jZWxBbmltYXRpb25GcmFtZXx8ZnVuY3Rpb24odCl7cmV0dXJuIHdpbmRvdy5jbGVhclRpbWVvdXQodCl9KX0saD1mdW5jdGlvbih0LGUpe3ZhciByPXBhcnNlSW50KHQsMTApO3JldHVybiAwPD1yP3I6ZX0sXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXSxmdW5jdGlvbigpe3JldHVybiBpfSk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9aTp3aW5kb3cuVml2dXM9aX0oKTsiLCIvKiEgV09XIC0gdjEuMS4zIC0gMjAxNi0wNS0wNlxyXG4qIENvcHlyaWdodCAoYykgMjAxNiBNYXR0aGlldSBBdXNzYWd1ZWw7Ki8oZnVuY3Rpb24oKXt2YXIgYSxiLGMsZCxlLGY9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseShiLGFyZ3VtZW50cyl9fSxnPVtdLmluZGV4T2Z8fGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9dGhpcy5sZW5ndGg7Yz5iO2IrKylpZihiIGluIHRoaXMmJnRoaXNbYl09PT1hKXJldHVybiBiO3JldHVybi0xfTtiPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe31yZXR1cm4gYS5wcm90b3R5cGUuZXh0ZW5kPWZ1bmN0aW9uKGEsYil7dmFyIGMsZDtmb3IoYyBpbiBiKWQ9YltjXSxudWxsPT1hW2NdJiYoYVtjXT1kKTtyZXR1cm4gYX0sYS5wcm90b3R5cGUuaXNNb2JpbGU9ZnVuY3Rpb24oYSl7cmV0dXJuL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KGEpfSxhLnByb3RvdHlwZS5jcmVhdGVFdmVudD1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZTtyZXR1cm4gbnVsbD09YiYmKGI9ITEpLG51bGw9PWMmJihjPSExKSxudWxsPT1kJiYoZD1udWxsKSxudWxsIT1kb2N1bWVudC5jcmVhdGVFdmVudD8oZT1kb2N1bWVudC5jcmVhdGVFdmVudChcIkN1c3RvbUV2ZW50XCIpLGUuaW5pdEN1c3RvbUV2ZW50KGEsYixjLGQpKTpudWxsIT1kb2N1bWVudC5jcmVhdGVFdmVudE9iamVjdD8oZT1kb2N1bWVudC5jcmVhdGVFdmVudE9iamVjdCgpLGUuZXZlbnRUeXBlPWEpOmUuZXZlbnROYW1lPWEsZX0sYS5wcm90b3R5cGUuZW1pdEV2ZW50PWZ1bmN0aW9uKGEsYil7cmV0dXJuIG51bGwhPWEuZGlzcGF0Y2hFdmVudD9hLmRpc3BhdGNoRXZlbnQoYik6YiBpbihudWxsIT1hKT9hW2JdKCk6XCJvblwiK2IgaW4obnVsbCE9YSk/YVtcIm9uXCIrYl0oKTp2b2lkIDB9LGEucHJvdG90eXBlLmFkZEV2ZW50PWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbnVsbCE9YS5hZGRFdmVudExpc3RlbmVyP2EuYWRkRXZlbnRMaXN0ZW5lcihiLGMsITEpOm51bGwhPWEuYXR0YWNoRXZlbnQ/YS5hdHRhY2hFdmVudChcIm9uXCIrYixjKTphW2JdPWN9LGEucHJvdG90eXBlLnJlbW92ZUV2ZW50PWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbnVsbCE9YS5yZW1vdmVFdmVudExpc3RlbmVyP2EucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGMsITEpOm51bGwhPWEuZGV0YWNoRXZlbnQ/YS5kZXRhY2hFdmVudChcIm9uXCIrYixjKTpkZWxldGUgYVtiXX0sYS5wcm90b3R5cGUuaW5uZXJIZWlnaHQ9ZnVuY3Rpb24oKXtyZXR1cm5cImlubmVySGVpZ2h0XCJpbiB3aW5kb3c/d2luZG93LmlubmVySGVpZ2h0OmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHR9LGF9KCksYz10aGlzLldlYWtNYXB8fHRoaXMuTW96V2Vha01hcHx8KGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7dGhpcy5rZXlzPVtdLHRoaXMudmFsdWVzPVtdfXJldHVybiBhLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZjtmb3IoZj10aGlzLmtleXMsYj1kPTAsZT1mLmxlbmd0aDtlPmQ7Yj0rK2QpaWYoYz1mW2JdLGM9PT1hKXJldHVybiB0aGlzLnZhbHVlc1tiXX0sYS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGYsZztmb3IoZz10aGlzLmtleXMsYz1lPTAsZj1nLmxlbmd0aDtmPmU7Yz0rK2UpaWYoZD1nW2NdLGQ9PT1hKXJldHVybiB2b2lkKHRoaXMudmFsdWVzW2NdPWIpO3JldHVybiB0aGlzLmtleXMucHVzaChhKSx0aGlzLnZhbHVlcy5wdXNoKGIpfSxhfSgpKSxhPXRoaXMuTXV0YXRpb25PYnNlcnZlcnx8dGhpcy5XZWJraXRNdXRhdGlvbk9ic2VydmVyfHx0aGlzLk1vek11dGF0aW9uT2JzZXJ2ZXJ8fChhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe1widW5kZWZpbmVkXCIhPXR5cGVvZiBjb25zb2xlJiZudWxsIT09Y29uc29sZSYmY29uc29sZS53YXJuKFwiTXV0YXRpb25PYnNlcnZlciBpcyBub3Qgc3VwcG9ydGVkIGJ5IHlvdXIgYnJvd3Nlci5cIiksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGNvbnNvbGUmJm51bGwhPT1jb25zb2xlJiZjb25zb2xlLndhcm4oXCJXT1cuanMgY2Fubm90IGRldGVjdCBkb20gbXV0YXRpb25zLCBwbGVhc2UgY2FsbCAuc3luYygpIGFmdGVyIGxvYWRpbmcgbmV3IGNvbnRlbnQuXCIpfXJldHVybiBhLm5vdFN1cHBvcnRlZD0hMCxhLnByb3RvdHlwZS5vYnNlcnZlPWZ1bmN0aW9uKCl7fSxhfSgpKSxkPXRoaXMuZ2V0Q29tcHV0ZWRTdHlsZXx8ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5nZXRQcm9wZXJ0eVZhbHVlPWZ1bmN0aW9uKGIpe3ZhciBjO3JldHVyblwiZmxvYXRcIj09PWImJihiPVwic3R5bGVGbG9hdFwiKSxlLnRlc3QoYikmJmIucmVwbGFjZShlLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudG9VcHBlckNhc2UoKX0pLChudWxsIT0oYz1hLmN1cnJlbnRTdHlsZSk/Y1tiXTp2b2lkIDApfHxudWxsfSx0aGlzfSxlPS8oXFwtKFthLXpdKXsxfSkvZyx0aGlzLldPVz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoYSl7bnVsbD09YSYmKGE9e30pLHRoaXMuc2Nyb2xsQ2FsbGJhY2s9Zih0aGlzLnNjcm9sbENhbGxiYWNrLHRoaXMpLHRoaXMuc2Nyb2xsSGFuZGxlcj1mKHRoaXMuc2Nyb2xsSGFuZGxlcix0aGlzKSx0aGlzLnJlc2V0QW5pbWF0aW9uPWYodGhpcy5yZXNldEFuaW1hdGlvbix0aGlzKSx0aGlzLnN0YXJ0PWYodGhpcy5zdGFydCx0aGlzKSx0aGlzLnNjcm9sbGVkPSEwLHRoaXMuY29uZmlnPXRoaXMudXRpbCgpLmV4dGVuZChhLHRoaXMuZGVmYXVsdHMpLG51bGwhPWEuc2Nyb2xsQ29udGFpbmVyJiYodGhpcy5jb25maWcuc2Nyb2xsQ29udGFpbmVyPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYS5zY3JvbGxDb250YWluZXIpKSx0aGlzLmFuaW1hdGlvbk5hbWVDYWNoZT1uZXcgYyx0aGlzLndvd0V2ZW50PXRoaXMudXRpbCgpLmNyZWF0ZUV2ZW50KHRoaXMuY29uZmlnLmJveENsYXNzKX1yZXR1cm4gZS5wcm90b3R5cGUuZGVmYXVsdHM9e2JveENsYXNzOlwid293XCIsYW5pbWF0ZUNsYXNzOlwiYW5pbWF0ZWRcIixvZmZzZXQ6MCxtb2JpbGU6ITAsbGl2ZTohMCxjYWxsYmFjazpudWxsLHNjcm9sbENvbnRhaW5lcjpudWxsfSxlLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIGE7cmV0dXJuIHRoaXMuZWxlbWVudD13aW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LFwiaW50ZXJhY3RpdmVcIj09PShhPWRvY3VtZW50LnJlYWR5U3RhdGUpfHxcImNvbXBsZXRlXCI9PT1hP3RoaXMuc3RhcnQoKTp0aGlzLnV0aWwoKS5hZGRFdmVudChkb2N1bWVudCxcIkRPTUNvbnRlbnRMb2FkZWRcIix0aGlzLnN0YXJ0KSx0aGlzLmZpbmlzaGVkPVtdfSxlLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3ZhciBiLGMsZCxlO2lmKHRoaXMuc3RvcHBlZD0hMSx0aGlzLmJveGVzPWZ1bmN0aW9uKCl7dmFyIGEsYyxkLGU7Zm9yKGQ9dGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuXCIrdGhpcy5jb25maWcuYm94Q2xhc3MpLGU9W10sYT0wLGM9ZC5sZW5ndGg7Yz5hO2ErKyliPWRbYV0sZS5wdXNoKGIpO3JldHVybiBlfS5jYWxsKHRoaXMpLHRoaXMuYWxsPWZ1bmN0aW9uKCl7dmFyIGEsYyxkLGU7Zm9yKGQ9dGhpcy5ib3hlcyxlPVtdLGE9MCxjPWQubGVuZ3RoO2M+YTthKyspYj1kW2FdLGUucHVzaChiKTtyZXR1cm4gZX0uY2FsbCh0aGlzKSx0aGlzLmJveGVzLmxlbmd0aClpZih0aGlzLmRpc2FibGVkKCkpdGhpcy5yZXNldFN0eWxlKCk7ZWxzZSBmb3IoZT10aGlzLmJveGVzLGM9MCxkPWUubGVuZ3RoO2Q+YztjKyspYj1lW2NdLHRoaXMuYXBwbHlTdHlsZShiLCEwKTtyZXR1cm4gdGhpcy5kaXNhYmxlZCgpfHwodGhpcy51dGlsKCkuYWRkRXZlbnQodGhpcy5jb25maWcuc2Nyb2xsQ29udGFpbmVyfHx3aW5kb3csXCJzY3JvbGxcIix0aGlzLnNjcm9sbEhhbmRsZXIpLHRoaXMudXRpbCgpLmFkZEV2ZW50KHdpbmRvdyxcInJlc2l6ZVwiLHRoaXMuc2Nyb2xsSGFuZGxlciksdGhpcy5pbnRlcnZhbD1zZXRJbnRlcnZhbCh0aGlzLnNjcm9sbENhbGxiYWNrLDUwKSksdGhpcy5jb25maWcubGl2ZT9uZXcgYShmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGMsZCxlLGYsZztmb3IoZz1bXSxjPTAsZD1iLmxlbmd0aDtkPmM7YysrKWY9YltjXSxnLnB1c2goZnVuY3Rpb24oKXt2YXIgYSxiLGMsZDtmb3IoYz1mLmFkZGVkTm9kZXN8fFtdLGQ9W10sYT0wLGI9Yy5sZW5ndGg7Yj5hO2ErKyllPWNbYV0sZC5wdXNoKHRoaXMuZG9TeW5jKGUpKTtyZXR1cm4gZH0uY2FsbChhKSk7cmV0dXJuIGd9fSh0aGlzKSkub2JzZXJ2ZShkb2N1bWVudC5ib2R5LHtjaGlsZExpc3Q6ITAsc3VidHJlZTohMH0pOnZvaWQgMH0sZS5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN0b3BwZWQ9ITAsdGhpcy51dGlsKCkucmVtb3ZlRXZlbnQodGhpcy5jb25maWcuc2Nyb2xsQ29udGFpbmVyfHx3aW5kb3csXCJzY3JvbGxcIix0aGlzLnNjcm9sbEhhbmRsZXIpLHRoaXMudXRpbCgpLnJlbW92ZUV2ZW50KHdpbmRvdyxcInJlc2l6ZVwiLHRoaXMuc2Nyb2xsSGFuZGxlciksbnVsbCE9dGhpcy5pbnRlcnZhbD9jbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpOnZvaWQgMH0sZS5wcm90b3R5cGUuc3luYz1mdW5jdGlvbihiKXtyZXR1cm4gYS5ub3RTdXBwb3J0ZWQ/dGhpcy5kb1N5bmModGhpcy5lbGVtZW50KTp2b2lkIDB9LGUucHJvdG90eXBlLmRvU3luYz1mdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmO2lmKG51bGw9PWEmJihhPXRoaXMuZWxlbWVudCksMT09PWEubm9kZVR5cGUpe2ZvcihhPWEucGFyZW50Tm9kZXx8YSxlPWEucXVlcnlTZWxlY3RvckFsbChcIi5cIit0aGlzLmNvbmZpZy5ib3hDbGFzcyksZj1bXSxjPTAsZD1lLmxlbmd0aDtkPmM7YysrKWI9ZVtjXSxnLmNhbGwodGhpcy5hbGwsYik8MD8odGhpcy5ib3hlcy5wdXNoKGIpLHRoaXMuYWxsLnB1c2goYiksdGhpcy5zdG9wcGVkfHx0aGlzLmRpc2FibGVkKCk/dGhpcy5yZXNldFN0eWxlKCk6dGhpcy5hcHBseVN0eWxlKGIsITApLGYucHVzaCh0aGlzLnNjcm9sbGVkPSEwKSk6Zi5wdXNoKHZvaWQgMCk7cmV0dXJuIGZ9fSxlLnByb3RvdHlwZS5zaG93PWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmFwcGx5U3R5bGUoYSksYS5jbGFzc05hbWU9YS5jbGFzc05hbWUrXCIgXCIrdGhpcy5jb25maWcuYW5pbWF0ZUNsYXNzLG51bGwhPXRoaXMuY29uZmlnLmNhbGxiYWNrJiZ0aGlzLmNvbmZpZy5jYWxsYmFjayhhKSx0aGlzLnV0aWwoKS5lbWl0RXZlbnQoYSx0aGlzLndvd0V2ZW50KSx0aGlzLnV0aWwoKS5hZGRFdmVudChhLFwiYW5pbWF0aW9uZW5kXCIsdGhpcy5yZXNldEFuaW1hdGlvbiksdGhpcy51dGlsKCkuYWRkRXZlbnQoYSxcIm9hbmltYXRpb25lbmRcIix0aGlzLnJlc2V0QW5pbWF0aW9uKSx0aGlzLnV0aWwoKS5hZGRFdmVudChhLFwid2Via2l0QW5pbWF0aW9uRW5kXCIsdGhpcy5yZXNldEFuaW1hdGlvbiksdGhpcy51dGlsKCkuYWRkRXZlbnQoYSxcIk1TQW5pbWF0aW9uRW5kXCIsdGhpcy5yZXNldEFuaW1hdGlvbiksYX0sZS5wcm90b3R5cGUuYXBwbHlTdHlsZT1mdW5jdGlvbihhLGIpe3ZhciBjLGQsZTtyZXR1cm4gZD1hLmdldEF0dHJpYnV0ZShcImRhdGEtd293LWR1cmF0aW9uXCIpLGM9YS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXdvdy1kZWxheVwiKSxlPWEuZ2V0QXR0cmlidXRlKFwiZGF0YS13b3ctaXRlcmF0aW9uXCIpLHRoaXMuYW5pbWF0ZShmdW5jdGlvbihmKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZi5jdXN0b21TdHlsZShhLGIsZCxjLGUpfX0odGhpcykpfSxlLnByb3RvdHlwZS5hbmltYXRlPWZ1bmN0aW9uKCl7cmV0dXJuXCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWVcImluIHdpbmRvdz9mdW5jdGlvbihhKXtyZXR1cm4gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShhKX06ZnVuY3Rpb24oYSl7cmV0dXJuIGEoKX19KCksZS5wcm90b3R5cGUucmVzZXRTdHlsZT1mdW5jdGlvbigpe3ZhciBhLGIsYyxkLGU7Zm9yKGQ9dGhpcy5ib3hlcyxlPVtdLGI9MCxjPWQubGVuZ3RoO2M+YjtiKyspYT1kW2JdLGUucHVzaChhLnN0eWxlLnZpc2liaWxpdHk9XCJ2aXNpYmxlXCIpO3JldHVybiBlfSxlLnByb3RvdHlwZS5yZXNldEFuaW1hdGlvbj1mdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4gYS50eXBlLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcImFuaW1hdGlvbmVuZFwiKT49MD8oYj1hLnRhcmdldHx8YS5zcmNFbGVtZW50LGIuY2xhc3NOYW1lPWIuY2xhc3NOYW1lLnJlcGxhY2UodGhpcy5jb25maWcuYW5pbWF0ZUNsYXNzLFwiXCIpLnRyaW0oKSk6dm9pZCAwfSxlLnByb3RvdHlwZS5jdXN0b21TdHlsZT1mdW5jdGlvbihhLGIsYyxkLGUpe3JldHVybiBiJiZ0aGlzLmNhY2hlQW5pbWF0aW9uTmFtZShhKSxhLnN0eWxlLnZpc2liaWxpdHk9Yj9cImhpZGRlblwiOlwidmlzaWJsZVwiLGMmJnRoaXMudmVuZG9yU2V0KGEuc3R5bGUse2FuaW1hdGlvbkR1cmF0aW9uOmN9KSxkJiZ0aGlzLnZlbmRvclNldChhLnN0eWxlLHthbmltYXRpb25EZWxheTpkfSksZSYmdGhpcy52ZW5kb3JTZXQoYS5zdHlsZSx7YW5pbWF0aW9uSXRlcmF0aW9uQ291bnQ6ZX0pLHRoaXMudmVuZG9yU2V0KGEuc3R5bGUse2FuaW1hdGlvbk5hbWU6Yj9cIm5vbmVcIjp0aGlzLmNhY2hlZEFuaW1hdGlvbk5hbWUoYSl9KSxhfSxlLnByb3RvdHlwZS52ZW5kb3JzPVtcIm1velwiLFwid2Via2l0XCJdLGUucHJvdG90eXBlLnZlbmRvclNldD1mdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmO2Q9W107Zm9yKGMgaW4gYillPWJbY10sYVtcIlwiK2NdPWUsZC5wdXNoKGZ1bmN0aW9uKCl7dmFyIGIsZCxnLGg7Zm9yKGc9dGhpcy52ZW5kb3JzLGg9W10sYj0wLGQ9Zy5sZW5ndGg7ZD5iO2IrKylmPWdbYl0saC5wdXNoKGFbXCJcIitmK2MuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrYy5zdWJzdHIoMSldPWUpO3JldHVybiBofS5jYWxsKHRoaXMpKTtyZXR1cm4gZH0sZS5wcm90b3R5cGUudmVuZG9yQ1NTPWZ1bmN0aW9uKGEsYil7dmFyIGMsZSxmLGcsaCxpO2ZvcihoPWQoYSksZz1oLmdldFByb3BlcnR5Q1NTVmFsdWUoYiksZj10aGlzLnZlbmRvcnMsYz0wLGU9Zi5sZW5ndGg7ZT5jO2MrKylpPWZbY10sZz1nfHxoLmdldFByb3BlcnR5Q1NTVmFsdWUoXCItXCIraStcIi1cIitiKTtyZXR1cm4gZ30sZS5wcm90b3R5cGUuYW5pbWF0aW9uTmFtZT1mdW5jdGlvbihhKXt2YXIgYjt0cnl7Yj10aGlzLnZlbmRvckNTUyhhLFwiYW5pbWF0aW9uLW5hbWVcIikuY3NzVGV4dH1jYXRjaChjKXtiPWQoYSkuZ2V0UHJvcGVydHlWYWx1ZShcImFuaW1hdGlvbi1uYW1lXCIpfXJldHVyblwibm9uZVwiPT09Yj9cIlwiOmJ9LGUucHJvdG90eXBlLmNhY2hlQW5pbWF0aW9uTmFtZT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hbmltYXRpb25OYW1lQ2FjaGUuc2V0KGEsdGhpcy5hbmltYXRpb25OYW1lKGEpKX0sZS5wcm90b3R5cGUuY2FjaGVkQW5pbWF0aW9uTmFtZT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hbmltYXRpb25OYW1lQ2FjaGUuZ2V0KGEpfSxlLnByb3RvdHlwZS5zY3JvbGxIYW5kbGVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2Nyb2xsZWQ9ITB9LGUucHJvdG90eXBlLnNjcm9sbENhbGxiYWNrPWZ1bmN0aW9uKCl7dmFyIGE7cmV0dXJuIXRoaXMuc2Nyb2xsZWR8fCh0aGlzLnNjcm9sbGVkPSExLHRoaXMuYm94ZXM9ZnVuY3Rpb24oKXt2YXIgYixjLGQsZTtmb3IoZD10aGlzLmJveGVzLGU9W10sYj0wLGM9ZC5sZW5ndGg7Yz5iO2IrKylhPWRbYl0sYSYmKHRoaXMuaXNWaXNpYmxlKGEpP3RoaXMuc2hvdyhhKTplLnB1c2goYSkpO3JldHVybiBlfS5jYWxsKHRoaXMpLHRoaXMuYm94ZXMubGVuZ3RofHx0aGlzLmNvbmZpZy5saXZlKT92b2lkIDA6dGhpcy5zdG9wKCl9LGUucHJvdG90eXBlLm9mZnNldFRvcD1mdW5jdGlvbihhKXtmb3IodmFyIGI7dm9pZCAwPT09YS5vZmZzZXRUb3A7KWE9YS5wYXJlbnROb2RlO2ZvcihiPWEub2Zmc2V0VG9wO2E9YS5vZmZzZXRQYXJlbnQ7KWIrPWEub2Zmc2V0VG9wO3JldHVybiBifSxlLnByb3RvdHlwZS5pc1Zpc2libGU9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZjtyZXR1cm4gYz1hLmdldEF0dHJpYnV0ZShcImRhdGEtd293LW9mZnNldFwiKXx8dGhpcy5jb25maWcub2Zmc2V0LGY9dGhpcy5jb25maWcuc2Nyb2xsQ29udGFpbmVyJiZ0aGlzLmNvbmZpZy5zY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wfHx3aW5kb3cucGFnZVlPZmZzZXQsZT1mK01hdGgubWluKHRoaXMuZWxlbWVudC5jbGllbnRIZWlnaHQsdGhpcy51dGlsKCkuaW5uZXJIZWlnaHQoKSktYyxkPXRoaXMub2Zmc2V0VG9wKGEpLGI9ZCthLmNsaWVudEhlaWdodCxlPj1kJiZiPj1mfSxlLnByb3RvdHlwZS51dGlsPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPXRoaXMuX3V0aWw/dGhpcy5fdXRpbDp0aGlzLl91dGlsPW5ldyBifSxlLnByb3RvdHlwZS5kaXNhYmxlZD1mdW5jdGlvbigpe3JldHVybiF0aGlzLmNvbmZpZy5tb2JpbGUmJnRoaXMudXRpbCgpLmlzTW9iaWxlKG5hdmlnYXRvci51c2VyQWdlbnQpfSxlfSgpfSkuY2FsbCh0aGlzKTsiLCIvKipcclxuICogYnhTbGlkZXIgdjQuMi4xMlxyXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1IFN0ZXZlbiBXYW5kZXJza2lcclxuICogV3JpdHRlbiB3aGlsZSBkcmlua2luZyBCZWxnaWFuIGFsZXMgYW5kIGxpc3RlbmluZyB0byBqYXp6XHJcbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVClcclxuICovXHJcbiFmdW5jdGlvbih0KXt2YXIgZT17bW9kZTpcImhvcml6b250YWxcIixzbGlkZVNlbGVjdG9yOlwiXCIsaW5maW5pdGVMb29wOiEwLGhpZGVDb250cm9sT25FbmQ6ITEsc3BlZWQ6NTAwLGVhc2luZzpudWxsLHNsaWRlTWFyZ2luOjAsc3RhcnRTbGlkZTowLHJhbmRvbVN0YXJ0OiExLGNhcHRpb25zOiExLHRpY2tlcjohMSx0aWNrZXJIb3ZlcjohMSxhZGFwdGl2ZUhlaWdodDohMSxhZGFwdGl2ZUhlaWdodFNwZWVkOjUwMCx2aWRlbzohMSx1c2VDU1M6ITAscHJlbG9hZEltYWdlczpcInZpc2libGVcIixyZXNwb25zaXZlOiEwLHNsaWRlWkluZGV4OjUwLHdyYXBwZXJDbGFzczpcImJ4LXdyYXBwZXJcIix0b3VjaEVuYWJsZWQ6ITAsc3dpcGVUaHJlc2hvbGQ6NTAsb25lVG9PbmVUb3VjaDohMCxwcmV2ZW50RGVmYXVsdFN3aXBlWDohMCxwcmV2ZW50RGVmYXVsdFN3aXBlWTohMSxhcmlhTGl2ZTohMCxhcmlhSGlkZGVuOiEwLGtleWJvYXJkRW5hYmxlZDohMSxwYWdlcjohMCxwYWdlclR5cGU6XCJmdWxsXCIscGFnZXJTaG9ydFNlcGFyYXRvcjpcIiAvIFwiLHBhZ2VyU2VsZWN0b3I6bnVsbCxidWlsZFBhZ2VyOm51bGwscGFnZXJDdXN0b206bnVsbCxjb250cm9sczohMCxuZXh0VGV4dDpcIk5leHRcIixwcmV2VGV4dDpcIlByZXZcIixuZXh0U2VsZWN0b3I6bnVsbCxwcmV2U2VsZWN0b3I6bnVsbCxhdXRvQ29udHJvbHM6ITEsc3RhcnRUZXh0OlwiU3RhcnRcIixzdG9wVGV4dDpcIlN0b3BcIixhdXRvQ29udHJvbHNDb21iaW5lOiExLGF1dG9Db250cm9sc1NlbGVjdG9yOm51bGwsYXV0bzohMSxwYXVzZTo0ZTMsYXV0b1N0YXJ0OiEwLGF1dG9EaXJlY3Rpb246XCJuZXh0XCIsc3RvcEF1dG9PbkNsaWNrOiExLGF1dG9Ib3ZlcjohMSxhdXRvRGVsYXk6MCxhdXRvU2xpZGVGb3JPbmVQYWdlOiExLG1pblNsaWRlczoxLG1heFNsaWRlczoxLG1vdmVTbGlkZXM6MCxzbGlkZVdpZHRoOjAsc2hyaW5rSXRlbXM6ITEsb25TbGlkZXJMb2FkOmZ1bmN0aW9uKCl7cmV0dXJuITB9LG9uU2xpZGVCZWZvcmU6ZnVuY3Rpb24oKXtyZXR1cm4hMH0sb25TbGlkZUFmdGVyOmZ1bmN0aW9uKCl7cmV0dXJuITB9LG9uU2xpZGVOZXh0OmZ1bmN0aW9uKCl7cmV0dXJuITB9LG9uU2xpZGVQcmV2OmZ1bmN0aW9uKCl7cmV0dXJuITB9LG9uU2xpZGVyUmVzaXplOmZ1bmN0aW9uKCl7cmV0dXJuITB9fTt0LmZuLmJ4U2xpZGVyPWZ1bmN0aW9uKG4pe2lmKDA9PT10aGlzLmxlbmd0aClyZXR1cm4gdGhpcztpZih0aGlzLmxlbmd0aD4xKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt0KHRoaXMpLmJ4U2xpZGVyKG4pfSksdGhpczt2YXIgcz17fSxvPXRoaXMscj10KHdpbmRvdykud2lkdGgoKSxhPXQod2luZG93KS5oZWlnaHQoKTtpZighdChvKS5kYXRhKFwiYnhTbGlkZXJcIikpe3ZhciBsPWZ1bmN0aW9uKCl7dChvKS5kYXRhKFwiYnhTbGlkZXJcIil8fChzLnNldHRpbmdzPXQuZXh0ZW5kKHt9LGUsbikscy5zZXR0aW5ncy5zbGlkZVdpZHRoPXBhcnNlSW50KHMuc2V0dGluZ3Muc2xpZGVXaWR0aCkscy5jaGlsZHJlbj1vLmNoaWxkcmVuKHMuc2V0dGluZ3Muc2xpZGVTZWxlY3Rvcikscy5jaGlsZHJlbi5sZW5ndGg8cy5zZXR0aW5ncy5taW5TbGlkZXMmJihzLnNldHRpbmdzLm1pblNsaWRlcz1zLmNoaWxkcmVuLmxlbmd0aCkscy5jaGlsZHJlbi5sZW5ndGg8cy5zZXR0aW5ncy5tYXhTbGlkZXMmJihzLnNldHRpbmdzLm1heFNsaWRlcz1zLmNoaWxkcmVuLmxlbmd0aCkscy5zZXR0aW5ncy5yYW5kb21TdGFydCYmKHMuc2V0dGluZ3Muc3RhcnRTbGlkZT1NYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqcy5jaGlsZHJlbi5sZW5ndGgpKSxzLmFjdGl2ZT17aW5kZXg6cy5zZXR0aW5ncy5zdGFydFNsaWRlfSxzLmNhcm91c2VsPXMuc2V0dGluZ3MubWluU2xpZGVzPjF8fHMuc2V0dGluZ3MubWF4U2xpZGVzPjEscy5jYXJvdXNlbCYmKHMuc2V0dGluZ3MucHJlbG9hZEltYWdlcz1cImFsbFwiKSxzLm1pblRocmVzaG9sZD1zLnNldHRpbmdzLm1pblNsaWRlcypzLnNldHRpbmdzLnNsaWRlV2lkdGgrKHMuc2V0dGluZ3MubWluU2xpZGVzLTEpKnMuc2V0dGluZ3Muc2xpZGVNYXJnaW4scy5tYXhUaHJlc2hvbGQ9cy5zZXR0aW5ncy5tYXhTbGlkZXMqcy5zZXR0aW5ncy5zbGlkZVdpZHRoKyhzLnNldHRpbmdzLm1heFNsaWRlcy0xKSpzLnNldHRpbmdzLnNsaWRlTWFyZ2luLHMud29ya2luZz0hMSxzLmNvbnRyb2xzPXt9LHMuaW50ZXJ2YWw9bnVsbCxzLmFuaW1Qcm9wPVwidmVydGljYWxcIj09PXMuc2V0dGluZ3MubW9kZT9cInRvcFwiOlwibGVmdFwiLHMudXNpbmdDU1M9cy5zZXR0aW5ncy51c2VDU1MmJlwiZmFkZVwiIT09cy5zZXR0aW5ncy5tb2RlJiZmdW5jdGlvbigpe2Zvcih2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGU9W1wiV2Via2l0UGVyc3BlY3RpdmVcIixcIk1velBlcnNwZWN0aXZlXCIsXCJPUGVyc3BlY3RpdmVcIixcIm1zUGVyc3BlY3RpdmVcIl0saT0wO2k8ZS5sZW5ndGg7aSsrKWlmKHZvaWQgMCE9PXQuc3R5bGVbZVtpXV0pcmV0dXJuIHMuY3NzUHJlZml4PWVbaV0ucmVwbGFjZShcIlBlcnNwZWN0aXZlXCIsXCJcIikudG9Mb3dlckNhc2UoKSxzLmFuaW1Qcm9wPVwiLVwiK3MuY3NzUHJlZml4K1wiLXRyYW5zZm9ybVwiLCEwO3JldHVybiExfSgpLFwidmVydGljYWxcIj09PXMuc2V0dGluZ3MubW9kZSYmKHMuc2V0dGluZ3MubWF4U2xpZGVzPXMuc2V0dGluZ3MubWluU2xpZGVzKSxvLmRhdGEoXCJvcmlnU3R5bGVcIixvLmF0dHIoXCJzdHlsZVwiKSksby5jaGlsZHJlbihzLnNldHRpbmdzLnNsaWRlU2VsZWN0b3IpLmVhY2goZnVuY3Rpb24oKXt0KHRoaXMpLmRhdGEoXCJvcmlnU3R5bGVcIix0KHRoaXMpLmF0dHIoXCJzdHlsZVwiKSl9KSxkKCkpfSxkPWZ1bmN0aW9uKCl7dmFyIGU9cy5jaGlsZHJlbi5lcShzLnNldHRpbmdzLnN0YXJ0U2xpZGUpO28ud3JhcCgnPGRpdiBjbGFzcz1cIicrcy5zZXR0aW5ncy53cmFwcGVyQ2xhc3MrJ1wiPjxkaXYgY2xhc3M9XCJieC12aWV3cG9ydFwiPjwvZGl2PjwvZGl2PicpLHMudmlld3BvcnQ9by5wYXJlbnQoKSxzLnNldHRpbmdzLmFyaWFMaXZlJiYhcy5zZXR0aW5ncy50aWNrZXImJnMudmlld3BvcnQuYXR0cihcImFyaWEtbGl2ZVwiLFwicG9saXRlXCIpLHMubG9hZGVyPXQoJzxkaXYgY2xhc3M9XCJieC1sb2FkaW5nXCIgLz4nKSxzLnZpZXdwb3J0LnByZXBlbmQocy5sb2FkZXIpLG8uY3NzKHt3aWR0aDpcImhvcml6b250YWxcIj09PXMuc2V0dGluZ3MubW9kZT8xZTMqcy5jaGlsZHJlbi5sZW5ndGgrMjE1K1wiJVwiOlwiYXV0b1wiLHBvc2l0aW9uOlwicmVsYXRpdmVcIn0pLHMudXNpbmdDU1MmJnMuc2V0dGluZ3MuZWFzaW5nP28uY3NzKFwiLVwiK3MuY3NzUHJlZml4K1wiLXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uXCIscy5zZXR0aW5ncy5lYXNpbmcpOnMuc2V0dGluZ3MuZWFzaW5nfHwocy5zZXR0aW5ncy5lYXNpbmc9XCJzd2luZ1wiKSxzLnZpZXdwb3J0LmNzcyh7d2lkdGg6XCIxMDAlXCIsb3ZlcmZsb3c6XCJoaWRkZW5cIixwb3NpdGlvbjpcInJlbGF0aXZlXCJ9KSxzLnZpZXdwb3J0LnBhcmVudCgpLmNzcyh7bWF4V2lkdGg6dSgpfSkscy5jaGlsZHJlbi5jc3Moe2Zsb2F0OlwiaG9yaXpvbnRhbFwiPT09cy5zZXR0aW5ncy5tb2RlP1wibGVmdFwiOlwibm9uZVwiLGxpc3RTdHlsZTpcIm5vbmVcIixwb3NpdGlvbjpcInJlbGF0aXZlXCJ9KSxzLmNoaWxkcmVuLmNzcyhcIndpZHRoXCIsaCgpKSxcImhvcml6b250YWxcIj09PXMuc2V0dGluZ3MubW9kZSYmcy5zZXR0aW5ncy5zbGlkZU1hcmdpbj4wJiZzLmNoaWxkcmVuLmNzcyhcIm1hcmdpblJpZ2h0XCIscy5zZXR0aW5ncy5zbGlkZU1hcmdpbiksXCJ2ZXJ0aWNhbFwiPT09cy5zZXR0aW5ncy5tb2RlJiZzLnNldHRpbmdzLnNsaWRlTWFyZ2luPjAmJnMuY2hpbGRyZW4uY3NzKFwibWFyZ2luQm90dG9tXCIscy5zZXR0aW5ncy5zbGlkZU1hcmdpbiksXCJmYWRlXCI9PT1zLnNldHRpbmdzLm1vZGUmJihzLmNoaWxkcmVuLmNzcyh7cG9zaXRpb246XCJhYnNvbHV0ZVwiLHpJbmRleDowLGRpc3BsYXk6XCJub25lXCJ9KSxzLmNoaWxkcmVuLmVxKHMuc2V0dGluZ3Muc3RhcnRTbGlkZSkuY3NzKHt6SW5kZXg6cy5zZXR0aW5ncy5zbGlkZVpJbmRleCxkaXNwbGF5OlwiYmxvY2tcIn0pKSxzLmNvbnRyb2xzLmVsPXQoJzxkaXYgY2xhc3M9XCJieC1jb250cm9sc1wiIC8+Jykscy5zZXR0aW5ncy5jYXB0aW9ucyYmUCgpLHMuYWN0aXZlLmxhc3Q9cy5zZXR0aW5ncy5zdGFydFNsaWRlPT09ZigpLTEscy5zZXR0aW5ncy52aWRlbyYmby5maXRWaWRzKCksKFwiYWxsXCI9PT1zLnNldHRpbmdzLnByZWxvYWRJbWFnZXN8fHMuc2V0dGluZ3MudGlja2VyKSYmKGU9cy5jaGlsZHJlbikscy5zZXR0aW5ncy50aWNrZXI/cy5zZXR0aW5ncy5wYWdlcj0hMToocy5zZXR0aW5ncy5jb250cm9scyYmQygpLHMuc2V0dGluZ3MuYXV0byYmcy5zZXR0aW5ncy5hdXRvQ29udHJvbHMmJlQoKSxzLnNldHRpbmdzLnBhZ2VyJiZ3KCksKHMuc2V0dGluZ3MuY29udHJvbHN8fHMuc2V0dGluZ3MuYXV0b0NvbnRyb2xzfHxzLnNldHRpbmdzLnBhZ2VyKSYmcy52aWV3cG9ydC5hZnRlcihzLmNvbnRyb2xzLmVsKSksYyhlLGcpfSxjPWZ1bmN0aW9uKGUsaSl7dmFyIG49ZS5maW5kKCdpbWc6bm90KFtzcmM9XCJcIl0pLCBpZnJhbWUnKS5sZW5ndGgscz0wO3JldHVybiAwPT09bj92b2lkIGkoKTp2b2lkIGUuZmluZCgnaW1nOm5vdChbc3JjPVwiXCJdKSwgaWZyYW1lJykuZWFjaChmdW5jdGlvbigpe3QodGhpcykub25lKFwibG9hZCBlcnJvclwiLGZ1bmN0aW9uKCl7KytzPT09biYmaSgpfSkuZWFjaChmdW5jdGlvbigpe3RoaXMuY29tcGxldGUmJnQodGhpcykudHJpZ2dlcihcImxvYWRcIil9KX0pfSxnPWZ1bmN0aW9uKCl7aWYocy5zZXR0aW5ncy5pbmZpbml0ZUxvb3AmJlwiZmFkZVwiIT09cy5zZXR0aW5ncy5tb2RlJiYhcy5zZXR0aW5ncy50aWNrZXIpe3ZhciBlPVwidmVydGljYWxcIj09PXMuc2V0dGluZ3MubW9kZT9zLnNldHRpbmdzLm1pblNsaWRlczpzLnNldHRpbmdzLm1heFNsaWRlcyxpPXMuY2hpbGRyZW4uc2xpY2UoMCxlKS5jbG9uZSghMCkuYWRkQ2xhc3MoXCJieC1jbG9uZVwiKSxuPXMuY2hpbGRyZW4uc2xpY2UoLWUpLmNsb25lKCEwKS5hZGRDbGFzcyhcImJ4LWNsb25lXCIpO3Muc2V0dGluZ3MuYXJpYUhpZGRlbiYmKGkuYXR0cihcImFyaWEtaGlkZGVuXCIsITApLG4uYXR0cihcImFyaWEtaGlkZGVuXCIsITApKSxvLmFwcGVuZChpKS5wcmVwZW5kKG4pfXMubG9hZGVyLnJlbW92ZSgpLG0oKSxcInZlcnRpY2FsXCI9PT1zLnNldHRpbmdzLm1vZGUmJihzLnNldHRpbmdzLmFkYXB0aXZlSGVpZ2h0PSEwKSxzLnZpZXdwb3J0LmhlaWdodChwKCkpLG8ucmVkcmF3U2xpZGVyKCkscy5zZXR0aW5ncy5vblNsaWRlckxvYWQuY2FsbChvLHMuYWN0aXZlLmluZGV4KSxzLmluaXRpYWxpemVkPSEwLHMuc2V0dGluZ3MucmVzcG9uc2l2ZSYmdCh3aW5kb3cpLmJpbmQoXCJyZXNpemVcIixaKSxzLnNldHRpbmdzLmF1dG8mJnMuc2V0dGluZ3MuYXV0b1N0YXJ0JiYoZigpPjF8fHMuc2V0dGluZ3MuYXV0b1NsaWRlRm9yT25lUGFnZSkmJkgoKSxzLnNldHRpbmdzLnRpY2tlciYmVygpLHMuc2V0dGluZ3MucGFnZXImJkkocy5zZXR0aW5ncy5zdGFydFNsaWRlKSxzLnNldHRpbmdzLmNvbnRyb2xzJiZEKCkscy5zZXR0aW5ncy50b3VjaEVuYWJsZWQmJiFzLnNldHRpbmdzLnRpY2tlciYmTigpLHMuc2V0dGluZ3Mua2V5Ym9hcmRFbmFibGVkJiYhcy5zZXR0aW5ncy50aWNrZXImJnQoZG9jdW1lbnQpLmtleWRvd24oRil9LHA9ZnVuY3Rpb24oKXt2YXIgZT0wLG49dCgpO2lmKFwidmVydGljYWxcIj09PXMuc2V0dGluZ3MubW9kZXx8cy5zZXR0aW5ncy5hZGFwdGl2ZUhlaWdodClpZihzLmNhcm91c2VsKXt2YXIgbz0xPT09cy5zZXR0aW5ncy5tb3ZlU2xpZGVzP3MuYWN0aXZlLmluZGV4OnMuYWN0aXZlLmluZGV4KngoKTtmb3Iobj1zLmNoaWxkcmVuLmVxKG8pLGk9MTtpPD1zLnNldHRpbmdzLm1heFNsaWRlcy0xO2krKyluPW8raT49cy5jaGlsZHJlbi5sZW5ndGg/bi5hZGQocy5jaGlsZHJlbi5lcShpLTEpKTpuLmFkZChzLmNoaWxkcmVuLmVxKG8raSkpfWVsc2Ugbj1zLmNoaWxkcmVuLmVxKHMuYWN0aXZlLmluZGV4KTtlbHNlIG49cy5jaGlsZHJlbjtyZXR1cm5cInZlcnRpY2FsXCI9PT1zLnNldHRpbmdzLm1vZGU/KG4uZWFjaChmdW5jdGlvbihpKXtlKz10KHRoaXMpLm91dGVySGVpZ2h0KCl9KSxzLnNldHRpbmdzLnNsaWRlTWFyZ2luPjAmJihlKz1zLnNldHRpbmdzLnNsaWRlTWFyZ2luKihzLnNldHRpbmdzLm1pblNsaWRlcy0xKSkpOmU9TWF0aC5tYXguYXBwbHkoTWF0aCxuLm1hcChmdW5jdGlvbigpe3JldHVybiB0KHRoaXMpLm91dGVySGVpZ2h0KCExKX0pLmdldCgpKSxcImJvcmRlci1ib3hcIj09PXMudmlld3BvcnQuY3NzKFwiYm94LXNpemluZ1wiKT9lKz1wYXJzZUZsb2F0KHMudmlld3BvcnQuY3NzKFwicGFkZGluZy10b3BcIikpK3BhcnNlRmxvYXQocy52aWV3cG9ydC5jc3MoXCJwYWRkaW5nLWJvdHRvbVwiKSkrcGFyc2VGbG9hdChzLnZpZXdwb3J0LmNzcyhcImJvcmRlci10b3Atd2lkdGhcIikpK3BhcnNlRmxvYXQocy52aWV3cG9ydC5jc3MoXCJib3JkZXItYm90dG9tLXdpZHRoXCIpKTpcInBhZGRpbmctYm94XCI9PT1zLnZpZXdwb3J0LmNzcyhcImJveC1zaXppbmdcIikmJihlKz1wYXJzZUZsb2F0KHMudmlld3BvcnQuY3NzKFwicGFkZGluZy10b3BcIikpK3BhcnNlRmxvYXQocy52aWV3cG9ydC5jc3MoXCJwYWRkaW5nLWJvdHRvbVwiKSkpLGV9LHU9ZnVuY3Rpb24oKXt2YXIgdD1cIjEwMCVcIjtyZXR1cm4gcy5zZXR0aW5ncy5zbGlkZVdpZHRoPjAmJih0PVwiaG9yaXpvbnRhbFwiPT09cy5zZXR0aW5ncy5tb2RlP3Muc2V0dGluZ3MubWF4U2xpZGVzKnMuc2V0dGluZ3Muc2xpZGVXaWR0aCsocy5zZXR0aW5ncy5tYXhTbGlkZXMtMSkqcy5zZXR0aW5ncy5zbGlkZU1hcmdpbjpzLnNldHRpbmdzLnNsaWRlV2lkdGgpLHR9LGg9ZnVuY3Rpb24oKXt2YXIgdD1zLnNldHRpbmdzLnNsaWRlV2lkdGgsZT1zLnZpZXdwb3J0LndpZHRoKCk7aWYoMD09PXMuc2V0dGluZ3Muc2xpZGVXaWR0aHx8cy5zZXR0aW5ncy5zbGlkZVdpZHRoPmUmJiFzLmNhcm91c2VsfHxcInZlcnRpY2FsXCI9PT1zLnNldHRpbmdzLm1vZGUpdD1lO2Vsc2UgaWYocy5zZXR0aW5ncy5tYXhTbGlkZXM+MSYmXCJob3Jpem9udGFsXCI9PT1zLnNldHRpbmdzLm1vZGUpe2lmKGU+cy5tYXhUaHJlc2hvbGQpcmV0dXJuIHQ7ZTxzLm1pblRocmVzaG9sZD90PShlLXMuc2V0dGluZ3Muc2xpZGVNYXJnaW4qKHMuc2V0dGluZ3MubWluU2xpZGVzLTEpKS9zLnNldHRpbmdzLm1pblNsaWRlczpzLnNldHRpbmdzLnNocmlua0l0ZW1zJiYodD1NYXRoLmZsb29yKChlK3Muc2V0dGluZ3Muc2xpZGVNYXJnaW4pL01hdGguY2VpbCgoZStzLnNldHRpbmdzLnNsaWRlTWFyZ2luKS8odCtzLnNldHRpbmdzLnNsaWRlTWFyZ2luKSktcy5zZXR0aW5ncy5zbGlkZU1hcmdpbikpfXJldHVybiB0fSx2PWZ1bmN0aW9uKCl7dmFyIHQ9MSxlPW51bGw7cmV0dXJuXCJob3Jpem9udGFsXCI9PT1zLnNldHRpbmdzLm1vZGUmJnMuc2V0dGluZ3Muc2xpZGVXaWR0aD4wP3Mudmlld3BvcnQud2lkdGgoKTxzLm1pblRocmVzaG9sZD90PXMuc2V0dGluZ3MubWluU2xpZGVzOnMudmlld3BvcnQud2lkdGgoKT5zLm1heFRocmVzaG9sZD90PXMuc2V0dGluZ3MubWF4U2xpZGVzOihlPXMuY2hpbGRyZW4uZmlyc3QoKS53aWR0aCgpK3Muc2V0dGluZ3Muc2xpZGVNYXJnaW4sdD1NYXRoLmZsb29yKChzLnZpZXdwb3J0LndpZHRoKCkrcy5zZXR0aW5ncy5zbGlkZU1hcmdpbikvZSkpOlwidmVydGljYWxcIj09PXMuc2V0dGluZ3MubW9kZSYmKHQ9cy5zZXR0aW5ncy5taW5TbGlkZXMpLHR9LGY9ZnVuY3Rpb24oKXt2YXIgdD0wLGU9MCxpPTA7aWYocy5zZXR0aW5ncy5tb3ZlU2xpZGVzPjApaWYocy5zZXR0aW5ncy5pbmZpbml0ZUxvb3ApdD1NYXRoLmNlaWwocy5jaGlsZHJlbi5sZW5ndGgveCgpKTtlbHNlIGZvcig7ZTxzLmNoaWxkcmVuLmxlbmd0aDspKyt0LGU9aSt2KCksaSs9cy5zZXR0aW5ncy5tb3ZlU2xpZGVzPD12KCk/cy5zZXR0aW5ncy5tb3ZlU2xpZGVzOnYoKTtlbHNlIHQ9TWF0aC5jZWlsKHMuY2hpbGRyZW4ubGVuZ3RoL3YoKSk7cmV0dXJuIHR9LHg9ZnVuY3Rpb24oKXtyZXR1cm4gcy5zZXR0aW5ncy5tb3ZlU2xpZGVzPjAmJnMuc2V0dGluZ3MubW92ZVNsaWRlczw9digpP3Muc2V0dGluZ3MubW92ZVNsaWRlczp2KCl9LG09ZnVuY3Rpb24oKXt2YXIgdCxlLGk7cy5jaGlsZHJlbi5sZW5ndGg+cy5zZXR0aW5ncy5tYXhTbGlkZXMmJnMuYWN0aXZlLmxhc3QmJiFzLnNldHRpbmdzLmluZmluaXRlTG9vcD9cImhvcml6b250YWxcIj09PXMuc2V0dGluZ3MubW9kZT8oZT1zLmNoaWxkcmVuLmxhc3QoKSx0PWUucG9zaXRpb24oKSxTKC0odC5sZWZ0LShzLnZpZXdwb3J0LndpZHRoKCktZS5vdXRlcldpZHRoKCkpKSxcInJlc2V0XCIsMCkpOlwidmVydGljYWxcIj09PXMuc2V0dGluZ3MubW9kZSYmKGk9cy5jaGlsZHJlbi5sZW5ndGgtcy5zZXR0aW5ncy5taW5TbGlkZXMsdD1zLmNoaWxkcmVuLmVxKGkpLnBvc2l0aW9uKCksUygtdC50b3AsXCJyZXNldFwiLDApKToodD1zLmNoaWxkcmVuLmVxKHMuYWN0aXZlLmluZGV4KngoKSkucG9zaXRpb24oKSxzLmFjdGl2ZS5pbmRleD09PWYoKS0xJiYocy5hY3RpdmUubGFzdD0hMCksdm9pZCAwIT09dCYmKFwiaG9yaXpvbnRhbFwiPT09cy5zZXR0aW5ncy5tb2RlP1MoLXQubGVmdCxcInJlc2V0XCIsMCk6XCJ2ZXJ0aWNhbFwiPT09cy5zZXR0aW5ncy5tb2RlJiZTKC10LnRvcCxcInJlc2V0XCIsMCkpKX0sUz1mdW5jdGlvbihlLGksbixyKXt2YXIgYSxsO3MudXNpbmdDU1M/KGw9XCJ2ZXJ0aWNhbFwiPT09cy5zZXR0aW5ncy5tb2RlP1widHJhbnNsYXRlM2QoMCwgXCIrZStcInB4LCAwKVwiOlwidHJhbnNsYXRlM2QoXCIrZStcInB4LCAwLCAwKVwiLG8uY3NzKFwiLVwiK3MuY3NzUHJlZml4K1wiLXRyYW5zaXRpb24tZHVyYXRpb25cIixuLzFlMytcInNcIiksXCJzbGlkZVwiPT09aT8oby5jc3Mocy5hbmltUHJvcCxsKSwwIT09bj9vLmJpbmQoXCJ0cmFuc2l0aW9uZW5kIHdlYmtpdFRyYW5zaXRpb25FbmQgb1RyYW5zaXRpb25FbmQgTVNUcmFuc2l0aW9uRW5kXCIsZnVuY3Rpb24oZSl7dChlLnRhcmdldCkuaXMobykmJihvLnVuYmluZChcInRyYW5zaXRpb25lbmQgd2Via2l0VHJhbnNpdGlvbkVuZCBvVHJhbnNpdGlvbkVuZCBNU1RyYW5zaXRpb25FbmRcIikscSgpKX0pOnEoKSk6XCJyZXNldFwiPT09aT9vLmNzcyhzLmFuaW1Qcm9wLGwpOlwidGlja2VyXCI9PT1pJiYoby5jc3MoXCItXCIrcy5jc3NQcmVmaXgrXCItdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb25cIixcImxpbmVhclwiKSxvLmNzcyhzLmFuaW1Qcm9wLGwpLDAhPT1uP28uYmluZChcInRyYW5zaXRpb25lbmQgd2Via2l0VHJhbnNpdGlvbkVuZCBvVHJhbnNpdGlvbkVuZCBNU1RyYW5zaXRpb25FbmRcIixmdW5jdGlvbihlKXt0KGUudGFyZ2V0KS5pcyhvKSYmKG8udW5iaW5kKFwidHJhbnNpdGlvbmVuZCB3ZWJraXRUcmFuc2l0aW9uRW5kIG9UcmFuc2l0aW9uRW5kIE1TVHJhbnNpdGlvbkVuZFwiKSxTKHIucmVzZXRWYWx1ZSxcInJlc2V0XCIsMCksTCgpKX0pOihTKHIucmVzZXRWYWx1ZSxcInJlc2V0XCIsMCksTCgpKSkpOihhPXt9LGFbcy5hbmltUHJvcF09ZSxcInNsaWRlXCI9PT1pP28uYW5pbWF0ZShhLG4scy5zZXR0aW5ncy5lYXNpbmcsZnVuY3Rpb24oKXtxKCl9KTpcInJlc2V0XCI9PT1pP28uY3NzKHMuYW5pbVByb3AsZSk6XCJ0aWNrZXJcIj09PWkmJm8uYW5pbWF0ZShhLG4sXCJsaW5lYXJcIixmdW5jdGlvbigpe1Moci5yZXNldFZhbHVlLFwicmVzZXRcIiwwKSxMKCl9KSl9LGI9ZnVuY3Rpb24oKXtmb3IodmFyIGU9XCJcIixpPVwiXCIsbj1mKCksbz0wO288bjtvKyspaT1cIlwiLHMuc2V0dGluZ3MuYnVpbGRQYWdlciYmdC5pc0Z1bmN0aW9uKHMuc2V0dGluZ3MuYnVpbGRQYWdlcil8fHMuc2V0dGluZ3MucGFnZXJDdXN0b20/KGk9cy5zZXR0aW5ncy5idWlsZFBhZ2VyKG8pLHMucGFnZXJFbC5hZGRDbGFzcyhcImJ4LWN1c3RvbS1wYWdlclwiKSk6KGk9bysxLHMucGFnZXJFbC5hZGRDbGFzcyhcImJ4LWRlZmF1bHQtcGFnZXJcIikpLGUrPSc8ZGl2IGNsYXNzPVwiYngtcGFnZXItaXRlbVwiPjxhIGhyZWY9XCJcIiBkYXRhLXNsaWRlLWluZGV4PVwiJytvKydcIiBjbGFzcz1cImJ4LXBhZ2VyLWxpbmtcIj4nK2krXCI8L2E+PC9kaXY+XCI7cy5wYWdlckVsLmh0bWwoZSl9LHc9ZnVuY3Rpb24oKXtzLnNldHRpbmdzLnBhZ2VyQ3VzdG9tP3MucGFnZXJFbD10KHMuc2V0dGluZ3MucGFnZXJDdXN0b20pOihzLnBhZ2VyRWw9dCgnPGRpdiBjbGFzcz1cImJ4LXBhZ2VyXCIgLz4nKSxzLnNldHRpbmdzLnBhZ2VyU2VsZWN0b3I/dChzLnNldHRpbmdzLnBhZ2VyU2VsZWN0b3IpLmh0bWwocy5wYWdlckVsKTpzLmNvbnRyb2xzLmVsLmFkZENsYXNzKFwiYngtaGFzLXBhZ2VyXCIpLmFwcGVuZChzLnBhZ2VyRWwpLGIoKSkscy5wYWdlckVsLm9uKFwiY2xpY2sgdG91Y2hlbmRcIixcImFcIix6KX0sQz1mdW5jdGlvbigpe3MuY29udHJvbHMubmV4dD10KCc8YSBjbGFzcz1cImJ4LW5leHRcIiBocmVmPVwiXCI+JytzLnNldHRpbmdzLm5leHRUZXh0K1wiPC9hPlwiKSxzLmNvbnRyb2xzLnByZXY9dCgnPGEgY2xhc3M9XCJieC1wcmV2XCIgaHJlZj1cIlwiPicrcy5zZXR0aW5ncy5wcmV2VGV4dCtcIjwvYT5cIikscy5jb250cm9scy5uZXh0LmJpbmQoXCJjbGljayB0b3VjaGVuZFwiLEUpLHMuY29udHJvbHMucHJldi5iaW5kKFwiY2xpY2sgdG91Y2hlbmRcIixrKSxzLnNldHRpbmdzLm5leHRTZWxlY3RvciYmdChzLnNldHRpbmdzLm5leHRTZWxlY3RvcikuYXBwZW5kKHMuY29udHJvbHMubmV4dCkscy5zZXR0aW5ncy5wcmV2U2VsZWN0b3ImJnQocy5zZXR0aW5ncy5wcmV2U2VsZWN0b3IpLmFwcGVuZChzLmNvbnRyb2xzLnByZXYpLHMuc2V0dGluZ3MubmV4dFNlbGVjdG9yfHxzLnNldHRpbmdzLnByZXZTZWxlY3Rvcnx8KHMuY29udHJvbHMuZGlyZWN0aW9uRWw9dCgnPGRpdiBjbGFzcz1cImJ4LWNvbnRyb2xzLWRpcmVjdGlvblwiIC8+Jykscy5jb250cm9scy5kaXJlY3Rpb25FbC5hcHBlbmQocy5jb250cm9scy5wcmV2KS5hcHBlbmQocy5jb250cm9scy5uZXh0KSxzLmNvbnRyb2xzLmVsLmFkZENsYXNzKFwiYngtaGFzLWNvbnRyb2xzLWRpcmVjdGlvblwiKS5hcHBlbmQocy5jb250cm9scy5kaXJlY3Rpb25FbCkpfSxUPWZ1bmN0aW9uKCl7cy5jb250cm9scy5zdGFydD10KCc8ZGl2IGNsYXNzPVwiYngtY29udHJvbHMtYXV0by1pdGVtXCI+PGEgY2xhc3M9XCJieC1zdGFydFwiIGhyZWY9XCJcIj4nK3Muc2V0dGluZ3Muc3RhcnRUZXh0K1wiPC9hPjwvZGl2PlwiKSxzLmNvbnRyb2xzLnN0b3A9dCgnPGRpdiBjbGFzcz1cImJ4LWNvbnRyb2xzLWF1dG8taXRlbVwiPjxhIGNsYXNzPVwiYngtc3RvcFwiIGhyZWY9XCJcIj4nK3Muc2V0dGluZ3Muc3RvcFRleHQrXCI8L2E+PC9kaXY+XCIpLHMuY29udHJvbHMuYXV0b0VsPXQoJzxkaXYgY2xhc3M9XCJieC1jb250cm9scy1hdXRvXCIgLz4nKSxzLmNvbnRyb2xzLmF1dG9FbC5vbihcImNsaWNrXCIsXCIuYngtc3RhcnRcIixNKSxzLmNvbnRyb2xzLmF1dG9FbC5vbihcImNsaWNrXCIsXCIuYngtc3RvcFwiLHkpLHMuc2V0dGluZ3MuYXV0b0NvbnRyb2xzQ29tYmluZT9zLmNvbnRyb2xzLmF1dG9FbC5hcHBlbmQocy5jb250cm9scy5zdGFydCk6cy5jb250cm9scy5hdXRvRWwuYXBwZW5kKHMuY29udHJvbHMuc3RhcnQpLmFwcGVuZChzLmNvbnRyb2xzLnN0b3ApLHMuc2V0dGluZ3MuYXV0b0NvbnRyb2xzU2VsZWN0b3I/dChzLnNldHRpbmdzLmF1dG9Db250cm9sc1NlbGVjdG9yKS5odG1sKHMuY29udHJvbHMuYXV0b0VsKTpzLmNvbnRyb2xzLmVsLmFkZENsYXNzKFwiYngtaGFzLWNvbnRyb2xzLWF1dG9cIikuYXBwZW5kKHMuY29udHJvbHMuYXV0b0VsKSxBKHMuc2V0dGluZ3MuYXV0b1N0YXJ0P1wic3RvcFwiOlwic3RhcnRcIil9LFA9ZnVuY3Rpb24oKXtzLmNoaWxkcmVuLmVhY2goZnVuY3Rpb24oZSl7dmFyIGk9dCh0aGlzKS5maW5kKFwiaW1nOmZpcnN0XCIpLmF0dHIoXCJ0aXRsZVwiKTt2b2lkIDAhPT1pJiYoXCJcIitpKS5sZW5ndGgmJnQodGhpcykuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiYngtY2FwdGlvblwiPjxzcGFuPicraStcIjwvc3Bhbj48L2Rpdj5cIil9KX0sRT1mdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCkscy5jb250cm9scy5lbC5oYXNDbGFzcyhcImRpc2FibGVkXCIpfHwocy5zZXR0aW5ncy5hdXRvJiZzLnNldHRpbmdzLnN0b3BBdXRvT25DbGljayYmby5zdG9wQXV0bygpLG8uZ29Ub05leHRTbGlkZSgpKX0saz1mdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCkscy5jb250cm9scy5lbC5oYXNDbGFzcyhcImRpc2FibGVkXCIpfHwocy5zZXR0aW5ncy5hdXRvJiZzLnNldHRpbmdzLnN0b3BBdXRvT25DbGljayYmby5zdG9wQXV0bygpLG8uZ29Ub1ByZXZTbGlkZSgpKX0sTT1mdW5jdGlvbih0KXtvLnN0YXJ0QXV0bygpLHQucHJldmVudERlZmF1bHQoKX0seT1mdW5jdGlvbih0KXtvLnN0b3BBdXRvKCksdC5wcmV2ZW50RGVmYXVsdCgpfSx6PWZ1bmN0aW9uKGUpe3ZhciBpLG47ZS5wcmV2ZW50RGVmYXVsdCgpLHMuY29udHJvbHMuZWwuaGFzQ2xhc3MoXCJkaXNhYmxlZFwiKXx8KHMuc2V0dGluZ3MuYXV0byYmcy5zZXR0aW5ncy5zdG9wQXV0b09uQ2xpY2smJm8uc3RvcEF1dG8oKSxpPXQoZS5jdXJyZW50VGFyZ2V0KSx2b2lkIDAhPT1pLmF0dHIoXCJkYXRhLXNsaWRlLWluZGV4XCIpJiYobj1wYXJzZUludChpLmF0dHIoXCJkYXRhLXNsaWRlLWluZGV4XCIpKSxuIT09cy5hY3RpdmUuaW5kZXgmJm8uZ29Ub1NsaWRlKG4pKSl9LEk9ZnVuY3Rpb24oZSl7dmFyIGk9cy5jaGlsZHJlbi5sZW5ndGg7cmV0dXJuXCJzaG9ydFwiPT09cy5zZXR0aW5ncy5wYWdlclR5cGU/KHMuc2V0dGluZ3MubWF4U2xpZGVzPjEmJihpPU1hdGguY2VpbChzLmNoaWxkcmVuLmxlbmd0aC9zLnNldHRpbmdzLm1heFNsaWRlcykpLHZvaWQgcy5wYWdlckVsLmh0bWwoZSsxK3Muc2V0dGluZ3MucGFnZXJTaG9ydFNlcGFyYXRvcitpKSk6KHMucGFnZXJFbC5maW5kKFwiYVwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKSx2b2lkIHMucGFnZXJFbC5lYWNoKGZ1bmN0aW9uKGksbil7dChuKS5maW5kKFwiYVwiKS5lcShlKS5hZGRDbGFzcyhcImFjdGl2ZVwiKX0pKX0scT1mdW5jdGlvbigpe2lmKHMuc2V0dGluZ3MuaW5maW5pdGVMb29wKXt2YXIgdD1cIlwiOzA9PT1zLmFjdGl2ZS5pbmRleD90PXMuY2hpbGRyZW4uZXEoMCkucG9zaXRpb24oKTpzLmFjdGl2ZS5pbmRleD09PWYoKS0xJiZzLmNhcm91c2VsP3Q9cy5jaGlsZHJlbi5lcSgoZigpLTEpKngoKSkucG9zaXRpb24oKTpzLmFjdGl2ZS5pbmRleD09PXMuY2hpbGRyZW4ubGVuZ3RoLTEmJih0PXMuY2hpbGRyZW4uZXEocy5jaGlsZHJlbi5sZW5ndGgtMSkucG9zaXRpb24oKSksdCYmKFwiaG9yaXpvbnRhbFwiPT09cy5zZXR0aW5ncy5tb2RlP1MoLXQubGVmdCxcInJlc2V0XCIsMCk6XCJ2ZXJ0aWNhbFwiPT09cy5zZXR0aW5ncy5tb2RlJiZTKC10LnRvcCxcInJlc2V0XCIsMCkpfXMud29ya2luZz0hMSxzLnNldHRpbmdzLm9uU2xpZGVBZnRlci5jYWxsKG8scy5jaGlsZHJlbi5lcShzLmFjdGl2ZS5pbmRleCkscy5vbGRJbmRleCxzLmFjdGl2ZS5pbmRleCl9LEE9ZnVuY3Rpb24odCl7cy5zZXR0aW5ncy5hdXRvQ29udHJvbHNDb21iaW5lP3MuY29udHJvbHMuYXV0b0VsLmh0bWwocy5jb250cm9sc1t0XSk6KHMuY29udHJvbHMuYXV0b0VsLmZpbmQoXCJhXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpLHMuY29udHJvbHMuYXV0b0VsLmZpbmQoXCJhOm5vdCguYngtXCIrdCtcIilcIikuYWRkQ2xhc3MoXCJhY3RpdmVcIikpfSxEPWZ1bmN0aW9uKCl7MT09PWYoKT8ocy5jb250cm9scy5wcmV2LmFkZENsYXNzKFwiZGlzYWJsZWRcIikscy5jb250cm9scy5uZXh0LmFkZENsYXNzKFwiZGlzYWJsZWRcIikpOiFzLnNldHRpbmdzLmluZmluaXRlTG9vcCYmcy5zZXR0aW5ncy5oaWRlQ29udHJvbE9uRW5kJiYoMD09PXMuYWN0aXZlLmluZGV4PyhzLmNvbnRyb2xzLnByZXYuYWRkQ2xhc3MoXCJkaXNhYmxlZFwiKSxzLmNvbnRyb2xzLm5leHQucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlZFwiKSk6cy5hY3RpdmUuaW5kZXg9PT1mKCktMT8ocy5jb250cm9scy5uZXh0LmFkZENsYXNzKFwiZGlzYWJsZWRcIikscy5jb250cm9scy5wcmV2LnJlbW92ZUNsYXNzKFwiZGlzYWJsZWRcIikpOihzLmNvbnRyb2xzLnByZXYucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlZFwiKSxzLmNvbnRyb2xzLm5leHQucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlZFwiKSkpfSxIPWZ1bmN0aW9uKCl7aWYocy5zZXR0aW5ncy5hdXRvRGVsYXk+MCl7c2V0VGltZW91dChvLnN0YXJ0QXV0byxzLnNldHRpbmdzLmF1dG9EZWxheSl9ZWxzZSBvLnN0YXJ0QXV0bygpLHQod2luZG93KS5mb2N1cyhmdW5jdGlvbigpe28uc3RhcnRBdXRvKCl9KS5ibHVyKGZ1bmN0aW9uKCl7by5zdG9wQXV0bygpfSk7cy5zZXR0aW5ncy5hdXRvSG92ZXImJm8uaG92ZXIoZnVuY3Rpb24oKXtzLmludGVydmFsJiYoby5zdG9wQXV0byghMCkscy5hdXRvUGF1c2VkPSEwKX0sZnVuY3Rpb24oKXtzLmF1dG9QYXVzZWQmJihvLnN0YXJ0QXV0byghMCkscy5hdXRvUGF1c2VkPW51bGwpfSl9LFc9ZnVuY3Rpb24oKXt2YXIgZSxpLG4scixhLGwsZCxjLGc9MDtcIm5leHRcIj09PXMuc2V0dGluZ3MuYXV0b0RpcmVjdGlvbj9vLmFwcGVuZChzLmNoaWxkcmVuLmNsb25lKCkuYWRkQ2xhc3MoXCJieC1jbG9uZVwiKSk6KG8ucHJlcGVuZChzLmNoaWxkcmVuLmNsb25lKCkuYWRkQ2xhc3MoXCJieC1jbG9uZVwiKSksZT1zLmNoaWxkcmVuLmZpcnN0KCkucG9zaXRpb24oKSxnPVwiaG9yaXpvbnRhbFwiPT09cy5zZXR0aW5ncy5tb2RlPy1lLmxlZnQ6LWUudG9wKSxTKGcsXCJyZXNldFwiLDApLHMuc2V0dGluZ3MucGFnZXI9ITEscy5zZXR0aW5ncy5jb250cm9scz0hMSxzLnNldHRpbmdzLmF1dG9Db250cm9scz0hMSxzLnNldHRpbmdzLnRpY2tlckhvdmVyJiYocy51c2luZ0NTUz8ocj1cImhvcml6b250YWxcIj09PXMuc2V0dGluZ3MubW9kZT80OjUscy52aWV3cG9ydC5ob3ZlcihmdW5jdGlvbigpe2k9by5jc3MoXCItXCIrcy5jc3NQcmVmaXgrXCItdHJhbnNmb3JtXCIpLG49cGFyc2VGbG9hdChpLnNwbGl0KFwiLFwiKVtyXSksUyhuLFwicmVzZXRcIiwwKX0sZnVuY3Rpb24oKXtjPTAscy5jaGlsZHJlbi5lYWNoKGZ1bmN0aW9uKGUpe2MrPVwiaG9yaXpvbnRhbFwiPT09cy5zZXR0aW5ncy5tb2RlP3QodGhpcykub3V0ZXJXaWR0aCghMCk6dCh0aGlzKS5vdXRlckhlaWdodCghMCl9KSxhPXMuc2V0dGluZ3Muc3BlZWQvYyxsPVwiaG9yaXpvbnRhbFwiPT09cy5zZXR0aW5ncy5tb2RlP1wibGVmdFwiOlwidG9wXCIsZD1hKihjLU1hdGguYWJzKHBhcnNlSW50KG4pKSksTChkKX0pKTpzLnZpZXdwb3J0LmhvdmVyKGZ1bmN0aW9uKCl7by5zdG9wKCl9LGZ1bmN0aW9uKCl7Yz0wLHMuY2hpbGRyZW4uZWFjaChmdW5jdGlvbihlKXtjKz1cImhvcml6b250YWxcIj09PXMuc2V0dGluZ3MubW9kZT90KHRoaXMpLm91dGVyV2lkdGgoITApOnQodGhpcykub3V0ZXJIZWlnaHQoITApfSksYT1zLnNldHRpbmdzLnNwZWVkL2MsbD1cImhvcml6b250YWxcIj09PXMuc2V0dGluZ3MubW9kZT9cImxlZnRcIjpcInRvcFwiLGQ9YSooYy1NYXRoLmFicyhwYXJzZUludChvLmNzcyhsKSkpKSxMKGQpfSkpLEwoKX0sTD1mdW5jdGlvbih0KXt2YXIgZSxpLG4scj10P3Q6cy5zZXR0aW5ncy5zcGVlZCxhPXtsZWZ0OjAsdG9wOjB9LGw9e2xlZnQ6MCx0b3A6MH07XCJuZXh0XCI9PT1zLnNldHRpbmdzLmF1dG9EaXJlY3Rpb24/YT1vLmZpbmQoXCIuYngtY2xvbmVcIikuZmlyc3QoKS5wb3NpdGlvbigpOmw9cy5jaGlsZHJlbi5maXJzdCgpLnBvc2l0aW9uKCksZT1cImhvcml6b250YWxcIj09PXMuc2V0dGluZ3MubW9kZT8tYS5sZWZ0Oi1hLnRvcCxpPVwiaG9yaXpvbnRhbFwiPT09cy5zZXR0aW5ncy5tb2RlPy1sLmxlZnQ6LWwudG9wLG49e3Jlc2V0VmFsdWU6aX0sUyhlLFwidGlja2VyXCIscixuKX0sTz1mdW5jdGlvbihlKXt2YXIgaT10KHdpbmRvdyksbj17dG9wOmkuc2Nyb2xsVG9wKCksbGVmdDppLnNjcm9sbExlZnQoKX0scz1lLm9mZnNldCgpO3JldHVybiBuLnJpZ2h0PW4ubGVmdCtpLndpZHRoKCksbi5ib3R0b209bi50b3AraS5oZWlnaHQoKSxzLnJpZ2h0PXMubGVmdCtlLm91dGVyV2lkdGgoKSxzLmJvdHRvbT1zLnRvcCtlLm91dGVySGVpZ2h0KCksIShuLnJpZ2h0PHMubGVmdHx8bi5sZWZ0PnMucmlnaHR8fG4uYm90dG9tPHMudG9wfHxuLnRvcD5zLmJvdHRvbSl9LEY9ZnVuY3Rpb24odCl7dmFyIGU9ZG9jdW1lbnQuYWN0aXZlRWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCksaT1cImlucHV0fHRleHRhcmVhXCIsbj1uZXcgUmVnRXhwKGUsW1wiaVwiXSkscz1uLmV4ZWMoaSk7aWYobnVsbD09cyYmTyhvKSl7aWYoMzk9PT10LmtleUNvZGUpcmV0dXJuIEUodCksITE7aWYoMzc9PT10LmtleUNvZGUpcmV0dXJuIGsodCksITF9fSxOPWZ1bmN0aW9uKCl7cy50b3VjaD17c3RhcnQ6e3g6MCx5OjB9LGVuZDp7eDowLHk6MH19LHMudmlld3BvcnQuYmluZChcInRvdWNoc3RhcnQgTVNQb2ludGVyRG93biBwb2ludGVyZG93blwiLFgpLHMudmlld3BvcnQub24oXCJjbGlja1wiLFwiLmJ4c2xpZGVyIGFcIixmdW5jdGlvbih0KXtzLnZpZXdwb3J0Lmhhc0NsYXNzKFwiY2xpY2stZGlzYWJsZWRcIikmJih0LnByZXZlbnREZWZhdWx0KCkscy52aWV3cG9ydC5yZW1vdmVDbGFzcyhcImNsaWNrLWRpc2FibGVkXCIpKX0pfSxYPWZ1bmN0aW9uKHQpe2lmKHMuY29udHJvbHMuZWwuYWRkQ2xhc3MoXCJkaXNhYmxlZFwiKSxzLndvcmtpbmcpdC5wcmV2ZW50RGVmYXVsdCgpLHMuY29udHJvbHMuZWwucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlZFwiKTtlbHNle3MudG91Y2gub3JpZ2luYWxQb3M9by5wb3NpdGlvbigpO3ZhciBlPXQub3JpZ2luYWxFdmVudCxpPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBlLmNoYW5nZWRUb3VjaGVzP2UuY2hhbmdlZFRvdWNoZXM6W2VdO3MudG91Y2guc3RhcnQueD1pWzBdLnBhZ2VYLHMudG91Y2guc3RhcnQueT1pWzBdLnBhZ2VZLHMudmlld3BvcnQuZ2V0KDApLnNldFBvaW50ZXJDYXB0dXJlJiYocy5wb2ludGVySWQ9ZS5wb2ludGVySWQscy52aWV3cG9ydC5nZXQoMCkuc2V0UG9pbnRlckNhcHR1cmUocy5wb2ludGVySWQpKSxzLnZpZXdwb3J0LmJpbmQoXCJ0b3VjaG1vdmUgTVNQb2ludGVyTW92ZSBwb2ludGVybW92ZVwiLFYpLHMudmlld3BvcnQuYmluZChcInRvdWNoZW5kIE1TUG9pbnRlclVwIHBvaW50ZXJ1cFwiLFIpLHMudmlld3BvcnQuYmluZChcIk1TUG9pbnRlckNhbmNlbCBwb2ludGVyY2FuY2VsXCIsWSl9fSxZPWZ1bmN0aW9uKHQpe1Mocy50b3VjaC5vcmlnaW5hbFBvcy5sZWZ0LFwicmVzZXRcIiwwKSxzLmNvbnRyb2xzLmVsLnJlbW92ZUNsYXNzKFwiZGlzYWJsZWRcIikscy52aWV3cG9ydC51bmJpbmQoXCJNU1BvaW50ZXJDYW5jZWwgcG9pbnRlcmNhbmNlbFwiLFkpLHMudmlld3BvcnQudW5iaW5kKFwidG91Y2htb3ZlIE1TUG9pbnRlck1vdmUgcG9pbnRlcm1vdmVcIixWKSxzLnZpZXdwb3J0LnVuYmluZChcInRvdWNoZW5kIE1TUG9pbnRlclVwIHBvaW50ZXJ1cFwiLFIpLHMudmlld3BvcnQuZ2V0KDApLnJlbGVhc2VQb2ludGVyQ2FwdHVyZSYmcy52aWV3cG9ydC5nZXQoMCkucmVsZWFzZVBvaW50ZXJDYXB0dXJlKHMucG9pbnRlcklkKX0sVj1mdW5jdGlvbih0KXt2YXIgZT10Lm9yaWdpbmFsRXZlbnQsaT1cInVuZGVmaW5lZFwiIT10eXBlb2YgZS5jaGFuZ2VkVG91Y2hlcz9lLmNoYW5nZWRUb3VjaGVzOltlXSxuPU1hdGguYWJzKGlbMF0ucGFnZVgtcy50b3VjaC5zdGFydC54KSxvPU1hdGguYWJzKGlbMF0ucGFnZVktcy50b3VjaC5zdGFydC55KSxyPTAsYT0wOzMqbj5vJiZzLnNldHRpbmdzLnByZXZlbnREZWZhdWx0U3dpcGVYP3QucHJldmVudERlZmF1bHQoKTozKm8+biYmcy5zZXR0aW5ncy5wcmV2ZW50RGVmYXVsdFN3aXBlWSYmdC5wcmV2ZW50RGVmYXVsdCgpLFwiZmFkZVwiIT09cy5zZXR0aW5ncy5tb2RlJiZzLnNldHRpbmdzLm9uZVRvT25lVG91Y2gmJihcImhvcml6b250YWxcIj09PXMuc2V0dGluZ3MubW9kZT8oYT1pWzBdLnBhZ2VYLXMudG91Y2guc3RhcnQueCxyPXMudG91Y2gub3JpZ2luYWxQb3MubGVmdCthKTooYT1pWzBdLnBhZ2VZLXMudG91Y2guc3RhcnQueSxyPXMudG91Y2gub3JpZ2luYWxQb3MudG9wK2EpLFMocixcInJlc2V0XCIsMCkpfSxSPWZ1bmN0aW9uKHQpe3Mudmlld3BvcnQudW5iaW5kKFwidG91Y2htb3ZlIE1TUG9pbnRlck1vdmUgcG9pbnRlcm1vdmVcIixWKSxzLmNvbnRyb2xzLmVsLnJlbW92ZUNsYXNzKFwiZGlzYWJsZWRcIik7dmFyIGU9dC5vcmlnaW5hbEV2ZW50LGk9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGUuY2hhbmdlZFRvdWNoZXM/ZS5jaGFuZ2VkVG91Y2hlczpbZV0sbj0wLHI9MDtzLnRvdWNoLmVuZC54PWlbMF0ucGFnZVgscy50b3VjaC5lbmQueT1pWzBdLnBhZ2VZLFwiZmFkZVwiPT09cy5zZXR0aW5ncy5tb2RlPyhyPU1hdGguYWJzKHMudG91Y2guc3RhcnQueC1zLnRvdWNoLmVuZC54KSxyPj1zLnNldHRpbmdzLnN3aXBlVGhyZXNob2xkJiYocy50b3VjaC5zdGFydC54PnMudG91Y2guZW5kLng/by5nb1RvTmV4dFNsaWRlKCk6by5nb1RvUHJldlNsaWRlKCksby5zdG9wQXV0bygpKSk6KFwiaG9yaXpvbnRhbFwiPT09cy5zZXR0aW5ncy5tb2RlPyhyPXMudG91Y2guZW5kLngtcy50b3VjaC5zdGFydC54LG49cy50b3VjaC5vcmlnaW5hbFBvcy5sZWZ0KToocj1zLnRvdWNoLmVuZC55LXMudG91Y2guc3RhcnQueSxuPXMudG91Y2gub3JpZ2luYWxQb3MudG9wKSwhcy5zZXR0aW5ncy5pbmZpbml0ZUxvb3AmJigwPT09cy5hY3RpdmUuaW5kZXgmJnI+MHx8cy5hY3RpdmUubGFzdCYmcjwwKT9TKG4sXCJyZXNldFwiLDIwMCk6TWF0aC5hYnMocik+PXMuc2V0dGluZ3Muc3dpcGVUaHJlc2hvbGQ/KHI8MD9vLmdvVG9OZXh0U2xpZGUoKTpvLmdvVG9QcmV2U2xpZGUoKSxvLnN0b3BBdXRvKCkpOlMobixcInJlc2V0XCIsMjAwKSkscy52aWV3cG9ydC51bmJpbmQoXCJ0b3VjaGVuZCBNU1BvaW50ZXJVcCBwb2ludGVydXBcIixSKSxzLnZpZXdwb3J0LmdldCgwKS5yZWxlYXNlUG9pbnRlckNhcHR1cmUmJnMudmlld3BvcnQuZ2V0KDApLnJlbGVhc2VQb2ludGVyQ2FwdHVyZShzLnBvaW50ZXJJZCl9LFo9ZnVuY3Rpb24oZSl7aWYocy5pbml0aWFsaXplZClpZihzLndvcmtpbmcpd2luZG93LnNldFRpbWVvdXQoWiwxMCk7ZWxzZXt2YXIgaT10KHdpbmRvdykud2lkdGgoKSxuPXQod2luZG93KS5oZWlnaHQoKTtyPT09aSYmYT09PW58fChyPWksYT1uLG8ucmVkcmF3U2xpZGVyKCkscy5zZXR0aW5ncy5vblNsaWRlclJlc2l6ZS5jYWxsKG8scy5hY3RpdmUuaW5kZXgpKX19LEI9ZnVuY3Rpb24odCl7dmFyIGU9digpO3Muc2V0dGluZ3MuYXJpYUhpZGRlbiYmIXMuc2V0dGluZ3MudGlja2VyJiYocy5jaGlsZHJlbi5hdHRyKFwiYXJpYS1oaWRkZW5cIixcInRydWVcIikscy5jaGlsZHJlbi5zbGljZSh0LHQrZSkuYXR0cihcImFyaWEtaGlkZGVuXCIsXCJmYWxzZVwiKSl9LFU9ZnVuY3Rpb24odCl7cmV0dXJuIHQ8MD9zLnNldHRpbmdzLmluZmluaXRlTG9vcD9mKCktMTpzLmFjdGl2ZS5pbmRleDp0Pj1mKCk/cy5zZXR0aW5ncy5pbmZpbml0ZUxvb3A/MDpzLmFjdGl2ZS5pbmRleDp0fTtyZXR1cm4gby5nb1RvU2xpZGU9ZnVuY3Rpb24oZSxpKXt2YXIgbixyLGEsbCxkPSEwLGM9MCxnPXtsZWZ0OjAsdG9wOjB9LHU9bnVsbDtpZihzLm9sZEluZGV4PXMuYWN0aXZlLmluZGV4LHMuYWN0aXZlLmluZGV4PVUoZSksIXMud29ya2luZyYmcy5hY3RpdmUuaW5kZXghPT1zLm9sZEluZGV4KXtpZihzLndvcmtpbmc9ITAsZD1zLnNldHRpbmdzLm9uU2xpZGVCZWZvcmUuY2FsbChvLHMuY2hpbGRyZW4uZXEocy5hY3RpdmUuaW5kZXgpLHMub2xkSW5kZXgscy5hY3RpdmUuaW5kZXgpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBkJiYhZClyZXR1cm4gcy5hY3RpdmUuaW5kZXg9cy5vbGRJbmRleCx2b2lkKHMud29ya2luZz0hMSk7XCJuZXh0XCI9PT1pP3Muc2V0dGluZ3Mub25TbGlkZU5leHQuY2FsbChvLHMuY2hpbGRyZW4uZXEocy5hY3RpdmUuaW5kZXgpLHMub2xkSW5kZXgscy5hY3RpdmUuaW5kZXgpfHwoZD0hMSk6XCJwcmV2XCI9PT1pJiYocy5zZXR0aW5ncy5vblNsaWRlUHJldi5jYWxsKG8scy5jaGlsZHJlbi5lcShzLmFjdGl2ZS5pbmRleCkscy5vbGRJbmRleCxzLmFjdGl2ZS5pbmRleCl8fChkPSExKSkscy5hY3RpdmUubGFzdD1zLmFjdGl2ZS5pbmRleD49ZigpLTEsKHMuc2V0dGluZ3MucGFnZXJ8fHMuc2V0dGluZ3MucGFnZXJDdXN0b20pJiZJKHMuYWN0aXZlLmluZGV4KSxzLnNldHRpbmdzLmNvbnRyb2xzJiZEKCksXCJmYWRlXCI9PT1zLnNldHRpbmdzLm1vZGU/KHMuc2V0dGluZ3MuYWRhcHRpdmVIZWlnaHQmJnMudmlld3BvcnQuaGVpZ2h0KCkhPT1wKCkmJnMudmlld3BvcnQuYW5pbWF0ZSh7aGVpZ2h0OnAoKX0scy5zZXR0aW5ncy5hZGFwdGl2ZUhlaWdodFNwZWVkKSxzLmNoaWxkcmVuLmZpbHRlcihcIjp2aXNpYmxlXCIpLmZhZGVPdXQocy5zZXR0aW5ncy5zcGVlZCkuY3NzKHt6SW5kZXg6MH0pLHMuY2hpbGRyZW4uZXEocy5hY3RpdmUuaW5kZXgpLmNzcyhcInpJbmRleFwiLHMuc2V0dGluZ3Muc2xpZGVaSW5kZXgrMSkuZmFkZUluKHMuc2V0dGluZ3Muc3BlZWQsZnVuY3Rpb24oKXt0KHRoaXMpLmNzcyhcInpJbmRleFwiLHMuc2V0dGluZ3Muc2xpZGVaSW5kZXgpLHEoKX0pKToocy5zZXR0aW5ncy5hZGFwdGl2ZUhlaWdodCYmcy52aWV3cG9ydC5oZWlnaHQoKSE9PXAoKSYmcy52aWV3cG9ydC5hbmltYXRlKHtoZWlnaHQ6cCgpfSxzLnNldHRpbmdzLmFkYXB0aXZlSGVpZ2h0U3BlZWQpLCFzLnNldHRpbmdzLmluZmluaXRlTG9vcCYmcy5jYXJvdXNlbCYmcy5hY3RpdmUubGFzdD9cImhvcml6b250YWxcIj09PXMuc2V0dGluZ3MubW9kZT8odT1zLmNoaWxkcmVuLmVxKHMuY2hpbGRyZW4ubGVuZ3RoLTEpLGc9dS5wb3NpdGlvbigpLGM9cy52aWV3cG9ydC53aWR0aCgpLXUub3V0ZXJXaWR0aCgpKToobj1zLmNoaWxkcmVuLmxlbmd0aC1zLnNldHRpbmdzLm1pblNsaWRlcyxnPXMuY2hpbGRyZW4uZXEobikucG9zaXRpb24oKSk6cy5jYXJvdXNlbCYmcy5hY3RpdmUubGFzdCYmXCJwcmV2XCI9PT1pPyhyPTE9PT1zLnNldHRpbmdzLm1vdmVTbGlkZXM/cy5zZXR0aW5ncy5tYXhTbGlkZXMteCgpOihmKCktMSkqeCgpLShzLmNoaWxkcmVuLmxlbmd0aC1zLnNldHRpbmdzLm1heFNsaWRlcyksdT1vLmNoaWxkcmVuKFwiLmJ4LWNsb25lXCIpLmVxKHIpLGc9dS5wb3NpdGlvbigpKTpcIm5leHRcIj09PWkmJjA9PT1zLmFjdGl2ZS5pbmRleD8oZz1vLmZpbmQoXCI+IC5ieC1jbG9uZVwiKS5lcShzLnNldHRpbmdzLm1heFNsaWRlcykucG9zaXRpb24oKSxzLmFjdGl2ZS5sYXN0PSExKTplPj0wJiYobD1lKnBhcnNlSW50KHgoKSksZz1zLmNoaWxkcmVuLmVxKGwpLnBvc2l0aW9uKCkpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBnPyhhPVwiaG9yaXpvbnRhbFwiPT09cy5zZXR0aW5ncy5tb2RlPy0oZy5sZWZ0LWMpOi1nLnRvcCxTKGEsXCJzbGlkZVwiLHMuc2V0dGluZ3Muc3BlZWQpKTpzLndvcmtpbmc9ITEpLHMuc2V0dGluZ3MuYXJpYUhpZGRlbiYmQihzLmFjdGl2ZS5pbmRleCp4KCkpfX0sby5nb1RvTmV4dFNsaWRlPWZ1bmN0aW9uKCl7aWYocy5zZXR0aW5ncy5pbmZpbml0ZUxvb3B8fCFzLmFjdGl2ZS5sYXN0KXt2YXIgdD1wYXJzZUludChzLmFjdGl2ZS5pbmRleCkrMTtvLmdvVG9TbGlkZSh0LFwibmV4dFwiKX19LG8uZ29Ub1ByZXZTbGlkZT1mdW5jdGlvbigpe2lmKHMuc2V0dGluZ3MuaW5maW5pdGVMb29wfHwwIT09cy5hY3RpdmUuaW5kZXgpe3ZhciB0PXBhcnNlSW50KHMuYWN0aXZlLmluZGV4KS0xO28uZ29Ub1NsaWRlKHQsXCJwcmV2XCIpfX0sby5zdGFydEF1dG89ZnVuY3Rpb24odCl7cy5pbnRlcnZhbHx8KHMuaW50ZXJ2YWw9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtcIm5leHRcIj09PXMuc2V0dGluZ3MuYXV0b0RpcmVjdGlvbj9vLmdvVG9OZXh0U2xpZGUoKTpvLmdvVG9QcmV2U2xpZGUoKX0scy5zZXR0aW5ncy5wYXVzZSkscy5zZXR0aW5ncy5hdXRvQ29udHJvbHMmJnQhPT0hMCYmQShcInN0b3BcIikpfSxvLnN0b3BBdXRvPWZ1bmN0aW9uKHQpe3MuaW50ZXJ2YWwmJihjbGVhckludGVydmFsKHMuaW50ZXJ2YWwpLHMuaW50ZXJ2YWw9bnVsbCxzLnNldHRpbmdzLmF1dG9Db250cm9scyYmdCE9PSEwJiZBKFwic3RhcnRcIikpfSxvLmdldEN1cnJlbnRTbGlkZT1mdW5jdGlvbigpe3JldHVybiBzLmFjdGl2ZS5pbmRleH0sby5nZXRDdXJyZW50U2xpZGVFbGVtZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHMuY2hpbGRyZW4uZXEocy5hY3RpdmUuaW5kZXgpfSxvLmdldFNsaWRlRWxlbWVudD1mdW5jdGlvbih0KXtyZXR1cm4gcy5jaGlsZHJlbi5lcSh0KX0sby5nZXRTbGlkZUNvdW50PWZ1bmN0aW9uKCl7cmV0dXJuIHMuY2hpbGRyZW4ubGVuZ3RofSxvLmlzV29ya2luZz1mdW5jdGlvbigpe3JldHVybiBzLndvcmtpbmd9LG8ucmVkcmF3U2xpZGVyPWZ1bmN0aW9uKCl7cy5jaGlsZHJlbi5hZGQoby5maW5kKFwiLmJ4LWNsb25lXCIpKS5vdXRlcldpZHRoKGgoKSkscy52aWV3cG9ydC5jc3MoXCJoZWlnaHRcIixwKCkpLHMuc2V0dGluZ3MudGlja2VyfHxtKCkscy5hY3RpdmUubGFzdCYmKHMuYWN0aXZlLmluZGV4PWYoKS0xKSxzLmFjdGl2ZS5pbmRleD49ZigpJiYocy5hY3RpdmUubGFzdD0hMCkscy5zZXR0aW5ncy5wYWdlciYmIXMuc2V0dGluZ3MucGFnZXJDdXN0b20mJihiKCksSShzLmFjdGl2ZS5pbmRleCkpLHMuc2V0dGluZ3MuYXJpYUhpZGRlbiYmQihzLmFjdGl2ZS5pbmRleCp4KCkpfSxvLmRlc3Ryb3lTbGlkZXI9ZnVuY3Rpb24oKXtzLmluaXRpYWxpemVkJiYocy5pbml0aWFsaXplZD0hMSx0KFwiLmJ4LWNsb25lXCIsdGhpcykucmVtb3ZlKCkscy5jaGlsZHJlbi5lYWNoKGZ1bmN0aW9uKCl7dm9pZCAwIT09dCh0aGlzKS5kYXRhKFwib3JpZ1N0eWxlXCIpP3QodGhpcykuYXR0cihcInN0eWxlXCIsdCh0aGlzKS5kYXRhKFwib3JpZ1N0eWxlXCIpKTp0KHRoaXMpLnJlbW92ZUF0dHIoXCJzdHlsZVwiKX0pLHZvaWQgMCE9PXQodGhpcykuZGF0YShcIm9yaWdTdHlsZVwiKT90aGlzLmF0dHIoXCJzdHlsZVwiLHQodGhpcykuZGF0YShcIm9yaWdTdHlsZVwiKSk6dCh0aGlzKS5yZW1vdmVBdHRyKFwic3R5bGVcIiksdCh0aGlzKS51bndyYXAoKS51bndyYXAoKSxzLmNvbnRyb2xzLmVsJiZzLmNvbnRyb2xzLmVsLnJlbW92ZSgpLHMuY29udHJvbHMubmV4dCYmcy5jb250cm9scy5uZXh0LnJlbW92ZSgpLHMuY29udHJvbHMucHJldiYmcy5jb250cm9scy5wcmV2LnJlbW92ZSgpLHMucGFnZXJFbCYmcy5zZXR0aW5ncy5jb250cm9scyYmIXMuc2V0dGluZ3MucGFnZXJDdXN0b20mJnMucGFnZXJFbC5yZW1vdmUoKSx0KFwiLmJ4LWNhcHRpb25cIix0aGlzKS5yZW1vdmUoKSxzLmNvbnRyb2xzLmF1dG9FbCYmcy5jb250cm9scy5hdXRvRWwucmVtb3ZlKCksY2xlYXJJbnRlcnZhbChzLmludGVydmFsKSxzLnNldHRpbmdzLnJlc3BvbnNpdmUmJnQod2luZG93KS51bmJpbmQoXCJyZXNpemVcIixaKSxzLnNldHRpbmdzLmtleWJvYXJkRW5hYmxlZCYmdChkb2N1bWVudCkudW5iaW5kKFwia2V5ZG93blwiLEYpLHQodGhpcykucmVtb3ZlRGF0YShcImJ4U2xpZGVyXCIpKX0sby5yZWxvYWRTbGlkZXI9ZnVuY3Rpb24oZSl7dm9pZCAwIT09ZSYmKG49ZSksby5kZXN0cm95U2xpZGVyKCksbCgpLHQobykuZGF0YShcImJ4U2xpZGVyXCIsdGhpcyl9LGwoKSx0KG8pLmRhdGEoXCJieFNsaWRlclwiLHRoaXMpLHRoaXN9fX0oalF1ZXJ5KTsiLCIvKlxyXG4gKiBqUXVlcnkgRmxleFNsaWRlciB2Mi42LjNcclxuICogQ29weXJpZ2h0IDIwMTIgV29vVGhlbWVzXHJcbiAqIENvbnRyaWJ1dGluZyBBdXRob3I6IFR5bGVyIFNtaXRoXHJcbiAqLyFmdW5jdGlvbigkKXt2YXIgZT0hMDskLmZsZXhzbGlkZXI9ZnVuY3Rpb24odCxhKXt2YXIgbj0kKHQpO24udmFycz0kLmV4dGVuZCh7fSwkLmZsZXhzbGlkZXIuZGVmYXVsdHMsYSk7dmFyIGk9bi52YXJzLm5hbWVzcGFjZSxzPXdpbmRvdy5uYXZpZ2F0b3ImJndpbmRvdy5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZCYmd2luZG93Lk1TR2VzdHVyZSxyPShcIm9udG91Y2hzdGFydFwiaW4gd2luZG93fHxzfHx3aW5kb3cuRG9jdW1lbnRUb3VjaCYmZG9jdW1lbnQgaW5zdGFuY2VvZiBEb2N1bWVudFRvdWNoKSYmbi52YXJzLnRvdWNoLG89XCJjbGljayB0b3VjaGVuZCBNU1BvaW50ZXJVcCBrZXl1cFwiLGw9XCJcIixjLGQ9XCJ2ZXJ0aWNhbFwiPT09bi52YXJzLmRpcmVjdGlvbix1PW4udmFycy5yZXZlcnNlLHY9bi52YXJzLml0ZW1XaWR0aD4wLHA9XCJmYWRlXCI9PT1uLnZhcnMuYW5pbWF0aW9uLG09XCJcIiE9PW4udmFycy5hc05hdkZvcixmPXt9OyQuZGF0YSh0LFwiZmxleHNsaWRlclwiLG4pLGY9e2luaXQ6ZnVuY3Rpb24oKXtuLmFuaW1hdGluZz0hMSxuLmN1cnJlbnRTbGlkZT1wYXJzZUludChuLnZhcnMuc3RhcnRBdD9uLnZhcnMuc3RhcnRBdDowLDEwKSxpc05hTihuLmN1cnJlbnRTbGlkZSkmJihuLmN1cnJlbnRTbGlkZT0wKSxuLmFuaW1hdGluZ1RvPW4uY3VycmVudFNsaWRlLG4uYXRFbmQ9MD09PW4uY3VycmVudFNsaWRlfHxuLmN1cnJlbnRTbGlkZT09PW4ubGFzdCxuLmNvbnRhaW5lclNlbGVjdG9yPW4udmFycy5zZWxlY3Rvci5zdWJzdHIoMCxuLnZhcnMuc2VsZWN0b3Iuc2VhcmNoKFwiIFwiKSksbi5zbGlkZXM9JChuLnZhcnMuc2VsZWN0b3Isbiksbi5jb250YWluZXI9JChuLmNvbnRhaW5lclNlbGVjdG9yLG4pLG4uY291bnQ9bi5zbGlkZXMubGVuZ3RoLG4uc3luY0V4aXN0cz0kKG4udmFycy5zeW5jKS5sZW5ndGg+MCxcInNsaWRlXCI9PT1uLnZhcnMuYW5pbWF0aW9uJiYobi52YXJzLmFuaW1hdGlvbj1cInN3aW5nXCIpLG4ucHJvcD1kP1widG9wXCI6XCJtYXJnaW5MZWZ0XCIsbi5hcmdzPXt9LG4ubWFudWFsUGF1c2U9ITEsbi5zdG9wcGVkPSExLG4uc3RhcnRlZD0hMSxuLnN0YXJ0VGltZW91dD1udWxsLG4udHJhbnNpdGlvbnM9IW4udmFycy52aWRlbyYmIXAmJm4udmFycy51c2VDU1MmJmZ1bmN0aW9uKCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0PVtcInBlcnNwZWN0aXZlUHJvcGVydHlcIixcIldlYmtpdFBlcnNwZWN0aXZlXCIsXCJNb3pQZXJzcGVjdGl2ZVwiLFwiT1BlcnNwZWN0aXZlXCIsXCJtc1BlcnNwZWN0aXZlXCJdO2Zvcih2YXIgYSBpbiB0KWlmKHZvaWQgMCE9PWUuc3R5bGVbdFthXV0pcmV0dXJuIG4ucGZ4PXRbYV0ucmVwbGFjZShcIlBlcnNwZWN0aXZlXCIsXCJcIikudG9Mb3dlckNhc2UoKSxuLnByb3A9XCItXCIrbi5wZngrXCItdHJhbnNmb3JtXCIsITA7cmV0dXJuITF9KCksbi5lbnN1cmVBbmltYXRpb25FbmQ9XCJcIixcIlwiIT09bi52YXJzLmNvbnRyb2xzQ29udGFpbmVyJiYobi5jb250cm9sc0NvbnRhaW5lcj0kKG4udmFycy5jb250cm9sc0NvbnRhaW5lcikubGVuZ3RoPjAmJiQobi52YXJzLmNvbnRyb2xzQ29udGFpbmVyKSksXCJcIiE9PW4udmFycy5tYW51YWxDb250cm9scyYmKG4ubWFudWFsQ29udHJvbHM9JChuLnZhcnMubWFudWFsQ29udHJvbHMpLmxlbmd0aD4wJiYkKG4udmFycy5tYW51YWxDb250cm9scykpLFwiXCIhPT1uLnZhcnMuY3VzdG9tRGlyZWN0aW9uTmF2JiYobi5jdXN0b21EaXJlY3Rpb25OYXY9Mj09PSQobi52YXJzLmN1c3RvbURpcmVjdGlvbk5hdikubGVuZ3RoJiYkKG4udmFycy5jdXN0b21EaXJlY3Rpb25OYXYpKSxuLnZhcnMucmFuZG9taXplJiYobi5zbGlkZXMuc29ydChmdW5jdGlvbigpe3JldHVybiBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkpLS41fSksbi5jb250YWluZXIuZW1wdHkoKS5hcHBlbmQobi5zbGlkZXMpKSxuLmRvTWF0aCgpLG4uc2V0dXAoXCJpbml0XCIpLG4udmFycy5jb250cm9sTmF2JiZmLmNvbnRyb2xOYXYuc2V0dXAoKSxuLnZhcnMuZGlyZWN0aW9uTmF2JiZmLmRpcmVjdGlvbk5hdi5zZXR1cCgpLG4udmFycy5rZXlib2FyZCYmKDE9PT0kKG4uY29udGFpbmVyU2VsZWN0b3IpLmxlbmd0aHx8bi52YXJzLm11bHRpcGxlS2V5Ym9hcmQpJiYkKGRvY3VtZW50KS5iaW5kKFwia2V5dXBcIixmdW5jdGlvbihlKXt2YXIgdD1lLmtleUNvZGU7aWYoIW4uYW5pbWF0aW5nJiYoMzk9PT10fHwzNz09PXQpKXt2YXIgYT0zOT09PXQ/bi5nZXRUYXJnZXQoXCJuZXh0XCIpOjM3PT09dD9uLmdldFRhcmdldChcInByZXZcIik6ITE7bi5mbGV4QW5pbWF0ZShhLG4udmFycy5wYXVzZU9uQWN0aW9uKX19KSxuLnZhcnMubW91c2V3aGVlbCYmbi5iaW5kKFwibW91c2V3aGVlbFwiLGZ1bmN0aW9uKGUsdCxhLGkpe2UucHJldmVudERlZmF1bHQoKTt2YXIgcz0wPnQ/bi5nZXRUYXJnZXQoXCJuZXh0XCIpOm4uZ2V0VGFyZ2V0KFwicHJldlwiKTtuLmZsZXhBbmltYXRlKHMsbi52YXJzLnBhdXNlT25BY3Rpb24pfSksbi52YXJzLnBhdXNlUGxheSYmZi5wYXVzZVBsYXkuc2V0dXAoKSxuLnZhcnMuc2xpZGVzaG93JiZuLnZhcnMucGF1c2VJbnZpc2libGUmJmYucGF1c2VJbnZpc2libGUuaW5pdCgpLG4udmFycy5zbGlkZXNob3cmJihuLnZhcnMucGF1c2VPbkhvdmVyJiZuLmhvdmVyKGZ1bmN0aW9uKCl7bi5tYW51YWxQbGF5fHxuLm1hbnVhbFBhdXNlfHxuLnBhdXNlKCl9LGZ1bmN0aW9uKCl7bi5tYW51YWxQYXVzZXx8bi5tYW51YWxQbGF5fHxuLnN0b3BwZWR8fG4ucGxheSgpfSksbi52YXJzLnBhdXNlSW52aXNpYmxlJiZmLnBhdXNlSW52aXNpYmxlLmlzSGlkZGVuKCl8fChuLnZhcnMuaW5pdERlbGF5PjA/bi5zdGFydFRpbWVvdXQ9c2V0VGltZW91dChuLnBsYXksbi52YXJzLmluaXREZWxheSk6bi5wbGF5KCkpKSxtJiZmLmFzTmF2LnNldHVwKCksciYmbi52YXJzLnRvdWNoJiZmLnRvdWNoKCksKCFwfHxwJiZuLnZhcnMuc21vb3RoSGVpZ2h0KSYmJCh3aW5kb3cpLmJpbmQoXCJyZXNpemUgb3JpZW50YXRpb25jaGFuZ2UgZm9jdXNcIixmLnJlc2l6ZSksbi5maW5kKFwiaW1nXCIpLmF0dHIoXCJkcmFnZ2FibGVcIixcImZhbHNlXCIpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtuLnZhcnMuc3RhcnQobil9LDIwMCl9LGFzTmF2OntzZXR1cDpmdW5jdGlvbigpe24uYXNOYXY9ITAsbi5hbmltYXRpbmdUbz1NYXRoLmZsb29yKG4uY3VycmVudFNsaWRlL24ubW92ZSksbi5jdXJyZW50SXRlbT1uLmN1cnJlbnRTbGlkZSxuLnNsaWRlcy5yZW1vdmVDbGFzcyhpK1wiYWN0aXZlLXNsaWRlXCIpLmVxKG4uY3VycmVudEl0ZW0pLmFkZENsYXNzKGkrXCJhY3RpdmUtc2xpZGVcIikscz8odC5fc2xpZGVyPW4sbi5zbGlkZXMuZWFjaChmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fZ2VzdHVyZT1uZXcgTVNHZXN0dXJlLGUuX2dlc3R1cmUudGFyZ2V0PWUsZS5hZGRFdmVudExpc3RlbmVyKFwiTVNQb2ludGVyRG93blwiLGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSxlLmN1cnJlbnRUYXJnZXQuX2dlc3R1cmUmJmUuY3VycmVudFRhcmdldC5fZ2VzdHVyZS5hZGRQb2ludGVyKGUucG9pbnRlcklkKX0sITEpLGUuYWRkRXZlbnRMaXN0ZW5lcihcIk1TR2VzdHVyZVRhcFwiLGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKTt2YXIgdD0kKHRoaXMpLGE9dC5pbmRleCgpOyQobi52YXJzLmFzTmF2Rm9yKS5kYXRhKFwiZmxleHNsaWRlclwiKS5hbmltYXRpbmd8fHQuaGFzQ2xhc3MoXCJhY3RpdmVcIil8fChuLmRpcmVjdGlvbj1uLmN1cnJlbnRJdGVtPGE/XCJuZXh0XCI6XCJwcmV2XCIsbi5mbGV4QW5pbWF0ZShhLG4udmFycy5wYXVzZU9uQWN0aW9uLCExLCEwLCEwKSl9KX0pKTpuLnNsaWRlcy5vbihvLGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKTt2YXIgdD0kKHRoaXMpLGE9dC5pbmRleCgpLHM9dC5vZmZzZXQoKS5sZWZ0LSQobikuc2Nyb2xsTGVmdCgpOzA+PXMmJnQuaGFzQ2xhc3MoaStcImFjdGl2ZS1zbGlkZVwiKT9uLmZsZXhBbmltYXRlKG4uZ2V0VGFyZ2V0KFwicHJldlwiKSwhMCk6JChuLnZhcnMuYXNOYXZGb3IpLmRhdGEoXCJmbGV4c2xpZGVyXCIpLmFuaW1hdGluZ3x8dC5oYXNDbGFzcyhpK1wiYWN0aXZlLXNsaWRlXCIpfHwobi5kaXJlY3Rpb249bi5jdXJyZW50SXRlbTxhP1wibmV4dFwiOlwicHJldlwiLG4uZmxleEFuaW1hdGUoYSxuLnZhcnMucGF1c2VPbkFjdGlvbiwhMSwhMCwhMCkpfSl9fSxjb250cm9sTmF2OntzZXR1cDpmdW5jdGlvbigpe24ubWFudWFsQ29udHJvbHM/Zi5jb250cm9sTmF2LnNldHVwTWFudWFsKCk6Zi5jb250cm9sTmF2LnNldHVwUGFnaW5nKCl9LHNldHVwUGFnaW5nOmZ1bmN0aW9uKCl7dmFyIGU9XCJ0aHVtYm5haWxzXCI9PT1uLnZhcnMuY29udHJvbE5hdj9cImNvbnRyb2wtdGh1bWJzXCI6XCJjb250cm9sLXBhZ2luZ1wiLHQ9MSxhLHM7aWYobi5jb250cm9sTmF2U2NhZmZvbGQ9JCgnPG9sIGNsYXNzPVwiJytpK1wiY29udHJvbC1uYXYgXCIraStlKydcIj48L29sPicpLG4ucGFnaW5nQ291bnQ+MSlmb3IodmFyIHI9MDtyPG4ucGFnaW5nQ291bnQ7cisrKXtzPW4uc2xpZGVzLmVxKHIpLHZvaWQgMD09PXMuYXR0cihcImRhdGEtdGh1bWItYWx0XCIpJiZzLmF0dHIoXCJkYXRhLXRodW1iLWFsdFwiLFwiXCIpO3ZhciBjPVwiXCIhPT1zLmF0dHIoXCJkYXRhLXRodW1iLWFsdFwiKT9jPScgYWx0PVwiJytzLmF0dHIoXCJkYXRhLXRodW1iLWFsdFwiKSsnXCInOlwiXCI7aWYoYT1cInRodW1ibmFpbHNcIj09PW4udmFycy5jb250cm9sTmF2Pyc8aW1nIHNyYz1cIicrcy5hdHRyKFwiZGF0YS10aHVtYlwiKSsnXCInK2MrXCIvPlwiOic8YSBocmVmPVwiI1wiPicrdCtcIjwvYT5cIixcInRodW1ibmFpbHNcIj09PW4udmFycy5jb250cm9sTmF2JiYhMD09PW4udmFycy50aHVtYkNhcHRpb25zKXt2YXIgZD1zLmF0dHIoXCJkYXRhLXRodW1iY2FwdGlvblwiKTtcIlwiIT09ZCYmdm9pZCAwIT09ZCYmKGErPSc8c3BhbiBjbGFzcz1cIicraSsnY2FwdGlvblwiPicrZCtcIjwvc3Bhbj5cIil9bi5jb250cm9sTmF2U2NhZmZvbGQuYXBwZW5kKFwiPGxpPlwiK2ErXCI8L2xpPlwiKSx0Kyt9bi5jb250cm9sc0NvbnRhaW5lcj8kKG4uY29udHJvbHNDb250YWluZXIpLmFwcGVuZChuLmNvbnRyb2xOYXZTY2FmZm9sZCk6bi5hcHBlbmQobi5jb250cm9sTmF2U2NhZmZvbGQpLGYuY29udHJvbE5hdi5zZXQoKSxmLmNvbnRyb2xOYXYuYWN0aXZlKCksbi5jb250cm9sTmF2U2NhZmZvbGQuZGVsZWdhdGUoXCJhLCBpbWdcIixvLGZ1bmN0aW9uKGUpe2lmKGUucHJldmVudERlZmF1bHQoKSxcIlwiPT09bHx8bD09PWUudHlwZSl7dmFyIHQ9JCh0aGlzKSxhPW4uY29udHJvbE5hdi5pbmRleCh0KTt0Lmhhc0NsYXNzKGkrXCJhY3RpdmVcIil8fChuLmRpcmVjdGlvbj1hPm4uY3VycmVudFNsaWRlP1wibmV4dFwiOlwicHJldlwiLG4uZmxleEFuaW1hdGUoYSxuLnZhcnMucGF1c2VPbkFjdGlvbikpfVwiXCI9PT1sJiYobD1lLnR5cGUpLGYuc2V0VG9DbGVhcldhdGNoZWRFdmVudCgpfSl9LHNldHVwTWFudWFsOmZ1bmN0aW9uKCl7bi5jb250cm9sTmF2PW4ubWFudWFsQ29udHJvbHMsZi5jb250cm9sTmF2LmFjdGl2ZSgpLG4uY29udHJvbE5hdi5iaW5kKG8sZnVuY3Rpb24oZSl7aWYoZS5wcmV2ZW50RGVmYXVsdCgpLFwiXCI9PT1sfHxsPT09ZS50eXBlKXt2YXIgdD0kKHRoaXMpLGE9bi5jb250cm9sTmF2LmluZGV4KHQpO3QuaGFzQ2xhc3MoaStcImFjdGl2ZVwiKXx8KGE+bi5jdXJyZW50U2xpZGU/bi5kaXJlY3Rpb249XCJuZXh0XCI6bi5kaXJlY3Rpb249XCJwcmV2XCIsbi5mbGV4QW5pbWF0ZShhLG4udmFycy5wYXVzZU9uQWN0aW9uKSl9XCJcIj09PWwmJihsPWUudHlwZSksZi5zZXRUb0NsZWFyV2F0Y2hlZEV2ZW50KCl9KX0sc2V0OmZ1bmN0aW9uKCl7dmFyIGU9XCJ0aHVtYm5haWxzXCI9PT1uLnZhcnMuY29udHJvbE5hdj9cImltZ1wiOlwiYVwiO24uY29udHJvbE5hdj0kKFwiLlwiK2krXCJjb250cm9sLW5hdiBsaSBcIitlLG4uY29udHJvbHNDb250YWluZXI/bi5jb250cm9sc0NvbnRhaW5lcjpuKX0sYWN0aXZlOmZ1bmN0aW9uKCl7bi5jb250cm9sTmF2LnJlbW92ZUNsYXNzKGkrXCJhY3RpdmVcIikuZXEobi5hbmltYXRpbmdUbykuYWRkQ2xhc3MoaStcImFjdGl2ZVwiKX0sdXBkYXRlOmZ1bmN0aW9uKGUsdCl7bi5wYWdpbmdDb3VudD4xJiZcImFkZFwiPT09ZT9uLmNvbnRyb2xOYXZTY2FmZm9sZC5hcHBlbmQoJCgnPGxpPjxhIGhyZWY9XCIjXCI+JytuLmNvdW50K1wiPC9hPjwvbGk+XCIpKToxPT09bi5wYWdpbmdDb3VudD9uLmNvbnRyb2xOYXZTY2FmZm9sZC5maW5kKFwibGlcIikucmVtb3ZlKCk6bi5jb250cm9sTmF2LmVxKHQpLmNsb3Nlc3QoXCJsaVwiKS5yZW1vdmUoKSxmLmNvbnRyb2xOYXYuc2V0KCksbi5wYWdpbmdDb3VudD4xJiZuLnBhZ2luZ0NvdW50IT09bi5jb250cm9sTmF2Lmxlbmd0aD9uLnVwZGF0ZSh0LGUpOmYuY29udHJvbE5hdi5hY3RpdmUoKX19LGRpcmVjdGlvbk5hdjp7c2V0dXA6ZnVuY3Rpb24oKXt2YXIgZT0kKCc8dWwgY2xhc3M9XCInK2krJ2RpcmVjdGlvbi1uYXZcIj48bGkgY2xhc3M9XCInK2krJ25hdi1wcmV2XCI+PGEgY2xhc3M9XCInK2krJ3ByZXZcIiBocmVmPVwiI1wiPicrbi52YXJzLnByZXZUZXh0Kyc8L2E+PC9saT48bGkgY2xhc3M9XCInK2krJ25hdi1uZXh0XCI+PGEgY2xhc3M9XCInK2krJ25leHRcIiBocmVmPVwiI1wiPicrbi52YXJzLm5leHRUZXh0K1wiPC9hPjwvbGk+PC91bD5cIik7bi5jdXN0b21EaXJlY3Rpb25OYXY/bi5kaXJlY3Rpb25OYXY9bi5jdXN0b21EaXJlY3Rpb25OYXY6bi5jb250cm9sc0NvbnRhaW5lcj8oJChuLmNvbnRyb2xzQ29udGFpbmVyKS5hcHBlbmQoZSksbi5kaXJlY3Rpb25OYXY9JChcIi5cIitpK1wiZGlyZWN0aW9uLW5hdiBsaSBhXCIsbi5jb250cm9sc0NvbnRhaW5lcikpOihuLmFwcGVuZChlKSxuLmRpcmVjdGlvbk5hdj0kKFwiLlwiK2krXCJkaXJlY3Rpb24tbmF2IGxpIGFcIixuKSksZi5kaXJlY3Rpb25OYXYudXBkYXRlKCksbi5kaXJlY3Rpb25OYXYuYmluZChvLGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKTt2YXIgdDtcIlwiIT09bCYmbCE9PWUudHlwZXx8KHQ9JCh0aGlzKS5oYXNDbGFzcyhpK1wibmV4dFwiKT9uLmdldFRhcmdldChcIm5leHRcIik6bi5nZXRUYXJnZXQoXCJwcmV2XCIpLG4uZmxleEFuaW1hdGUodCxuLnZhcnMucGF1c2VPbkFjdGlvbikpLFwiXCI9PT1sJiYobD1lLnR5cGUpLGYuc2V0VG9DbGVhcldhdGNoZWRFdmVudCgpfSl9LHVwZGF0ZTpmdW5jdGlvbigpe3ZhciBlPWkrXCJkaXNhYmxlZFwiOzE9PT1uLnBhZ2luZ0NvdW50P24uZGlyZWN0aW9uTmF2LmFkZENsYXNzKGUpLmF0dHIoXCJ0YWJpbmRleFwiLFwiLTFcIik6bi52YXJzLmFuaW1hdGlvbkxvb3A/bi5kaXJlY3Rpb25OYXYucmVtb3ZlQ2xhc3MoZSkucmVtb3ZlQXR0cihcInRhYmluZGV4XCIpOjA9PT1uLmFuaW1hdGluZ1RvP24uZGlyZWN0aW9uTmF2LnJlbW92ZUNsYXNzKGUpLmZpbHRlcihcIi5cIitpK1wicHJldlwiKS5hZGRDbGFzcyhlKS5hdHRyKFwidGFiaW5kZXhcIixcIi0xXCIpOm4uYW5pbWF0aW5nVG89PT1uLmxhc3Q/bi5kaXJlY3Rpb25OYXYucmVtb3ZlQ2xhc3MoZSkuZmlsdGVyKFwiLlwiK2krXCJuZXh0XCIpLmFkZENsYXNzKGUpLmF0dHIoXCJ0YWJpbmRleFwiLFwiLTFcIik6bi5kaXJlY3Rpb25OYXYucmVtb3ZlQ2xhc3MoZSkucmVtb3ZlQXR0cihcInRhYmluZGV4XCIpfX0scGF1c2VQbGF5OntzZXR1cDpmdW5jdGlvbigpe3ZhciBlPSQoJzxkaXYgY2xhc3M9XCInK2krJ3BhdXNlcGxheVwiPjxhIGhyZWY9XCIjXCI+PC9hPjwvZGl2PicpO24uY29udHJvbHNDb250YWluZXI/KG4uY29udHJvbHNDb250YWluZXIuYXBwZW5kKGUpLG4ucGF1c2VQbGF5PSQoXCIuXCIraStcInBhdXNlcGxheSBhXCIsbi5jb250cm9sc0NvbnRhaW5lcikpOihuLmFwcGVuZChlKSxuLnBhdXNlUGxheT0kKFwiLlwiK2krXCJwYXVzZXBsYXkgYVwiLG4pKSxmLnBhdXNlUGxheS51cGRhdGUobi52YXJzLnNsaWRlc2hvdz9pK1wicGF1c2VcIjppK1wicGxheVwiKSxuLnBhdXNlUGxheS5iaW5kKG8sZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLFwiXCIhPT1sJiZsIT09ZS50eXBlfHwoJCh0aGlzKS5oYXNDbGFzcyhpK1wicGF1c2VcIik/KG4ubWFudWFsUGF1c2U9ITAsbi5tYW51YWxQbGF5PSExLG4ucGF1c2UoKSk6KG4ubWFudWFsUGF1c2U9ITEsbi5tYW51YWxQbGF5PSEwLG4ucGxheSgpKSksXCJcIj09PWwmJihsPWUudHlwZSksZi5zZXRUb0NsZWFyV2F0Y2hlZEV2ZW50KCl9KX0sdXBkYXRlOmZ1bmN0aW9uKGUpe1wicGxheVwiPT09ZT9uLnBhdXNlUGxheS5yZW1vdmVDbGFzcyhpK1wicGF1c2VcIikuYWRkQ2xhc3MoaStcInBsYXlcIikuaHRtbChuLnZhcnMucGxheVRleHQpOm4ucGF1c2VQbGF5LnJlbW92ZUNsYXNzKGkrXCJwbGF5XCIpLmFkZENsYXNzKGkrXCJwYXVzZVwiKS5odG1sKG4udmFycy5wYXVzZVRleHQpfX0sdG91Y2g6ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe2Uuc3RvcFByb3BhZ2F0aW9uKCksbi5hbmltYXRpbmc/ZS5wcmV2ZW50RGVmYXVsdCgpOihuLnBhdXNlKCksdC5fZ2VzdHVyZS5hZGRQb2ludGVyKGUucG9pbnRlcklkKSxUPTAsYz1kP24uaDpuLncsZj1OdW1iZXIobmV3IERhdGUpLGw9diYmdSYmbi5hbmltYXRpbmdUbz09PW4ubGFzdD8wOnYmJnU/bi5saW1pdC0obi5pdGVtVytuLnZhcnMuaXRlbU1hcmdpbikqbi5tb3ZlKm4uYW5pbWF0aW5nVG86diYmbi5jdXJyZW50U2xpZGU9PT1uLmxhc3Q/bi5saW1pdDp2PyhuLml0ZW1XK24udmFycy5pdGVtTWFyZ2luKSpuLm1vdmUqbi5jdXJyZW50U2xpZGU6dT8obi5sYXN0LW4uY3VycmVudFNsaWRlK24uY2xvbmVPZmZzZXQpKmM6KG4uY3VycmVudFNsaWRlK24uY2xvbmVPZmZzZXQpKmMpfWZ1bmN0aW9uIGEoZSl7ZS5zdG9wUHJvcGFnYXRpb24oKTt2YXIgYT1lLnRhcmdldC5fc2xpZGVyO2lmKGEpe3ZhciBuPS1lLnRyYW5zbGF0aW9uWCxpPS1lLnRyYW5zbGF0aW9uWTtyZXR1cm4gVCs9ZD9pOm4sbT1ULHk9ZD9NYXRoLmFicyhUKTxNYXRoLmFicygtbik6TWF0aC5hYnMoVCk8TWF0aC5hYnMoLWkpLGUuZGV0YWlsPT09ZS5NU0dFU1RVUkVfRkxBR19JTkVSVElBP3ZvaWQgc2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7dC5fZ2VzdHVyZS5zdG9wKCl9KTp2b2lkKCgheXx8TnVtYmVyKG5ldyBEYXRlKS1mPjUwMCkmJihlLnByZXZlbnREZWZhdWx0KCksIXAmJmEudHJhbnNpdGlvbnMmJihhLnZhcnMuYW5pbWF0aW9uTG9vcHx8KG09VC8oMD09PWEuY3VycmVudFNsaWRlJiYwPlR8fGEuY3VycmVudFNsaWRlPT09YS5sYXN0JiZUPjA/TWF0aC5hYnMoVCkvYysyOjEpKSxhLnNldFByb3BzKGwrbSxcInNldFRvdWNoXCIpKSkpfX1mdW5jdGlvbiBpKGUpe2Uuc3RvcFByb3BhZ2F0aW9uKCk7dmFyIHQ9ZS50YXJnZXQuX3NsaWRlcjtpZih0KXtpZih0LmFuaW1hdGluZ1RvPT09dC5jdXJyZW50U2xpZGUmJiF5JiZudWxsIT09bSl7dmFyIGE9dT8tbTptLG49YT4wP3QuZ2V0VGFyZ2V0KFwibmV4dFwiKTp0LmdldFRhcmdldChcInByZXZcIik7dC5jYW5BZHZhbmNlKG4pJiYoTnVtYmVyKG5ldyBEYXRlKS1mPDU1MCYmTWF0aC5hYnMoYSk+NTB8fE1hdGguYWJzKGEpPmMvMik/dC5mbGV4QW5pbWF0ZShuLHQudmFycy5wYXVzZU9uQWN0aW9uKTpwfHx0LmZsZXhBbmltYXRlKHQuY3VycmVudFNsaWRlLHQudmFycy5wYXVzZU9uQWN0aW9uLCEwKX1yPW51bGwsbz1udWxsLG09bnVsbCxsPW51bGwsVD0wfX12YXIgcixvLGwsYyxtLGYsZyxoLFMseT0hMSx4PTAsYj0wLFQ9MDtzPyh0LnN0eWxlLm1zVG91Y2hBY3Rpb249XCJub25lXCIsdC5fZ2VzdHVyZT1uZXcgTVNHZXN0dXJlLHQuX2dlc3R1cmUudGFyZ2V0PXQsdC5hZGRFdmVudExpc3RlbmVyKFwiTVNQb2ludGVyRG93blwiLGUsITEpLHQuX3NsaWRlcj1uLHQuYWRkRXZlbnRMaXN0ZW5lcihcIk1TR2VzdHVyZUNoYW5nZVwiLGEsITEpLHQuYWRkRXZlbnRMaXN0ZW5lcihcIk1TR2VzdHVyZUVuZFwiLGksITEpKTooZz1mdW5jdGlvbihlKXtuLmFuaW1hdGluZz9lLnByZXZlbnREZWZhdWx0KCk6KHdpbmRvdy5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZHx8MT09PWUudG91Y2hlcy5sZW5ndGgpJiYobi5wYXVzZSgpLGM9ZD9uLmg6bi53LGY9TnVtYmVyKG5ldyBEYXRlKSx4PWUudG91Y2hlc1swXS5wYWdlWCxiPWUudG91Y2hlc1swXS5wYWdlWSxsPXYmJnUmJm4uYW5pbWF0aW5nVG89PT1uLmxhc3Q/MDp2JiZ1P24ubGltaXQtKG4uaXRlbVcrbi52YXJzLml0ZW1NYXJnaW4pKm4ubW92ZSpuLmFuaW1hdGluZ1RvOnYmJm4uY3VycmVudFNsaWRlPT09bi5sYXN0P24ubGltaXQ6dj8obi5pdGVtVytuLnZhcnMuaXRlbU1hcmdpbikqbi5tb3ZlKm4uY3VycmVudFNsaWRlOnU/KG4ubGFzdC1uLmN1cnJlbnRTbGlkZStuLmNsb25lT2Zmc2V0KSpjOihuLmN1cnJlbnRTbGlkZStuLmNsb25lT2Zmc2V0KSpjLHI9ZD9iOngsbz1kP3g6Yix0LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIixoLCExKSx0LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLFMsITEpKX0saD1mdW5jdGlvbihlKXt4PWUudG91Y2hlc1swXS5wYWdlWCxiPWUudG91Y2hlc1swXS5wYWdlWSxtPWQ/ci1iOnIteCx5PWQ/TWF0aC5hYnMobSk8TWF0aC5hYnMoeC1vKTpNYXRoLmFicyhtKTxNYXRoLmFicyhiLW8pO3ZhciB0PTUwMDsoIXl8fE51bWJlcihuZXcgRGF0ZSktZj50KSYmKGUucHJldmVudERlZmF1bHQoKSwhcCYmbi50cmFuc2l0aW9ucyYmKG4udmFycy5hbmltYXRpb25Mb29wfHwobS89MD09PW4uY3VycmVudFNsaWRlJiYwPm18fG4uY3VycmVudFNsaWRlPT09bi5sYXN0JiZtPjA/TWF0aC5hYnMobSkvYysyOjEpLG4uc2V0UHJvcHMobCttLFwic2V0VG91Y2hcIikpKX0sUz1mdW5jdGlvbihlKXtpZih0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIixoLCExKSxuLmFuaW1hdGluZ1RvPT09bi5jdXJyZW50U2xpZGUmJiF5JiZudWxsIT09bSl7dmFyIGE9dT8tbTptLGk9YT4wP24uZ2V0VGFyZ2V0KFwibmV4dFwiKTpuLmdldFRhcmdldChcInByZXZcIik7bi5jYW5BZHZhbmNlKGkpJiYoTnVtYmVyKG5ldyBEYXRlKS1mPDU1MCYmTWF0aC5hYnMoYSk+NTB8fE1hdGguYWJzKGEpPmMvMik/bi5mbGV4QW5pbWF0ZShpLG4udmFycy5wYXVzZU9uQWN0aW9uKTpwfHxuLmZsZXhBbmltYXRlKG4uY3VycmVudFNsaWRlLG4udmFycy5wYXVzZU9uQWN0aW9uLCEwKX10LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLFMsITEpLHI9bnVsbCxvPW51bGwsbT1udWxsLGw9bnVsbH0sdC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLGcsITEpKX0scmVzaXplOmZ1bmN0aW9uKCl7IW4uYW5pbWF0aW5nJiZuLmlzKFwiOnZpc2libGVcIikmJih2fHxuLmRvTWF0aCgpLHA/Zi5zbW9vdGhIZWlnaHQoKTp2PyhuLnNsaWRlcy53aWR0aChuLmNvbXB1dGVkVyksbi51cGRhdGUobi5wYWdpbmdDb3VudCksbi5zZXRQcm9wcygpKTpkPyhuLnZpZXdwb3J0LmhlaWdodChuLmgpLG4uc2V0UHJvcHMobi5oLFwic2V0VG90YWxcIikpOihuLnZhcnMuc21vb3RoSGVpZ2h0JiZmLnNtb290aEhlaWdodCgpLG4ubmV3U2xpZGVzLndpZHRoKG4uY29tcHV0ZWRXKSxuLnNldFByb3BzKG4uY29tcHV0ZWRXLFwic2V0VG90YWxcIikpKX0sc21vb3RoSGVpZ2h0OmZ1bmN0aW9uKGUpe2lmKCFkfHxwKXt2YXIgdD1wP246bi52aWV3cG9ydDtlP3QuYW5pbWF0ZSh7aGVpZ2h0Om4uc2xpZGVzLmVxKG4uYW5pbWF0aW5nVG8pLmlubmVySGVpZ2h0KCl9LGUpOnQuaW5uZXJIZWlnaHQobi5zbGlkZXMuZXEobi5hbmltYXRpbmdUbykuaW5uZXJIZWlnaHQoKSl9fSxzeW5jOmZ1bmN0aW9uKGUpe3ZhciB0PSQobi52YXJzLnN5bmMpLmRhdGEoXCJmbGV4c2xpZGVyXCIpLGE9bi5hbmltYXRpbmdUbztzd2l0Y2goZSl7Y2FzZVwiYW5pbWF0ZVwiOnQuZmxleEFuaW1hdGUoYSxuLnZhcnMucGF1c2VPbkFjdGlvbiwhMSwhMCk7YnJlYWs7Y2FzZVwicGxheVwiOnQucGxheWluZ3x8dC5hc05hdnx8dC5wbGF5KCk7YnJlYWs7Y2FzZVwicGF1c2VcIjp0LnBhdXNlKCl9fSx1bmlxdWVJRDpmdW5jdGlvbihlKXtyZXR1cm4gZS5maWx0ZXIoXCJbaWRdXCIpLmFkZChlLmZpbmQoXCJbaWRdXCIpKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGU9JCh0aGlzKTtlLmF0dHIoXCJpZFwiLGUuYXR0cihcImlkXCIpK1wiX2Nsb25lXCIpfSksZX0scGF1c2VJbnZpc2libGU6e3Zpc1Byb3A6bnVsbCxpbml0OmZ1bmN0aW9uKCl7dmFyIGU9Zi5wYXVzZUludmlzaWJsZS5nZXRIaWRkZW5Qcm9wKCk7aWYoZSl7dmFyIHQ9ZS5yZXBsYWNlKC9bSHxoXWlkZGVuLyxcIlwiKStcInZpc2liaWxpdHljaGFuZ2VcIjtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKHQsZnVuY3Rpb24oKXtmLnBhdXNlSW52aXNpYmxlLmlzSGlkZGVuKCk/bi5zdGFydFRpbWVvdXQ/Y2xlYXJUaW1lb3V0KG4uc3RhcnRUaW1lb3V0KTpuLnBhdXNlKCk6bi5zdGFydGVkP24ucGxheSgpOm4udmFycy5pbml0RGVsYXk+MD9zZXRUaW1lb3V0KG4ucGxheSxuLnZhcnMuaW5pdERlbGF5KTpuLnBsYXkoKX0pfX0saXNIaWRkZW46ZnVuY3Rpb24oKXt2YXIgZT1mLnBhdXNlSW52aXNpYmxlLmdldEhpZGRlblByb3AoKTtyZXR1cm4gZT9kb2N1bWVudFtlXTohMX0sZ2V0SGlkZGVuUHJvcDpmdW5jdGlvbigpe3ZhciBlPVtcIndlYmtpdFwiLFwibW96XCIsXCJtc1wiLFwib1wiXTtpZihcImhpZGRlblwiaW4gZG9jdW1lbnQpcmV0dXJuXCJoaWRkZW5cIjtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrKylpZihlW3RdK1wiSGlkZGVuXCJpbiBkb2N1bWVudClyZXR1cm4gZVt0XStcIkhpZGRlblwiO3JldHVybiBudWxsfX0sc2V0VG9DbGVhcldhdGNoZWRFdmVudDpmdW5jdGlvbigpe2NsZWFyVGltZW91dChjKSxjPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtsPVwiXCJ9LDNlMyl9fSxuLmZsZXhBbmltYXRlPWZ1bmN0aW9uKGUsdCxhLHMsbyl7aWYobi52YXJzLmFuaW1hdGlvbkxvb3B8fGU9PT1uLmN1cnJlbnRTbGlkZXx8KG4uZGlyZWN0aW9uPWU+bi5jdXJyZW50U2xpZGU/XCJuZXh0XCI6XCJwcmV2XCIpLG0mJjE9PT1uLnBhZ2luZ0NvdW50JiYobi5kaXJlY3Rpb249bi5jdXJyZW50SXRlbTxlP1wibmV4dFwiOlwicHJldlwiKSwhbi5hbmltYXRpbmcmJihuLmNhbkFkdmFuY2UoZSxvKXx8YSkmJm4uaXMoXCI6dmlzaWJsZVwiKSl7aWYobSYmcyl7dmFyIGw9JChuLnZhcnMuYXNOYXZGb3IpLmRhdGEoXCJmbGV4c2xpZGVyXCIpO2lmKG4uYXRFbmQ9MD09PWV8fGU9PT1uLmNvdW50LTEsbC5mbGV4QW5pbWF0ZShlLCEwLCExLCEwLG8pLG4uZGlyZWN0aW9uPW4uY3VycmVudEl0ZW08ZT9cIm5leHRcIjpcInByZXZcIixsLmRpcmVjdGlvbj1uLmRpcmVjdGlvbixNYXRoLmNlaWwoKGUrMSkvbi52aXNpYmxlKS0xPT09bi5jdXJyZW50U2xpZGV8fDA9PT1lKXJldHVybiBuLmN1cnJlbnRJdGVtPWUsbi5zbGlkZXMucmVtb3ZlQ2xhc3MoaStcImFjdGl2ZS1zbGlkZVwiKS5lcShlKS5hZGRDbGFzcyhpK1wiYWN0aXZlLXNsaWRlXCIpLCExO24uY3VycmVudEl0ZW09ZSxuLnNsaWRlcy5yZW1vdmVDbGFzcyhpK1wiYWN0aXZlLXNsaWRlXCIpLmVxKGUpLmFkZENsYXNzKGkrXCJhY3RpdmUtc2xpZGVcIiksZT1NYXRoLmZsb29yKGUvbi52aXNpYmxlKX1pZihuLmFuaW1hdGluZz0hMCxuLmFuaW1hdGluZ1RvPWUsdCYmbi5wYXVzZSgpLG4udmFycy5iZWZvcmUobiksbi5zeW5jRXhpc3RzJiYhbyYmZi5zeW5jKFwiYW5pbWF0ZVwiKSxuLnZhcnMuY29udHJvbE5hdiYmZi5jb250cm9sTmF2LmFjdGl2ZSgpLHZ8fG4uc2xpZGVzLnJlbW92ZUNsYXNzKGkrXCJhY3RpdmUtc2xpZGVcIikuZXEoZSkuYWRkQ2xhc3MoaStcImFjdGl2ZS1zbGlkZVwiKSxuLmF0RW5kPTA9PT1lfHxlPT09bi5sYXN0LG4udmFycy5kaXJlY3Rpb25OYXYmJmYuZGlyZWN0aW9uTmF2LnVwZGF0ZSgpLGU9PT1uLmxhc3QmJihuLnZhcnMuZW5kKG4pLG4udmFycy5hbmltYXRpb25Mb29wfHxuLnBhdXNlKCkpLHApcj8obi5zbGlkZXMuZXEobi5jdXJyZW50U2xpZGUpLmNzcyh7b3BhY2l0eTowLHpJbmRleDoxfSksbi5zbGlkZXMuZXEoZSkuY3NzKHtvcGFjaXR5OjEsekluZGV4OjJ9KSxuLndyYXB1cChjKSk6KG4uc2xpZGVzLmVxKG4uY3VycmVudFNsaWRlKS5jc3Moe3pJbmRleDoxfSkuYW5pbWF0ZSh7b3BhY2l0eTowfSxuLnZhcnMuYW5pbWF0aW9uU3BlZWQsbi52YXJzLmVhc2luZyksbi5zbGlkZXMuZXEoZSkuY3NzKHt6SW5kZXg6Mn0pLmFuaW1hdGUoe29wYWNpdHk6MX0sbi52YXJzLmFuaW1hdGlvblNwZWVkLG4udmFycy5lYXNpbmcsbi53cmFwdXApKTtlbHNle3ZhciBjPWQ/bi5zbGlkZXMuZmlsdGVyKFwiOmZpcnN0XCIpLmhlaWdodCgpOm4uY29tcHV0ZWRXLGcsaCxTO3Y/KGc9bi52YXJzLml0ZW1NYXJnaW4sUz0obi5pdGVtVytnKSpuLm1vdmUqbi5hbmltYXRpbmdUbyxoPVM+bi5saW1pdCYmMSE9PW4udmlzaWJsZT9uLmxpbWl0OlMpOmg9MD09PW4uY3VycmVudFNsaWRlJiZlPT09bi5jb3VudC0xJiZuLnZhcnMuYW5pbWF0aW9uTG9vcCYmXCJuZXh0XCIhPT1uLmRpcmVjdGlvbj91PyhuLmNvdW50K24uY2xvbmVPZmZzZXQpKmM6MDpuLmN1cnJlbnRTbGlkZT09PW4ubGFzdCYmMD09PWUmJm4udmFycy5hbmltYXRpb25Mb29wJiZcInByZXZcIiE9PW4uZGlyZWN0aW9uP3U/MDoobi5jb3VudCsxKSpjOnU/KG4uY291bnQtMS1lK24uY2xvbmVPZmZzZXQpKmM6KGUrbi5jbG9uZU9mZnNldCkqYyxuLnNldFByb3BzKGgsXCJcIixuLnZhcnMuYW5pbWF0aW9uU3BlZWQpLG4udHJhbnNpdGlvbnM/KG4udmFycy5hbmltYXRpb25Mb29wJiZuLmF0RW5kfHwobi5hbmltYXRpbmc9ITEsbi5jdXJyZW50U2xpZGU9bi5hbmltYXRpbmdUbyksbi5jb250YWluZXIudW5iaW5kKFwid2Via2l0VHJhbnNpdGlvbkVuZCB0cmFuc2l0aW9uZW5kXCIpLG4uY29udGFpbmVyLmJpbmQoXCJ3ZWJraXRUcmFuc2l0aW9uRW5kIHRyYW5zaXRpb25lbmRcIixmdW5jdGlvbigpe2NsZWFyVGltZW91dChuLmVuc3VyZUFuaW1hdGlvbkVuZCksbi53cmFwdXAoYyl9KSxjbGVhclRpbWVvdXQobi5lbnN1cmVBbmltYXRpb25FbmQpLG4uZW5zdXJlQW5pbWF0aW9uRW5kPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtuLndyYXB1cChjKX0sbi52YXJzLmFuaW1hdGlvblNwZWVkKzEwMCkpOm4uY29udGFpbmVyLmFuaW1hdGUobi5hcmdzLG4udmFycy5hbmltYXRpb25TcGVlZCxuLnZhcnMuZWFzaW5nLGZ1bmN0aW9uKCl7bi53cmFwdXAoYyl9KX1uLnZhcnMuc21vb3RoSGVpZ2h0JiZmLnNtb290aEhlaWdodChuLnZhcnMuYW5pbWF0aW9uU3BlZWQpfX0sbi53cmFwdXA9ZnVuY3Rpb24oZSl7cHx8dnx8KDA9PT1uLmN1cnJlbnRTbGlkZSYmbi5hbmltYXRpbmdUbz09PW4ubGFzdCYmbi52YXJzLmFuaW1hdGlvbkxvb3A/bi5zZXRQcm9wcyhlLFwianVtcEVuZFwiKTpuLmN1cnJlbnRTbGlkZT09PW4ubGFzdCYmMD09PW4uYW5pbWF0aW5nVG8mJm4udmFycy5hbmltYXRpb25Mb29wJiZuLnNldFByb3BzKGUsXCJqdW1wU3RhcnRcIikpLG4uYW5pbWF0aW5nPSExLG4uY3VycmVudFNsaWRlPW4uYW5pbWF0aW5nVG8sbi52YXJzLmFmdGVyKG4pfSxuLmFuaW1hdGVTbGlkZXM9ZnVuY3Rpb24oKXshbi5hbmltYXRpbmcmJmUmJm4uZmxleEFuaW1hdGUobi5nZXRUYXJnZXQoXCJuZXh0XCIpKX0sbi5wYXVzZT1mdW5jdGlvbigpe2NsZWFySW50ZXJ2YWwobi5hbmltYXRlZFNsaWRlcyksbi5hbmltYXRlZFNsaWRlcz1udWxsLG4ucGxheWluZz0hMSxuLnZhcnMucGF1c2VQbGF5JiZmLnBhdXNlUGxheS51cGRhdGUoXCJwbGF5XCIpLG4uc3luY0V4aXN0cyYmZi5zeW5jKFwicGF1c2VcIil9LG4ucGxheT1mdW5jdGlvbigpe24ucGxheWluZyYmY2xlYXJJbnRlcnZhbChuLmFuaW1hdGVkU2xpZGVzKSxuLmFuaW1hdGVkU2xpZGVzPW4uYW5pbWF0ZWRTbGlkZXN8fHNldEludGVydmFsKG4uYW5pbWF0ZVNsaWRlcyxuLnZhcnMuc2xpZGVzaG93U3BlZWQpLG4uc3RhcnRlZD1uLnBsYXlpbmc9ITAsbi52YXJzLnBhdXNlUGxheSYmZi5wYXVzZVBsYXkudXBkYXRlKFwicGF1c2VcIiksbi5zeW5jRXhpc3RzJiZmLnN5bmMoXCJwbGF5XCIpfSxuLnN0b3A9ZnVuY3Rpb24oKXtuLnBhdXNlKCksbi5zdG9wcGVkPSEwfSxuLmNhbkFkdmFuY2U9ZnVuY3Rpb24oZSx0KXt2YXIgYT1tP24ucGFnaW5nQ291bnQtMTpuLmxhc3Q7cmV0dXJuIHQ/ITA6bSYmbi5jdXJyZW50SXRlbT09PW4uY291bnQtMSYmMD09PWUmJlwicHJldlwiPT09bi5kaXJlY3Rpb24/ITA6bSYmMD09PW4uY3VycmVudEl0ZW0mJmU9PT1uLnBhZ2luZ0NvdW50LTEmJlwibmV4dFwiIT09bi5kaXJlY3Rpb24/ITE6ZSE9PW4uY3VycmVudFNsaWRlfHxtP24udmFycy5hbmltYXRpb25Mb29wPyEwOm4uYXRFbmQmJjA9PT1uLmN1cnJlbnRTbGlkZSYmZT09PWEmJlwibmV4dFwiIT09bi5kaXJlY3Rpb24/ITE6IW4uYXRFbmR8fG4uY3VycmVudFNsaWRlIT09YXx8MCE9PWV8fFwibmV4dFwiIT09bi5kaXJlY3Rpb246ITF9LG4uZ2V0VGFyZ2V0PWZ1bmN0aW9uKGUpe3JldHVybiBuLmRpcmVjdGlvbj1lLFwibmV4dFwiPT09ZT9uLmN1cnJlbnRTbGlkZT09PW4ubGFzdD8wOm4uY3VycmVudFNsaWRlKzE6MD09PW4uY3VycmVudFNsaWRlP24ubGFzdDpuLmN1cnJlbnRTbGlkZS0xfSxuLnNldFByb3BzPWZ1bmN0aW9uKGUsdCxhKXt2YXIgaT1mdW5jdGlvbigpe3ZhciBhPWU/ZToobi5pdGVtVytuLnZhcnMuaXRlbU1hcmdpbikqbi5tb3ZlKm4uYW5pbWF0aW5nVG8saT1mdW5jdGlvbigpe2lmKHYpcmV0dXJuXCJzZXRUb3VjaFwiPT09dD9lOnUmJm4uYW5pbWF0aW5nVG89PT1uLmxhc3Q/MDp1P24ubGltaXQtKG4uaXRlbVcrbi52YXJzLml0ZW1NYXJnaW4pKm4ubW92ZSpuLmFuaW1hdGluZ1RvOm4uYW5pbWF0aW5nVG89PT1uLmxhc3Q/bi5saW1pdDphO3N3aXRjaCh0KXtjYXNlXCJzZXRUb3RhbFwiOnJldHVybiB1PyhuLmNvdW50LTEtbi5jdXJyZW50U2xpZGUrbi5jbG9uZU9mZnNldCkqZToobi5jdXJyZW50U2xpZGUrbi5jbG9uZU9mZnNldCkqZTtjYXNlXCJzZXRUb3VjaFwiOnJldHVybiB1P2U6ZTtjYXNlXCJqdW1wRW5kXCI6cmV0dXJuIHU/ZTpuLmNvdW50KmU7Y2FzZVwianVtcFN0YXJ0XCI6cmV0dXJuIHU/bi5jb3VudCplOmU7ZGVmYXVsdDpyZXR1cm4gZX19KCk7cmV0dXJuLTEqaStcInB4XCJ9KCk7bi50cmFuc2l0aW9ucyYmKGk9ZD9cInRyYW5zbGF0ZTNkKDAsXCIraStcIiwwKVwiOlwidHJhbnNsYXRlM2QoXCIraStcIiwwLDApXCIsYT12b2lkIDAhPT1hP2EvMWUzK1wic1wiOlwiMHNcIixuLmNvbnRhaW5lci5jc3MoXCItXCIrbi5wZngrXCItdHJhbnNpdGlvbi1kdXJhdGlvblwiLGEpLG4uY29udGFpbmVyLmNzcyhcInRyYW5zaXRpb24tZHVyYXRpb25cIixhKSksbi5hcmdzW24ucHJvcF09aSwobi50cmFuc2l0aW9uc3x8dm9pZCAwPT09YSkmJm4uY29udGFpbmVyLmNzcyhuLmFyZ3MpLG4uY29udGFpbmVyLmNzcyhcInRyYW5zZm9ybVwiLGkpfSxuLnNldHVwPWZ1bmN0aW9uKGUpe2lmKHApbi5zbGlkZXMuY3NzKHt3aWR0aDpcIjEwMCVcIixcImZsb2F0XCI6XCJsZWZ0XCIsbWFyZ2luUmlnaHQ6XCItMTAwJVwiLHBvc2l0aW9uOlwicmVsYXRpdmVcIn0pLFwiaW5pdFwiPT09ZSYmKHI/bi5zbGlkZXMuY3NzKHtvcGFjaXR5OjAsZGlzcGxheTpcImJsb2NrXCIsd2Via2l0VHJhbnNpdGlvbjpcIm9wYWNpdHkgXCIrbi52YXJzLmFuaW1hdGlvblNwZWVkLzFlMytcInMgZWFzZVwiLHpJbmRleDoxfSkuZXEobi5jdXJyZW50U2xpZGUpLmNzcyh7b3BhY2l0eToxLHpJbmRleDoyfSk6MD09bi52YXJzLmZhZGVGaXJzdFNsaWRlP24uc2xpZGVzLmNzcyh7b3BhY2l0eTowLGRpc3BsYXk6XCJibG9ja1wiLHpJbmRleDoxfSkuZXEobi5jdXJyZW50U2xpZGUpLmNzcyh7ekluZGV4OjJ9KS5jc3Moe29wYWNpdHk6MX0pOm4uc2xpZGVzLmNzcyh7b3BhY2l0eTowLGRpc3BsYXk6XCJibG9ja1wiLHpJbmRleDoxfSkuZXEobi5jdXJyZW50U2xpZGUpLmNzcyh7ekluZGV4OjJ9KS5hbmltYXRlKHtvcGFjaXR5OjF9LG4udmFycy5hbmltYXRpb25TcGVlZCxuLnZhcnMuZWFzaW5nKSksbi52YXJzLnNtb290aEhlaWdodCYmZi5zbW9vdGhIZWlnaHQoKTtlbHNle3ZhciB0LGE7XCJpbml0XCI9PT1lJiYobi52aWV3cG9ydD0kKCc8ZGl2IGNsYXNzPVwiJytpKyd2aWV3cG9ydFwiPjwvZGl2PicpLmNzcyh7b3ZlcmZsb3c6XCJoaWRkZW5cIixwb3NpdGlvbjpcInJlbGF0aXZlXCJ9KS5hcHBlbmRUbyhuKS5hcHBlbmQobi5jb250YWluZXIpLG4uY2xvbmVDb3VudD0wLG4uY2xvbmVPZmZzZXQ9MCx1JiYoYT0kLm1ha2VBcnJheShuLnNsaWRlcykucmV2ZXJzZSgpLG4uc2xpZGVzPSQoYSksbi5jb250YWluZXIuZW1wdHkoKS5hcHBlbmQobi5zbGlkZXMpKSksbi52YXJzLmFuaW1hdGlvbkxvb3AmJiF2JiYobi5jbG9uZUNvdW50PTIsbi5jbG9uZU9mZnNldD0xLFwiaW5pdFwiIT09ZSYmbi5jb250YWluZXIuZmluZChcIi5jbG9uZVwiKS5yZW1vdmUoKSxuLmNvbnRhaW5lci5hcHBlbmQoZi51bmlxdWVJRChuLnNsaWRlcy5maXJzdCgpLmNsb25lKCkuYWRkQ2xhc3MoXCJjbG9uZVwiKSkuYXR0cihcImFyaWEtaGlkZGVuXCIsXCJ0cnVlXCIpKS5wcmVwZW5kKGYudW5pcXVlSUQobi5zbGlkZXMubGFzdCgpLmNsb25lKCkuYWRkQ2xhc3MoXCJjbG9uZVwiKSkuYXR0cihcImFyaWEtaGlkZGVuXCIsXCJ0cnVlXCIpKSksbi5uZXdTbGlkZXM9JChuLnZhcnMuc2VsZWN0b3IsbiksdD11P24uY291bnQtMS1uLmN1cnJlbnRTbGlkZStuLmNsb25lT2Zmc2V0Om4uY3VycmVudFNsaWRlK24uY2xvbmVPZmZzZXQsZCYmIXY/KG4uY29udGFpbmVyLmhlaWdodCgyMDAqKG4uY291bnQrbi5jbG9uZUNvdW50KStcIiVcIikuY3NzKFwicG9zaXRpb25cIixcImFic29sdXRlXCIpLndpZHRoKFwiMTAwJVwiKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bi5uZXdTbGlkZXMuY3NzKHtkaXNwbGF5OlwiYmxvY2tcIn0pLG4uZG9NYXRoKCksbi52aWV3cG9ydC5oZWlnaHQobi5oKSxuLnNldFByb3BzKHQqbi5oLFwiaW5pdFwiKX0sXCJpbml0XCI9PT1lPzEwMDowKSk6KG4uY29udGFpbmVyLndpZHRoKDIwMCoobi5jb3VudCtuLmNsb25lQ291bnQpK1wiJVwiKSxuLnNldFByb3BzKHQqbi5jb21wdXRlZFcsXCJpbml0XCIpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtuLmRvTWF0aCgpLG4ubmV3U2xpZGVzLmNzcyh7d2lkdGg6bi5jb21wdXRlZFcsbWFyZ2luUmlnaHQ6bi5jb21wdXRlZE0sXCJmbG9hdFwiOlwibGVmdFwiLGRpc3BsYXk6XCJibG9ja1wifSksbi52YXJzLnNtb290aEhlaWdodCYmZi5zbW9vdGhIZWlnaHQoKX0sXCJpbml0XCI9PT1lPzEwMDowKSl9dnx8bi5zbGlkZXMucmVtb3ZlQ2xhc3MoaStcImFjdGl2ZS1zbGlkZVwiKS5lcShuLmN1cnJlbnRTbGlkZSkuYWRkQ2xhc3MoaStcImFjdGl2ZS1zbGlkZVwiKSxuLnZhcnMuaW5pdChuKX0sbi5kb01hdGg9ZnVuY3Rpb24oKXt2YXIgZT1uLnNsaWRlcy5maXJzdCgpLHQ9bi52YXJzLml0ZW1NYXJnaW4sYT1uLnZhcnMubWluSXRlbXMsaT1uLnZhcnMubWF4SXRlbXM7bi53PXZvaWQgMD09PW4udmlld3BvcnQ/bi53aWR0aCgpOm4udmlld3BvcnQud2lkdGgoKSxuLmg9ZS5oZWlnaHQoKSxuLmJveFBhZGRpbmc9ZS5vdXRlcldpZHRoKCktZS53aWR0aCgpLHY/KG4uaXRlbVQ9bi52YXJzLml0ZW1XaWR0aCt0LG4uaXRlbU09dCxuLm1pblc9YT9hKm4uaXRlbVQ6bi53LG4ubWF4Vz1pP2kqbi5pdGVtVC10Om4udyxuLml0ZW1XPW4ubWluVz5uLnc/KG4udy10KihhLTEpKS9hOm4ubWF4VzxuLnc/KG4udy10KihpLTEpKS9pOm4udmFycy5pdGVtV2lkdGg+bi53P24udzpuLnZhcnMuaXRlbVdpZHRoLG4udmlzaWJsZT1NYXRoLmZsb29yKG4udy9uLml0ZW1XKSxuLm1vdmU9bi52YXJzLm1vdmU+MCYmbi52YXJzLm1vdmU8bi52aXNpYmxlP24udmFycy5tb3ZlOm4udmlzaWJsZSxuLnBhZ2luZ0NvdW50PU1hdGguY2VpbCgobi5jb3VudC1uLnZpc2libGUpL24ubW92ZSsxKSxuLmxhc3Q9bi5wYWdpbmdDb3VudC0xLG4ubGltaXQ9MT09PW4ucGFnaW5nQ291bnQ/MDpuLnZhcnMuaXRlbVdpZHRoPm4udz9uLml0ZW1XKihuLmNvdW50LTEpK3QqKG4uY291bnQtMSk6KG4uaXRlbVcrdCkqbi5jb3VudC1uLnctdCk6KG4uaXRlbVc9bi53LG4uaXRlbU09dCxuLnBhZ2luZ0NvdW50PW4uY291bnQsbi5sYXN0PW4uY291bnQtMSksbi5jb21wdXRlZFc9bi5pdGVtVy1uLmJveFBhZGRpbmcsbi5jb21wdXRlZE09bi5pdGVtTX0sbi51cGRhdGU9ZnVuY3Rpb24oZSx0KXtuLmRvTWF0aCgpLHZ8fChlPG4uY3VycmVudFNsaWRlP24uY3VycmVudFNsaWRlKz0xOmU8PW4uY3VycmVudFNsaWRlJiYwIT09ZSYmKG4uY3VycmVudFNsaWRlLT0xKSxuLmFuaW1hdGluZ1RvPW4uY3VycmVudFNsaWRlKSxuLnZhcnMuY29udHJvbE5hdiYmIW4ubWFudWFsQ29udHJvbHMmJihcImFkZFwiPT09dCYmIXZ8fG4ucGFnaW5nQ291bnQ+bi5jb250cm9sTmF2Lmxlbmd0aD9mLmNvbnRyb2xOYXYudXBkYXRlKFwiYWRkXCIpOihcInJlbW92ZVwiPT09dCYmIXZ8fG4ucGFnaW5nQ291bnQ8bi5jb250cm9sTmF2Lmxlbmd0aCkmJih2JiZuLmN1cnJlbnRTbGlkZT5uLmxhc3QmJihuLmN1cnJlbnRTbGlkZS09MSxuLmFuaW1hdGluZ1RvLT0xKSxmLmNvbnRyb2xOYXYudXBkYXRlKFwicmVtb3ZlXCIsbi5sYXN0KSkpLG4udmFycy5kaXJlY3Rpb25OYXYmJmYuZGlyZWN0aW9uTmF2LnVwZGF0ZSgpfSxuLmFkZFNsaWRlPWZ1bmN0aW9uKGUsdCl7dmFyIGE9JChlKTtuLmNvdW50Kz0xLG4ubGFzdD1uLmNvdW50LTEsZCYmdT92b2lkIDAhPT10P24uc2xpZGVzLmVxKG4uY291bnQtdCkuYWZ0ZXIoYSk6bi5jb250YWluZXIucHJlcGVuZChhKTp2b2lkIDAhPT10P24uc2xpZGVzLmVxKHQpLmJlZm9yZShhKTpuLmNvbnRhaW5lci5hcHBlbmQoYSksbi51cGRhdGUodCxcImFkZFwiKSxuLnNsaWRlcz0kKG4udmFycy5zZWxlY3RvcitcIjpub3QoLmNsb25lKVwiLG4pLG4uc2V0dXAoKSxuLnZhcnMuYWRkZWQobil9LG4ucmVtb3ZlU2xpZGU9ZnVuY3Rpb24oZSl7dmFyIHQ9aXNOYU4oZSk/bi5zbGlkZXMuaW5kZXgoJChlKSk6ZTtuLmNvdW50LT0xLG4ubGFzdD1uLmNvdW50LTEsaXNOYU4oZSk/JChlLG4uc2xpZGVzKS5yZW1vdmUoKTpkJiZ1P24uc2xpZGVzLmVxKG4ubGFzdCkucmVtb3ZlKCk6bi5zbGlkZXMuZXEoZSkucmVtb3ZlKCksbi5kb01hdGgoKSxuLnVwZGF0ZSh0LFwicmVtb3ZlXCIpLG4uc2xpZGVzPSQobi52YXJzLnNlbGVjdG9yK1wiOm5vdCguY2xvbmUpXCIsbiksbi5zZXR1cCgpLG4udmFycy5yZW1vdmVkKG4pfSxmLmluaXQoKX0sJCh3aW5kb3cpLmJsdXIoZnVuY3Rpb24odCl7ZT0hMX0pLmZvY3VzKGZ1bmN0aW9uKHQpe2U9ITB9KSwkLmZsZXhzbGlkZXIuZGVmYXVsdHM9e25hbWVzcGFjZTpcImZsZXgtXCIsc2VsZWN0b3I6XCIuc2xpZGVzID4gbGlcIixhbmltYXRpb246XCJmYWRlXCIsZWFzaW5nOlwic3dpbmdcIixkaXJlY3Rpb246XCJob3Jpem9udGFsXCIscmV2ZXJzZTohMSxhbmltYXRpb25Mb29wOiEwLHNtb290aEhlaWdodDohMSxzdGFydEF0OjAsc2xpZGVzaG93OiEwLHNsaWRlc2hvd1NwZWVkOjdlMyxhbmltYXRpb25TcGVlZDo2MDAsaW5pdERlbGF5OjAscmFuZG9taXplOiExLGZhZGVGaXJzdFNsaWRlOiEwLHRodW1iQ2FwdGlvbnM6ITEscGF1c2VPbkFjdGlvbjohMCxwYXVzZU9uSG92ZXI6ITEscGF1c2VJbnZpc2libGU6ITAsdXNlQ1NTOiEwLHRvdWNoOiEwLHZpZGVvOiExLGNvbnRyb2xOYXY6ITAsZGlyZWN0aW9uTmF2OiEwLHByZXZUZXh0OlwiUHJldmlvdXNcIixuZXh0VGV4dDpcIk5leHRcIixrZXlib2FyZDohMCxtdWx0aXBsZUtleWJvYXJkOiExLG1vdXNld2hlZWw6ITEscGF1c2VQbGF5OiExLHBhdXNlVGV4dDpcIlBhdXNlXCIscGxheVRleHQ6XCJQbGF5XCIsY29udHJvbHNDb250YWluZXI6XCJcIixtYW51YWxDb250cm9sczpcIlwiLGN1c3RvbURpcmVjdGlvbk5hdjpcIlwiLHN5bmM6XCJcIixhc05hdkZvcjpcIlwiLGl0ZW1XaWR0aDowLGl0ZW1NYXJnaW46MCxtaW5JdGVtczoxLG1heEl0ZW1zOjAsbW92ZTowLGFsbG93T25lU2xpZGU6ITAsc3RhcnQ6ZnVuY3Rpb24oKXt9LGJlZm9yZTpmdW5jdGlvbigpe30sYWZ0ZXI6ZnVuY3Rpb24oKXt9LGVuZDpmdW5jdGlvbigpe30sYWRkZWQ6ZnVuY3Rpb24oKXt9LHJlbW92ZWQ6ZnVuY3Rpb24oKXt9LGluaXQ6ZnVuY3Rpb24oKXt9fSwkLmZuLmZsZXhzbGlkZXI9ZnVuY3Rpb24oZSl7aWYodm9pZCAwPT09ZSYmKGU9e30pLFwib2JqZWN0XCI9PXR5cGVvZiBlKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdD0kKHRoaXMpLGE9ZS5zZWxlY3Rvcj9lLnNlbGVjdG9yOlwiLnNsaWRlcyA+IGxpXCIsbj10LmZpbmQoYSk7MT09PW4ubGVuZ3RoJiZlLmFsbG93T25lU2xpZGU9PT0hMXx8MD09PW4ubGVuZ3RoPyhuLmZhZGVJbig0MDApLGUuc3RhcnQmJmUuc3RhcnQodCkpOnZvaWQgMD09PXQuZGF0YShcImZsZXhzbGlkZXJcIikmJm5ldyAkLmZsZXhzbGlkZXIodGhpcyxlKX0pO3ZhciB0PSQodGhpcykuZGF0YShcImZsZXhzbGlkZXJcIik7c3dpdGNoKGUpe2Nhc2VcInBsYXlcIjp0LnBsYXkoKTticmVhaztjYXNlXCJwYXVzZVwiOnQucGF1c2UoKTticmVhaztjYXNlXCJzdG9wXCI6dC5zdG9wKCk7YnJlYWs7Y2FzZVwibmV4dFwiOnQuZmxleEFuaW1hdGUodC5nZXRUYXJnZXQoXCJuZXh0XCIpLCEwKTticmVhaztjYXNlXCJwcmV2XCI6Y2FzZVwicHJldmlvdXNcIjp0LmZsZXhBbmltYXRlKHQuZ2V0VGFyZ2V0KFwicHJldlwiKSwhMCk7YnJlYWs7ZGVmYXVsdDpcIm51bWJlclwiPT10eXBlb2YgZSYmdC5mbGV4QW5pbWF0ZShlLCEwKX19fShqUXVlcnkpOyIsIi8qISBNYWduaWZpYyBQb3B1cCAtIHYxLjEuMCAtIDIwMTYtMDItMjBcclxuKiBodHRwOi8vZGltc2VtZW5vdi5jb20vcGx1Z2lucy9tYWduaWZpYy1wb3B1cC9cclxuKiBDb3B5cmlnaHQgKGMpIDIwMTYgRG1pdHJ5IFNlbWVub3Y7ICovXHJcbiFmdW5jdGlvbihhKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImpxdWVyeVwiXSxhKTphKFwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP3JlcXVpcmUoXCJqcXVlcnlcIik6d2luZG93LmpRdWVyeXx8d2luZG93LlplcHRvKX0oZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGg9XCJDbG9zZVwiLGk9XCJCZWZvcmVDbG9zZVwiLGo9XCJBZnRlckNsb3NlXCIsaz1cIkJlZm9yZUFwcGVuZFwiLGw9XCJNYXJrdXBQYXJzZVwiLG09XCJPcGVuXCIsbj1cIkNoYW5nZVwiLG89XCJtZnBcIixwPVwiLlwiK28scT1cIm1mcC1yZWFkeVwiLHI9XCJtZnAtcmVtb3ZpbmdcIixzPVwibWZwLXByZXZlbnQtY2xvc2VcIix0PWZ1bmN0aW9uKCl7fSx1PSEhd2luZG93LmpRdWVyeSx2PWEod2luZG93KSx3PWZ1bmN0aW9uKGEsYyl7Yi5ldi5vbihvK2ErcCxjKX0seD1mdW5jdGlvbihiLGMsZCxlKXt2YXIgZj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3JldHVybiBmLmNsYXNzTmFtZT1cIm1mcC1cIitiLGQmJihmLmlubmVySFRNTD1kKSxlP2MmJmMuYXBwZW5kQ2hpbGQoZik6KGY9YShmKSxjJiZmLmFwcGVuZFRvKGMpKSxmfSx5PWZ1bmN0aW9uKGMsZCl7Yi5ldi50cmlnZ2VySGFuZGxlcihvK2MsZCksYi5zdC5jYWxsYmFja3MmJihjPWMuY2hhckF0KDApLnRvTG93ZXJDYXNlKCkrYy5zbGljZSgxKSxiLnN0LmNhbGxiYWNrc1tjXSYmYi5zdC5jYWxsYmFja3NbY10uYXBwbHkoYixhLmlzQXJyYXkoZCk/ZDpbZF0pKX0sej1mdW5jdGlvbihjKXtyZXR1cm4gYz09PWcmJmIuY3VyclRlbXBsYXRlLmNsb3NlQnRufHwoYi5jdXJyVGVtcGxhdGUuY2xvc2VCdG49YShiLnN0LmNsb3NlTWFya3VwLnJlcGxhY2UoXCIldGl0bGUlXCIsYi5zdC50Q2xvc2UpKSxnPWMpLGIuY3VyclRlbXBsYXRlLmNsb3NlQnRufSxBPWZ1bmN0aW9uKCl7YS5tYWduaWZpY1BvcHVwLmluc3RhbmNlfHwoYj1uZXcgdCxiLmluaXQoKSxhLm1hZ25pZmljUG9wdXAuaW5zdGFuY2U9Yil9LEI9ZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKS5zdHlsZSxiPVtcIm1zXCIsXCJPXCIsXCJNb3pcIixcIldlYmtpdFwiXTtpZih2b2lkIDAhPT1hLnRyYW5zaXRpb24pcmV0dXJuITA7Zm9yKDtiLmxlbmd0aDspaWYoYi5wb3AoKStcIlRyYW5zaXRpb25cImluIGEpcmV0dXJuITA7cmV0dXJuITF9O3QucHJvdG90eXBlPXtjb25zdHJ1Y3Rvcjp0LGluaXQ6ZnVuY3Rpb24oKXt2YXIgYz1uYXZpZ2F0b3IuYXBwVmVyc2lvbjtiLmlzTG93SUU9Yi5pc0lFOD1kb2N1bWVudC5hbGwmJiFkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyLGIuaXNBbmRyb2lkPS9hbmRyb2lkL2dpLnRlc3QoYyksYi5pc0lPUz0vaXBob25lfGlwYWR8aXBvZC9naS50ZXN0KGMpLGIuc3VwcG9ydHNUcmFuc2l0aW9uPUIoKSxiLnByb2JhYmx5TW9iaWxlPWIuaXNBbmRyb2lkfHxiLmlzSU9TfHwvKE9wZXJhIE1pbmkpfEtpbmRsZXx3ZWJPU3xCbGFja0JlcnJ5fChPcGVyYSBNb2JpKXwoV2luZG93cyBQaG9uZSl8SUVNb2JpbGUvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLGQ9YShkb2N1bWVudCksYi5wb3B1cHNDYWNoZT17fX0sb3BlbjpmdW5jdGlvbihjKXt2YXIgZTtpZihjLmlzT2JqPT09ITEpe2IuaXRlbXM9Yy5pdGVtcy50b0FycmF5KCksYi5pbmRleD0wO3ZhciBnLGg9Yy5pdGVtcztmb3IoZT0wO2U8aC5sZW5ndGg7ZSsrKWlmKGc9aFtlXSxnLnBhcnNlZCYmKGc9Zy5lbFswXSksZz09PWMuZWxbMF0pe2IuaW5kZXg9ZTticmVha319ZWxzZSBiLml0ZW1zPWEuaXNBcnJheShjLml0ZW1zKT9jLml0ZW1zOltjLml0ZW1zXSxiLmluZGV4PWMuaW5kZXh8fDA7aWYoYi5pc09wZW4pcmV0dXJuIHZvaWQgYi51cGRhdGVJdGVtSFRNTCgpO2IudHlwZXM9W10sZj1cIlwiLGMubWFpbkVsJiZjLm1haW5FbC5sZW5ndGg/Yi5ldj1jLm1haW5FbC5lcSgwKTpiLmV2PWQsYy5rZXk/KGIucG9wdXBzQ2FjaGVbYy5rZXldfHwoYi5wb3B1cHNDYWNoZVtjLmtleV09e30pLGIuY3VyclRlbXBsYXRlPWIucG9wdXBzQ2FjaGVbYy5rZXldKTpiLmN1cnJUZW1wbGF0ZT17fSxiLnN0PWEuZXh0ZW5kKCEwLHt9LGEubWFnbmlmaWNQb3B1cC5kZWZhdWx0cyxjKSxiLmZpeGVkQ29udGVudFBvcz1cImF1dG9cIj09PWIuc3QuZml4ZWRDb250ZW50UG9zPyFiLnByb2JhYmx5TW9iaWxlOmIuc3QuZml4ZWRDb250ZW50UG9zLGIuc3QubW9kYWwmJihiLnN0LmNsb3NlT25Db250ZW50Q2xpY2s9ITEsYi5zdC5jbG9zZU9uQmdDbGljaz0hMSxiLnN0LnNob3dDbG9zZUJ0bj0hMSxiLnN0LmVuYWJsZUVzY2FwZUtleT0hMSksYi5iZ092ZXJsYXl8fChiLmJnT3ZlcmxheT14KFwiYmdcIikub24oXCJjbGlja1wiK3AsZnVuY3Rpb24oKXtiLmNsb3NlKCl9KSxiLndyYXA9eChcIndyYXBcIikuYXR0cihcInRhYmluZGV4XCIsLTEpLm9uKFwiY2xpY2tcIitwLGZ1bmN0aW9uKGEpe2IuX2NoZWNrSWZDbG9zZShhLnRhcmdldCkmJmIuY2xvc2UoKX0pLGIuY29udGFpbmVyPXgoXCJjb250YWluZXJcIixiLndyYXApKSxiLmNvbnRlbnRDb250YWluZXI9eChcImNvbnRlbnRcIiksYi5zdC5wcmVsb2FkZXImJihiLnByZWxvYWRlcj14KFwicHJlbG9hZGVyXCIsYi5jb250YWluZXIsYi5zdC50TG9hZGluZykpO3ZhciBpPWEubWFnbmlmaWNQb3B1cC5tb2R1bGVzO2ZvcihlPTA7ZTxpLmxlbmd0aDtlKyspe3ZhciBqPWlbZV07aj1qLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2ouc2xpY2UoMSksYltcImluaXRcIitqXS5jYWxsKGIpfXkoXCJCZWZvcmVPcGVuXCIpLGIuc3Quc2hvd0Nsb3NlQnRuJiYoYi5zdC5jbG9zZUJ0bkluc2lkZT8odyhsLGZ1bmN0aW9uKGEsYixjLGQpe2MuY2xvc2VfcmVwbGFjZVdpdGg9eihkLnR5cGUpfSksZis9XCIgbWZwLWNsb3NlLWJ0bi1pblwiKTpiLndyYXAuYXBwZW5kKHooKSkpLGIuc3QuYWxpZ25Ub3AmJihmKz1cIiBtZnAtYWxpZ24tdG9wXCIpLGIuZml4ZWRDb250ZW50UG9zP2Iud3JhcC5jc3Moe292ZXJmbG93OmIuc3Qub3ZlcmZsb3dZLG92ZXJmbG93WDpcImhpZGRlblwiLG92ZXJmbG93WTpiLnN0Lm92ZXJmbG93WX0pOmIud3JhcC5jc3Moe3RvcDp2LnNjcm9sbFRvcCgpLHBvc2l0aW9uOlwiYWJzb2x1dGVcIn0pLChiLnN0LmZpeGVkQmdQb3M9PT0hMXx8XCJhdXRvXCI9PT1iLnN0LmZpeGVkQmdQb3MmJiFiLmZpeGVkQ29udGVudFBvcykmJmIuYmdPdmVybGF5LmNzcyh7aGVpZ2h0OmQuaGVpZ2h0KCkscG9zaXRpb246XCJhYnNvbHV0ZVwifSksYi5zdC5lbmFibGVFc2NhcGVLZXkmJmQub24oXCJrZXl1cFwiK3AsZnVuY3Rpb24oYSl7Mjc9PT1hLmtleUNvZGUmJmIuY2xvc2UoKX0pLHYub24oXCJyZXNpemVcIitwLGZ1bmN0aW9uKCl7Yi51cGRhdGVTaXplKCl9KSxiLnN0LmNsb3NlT25Db250ZW50Q2xpY2t8fChmKz1cIiBtZnAtYXV0by1jdXJzb3JcIiksZiYmYi53cmFwLmFkZENsYXNzKGYpO3ZhciBrPWIud0g9di5oZWlnaHQoKSxuPXt9O2lmKGIuZml4ZWRDb250ZW50UG9zJiZiLl9oYXNTY3JvbGxCYXIoaykpe3ZhciBvPWIuX2dldFNjcm9sbGJhclNpemUoKTtvJiYobi5tYXJnaW5SaWdodD1vKX1iLmZpeGVkQ29udGVudFBvcyYmKGIuaXNJRTc/YShcImJvZHksIGh0bWxcIikuY3NzKFwib3ZlcmZsb3dcIixcImhpZGRlblwiKTpuLm92ZXJmbG93PVwiaGlkZGVuXCIpO3ZhciByPWIuc3QubWFpbkNsYXNzO3JldHVybiBiLmlzSUU3JiYocis9XCIgbWZwLWllN1wiKSxyJiZiLl9hZGRDbGFzc1RvTUZQKHIpLGIudXBkYXRlSXRlbUhUTUwoKSx5KFwiQnVpbGRDb250cm9sc1wiKSxhKFwiaHRtbFwiKS5jc3MobiksYi5iZ092ZXJsYXkuYWRkKGIud3JhcCkucHJlcGVuZFRvKGIuc3QucHJlcGVuZFRvfHxhKGRvY3VtZW50LmJvZHkpKSxiLl9sYXN0Rm9jdXNlZEVsPWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQsc2V0VGltZW91dChmdW5jdGlvbigpe2IuY29udGVudD8oYi5fYWRkQ2xhc3NUb01GUChxKSxiLl9zZXRGb2N1cygpKTpiLmJnT3ZlcmxheS5hZGRDbGFzcyhxKSxkLm9uKFwiZm9jdXNpblwiK3AsYi5fb25Gb2N1c0luKX0sMTYpLGIuaXNPcGVuPSEwLGIudXBkYXRlU2l6ZShrKSx5KG0pLGN9LGNsb3NlOmZ1bmN0aW9uKCl7Yi5pc09wZW4mJih5KGkpLGIuaXNPcGVuPSExLGIuc3QucmVtb3ZhbERlbGF5JiYhYi5pc0xvd0lFJiZiLnN1cHBvcnRzVHJhbnNpdGlvbj8oYi5fYWRkQ2xhc3NUb01GUChyKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi5fY2xvc2UoKX0sYi5zdC5yZW1vdmFsRGVsYXkpKTpiLl9jbG9zZSgpKX0sX2Nsb3NlOmZ1bmN0aW9uKCl7eShoKTt2YXIgYz1yK1wiIFwiK3ErXCIgXCI7aWYoYi5iZ092ZXJsYXkuZGV0YWNoKCksYi53cmFwLmRldGFjaCgpLGIuY29udGFpbmVyLmVtcHR5KCksYi5zdC5tYWluQ2xhc3MmJihjKz1iLnN0Lm1haW5DbGFzcytcIiBcIiksYi5fcmVtb3ZlQ2xhc3NGcm9tTUZQKGMpLGIuZml4ZWRDb250ZW50UG9zKXt2YXIgZT17bWFyZ2luUmlnaHQ6XCJcIn07Yi5pc0lFNz9hKFwiYm9keSwgaHRtbFwiKS5jc3MoXCJvdmVyZmxvd1wiLFwiXCIpOmUub3ZlcmZsb3c9XCJcIixhKFwiaHRtbFwiKS5jc3MoZSl9ZC5vZmYoXCJrZXl1cFwiK3ArXCIgZm9jdXNpblwiK3ApLGIuZXYub2ZmKHApLGIud3JhcC5hdHRyKFwiY2xhc3NcIixcIm1mcC13cmFwXCIpLnJlbW92ZUF0dHIoXCJzdHlsZVwiKSxiLmJnT3ZlcmxheS5hdHRyKFwiY2xhc3NcIixcIm1mcC1iZ1wiKSxiLmNvbnRhaW5lci5hdHRyKFwiY2xhc3NcIixcIm1mcC1jb250YWluZXJcIiksIWIuc3Quc2hvd0Nsb3NlQnRufHxiLnN0LmNsb3NlQnRuSW5zaWRlJiZiLmN1cnJUZW1wbGF0ZVtiLmN1cnJJdGVtLnR5cGVdIT09ITB8fGIuY3VyclRlbXBsYXRlLmNsb3NlQnRuJiZiLmN1cnJUZW1wbGF0ZS5jbG9zZUJ0bi5kZXRhY2goKSxiLnN0LmF1dG9Gb2N1c0xhc3QmJmIuX2xhc3RGb2N1c2VkRWwmJmEoYi5fbGFzdEZvY3VzZWRFbCkuZm9jdXMoKSxiLmN1cnJJdGVtPW51bGwsYi5jb250ZW50PW51bGwsYi5jdXJyVGVtcGxhdGU9bnVsbCxiLnByZXZIZWlnaHQ9MCx5KGopfSx1cGRhdGVTaXplOmZ1bmN0aW9uKGEpe2lmKGIuaXNJT1Mpe3ZhciBjPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aC93aW5kb3cuaW5uZXJXaWR0aCxkPXdpbmRvdy5pbm5lckhlaWdodCpjO2Iud3JhcC5jc3MoXCJoZWlnaHRcIixkKSxiLndIPWR9ZWxzZSBiLndIPWF8fHYuaGVpZ2h0KCk7Yi5maXhlZENvbnRlbnRQb3N8fGIud3JhcC5jc3MoXCJoZWlnaHRcIixiLndIKSx5KFwiUmVzaXplXCIpfSx1cGRhdGVJdGVtSFRNTDpmdW5jdGlvbigpe3ZhciBjPWIuaXRlbXNbYi5pbmRleF07Yi5jb250ZW50Q29udGFpbmVyLmRldGFjaCgpLGIuY29udGVudCYmYi5jb250ZW50LmRldGFjaCgpLGMucGFyc2VkfHwoYz1iLnBhcnNlRWwoYi5pbmRleCkpO3ZhciBkPWMudHlwZTtpZih5KFwiQmVmb3JlQ2hhbmdlXCIsW2IuY3Vyckl0ZW0/Yi5jdXJySXRlbS50eXBlOlwiXCIsZF0pLGIuY3Vyckl0ZW09YywhYi5jdXJyVGVtcGxhdGVbZF0pe3ZhciBmPWIuc3RbZF0/Yi5zdFtkXS5tYXJrdXA6ITE7eShcIkZpcnN0TWFya3VwUGFyc2VcIixmKSxmP2IuY3VyclRlbXBsYXRlW2RdPWEoZik6Yi5jdXJyVGVtcGxhdGVbZF09ITB9ZSYmZSE9PWMudHlwZSYmYi5jb250YWluZXIucmVtb3ZlQ2xhc3MoXCJtZnAtXCIrZStcIi1ob2xkZXJcIik7dmFyIGc9YltcImdldFwiK2QuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrZC5zbGljZSgxKV0oYyxiLmN1cnJUZW1wbGF0ZVtkXSk7Yi5hcHBlbmRDb250ZW50KGcsZCksYy5wcmVsb2FkZWQ9ITAseShuLGMpLGU9Yy50eXBlLGIuY29udGFpbmVyLnByZXBlbmQoYi5jb250ZW50Q29udGFpbmVyKSx5KFwiQWZ0ZXJDaGFuZ2VcIil9LGFwcGVuZENvbnRlbnQ6ZnVuY3Rpb24oYSxjKXtiLmNvbnRlbnQ9YSxhP2Iuc3Quc2hvd0Nsb3NlQnRuJiZiLnN0LmNsb3NlQnRuSW5zaWRlJiZiLmN1cnJUZW1wbGF0ZVtjXT09PSEwP2IuY29udGVudC5maW5kKFwiLm1mcC1jbG9zZVwiKS5sZW5ndGh8fGIuY29udGVudC5hcHBlbmQoeigpKTpiLmNvbnRlbnQ9YTpiLmNvbnRlbnQ9XCJcIix5KGspLGIuY29udGFpbmVyLmFkZENsYXNzKFwibWZwLVwiK2MrXCItaG9sZGVyXCIpLGIuY29udGVudENvbnRhaW5lci5hcHBlbmQoYi5jb250ZW50KX0scGFyc2VFbDpmdW5jdGlvbihjKXt2YXIgZCxlPWIuaXRlbXNbY107aWYoZS50YWdOYW1lP2U9e2VsOmEoZSl9OihkPWUudHlwZSxlPXtkYXRhOmUsc3JjOmUuc3JjfSksZS5lbCl7Zm9yKHZhciBmPWIudHlwZXMsZz0wO2c8Zi5sZW5ndGg7ZysrKWlmKGUuZWwuaGFzQ2xhc3MoXCJtZnAtXCIrZltnXSkpe2Q9ZltnXTticmVha31lLnNyYz1lLmVsLmF0dHIoXCJkYXRhLW1mcC1zcmNcIiksZS5zcmN8fChlLnNyYz1lLmVsLmF0dHIoXCJocmVmXCIpKX1yZXR1cm4gZS50eXBlPWR8fGIuc3QudHlwZXx8XCJpbmxpbmVcIixlLmluZGV4PWMsZS5wYXJzZWQ9ITAsYi5pdGVtc1tjXT1lLHkoXCJFbGVtZW50UGFyc2VcIixlKSxiLml0ZW1zW2NdfSxhZGRHcm91cDpmdW5jdGlvbihhLGMpe3ZhciBkPWZ1bmN0aW9uKGQpe2QubWZwRWw9dGhpcyxiLl9vcGVuQ2xpY2soZCxhLGMpfTtjfHwoYz17fSk7dmFyIGU9XCJjbGljay5tYWduaWZpY1BvcHVwXCI7Yy5tYWluRWw9YSxjLml0ZW1zPyhjLmlzT2JqPSEwLGEub2ZmKGUpLm9uKGUsZCkpOihjLmlzT2JqPSExLGMuZGVsZWdhdGU/YS5vZmYoZSkub24oZSxjLmRlbGVnYXRlLGQpOihjLml0ZW1zPWEsYS5vZmYoZSkub24oZSxkKSkpfSxfb3BlbkNsaWNrOmZ1bmN0aW9uKGMsZCxlKXt2YXIgZj12b2lkIDAhPT1lLm1pZENsaWNrP2UubWlkQ2xpY2s6YS5tYWduaWZpY1BvcHVwLmRlZmF1bHRzLm1pZENsaWNrO2lmKGZ8fCEoMj09PWMud2hpY2h8fGMuY3RybEtleXx8Yy5tZXRhS2V5fHxjLmFsdEtleXx8Yy5zaGlmdEtleSkpe3ZhciBnPXZvaWQgMCE9PWUuZGlzYWJsZU9uP2UuZGlzYWJsZU9uOmEubWFnbmlmaWNQb3B1cC5kZWZhdWx0cy5kaXNhYmxlT247aWYoZylpZihhLmlzRnVuY3Rpb24oZykpe2lmKCFnLmNhbGwoYikpcmV0dXJuITB9ZWxzZSBpZih2LndpZHRoKCk8ZylyZXR1cm4hMDtjLnR5cGUmJihjLnByZXZlbnREZWZhdWx0KCksYi5pc09wZW4mJmMuc3RvcFByb3BhZ2F0aW9uKCkpLGUuZWw9YShjLm1mcEVsKSxlLmRlbGVnYXRlJiYoZS5pdGVtcz1kLmZpbmQoZS5kZWxlZ2F0ZSkpLGIub3BlbihlKX19LHVwZGF0ZVN0YXR1czpmdW5jdGlvbihhLGQpe2lmKGIucHJlbG9hZGVyKXtjIT09YSYmYi5jb250YWluZXIucmVtb3ZlQ2xhc3MoXCJtZnAtcy1cIitjKSxkfHxcImxvYWRpbmdcIiE9PWF8fChkPWIuc3QudExvYWRpbmcpO3ZhciBlPXtzdGF0dXM6YSx0ZXh0OmR9O3koXCJVcGRhdGVTdGF0dXNcIixlKSxhPWUuc3RhdHVzLGQ9ZS50ZXh0LGIucHJlbG9hZGVyLmh0bWwoZCksYi5wcmVsb2FkZXIuZmluZChcImFcIikub24oXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2Euc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCl9KSxiLmNvbnRhaW5lci5hZGRDbGFzcyhcIm1mcC1zLVwiK2EpLGM9YX19LF9jaGVja0lmQ2xvc2U6ZnVuY3Rpb24oYyl7aWYoIWEoYykuaGFzQ2xhc3Mocykpe3ZhciBkPWIuc3QuY2xvc2VPbkNvbnRlbnRDbGljayxlPWIuc3QuY2xvc2VPbkJnQ2xpY2s7aWYoZCYmZSlyZXR1cm4hMDtpZighYi5jb250ZW50fHxhKGMpLmhhc0NsYXNzKFwibWZwLWNsb3NlXCIpfHxiLnByZWxvYWRlciYmYz09PWIucHJlbG9hZGVyWzBdKXJldHVybiEwO2lmKGM9PT1iLmNvbnRlbnRbMF18fGEuY29udGFpbnMoYi5jb250ZW50WzBdLGMpKXtpZihkKXJldHVybiEwfWVsc2UgaWYoZSYmYS5jb250YWlucyhkb2N1bWVudCxjKSlyZXR1cm4hMDtyZXR1cm4hMX19LF9hZGRDbGFzc1RvTUZQOmZ1bmN0aW9uKGEpe2IuYmdPdmVybGF5LmFkZENsYXNzKGEpLGIud3JhcC5hZGRDbGFzcyhhKX0sX3JlbW92ZUNsYXNzRnJvbU1GUDpmdW5jdGlvbihhKXt0aGlzLmJnT3ZlcmxheS5yZW1vdmVDbGFzcyhhKSxiLndyYXAucmVtb3ZlQ2xhc3MoYSl9LF9oYXNTY3JvbGxCYXI6ZnVuY3Rpb24oYSl7cmV0dXJuKGIuaXNJRTc/ZC5oZWlnaHQoKTpkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodCk+KGF8fHYuaGVpZ2h0KCkpfSxfc2V0Rm9jdXM6ZnVuY3Rpb24oKXsoYi5zdC5mb2N1cz9iLmNvbnRlbnQuZmluZChiLnN0LmZvY3VzKS5lcSgwKTpiLndyYXApLmZvY3VzKCl9LF9vbkZvY3VzSW46ZnVuY3Rpb24oYyl7cmV0dXJuIGMudGFyZ2V0PT09Yi53cmFwWzBdfHxhLmNvbnRhaW5zKGIud3JhcFswXSxjLnRhcmdldCk/dm9pZCAwOihiLl9zZXRGb2N1cygpLCExKX0sX3BhcnNlTWFya3VwOmZ1bmN0aW9uKGIsYyxkKXt2YXIgZTtkLmRhdGEmJihjPWEuZXh0ZW5kKGQuZGF0YSxjKSkseShsLFtiLGMsZF0pLGEuZWFjaChjLGZ1bmN0aW9uKGMsZCl7aWYodm9pZCAwPT09ZHx8ZD09PSExKXJldHVybiEwO2lmKGU9Yy5zcGxpdChcIl9cIiksZS5sZW5ndGg+MSl7dmFyIGY9Yi5maW5kKHArXCItXCIrZVswXSk7aWYoZi5sZW5ndGg+MCl7dmFyIGc9ZVsxXTtcInJlcGxhY2VXaXRoXCI9PT1nP2ZbMF0hPT1kWzBdJiZmLnJlcGxhY2VXaXRoKGQpOlwiaW1nXCI9PT1nP2YuaXMoXCJpbWdcIik/Zi5hdHRyKFwic3JjXCIsZCk6Zi5yZXBsYWNlV2l0aChhKFwiPGltZz5cIikuYXR0cihcInNyY1wiLGQpLmF0dHIoXCJjbGFzc1wiLGYuYXR0cihcImNsYXNzXCIpKSk6Zi5hdHRyKGVbMV0sZCl9fWVsc2UgYi5maW5kKHArXCItXCIrYykuaHRtbChkKX0pfSxfZ2V0U2Nyb2xsYmFyU2l6ZTpmdW5jdGlvbigpe2lmKHZvaWQgMD09PWIuc2Nyb2xsYmFyU2l6ZSl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTthLnN0eWxlLmNzc1RleHQ9XCJ3aWR0aDogOTlweDsgaGVpZ2h0OiA5OXB4OyBvdmVyZmxvdzogc2Nyb2xsOyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogLTk5OTlweDtcIixkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpLGIuc2Nyb2xsYmFyU2l6ZT1hLm9mZnNldFdpZHRoLWEuY2xpZW50V2lkdGgsZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChhKX1yZXR1cm4gYi5zY3JvbGxiYXJTaXplfX0sYS5tYWduaWZpY1BvcHVwPXtpbnN0YW5jZTpudWxsLHByb3RvOnQucHJvdG90eXBlLG1vZHVsZXM6W10sb3BlbjpmdW5jdGlvbihiLGMpe3JldHVybiBBKCksYj1iP2EuZXh0ZW5kKCEwLHt9LGIpOnt9LGIuaXNPYmo9ITAsYi5pbmRleD1jfHwwLHRoaXMuaW5zdGFuY2Uub3BlbihiKX0sY2xvc2U6ZnVuY3Rpb24oKXtyZXR1cm4gYS5tYWduaWZpY1BvcHVwLmluc3RhbmNlJiZhLm1hZ25pZmljUG9wdXAuaW5zdGFuY2UuY2xvc2UoKX0scmVnaXN0ZXJNb2R1bGU6ZnVuY3Rpb24oYixjKXtjLm9wdGlvbnMmJihhLm1hZ25pZmljUG9wdXAuZGVmYXVsdHNbYl09Yy5vcHRpb25zKSxhLmV4dGVuZCh0aGlzLnByb3RvLGMucHJvdG8pLHRoaXMubW9kdWxlcy5wdXNoKGIpfSxkZWZhdWx0czp7ZGlzYWJsZU9uOjAsa2V5Om51bGwsbWlkQ2xpY2s6ITEsbWFpbkNsYXNzOlwiXCIscHJlbG9hZGVyOiEwLGZvY3VzOlwiXCIsY2xvc2VPbkNvbnRlbnRDbGljazohMSxjbG9zZU9uQmdDbGljazohMCxjbG9zZUJ0bkluc2lkZTohMCxzaG93Q2xvc2VCdG46ITAsZW5hYmxlRXNjYXBlS2V5OiEwLG1vZGFsOiExLGFsaWduVG9wOiExLHJlbW92YWxEZWxheTowLHByZXBlbmRUbzpudWxsLGZpeGVkQ29udGVudFBvczpcImF1dG9cIixmaXhlZEJnUG9zOlwiYXV0b1wiLG92ZXJmbG93WTpcImF1dG9cIixjbG9zZU1hcmt1cDonPGJ1dHRvbiB0aXRsZT1cIiV0aXRsZSVcIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJtZnAtY2xvc2VcIj4mIzIxNTs8L2J1dHRvbj4nLHRDbG9zZTpcIkNsb3NlIChFc2MpXCIsdExvYWRpbmc6XCJMb2FkaW5nLi4uXCIsYXV0b0ZvY3VzTGFzdDohMH19LGEuZm4ubWFnbmlmaWNQb3B1cD1mdW5jdGlvbihjKXtBKCk7dmFyIGQ9YSh0aGlzKTtpZihcInN0cmluZ1wiPT10eXBlb2YgYylpZihcIm9wZW5cIj09PWMpe3ZhciBlLGY9dT9kLmRhdGEoXCJtYWduaWZpY1BvcHVwXCIpOmRbMF0ubWFnbmlmaWNQb3B1cCxnPXBhcnNlSW50KGFyZ3VtZW50c1sxXSwxMCl8fDA7Zi5pdGVtcz9lPWYuaXRlbXNbZ106KGU9ZCxmLmRlbGVnYXRlJiYoZT1lLmZpbmQoZi5kZWxlZ2F0ZSkpLGU9ZS5lcShnKSksYi5fb3BlbkNsaWNrKHttZnBFbDplfSxkLGYpfWVsc2UgYi5pc09wZW4mJmJbY10uYXBwbHkoYixBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSkpO2Vsc2UgYz1hLmV4dGVuZCghMCx7fSxjKSx1P2QuZGF0YShcIm1hZ25pZmljUG9wdXBcIixjKTpkWzBdLm1hZ25pZmljUG9wdXA9YyxiLmFkZEdyb3VwKGQsYyk7cmV0dXJuIGR9O3ZhciBDLEQsRSxGPVwiaW5saW5lXCIsRz1mdW5jdGlvbigpe0UmJihELmFmdGVyKEUuYWRkQ2xhc3MoQykpLmRldGFjaCgpLEU9bnVsbCl9O2EubWFnbmlmaWNQb3B1cC5yZWdpc3Rlck1vZHVsZShGLHtvcHRpb25zOntoaWRkZW5DbGFzczpcImhpZGVcIixtYXJrdXA6XCJcIix0Tm90Rm91bmQ6XCJDb250ZW50IG5vdCBmb3VuZFwifSxwcm90bzp7aW5pdElubGluZTpmdW5jdGlvbigpe2IudHlwZXMucHVzaChGKSx3KGgrXCIuXCIrRixmdW5jdGlvbigpe0coKX0pfSxnZXRJbmxpbmU6ZnVuY3Rpb24oYyxkKXtpZihHKCksYy5zcmMpe3ZhciBlPWIuc3QuaW5saW5lLGY9YShjLnNyYyk7aWYoZi5sZW5ndGgpe3ZhciBnPWZbMF0ucGFyZW50Tm9kZTtnJiZnLnRhZ05hbWUmJihEfHwoQz1lLmhpZGRlbkNsYXNzLEQ9eChDKSxDPVwibWZwLVwiK0MpLEU9Zi5hZnRlcihEKS5kZXRhY2goKS5yZW1vdmVDbGFzcyhDKSksYi51cGRhdGVTdGF0dXMoXCJyZWFkeVwiKX1lbHNlIGIudXBkYXRlU3RhdHVzKFwiZXJyb3JcIixlLnROb3RGb3VuZCksZj1hKFwiPGRpdj5cIik7cmV0dXJuIGMuaW5saW5lRWxlbWVudD1mLGZ9cmV0dXJuIGIudXBkYXRlU3RhdHVzKFwicmVhZHlcIiksYi5fcGFyc2VNYXJrdXAoZCx7fSxjKSxkfX19KTt2YXIgSCxJPVwiYWpheFwiLEo9ZnVuY3Rpb24oKXtIJiZhKGRvY3VtZW50LmJvZHkpLnJlbW92ZUNsYXNzKEgpfSxLPWZ1bmN0aW9uKCl7SigpLGIucmVxJiZiLnJlcS5hYm9ydCgpfTthLm1hZ25pZmljUG9wdXAucmVnaXN0ZXJNb2R1bGUoSSx7b3B0aW9uczp7c2V0dGluZ3M6bnVsbCxjdXJzb3I6XCJtZnAtYWpheC1jdXJcIix0RXJyb3I6JzxhIGhyZWY9XCIldXJsJVwiPlRoZSBjb250ZW50PC9hPiBjb3VsZCBub3QgYmUgbG9hZGVkLid9LHByb3RvOntpbml0QWpheDpmdW5jdGlvbigpe2IudHlwZXMucHVzaChJKSxIPWIuc3QuYWpheC5jdXJzb3IsdyhoK1wiLlwiK0ksSyksdyhcIkJlZm9yZUNoYW5nZS5cIitJLEspfSxnZXRBamF4OmZ1bmN0aW9uKGMpe0gmJmEoZG9jdW1lbnQuYm9keSkuYWRkQ2xhc3MoSCksYi51cGRhdGVTdGF0dXMoXCJsb2FkaW5nXCIpO3ZhciBkPWEuZXh0ZW5kKHt1cmw6Yy5zcmMsc3VjY2VzczpmdW5jdGlvbihkLGUsZil7dmFyIGc9e2RhdGE6ZCx4aHI6Zn07eShcIlBhcnNlQWpheFwiLGcpLGIuYXBwZW5kQ29udGVudChhKGcuZGF0YSksSSksYy5maW5pc2hlZD0hMCxKKCksYi5fc2V0Rm9jdXMoKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi53cmFwLmFkZENsYXNzKHEpfSwxNiksYi51cGRhdGVTdGF0dXMoXCJyZWFkeVwiKSx5KFwiQWpheENvbnRlbnRBZGRlZFwiKX0sZXJyb3I6ZnVuY3Rpb24oKXtKKCksYy5maW5pc2hlZD1jLmxvYWRFcnJvcj0hMCxiLnVwZGF0ZVN0YXR1cyhcImVycm9yXCIsYi5zdC5hamF4LnRFcnJvci5yZXBsYWNlKFwiJXVybCVcIixjLnNyYykpfX0sYi5zdC5hamF4LnNldHRpbmdzKTtyZXR1cm4gYi5yZXE9YS5hamF4KGQpLFwiXCJ9fX0pO3ZhciBMLE09ZnVuY3Rpb24oYyl7aWYoYy5kYXRhJiZ2b2lkIDAhPT1jLmRhdGEudGl0bGUpcmV0dXJuIGMuZGF0YS50aXRsZTt2YXIgZD1iLnN0LmltYWdlLnRpdGxlU3JjO2lmKGQpe2lmKGEuaXNGdW5jdGlvbihkKSlyZXR1cm4gZC5jYWxsKGIsYyk7aWYoYy5lbClyZXR1cm4gYy5lbC5hdHRyKGQpfHxcIlwifXJldHVyblwiXCJ9O2EubWFnbmlmaWNQb3B1cC5yZWdpc3Rlck1vZHVsZShcImltYWdlXCIse29wdGlvbnM6e21hcmt1cDonPGRpdiBjbGFzcz1cIm1mcC1maWd1cmVcIj48ZGl2IGNsYXNzPVwibWZwLWNsb3NlXCI+PC9kaXY+PGZpZ3VyZT48ZGl2IGNsYXNzPVwibWZwLWltZ1wiPjwvZGl2PjxmaWdjYXB0aW9uPjxkaXYgY2xhc3M9XCJtZnAtYm90dG9tLWJhclwiPjxkaXYgY2xhc3M9XCJtZnAtdGl0bGVcIj48L2Rpdj48ZGl2IGNsYXNzPVwibWZwLWNvdW50ZXJcIj48L2Rpdj48L2Rpdj48L2ZpZ2NhcHRpb24+PC9maWd1cmU+PC9kaXY+JyxjdXJzb3I6XCJtZnAtem9vbS1vdXQtY3VyXCIsdGl0bGVTcmM6XCJ0aXRsZVwiLHZlcnRpY2FsRml0OiEwLHRFcnJvcjonPGEgaHJlZj1cIiV1cmwlXCI+VGhlIGltYWdlPC9hPiBjb3VsZCBub3QgYmUgbG9hZGVkLid9LHByb3RvOntpbml0SW1hZ2U6ZnVuY3Rpb24oKXt2YXIgYz1iLnN0LmltYWdlLGQ9XCIuaW1hZ2VcIjtiLnR5cGVzLnB1c2goXCJpbWFnZVwiKSx3KG0rZCxmdW5jdGlvbigpe1wiaW1hZ2VcIj09PWIuY3Vyckl0ZW0udHlwZSYmYy5jdXJzb3ImJmEoZG9jdW1lbnQuYm9keSkuYWRkQ2xhc3MoYy5jdXJzb3IpfSksdyhoK2QsZnVuY3Rpb24oKXtjLmN1cnNvciYmYShkb2N1bWVudC5ib2R5KS5yZW1vdmVDbGFzcyhjLmN1cnNvciksdi5vZmYoXCJyZXNpemVcIitwKX0pLHcoXCJSZXNpemVcIitkLGIucmVzaXplSW1hZ2UpLGIuaXNMb3dJRSYmdyhcIkFmdGVyQ2hhbmdlXCIsYi5yZXNpemVJbWFnZSl9LHJlc2l6ZUltYWdlOmZ1bmN0aW9uKCl7dmFyIGE9Yi5jdXJySXRlbTtpZihhJiZhLmltZyYmYi5zdC5pbWFnZS52ZXJ0aWNhbEZpdCl7dmFyIGM9MDtiLmlzTG93SUUmJihjPXBhcnNlSW50KGEuaW1nLmNzcyhcInBhZGRpbmctdG9wXCIpLDEwKStwYXJzZUludChhLmltZy5jc3MoXCJwYWRkaW5nLWJvdHRvbVwiKSwxMCkpLGEuaW1nLmNzcyhcIm1heC1oZWlnaHRcIixiLndILWMpfX0sX29uSW1hZ2VIYXNTaXplOmZ1bmN0aW9uKGEpe2EuaW1nJiYoYS5oYXNTaXplPSEwLEwmJmNsZWFySW50ZXJ2YWwoTCksYS5pc0NoZWNraW5nSW1nU2l6ZT0hMSx5KFwiSW1hZ2VIYXNTaXplXCIsYSksYS5pbWdIaWRkZW4mJihiLmNvbnRlbnQmJmIuY29udGVudC5yZW1vdmVDbGFzcyhcIm1mcC1sb2FkaW5nXCIpLGEuaW1nSGlkZGVuPSExKSl9LGZpbmRJbWFnZVNpemU6ZnVuY3Rpb24oYSl7dmFyIGM9MCxkPWEuaW1nWzBdLGU9ZnVuY3Rpb24oZil7TCYmY2xlYXJJbnRlcnZhbChMKSxMPXNldEludGVydmFsKGZ1bmN0aW9uKCl7cmV0dXJuIGQubmF0dXJhbFdpZHRoPjA/dm9pZCBiLl9vbkltYWdlSGFzU2l6ZShhKTooYz4yMDAmJmNsZWFySW50ZXJ2YWwoTCksYysrLHZvaWQoMz09PWM/ZSgxMCk6NDA9PT1jP2UoNTApOjEwMD09PWMmJmUoNTAwKSkpfSxmKX07ZSgxKX0sZ2V0SW1hZ2U6ZnVuY3Rpb24oYyxkKXt2YXIgZT0wLGY9ZnVuY3Rpb24oKXtjJiYoYy5pbWdbMF0uY29tcGxldGU/KGMuaW1nLm9mZihcIi5tZnBsb2FkZXJcIiksYz09PWIuY3Vyckl0ZW0mJihiLl9vbkltYWdlSGFzU2l6ZShjKSxiLnVwZGF0ZVN0YXR1cyhcInJlYWR5XCIpKSxjLmhhc1NpemU9ITAsYy5sb2FkZWQ9ITAseShcIkltYWdlTG9hZENvbXBsZXRlXCIpKTooZSsrLDIwMD5lP3NldFRpbWVvdXQoZiwxMDApOmcoKSkpfSxnPWZ1bmN0aW9uKCl7YyYmKGMuaW1nLm9mZihcIi5tZnBsb2FkZXJcIiksYz09PWIuY3Vyckl0ZW0mJihiLl9vbkltYWdlSGFzU2l6ZShjKSxiLnVwZGF0ZVN0YXR1cyhcImVycm9yXCIsaC50RXJyb3IucmVwbGFjZShcIiV1cmwlXCIsYy5zcmMpKSksYy5oYXNTaXplPSEwLGMubG9hZGVkPSEwLGMubG9hZEVycm9yPSEwKX0saD1iLnN0LmltYWdlLGk9ZC5maW5kKFwiLm1mcC1pbWdcIik7aWYoaS5sZW5ndGgpe3ZhciBqPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7ai5jbGFzc05hbWU9XCJtZnAtaW1nXCIsYy5lbCYmYy5lbC5maW5kKFwiaW1nXCIpLmxlbmd0aCYmKGouYWx0PWMuZWwuZmluZChcImltZ1wiKS5hdHRyKFwiYWx0XCIpKSxjLmltZz1hKGopLm9uKFwibG9hZC5tZnBsb2FkZXJcIixmKS5vbihcImVycm9yLm1mcGxvYWRlclwiLGcpLGouc3JjPWMuc3JjLGkuaXMoXCJpbWdcIikmJihjLmltZz1jLmltZy5jbG9uZSgpKSxqPWMuaW1nWzBdLGoubmF0dXJhbFdpZHRoPjA/Yy5oYXNTaXplPSEwOmoud2lkdGh8fChjLmhhc1NpemU9ITEpfXJldHVybiBiLl9wYXJzZU1hcmt1cChkLHt0aXRsZTpNKGMpLGltZ19yZXBsYWNlV2l0aDpjLmltZ30sYyksYi5yZXNpemVJbWFnZSgpLGMuaGFzU2l6ZT8oTCYmY2xlYXJJbnRlcnZhbChMKSxjLmxvYWRFcnJvcj8oZC5hZGRDbGFzcyhcIm1mcC1sb2FkaW5nXCIpLGIudXBkYXRlU3RhdHVzKFwiZXJyb3JcIixoLnRFcnJvci5yZXBsYWNlKFwiJXVybCVcIixjLnNyYykpKTooZC5yZW1vdmVDbGFzcyhcIm1mcC1sb2FkaW5nXCIpLGIudXBkYXRlU3RhdHVzKFwicmVhZHlcIikpLGQpOihiLnVwZGF0ZVN0YXR1cyhcImxvYWRpbmdcIiksYy5sb2FkaW5nPSEwLGMuaGFzU2l6ZXx8KGMuaW1nSGlkZGVuPSEwLGQuYWRkQ2xhc3MoXCJtZnAtbG9hZGluZ1wiKSxiLmZpbmRJbWFnZVNpemUoYykpLGQpfX19KTt2YXIgTixPPWZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMD09PU4mJihOPXZvaWQgMCE9PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpLnN0eWxlLk1velRyYW5zZm9ybSksTn07YS5tYWduaWZpY1BvcHVwLnJlZ2lzdGVyTW9kdWxlKFwiem9vbVwiLHtvcHRpb25zOntlbmFibGVkOiExLGVhc2luZzpcImVhc2UtaW4tb3V0XCIsZHVyYXRpb246MzAwLG9wZW5lcjpmdW5jdGlvbihhKXtyZXR1cm4gYS5pcyhcImltZ1wiKT9hOmEuZmluZChcImltZ1wiKX19LHByb3RvOntpbml0Wm9vbTpmdW5jdGlvbigpe3ZhciBhLGM9Yi5zdC56b29tLGQ9XCIuem9vbVwiO2lmKGMuZW5hYmxlZCYmYi5zdXBwb3J0c1RyYW5zaXRpb24pe3ZhciBlLGYsZz1jLmR1cmF0aW9uLGo9ZnVuY3Rpb24oYSl7dmFyIGI9YS5jbG9uZSgpLnJlbW92ZUF0dHIoXCJzdHlsZVwiKS5yZW1vdmVBdHRyKFwiY2xhc3NcIikuYWRkQ2xhc3MoXCJtZnAtYW5pbWF0ZWQtaW1hZ2VcIiksZD1cImFsbCBcIitjLmR1cmF0aW9uLzFlMytcInMgXCIrYy5lYXNpbmcsZT17cG9zaXRpb246XCJmaXhlZFwiLHpJbmRleDo5OTk5LGxlZnQ6MCx0b3A6MCxcIi13ZWJraXQtYmFja2ZhY2UtdmlzaWJpbGl0eVwiOlwiaGlkZGVuXCJ9LGY9XCJ0cmFuc2l0aW9uXCI7cmV0dXJuIGVbXCItd2Via2l0LVwiK2ZdPWVbXCItbW96LVwiK2ZdPWVbXCItby1cIitmXT1lW2ZdPWQsYi5jc3MoZSksYn0saz1mdW5jdGlvbigpe2IuY29udGVudC5jc3MoXCJ2aXNpYmlsaXR5XCIsXCJ2aXNpYmxlXCIpfTt3KFwiQnVpbGRDb250cm9sc1wiK2QsZnVuY3Rpb24oKXtpZihiLl9hbGxvd1pvb20oKSl7aWYoY2xlYXJUaW1lb3V0KGUpLGIuY29udGVudC5jc3MoXCJ2aXNpYmlsaXR5XCIsXCJoaWRkZW5cIiksYT1iLl9nZXRJdGVtVG9ab29tKCksIWEpcmV0dXJuIHZvaWQgaygpO2Y9aihhKSxmLmNzcyhiLl9nZXRPZmZzZXQoKSksYi53cmFwLmFwcGVuZChmKSxlPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtmLmNzcyhiLl9nZXRPZmZzZXQoITApKSxlPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtrKCksc2V0VGltZW91dChmdW5jdGlvbigpe2YucmVtb3ZlKCksYT1mPW51bGwseShcIlpvb21BbmltYXRpb25FbmRlZFwiKX0sMTYpfSxnKX0sMTYpfX0pLHcoaStkLGZ1bmN0aW9uKCl7aWYoYi5fYWxsb3dab29tKCkpe2lmKGNsZWFyVGltZW91dChlKSxiLnN0LnJlbW92YWxEZWxheT1nLCFhKXtpZihhPWIuX2dldEl0ZW1Ub1pvb20oKSwhYSlyZXR1cm47Zj1qKGEpfWYuY3NzKGIuX2dldE9mZnNldCghMCkpLGIud3JhcC5hcHBlbmQoZiksYi5jb250ZW50LmNzcyhcInZpc2liaWxpdHlcIixcImhpZGRlblwiKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Zi5jc3MoYi5fZ2V0T2Zmc2V0KCkpfSwxNil9fSksdyhoK2QsZnVuY3Rpb24oKXtiLl9hbGxvd1pvb20oKSYmKGsoKSxmJiZmLnJlbW92ZSgpLGE9bnVsbCl9KX19LF9hbGxvd1pvb206ZnVuY3Rpb24oKXtyZXR1cm5cImltYWdlXCI9PT1iLmN1cnJJdGVtLnR5cGV9LF9nZXRJdGVtVG9ab29tOmZ1bmN0aW9uKCl7cmV0dXJuIGIuY3Vyckl0ZW0uaGFzU2l6ZT9iLmN1cnJJdGVtLmltZzohMX0sX2dldE9mZnNldDpmdW5jdGlvbihjKXt2YXIgZDtkPWM/Yi5jdXJySXRlbS5pbWc6Yi5zdC56b29tLm9wZW5lcihiLmN1cnJJdGVtLmVsfHxiLmN1cnJJdGVtKTt2YXIgZT1kLm9mZnNldCgpLGY9cGFyc2VJbnQoZC5jc3MoXCJwYWRkaW5nLXRvcFwiKSwxMCksZz1wYXJzZUludChkLmNzcyhcInBhZGRpbmctYm90dG9tXCIpLDEwKTtlLnRvcC09YSh3aW5kb3cpLnNjcm9sbFRvcCgpLWY7dmFyIGg9e3dpZHRoOmQud2lkdGgoKSxoZWlnaHQ6KHU/ZC5pbm5lckhlaWdodCgpOmRbMF0ub2Zmc2V0SGVpZ2h0KS1nLWZ9O3JldHVybiBPKCk/aFtcIi1tb3otdHJhbnNmb3JtXCJdPWgudHJhbnNmb3JtPVwidHJhbnNsYXRlKFwiK2UubGVmdCtcInB4LFwiK2UudG9wK1wicHgpXCI6KGgubGVmdD1lLmxlZnQsaC50b3A9ZS50b3ApLGh9fX0pO3ZhciBQPVwiaWZyYW1lXCIsUT1cIi8vYWJvdXQ6YmxhbmtcIixSPWZ1bmN0aW9uKGEpe2lmKGIuY3VyclRlbXBsYXRlW1BdKXt2YXIgYz1iLmN1cnJUZW1wbGF0ZVtQXS5maW5kKFwiaWZyYW1lXCIpO2MubGVuZ3RoJiYoYXx8KGNbMF0uc3JjPVEpLGIuaXNJRTgmJmMuY3NzKFwiZGlzcGxheVwiLGE/XCJibG9ja1wiOlwibm9uZVwiKSl9fTthLm1hZ25pZmljUG9wdXAucmVnaXN0ZXJNb2R1bGUoUCx7b3B0aW9uczp7bWFya3VwOic8ZGl2IGNsYXNzPVwibWZwLWlmcmFtZS1zY2FsZXJcIj48ZGl2IGNsYXNzPVwibWZwLWNsb3NlXCI+PC9kaXY+PGlmcmFtZSBjbGFzcz1cIm1mcC1pZnJhbWVcIiBzcmM9XCIvL2Fib3V0OmJsYW5rXCIgZnJhbWVib3JkZXI9XCIwXCIgYWxsb3dmdWxsc2NyZWVuPjwvaWZyYW1lPjwvZGl2Picsc3JjQWN0aW9uOlwiaWZyYW1lX3NyY1wiLHBhdHRlcm5zOnt5b3V0dWJlOntpbmRleDpcInlvdXR1YmUuY29tXCIsaWQ6XCJ2PVwiLHNyYzpcIi8vd3d3LnlvdXR1YmUuY29tL2VtYmVkLyVpZCU/YXV0b3BsYXk9MVwifSx2aW1lbzp7aW5kZXg6XCJ2aW1lby5jb20vXCIsaWQ6XCIvXCIsc3JjOlwiLy9wbGF5ZXIudmltZW8uY29tL3ZpZGVvLyVpZCU/YXV0b3BsYXk9MVwifSxnbWFwczp7aW5kZXg6XCIvL21hcHMuZ29vZ2xlLlwiLHNyYzpcIiVpZCUmb3V0cHV0PWVtYmVkXCJ9fX0scHJvdG86e2luaXRJZnJhbWU6ZnVuY3Rpb24oKXtiLnR5cGVzLnB1c2goUCksdyhcIkJlZm9yZUNoYW5nZVwiLGZ1bmN0aW9uKGEsYixjKXtiIT09YyYmKGI9PT1QP1IoKTpjPT09UCYmUighMCkpfSksdyhoK1wiLlwiK1AsZnVuY3Rpb24oKXtSKCl9KX0sZ2V0SWZyYW1lOmZ1bmN0aW9uKGMsZCl7dmFyIGU9Yy5zcmMsZj1iLnN0LmlmcmFtZTthLmVhY2goZi5wYXR0ZXJucyxmdW5jdGlvbigpe3JldHVybiBlLmluZGV4T2YodGhpcy5pbmRleCk+LTE/KHRoaXMuaWQmJihlPVwic3RyaW5nXCI9PXR5cGVvZiB0aGlzLmlkP2Uuc3Vic3RyKGUubGFzdEluZGV4T2YodGhpcy5pZCkrdGhpcy5pZC5sZW5ndGgsZS5sZW5ndGgpOnRoaXMuaWQuY2FsbCh0aGlzLGUpKSxlPXRoaXMuc3JjLnJlcGxhY2UoXCIlaWQlXCIsZSksITEpOnZvaWQgMH0pO3ZhciBnPXt9O3JldHVybiBmLnNyY0FjdGlvbiYmKGdbZi5zcmNBY3Rpb25dPWUpLGIuX3BhcnNlTWFya3VwKGQsZyxjKSxiLnVwZGF0ZVN0YXR1cyhcInJlYWR5XCIpLGR9fX0pO3ZhciBTPWZ1bmN0aW9uKGEpe3ZhciBjPWIuaXRlbXMubGVuZ3RoO3JldHVybiBhPmMtMT9hLWM6MD5hP2MrYTphfSxUPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYS5yZXBsYWNlKC8lY3VyciUvZ2ksYisxKS5yZXBsYWNlKC8ldG90YWwlL2dpLGMpfTthLm1hZ25pZmljUG9wdXAucmVnaXN0ZXJNb2R1bGUoXCJnYWxsZXJ5XCIse29wdGlvbnM6e2VuYWJsZWQ6ITEsYXJyb3dNYXJrdXA6JzxidXR0b24gdGl0bGU9XCIldGl0bGUlXCIgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwibWZwLWFycm93IG1mcC1hcnJvdy0lZGlyJVwiPjwvYnV0dG9uPicscHJlbG9hZDpbMCwyXSxuYXZpZ2F0ZUJ5SW1nQ2xpY2s6ITAsYXJyb3dzOiEwLHRQcmV2OlwiUHJldmlvdXMgKExlZnQgYXJyb3cga2V5KVwiLHROZXh0OlwiTmV4dCAoUmlnaHQgYXJyb3cga2V5KVwiLHRDb3VudGVyOlwiJWN1cnIlIG9mICV0b3RhbCVcIn0scHJvdG86e2luaXRHYWxsZXJ5OmZ1bmN0aW9uKCl7dmFyIGM9Yi5zdC5nYWxsZXJ5LGU9XCIubWZwLWdhbGxlcnlcIjtyZXR1cm4gYi5kaXJlY3Rpb249ITAsYyYmYy5lbmFibGVkPyhmKz1cIiBtZnAtZ2FsbGVyeVwiLHcobStlLGZ1bmN0aW9uKCl7Yy5uYXZpZ2F0ZUJ5SW1nQ2xpY2smJmIud3JhcC5vbihcImNsaWNrXCIrZSxcIi5tZnAtaW1nXCIsZnVuY3Rpb24oKXtyZXR1cm4gYi5pdGVtcy5sZW5ndGg+MT8oYi5uZXh0KCksITEpOnZvaWQgMH0pLGQub24oXCJrZXlkb3duXCIrZSxmdW5jdGlvbihhKXszNz09PWEua2V5Q29kZT9iLnByZXYoKTozOT09PWEua2V5Q29kZSYmYi5uZXh0KCl9KX0pLHcoXCJVcGRhdGVTdGF0dXNcIitlLGZ1bmN0aW9uKGEsYyl7Yy50ZXh0JiYoYy50ZXh0PVQoYy50ZXh0LGIuY3Vyckl0ZW0uaW5kZXgsYi5pdGVtcy5sZW5ndGgpKX0pLHcobCtlLGZ1bmN0aW9uKGEsZCxlLGYpe3ZhciBnPWIuaXRlbXMubGVuZ3RoO2UuY291bnRlcj1nPjE/VChjLnRDb3VudGVyLGYuaW5kZXgsZyk6XCJcIn0pLHcoXCJCdWlsZENvbnRyb2xzXCIrZSxmdW5jdGlvbigpe2lmKGIuaXRlbXMubGVuZ3RoPjEmJmMuYXJyb3dzJiYhYi5hcnJvd0xlZnQpe3ZhciBkPWMuYXJyb3dNYXJrdXAsZT1iLmFycm93TGVmdD1hKGQucmVwbGFjZSgvJXRpdGxlJS9naSxjLnRQcmV2KS5yZXBsYWNlKC8lZGlyJS9naSxcImxlZnRcIikpLmFkZENsYXNzKHMpLGY9Yi5hcnJvd1JpZ2h0PWEoZC5yZXBsYWNlKC8ldGl0bGUlL2dpLGMudE5leHQpLnJlcGxhY2UoLyVkaXIlL2dpLFwicmlnaHRcIikpLmFkZENsYXNzKHMpO2UuY2xpY2soZnVuY3Rpb24oKXtiLnByZXYoKX0pLGYuY2xpY2soZnVuY3Rpb24oKXtiLm5leHQoKX0pLGIuY29udGFpbmVyLmFwcGVuZChlLmFkZChmKSl9fSksdyhuK2UsZnVuY3Rpb24oKXtiLl9wcmVsb2FkVGltZW91dCYmY2xlYXJUaW1lb3V0KGIuX3ByZWxvYWRUaW1lb3V0KSxiLl9wcmVsb2FkVGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi5wcmVsb2FkTmVhcmJ5SW1hZ2VzKCksYi5fcHJlbG9hZFRpbWVvdXQ9bnVsbH0sMTYpfSksdm9pZCB3KGgrZSxmdW5jdGlvbigpe2Qub2ZmKGUpLGIud3JhcC5vZmYoXCJjbGlja1wiK2UpLGIuYXJyb3dSaWdodD1iLmFycm93TGVmdD1udWxsfSkpOiExfSxuZXh0OmZ1bmN0aW9uKCl7Yi5kaXJlY3Rpb249ITAsYi5pbmRleD1TKGIuaW5kZXgrMSksYi51cGRhdGVJdGVtSFRNTCgpfSxwcmV2OmZ1bmN0aW9uKCl7Yi5kaXJlY3Rpb249ITEsYi5pbmRleD1TKGIuaW5kZXgtMSksYi51cGRhdGVJdGVtSFRNTCgpfSxnb1RvOmZ1bmN0aW9uKGEpe2IuZGlyZWN0aW9uPWE+PWIuaW5kZXgsYi5pbmRleD1hLGIudXBkYXRlSXRlbUhUTUwoKX0scHJlbG9hZE5lYXJieUltYWdlczpmdW5jdGlvbigpe3ZhciBhLGM9Yi5zdC5nYWxsZXJ5LnByZWxvYWQsZD1NYXRoLm1pbihjWzBdLGIuaXRlbXMubGVuZ3RoKSxlPU1hdGgubWluKGNbMV0sYi5pdGVtcy5sZW5ndGgpO2ZvcihhPTE7YTw9KGIuZGlyZWN0aW9uP2U6ZCk7YSsrKWIuX3ByZWxvYWRJdGVtKGIuaW5kZXgrYSk7Zm9yKGE9MTthPD0oYi5kaXJlY3Rpb24/ZDplKTthKyspYi5fcHJlbG9hZEl0ZW0oYi5pbmRleC1hKX0sX3ByZWxvYWRJdGVtOmZ1bmN0aW9uKGMpe2lmKGM9UyhjKSwhYi5pdGVtc1tjXS5wcmVsb2FkZWQpe3ZhciBkPWIuaXRlbXNbY107ZC5wYXJzZWR8fChkPWIucGFyc2VFbChjKSkseShcIkxhenlMb2FkXCIsZCksXCJpbWFnZVwiPT09ZC50eXBlJiYoZC5pbWc9YSgnPGltZyBjbGFzcz1cIm1mcC1pbWdcIiAvPicpLm9uKFwibG9hZC5tZnBsb2FkZXJcIixmdW5jdGlvbigpe2QuaGFzU2l6ZT0hMH0pLm9uKFwiZXJyb3IubWZwbG9hZGVyXCIsZnVuY3Rpb24oKXtkLmhhc1NpemU9ITAsZC5sb2FkRXJyb3I9ITAseShcIkxhenlMb2FkRXJyb3JcIixkKX0pLmF0dHIoXCJzcmNcIixkLnNyYykpLGQucHJlbG9hZGVkPSEwfX19fSk7dmFyIFU9XCJyZXRpbmFcIjthLm1hZ25pZmljUG9wdXAucmVnaXN0ZXJNb2R1bGUoVSx7b3B0aW9uczp7cmVwbGFjZVNyYzpmdW5jdGlvbihhKXtyZXR1cm4gYS5zcmMucmVwbGFjZSgvXFwuXFx3KyQvLGZ1bmN0aW9uKGEpe3JldHVyblwiQDJ4XCIrYX0pfSxyYXRpbzoxfSxwcm90bzp7aW5pdFJldGluYTpmdW5jdGlvbigpe2lmKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvPjEpe3ZhciBhPWIuc3QucmV0aW5hLGM9YS5yYXRpbztjPWlzTmFOKGMpP2MoKTpjLGM+MSYmKHcoXCJJbWFnZUhhc1NpemUuXCIrVSxmdW5jdGlvbihhLGIpe2IuaW1nLmNzcyh7XCJtYXgtd2lkdGhcIjpiLmltZ1swXS5uYXR1cmFsV2lkdGgvYyx3aWR0aDpcIjEwMCVcIn0pfSksdyhcIkVsZW1lbnRQYXJzZS5cIitVLGZ1bmN0aW9uKGIsZCl7ZC5zcmM9YS5yZXBsYWNlU3JjKGQsYyl9KSl9fX19KSxBKCl9KTsiLCIvKlxyXG4gKiBOaXZvIExpZ2h0Ym94IHYxLjMuMVxyXG4gKiBodHRwOi8vZGV2N3N0dWRpb3MuY29tL25pdm8tbGlnaHRib3hcclxuICpcclxuICogQ29weXJpZ2h0IDIwMTMsIERldjdzdHVkaW9zXHJcbiAqIEZyZWUgdG8gdXNlIGFuZCBhYnVzZSB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXHJcbiAqIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXHJcbiAqL1xyXG4hZnVuY3Rpb24odCxpLG8sZSl7ZnVuY3Rpb24gbihpLG8pe3RoaXMuZWw9aSx0aGlzLiRlbD10KHRoaXMuZWwpLHRoaXMub3B0aW9ucz10LmV4dGVuZCh7fSxsLG8pLHRoaXMuX2RlZmF1bHRzPWwsdGhpcy5fbmFtZT1hLHRoaXMuaW5pdCgpfXZhciBhPVwibml2b0xpZ2h0Ym94XCIsbD17ZWZmZWN0OlwiZmFkZVwiLHRoZW1lOlwiZGVmYXVsdFwiLGtleWJvYXJkTmF2OiEwLGNsaWNrSW1nVG9DbG9zZTohMSxjbGlja092ZXJsYXlUb0Nsb3NlOiEwLG9uSW5pdDpmdW5jdGlvbigpe30sYmVmb3JlU2hvd0xpZ2h0Ym94OmZ1bmN0aW9uKCl7fSxhZnRlclNob3dMaWdodGJveDpmdW5jdGlvbih0KXt9LGJlZm9yZUhpZGVMaWdodGJveDpmdW5jdGlvbigpe30sYWZ0ZXJIaWRlTGlnaHRib3g6ZnVuY3Rpb24oKXt9LGJlZm9yZVByZXY6ZnVuY3Rpb24odCl7fSxvblByZXY6ZnVuY3Rpb24odCl7fSxiZWZvcmVOZXh0OmZ1bmN0aW9uKHQpe30sb25OZXh0OmZ1bmN0aW9uKHQpe30sZXJyb3JNZXNzYWdlOlwiVGhlIHJlcXVlc3RlZCBjb250ZW50IGNhbm5vdCBiZSBsb2FkZWQuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuXCJ9O24ucHJvdG90eXBlPXtpbml0OmZ1bmN0aW9uKCl7dmFyIGk9dGhpczt0KFwiaHRtbFwiKS5oYXNDbGFzcyhcIm5pdm8tbGlnaHRib3gtbm90b3VjaFwiKXx8dChcImh0bWxcIikuYWRkQ2xhc3MoXCJuaXZvLWxpZ2h0Ym94LW5vdG91Y2hcIiksXCJvbnRvdWNoc3RhcnRcImluIG8mJnQoXCJodG1sXCIpLnJlbW92ZUNsYXNzKFwibml2by1saWdodGJveC1ub3RvdWNoXCIpLHRoaXMuJGVsLm9uKFwiY2xpY2tcIixmdW5jdGlvbih0KXtpLnNob3dMaWdodGJveCh0KX0pLHRoaXMub3B0aW9ucy5rZXlib2FyZE5hdiYmdChcImJvZHlcIikub2ZmKFwia2V5dXBcIikub24oXCJrZXl1cFwiLGZ1bmN0aW9uKG8pe3ZhciBlPW8ua2V5Q29kZT9vLmtleUNvZGU6by53aGljaDsyNz09ZSYmaS5kZXN0cnVjdExpZ2h0Ym94KCksMzc9PWUmJnQoXCIubml2by1saWdodGJveC1wcmV2XCIpLnRyaWdnZXIoXCJjbGlja1wiKSwzOT09ZSYmdChcIi5uaXZvLWxpZ2h0Ym94LW5leHRcIikudHJpZ2dlcihcImNsaWNrXCIpfSksdGhpcy5vcHRpb25zLm9uSW5pdC5jYWxsKHRoaXMpfSxzaG93TGlnaHRib3g6ZnVuY3Rpb24oaSl7dmFyIG89dGhpcyxlPXRoaXMuJGVsLG49dGhpcy5jaGVja0NvbnRlbnQoZSk7aWYobil7aS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMub3B0aW9ucy5iZWZvcmVTaG93TGlnaHRib3guY2FsbCh0aGlzKTt2YXIgYT10aGlzLmNvbnN0cnVjdExpZ2h0Ym94KCk7aWYoYSl7dmFyIGw9YS5maW5kKFwiLm5pdm8tbGlnaHRib3gtY29udGVudFwiKTtpZihsKXtpZih0KFwiYm9keVwiKS5hZGRDbGFzcyhcIm5pdm8tbGlnaHRib3gtYm9keS1lZmZlY3QtXCIrdGhpcy5vcHRpb25zLmVmZmVjdCksdGhpcy5wcm9jZXNzQ29udGVudChsLGUpLHRoaXMuJGVsLmF0dHIoXCJkYXRhLWxpZ2h0Ym94LWdhbGxlcnlcIikpe3ZhciBoPXQoJ1tkYXRhLWxpZ2h0Ym94LWdhbGxlcnk9XCInK3RoaXMuJGVsLmF0dHIoXCJkYXRhLWxpZ2h0Ym94LWdhbGxlcnlcIikrJ1wiXScpO3QoXCIubml2by1saWdodGJveC1uYXZcIikuc2hvdygpLHQoXCIubml2by1saWdodGJveC1wcmV2XCIpLm9mZihcImNsaWNrXCIpLm9uKFwiY2xpY2tcIixmdW5jdGlvbihpKXtpLnByZXZlbnREZWZhdWx0KCk7dmFyIG49aC5pbmRleChlKTtlPWguZXEobi0xKSx0KGUpLmxlbmd0aHx8KGU9aC5sYXN0KCkpLHQud2hlbihvLm9wdGlvbnMuYmVmb3JlUHJldi5jYWxsKHRoaXMsW2VdKSkuZG9uZShmdW5jdGlvbigpe28ucHJvY2Vzc0NvbnRlbnQobCxlKSxvLm9wdGlvbnMub25QcmV2LmNhbGwodGhpcyxbZV0pfSl9KSx0KFwiLm5pdm8tbGlnaHRib3gtbmV4dFwiKS5vZmYoXCJjbGlja1wiKS5vbihcImNsaWNrXCIsZnVuY3Rpb24oaSl7aS5wcmV2ZW50RGVmYXVsdCgpO3ZhciBuPWguaW5kZXgoZSk7ZT1oLmVxKG4rMSksdChlKS5sZW5ndGh8fChlPWguZmlyc3QoKSksdC53aGVuKG8ub3B0aW9ucy5iZWZvcmVOZXh0LmNhbGwodGhpcyxbZV0pKS5kb25lKGZ1bmN0aW9uKCl7by5wcm9jZXNzQ29udGVudChsLGUpLG8ub3B0aW9ucy5vbk5leHQuY2FsbCh0aGlzLFtlXSl9KX0pfXNldFRpbWVvdXQoZnVuY3Rpb24oKXthLmFkZENsYXNzKFwibml2by1saWdodGJveC1vcGVuXCIpLG8ub3B0aW9ucy5hZnRlclNob3dMaWdodGJveC5jYWxsKHRoaXMsW2FdKX0sMSl9fX19LGNoZWNrQ29udGVudDpmdW5jdGlvbih0KXt2YXIgaT10LmF0dHIoXCJocmVmXCIpLG89aS5tYXRjaCgvKHlvdXR1YmV8eW91dHViZS1ub2Nvb2tpZXx5b3V0dXx2aW1lbylcXC4oY29tfGJlKVxcLyh3YXRjaFxcP3Y9KFtcXHctXSspfChbXFx3LV0rKSkvKTtyZXR1cm4gbnVsbCE9PWkubWF0Y2goL1xcLihqcGVnfGpwZ3xnaWZ8cG5nKSQvaSl8fCghIW98fChcImFqYXhcIj09dC5hdHRyKFwiZGF0YS1saWdodGJveC10eXBlXCIpfHwoXCIjXCI9PWkuc3Vic3RyaW5nKDAsMSkmJlwiaW5saW5lXCI9PXQuYXR0cihcImRhdGEtbGlnaHRib3gtdHlwZVwiKXx8XCJpZnJhbWVcIj09dC5hdHRyKFwiZGF0YS1saWdodGJveC10eXBlXCIpKSkpfSxwcm9jZXNzQ29udGVudDpmdW5jdGlvbihvLGUpe3ZhciBuPXRoaXMsYT1lLmF0dHIoXCJocmVmXCIpLGw9YS5tYXRjaCgvKHlvdXR1YmV8eW91dHViZS1ub2Nvb2tpZXx5b3V0dXx2aW1lbylcXC4oY29tfGJlKVxcLyh3YXRjaFxcP3Y9KFtcXHctXSspfChbXFx3LV0rKSkvKTtpZihvLmh0bWwoXCJcIikuYWRkQ2xhc3MoXCJuaXZvLWxpZ2h0Ym94LWxvYWRpbmdcIiksdGhpcy5pc0hpZHBpKCkmJmUuYXR0cihcImRhdGEtbGlnaHRib3gtaGlkcGlcIikmJihhPWUuYXR0cihcImRhdGEtbGlnaHRib3gtaGlkcGlcIikpLG51bGwhPT1hLm1hdGNoKC9cXC4oanBlZ3xqcGd8Z2lmfHBuZykkL2kpKXt2YXIgaD10KFwiPGltZz5cIix7c3JjOmEsY2xhc3M6XCJuaXZvLWxpZ2h0Ym94LWltYWdlLWRpc3BsYXlcIn0pO2gub25lKFwibG9hZFwiLGZ1bmN0aW9uKCl7dmFyIGU9dCgnPGRpdiBjbGFzcz1cIm5pdm8tbGlnaHRib3gtaW1hZ2VcIiAvPicpO2UuYXBwZW5kKGgpLG8uaHRtbChlKS5yZW1vdmVDbGFzcyhcIm5pdm8tbGlnaHRib3gtbG9hZGluZ1wiKSxlLmNzcyh7XCJsaW5lLWhlaWdodFwiOnQoXCIubml2by1saWdodGJveC1jb250ZW50XCIpLmhlaWdodCgpK1wicHhcIixoZWlnaHQ6dChcIi5uaXZvLWxpZ2h0Ym94LWNvbnRlbnRcIikuaGVpZ2h0KCkrXCJweFwifSksdChpKS5yZXNpemUoZnVuY3Rpb24oKXtlLmNzcyh7XCJsaW5lLWhlaWdodFwiOnQoXCIubml2by1saWdodGJveC1jb250ZW50XCIpLmhlaWdodCgpK1wicHhcIixoZWlnaHQ6dChcIi5uaXZvLWxpZ2h0Ym94LWNvbnRlbnRcIikuaGVpZ2h0KCkrXCJweFwifSl9KX0pLmVhY2goZnVuY3Rpb24oKXt0aGlzLmNvbXBsZXRlJiZ0KHRoaXMpLmxvYWQoKX0pLGguZXJyb3IoZnVuY3Rpb24oKXt2YXIgaT10KCc8ZGl2IGNsYXNzPVwibml2by1saWdodGJveC1lcnJvclwiPjxwPicrbi5vcHRpb25zLmVycm9yTWVzc2FnZStcIjwvcD48L2Rpdj5cIik7by5odG1sKGkpLnJlbW92ZUNsYXNzKFwibml2by1saWdodGJveC1sb2FkaW5nXCIpfSl9ZWxzZSBpZihsKXt2YXIgcz1cIlwiLHI9XCJuaXZvLWxpZ2h0Ym94LXZpZGVvXCI7aWYoXCJ5b3V0dWJlXCI9PWxbMV0mJihzPVwiLy93d3cueW91dHViZS5jb20vZW1iZWQvXCIrbFs0XSxyPVwibml2by1saWdodGJveC15b3V0dWJlXCIpLFwieW91dHViZS1ub2Nvb2tpZVwiPT1sWzFdJiYocz1hLHI9XCJuaXZvLWxpZ2h0Ym94LXlvdXR1YmVcIiksXCJ5b3V0dVwiPT1sWzFdJiYocz1cIi8vd3d3LnlvdXR1YmUuY29tL2VtYmVkL1wiK2xbM10scj1cIm5pdm8tbGlnaHRib3gteW91dHViZVwiKSxcInZpbWVvXCI9PWxbMV0mJihzPVwiLy9wbGF5ZXIudmltZW8uY29tL3ZpZGVvL1wiK2xbM10scj1cIm5pdm8tbGlnaHRib3gtdmltZW9cIikscyl7dmFyIGM9dChcIjxpZnJhbWU+XCIse3NyYzpzLGNsYXNzOnIsZnJhbWVib3JkZXI6MCx2c3BhY2U6MCxoc3BhY2U6MCxzY3JvbGxpbmc6XCJhdXRvXCJ9KTtvLmh0bWwoYyksYy5sb2FkKGZ1bmN0aW9uKCl7by5yZW1vdmVDbGFzcyhcIm5pdm8tbGlnaHRib3gtbG9hZGluZ1wiKX0pfX1lbHNlIGlmKFwiYWpheFwiPT1lLmF0dHIoXCJkYXRhLWxpZ2h0Ym94LXR5cGVcIikpdC5hamF4KHt1cmw6YSxjYWNoZTohMSxzdWNjZXNzOmZ1bmN0aW9uKGUpe3ZhciBuPXQoJzxkaXYgY2xhc3M9XCJuaXZvLWxpZ2h0Ym94LWFqYXhcIiAvPicpO24uYXBwZW5kKGUpLG8uaHRtbChuKS5yZW1vdmVDbGFzcyhcIm5pdm8tbGlnaHRib3gtbG9hZGluZ1wiKSxuLm91dGVySGVpZ2h0KCk8by5oZWlnaHQoKSYmbi5jc3Moe3Bvc2l0aW9uOlwicmVsYXRpdmVcIix0b3A6XCI1MCVcIixcIm1hcmdpbi10b3BcIjotKG4ub3V0ZXJIZWlnaHQoKS8yKStcInB4XCJ9KSx0KGkpLnJlc2l6ZShmdW5jdGlvbigpe24ub3V0ZXJIZWlnaHQoKTxvLmhlaWdodCgpJiZuLmNzcyh7cG9zaXRpb246XCJyZWxhdGl2ZVwiLHRvcDpcIjUwJVwiLFwibWFyZ2luLXRvcFwiOi0obi5vdXRlckhlaWdodCgpLzIpK1wicHhcIn0pfSl9LGVycm9yOmZ1bmN0aW9uKCl7dmFyIGk9dCgnPGRpdiBjbGFzcz1cIm5pdm8tbGlnaHRib3gtZXJyb3JcIj48cD4nK24ub3B0aW9ucy5lcnJvck1lc3NhZ2UrXCI8L3A+PC9kaXY+XCIpO28uaHRtbChpKS5yZW1vdmVDbGFzcyhcIm5pdm8tbGlnaHRib3gtbG9hZGluZ1wiKX19KTtlbHNlIGlmKFwiI1wiPT1hLnN1YnN0cmluZygwLDEpJiZcImlubGluZVwiPT1lLmF0dHIoXCJkYXRhLWxpZ2h0Ym94LXR5cGVcIikpaWYodChhKS5sZW5ndGgpe3ZhciBnPXQoJzxkaXYgY2xhc3M9XCJuaXZvLWxpZ2h0Ym94LWlubGluZVwiIC8+Jyk7Zy5hcHBlbmQodChhKS5jbG9uZSgpLnNob3coKSksby5odG1sKGcpLnJlbW92ZUNsYXNzKFwibml2by1saWdodGJveC1sb2FkaW5nXCIpLGcub3V0ZXJIZWlnaHQoKTxvLmhlaWdodCgpJiZnLmNzcyh7cG9zaXRpb246XCJyZWxhdGl2ZVwiLHRvcDpcIjUwJVwiLFwibWFyZ2luLXRvcFwiOi0oZy5vdXRlckhlaWdodCgpLzIpK1wicHhcIn0pLHQoaSkucmVzaXplKGZ1bmN0aW9uKCl7Zy5vdXRlckhlaWdodCgpPG8uaGVpZ2h0KCkmJmcuY3NzKHtwb3NpdGlvbjpcInJlbGF0aXZlXCIsdG9wOlwiNTAlXCIsXCJtYXJnaW4tdG9wXCI6LShnLm91dGVySGVpZ2h0KCkvMikrXCJweFwifSl9KX1lbHNle3ZhciB2PXQoJzxkaXYgY2xhc3M9XCJuaXZvLWxpZ2h0Ym94LWVycm9yXCI+PHA+JytuLm9wdGlvbnMuZXJyb3JNZXNzYWdlK1wiPC9wPjwvZGl2PlwiKTtvLmh0bWwodikucmVtb3ZlQ2xhc3MoXCJuaXZvLWxpZ2h0Ym94LWxvYWRpbmdcIil9ZWxzZXtpZihcImlmcmFtZVwiIT1lLmF0dHIoXCJkYXRhLWxpZ2h0Ym94LXR5cGVcIikpcmV0dXJuITE7dmFyIGI9dChcIjxpZnJhbWU+XCIse3NyYzphLGNsYXNzOlwibml2by1saWdodGJveC1pdGVtXCIsZnJhbWVib3JkZXI6MCx2c3BhY2U6MCxoc3BhY2U6MCxzY3JvbGxpbmc6XCJhdXRvXCJ9KTtvLmh0bWwoYiksYi5sb2FkKGZ1bmN0aW9uKCl7by5yZW1vdmVDbGFzcyhcIm5pdm8tbGlnaHRib3gtbG9hZGluZ1wiKX0pfWlmKGUuYXR0cihcInRpdGxlXCIpKXt2YXIgeD10KFwiPHNwYW4+XCIse2NsYXNzOlwibml2by1saWdodGJveC10aXRsZVwifSk7eC50ZXh0KGUuYXR0cihcInRpdGxlXCIpKSx0KFwiLm5pdm8tbGlnaHRib3gtdGl0bGUtd3JhcFwiKS5odG1sKHgpfWVsc2UgdChcIi5uaXZvLWxpZ2h0Ym94LXRpdGxlLXdyYXBcIikuaHRtbChcIlwiKX0sY29uc3RydWN0TGlnaHRib3g6ZnVuY3Rpb24oKXtpZih0KFwiLm5pdm8tbGlnaHRib3gtb3ZlcmxheVwiKS5sZW5ndGgpcmV0dXJuIHQoXCIubml2by1saWdodGJveC1vdmVybGF5XCIpO3ZhciBpPXQoXCI8ZGl2PlwiLHtjbGFzczpcIm5pdm8tbGlnaHRib3gtb3ZlcmxheSBuaXZvLWxpZ2h0Ym94LXRoZW1lLVwiK3RoaXMub3B0aW9ucy50aGVtZStcIiBuaXZvLWxpZ2h0Ym94LWVmZmVjdC1cIit0aGlzLm9wdGlvbnMuZWZmZWN0fSksbz10KFwiPGRpdj5cIix7Y2xhc3M6XCJuaXZvLWxpZ2h0Ym94LXdyYXBcIn0pLGU9dChcIjxkaXY+XCIse2NsYXNzOlwibml2by1saWdodGJveC1jb250ZW50XCJ9KSxuPXQoJzxhIGhyZWY9XCIjXCIgY2xhc3M9XCJuaXZvLWxpZ2h0Ym94LW5hdiBuaXZvLWxpZ2h0Ym94LXByZXZcIj5QcmV2aW91czwvYT48YSBocmVmPVwiI1wiIGNsYXNzPVwibml2by1saWdodGJveC1uYXYgbml2by1saWdodGJveC1uZXh0XCI+TmV4dDwvYT4nKSxhPXQoJzxhIGhyZWY9XCIjXCIgY2xhc3M9XCJuaXZvLWxpZ2h0Ym94LWNsb3NlXCIgdGl0bGU9XCJDbG9zZVwiPkNsb3NlPC9hPicpLGw9dChcIjxkaXY+XCIse2NsYXNzOlwibml2by1saWdodGJveC10aXRsZS13cmFwXCJ9KSxoPS8qQGNjX29uIUAqLzA7aCYmaS5hZGRDbGFzcyhcIm5pdm8tbGlnaHRib3gtaWVcIiksby5hcHBlbmQoZSksby5hcHBlbmQobCksaS5hcHBlbmQobyksaS5hcHBlbmQobiksaS5hcHBlbmQoYSksdChcImJvZHlcIikuYXBwZW5kKGkpO3ZhciBzPXRoaXM7cmV0dXJuIHMub3B0aW9ucy5jbGlja092ZXJsYXlUb0Nsb3NlJiZpLm9uKFwiY2xpY2tcIixmdW5jdGlvbihpKXsoaS50YXJnZXQ9PT10aGlzfHx0KGkudGFyZ2V0KS5oYXNDbGFzcyhcIm5pdm8tbGlnaHRib3gtY29udGVudFwiKXx8dChpLnRhcmdldCkuaGFzQ2xhc3MoXCJuaXZvLWxpZ2h0Ym94LWltYWdlXCIpKSYmcy5kZXN0cnVjdExpZ2h0Ym94KCl9KSxzLm9wdGlvbnMuY2xpY2tJbWdUb0Nsb3NlJiZpLm9uKFwiY2xpY2tcIixmdW5jdGlvbihpKXsoaS50YXJnZXQ9PT10aGlzfHx0KGkudGFyZ2V0KS5oYXNDbGFzcyhcIm5pdm8tbGlnaHRib3gtaW1hZ2UtZGlzcGxheVwiKSkmJnMuZGVzdHJ1Y3RMaWdodGJveCgpfSksYS5vbihcImNsaWNrXCIsZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpLHMuZGVzdHJ1Y3RMaWdodGJveCgpfSksaX0sZGVzdHJ1Y3RMaWdodGJveDpmdW5jdGlvbigpe3ZhciBpPXRoaXM7dGhpcy5vcHRpb25zLmJlZm9yZUhpZGVMaWdodGJveC5jYWxsKHRoaXMpLHQoXCIubml2by1saWdodGJveC1vdmVybGF5XCIpLnJlbW92ZUNsYXNzKFwibml2by1saWdodGJveC1vcGVuXCIpLHQoXCIubml2by1saWdodGJveC1uYXZcIikuaGlkZSgpLHQoXCJib2R5XCIpLnJlbW92ZUNsYXNzKFwibml2by1saWdodGJveC1ib2R5LWVmZmVjdC1cIitpLm9wdGlvbnMuZWZmZWN0KTt2YXIgbz0vKkBjY19vbiFAKi8wO28mJih0KFwiLm5pdm8tbGlnaHRib3gtb3ZlcmxheSBpZnJhbWVcIikuYXR0cihcInNyY1wiLFwiIFwiKSx0KFwiLm5pdm8tbGlnaHRib3gtb3ZlcmxheSBpZnJhbWVcIikucmVtb3ZlKCkpLHQoXCIubml2by1saWdodGJveC1wcmV2XCIpLm9mZihcImNsaWNrXCIpLHQoXCIubml2by1saWdodGJveC1uZXh0XCIpLm9mZihcImNsaWNrXCIpLHQoXCIubml2by1saWdodGJveC1jb250ZW50XCIpLmVtcHR5KCksdGhpcy5vcHRpb25zLmFmdGVySGlkZUxpZ2h0Ym94LmNhbGwodGhpcyl9LGlzSGlkcGk6ZnVuY3Rpb24oKXt2YXIgdD1cIigtd2Via2l0LW1pbi1kZXZpY2UtcGl4ZWwtcmF0aW86IDEuNSksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG1pbi0tbW96LWRldmljZS1waXhlbC1yYXRpbzogMS41KSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoLW8tbWluLWRldmljZS1waXhlbC1yYXRpbzogMy8yKSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAobWluLXJlc29sdXRpb246IDEuNWRwcHgpXCI7cmV0dXJuIGkuZGV2aWNlUGl4ZWxSYXRpbz4xfHwhKCFpLm1hdGNoTWVkaWF8fCFpLm1hdGNoTWVkaWEodCkubWF0Y2hlcyl9fSx0LmZuW2FdPWZ1bmN0aW9uKGkpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt0LmRhdGEodGhpcyxhKXx8dC5kYXRhKHRoaXMsYSxuZXcgbih0aGlzLGkpKX0pfX0oalF1ZXJ5LHdpbmRvdyxkb2N1bWVudCk7IiwiLyohIG1lbnVGdWxscGFnZSAtIHYxLjAuMCAtIDIwMTUtMDMtMjZcclxuKiBodHRwczovL2dpdGh1Yi5jb20vcm90dGVuc3R1ZGlvcy9tZW51ZnVsbHBhZ2VcclxuKiBDb3B5cmlnaHQgKGMpIDIwMTUgQ2FybWVsbyBDYXRhbGZhbW8gLSByb3R0ZW5TdHVkaW9zLml0ICovXHJcbiFmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjthLmZuLm1lbnVmdWxscGFnZT1mdW5jdGlvbihiKXt2YXIgYz1hLmV4dGVuZCh7bWVudTpcIiNmdWxscGFnZS1uYXZcIixwdXNoOlwiLnB1c2hcIixzaWRlOlwibGVmdFwiLG1lbnVXaWR0aDpcIjEwMCVcIixzcGVlZDpcIjQwMFwiLGFjdGl2ZUJ0bjpcIm1lbnUtb3BlblwifSxiKSxkPXRoaXMsZT1hKGMubWVudSksZj1hKGMucHVzaCksZz1jLm1lbnVXaWR0aCxoPXtwb3NpdGlvbjpcImZpeGVkXCIsdG9wOlwiMFwiLGJvdHRvbTpcIjBcIixcInNldHRpbmdzLnNpZGVcIjpcIi1cIitjLm1lbnVXaWR0aCx3aWR0aDpjLm1lbnVXaWR0aCxoZWlnaHQ6XCIxMDAlXCJ9LGk9e1wiLXdlYmtpdC10cmFuc2l0aW9uXCI6Yy5zaWRlK1wiIFwiK2Muc3BlZWQrXCJtcyBlYXNlXCIsXCItbW96LXRyYW5zaXRpb25cIjpjLnNpZGUrXCIgXCIrYy5zcGVlZCtcIm1zIGVhc2VcIixcIi1tcy10cmFuc2l0aW9uXCI6Yy5zaWRlK1wiIFwiK2Muc3BlZWQrXCJtcyBlYXNlXCIsXCItby10cmFuc2l0aW9uXCI6Yy5zaWRlK1wiIFwiK2Muc3BlZWQrXCJtcyBlYXNlXCIsdHJhbnNpdGlvbjpjLnNpZGUrXCIgXCIrYy5zcGVlZCtcIm1zIGVhc2VcIn07cmV0dXJuIGUuY3NzKGgpLGYuY3NzKGMuc2lkZSxcIjBcIiksZS5jc3MoaSksZi5jc3MoaSksZS5fc3RhdGU9XCJjbG9zZWRcIixlLm9wZW49ZnVuY3Rpb24oKXtlLl9zdGF0ZT1cIm9wZW5cIixlLmNzcyhjLnNpZGUsXCIwXCIpLGYuY3NzKGMuc2lkZSxnKSxkLmFkZENsYXNzKGMuYWN0aXZlQnRuKX0sZS5jbG9zZT1mdW5jdGlvbigpe2UuX3N0YXRlPVwiY2xvc2VkXCIsZS5jc3MoYy5zaWRlLFwiLVwiK2cpLGYuY3NzKGMuc2lkZSxcIjBcIiksZC5yZW1vdmVDbGFzcyhjLmFjdGl2ZUJ0bil9LGEoZG9jdW1lbnQpLm9uKFwiY2xpY2subWVudWZ1bGxwYWdlXCIsZnVuY3Rpb24oYil7YShiLnRhcmdldCkucGFyZW50cygpLmFuZFNlbGYoKS5pcyhkKXx8XCJvcGVuXCIhPT1lLl9zdGF0ZXx8KGUuY2xvc2UoKSxkLnJlbW92ZUNsYXNzKGMuYWN0aXZlQnRuKSl9KSxkLm9uKFwiY2xpY2subWVudWZ1bGxwYWdlXCIsZnVuY3Rpb24oYSl7YS5wcmV2ZW50RGVmYXVsdCgpLFwiY2xvc2VkXCI9PT1lLl9zdGF0ZT9lLm9wZW4oKTplLmNsb3NlKCl9KSxkLm9uKFwidG91Y2hlbmRcIixmdW5jdGlvbihhKXtkLnRyaWdnZXIoXCJjbGljay5tZW51ZnVsbHBhZ2VcIiksYS5wcmV2ZW50RGVmYXVsdCgpfSksZX19KGpRdWVyeSk7IWZ1bmN0aW9uKGUsdCl7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcInNtb290aFNjcm9sbFwiLHQoZSkpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPXQoZSk6ZS5zbW9vdGhTY3JvbGw9dChlKX0od2luZG93fHx0aGlzLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO3ZhciB0LG4sbyxyPXt9LGE9ISFkb2N1bWVudC5xdWVyeVNlbGVjdG9yJiYhIWUuYWRkRXZlbnRMaXN0ZW5lcixjPXtzcGVlZDo1MDAsZWFzaW5nOlwiZWFzZUluT3V0Q3ViaWNcIixvZmZzZXQ6MCx1cGRhdGVVUkw6ITAsY2FsbGJhY2tCZWZvcmU6ZnVuY3Rpb24oKXt9LGNhbGxiYWNrQWZ0ZXI6ZnVuY3Rpb24oKXt9fSx1PWZ1bmN0aW9uKGUsdCxuKXtpZihcIltvYmplY3QgT2JqZWN0XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpKWZvcih2YXIgbyBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLG8pJiZ0LmNhbGwobixlW29dLG8sZSk7ZWxzZSBmb3IodmFyIHI9MCxhPWUubGVuZ3RoO2E+cjtyKyspdC5jYWxsKG4sZVtyXSxyLGUpfSxpPWZ1bmN0aW9uKGUsdCl7dmFyIG49e307cmV0dXJuIHUoZSxmdW5jdGlvbih0LG8pe25bb109ZVtvXX0pLHUodCxmdW5jdGlvbihlLG8pe25bb109dFtvXX0pLG59LGw9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49dC5jaGFyQXQoMCk7ZSYmZSE9PWRvY3VtZW50O2U9ZS5wYXJlbnROb2RlKWlmKFwiLlwiPT09bil7aWYoZS5jbGFzc0xpc3QuY29udGFpbnModC5zdWJzdHIoMSkpKXJldHVybiBlfWVsc2UgaWYoXCIjXCI9PT1uKXtpZihlLmlkPT09dC5zdWJzdHIoMSkpcmV0dXJuIGV9ZWxzZSBpZihcIltcIj09PW4mJmUuaGFzQXR0cmlidXRlKHQuc3Vic3RyKDEsdC5sZW5ndGgtMikpKXJldHVybiBlO3JldHVybiExfSxzPWZ1bmN0aW9uKGUpe3JldHVybiBNYXRoLm1heChlLnNjcm9sbEhlaWdodCxlLm9mZnNldEhlaWdodCxlLmNsaWVudEhlaWdodCl9LGY9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49U3RyaW5nKGUpLG89bi5sZW5ndGgscj0tMSxhPVwiXCIsYz1uLmNoYXJDb2RlQXQoMCk7KytyPG87KXtpZih0PW4uY2hhckNvZGVBdChyKSwwPT09dCl0aHJvdyBuZXcgSW52YWxpZENoYXJhY3RlckVycm9yKFwiSW52YWxpZCBjaGFyYWN0ZXI6IHRoZSBpbnB1dCBjb250YWlucyBVKzAwMDAuXCIpO2ErPXQ+PTEmJjMxPj10fHwxMjc9PXR8fDA9PT1yJiZ0Pj00OCYmNTc+PXR8fDE9PT1yJiZ0Pj00OCYmNTc+PXQmJjQ1PT09Yz9cIlxcXFxcIit0LnRvU3RyaW5nKDE2KStcIiBcIjp0Pj0xMjh8fDQ1PT09dHx8OTU9PT10fHx0Pj00OCYmNTc+PXR8fHQ+PTY1JiY5MD49dHx8dD49OTcmJjEyMj49dD9uLmNoYXJBdChyKTpcIlxcXFxcIituLmNoYXJBdChyKX1yZXR1cm4gYX0sZD1mdW5jdGlvbihlLHQpe3ZhciBuO3JldHVyblwiZWFzZUluUXVhZFwiPT09ZSYmKG49dCp0KSxcImVhc2VPdXRRdWFkXCI9PT1lJiYobj10KigyLXQpKSxcImVhc2VJbk91dFF1YWRcIj09PWUmJihuPS41PnQ/Mip0KnQ6LTErKDQtMip0KSp0KSxcImVhc2VJbkN1YmljXCI9PT1lJiYobj10KnQqdCksXCJlYXNlT3V0Q3ViaWNcIj09PWUmJihuPS0tdCp0KnQrMSksXCJlYXNlSW5PdXRDdWJpY1wiPT09ZSYmKG49LjU+dD80KnQqdCp0Oih0LTEpKigyKnQtMikqKDIqdC0yKSsxKSxcImVhc2VJblF1YXJ0XCI9PT1lJiYobj10KnQqdCp0KSxcImVhc2VPdXRRdWFydFwiPT09ZSYmKG49MS0gLS10KnQqdCp0KSxcImVhc2VJbk91dFF1YXJ0XCI9PT1lJiYobj0uNT50PzgqdCp0KnQqdDoxLTgqLS10KnQqdCp0KSxcImVhc2VJblF1aW50XCI9PT1lJiYobj10KnQqdCp0KnQpLFwiZWFzZU91dFF1aW50XCI9PT1lJiYobj0xKy0tdCp0KnQqdCp0KSxcImVhc2VJbk91dFF1aW50XCI9PT1lJiYobj0uNT50PzE2KnQqdCp0KnQqdDoxKzE2Ki0tdCp0KnQqdCp0KSxufHx0fSxoPWZ1bmN0aW9uKGUsdCxuKXt2YXIgbz0wO2lmKGUub2Zmc2V0UGFyZW50KWRvIG8rPWUub2Zmc2V0VG9wLGU9ZS5vZmZzZXRQYXJlbnQ7d2hpbGUoZSk7cmV0dXJuIG89by10LW4sbz49MD9vOjB9LG09ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5tYXgoZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQsZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodCxkb2N1bWVudC5ib2R5Lm9mZnNldEhlaWdodCxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQub2Zmc2V0SGVpZ2h0LGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0LGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpfSxwPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZcIm9iamVjdFwiPT10eXBlb2YgSlNPTiYmXCJmdW5jdGlvblwiPT10eXBlb2YgSlNPTi5wYXJzZT9KU09OLnBhcnNlKGUpOnt9fSx2PWZ1bmN0aW9uKHQsbil7aGlzdG9yeS5wdXNoU3RhdGUmJihufHxcInRydWVcIj09PW4pJiZoaXN0b3J5LnB1c2hTdGF0ZShudWxsLG51bGwsW2UubG9jYXRpb24ucHJvdG9jb2wsXCIvL1wiLGUubG9jYXRpb24uaG9zdCxlLmxvY2F0aW9uLnBhdGhuYW1lLGUubG9jYXRpb24uc2VhcmNoLHRdLmpvaW4oXCJcIikpfTtyLmFuaW1hdGVTY3JvbGw9ZnVuY3Rpb24odCxuLHIpe3ZhciBhPWkoYXx8YyxyfHx7fSksdT1wKHQ/dC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW9wdGlvbnNcIik6bnVsbCk7YT1pKGEsdSksbj1cIiNcIitmKG4uc3Vic3RyKDEpKTt2YXIgbD1cIiNcIj09PW4/ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50OmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobiksZz1lLnBhZ2VZT2Zmc2V0O298fChvPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJbZGF0YS1zY3JvbGwtaGVhZGVyXVwiKSk7dmFyIGIsTyx5LFM9bnVsbD09PW8/MDpzKG8pK28ub2Zmc2V0VG9wLEk9aChsLFMscGFyc2VJbnQoYS5vZmZzZXQsMTApKSxIPUktZyxFPW0oKSxBPTA7dihuLGEudXBkYXRlVVJMKTt2YXIgTD1mdW5jdGlvbihvLHIsYyl7dmFyIHU9ZS5wYWdlWU9mZnNldDsobz09cnx8dT09cnx8ZS5pbm5lckhlaWdodCt1Pj1FKSYmKGNsZWFySW50ZXJ2YWwoYyksbC5mb2N1cygpLGEuY2FsbGJhY2tBZnRlcih0LG4pKX0sUT1mdW5jdGlvbigpe0ErPTE2LE89QS9wYXJzZUludChhLnNwZWVkLDEwKSxPPU8+MT8xOk8seT1nK0gqZChhLmVhc2luZyxPKSxlLnNjcm9sbFRvKDAsTWF0aC5mbG9vcih5KSksTCh5LEksYil9LEM9ZnVuY3Rpb24oKXthLmNhbGxiYWNrQmVmb3JlKHQsbiksYj1zZXRJbnRlcnZhbChRLDE2KX07MD09PWUucGFnZVlPZmZzZXQmJmUuc2Nyb2xsVG8oMCwwKSxDKCl9O3ZhciBnPWZ1bmN0aW9uKGUpe3ZhciBuPWwoZS50YXJnZXQsXCJbZGF0YS1zY3JvbGxdXCIpO24mJlwiYVwiPT09bi50YWdOYW1lLnRvTG93ZXJDYXNlKCkmJihlLnByZXZlbnREZWZhdWx0KCksci5hbmltYXRlU2Nyb2xsKG4sbi5oYXNoLHQpKX0sYj1mdW5jdGlvbigpe258fChuPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtuPW51bGwsaGVhZGVySGVpZ2h0PW51bGw9PT1vPzA6cyhvKStvLm9mZnNldFRvcH0sNjYpKX07cmV0dXJuIHIuZGVzdHJveT1mdW5jdGlvbigpe3QmJihkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIixnLCExKSxlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIixiLCExKSx0PW51bGwsbj1udWxsLG89bnVsbCl9LHIuaW5pdD1mdW5jdGlvbihuKXthJiYoci5kZXN0cm95KCksdD1pKGMsbnx8e30pLG89ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIltkYXRhLXNjcm9sbC1oZWFkZXJdXCIpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLGcsITEpLG8mJmUuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLGIsITEpKX0scn0pO1xyXG4iLCIvKipcclxuICogT3dsIENhcm91c2VsIHYyLjMuMFxyXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE3IERhdmlkIERldXRzY2hcclxuICogTGljZW5zZWQgdW5kZXIgICgpXHJcbiAqL1xyXG4hZnVuY3Rpb24oYSxiLGMsZCl7ZnVuY3Rpb24gZShiLGMpe3RoaXMuc2V0dGluZ3M9bnVsbCx0aGlzLm9wdGlvbnM9YS5leHRlbmQoe30sZS5EZWZhdWx0cyxjKSx0aGlzLiRlbGVtZW50PWEoYiksdGhpcy5faGFuZGxlcnM9e30sdGhpcy5fcGx1Z2lucz17fSx0aGlzLl9zdXByZXNzPXt9LHRoaXMuX2N1cnJlbnQ9bnVsbCx0aGlzLl9zcGVlZD1udWxsLHRoaXMuX2Nvb3JkaW5hdGVzPVtdLHRoaXMuX2JyZWFrcG9pbnQ9bnVsbCx0aGlzLl93aWR0aD1udWxsLHRoaXMuX2l0ZW1zPVtdLHRoaXMuX2Nsb25lcz1bXSx0aGlzLl9tZXJnZXJzPVtdLHRoaXMuX3dpZHRocz1bXSx0aGlzLl9pbnZhbGlkYXRlZD17fSx0aGlzLl9waXBlPVtdLHRoaXMuX2RyYWc9e3RpbWU6bnVsbCx0YXJnZXQ6bnVsbCxwb2ludGVyOm51bGwsc3RhZ2U6e3N0YXJ0Om51bGwsY3VycmVudDpudWxsfSxkaXJlY3Rpb246bnVsbH0sdGhpcy5fc3RhdGVzPXtjdXJyZW50Ont9LHRhZ3M6e2luaXRpYWxpemluZzpbXCJidXN5XCJdLGFuaW1hdGluZzpbXCJidXN5XCJdLGRyYWdnaW5nOltcImludGVyYWN0aW5nXCJdfX0sYS5lYWNoKFtcIm9uUmVzaXplXCIsXCJvblRocm90dGxlZFJlc2l6ZVwiXSxhLnByb3h5KGZ1bmN0aW9uKGIsYyl7dGhpcy5faGFuZGxlcnNbY109YS5wcm94eSh0aGlzW2NdLHRoaXMpfSx0aGlzKSksYS5lYWNoKGUuUGx1Z2lucyxhLnByb3h5KGZ1bmN0aW9uKGEsYil7dGhpcy5fcGx1Z2luc1thLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpK2Euc2xpY2UoMSldPW5ldyBiKHRoaXMpfSx0aGlzKSksYS5lYWNoKGUuV29ya2VycyxhLnByb3h5KGZ1bmN0aW9uKGIsYyl7dGhpcy5fcGlwZS5wdXNoKHtmaWx0ZXI6Yy5maWx0ZXIscnVuOmEucHJveHkoYy5ydW4sdGhpcyl9KX0sdGhpcykpLHRoaXMuc2V0dXAoKSx0aGlzLmluaXRpYWxpemUoKX1lLkRlZmF1bHRzPXtpdGVtczozLGxvb3A6ITEsY2VudGVyOiExLHJld2luZDohMSxtb3VzZURyYWc6ITAsdG91Y2hEcmFnOiEwLHB1bGxEcmFnOiEwLGZyZWVEcmFnOiExLG1hcmdpbjowLHN0YWdlUGFkZGluZzowLG1lcmdlOiExLG1lcmdlRml0OiEwLGF1dG9XaWR0aDohMSxzdGFydFBvc2l0aW9uOjAscnRsOiExLHNtYXJ0U3BlZWQ6MjUwLGZsdWlkU3BlZWQ6ITEsZHJhZ0VuZFNwZWVkOiExLHJlc3BvbnNpdmU6e30scmVzcG9uc2l2ZVJlZnJlc2hSYXRlOjIwMCxyZXNwb25zaXZlQmFzZUVsZW1lbnQ6YixmYWxsYmFja0Vhc2luZzpcInN3aW5nXCIsaW5mbzohMSxuZXN0ZWRJdGVtU2VsZWN0b3I6ITEsaXRlbUVsZW1lbnQ6XCJkaXZcIixzdGFnZUVsZW1lbnQ6XCJkaXZcIixyZWZyZXNoQ2xhc3M6XCJvd2wtcmVmcmVzaFwiLGxvYWRlZENsYXNzOlwib3dsLWxvYWRlZFwiLGxvYWRpbmdDbGFzczpcIm93bC1sb2FkaW5nXCIscnRsQ2xhc3M6XCJvd2wtcnRsXCIscmVzcG9uc2l2ZUNsYXNzOlwib3dsLXJlc3BvbnNpdmVcIixkcmFnQ2xhc3M6XCJvd2wtZHJhZ1wiLGl0ZW1DbGFzczpcIm93bC1pdGVtXCIsc3RhZ2VDbGFzczpcIm93bC1zdGFnZVwiLHN0YWdlT3V0ZXJDbGFzczpcIm93bC1zdGFnZS1vdXRlclwiLGdyYWJDbGFzczpcIm93bC1ncmFiXCJ9LGUuV2lkdGg9e0RlZmF1bHQ6XCJkZWZhdWx0XCIsSW5uZXI6XCJpbm5lclwiLE91dGVyOlwib3V0ZXJcIn0sZS5UeXBlPXtFdmVudDpcImV2ZW50XCIsU3RhdGU6XCJzdGF0ZVwifSxlLlBsdWdpbnM9e30sZS5Xb3JrZXJzPVt7ZmlsdGVyOltcIndpZHRoXCIsXCJzZXR0aW5nc1wiXSxydW46ZnVuY3Rpb24oKXt0aGlzLl93aWR0aD10aGlzLiRlbGVtZW50LndpZHRoKCl9fSx7ZmlsdGVyOltcIndpZHRoXCIsXCJpdGVtc1wiLFwic2V0dGluZ3NcIl0scnVuOmZ1bmN0aW9uKGEpe2EuY3VycmVudD10aGlzLl9pdGVtcyYmdGhpcy5faXRlbXNbdGhpcy5yZWxhdGl2ZSh0aGlzLl9jdXJyZW50KV19fSx7ZmlsdGVyOltcIml0ZW1zXCIsXCJzZXR0aW5nc1wiXSxydW46ZnVuY3Rpb24oKXt0aGlzLiRzdGFnZS5jaGlsZHJlbihcIi5jbG9uZWRcIikucmVtb3ZlKCl9fSx7ZmlsdGVyOltcIndpZHRoXCIsXCJpdGVtc1wiLFwic2V0dGluZ3NcIl0scnVuOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuc2V0dGluZ3MubWFyZ2lufHxcIlwiLGM9IXRoaXMuc2V0dGluZ3MuYXV0b1dpZHRoLGQ9dGhpcy5zZXR0aW5ncy5ydGwsZT17d2lkdGg6XCJhdXRvXCIsXCJtYXJnaW4tbGVmdFwiOmQ/YjpcIlwiLFwibWFyZ2luLXJpZ2h0XCI6ZD9cIlwiOmJ9OyFjJiZ0aGlzLiRzdGFnZS5jaGlsZHJlbigpLmNzcyhlKSxhLmNzcz1lfX0se2ZpbHRlcjpbXCJ3aWR0aFwiLFwiaXRlbXNcIixcInNldHRpbmdzXCJdLHJ1bjpmdW5jdGlvbihhKXt2YXIgYj0odGhpcy53aWR0aCgpL3RoaXMuc2V0dGluZ3MuaXRlbXMpLnRvRml4ZWQoMyktdGhpcy5zZXR0aW5ncy5tYXJnaW4sYz1udWxsLGQ9dGhpcy5faXRlbXMubGVuZ3RoLGU9IXRoaXMuc2V0dGluZ3MuYXV0b1dpZHRoLGY9W107Zm9yKGEuaXRlbXM9e21lcmdlOiExLHdpZHRoOmJ9O2QtLTspYz10aGlzLl9tZXJnZXJzW2RdLGM9dGhpcy5zZXR0aW5ncy5tZXJnZUZpdCYmTWF0aC5taW4oYyx0aGlzLnNldHRpbmdzLml0ZW1zKXx8YyxhLml0ZW1zLm1lcmdlPWM+MXx8YS5pdGVtcy5tZXJnZSxmW2RdPWU/YipjOnRoaXMuX2l0ZW1zW2RdLndpZHRoKCk7dGhpcy5fd2lkdGhzPWZ9fSx7ZmlsdGVyOltcIml0ZW1zXCIsXCJzZXR0aW5nc1wiXSxydW46ZnVuY3Rpb24oKXt2YXIgYj1bXSxjPXRoaXMuX2l0ZW1zLGQ9dGhpcy5zZXR0aW5ncyxlPU1hdGgubWF4KDIqZC5pdGVtcyw0KSxmPTIqTWF0aC5jZWlsKGMubGVuZ3RoLzIpLGc9ZC5sb29wJiZjLmxlbmd0aD9kLnJld2luZD9lOk1hdGgubWF4KGUsZik6MCxoPVwiXCIsaT1cIlwiO2ZvcihnLz0yO2c+MDspYi5wdXNoKHRoaXMubm9ybWFsaXplKGIubGVuZ3RoLzIsITApKSxoKz1jW2JbYi5sZW5ndGgtMV1dWzBdLm91dGVySFRNTCxiLnB1c2godGhpcy5ub3JtYWxpemUoYy5sZW5ndGgtMS0oYi5sZW5ndGgtMSkvMiwhMCkpLGk9Y1tiW2IubGVuZ3RoLTFdXVswXS5vdXRlckhUTUwraSxnLT0xO3RoaXMuX2Nsb25lcz1iLGEoaCkuYWRkQ2xhc3MoXCJjbG9uZWRcIikuYXBwZW5kVG8odGhpcy4kc3RhZ2UpLGEoaSkuYWRkQ2xhc3MoXCJjbG9uZWRcIikucHJlcGVuZFRvKHRoaXMuJHN0YWdlKX19LHtmaWx0ZXI6W1wid2lkdGhcIixcIml0ZW1zXCIsXCJzZXR0aW5nc1wiXSxydW46ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5zZXR0aW5ncy5ydGw/MTotMSxiPXRoaXMuX2Nsb25lcy5sZW5ndGgrdGhpcy5faXRlbXMubGVuZ3RoLGM9LTEsZD0wLGU9MCxmPVtdOysrYzxiOylkPWZbYy0xXXx8MCxlPXRoaXMuX3dpZHRoc1t0aGlzLnJlbGF0aXZlKGMpXSt0aGlzLnNldHRpbmdzLm1hcmdpbixmLnB1c2goZCtlKmEpO3RoaXMuX2Nvb3JkaW5hdGVzPWZ9fSx7ZmlsdGVyOltcIndpZHRoXCIsXCJpdGVtc1wiLFwic2V0dGluZ3NcIl0scnVuOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5zZXR0aW5ncy5zdGFnZVBhZGRpbmcsYj10aGlzLl9jb29yZGluYXRlcyxjPXt3aWR0aDpNYXRoLmNlaWwoTWF0aC5hYnMoYltiLmxlbmd0aC0xXSkpKzIqYSxcInBhZGRpbmctbGVmdFwiOmF8fFwiXCIsXCJwYWRkaW5nLXJpZ2h0XCI6YXx8XCJcIn07dGhpcy4kc3RhZ2UuY3NzKGMpfX0se2ZpbHRlcjpbXCJ3aWR0aFwiLFwiaXRlbXNcIixcInNldHRpbmdzXCJdLHJ1bjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLl9jb29yZGluYXRlcy5sZW5ndGgsYz0hdGhpcy5zZXR0aW5ncy5hdXRvV2lkdGgsZD10aGlzLiRzdGFnZS5jaGlsZHJlbigpO2lmKGMmJmEuaXRlbXMubWVyZ2UpZm9yKDtiLS07KWEuY3NzLndpZHRoPXRoaXMuX3dpZHRoc1t0aGlzLnJlbGF0aXZlKGIpXSxkLmVxKGIpLmNzcyhhLmNzcyk7ZWxzZSBjJiYoYS5jc3Mud2lkdGg9YS5pdGVtcy53aWR0aCxkLmNzcyhhLmNzcykpfX0se2ZpbHRlcjpbXCJpdGVtc1wiXSxydW46ZnVuY3Rpb24oKXt0aGlzLl9jb29yZGluYXRlcy5sZW5ndGg8MSYmdGhpcy4kc3RhZ2UucmVtb3ZlQXR0cihcInN0eWxlXCIpfX0se2ZpbHRlcjpbXCJ3aWR0aFwiLFwiaXRlbXNcIixcInNldHRpbmdzXCJdLHJ1bjpmdW5jdGlvbihhKXthLmN1cnJlbnQ9YS5jdXJyZW50P3RoaXMuJHN0YWdlLmNoaWxkcmVuKCkuaW5kZXgoYS5jdXJyZW50KTowLGEuY3VycmVudD1NYXRoLm1heCh0aGlzLm1pbmltdW0oKSxNYXRoLm1pbih0aGlzLm1heGltdW0oKSxhLmN1cnJlbnQpKSx0aGlzLnJlc2V0KGEuY3VycmVudCl9fSx7ZmlsdGVyOltcInBvc2l0aW9uXCJdLHJ1bjpmdW5jdGlvbigpe3RoaXMuYW5pbWF0ZSh0aGlzLmNvb3JkaW5hdGVzKHRoaXMuX2N1cnJlbnQpKX19LHtmaWx0ZXI6W1wid2lkdGhcIixcInBvc2l0aW9uXCIsXCJpdGVtc1wiLFwic2V0dGluZ3NcIl0scnVuOmZ1bmN0aW9uKCl7dmFyIGEsYixjLGQsZT10aGlzLnNldHRpbmdzLnJ0bD8xOi0xLGY9Mip0aGlzLnNldHRpbmdzLnN0YWdlUGFkZGluZyxnPXRoaXMuY29vcmRpbmF0ZXModGhpcy5jdXJyZW50KCkpK2YsaD1nK3RoaXMud2lkdGgoKSplLGk9W107Zm9yKGM9MCxkPXRoaXMuX2Nvb3JkaW5hdGVzLmxlbmd0aDtkPmM7YysrKWE9dGhpcy5fY29vcmRpbmF0ZXNbYy0xXXx8MCxiPU1hdGguYWJzKHRoaXMuX2Nvb3JkaW5hdGVzW2NdKStmKmUsKHRoaXMub3AoYSxcIjw9XCIsZykmJnRoaXMub3AoYSxcIj5cIixoKXx8dGhpcy5vcChiLFwiPFwiLGcpJiZ0aGlzLm9wKGIsXCI+XCIsaCkpJiZpLnB1c2goYyk7dGhpcy4kc3RhZ2UuY2hpbGRyZW4oXCIuYWN0aXZlXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpLHRoaXMuJHN0YWdlLmNoaWxkcmVuKFwiOmVxKFwiK2kuam9pbihcIiksIDplcShcIikrXCIpXCIpLmFkZENsYXNzKFwiYWN0aXZlXCIpLHRoaXMuJHN0YWdlLmNoaWxkcmVuKFwiLmNlbnRlclwiKS5yZW1vdmVDbGFzcyhcImNlbnRlclwiKSx0aGlzLnNldHRpbmdzLmNlbnRlciYmdGhpcy4kc3RhZ2UuY2hpbGRyZW4oKS5lcSh0aGlzLmN1cnJlbnQoKSkuYWRkQ2xhc3MoXCJjZW50ZXJcIil9fV0sZS5wcm90b3R5cGUuaW5pdGlhbGl6ZT1mdW5jdGlvbigpe2lmKHRoaXMuZW50ZXIoXCJpbml0aWFsaXppbmdcIiksdGhpcy50cmlnZ2VyKFwiaW5pdGlhbGl6ZVwiKSx0aGlzLiRlbGVtZW50LnRvZ2dsZUNsYXNzKHRoaXMuc2V0dGluZ3MucnRsQ2xhc3MsdGhpcy5zZXR0aW5ncy5ydGwpLHRoaXMuc2V0dGluZ3MuYXV0b1dpZHRoJiYhdGhpcy5pcyhcInByZS1sb2FkaW5nXCIpKXt2YXIgYixjLGU7Yj10aGlzLiRlbGVtZW50LmZpbmQoXCJpbWdcIiksYz10aGlzLnNldHRpbmdzLm5lc3RlZEl0ZW1TZWxlY3Rvcj9cIi5cIit0aGlzLnNldHRpbmdzLm5lc3RlZEl0ZW1TZWxlY3RvcjpkLGU9dGhpcy4kZWxlbWVudC5jaGlsZHJlbihjKS53aWR0aCgpLGIubGVuZ3RoJiYwPj1lJiZ0aGlzLnByZWxvYWRBdXRvV2lkdGhJbWFnZXMoYil9dGhpcy4kZWxlbWVudC5hZGRDbGFzcyh0aGlzLm9wdGlvbnMubG9hZGluZ0NsYXNzKSx0aGlzLiRzdGFnZT1hKFwiPFwiK3RoaXMuc2V0dGluZ3Muc3RhZ2VFbGVtZW50KycgY2xhc3M9XCInK3RoaXMuc2V0dGluZ3Muc3RhZ2VDbGFzcysnXCIvPicpLndyYXAoJzxkaXYgY2xhc3M9XCInK3RoaXMuc2V0dGluZ3Muc3RhZ2VPdXRlckNsYXNzKydcIi8+JyksdGhpcy4kZWxlbWVudC5hcHBlbmQodGhpcy4kc3RhZ2UucGFyZW50KCkpLHRoaXMucmVwbGFjZSh0aGlzLiRlbGVtZW50LmNoaWxkcmVuKCkubm90KHRoaXMuJHN0YWdlLnBhcmVudCgpKSksdGhpcy4kZWxlbWVudC5pcyhcIjp2aXNpYmxlXCIpP3RoaXMucmVmcmVzaCgpOnRoaXMuaW52YWxpZGF0ZShcIndpZHRoXCIpLHRoaXMuJGVsZW1lbnQucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmxvYWRpbmdDbGFzcykuYWRkQ2xhc3ModGhpcy5vcHRpb25zLmxvYWRlZENsYXNzKSx0aGlzLnJlZ2lzdGVyRXZlbnRIYW5kbGVycygpLHRoaXMubGVhdmUoXCJpbml0aWFsaXppbmdcIiksdGhpcy50cmlnZ2VyKFwiaW5pdGlhbGl6ZWRcIil9LGUucHJvdG90eXBlLnNldHVwPWZ1bmN0aW9uKCl7dmFyIGI9dGhpcy52aWV3cG9ydCgpLGM9dGhpcy5vcHRpb25zLnJlc3BvbnNpdmUsZD0tMSxlPW51bGw7Yz8oYS5lYWNoKGMsZnVuY3Rpb24oYSl7Yj49YSYmYT5kJiYoZD1OdW1iZXIoYSkpfSksZT1hLmV4dGVuZCh7fSx0aGlzLm9wdGlvbnMsY1tkXSksXCJmdW5jdGlvblwiPT10eXBlb2YgZS5zdGFnZVBhZGRpbmcmJihlLnN0YWdlUGFkZGluZz1lLnN0YWdlUGFkZGluZygpKSxkZWxldGUgZS5yZXNwb25zaXZlLGUucmVzcG9uc2l2ZUNsYXNzJiZ0aGlzLiRlbGVtZW50LmF0dHIoXCJjbGFzc1wiLHRoaXMuJGVsZW1lbnQuYXR0cihcImNsYXNzXCIpLnJlcGxhY2UobmV3IFJlZ0V4cChcIihcIit0aGlzLm9wdGlvbnMucmVzcG9uc2l2ZUNsYXNzK1wiLSlcXFxcUytcXFxcc1wiLFwiZ1wiKSxcIiQxXCIrZCkpKTplPWEuZXh0ZW5kKHt9LHRoaXMub3B0aW9ucyksdGhpcy50cmlnZ2VyKFwiY2hhbmdlXCIse3Byb3BlcnR5OntuYW1lOlwic2V0dGluZ3NcIix2YWx1ZTplfX0pLHRoaXMuX2JyZWFrcG9pbnQ9ZCx0aGlzLnNldHRpbmdzPWUsdGhpcy5pbnZhbGlkYXRlKFwic2V0dGluZ3NcIiksdGhpcy50cmlnZ2VyKFwiY2hhbmdlZFwiLHtwcm9wZXJ0eTp7bmFtZTpcInNldHRpbmdzXCIsdmFsdWU6dGhpcy5zZXR0aW5nc319KX0sZS5wcm90b3R5cGUub3B0aW9uc0xvZ2ljPWZ1bmN0aW9uKCl7dGhpcy5zZXR0aW5ncy5hdXRvV2lkdGgmJih0aGlzLnNldHRpbmdzLnN0YWdlUGFkZGluZz0hMSx0aGlzLnNldHRpbmdzLm1lcmdlPSExKX0sZS5wcm90b3R5cGUucHJlcGFyZT1mdW5jdGlvbihiKXt2YXIgYz10aGlzLnRyaWdnZXIoXCJwcmVwYXJlXCIse2NvbnRlbnQ6Yn0pO3JldHVybiBjLmRhdGF8fChjLmRhdGE9YShcIjxcIit0aGlzLnNldHRpbmdzLml0ZW1FbGVtZW50K1wiLz5cIikuYWRkQ2xhc3ModGhpcy5vcHRpb25zLml0ZW1DbGFzcykuYXBwZW5kKGIpKSx0aGlzLnRyaWdnZXIoXCJwcmVwYXJlZFwiLHtjb250ZW50OmMuZGF0YX0pLGMuZGF0YX0sZS5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7Zm9yKHZhciBiPTAsYz10aGlzLl9waXBlLmxlbmd0aCxkPWEucHJveHkoZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXNbYV19LHRoaXMuX2ludmFsaWRhdGVkKSxlPXt9O2M+YjspKHRoaXMuX2ludmFsaWRhdGVkLmFsbHx8YS5ncmVwKHRoaXMuX3BpcGVbYl0uZmlsdGVyLGQpLmxlbmd0aD4wKSYmdGhpcy5fcGlwZVtiXS5ydW4oZSksYisrO3RoaXMuX2ludmFsaWRhdGVkPXt9LCF0aGlzLmlzKFwidmFsaWRcIikmJnRoaXMuZW50ZXIoXCJ2YWxpZFwiKX0sZS5wcm90b3R5cGUud2lkdGg9ZnVuY3Rpb24oYSl7c3dpdGNoKGE9YXx8ZS5XaWR0aC5EZWZhdWx0KXtjYXNlIGUuV2lkdGguSW5uZXI6Y2FzZSBlLldpZHRoLk91dGVyOnJldHVybiB0aGlzLl93aWR0aDtkZWZhdWx0OnJldHVybiB0aGlzLl93aWR0aC0yKnRoaXMuc2V0dGluZ3Muc3RhZ2VQYWRkaW5nK3RoaXMuc2V0dGluZ3MubWFyZ2lufX0sZS5wcm90b3R5cGUucmVmcmVzaD1mdW5jdGlvbigpe3RoaXMuZW50ZXIoXCJyZWZyZXNoaW5nXCIpLHRoaXMudHJpZ2dlcihcInJlZnJlc2hcIiksdGhpcy5zZXR1cCgpLHRoaXMub3B0aW9uc0xvZ2ljKCksdGhpcy4kZWxlbWVudC5hZGRDbGFzcyh0aGlzLm9wdGlvbnMucmVmcmVzaENsYXNzKSx0aGlzLnVwZGF0ZSgpLHRoaXMuJGVsZW1lbnQucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLnJlZnJlc2hDbGFzcyksdGhpcy5sZWF2ZShcInJlZnJlc2hpbmdcIiksdGhpcy50cmlnZ2VyKFwicmVmcmVzaGVkXCIpfSxlLnByb3RvdHlwZS5vblRocm90dGxlZFJlc2l6ZT1mdW5jdGlvbigpe2IuY2xlYXJUaW1lb3V0KHRoaXMucmVzaXplVGltZXIpLHRoaXMucmVzaXplVGltZXI9Yi5zZXRUaW1lb3V0KHRoaXMuX2hhbmRsZXJzLm9uUmVzaXplLHRoaXMuc2V0dGluZ3MucmVzcG9uc2l2ZVJlZnJlc2hSYXRlKX0sZS5wcm90b3R5cGUub25SZXNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXRlbXMubGVuZ3RoP3RoaXMuX3dpZHRoPT09dGhpcy4kZWxlbWVudC53aWR0aCgpPyExOnRoaXMuJGVsZW1lbnQuaXMoXCI6dmlzaWJsZVwiKT8odGhpcy5lbnRlcihcInJlc2l6aW5nXCIpLHRoaXMudHJpZ2dlcihcInJlc2l6ZVwiKS5pc0RlZmF1bHRQcmV2ZW50ZWQoKT8odGhpcy5sZWF2ZShcInJlc2l6aW5nXCIpLCExKToodGhpcy5pbnZhbGlkYXRlKFwid2lkdGhcIiksdGhpcy5yZWZyZXNoKCksdGhpcy5sZWF2ZShcInJlc2l6aW5nXCIpLHZvaWQgdGhpcy50cmlnZ2VyKFwicmVzaXplZFwiKSkpOiExOiExfSxlLnByb3RvdHlwZS5yZWdpc3RlckV2ZW50SGFuZGxlcnM9ZnVuY3Rpb24oKXthLnN1cHBvcnQudHJhbnNpdGlvbiYmdGhpcy4kc3RhZ2Uub24oYS5zdXBwb3J0LnRyYW5zaXRpb24uZW5kK1wiLm93bC5jb3JlXCIsYS5wcm94eSh0aGlzLm9uVHJhbnNpdGlvbkVuZCx0aGlzKSksdGhpcy5zZXR0aW5ncy5yZXNwb25zaXZlIT09ITEmJnRoaXMub24oYixcInJlc2l6ZVwiLHRoaXMuX2hhbmRsZXJzLm9uVGhyb3R0bGVkUmVzaXplKSx0aGlzLnNldHRpbmdzLm1vdXNlRHJhZyYmKHRoaXMuJGVsZW1lbnQuYWRkQ2xhc3ModGhpcy5vcHRpb25zLmRyYWdDbGFzcyksdGhpcy4kc3RhZ2Uub24oXCJtb3VzZWRvd24ub3dsLmNvcmVcIixhLnByb3h5KHRoaXMub25EcmFnU3RhcnQsdGhpcykpLHRoaXMuJHN0YWdlLm9uKFwiZHJhZ3N0YXJ0Lm93bC5jb3JlIHNlbGVjdHN0YXJ0Lm93bC5jb3JlXCIsZnVuY3Rpb24oKXtyZXR1cm4hMX0pKSx0aGlzLnNldHRpbmdzLnRvdWNoRHJhZyYmKHRoaXMuJHN0YWdlLm9uKFwidG91Y2hzdGFydC5vd2wuY29yZVwiLGEucHJveHkodGhpcy5vbkRyYWdTdGFydCx0aGlzKSksdGhpcy4kc3RhZ2Uub24oXCJ0b3VjaGNhbmNlbC5vd2wuY29yZVwiLGEucHJveHkodGhpcy5vbkRyYWdFbmQsdGhpcykpKX0sZS5wcm90b3R5cGUub25EcmFnU3RhcnQ9ZnVuY3Rpb24oYil7dmFyIGQ9bnVsbDszIT09Yi53aGljaCYmKGEuc3VwcG9ydC50cmFuc2Zvcm0/KGQ9dGhpcy4kc3RhZ2UuY3NzKFwidHJhbnNmb3JtXCIpLnJlcGxhY2UoLy4qXFwofFxcKXwgL2csXCJcIikuc3BsaXQoXCIsXCIpLGQ9e3g6ZFsxNj09PWQubGVuZ3RoPzEyOjRdLHk6ZFsxNj09PWQubGVuZ3RoPzEzOjVdfSk6KGQ9dGhpcy4kc3RhZ2UucG9zaXRpb24oKSxkPXt4OnRoaXMuc2V0dGluZ3MucnRsP2QubGVmdCt0aGlzLiRzdGFnZS53aWR0aCgpLXRoaXMud2lkdGgoKSt0aGlzLnNldHRpbmdzLm1hcmdpbjpkLmxlZnQseTpkLnRvcH0pLHRoaXMuaXMoXCJhbmltYXRpbmdcIikmJihhLnN1cHBvcnQudHJhbnNmb3JtP3RoaXMuYW5pbWF0ZShkLngpOnRoaXMuJHN0YWdlLnN0b3AoKSx0aGlzLmludmFsaWRhdGUoXCJwb3NpdGlvblwiKSksdGhpcy4kZWxlbWVudC50b2dnbGVDbGFzcyh0aGlzLm9wdGlvbnMuZ3JhYkNsYXNzLFwibW91c2Vkb3duXCI9PT1iLnR5cGUpLHRoaXMuc3BlZWQoMCksdGhpcy5fZHJhZy50aW1lPShuZXcgRGF0ZSkuZ2V0VGltZSgpLHRoaXMuX2RyYWcudGFyZ2V0PWEoYi50YXJnZXQpLHRoaXMuX2RyYWcuc3RhZ2Uuc3RhcnQ9ZCx0aGlzLl9kcmFnLnN0YWdlLmN1cnJlbnQ9ZCx0aGlzLl9kcmFnLnBvaW50ZXI9dGhpcy5wb2ludGVyKGIpLGEoYykub24oXCJtb3VzZXVwLm93bC5jb3JlIHRvdWNoZW5kLm93bC5jb3JlXCIsYS5wcm94eSh0aGlzLm9uRHJhZ0VuZCx0aGlzKSksYShjKS5vbmUoXCJtb3VzZW1vdmUub3dsLmNvcmUgdG91Y2htb3ZlLm93bC5jb3JlXCIsYS5wcm94eShmdW5jdGlvbihiKXt2YXIgZD10aGlzLmRpZmZlcmVuY2UodGhpcy5fZHJhZy5wb2ludGVyLHRoaXMucG9pbnRlcihiKSk7YShjKS5vbihcIm1vdXNlbW92ZS5vd2wuY29yZSB0b3VjaG1vdmUub3dsLmNvcmVcIixhLnByb3h5KHRoaXMub25EcmFnTW92ZSx0aGlzKSksTWF0aC5hYnMoZC54KTxNYXRoLmFicyhkLnkpJiZ0aGlzLmlzKFwidmFsaWRcIil8fChiLnByZXZlbnREZWZhdWx0KCksdGhpcy5lbnRlcihcImRyYWdnaW5nXCIpLHRoaXMudHJpZ2dlcihcImRyYWdcIikpfSx0aGlzKSkpfSxlLnByb3RvdHlwZS5vbkRyYWdNb3ZlPWZ1bmN0aW9uKGEpe3ZhciBiPW51bGwsYz1udWxsLGQ9bnVsbCxlPXRoaXMuZGlmZmVyZW5jZSh0aGlzLl9kcmFnLnBvaW50ZXIsdGhpcy5wb2ludGVyKGEpKSxmPXRoaXMuZGlmZmVyZW5jZSh0aGlzLl9kcmFnLnN0YWdlLnN0YXJ0LGUpO3RoaXMuaXMoXCJkcmFnZ2luZ1wiKSYmKGEucHJldmVudERlZmF1bHQoKSx0aGlzLnNldHRpbmdzLmxvb3A/KGI9dGhpcy5jb29yZGluYXRlcyh0aGlzLm1pbmltdW0oKSksYz10aGlzLmNvb3JkaW5hdGVzKHRoaXMubWF4aW11bSgpKzEpLWIsZi54PSgoZi54LWIpJWMrYyklYytiKTooYj10aGlzLnNldHRpbmdzLnJ0bD90aGlzLmNvb3JkaW5hdGVzKHRoaXMubWF4aW11bSgpKTp0aGlzLmNvb3JkaW5hdGVzKHRoaXMubWluaW11bSgpKSxjPXRoaXMuc2V0dGluZ3MucnRsP3RoaXMuY29vcmRpbmF0ZXModGhpcy5taW5pbXVtKCkpOnRoaXMuY29vcmRpbmF0ZXModGhpcy5tYXhpbXVtKCkpLGQ9dGhpcy5zZXR0aW5ncy5wdWxsRHJhZz8tMSplLngvNTowLGYueD1NYXRoLm1heChNYXRoLm1pbihmLngsYitkKSxjK2QpKSx0aGlzLl9kcmFnLnN0YWdlLmN1cnJlbnQ9Zix0aGlzLmFuaW1hdGUoZi54KSl9LGUucHJvdG90eXBlLm9uRHJhZ0VuZD1mdW5jdGlvbihiKXt2YXIgZD10aGlzLmRpZmZlcmVuY2UodGhpcy5fZHJhZy5wb2ludGVyLHRoaXMucG9pbnRlcihiKSksZT10aGlzLl9kcmFnLnN0YWdlLmN1cnJlbnQsZj1kLng+MF50aGlzLnNldHRpbmdzLnJ0bD9cImxlZnRcIjpcInJpZ2h0XCI7YShjKS5vZmYoXCIub3dsLmNvcmVcIiksdGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMuZ3JhYkNsYXNzKSwoMCE9PWQueCYmdGhpcy5pcyhcImRyYWdnaW5nXCIpfHwhdGhpcy5pcyhcInZhbGlkXCIpKSYmKHRoaXMuc3BlZWQodGhpcy5zZXR0aW5ncy5kcmFnRW5kU3BlZWR8fHRoaXMuc2V0dGluZ3Muc21hcnRTcGVlZCksdGhpcy5jdXJyZW50KHRoaXMuY2xvc2VzdChlLngsMCE9PWQueD9mOnRoaXMuX2RyYWcuZGlyZWN0aW9uKSksdGhpcy5pbnZhbGlkYXRlKFwicG9zaXRpb25cIiksdGhpcy51cGRhdGUoKSx0aGlzLl9kcmFnLmRpcmVjdGlvbj1mLChNYXRoLmFicyhkLngpPjN8fChuZXcgRGF0ZSkuZ2V0VGltZSgpLXRoaXMuX2RyYWcudGltZT4zMDApJiZ0aGlzLl9kcmFnLnRhcmdldC5vbmUoXCJjbGljay5vd2wuY29yZVwiLGZ1bmN0aW9uKCl7cmV0dXJuITF9KSksdGhpcy5pcyhcImRyYWdnaW5nXCIpJiYodGhpcy5sZWF2ZShcImRyYWdnaW5nXCIpLHRoaXMudHJpZ2dlcihcImRyYWdnZWRcIikpfSxlLnByb3RvdHlwZS5jbG9zZXN0PWZ1bmN0aW9uKGIsYyl7dmFyIGQ9LTEsZT0zMCxmPXRoaXMud2lkdGgoKSxnPXRoaXMuY29vcmRpbmF0ZXMoKTtyZXR1cm4gdGhpcy5zZXR0aW5ncy5mcmVlRHJhZ3x8YS5lYWNoKGcsYS5wcm94eShmdW5jdGlvbihhLGgpe3JldHVyblwibGVmdFwiPT09YyYmYj5oLWUmJmgrZT5iP2Q9YTpcInJpZ2h0XCI9PT1jJiZiPmgtZi1lJiZoLWYrZT5iP2Q9YSsxOnRoaXMub3AoYixcIjxcIixoKSYmdGhpcy5vcChiLFwiPlwiLGdbYSsxXXx8aC1mKSYmKGQ9XCJsZWZ0XCI9PT1jP2ErMTphKSwtMT09PWR9LHRoaXMpKSx0aGlzLnNldHRpbmdzLmxvb3B8fCh0aGlzLm9wKGIsXCI+XCIsZ1t0aGlzLm1pbmltdW0oKV0pP2Q9Yj10aGlzLm1pbmltdW0oKTp0aGlzLm9wKGIsXCI8XCIsZ1t0aGlzLm1heGltdW0oKV0pJiYoZD1iPXRoaXMubWF4aW11bSgpKSksZH0sZS5wcm90b3R5cGUuYW5pbWF0ZT1mdW5jdGlvbihiKXt2YXIgYz10aGlzLnNwZWVkKCk+MDt0aGlzLmlzKFwiYW5pbWF0aW5nXCIpJiZ0aGlzLm9uVHJhbnNpdGlvbkVuZCgpLGMmJih0aGlzLmVudGVyKFwiYW5pbWF0aW5nXCIpLHRoaXMudHJpZ2dlcihcInRyYW5zbGF0ZVwiKSksYS5zdXBwb3J0LnRyYW5zZm9ybTNkJiZhLnN1cHBvcnQudHJhbnNpdGlvbj90aGlzLiRzdGFnZS5jc3Moe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKFwiK2IrXCJweCwwcHgsMHB4KVwiLHRyYW5zaXRpb246dGhpcy5zcGVlZCgpLzFlMytcInNcIn0pOmM/dGhpcy4kc3RhZ2UuYW5pbWF0ZSh7bGVmdDpiK1wicHhcIn0sdGhpcy5zcGVlZCgpLHRoaXMuc2V0dGluZ3MuZmFsbGJhY2tFYXNpbmcsYS5wcm94eSh0aGlzLm9uVHJhbnNpdGlvbkVuZCx0aGlzKSk6dGhpcy4kc3RhZ2UuY3NzKHtsZWZ0OmIrXCJweFwifSl9LGUucHJvdG90eXBlLmlzPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl9zdGF0ZXMuY3VycmVudFthXSYmdGhpcy5fc3RhdGVzLmN1cnJlbnRbYV0+MH0sZS5wcm90b3R5cGUuY3VycmVudD1mdW5jdGlvbihhKXtpZihhPT09ZClyZXR1cm4gdGhpcy5fY3VycmVudDtpZigwPT09dGhpcy5faXRlbXMubGVuZ3RoKXJldHVybiBkO2lmKGE9dGhpcy5ub3JtYWxpemUoYSksdGhpcy5fY3VycmVudCE9PWEpe3ZhciBiPXRoaXMudHJpZ2dlcihcImNoYW5nZVwiLHtwcm9wZXJ0eTp7bmFtZTpcInBvc2l0aW9uXCIsdmFsdWU6YX19KTtiLmRhdGEhPT1kJiYoYT10aGlzLm5vcm1hbGl6ZShiLmRhdGEpKSx0aGlzLl9jdXJyZW50PWEsdGhpcy5pbnZhbGlkYXRlKFwicG9zaXRpb25cIiksdGhpcy50cmlnZ2VyKFwiY2hhbmdlZFwiLHtwcm9wZXJ0eTp7bmFtZTpcInBvc2l0aW9uXCIsdmFsdWU6dGhpcy5fY3VycmVudH19KX1yZXR1cm4gdGhpcy5fY3VycmVudH0sZS5wcm90b3R5cGUuaW52YWxpZGF0ZT1mdW5jdGlvbihiKXtyZXR1cm5cInN0cmluZ1wiPT09YS50eXBlKGIpJiYodGhpcy5faW52YWxpZGF0ZWRbYl09ITAsdGhpcy5pcyhcInZhbGlkXCIpJiZ0aGlzLmxlYXZlKFwidmFsaWRcIikpLGEubWFwKHRoaXMuX2ludmFsaWRhdGVkLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGJ9KX0sZS5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oYSl7YT10aGlzLm5vcm1hbGl6ZShhKSxhIT09ZCYmKHRoaXMuX3NwZWVkPTAsdGhpcy5fY3VycmVudD1hLHRoaXMuc3VwcHJlc3MoW1widHJhbnNsYXRlXCIsXCJ0cmFuc2xhdGVkXCJdKSx0aGlzLmFuaW1hdGUodGhpcy5jb29yZGluYXRlcyhhKSksdGhpcy5yZWxlYXNlKFtcInRyYW5zbGF0ZVwiLFwidHJhbnNsYXRlZFwiXSkpfSxlLnByb3RvdHlwZS5ub3JtYWxpemU9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLl9pdGVtcy5sZW5ndGgsZT1iPzA6dGhpcy5fY2xvbmVzLmxlbmd0aDtyZXR1cm4hdGhpcy5pc051bWVyaWMoYSl8fDE+Yz9hPWQ6KDA+YXx8YT49YytlKSYmKGE9KChhLWUvMiklYytjKSVjK2UvMiksYX0sZS5wcm90b3R5cGUucmVsYXRpdmU9ZnVuY3Rpb24oYSl7cmV0dXJuIGEtPXRoaXMuX2Nsb25lcy5sZW5ndGgvMix0aGlzLm5vcm1hbGl6ZShhLCEwKX0sZS5wcm90b3R5cGUubWF4aW11bT1mdW5jdGlvbihhKXt2YXIgYixjLGQsZT10aGlzLnNldHRpbmdzLGY9dGhpcy5fY29vcmRpbmF0ZXMubGVuZ3RoO2lmKGUubG9vcClmPXRoaXMuX2Nsb25lcy5sZW5ndGgvMit0aGlzLl9pdGVtcy5sZW5ndGgtMTtlbHNlIGlmKGUuYXV0b1dpZHRofHxlLm1lcmdlKXtpZihiPXRoaXMuX2l0ZW1zLmxlbmd0aClmb3IoYz10aGlzLl9pdGVtc1stLWJdLndpZHRoKCksZD10aGlzLiRlbGVtZW50LndpZHRoKCk7Yi0tJiYoYys9dGhpcy5faXRlbXNbYl0ud2lkdGgoKSt0aGlzLnNldHRpbmdzLm1hcmdpbiwhKGM+ZCkpOyk7Zj1iKzF9ZWxzZSBmPWUuY2VudGVyP3RoaXMuX2l0ZW1zLmxlbmd0aC0xOnRoaXMuX2l0ZW1zLmxlbmd0aC1lLml0ZW1zO3JldHVybiBhJiYoZi09dGhpcy5fY2xvbmVzLmxlbmd0aC8yKSxNYXRoLm1heChmLDApfSxlLnByb3RvdHlwZS5taW5pbXVtPWZ1bmN0aW9uKGEpe3JldHVybiBhPzA6dGhpcy5fY2xvbmVzLmxlbmd0aC8yfSxlLnByb3RvdHlwZS5pdGVtcz1mdW5jdGlvbihhKXtyZXR1cm4gYT09PWQ/dGhpcy5faXRlbXMuc2xpY2UoKTooYT10aGlzLm5vcm1hbGl6ZShhLCEwKSx0aGlzLl9pdGVtc1thXSl9LGUucHJvdG90eXBlLm1lcmdlcnM9ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1kP3RoaXMuX21lcmdlcnMuc2xpY2UoKTooYT10aGlzLm5vcm1hbGl6ZShhLCEwKSx0aGlzLl9tZXJnZXJzW2FdKX0sZS5wcm90b3R5cGUuY2xvbmVzPWZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMuX2Nsb25lcy5sZW5ndGgvMixlPWMrdGhpcy5faXRlbXMubGVuZ3RoLGY9ZnVuY3Rpb24oYSl7cmV0dXJuIGElMj09PTA/ZSthLzI6Yy0oYSsxKS8yfTtyZXR1cm4gYj09PWQ/YS5tYXAodGhpcy5fY2xvbmVzLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGYoYil9KTphLm1hcCh0aGlzLl9jbG9uZXMsZnVuY3Rpb24oYSxjKXtyZXR1cm4gYT09PWI/ZihjKTpudWxsfSl9LGUucHJvdG90eXBlLnNwZWVkPWZ1bmN0aW9uKGEpe3JldHVybiBhIT09ZCYmKHRoaXMuX3NwZWVkPWEpLHRoaXMuX3NwZWVkfSxlLnByb3RvdHlwZS5jb29yZGluYXRlcz1mdW5jdGlvbihiKXt2YXIgYyxlPTEsZj1iLTE7cmV0dXJuIGI9PT1kP2EubWFwKHRoaXMuX2Nvb3JkaW5hdGVzLGEucHJveHkoZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5jb29yZGluYXRlcyhiKX0sdGhpcykpOih0aGlzLnNldHRpbmdzLmNlbnRlcj8odGhpcy5zZXR0aW5ncy5ydGwmJihlPS0xLGY9YisxKSxjPXRoaXMuX2Nvb3JkaW5hdGVzW2JdLGMrPSh0aGlzLndpZHRoKCktYysodGhpcy5fY29vcmRpbmF0ZXNbZl18fDApKS8yKmUpOmM9dGhpcy5fY29vcmRpbmF0ZXNbZl18fDAsYz1NYXRoLmNlaWwoYykpfSxlLnByb3RvdHlwZS5kdXJhdGlvbj1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIDA9PT1jPzA6TWF0aC5taW4oTWF0aC5tYXgoTWF0aC5hYnMoYi1hKSwxKSw2KSpNYXRoLmFicyhjfHx0aGlzLnNldHRpbmdzLnNtYXJ0U3BlZWQpfSxlLnByb3RvdHlwZS50bz1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuY3VycmVudCgpLGQ9bnVsbCxlPWEtdGhpcy5yZWxhdGl2ZShjKSxmPShlPjApLSgwPmUpLGc9dGhpcy5faXRlbXMubGVuZ3RoLGg9dGhpcy5taW5pbXVtKCksaT10aGlzLm1heGltdW0oKTt0aGlzLnNldHRpbmdzLmxvb3A/KCF0aGlzLnNldHRpbmdzLnJld2luZCYmTWF0aC5hYnMoZSk+Zy8yJiYoZSs9LTEqZipnKSxhPWMrZSxkPSgoYS1oKSVnK2cpJWcraCxkIT09YSYmaT49ZC1lJiZkLWU+MCYmKGM9ZC1lLGE9ZCx0aGlzLnJlc2V0KGMpKSk6dGhpcy5zZXR0aW5ncy5yZXdpbmQ/KGkrPTEsYT0oYSVpK2kpJWkpOmE9TWF0aC5tYXgoaCxNYXRoLm1pbihpLGEpKSx0aGlzLnNwZWVkKHRoaXMuZHVyYXRpb24oYyxhLGIpKSx0aGlzLmN1cnJlbnQoYSksdGhpcy4kZWxlbWVudC5pcyhcIjp2aXNpYmxlXCIpJiZ0aGlzLnVwZGF0ZSgpfSxlLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKGEpe2E9YXx8ITEsdGhpcy50byh0aGlzLnJlbGF0aXZlKHRoaXMuY3VycmVudCgpKSsxLGEpfSxlLnByb3RvdHlwZS5wcmV2PWZ1bmN0aW9uKGEpe2E9YXx8ITEsdGhpcy50byh0aGlzLnJlbGF0aXZlKHRoaXMuY3VycmVudCgpKS0xLGEpfSxlLnByb3RvdHlwZS5vblRyYW5zaXRpb25FbmQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGEhPT1kJiYoYS5zdG9wUHJvcGFnYXRpb24oKSwoYS50YXJnZXR8fGEuc3JjRWxlbWVudHx8YS5vcmlnaW5hbFRhcmdldCkhPT10aGlzLiRzdGFnZS5nZXQoMCkpPyExOih0aGlzLmxlYXZlKFwiYW5pbWF0aW5nXCIpLHZvaWQgdGhpcy50cmlnZ2VyKFwidHJhbnNsYXRlZFwiKSl9LGUucHJvdG90eXBlLnZpZXdwb3J0PWZ1bmN0aW9uKCl7dmFyIGQ7cmV0dXJuIHRoaXMub3B0aW9ucy5yZXNwb25zaXZlQmFzZUVsZW1lbnQhPT1iP2Q9YSh0aGlzLm9wdGlvbnMucmVzcG9uc2l2ZUJhc2VFbGVtZW50KS53aWR0aCgpOmIuaW5uZXJXaWR0aD9kPWIuaW5uZXJXaWR0aDpjLmRvY3VtZW50RWxlbWVudCYmYy5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg/ZD1jLmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDpjb25zb2xlLndhcm4oXCJDYW4gbm90IGRldGVjdCB2aWV3cG9ydCB3aWR0aC5cIiksZH0sZS5wcm90b3R5cGUucmVwbGFjZT1mdW5jdGlvbihiKXt0aGlzLiRzdGFnZS5lbXB0eSgpLHRoaXMuX2l0ZW1zPVtdLGImJihiPWIgaW5zdGFuY2VvZiBqUXVlcnk/YjphKGIpKSx0aGlzLnNldHRpbmdzLm5lc3RlZEl0ZW1TZWxlY3RvciYmKGI9Yi5maW5kKFwiLlwiK3RoaXMuc2V0dGluZ3MubmVzdGVkSXRlbVNlbGVjdG9yKSksYi5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gMT09PXRoaXMubm9kZVR5cGV9KS5lYWNoKGEucHJveHkoZnVuY3Rpb24oYSxiKXtiPXRoaXMucHJlcGFyZShiKSx0aGlzLiRzdGFnZS5hcHBlbmQoYiksdGhpcy5faXRlbXMucHVzaChiKSx0aGlzLl9tZXJnZXJzLnB1c2goMSpiLmZpbmQoXCJbZGF0YS1tZXJnZV1cIikuYWRkQmFjayhcIltkYXRhLW1lcmdlXVwiKS5hdHRyKFwiZGF0YS1tZXJnZVwiKXx8MSl9LHRoaXMpKSx0aGlzLnJlc2V0KHRoaXMuaXNOdW1lcmljKHRoaXMuc2V0dGluZ3Muc3RhcnRQb3NpdGlvbik/dGhpcy5zZXR0aW5ncy5zdGFydFBvc2l0aW9uOjApLHRoaXMuaW52YWxpZGF0ZShcIml0ZW1zXCIpfSxlLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oYixjKXt2YXIgZT10aGlzLnJlbGF0aXZlKHRoaXMuX2N1cnJlbnQpO2M9Yz09PWQ/dGhpcy5faXRlbXMubGVuZ3RoOnRoaXMubm9ybWFsaXplKGMsITApLGI9YiBpbnN0YW5jZW9mIGpRdWVyeT9iOmEoYiksdGhpcy50cmlnZ2VyKFwiYWRkXCIse2NvbnRlbnQ6Yixwb3NpdGlvbjpjfSksYj10aGlzLnByZXBhcmUoYiksMD09PXRoaXMuX2l0ZW1zLmxlbmd0aHx8Yz09PXRoaXMuX2l0ZW1zLmxlbmd0aD8oMD09PXRoaXMuX2l0ZW1zLmxlbmd0aCYmdGhpcy4kc3RhZ2UuYXBwZW5kKGIpLDAhPT10aGlzLl9pdGVtcy5sZW5ndGgmJnRoaXMuX2l0ZW1zW2MtMV0uYWZ0ZXIoYiksdGhpcy5faXRlbXMucHVzaChiKSx0aGlzLl9tZXJnZXJzLnB1c2goMSpiLmZpbmQoXCJbZGF0YS1tZXJnZV1cIikuYWRkQmFjayhcIltkYXRhLW1lcmdlXVwiKS5hdHRyKFwiZGF0YS1tZXJnZVwiKXx8MSkpOih0aGlzLl9pdGVtc1tjXS5iZWZvcmUoYiksdGhpcy5faXRlbXMuc3BsaWNlKGMsMCxiKSx0aGlzLl9tZXJnZXJzLnNwbGljZShjLDAsMSpiLmZpbmQoXCJbZGF0YS1tZXJnZV1cIikuYWRkQmFjayhcIltkYXRhLW1lcmdlXVwiKS5hdHRyKFwiZGF0YS1tZXJnZVwiKXx8MSkpLHRoaXMuX2l0ZW1zW2VdJiZ0aGlzLnJlc2V0KHRoaXMuX2l0ZW1zW2VdLmluZGV4KCkpLHRoaXMuaW52YWxpZGF0ZShcIml0ZW1zXCIpLHRoaXMudHJpZ2dlcihcImFkZGVkXCIse2NvbnRlbnQ6Yixwb3NpdGlvbjpjfSl9LGUucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbihhKXthPXRoaXMubm9ybWFsaXplKGEsITApLGEhPT1kJiYodGhpcy50cmlnZ2VyKFwicmVtb3ZlXCIse2NvbnRlbnQ6dGhpcy5faXRlbXNbYV0scG9zaXRpb246YX0pLHRoaXMuX2l0ZW1zW2FdLnJlbW92ZSgpLHRoaXMuX2l0ZW1zLnNwbGljZShhLDEpLHRoaXMuX21lcmdlcnMuc3BsaWNlKGEsMSksdGhpcy5pbnZhbGlkYXRlKFwiaXRlbXNcIiksdGhpcy50cmlnZ2VyKFwicmVtb3ZlZFwiLHtjb250ZW50Om51bGwscG9zaXRpb246YX0pKX0sZS5wcm90b3R5cGUucHJlbG9hZEF1dG9XaWR0aEltYWdlcz1mdW5jdGlvbihiKXtiLmVhY2goYS5wcm94eShmdW5jdGlvbihiLGMpe3RoaXMuZW50ZXIoXCJwcmUtbG9hZGluZ1wiKSxjPWEoYyksYShuZXcgSW1hZ2UpLm9uZShcImxvYWRcIixhLnByb3h5KGZ1bmN0aW9uKGEpe2MuYXR0cihcInNyY1wiLGEudGFyZ2V0LnNyYyksYy5jc3MoXCJvcGFjaXR5XCIsMSksdGhpcy5sZWF2ZShcInByZS1sb2FkaW5nXCIpLCF0aGlzLmlzKFwicHJlLWxvYWRpbmdcIikmJiF0aGlzLmlzKFwiaW5pdGlhbGl6aW5nXCIpJiZ0aGlzLnJlZnJlc2goKX0sdGhpcykpLmF0dHIoXCJzcmNcIixjLmF0dHIoXCJzcmNcIil8fGMuYXR0cihcImRhdGEtc3JjXCIpfHxjLmF0dHIoXCJkYXRhLXNyYy1yZXRpbmFcIikpfSx0aGlzKSl9LGUucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLiRlbGVtZW50Lm9mZihcIi5vd2wuY29yZVwiKSx0aGlzLiRzdGFnZS5vZmYoXCIub3dsLmNvcmVcIiksYShjKS5vZmYoXCIub3dsLmNvcmVcIiksdGhpcy5zZXR0aW5ncy5yZXNwb25zaXZlIT09ITEmJihiLmNsZWFyVGltZW91dCh0aGlzLnJlc2l6ZVRpbWVyKSx0aGlzLm9mZihiLFwicmVzaXplXCIsdGhpcy5faGFuZGxlcnMub25UaHJvdHRsZWRSZXNpemUpKTtmb3IodmFyIGQgaW4gdGhpcy5fcGx1Z2lucyl0aGlzLl9wbHVnaW5zW2RdLmRlc3Ryb3koKTt0aGlzLiRzdGFnZS5jaGlsZHJlbihcIi5jbG9uZWRcIikucmVtb3ZlKCksdGhpcy4kc3RhZ2UudW53cmFwKCksdGhpcy4kc3RhZ2UuY2hpbGRyZW4oKS5jb250ZW50cygpLnVud3JhcCgpLHRoaXMuJHN0YWdlLmNoaWxkcmVuKCkudW53cmFwKCksdGhpcy4kc3RhZ2UucmVtb3ZlKCksdGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMucmVmcmVzaENsYXNzKS5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMubG9hZGluZ0NsYXNzKS5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMubG9hZGVkQ2xhc3MpLnJlbW92ZUNsYXNzKHRoaXMub3B0aW9ucy5ydGxDbGFzcykucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmRyYWdDbGFzcykucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmdyYWJDbGFzcykuYXR0cihcImNsYXNzXCIsdGhpcy4kZWxlbWVudC5hdHRyKFwiY2xhc3NcIikucmVwbGFjZShuZXcgUmVnRXhwKHRoaXMub3B0aW9ucy5yZXNwb25zaXZlQ2xhc3MrXCItXFxcXFMrXFxcXHNcIixcImdcIiksXCJcIikpLnJlbW92ZURhdGEoXCJvd2wuY2Fyb3VzZWxcIil9LGUucHJvdG90eXBlLm9wPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLnNldHRpbmdzLnJ0bDtzd2l0Y2goYil7Y2FzZVwiPFwiOnJldHVybiBkP2E+YzpjPmE7Y2FzZVwiPlwiOnJldHVybiBkP2M+YTphPmM7Y2FzZVwiPj1cIjpyZXR1cm4gZD9jPj1hOmE+PWM7Y2FzZVwiPD1cIjpyZXR1cm4gZD9hPj1jOmM+PWF9fSxlLnByb3RvdHlwZS5vbj1mdW5jdGlvbihhLGIsYyxkKXthLmFkZEV2ZW50TGlzdGVuZXI/YS5hZGRFdmVudExpc3RlbmVyKGIsYyxkKTphLmF0dGFjaEV2ZW50JiZhLmF0dGFjaEV2ZW50KFwib25cIitiLGMpfSxlLnByb3RvdHlwZS5vZmY9ZnVuY3Rpb24oYSxiLGMsZCl7YS5yZW1vdmVFdmVudExpc3RlbmVyP2EucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGMsZCk6YS5kZXRhY2hFdmVudCYmYS5kZXRhY2hFdmVudChcIm9uXCIrYixjKX0sZS5wcm90b3R5cGUudHJpZ2dlcj1mdW5jdGlvbihiLGMsZCxmLGcpe3ZhciBoPXtpdGVtOntjb3VudDp0aGlzLl9pdGVtcy5sZW5ndGgsaW5kZXg6dGhpcy5jdXJyZW50KCl9fSxpPWEuY2FtZWxDYXNlKGEuZ3JlcChbXCJvblwiLGIsZF0sZnVuY3Rpb24oYSl7cmV0dXJuIGF9KS5qb2luKFwiLVwiKS50b0xvd2VyQ2FzZSgpKSxqPWEuRXZlbnQoW2IsXCJvd2xcIixkfHxcImNhcm91c2VsXCJdLmpvaW4oXCIuXCIpLnRvTG93ZXJDYXNlKCksYS5leHRlbmQoe3JlbGF0ZWRUYXJnZXQ6dGhpc30saCxjKSk7cmV0dXJuIHRoaXMuX3N1cHJlc3NbYl18fChhLmVhY2godGhpcy5fcGx1Z2lucyxmdW5jdGlvbihhLGIpe2Iub25UcmlnZ2VyJiZiLm9uVHJpZ2dlcihqKX0pLHRoaXMucmVnaXN0ZXIoe3R5cGU6ZS5UeXBlLkV2ZW50LG5hbWU6Yn0pLHRoaXMuJGVsZW1lbnQudHJpZ2dlcihqKSx0aGlzLnNldHRpbmdzJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLnNldHRpbmdzW2ldJiZ0aGlzLnNldHRpbmdzW2ldLmNhbGwodGhpcyxqKSksan0sZS5wcm90b3R5cGUuZW50ZXI9ZnVuY3Rpb24oYil7YS5lYWNoKFtiXS5jb25jYXQodGhpcy5fc3RhdGVzLnRhZ3NbYl18fFtdKSxhLnByb3h5KGZ1bmN0aW9uKGEsYil7dGhpcy5fc3RhdGVzLmN1cnJlbnRbYl09PT1kJiYodGhpcy5fc3RhdGVzLmN1cnJlbnRbYl09MCksdGhpcy5fc3RhdGVzLmN1cnJlbnRbYl0rK30sdGhpcykpfSxlLnByb3RvdHlwZS5sZWF2ZT1mdW5jdGlvbihiKXthLmVhY2goW2JdLmNvbmNhdCh0aGlzLl9zdGF0ZXMudGFnc1tiXXx8W10pLGEucHJveHkoZnVuY3Rpb24oYSxiKXt0aGlzLl9zdGF0ZXMuY3VycmVudFtiXS0tfSx0aGlzKSl9LGUucHJvdG90eXBlLnJlZ2lzdGVyPWZ1bmN0aW9uKGIpe2lmKGIudHlwZT09PWUuVHlwZS5FdmVudCl7aWYoYS5ldmVudC5zcGVjaWFsW2IubmFtZV18fChhLmV2ZW50LnNwZWNpYWxbYi5uYW1lXT17fSksIWEuZXZlbnQuc3BlY2lhbFtiLm5hbWVdLm93bCl7dmFyIGM9YS5ldmVudC5zcGVjaWFsW2IubmFtZV0uX2RlZmF1bHQ7YS5ldmVudC5zcGVjaWFsW2IubmFtZV0uX2RlZmF1bHQ9ZnVuY3Rpb24oYSl7cmV0dXJuIWN8fCFjLmFwcGx5fHxhLm5hbWVzcGFjZSYmLTEhPT1hLm5hbWVzcGFjZS5pbmRleE9mKFwib3dsXCIpP2EubmFtZXNwYWNlJiZhLm5hbWVzcGFjZS5pbmRleE9mKFwib3dsXCIpPi0xOmMuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxhLmV2ZW50LnNwZWNpYWxbYi5uYW1lXS5vd2w9ITB9fWVsc2UgYi50eXBlPT09ZS5UeXBlLlN0YXRlJiYodGhpcy5fc3RhdGVzLnRhZ3NbYi5uYW1lXT90aGlzLl9zdGF0ZXMudGFnc1tiLm5hbWVdPXRoaXMuX3N0YXRlcy50YWdzW2IubmFtZV0uY29uY2F0KGIudGFncyk6dGhpcy5fc3RhdGVzLnRhZ3NbYi5uYW1lXT1iLnRhZ3MsdGhpcy5fc3RhdGVzLnRhZ3NbYi5uYW1lXT1hLmdyZXAodGhpcy5fc3RhdGVzLnRhZ3NbYi5uYW1lXSxhLnByb3h5KGZ1bmN0aW9uKGMsZCl7cmV0dXJuIGEuaW5BcnJheShjLHRoaXMuX3N0YXRlcy50YWdzW2IubmFtZV0pPT09ZH0sdGhpcykpKX0sZS5wcm90b3R5cGUuc3VwcHJlc3M9ZnVuY3Rpb24oYil7YS5lYWNoKGIsYS5wcm94eShmdW5jdGlvbihhLGIpe3RoaXMuX3N1cHJlc3NbYl09ITB9LHRoaXMpKX0sZS5wcm90b3R5cGUucmVsZWFzZT1mdW5jdGlvbihiKXthLmVhY2goYixhLnByb3h5KGZ1bmN0aW9uKGEsYil7ZGVsZXRlIHRoaXMuX3N1cHJlc3NbYl19LHRoaXMpKX0sZS5wcm90b3R5cGUucG9pbnRlcj1mdW5jdGlvbihhKXt2YXIgYz17eDpudWxsLHk6bnVsbH07cmV0dXJuIGE9YS5vcmlnaW5hbEV2ZW50fHxhfHxiLmV2ZW50LGE9YS50b3VjaGVzJiZhLnRvdWNoZXMubGVuZ3RoP2EudG91Y2hlc1swXTphLmNoYW5nZWRUb3VjaGVzJiZhLmNoYW5nZWRUb3VjaGVzLmxlbmd0aD9hLmNoYW5nZWRUb3VjaGVzWzBdOmEsYS5wYWdlWD8oYy54PWEucGFnZVgsYy55PWEucGFnZVkpOihjLng9YS5jbGllbnRYLGMueT1hLmNsaWVudFkpLGN9LGUucHJvdG90eXBlLmlzTnVtZXJpYz1mdW5jdGlvbihhKXtyZXR1cm4haXNOYU4ocGFyc2VGbG9hdChhKSl9LGUucHJvdG90eXBlLmRpZmZlcmVuY2U9ZnVuY3Rpb24oYSxiKXtyZXR1cm57eDphLngtYi54LHk6YS55LWIueX19LGEuZm4ub3dsQ2Fyb3VzZWw9ZnVuY3Rpb24oYil7dmFyIGM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZD1hKHRoaXMpLGY9ZC5kYXRhKFwib3dsLmNhcm91c2VsXCIpO2Z8fChmPW5ldyBlKHRoaXMsXCJvYmplY3RcIj09dHlwZW9mIGImJmIpLGQuZGF0YShcIm93bC5jYXJvdXNlbFwiLGYpLGEuZWFjaChbXCJuZXh0XCIsXCJwcmV2XCIsXCJ0b1wiLFwiZGVzdHJveVwiLFwicmVmcmVzaFwiLFwicmVwbGFjZVwiLFwiYWRkXCIsXCJyZW1vdmVcIl0sZnVuY3Rpb24oYixjKXtmLnJlZ2lzdGVyKHt0eXBlOmUuVHlwZS5FdmVudCxuYW1lOmN9KSxmLiRlbGVtZW50Lm9uKGMrXCIub3dsLmNhcm91c2VsLmNvcmVcIixhLnByb3h5KGZ1bmN0aW9uKGEpe2EubmFtZXNwYWNlJiZhLnJlbGF0ZWRUYXJnZXQhPT10aGlzJiYodGhpcy5zdXBwcmVzcyhbY10pLGZbY10uYXBwbHkodGhpcyxbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSksdGhpcy5yZWxlYXNlKFtjXSkpfSxmKSl9KSksXCJzdHJpbmdcIj09dHlwZW9mIGImJlwiX1wiIT09Yi5jaGFyQXQoMCkmJmZbYl0uYXBwbHkoZixjKX0pfSxhLmZuLm93bENhcm91c2VsLkNvbnN0cnVjdG9yPWV9KHdpbmRvdy5aZXB0b3x8d2luZG93LmpRdWVyeSx3aW5kb3csZG9jdW1lbnQpLGZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWZ1bmN0aW9uKGIpe3RoaXMuX2NvcmU9Yix0aGlzLl9pbnRlcnZhbD1udWxsLHRoaXMuX3Zpc2libGU9bnVsbCx0aGlzLl9oYW5kbGVycz17XCJpbml0aWFsaXplZC5vd2wuY2Fyb3VzZWxcIjphLnByb3h5KGZ1bmN0aW9uKGEpe2EubmFtZXNwYWNlJiZ0aGlzLl9jb3JlLnNldHRpbmdzLmF1dG9SZWZyZXNoJiZ0aGlzLndhdGNoKCl9LHRoaXMpfSx0aGlzLl9jb3JlLm9wdGlvbnM9YS5leHRlbmQoe30sZS5EZWZhdWx0cyx0aGlzLl9jb3JlLm9wdGlvbnMpLHRoaXMuX2NvcmUuJGVsZW1lbnQub24odGhpcy5faGFuZGxlcnMpfTtlLkRlZmF1bHRzPXthdXRvUmVmcmVzaDohMCxhdXRvUmVmcmVzaEludGVydmFsOjUwMH0sZS5wcm90b3R5cGUud2F0Y2g9ZnVuY3Rpb24oKXt0aGlzLl9pbnRlcnZhbHx8KHRoaXMuX3Zpc2libGU9dGhpcy5fY29yZS4kZWxlbWVudC5pcyhcIjp2aXNpYmxlXCIpLHRoaXMuX2ludGVydmFsPWIuc2V0SW50ZXJ2YWwoYS5wcm94eSh0aGlzLnJlZnJlc2gsdGhpcyksdGhpcy5fY29yZS5zZXR0aW5ncy5hdXRvUmVmcmVzaEludGVydmFsKSl9LGUucHJvdG90eXBlLnJlZnJlc2g9ZnVuY3Rpb24oKXt0aGlzLl9jb3JlLiRlbGVtZW50LmlzKFwiOnZpc2libGVcIikhPT10aGlzLl92aXNpYmxlJiYodGhpcy5fdmlzaWJsZT0hdGhpcy5fdmlzaWJsZSx0aGlzLl9jb3JlLiRlbGVtZW50LnRvZ2dsZUNsYXNzKFwib3dsLWhpZGRlblwiLCF0aGlzLl92aXNpYmxlKSx0aGlzLl92aXNpYmxlJiZ0aGlzLl9jb3JlLmludmFsaWRhdGUoXCJ3aWR0aFwiKSYmdGhpcy5fY29yZS5yZWZyZXNoKCkpfSxlLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dmFyIGEsYztiLmNsZWFySW50ZXJ2YWwodGhpcy5faW50ZXJ2YWwpO2ZvcihhIGluIHRoaXMuX2hhbmRsZXJzKXRoaXMuX2NvcmUuJGVsZW1lbnQub2ZmKGEsdGhpcy5faGFuZGxlcnNbYV0pO2ZvcihjIGluIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMpKVwiZnVuY3Rpb25cIiE9dHlwZW9mIHRoaXNbY10mJih0aGlzW2NdPW51bGwpfSxhLmZuLm93bENhcm91c2VsLkNvbnN0cnVjdG9yLlBsdWdpbnMuQXV0b1JlZnJlc2g9ZX0od2luZG93LlplcHRvfHx3aW5kb3cualF1ZXJ5LHdpbmRvdyxkb2N1bWVudCksZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9ZnVuY3Rpb24oYil7dGhpcy5fY29yZT1iLHRoaXMuX2xvYWRlZD1bXSx0aGlzLl9oYW5kbGVycz17XCJpbml0aWFsaXplZC5vd2wuY2Fyb3VzZWwgY2hhbmdlLm93bC5jYXJvdXNlbCByZXNpemVkLm93bC5jYXJvdXNlbFwiOmEucHJveHkoZnVuY3Rpb24oYil7aWYoYi5uYW1lc3BhY2UmJnRoaXMuX2NvcmUuc2V0dGluZ3MmJnRoaXMuX2NvcmUuc2V0dGluZ3MubGF6eUxvYWQmJihiLnByb3BlcnR5JiZcInBvc2l0aW9uXCI9PWIucHJvcGVydHkubmFtZXx8XCJpbml0aWFsaXplZFwiPT1iLnR5cGUpKWZvcih2YXIgYz10aGlzLl9jb3JlLnNldHRpbmdzLGU9Yy5jZW50ZXImJk1hdGguY2VpbChjLml0ZW1zLzIpfHxjLml0ZW1zLGY9Yy5jZW50ZXImJi0xKmV8fDAsZz0oYi5wcm9wZXJ0eSYmYi5wcm9wZXJ0eS52YWx1ZSE9PWQ/Yi5wcm9wZXJ0eS52YWx1ZTp0aGlzLl9jb3JlLmN1cnJlbnQoKSkrZixoPXRoaXMuX2NvcmUuY2xvbmVzKCkubGVuZ3RoLGk9YS5wcm94eShmdW5jdGlvbihhLGIpe3RoaXMubG9hZChiKX0sdGhpcyk7ZisrPGU7KXRoaXMubG9hZChoLzIrdGhpcy5fY29yZS5yZWxhdGl2ZShnKSksaCYmYS5lYWNoKHRoaXMuX2NvcmUuY2xvbmVzKHRoaXMuX2NvcmUucmVsYXRpdmUoZykpLGkpLGcrK30sdGhpcyl9LHRoaXMuX2NvcmUub3B0aW9ucz1hLmV4dGVuZCh7fSxlLkRlZmF1bHRzLHRoaXMuX2NvcmUub3B0aW9ucyksdGhpcy5fY29yZS4kZWxlbWVudC5vbih0aGlzLl9oYW5kbGVycyl9O2UuRGVmYXVsdHM9e2xhenlMb2FkOiExfSxlLnByb3RvdHlwZS5sb2FkPWZ1bmN0aW9uKGMpe3ZhciBkPXRoaXMuX2NvcmUuJHN0YWdlLmNoaWxkcmVuKCkuZXEoYyksZT1kJiZkLmZpbmQoXCIub3dsLWxhenlcIik7IWV8fGEuaW5BcnJheShkLmdldCgwKSx0aGlzLl9sb2FkZWQpPi0xfHwoZS5lYWNoKGEucHJveHkoZnVuY3Rpb24oYyxkKXt2YXIgZSxmPWEoZCksZz1iLmRldmljZVBpeGVsUmF0aW8+MSYmZi5hdHRyKFwiZGF0YS1zcmMtcmV0aW5hXCIpfHxmLmF0dHIoXCJkYXRhLXNyY1wiKTt0aGlzLl9jb3JlLnRyaWdnZXIoXCJsb2FkXCIse2VsZW1lbnQ6Zix1cmw6Z30sXCJsYXp5XCIpLGYuaXMoXCJpbWdcIik/Zi5vbmUoXCJsb2FkLm93bC5sYXp5XCIsYS5wcm94eShmdW5jdGlvbigpe2YuY3NzKFwib3BhY2l0eVwiLDEpLHRoaXMuX2NvcmUudHJpZ2dlcihcImxvYWRlZFwiLHtlbGVtZW50OmYsdXJsOmd9LFwibGF6eVwiKX0sdGhpcykpLmF0dHIoXCJzcmNcIixnKTooZT1uZXcgSW1hZ2UsZS5vbmxvYWQ9YS5wcm94eShmdW5jdGlvbigpe2YuY3NzKHtcImJhY2tncm91bmQtaW1hZ2VcIjondXJsKFwiJytnKydcIiknLG9wYWNpdHk6XCIxXCJ9KSx0aGlzLl9jb3JlLnRyaWdnZXIoXCJsb2FkZWRcIix7ZWxlbWVudDpmLHVybDpnfSxcImxhenlcIil9LHRoaXMpLGUuc3JjPWcpfSx0aGlzKSksdGhpcy5fbG9hZGVkLnB1c2goZC5nZXQoMCkpKX0sZS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3ZhciBhLGI7Zm9yKGEgaW4gdGhpcy5oYW5kbGVycyl0aGlzLl9jb3JlLiRlbGVtZW50Lm9mZihhLHRoaXMuaGFuZGxlcnNbYV0pO2ZvcihiIGluIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMpKVwiZnVuY3Rpb25cIiE9dHlwZW9mIHRoaXNbYl0mJih0aGlzW2JdPW51bGwpfSxhLmZuLm93bENhcm91c2VsLkNvbnN0cnVjdG9yLlBsdWdpbnMuTGF6eT1lfSh3aW5kb3cuWmVwdG98fHdpbmRvdy5qUXVlcnksd2luZG93LGRvY3VtZW50KSxmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1mdW5jdGlvbihiKXt0aGlzLl9jb3JlPWIsdGhpcy5faGFuZGxlcnM9e1wiaW5pdGlhbGl6ZWQub3dsLmNhcm91c2VsIHJlZnJlc2hlZC5vd2wuY2Fyb3VzZWxcIjphLnByb3h5KGZ1bmN0aW9uKGEpe2EubmFtZXNwYWNlJiZ0aGlzLl9jb3JlLnNldHRpbmdzLmF1dG9IZWlnaHQmJnRoaXMudXBkYXRlKCl9LHRoaXMpLFwiY2hhbmdlZC5vd2wuY2Fyb3VzZWxcIjphLnByb3h5KGZ1bmN0aW9uKGEpe2EubmFtZXNwYWNlJiZ0aGlzLl9jb3JlLnNldHRpbmdzLmF1dG9IZWlnaHQmJlwicG9zaXRpb25cIj09YS5wcm9wZXJ0eS5uYW1lJiZ0aGlzLnVwZGF0ZSgpfSx0aGlzKSxcImxvYWRlZC5vd2wubGF6eVwiOmEucHJveHkoZnVuY3Rpb24oYSl7YS5uYW1lc3BhY2UmJnRoaXMuX2NvcmUuc2V0dGluZ3MuYXV0b0hlaWdodCYmYS5lbGVtZW50LmNsb3Nlc3QoXCIuXCIrdGhpcy5fY29yZS5zZXR0aW5ncy5pdGVtQ2xhc3MpLmluZGV4KCk9PT10aGlzLl9jb3JlLmN1cnJlbnQoKSYmdGhpcy51cGRhdGUoKX0sdGhpcyl9LHRoaXMuX2NvcmUub3B0aW9ucz1hLmV4dGVuZCh7fSxlLkRlZmF1bHRzLHRoaXMuX2NvcmUub3B0aW9ucyksdGhpcy5fY29yZS4kZWxlbWVudC5vbih0aGlzLl9oYW5kbGVycyl9O2UuRGVmYXVsdHM9e2F1dG9IZWlnaHQ6ITEsYXV0b0hlaWdodENsYXNzOlwib3dsLWhlaWdodFwifSxlLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt2YXIgYj10aGlzLl9jb3JlLl9jdXJyZW50LGM9Yit0aGlzLl9jb3JlLnNldHRpbmdzLml0ZW1zLGQ9dGhpcy5fY29yZS4kc3RhZ2UuY2hpbGRyZW4oKS50b0FycmF5KCkuc2xpY2UoYixjKSxlPVtdLGY9MDthLmVhY2goZCxmdW5jdGlvbihiLGMpe2UucHVzaChhKGMpLmhlaWdodCgpKX0pLGY9TWF0aC5tYXguYXBwbHkobnVsbCxlKSx0aGlzLl9jb3JlLiRzdGFnZS5wYXJlbnQoKS5oZWlnaHQoZikuYWRkQ2xhc3ModGhpcy5fY29yZS5zZXR0aW5ncy5hdXRvSGVpZ2h0Q2xhc3MpfSxlLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dmFyIGEsYjtmb3IoYSBpbiB0aGlzLl9oYW5kbGVycyl0aGlzLl9jb3JlLiRlbGVtZW50Lm9mZihhLHRoaXMuX2hhbmRsZXJzW2FdKTtmb3IoYiBpbiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0aGlzKSlcImZ1bmN0aW9uXCIhPXR5cGVvZiB0aGlzW2JdJiYodGhpc1tiXT1udWxsKX0sYS5mbi5vd2xDYXJvdXNlbC5Db25zdHJ1Y3Rvci5QbHVnaW5zLkF1dG9IZWlnaHQ9ZX0od2luZG93LlplcHRvfHx3aW5kb3cualF1ZXJ5LHdpbmRvdyxkb2N1bWVudCksZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9ZnVuY3Rpb24oYil7dGhpcy5fY29yZT1iLHRoaXMuX3ZpZGVvcz17fSx0aGlzLl9wbGF5aW5nPW51bGwsdGhpcy5faGFuZGxlcnM9e1wiaW5pdGlhbGl6ZWQub3dsLmNhcm91c2VsXCI6YS5wcm94eShmdW5jdGlvbihhKXthLm5hbWVzcGFjZSYmdGhpcy5fY29yZS5yZWdpc3Rlcih7dHlwZTpcInN0YXRlXCIsbmFtZTpcInBsYXlpbmdcIix0YWdzOltcImludGVyYWN0aW5nXCJdfSl9LHRoaXMpLFwicmVzaXplLm93bC5jYXJvdXNlbFwiOmEucHJveHkoZnVuY3Rpb24oYSl7YS5uYW1lc3BhY2UmJnRoaXMuX2NvcmUuc2V0dGluZ3MudmlkZW8mJnRoaXMuaXNJbkZ1bGxTY3JlZW4oKSYmYS5wcmV2ZW50RGVmYXVsdCgpfSx0aGlzKSxcInJlZnJlc2hlZC5vd2wuY2Fyb3VzZWxcIjphLnByb3h5KGZ1bmN0aW9uKGEpe2EubmFtZXNwYWNlJiZ0aGlzLl9jb3JlLmlzKFwicmVzaXppbmdcIikmJnRoaXMuX2NvcmUuJHN0YWdlLmZpbmQoXCIuY2xvbmVkIC5vd2wtdmlkZW8tZnJhbWVcIikucmVtb3ZlKCl9LHRoaXMpLFwiY2hhbmdlZC5vd2wuY2Fyb3VzZWxcIjphLnByb3h5KGZ1bmN0aW9uKGEpe2EubmFtZXNwYWNlJiZcInBvc2l0aW9uXCI9PT1hLnByb3BlcnR5Lm5hbWUmJnRoaXMuX3BsYXlpbmcmJnRoaXMuc3RvcCgpfSx0aGlzKSxcInByZXBhcmVkLm93bC5jYXJvdXNlbFwiOmEucHJveHkoZnVuY3Rpb24oYil7aWYoYi5uYW1lc3BhY2Upe3ZhciBjPWEoYi5jb250ZW50KS5maW5kKFwiLm93bC12aWRlb1wiKTtjLmxlbmd0aCYmKGMuY3NzKFwiZGlzcGxheVwiLFwibm9uZVwiKSx0aGlzLmZldGNoKGMsYShiLmNvbnRlbnQpKSl9fSx0aGlzKX0sdGhpcy5fY29yZS5vcHRpb25zPWEuZXh0ZW5kKHt9LGUuRGVmYXVsdHMsdGhpcy5fY29yZS5vcHRpb25zKSx0aGlzLl9jb3JlLiRlbGVtZW50Lm9uKHRoaXMuX2hhbmRsZXJzKSx0aGlzLl9jb3JlLiRlbGVtZW50Lm9uKFwiY2xpY2sub3dsLnZpZGVvXCIsXCIub3dsLXZpZGVvLXBsYXktaWNvblwiLGEucHJveHkoZnVuY3Rpb24oYSl7dGhpcy5wbGF5KGEpfSx0aGlzKSl9O2UuRGVmYXVsdHM9e3ZpZGVvOiExLHZpZGVvSGVpZ2h0OiExLHZpZGVvV2lkdGg6ITF9LGUucHJvdG90eXBlLmZldGNoPWZ1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oKXtyZXR1cm4gYS5hdHRyKFwiZGF0YS12aW1lby1pZFwiKT9cInZpbWVvXCI6YS5hdHRyKFwiZGF0YS12emFhci1pZFwiKT9cInZ6YWFyXCI6XCJ5b3V0dWJlXCJ9KCksZD1hLmF0dHIoXCJkYXRhLXZpbWVvLWlkXCIpfHxhLmF0dHIoXCJkYXRhLXlvdXR1YmUtaWRcIil8fGEuYXR0cihcImRhdGEtdnphYXItaWRcIiksZT1hLmF0dHIoXCJkYXRhLXdpZHRoXCIpfHx0aGlzLl9jb3JlLnNldHRpbmdzLnZpZGVvV2lkdGgsZj1hLmF0dHIoXCJkYXRhLWhlaWdodFwiKXx8dGhpcy5fY29yZS5zZXR0aW5ncy52aWRlb0hlaWdodCxnPWEuYXR0cihcImhyZWZcIik7aWYoIWcpdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyB2aWRlbyBVUkwuXCIpO2lmKGQ9Zy5tYXRjaCgvKGh0dHA6fGh0dHBzOnwpXFwvXFwvKHBsYXllci58d3d3LnxhcHAuKT8odmltZW9cXC5jb218eW91dHUoYmVcXC5jb218XFwuYmV8YmVcXC5nb29nbGVhcGlzXFwuY29tKXx2emFhclxcLmNvbSlcXC8odmlkZW9cXC98dmlkZW9zXFwvfGVtYmVkXFwvfGNoYW5uZWxzXFwvLitcXC98Z3JvdXBzXFwvLitcXC98d2F0Y2hcXD92PXx2XFwvKT8oW0EtWmEtejAtOS5fJS1dKikoXFwmXFxTKyk/LyksZFszXS5pbmRleE9mKFwieW91dHVcIik+LTEpYz1cInlvdXR1YmVcIjtlbHNlIGlmKGRbM10uaW5kZXhPZihcInZpbWVvXCIpPi0xKWM9XCJ2aW1lb1wiO2Vsc2V7aWYoIShkWzNdLmluZGV4T2YoXCJ2emFhclwiKT4tMSkpdGhyb3cgbmV3IEVycm9yKFwiVmlkZW8gVVJMIG5vdCBzdXBwb3J0ZWQuXCIpO2M9XCJ2emFhclwifWQ9ZFs2XSx0aGlzLl92aWRlb3NbZ109e3R5cGU6YyxpZDpkLHdpZHRoOmUsaGVpZ2h0OmZ9LGIuYXR0cihcImRhdGEtdmlkZW9cIixnKSx0aGlzLnRodW1ibmFpbChhLHRoaXMuX3ZpZGVvc1tnXSl9LGUucHJvdG90eXBlLnRodW1ibmFpbD1mdW5jdGlvbihiLGMpe3ZhciBkLGUsZixnPWMud2lkdGgmJmMuaGVpZ2h0PydzdHlsZT1cIndpZHRoOicrYy53aWR0aCtcInB4O2hlaWdodDpcIitjLmhlaWdodCsncHg7XCInOlwiXCIsaD1iLmZpbmQoXCJpbWdcIiksaT1cInNyY1wiLGo9XCJcIixrPXRoaXMuX2NvcmUuc2V0dGluZ3MsbD1mdW5jdGlvbihhKXtlPSc8ZGl2IGNsYXNzPVwib3dsLXZpZGVvLXBsYXktaWNvblwiPjwvZGl2PicsZD1rLmxhenlMb2FkPyc8ZGl2IGNsYXNzPVwib3dsLXZpZGVvLXRuICcraisnXCIgJytpKyc9XCInK2ErJ1wiPjwvZGl2Pic6JzxkaXYgY2xhc3M9XCJvd2wtdmlkZW8tdG5cIiBzdHlsZT1cIm9wYWNpdHk6MTtiYWNrZ3JvdW5kLWltYWdlOnVybCgnK2ErJylcIj48L2Rpdj4nLGIuYWZ0ZXIoZCksYi5hZnRlcihlKX07cmV0dXJuIGIud3JhcCgnPGRpdiBjbGFzcz1cIm93bC12aWRlby13cmFwcGVyXCInK2crXCI+PC9kaXY+XCIpLHRoaXMuX2NvcmUuc2V0dGluZ3MubGF6eUxvYWQmJihpPVwiZGF0YS1zcmNcIixqPVwib3dsLWxhenlcIiksaC5sZW5ndGg/KGwoaC5hdHRyKGkpKSxoLnJlbW92ZSgpLCExKTp2b2lkKFwieW91dHViZVwiPT09Yy50eXBlPyhmPVwiLy9pbWcueW91dHViZS5jb20vdmkvXCIrYy5pZCtcIi9ocWRlZmF1bHQuanBnXCIsbChmKSk6XCJ2aW1lb1wiPT09Yy50eXBlP2EuYWpheCh7dHlwZTpcIkdFVFwiLHVybDpcIi8vdmltZW8uY29tL2FwaS92Mi92aWRlby9cIitjLmlkK1wiLmpzb25cIixqc29ucDpcImNhbGxiYWNrXCIsZGF0YVR5cGU6XCJqc29ucFwiLHN1Y2Nlc3M6ZnVuY3Rpb24oYSl7Zj1hWzBdLnRodW1ibmFpbF9sYXJnZSxsKGYpfX0pOlwidnphYXJcIj09PWMudHlwZSYmYS5hamF4KHt0eXBlOlwiR0VUXCIsdXJsOlwiLy92emFhci5jb20vYXBpL3ZpZGVvcy9cIitjLmlkK1wiLmpzb25cIixqc29ucDpcImNhbGxiYWNrXCIsZGF0YVR5cGU6XCJqc29ucFwiLHN1Y2Nlc3M6ZnVuY3Rpb24oYSl7Zj1hLmZyYW1lZ3JhYl91cmwsbChmKX19KSl9LGUucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXt0aGlzLl9jb3JlLnRyaWdnZXIoXCJzdG9wXCIsbnVsbCxcInZpZGVvXCIpLHRoaXMuX3BsYXlpbmcuZmluZChcIi5vd2wtdmlkZW8tZnJhbWVcIikucmVtb3ZlKCksdGhpcy5fcGxheWluZy5yZW1vdmVDbGFzcyhcIm93bC12aWRlby1wbGF5aW5nXCIpLHRoaXMuX3BsYXlpbmc9bnVsbCx0aGlzLl9jb3JlLmxlYXZlKFwicGxheWluZ1wiKSx0aGlzLl9jb3JlLnRyaWdnZXIoXCJzdG9wcGVkXCIsbnVsbCxcInZpZGVvXCIpfSxlLnByb3RvdHlwZS5wbGF5PWZ1bmN0aW9uKGIpe3ZhciBjLGQ9YShiLnRhcmdldCksZT1kLmNsb3Nlc3QoXCIuXCIrdGhpcy5fY29yZS5zZXR0aW5ncy5pdGVtQ2xhc3MpLGY9dGhpcy5fdmlkZW9zW2UuYXR0cihcImRhdGEtdmlkZW9cIildLGc9Zi53aWR0aHx8XCIxMDAlXCIsaD1mLmhlaWdodHx8dGhpcy5fY29yZS4kc3RhZ2UuaGVpZ2h0KCk7dGhpcy5fcGxheWluZ3x8KHRoaXMuX2NvcmUuZW50ZXIoXCJwbGF5aW5nXCIpLHRoaXMuX2NvcmUudHJpZ2dlcihcInBsYXlcIixudWxsLFwidmlkZW9cIiksZT10aGlzLl9jb3JlLml0ZW1zKHRoaXMuX2NvcmUucmVsYXRpdmUoZS5pbmRleCgpKSksdGhpcy5fY29yZS5yZXNldChlLmluZGV4KCkpLFwieW91dHViZVwiPT09Zi50eXBlP2M9JzxpZnJhbWUgd2lkdGg9XCInK2crJ1wiIGhlaWdodD1cIicraCsnXCIgc3JjPVwiLy93d3cueW91dHViZS5jb20vZW1iZWQvJytmLmlkK1wiP2F1dG9wbGF5PTEmcmVsPTAmdj1cIitmLmlkKydcIiBmcmFtZWJvcmRlcj1cIjBcIiBhbGxvd2Z1bGxzY3JlZW4+PC9pZnJhbWU+JzpcInZpbWVvXCI9PT1mLnR5cGU/Yz0nPGlmcmFtZSBzcmM9XCIvL3BsYXllci52aW1lby5jb20vdmlkZW8vJytmLmlkKyc/YXV0b3BsYXk9MVwiIHdpZHRoPVwiJytnKydcIiBoZWlnaHQ9XCInK2grJ1wiIGZyYW1lYm9yZGVyPVwiMFwiIHdlYmtpdGFsbG93ZnVsbHNjcmVlbiBtb3phbGxvd2Z1bGxzY3JlZW4gYWxsb3dmdWxsc2NyZWVuPjwvaWZyYW1lPic6XCJ2emFhclwiPT09Zi50eXBlJiYoYz0nPGlmcmFtZSBmcmFtZWJvcmRlcj1cIjBcImhlaWdodD1cIicraCsnXCJ3aWR0aD1cIicrZysnXCIgYWxsb3dmdWxsc2NyZWVuIG1vemFsbG93ZnVsbHNjcmVlbiB3ZWJraXRBbGxvd0Z1bGxTY3JlZW4gc3JjPVwiLy92aWV3LnZ6YWFyLmNvbS8nK2YuaWQrJy9wbGF5ZXI/YXV0b3BsYXk9dHJ1ZVwiPjwvaWZyYW1lPicpLGEoJzxkaXYgY2xhc3M9XCJvd2wtdmlkZW8tZnJhbWVcIj4nK2MrXCI8L2Rpdj5cIikuaW5zZXJ0QWZ0ZXIoZS5maW5kKFwiLm93bC12aWRlb1wiKSksdGhpcy5fcGxheWluZz1lLmFkZENsYXNzKFwib3dsLXZpZGVvLXBsYXlpbmdcIikpfSxlLnByb3RvdHlwZS5pc0luRnVsbFNjcmVlbj1mdW5jdGlvbigpe3ZhciBiPWMuZnVsbHNjcmVlbkVsZW1lbnR8fGMubW96RnVsbFNjcmVlbkVsZW1lbnR8fGMud2Via2l0RnVsbHNjcmVlbkVsZW1lbnQ7cmV0dXJuIGImJmEoYikucGFyZW50KCkuaGFzQ2xhc3MoXCJvd2wtdmlkZW8tZnJhbWVcIil9LGUucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt2YXIgYSxiO3RoaXMuX2NvcmUuJGVsZW1lbnQub2ZmKFwiY2xpY2sub3dsLnZpZGVvXCIpO2ZvcihhIGluIHRoaXMuX2hhbmRsZXJzKXRoaXMuX2NvcmUuJGVsZW1lbnQub2ZmKGEsdGhpcy5faGFuZGxlcnNbYV0pO2ZvcihiIGluIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMpKVwiZnVuY3Rpb25cIiE9dHlwZW9mIHRoaXNbYl0mJih0aGlzW2JdPW51bGwpfSxhLmZuLm93bENhcm91c2VsLkNvbnN0cnVjdG9yLlBsdWdpbnMuVmlkZW89ZX0od2luZG93LlplcHRvfHx3aW5kb3cualF1ZXJ5LHdpbmRvdyxkb2N1bWVudCksZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9ZnVuY3Rpb24oYil7dGhpcy5jb3JlPWIsdGhpcy5jb3JlLm9wdGlvbnM9YS5leHRlbmQoe30sZS5EZWZhdWx0cyx0aGlzLmNvcmUub3B0aW9ucyksdGhpcy5zd2FwcGluZz0hMCx0aGlzLnByZXZpb3VzPWQsdGhpcy5uZXh0PWQsdGhpcy5oYW5kbGVycz17XCJjaGFuZ2Uub3dsLmNhcm91c2VsXCI6YS5wcm94eShmdW5jdGlvbihhKXthLm5hbWVzcGFjZSYmXCJwb3NpdGlvblwiPT1hLnByb3BlcnR5Lm5hbWUmJih0aGlzLnByZXZpb3VzPXRoaXMuY29yZS5jdXJyZW50KCksdGhpcy5uZXh0PWEucHJvcGVydHkudmFsdWUpfSx0aGlzKSxcImRyYWcub3dsLmNhcm91c2VsIGRyYWdnZWQub3dsLmNhcm91c2VsIHRyYW5zbGF0ZWQub3dsLmNhcm91c2VsXCI6YS5wcm94eShmdW5jdGlvbihhKXthLm5hbWVzcGFjZSYmKHRoaXMuc3dhcHBpbmc9XCJ0cmFuc2xhdGVkXCI9PWEudHlwZSl9LHRoaXMpLFwidHJhbnNsYXRlLm93bC5jYXJvdXNlbFwiOmEucHJveHkoZnVuY3Rpb24oYSl7YS5uYW1lc3BhY2UmJnRoaXMuc3dhcHBpbmcmJih0aGlzLmNvcmUub3B0aW9ucy5hbmltYXRlT3V0fHx0aGlzLmNvcmUub3B0aW9ucy5hbmltYXRlSW4pJiZ0aGlzLnN3YXAoKX0sdGhpcyl9LHRoaXMuY29yZS4kZWxlbWVudC5vbih0aGlzLmhhbmRsZXJzKX07ZS5EZWZhdWx0cz17YW5pbWF0ZU91dDohMSxhbmltYXRlSW46ITF9LGUucHJvdG90eXBlLnN3YXA9ZnVuY3Rpb24oKXtpZigxPT09dGhpcy5jb3JlLnNldHRpbmdzLml0ZW1zJiZhLnN1cHBvcnQuYW5pbWF0aW9uJiZhLnN1cHBvcnQudHJhbnNpdGlvbil7dGhpcy5jb3JlLnNwZWVkKDApO3ZhciBiLGM9YS5wcm94eSh0aGlzLmNsZWFyLHRoaXMpLGQ9dGhpcy5jb3JlLiRzdGFnZS5jaGlsZHJlbigpLmVxKHRoaXMucHJldmlvdXMpLGU9dGhpcy5jb3JlLiRzdGFnZS5jaGlsZHJlbigpLmVxKHRoaXMubmV4dCksZj10aGlzLmNvcmUuc2V0dGluZ3MuYW5pbWF0ZUluLGc9dGhpcy5jb3JlLnNldHRpbmdzLmFuaW1hdGVPdXQ7dGhpcy5jb3JlLmN1cnJlbnQoKSE9PXRoaXMucHJldmlvdXMmJihnJiYoYj10aGlzLmNvcmUuY29vcmRpbmF0ZXModGhpcy5wcmV2aW91cyktdGhpcy5jb3JlLmNvb3JkaW5hdGVzKHRoaXMubmV4dCksZC5vbmUoYS5zdXBwb3J0LmFuaW1hdGlvbi5lbmQsYykuY3NzKHtsZWZ0OmIrXCJweFwifSkuYWRkQ2xhc3MoXCJhbmltYXRlZCBvd2wtYW5pbWF0ZWQtb3V0XCIpLmFkZENsYXNzKGcpKSxmJiZlLm9uZShhLnN1cHBvcnQuYW5pbWF0aW9uLmVuZCxjKS5hZGRDbGFzcyhcImFuaW1hdGVkIG93bC1hbmltYXRlZC1pblwiKS5hZGRDbGFzcyhmKSl9fSxlLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbihiKXthKGIudGFyZ2V0KS5jc3Moe2xlZnQ6XCJcIn0pLnJlbW92ZUNsYXNzKFwiYW5pbWF0ZWQgb3dsLWFuaW1hdGVkLW91dCBvd2wtYW5pbWF0ZWQtaW5cIikucmVtb3ZlQ2xhc3ModGhpcy5jb3JlLnNldHRpbmdzLmFuaW1hdGVJbikucmVtb3ZlQ2xhc3ModGhpcy5jb3JlLnNldHRpbmdzLmFuaW1hdGVPdXQpLHRoaXMuY29yZS5vblRyYW5zaXRpb25FbmQoKX0sZS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3ZhciBhLGI7Zm9yKGEgaW4gdGhpcy5oYW5kbGVycyl0aGlzLmNvcmUuJGVsZW1lbnQub2ZmKGEsdGhpcy5oYW5kbGVyc1thXSk7Zm9yKGIgaW4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGhpcykpXCJmdW5jdGlvblwiIT10eXBlb2YgdGhpc1tiXSYmKHRoaXNbYl09bnVsbCk7XHJcbn0sYS5mbi5vd2xDYXJvdXNlbC5Db25zdHJ1Y3Rvci5QbHVnaW5zLkFuaW1hdGU9ZX0od2luZG93LlplcHRvfHx3aW5kb3cualF1ZXJ5LHdpbmRvdyxkb2N1bWVudCksZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9ZnVuY3Rpb24oYil7dGhpcy5fY29yZT1iLHRoaXMuX2NhbGw9bnVsbCx0aGlzLl90aW1lPTAsdGhpcy5fdGltZW91dD0wLHRoaXMuX3BhdXNlZD0hMCx0aGlzLl9oYW5kbGVycz17XCJjaGFuZ2VkLm93bC5jYXJvdXNlbFwiOmEucHJveHkoZnVuY3Rpb24oYSl7YS5uYW1lc3BhY2UmJlwic2V0dGluZ3NcIj09PWEucHJvcGVydHkubmFtZT90aGlzLl9jb3JlLnNldHRpbmdzLmF1dG9wbGF5P3RoaXMucGxheSgpOnRoaXMuc3RvcCgpOmEubmFtZXNwYWNlJiZcInBvc2l0aW9uXCI9PT1hLnByb3BlcnR5Lm5hbWUmJnRoaXMuX3BhdXNlZCYmKHRoaXMuX3RpbWU9MCl9LHRoaXMpLFwiaW5pdGlhbGl6ZWQub3dsLmNhcm91c2VsXCI6YS5wcm94eShmdW5jdGlvbihhKXthLm5hbWVzcGFjZSYmdGhpcy5fY29yZS5zZXR0aW5ncy5hdXRvcGxheSYmdGhpcy5wbGF5KCl9LHRoaXMpLFwicGxheS5vd2wuYXV0b3BsYXlcIjphLnByb3h5KGZ1bmN0aW9uKGEsYixjKXthLm5hbWVzcGFjZSYmdGhpcy5wbGF5KGIsYyl9LHRoaXMpLFwic3RvcC5vd2wuYXV0b3BsYXlcIjphLnByb3h5KGZ1bmN0aW9uKGEpe2EubmFtZXNwYWNlJiZ0aGlzLnN0b3AoKX0sdGhpcyksXCJtb3VzZW92ZXIub3dsLmF1dG9wbGF5XCI6YS5wcm94eShmdW5jdGlvbigpe3RoaXMuX2NvcmUuc2V0dGluZ3MuYXV0b3BsYXlIb3ZlclBhdXNlJiZ0aGlzLl9jb3JlLmlzKFwicm90YXRpbmdcIikmJnRoaXMucGF1c2UoKX0sdGhpcyksXCJtb3VzZWxlYXZlLm93bC5hdXRvcGxheVwiOmEucHJveHkoZnVuY3Rpb24oKXt0aGlzLl9jb3JlLnNldHRpbmdzLmF1dG9wbGF5SG92ZXJQYXVzZSYmdGhpcy5fY29yZS5pcyhcInJvdGF0aW5nXCIpJiZ0aGlzLnBsYXkoKX0sdGhpcyksXCJ0b3VjaHN0YXJ0Lm93bC5jb3JlXCI6YS5wcm94eShmdW5jdGlvbigpe3RoaXMuX2NvcmUuc2V0dGluZ3MuYXV0b3BsYXlIb3ZlclBhdXNlJiZ0aGlzLl9jb3JlLmlzKFwicm90YXRpbmdcIikmJnRoaXMucGF1c2UoKX0sdGhpcyksXCJ0b3VjaGVuZC5vd2wuY29yZVwiOmEucHJveHkoZnVuY3Rpb24oKXt0aGlzLl9jb3JlLnNldHRpbmdzLmF1dG9wbGF5SG92ZXJQYXVzZSYmdGhpcy5wbGF5KCl9LHRoaXMpfSx0aGlzLl9jb3JlLiRlbGVtZW50Lm9uKHRoaXMuX2hhbmRsZXJzKSx0aGlzLl9jb3JlLm9wdGlvbnM9YS5leHRlbmQoe30sZS5EZWZhdWx0cyx0aGlzLl9jb3JlLm9wdGlvbnMpfTtlLkRlZmF1bHRzPXthdXRvcGxheTohMSxhdXRvcGxheVRpbWVvdXQ6NWUzLGF1dG9wbGF5SG92ZXJQYXVzZTohMSxhdXRvcGxheVNwZWVkOiExfSxlLnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihkKXt0aGlzLl9jYWxsPWIuc2V0VGltZW91dChhLnByb3h5KHRoaXMuX25leHQsdGhpcyxkKSx0aGlzLl90aW1lb3V0KihNYXRoLnJvdW5kKHRoaXMucmVhZCgpL3RoaXMuX3RpbWVvdXQpKzEpLXRoaXMucmVhZCgpKSx0aGlzLl9jb3JlLmlzKFwiYnVzeVwiKXx8dGhpcy5fY29yZS5pcyhcImludGVyYWN0aW5nXCIpfHxjLmhpZGRlbnx8dGhpcy5fY29yZS5uZXh0KGR8fHRoaXMuX2NvcmUuc2V0dGluZ3MuYXV0b3BsYXlTcGVlZCl9LGUucHJvdG90eXBlLnJlYWQ9ZnVuY3Rpb24oKXtyZXR1cm4obmV3IERhdGUpLmdldFRpbWUoKS10aGlzLl90aW1lfSxlLnByb3RvdHlwZS5wbGF5PWZ1bmN0aW9uKGMsZCl7dmFyIGU7dGhpcy5fY29yZS5pcyhcInJvdGF0aW5nXCIpfHx0aGlzLl9jb3JlLmVudGVyKFwicm90YXRpbmdcIiksYz1jfHx0aGlzLl9jb3JlLnNldHRpbmdzLmF1dG9wbGF5VGltZW91dCxlPU1hdGgubWluKHRoaXMuX3RpbWUlKHRoaXMuX3RpbWVvdXR8fGMpLGMpLHRoaXMuX3BhdXNlZD8odGhpcy5fdGltZT10aGlzLnJlYWQoKSx0aGlzLl9wYXVzZWQ9ITEpOmIuY2xlYXJUaW1lb3V0KHRoaXMuX2NhbGwpLHRoaXMuX3RpbWUrPXRoaXMucmVhZCgpJWMtZSx0aGlzLl90aW1lb3V0PWMsdGhpcy5fY2FsbD1iLnNldFRpbWVvdXQoYS5wcm94eSh0aGlzLl9uZXh0LHRoaXMsZCksYy1lKX0sZS5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3RoaXMuX2NvcmUuaXMoXCJyb3RhdGluZ1wiKSYmKHRoaXMuX3RpbWU9MCx0aGlzLl9wYXVzZWQ9ITAsYi5jbGVhclRpbWVvdXQodGhpcy5fY2FsbCksdGhpcy5fY29yZS5sZWF2ZShcInJvdGF0aW5nXCIpKX0sZS5wcm90b3R5cGUucGF1c2U9ZnVuY3Rpb24oKXt0aGlzLl9jb3JlLmlzKFwicm90YXRpbmdcIikmJiF0aGlzLl9wYXVzZWQmJih0aGlzLl90aW1lPXRoaXMucmVhZCgpLHRoaXMuX3BhdXNlZD0hMCxiLmNsZWFyVGltZW91dCh0aGlzLl9jYWxsKSl9LGUucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt2YXIgYSxiO3RoaXMuc3RvcCgpO2ZvcihhIGluIHRoaXMuX2hhbmRsZXJzKXRoaXMuX2NvcmUuJGVsZW1lbnQub2ZmKGEsdGhpcy5faGFuZGxlcnNbYV0pO2ZvcihiIGluIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMpKVwiZnVuY3Rpb25cIiE9dHlwZW9mIHRoaXNbYl0mJih0aGlzW2JdPW51bGwpfSxhLmZuLm93bENhcm91c2VsLkNvbnN0cnVjdG9yLlBsdWdpbnMuYXV0b3BsYXk9ZX0od2luZG93LlplcHRvfHx3aW5kb3cualF1ZXJ5LHdpbmRvdyxkb2N1bWVudCksZnVuY3Rpb24oYSxiLGMsZCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGU9ZnVuY3Rpb24oYil7dGhpcy5fY29yZT1iLHRoaXMuX2luaXRpYWxpemVkPSExLHRoaXMuX3BhZ2VzPVtdLHRoaXMuX2NvbnRyb2xzPXt9LHRoaXMuX3RlbXBsYXRlcz1bXSx0aGlzLiRlbGVtZW50PXRoaXMuX2NvcmUuJGVsZW1lbnQsdGhpcy5fb3ZlcnJpZGVzPXtuZXh0OnRoaXMuX2NvcmUubmV4dCxwcmV2OnRoaXMuX2NvcmUucHJldix0bzp0aGlzLl9jb3JlLnRvfSx0aGlzLl9oYW5kbGVycz17XCJwcmVwYXJlZC5vd2wuY2Fyb3VzZWxcIjphLnByb3h5KGZ1bmN0aW9uKGIpe2IubmFtZXNwYWNlJiZ0aGlzLl9jb3JlLnNldHRpbmdzLmRvdHNEYXRhJiZ0aGlzLl90ZW1wbGF0ZXMucHVzaCgnPGRpdiBjbGFzcz1cIicrdGhpcy5fY29yZS5zZXR0aW5ncy5kb3RDbGFzcysnXCI+JythKGIuY29udGVudCkuZmluZChcIltkYXRhLWRvdF1cIikuYWRkQmFjayhcIltkYXRhLWRvdF1cIikuYXR0cihcImRhdGEtZG90XCIpK1wiPC9kaXY+XCIpfSx0aGlzKSxcImFkZGVkLm93bC5jYXJvdXNlbFwiOmEucHJveHkoZnVuY3Rpb24oYSl7YS5uYW1lc3BhY2UmJnRoaXMuX2NvcmUuc2V0dGluZ3MuZG90c0RhdGEmJnRoaXMuX3RlbXBsYXRlcy5zcGxpY2UoYS5wb3NpdGlvbiwwLHRoaXMuX3RlbXBsYXRlcy5wb3AoKSl9LHRoaXMpLFwicmVtb3ZlLm93bC5jYXJvdXNlbFwiOmEucHJveHkoZnVuY3Rpb24oYSl7YS5uYW1lc3BhY2UmJnRoaXMuX2NvcmUuc2V0dGluZ3MuZG90c0RhdGEmJnRoaXMuX3RlbXBsYXRlcy5zcGxpY2UoYS5wb3NpdGlvbiwxKX0sdGhpcyksXCJjaGFuZ2VkLm93bC5jYXJvdXNlbFwiOmEucHJveHkoZnVuY3Rpb24oYSl7YS5uYW1lc3BhY2UmJlwicG9zaXRpb25cIj09YS5wcm9wZXJ0eS5uYW1lJiZ0aGlzLmRyYXcoKX0sdGhpcyksXCJpbml0aWFsaXplZC5vd2wuY2Fyb3VzZWxcIjphLnByb3h5KGZ1bmN0aW9uKGEpe2EubmFtZXNwYWNlJiYhdGhpcy5faW5pdGlhbGl6ZWQmJih0aGlzLl9jb3JlLnRyaWdnZXIoXCJpbml0aWFsaXplXCIsbnVsbCxcIm5hdmlnYXRpb25cIiksdGhpcy5pbml0aWFsaXplKCksdGhpcy51cGRhdGUoKSx0aGlzLmRyYXcoKSx0aGlzLl9pbml0aWFsaXplZD0hMCx0aGlzLl9jb3JlLnRyaWdnZXIoXCJpbml0aWFsaXplZFwiLG51bGwsXCJuYXZpZ2F0aW9uXCIpKX0sdGhpcyksXCJyZWZyZXNoZWQub3dsLmNhcm91c2VsXCI6YS5wcm94eShmdW5jdGlvbihhKXthLm5hbWVzcGFjZSYmdGhpcy5faW5pdGlhbGl6ZWQmJih0aGlzLl9jb3JlLnRyaWdnZXIoXCJyZWZyZXNoXCIsbnVsbCxcIm5hdmlnYXRpb25cIiksdGhpcy51cGRhdGUoKSx0aGlzLmRyYXcoKSx0aGlzLl9jb3JlLnRyaWdnZXIoXCJyZWZyZXNoZWRcIixudWxsLFwibmF2aWdhdGlvblwiKSl9LHRoaXMpfSx0aGlzLl9jb3JlLm9wdGlvbnM9YS5leHRlbmQoe30sZS5EZWZhdWx0cyx0aGlzLl9jb3JlLm9wdGlvbnMpLHRoaXMuJGVsZW1lbnQub24odGhpcy5faGFuZGxlcnMpfTtlLkRlZmF1bHRzPXtuYXY6ITEsbmF2VGV4dDpbJzxzcGFuIGFyaWEtbGFiZWw9XCJwcmV2XCI+JiN4MjAzOTs8L3NwYW4+JywnPHNwYW4gYXJpYS1sYWJlbD1cIm5leHRcIj4mI3gyMDNhOzwvc3Bhbj4nXSxuYXZTcGVlZDohMSxuYXZFbGVtZW50OididXR0b24gcm9sZT1cInByZXNlbnRhdGlvblwiJyxuYXZDb250YWluZXI6ITEsbmF2Q29udGFpbmVyQ2xhc3M6XCJvd2wtbmF2XCIsbmF2Q2xhc3M6W1wib3dsLXByZXZcIixcIm93bC1uZXh0XCJdLHNsaWRlQnk6MSxkb3RDbGFzczpcIm93bC1kb3RcIixkb3RzQ2xhc3M6XCJvd2wtZG90c1wiLGRvdHM6ITAsZG90c0VhY2g6ITEsZG90c0RhdGE6ITEsZG90c1NwZWVkOiExLGRvdHNDb250YWluZXI6ITF9LGUucHJvdG90eXBlLmluaXRpYWxpemU9ZnVuY3Rpb24oKXt2YXIgYixjPXRoaXMuX2NvcmUuc2V0dGluZ3M7dGhpcy5fY29udHJvbHMuJHJlbGF0aXZlPShjLm5hdkNvbnRhaW5lcj9hKGMubmF2Q29udGFpbmVyKTphKFwiPGRpdj5cIikuYWRkQ2xhc3MoYy5uYXZDb250YWluZXJDbGFzcykuYXBwZW5kVG8odGhpcy4kZWxlbWVudCkpLmFkZENsYXNzKFwiZGlzYWJsZWRcIiksdGhpcy5fY29udHJvbHMuJHByZXZpb3VzPWEoXCI8XCIrYy5uYXZFbGVtZW50K1wiPlwiKS5hZGRDbGFzcyhjLm5hdkNsYXNzWzBdKS5odG1sKGMubmF2VGV4dFswXSkucHJlcGVuZFRvKHRoaXMuX2NvbnRyb2xzLiRyZWxhdGl2ZSkub24oXCJjbGlja1wiLGEucHJveHkoZnVuY3Rpb24oYSl7dGhpcy5wcmV2KGMubmF2U3BlZWQpfSx0aGlzKSksdGhpcy5fY29udHJvbHMuJG5leHQ9YShcIjxcIitjLm5hdkVsZW1lbnQrXCI+XCIpLmFkZENsYXNzKGMubmF2Q2xhc3NbMV0pLmh0bWwoYy5uYXZUZXh0WzFdKS5hcHBlbmRUbyh0aGlzLl9jb250cm9scy4kcmVsYXRpdmUpLm9uKFwiY2xpY2tcIixhLnByb3h5KGZ1bmN0aW9uKGEpe3RoaXMubmV4dChjLm5hdlNwZWVkKX0sdGhpcykpLGMuZG90c0RhdGF8fCh0aGlzLl90ZW1wbGF0ZXM9W2EoXCI8YnV0dG9uPlwiKS5hZGRDbGFzcyhjLmRvdENsYXNzKS5hcHBlbmQoYShcIjxzcGFuPlwiKSkucHJvcChcIm91dGVySFRNTFwiKV0pLHRoaXMuX2NvbnRyb2xzLiRhYnNvbHV0ZT0oYy5kb3RzQ29udGFpbmVyP2EoYy5kb3RzQ29udGFpbmVyKTphKFwiPGRpdj5cIikuYWRkQ2xhc3MoYy5kb3RzQ2xhc3MpLmFwcGVuZFRvKHRoaXMuJGVsZW1lbnQpKS5hZGRDbGFzcyhcImRpc2FibGVkXCIpLHRoaXMuX2NvbnRyb2xzLiRhYnNvbHV0ZS5vbihcImNsaWNrXCIsXCJidXR0b25cIixhLnByb3h5KGZ1bmN0aW9uKGIpe3ZhciBkPWEoYi50YXJnZXQpLnBhcmVudCgpLmlzKHRoaXMuX2NvbnRyb2xzLiRhYnNvbHV0ZSk/YShiLnRhcmdldCkuaW5kZXgoKTphKGIudGFyZ2V0KS5wYXJlbnQoKS5pbmRleCgpO2IucHJldmVudERlZmF1bHQoKSx0aGlzLnRvKGQsYy5kb3RzU3BlZWQpfSx0aGlzKSk7Zm9yKGIgaW4gdGhpcy5fb3ZlcnJpZGVzKXRoaXMuX2NvcmVbYl09YS5wcm94eSh0aGlzW2JdLHRoaXMpfSxlLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dmFyIGEsYixjLGQ7Zm9yKGEgaW4gdGhpcy5faGFuZGxlcnMpdGhpcy4kZWxlbWVudC5vZmYoYSx0aGlzLl9oYW5kbGVyc1thXSk7Zm9yKGIgaW4gdGhpcy5fY29udHJvbHMpXCIkcmVsYXRpdmVcIj09PWImJnNldHRpbmdzLm5hdkNvbnRhaW5lcj90aGlzLl9jb250cm9sc1tiXS5odG1sKFwiXCIpOnRoaXMuX2NvbnRyb2xzW2JdLnJlbW92ZSgpO2ZvcihkIGluIHRoaXMub3ZlcmlkZXMpdGhpcy5fY29yZVtkXT10aGlzLl9vdmVycmlkZXNbZF07Zm9yKGMgaW4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGhpcykpXCJmdW5jdGlvblwiIT10eXBlb2YgdGhpc1tjXSYmKHRoaXNbY109bnVsbCl9LGUucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3ZhciBhLGIsYyxkPXRoaXMuX2NvcmUuY2xvbmVzKCkubGVuZ3RoLzIsZT1kK3RoaXMuX2NvcmUuaXRlbXMoKS5sZW5ndGgsZj10aGlzLl9jb3JlLm1heGltdW0oITApLGc9dGhpcy5fY29yZS5zZXR0aW5ncyxoPWcuY2VudGVyfHxnLmF1dG9XaWR0aHx8Zy5kb3RzRGF0YT8xOmcuZG90c0VhY2h8fGcuaXRlbXM7aWYoXCJwYWdlXCIhPT1nLnNsaWRlQnkmJihnLnNsaWRlQnk9TWF0aC5taW4oZy5zbGlkZUJ5LGcuaXRlbXMpKSxnLmRvdHN8fFwicGFnZVwiPT1nLnNsaWRlQnkpZm9yKHRoaXMuX3BhZ2VzPVtdLGE9ZCxiPTAsYz0wO2U+YTthKyspe2lmKGI+PWh8fDA9PT1iKXtpZih0aGlzLl9wYWdlcy5wdXNoKHtzdGFydDpNYXRoLm1pbihmLGEtZCksZW5kOmEtZCtoLTF9KSxNYXRoLm1pbihmLGEtZCk9PT1mKWJyZWFrO2I9MCwrK2N9Yis9dGhpcy5fY29yZS5tZXJnZXJzKHRoaXMuX2NvcmUucmVsYXRpdmUoYSkpfX0sZS5wcm90b3R5cGUuZHJhdz1mdW5jdGlvbigpe3ZhciBiLGM9dGhpcy5fY29yZS5zZXR0aW5ncyxkPXRoaXMuX2NvcmUuaXRlbXMoKS5sZW5ndGg8PWMuaXRlbXMsZT10aGlzLl9jb3JlLnJlbGF0aXZlKHRoaXMuX2NvcmUuY3VycmVudCgpKSxmPWMubG9vcHx8Yy5yZXdpbmQ7dGhpcy5fY29udHJvbHMuJHJlbGF0aXZlLnRvZ2dsZUNsYXNzKFwiZGlzYWJsZWRcIiwhYy5uYXZ8fGQpLGMubmF2JiYodGhpcy5fY29udHJvbHMuJHByZXZpb3VzLnRvZ2dsZUNsYXNzKFwiZGlzYWJsZWRcIiwhZiYmZTw9dGhpcy5fY29yZS5taW5pbXVtKCEwKSksdGhpcy5fY29udHJvbHMuJG5leHQudG9nZ2xlQ2xhc3MoXCJkaXNhYmxlZFwiLCFmJiZlPj10aGlzLl9jb3JlLm1heGltdW0oITApKSksdGhpcy5fY29udHJvbHMuJGFic29sdXRlLnRvZ2dsZUNsYXNzKFwiZGlzYWJsZWRcIiwhYy5kb3RzfHxkKSxjLmRvdHMmJihiPXRoaXMuX3BhZ2VzLmxlbmd0aC10aGlzLl9jb250cm9scy4kYWJzb2x1dGUuY2hpbGRyZW4oKS5sZW5ndGgsYy5kb3RzRGF0YSYmMCE9PWI/dGhpcy5fY29udHJvbHMuJGFic29sdXRlLmh0bWwodGhpcy5fdGVtcGxhdGVzLmpvaW4oXCJcIikpOmI+MD90aGlzLl9jb250cm9scy4kYWJzb2x1dGUuYXBwZW5kKG5ldyBBcnJheShiKzEpLmpvaW4odGhpcy5fdGVtcGxhdGVzWzBdKSk6MD5iJiZ0aGlzLl9jb250cm9scy4kYWJzb2x1dGUuY2hpbGRyZW4oKS5zbGljZShiKS5yZW1vdmUoKSx0aGlzLl9jb250cm9scy4kYWJzb2x1dGUuZmluZChcIi5hY3RpdmVcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIiksdGhpcy5fY29udHJvbHMuJGFic29sdXRlLmNoaWxkcmVuKCkuZXEoYS5pbkFycmF5KHRoaXMuY3VycmVudCgpLHRoaXMuX3BhZ2VzKSkuYWRkQ2xhc3MoXCJhY3RpdmVcIikpfSxlLnByb3RvdHlwZS5vblRyaWdnZXI9ZnVuY3Rpb24oYil7dmFyIGM9dGhpcy5fY29yZS5zZXR0aW5ncztiLnBhZ2U9e2luZGV4OmEuaW5BcnJheSh0aGlzLmN1cnJlbnQoKSx0aGlzLl9wYWdlcyksY291bnQ6dGhpcy5fcGFnZXMubGVuZ3RoLHNpemU6YyYmKGMuY2VudGVyfHxjLmF1dG9XaWR0aHx8Yy5kb3RzRGF0YT8xOmMuZG90c0VhY2h8fGMuaXRlbXMpfX0sZS5wcm90b3R5cGUuY3VycmVudD1mdW5jdGlvbigpe3ZhciBiPXRoaXMuX2NvcmUucmVsYXRpdmUodGhpcy5fY29yZS5jdXJyZW50KCkpO3JldHVybiBhLmdyZXAodGhpcy5fcGFnZXMsYS5wcm94eShmdW5jdGlvbihhLGMpe3JldHVybiBhLnN0YXJ0PD1iJiZhLmVuZD49Yn0sdGhpcykpLnBvcCgpfSxlLnByb3RvdHlwZS5nZXRQb3NpdGlvbj1mdW5jdGlvbihiKXt2YXIgYyxkLGU9dGhpcy5fY29yZS5zZXR0aW5ncztyZXR1cm5cInBhZ2VcIj09ZS5zbGlkZUJ5PyhjPWEuaW5BcnJheSh0aGlzLmN1cnJlbnQoKSx0aGlzLl9wYWdlcyksZD10aGlzLl9wYWdlcy5sZW5ndGgsYj8rK2M6LS1jLGM9dGhpcy5fcGFnZXNbKGMlZCtkKSVkXS5zdGFydCk6KGM9dGhpcy5fY29yZS5yZWxhdGl2ZSh0aGlzLl9jb3JlLmN1cnJlbnQoKSksZD10aGlzLl9jb3JlLml0ZW1zKCkubGVuZ3RoLGI/Yys9ZS5zbGlkZUJ5OmMtPWUuc2xpZGVCeSksY30sZS5wcm90b3R5cGUubmV4dD1mdW5jdGlvbihiKXthLnByb3h5KHRoaXMuX292ZXJyaWRlcy50byx0aGlzLl9jb3JlKSh0aGlzLmdldFBvc2l0aW9uKCEwKSxiKX0sZS5wcm90b3R5cGUucHJldj1mdW5jdGlvbihiKXthLnByb3h5KHRoaXMuX292ZXJyaWRlcy50byx0aGlzLl9jb3JlKSh0aGlzLmdldFBvc2l0aW9uKCExKSxiKX0sZS5wcm90b3R5cGUudG89ZnVuY3Rpb24oYixjLGQpe3ZhciBlOyFkJiZ0aGlzLl9wYWdlcy5sZW5ndGg/KGU9dGhpcy5fcGFnZXMubGVuZ3RoLGEucHJveHkodGhpcy5fb3ZlcnJpZGVzLnRvLHRoaXMuX2NvcmUpKHRoaXMuX3BhZ2VzWyhiJWUrZSklZV0uc3RhcnQsYykpOmEucHJveHkodGhpcy5fb3ZlcnJpZGVzLnRvLHRoaXMuX2NvcmUpKGIsYyl9LGEuZm4ub3dsQ2Fyb3VzZWwuQ29uc3RydWN0b3IuUGx1Z2lucy5OYXZpZ2F0aW9uPWV9KHdpbmRvdy5aZXB0b3x8d2luZG93LmpRdWVyeSx3aW5kb3csZG9jdW1lbnQpLGZ1bmN0aW9uKGEsYixjLGQpe1widXNlIHN0cmljdFwiO3ZhciBlPWZ1bmN0aW9uKGMpe3RoaXMuX2NvcmU9Yyx0aGlzLl9oYXNoZXM9e30sdGhpcy4kZWxlbWVudD10aGlzLl9jb3JlLiRlbGVtZW50LHRoaXMuX2hhbmRsZXJzPXtcImluaXRpYWxpemVkLm93bC5jYXJvdXNlbFwiOmEucHJveHkoZnVuY3Rpb24oYyl7Yy5uYW1lc3BhY2UmJlwiVVJMSGFzaFwiPT09dGhpcy5fY29yZS5zZXR0aW5ncy5zdGFydFBvc2l0aW9uJiZhKGIpLnRyaWdnZXIoXCJoYXNoY2hhbmdlLm93bC5uYXZpZ2F0aW9uXCIpfSx0aGlzKSxcInByZXBhcmVkLm93bC5jYXJvdXNlbFwiOmEucHJveHkoZnVuY3Rpb24oYil7aWYoYi5uYW1lc3BhY2Upe3ZhciBjPWEoYi5jb250ZW50KS5maW5kKFwiW2RhdGEtaGFzaF1cIikuYWRkQmFjayhcIltkYXRhLWhhc2hdXCIpLmF0dHIoXCJkYXRhLWhhc2hcIik7aWYoIWMpcmV0dXJuO3RoaXMuX2hhc2hlc1tjXT1iLmNvbnRlbnR9fSx0aGlzKSxcImNoYW5nZWQub3dsLmNhcm91c2VsXCI6YS5wcm94eShmdW5jdGlvbihjKXtpZihjLm5hbWVzcGFjZSYmXCJwb3NpdGlvblwiPT09Yy5wcm9wZXJ0eS5uYW1lKXt2YXIgZD10aGlzLl9jb3JlLml0ZW1zKHRoaXMuX2NvcmUucmVsYXRpdmUodGhpcy5fY29yZS5jdXJyZW50KCkpKSxlPWEubWFwKHRoaXMuX2hhc2hlcyxmdW5jdGlvbihhLGIpe3JldHVybiBhPT09ZD9iOm51bGx9KS5qb2luKCk7aWYoIWV8fGIubG9jYXRpb24uaGFzaC5zbGljZSgxKT09PWUpcmV0dXJuO2IubG9jYXRpb24uaGFzaD1lfX0sdGhpcyl9LHRoaXMuX2NvcmUub3B0aW9ucz1hLmV4dGVuZCh7fSxlLkRlZmF1bHRzLHRoaXMuX2NvcmUub3B0aW9ucyksdGhpcy4kZWxlbWVudC5vbih0aGlzLl9oYW5kbGVycyksYShiKS5vbihcImhhc2hjaGFuZ2Uub3dsLm5hdmlnYXRpb25cIixhLnByb3h5KGZ1bmN0aW9uKGEpe3ZhciBjPWIubG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSksZT10aGlzLl9jb3JlLiRzdGFnZS5jaGlsZHJlbigpLGY9dGhpcy5faGFzaGVzW2NdJiZlLmluZGV4KHRoaXMuX2hhc2hlc1tjXSk7ZiE9PWQmJmYhPT10aGlzLl9jb3JlLmN1cnJlbnQoKSYmdGhpcy5fY29yZS50byh0aGlzLl9jb3JlLnJlbGF0aXZlKGYpLCExLCEwKX0sdGhpcykpfTtlLkRlZmF1bHRzPXtVUkxoYXNoTGlzdGVuZXI6ITF9LGUucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt2YXIgYyxkO2EoYikub2ZmKFwiaGFzaGNoYW5nZS5vd2wubmF2aWdhdGlvblwiKTtmb3IoYyBpbiB0aGlzLl9oYW5kbGVycyl0aGlzLl9jb3JlLiRlbGVtZW50Lm9mZihjLHRoaXMuX2hhbmRsZXJzW2NdKTtmb3IoZCBpbiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0aGlzKSlcImZ1bmN0aW9uXCIhPXR5cGVvZiB0aGlzW2RdJiYodGhpc1tkXT1udWxsKX0sYS5mbi5vd2xDYXJvdXNlbC5Db25zdHJ1Y3Rvci5QbHVnaW5zLkhhc2g9ZX0od2luZG93LlplcHRvfHx3aW5kb3cualF1ZXJ5LHdpbmRvdyxkb2N1bWVudCksZnVuY3Rpb24oYSxiLGMsZCl7ZnVuY3Rpb24gZShiLGMpe3ZhciBlPSExLGY9Yi5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStiLnNsaWNlKDEpO3JldHVybiBhLmVhY2goKGIrXCIgXCIraC5qb2luKGYrXCIgXCIpK2YpLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihhLGIpe3JldHVybiBnW2JdIT09ZD8oZT1jP2I6ITAsITEpOnZvaWQgMH0pLGV9ZnVuY3Rpb24gZihhKXtyZXR1cm4gZShhLCEwKX12YXIgZz1hKFwiPHN1cHBvcnQ+XCIpLmdldCgwKS5zdHlsZSxoPVwiV2Via2l0IE1veiBPIG1zXCIuc3BsaXQoXCIgXCIpLGk9e3RyYW5zaXRpb246e2VuZDp7V2Via2l0VHJhbnNpdGlvbjpcIndlYmtpdFRyYW5zaXRpb25FbmRcIixNb3pUcmFuc2l0aW9uOlwidHJhbnNpdGlvbmVuZFwiLE9UcmFuc2l0aW9uOlwib1RyYW5zaXRpb25FbmRcIix0cmFuc2l0aW9uOlwidHJhbnNpdGlvbmVuZFwifX0sYW5pbWF0aW9uOntlbmQ6e1dlYmtpdEFuaW1hdGlvbjpcIndlYmtpdEFuaW1hdGlvbkVuZFwiLE1vekFuaW1hdGlvbjpcImFuaW1hdGlvbmVuZFwiLE9BbmltYXRpb246XCJvQW5pbWF0aW9uRW5kXCIsYW5pbWF0aW9uOlwiYW5pbWF0aW9uZW5kXCJ9fX0saj17Y3NzdHJhbnNmb3JtczpmdW5jdGlvbigpe3JldHVybiEhZShcInRyYW5zZm9ybVwiKX0sY3NzdHJhbnNmb3JtczNkOmZ1bmN0aW9uKCl7cmV0dXJuISFlKFwicGVyc3BlY3RpdmVcIil9LGNzc3RyYW5zaXRpb25zOmZ1bmN0aW9uKCl7cmV0dXJuISFlKFwidHJhbnNpdGlvblwiKX0sY3NzYW5pbWF0aW9uczpmdW5jdGlvbigpe3JldHVybiEhZShcImFuaW1hdGlvblwiKX19O2ouY3NzdHJhbnNpdGlvbnMoKSYmKGEuc3VwcG9ydC50cmFuc2l0aW9uPW5ldyBTdHJpbmcoZihcInRyYW5zaXRpb25cIikpLGEuc3VwcG9ydC50cmFuc2l0aW9uLmVuZD1pLnRyYW5zaXRpb24uZW5kW2Euc3VwcG9ydC50cmFuc2l0aW9uXSksai5jc3NhbmltYXRpb25zKCkmJihhLnN1cHBvcnQuYW5pbWF0aW9uPW5ldyBTdHJpbmcoZihcImFuaW1hdGlvblwiKSksYS5zdXBwb3J0LmFuaW1hdGlvbi5lbmQ9aS5hbmltYXRpb24uZW5kW2Euc3VwcG9ydC5hbmltYXRpb25dKSxqLmNzc3RyYW5zZm9ybXMoKSYmKGEuc3VwcG9ydC50cmFuc2Zvcm09bmV3IFN0cmluZyhmKFwidHJhbnNmb3JtXCIpKSxhLnN1cHBvcnQudHJhbnNmb3JtM2Q9ai5jc3N0cmFuc2Zvcm1zM2QoKSl9KHdpbmRvdy5aZXB0b3x8d2luZG93LmpRdWVyeSx3aW5kb3csZG9jdW1lbnQpOyIsIi8qXHJcbiAgICAgXyBfICAgICAgXyAgICAgICBfXHJcbiBfX198IChfKSBfX198IHwgX18gIChfKV9fX1xyXG4vIF9ffCB8IHwvIF9ffCB8LyAvICB8IC8gX198XHJcblxcX18gXFwgfCB8IChfX3wgICA8IF8gfCBcXF9fIFxcXHJcbnxfX18vX3xffFxcX19ffF98XFxfKF8pLyB8X19fL1xyXG4gICAgICAgICAgICAgICAgICAgfF9fL1xyXG5cclxuIFZlcnNpb246IDEuOS4wXHJcbiAgQXV0aG9yOiBLZW4gV2hlZWxlclxyXG4gV2Vic2l0ZTogaHR0cDovL2tlbndoZWVsZXIuZ2l0aHViLmlvXHJcbiAgICBEb2NzOiBodHRwOi8va2Vud2hlZWxlci5naXRodWIuaW8vc2xpY2tcclxuICAgIFJlcG86IGh0dHA6Ly9naXRodWIuY29tL2tlbndoZWVsZXIvc2xpY2tcclxuICBJc3N1ZXM6IGh0dHA6Ly9naXRodWIuY29tL2tlbndoZWVsZXIvc2xpY2svaXNzdWVzXHJcblxyXG4gKi9cclxuKGZ1bmN0aW9uKGkpe1widXNlIHN0cmljdFwiO1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW1wianF1ZXJ5XCJdLGkpOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWkocmVxdWlyZShcImpxdWVyeVwiKSk6aShqUXVlcnkpfSkoZnVuY3Rpb24oaSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGU9d2luZG93LlNsaWNrfHx7fTtlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLG8pe3ZhciBzLG49dGhpcztuLmRlZmF1bHRzPXthY2Nlc3NpYmlsaXR5OiEwLGFkYXB0aXZlSGVpZ2h0OiExLGFwcGVuZEFycm93czppKGUpLGFwcGVuZERvdHM6aShlKSxhcnJvd3M6ITAsYXNOYXZGb3I6bnVsbCxwcmV2QXJyb3c6JzxidXR0b24gY2xhc3M9XCJzbGljay1wcmV2XCIgYXJpYS1sYWJlbD1cIlByZXZpb3VzXCIgdHlwZT1cImJ1dHRvblwiPlByZXZpb3VzPC9idXR0b24+JyxuZXh0QXJyb3c6JzxidXR0b24gY2xhc3M9XCJzbGljay1uZXh0XCIgYXJpYS1sYWJlbD1cIk5leHRcIiB0eXBlPVwiYnV0dG9uXCI+TmV4dDwvYnV0dG9uPicsYXV0b3BsYXk6ITEsYXV0b3BsYXlTcGVlZDozZTMsY2VudGVyTW9kZTohMSxjZW50ZXJQYWRkaW5nOlwiNTBweFwiLGNzc0Vhc2U6XCJlYXNlXCIsY3VzdG9tUGFnaW5nOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGkoJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIC8+JykudGV4dCh0KzEpfSxkb3RzOiExLGRvdHNDbGFzczpcInNsaWNrLWRvdHNcIixkcmFnZ2FibGU6ITAsZWFzaW5nOlwibGluZWFyXCIsZWRnZUZyaWN0aW9uOi4zNSxmYWRlOiExLGZvY3VzT25TZWxlY3Q6ITEsZm9jdXNPbkNoYW5nZTohMSxpbmZpbml0ZTohMCxpbml0aWFsU2xpZGU6MCxsYXp5TG9hZDpcIm9uZGVtYW5kXCIsbW9iaWxlRmlyc3Q6ITEscGF1c2VPbkhvdmVyOiEwLHBhdXNlT25Gb2N1czohMCxwYXVzZU9uRG90c0hvdmVyOiExLHJlc3BvbmRUbzpcIndpbmRvd1wiLHJlc3BvbnNpdmU6bnVsbCxyb3dzOjEscnRsOiExLHNsaWRlOlwiXCIsc2xpZGVzUGVyUm93OjEsc2xpZGVzVG9TaG93OjEsc2xpZGVzVG9TY3JvbGw6MSxzcGVlZDo1MDAsc3dpcGU6ITAsc3dpcGVUb1NsaWRlOiExLHRvdWNoTW92ZTohMCx0b3VjaFRocmVzaG9sZDo1LHVzZUNTUzohMCx1c2VUcmFuc2Zvcm06ITAsdmFyaWFibGVXaWR0aDohMSx2ZXJ0aWNhbDohMSx2ZXJ0aWNhbFN3aXBpbmc6ITEsd2FpdEZvckFuaW1hdGU6ITAsekluZGV4OjFlM30sbi5pbml0aWFscz17YW5pbWF0aW5nOiExLGRyYWdnaW5nOiExLGF1dG9QbGF5VGltZXI6bnVsbCxjdXJyZW50RGlyZWN0aW9uOjAsY3VycmVudExlZnQ6bnVsbCxjdXJyZW50U2xpZGU6MCxkaXJlY3Rpb246MSwkZG90czpudWxsLGxpc3RXaWR0aDpudWxsLGxpc3RIZWlnaHQ6bnVsbCxsb2FkSW5kZXg6MCwkbmV4dEFycm93Om51bGwsJHByZXZBcnJvdzpudWxsLHNjcm9sbGluZzohMSxzbGlkZUNvdW50Om51bGwsc2xpZGVXaWR0aDpudWxsLCRzbGlkZVRyYWNrOm51bGwsJHNsaWRlczpudWxsLHNsaWRpbmc6ITEsc2xpZGVPZmZzZXQ6MCxzd2lwZUxlZnQ6bnVsbCxzd2lwaW5nOiExLCRsaXN0Om51bGwsdG91Y2hPYmplY3Q6e30sdHJhbnNmb3Jtc0VuYWJsZWQ6ITEsdW5zbGlja2VkOiExfSxpLmV4dGVuZChuLG4uaW5pdGlhbHMpLG4uYWN0aXZlQnJlYWtwb2ludD1udWxsLG4uYW5pbVR5cGU9bnVsbCxuLmFuaW1Qcm9wPW51bGwsbi5icmVha3BvaW50cz1bXSxuLmJyZWFrcG9pbnRTZXR0aW5ncz1bXSxuLmNzc1RyYW5zaXRpb25zPSExLG4uZm9jdXNzZWQ9ITEsbi5pbnRlcnJ1cHRlZD0hMSxuLmhpZGRlbj1cImhpZGRlblwiLG4ucGF1c2VkPSEwLG4ucG9zaXRpb25Qcm9wPW51bGwsbi5yZXNwb25kVG89bnVsbCxuLnJvd0NvdW50PTEsbi5zaG91bGRDbGljaz0hMCxuLiRzbGlkZXI9aShlKSxuLiRzbGlkZXNDYWNoZT1udWxsLG4udHJhbnNmb3JtVHlwZT1udWxsLG4udHJhbnNpdGlvblR5cGU9bnVsbCxuLnZpc2liaWxpdHlDaGFuZ2U9XCJ2aXNpYmlsaXR5Y2hhbmdlXCIsbi53aW5kb3dXaWR0aD0wLG4ud2luZG93VGltZXI9bnVsbCxzPWkoZSkuZGF0YShcInNsaWNrXCIpfHx7fSxuLm9wdGlvbnM9aS5leHRlbmQoe30sbi5kZWZhdWx0cyxvLHMpLG4uY3VycmVudFNsaWRlPW4ub3B0aW9ucy5pbml0aWFsU2xpZGUsbi5vcmlnaW5hbFNldHRpbmdzPW4ub3B0aW9ucyxcInVuZGVmaW5lZFwiIT10eXBlb2YgZG9jdW1lbnQubW96SGlkZGVuPyhuLmhpZGRlbj1cIm1vekhpZGRlblwiLG4udmlzaWJpbGl0eUNoYW5nZT1cIm1venZpc2liaWxpdHljaGFuZ2VcIik6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGRvY3VtZW50LndlYmtpdEhpZGRlbiYmKG4uaGlkZGVuPVwid2Via2l0SGlkZGVuXCIsbi52aXNpYmlsaXR5Q2hhbmdlPVwid2Via2l0dmlzaWJpbGl0eWNoYW5nZVwiKSxuLmF1dG9QbGF5PWkucHJveHkobi5hdXRvUGxheSxuKSxuLmF1dG9QbGF5Q2xlYXI9aS5wcm94eShuLmF1dG9QbGF5Q2xlYXIsbiksbi5hdXRvUGxheUl0ZXJhdG9yPWkucHJveHkobi5hdXRvUGxheUl0ZXJhdG9yLG4pLG4uY2hhbmdlU2xpZGU9aS5wcm94eShuLmNoYW5nZVNsaWRlLG4pLG4uY2xpY2tIYW5kbGVyPWkucHJveHkobi5jbGlja0hhbmRsZXIsbiksbi5zZWxlY3RIYW5kbGVyPWkucHJveHkobi5zZWxlY3RIYW5kbGVyLG4pLG4uc2V0UG9zaXRpb249aS5wcm94eShuLnNldFBvc2l0aW9uLG4pLG4uc3dpcGVIYW5kbGVyPWkucHJveHkobi5zd2lwZUhhbmRsZXIsbiksbi5kcmFnSGFuZGxlcj1pLnByb3h5KG4uZHJhZ0hhbmRsZXIsbiksbi5rZXlIYW5kbGVyPWkucHJveHkobi5rZXlIYW5kbGVyLG4pLG4uaW5zdGFuY2VVaWQ9dCsrLG4uaHRtbEV4cHI9L14oPzpcXHMqKDxbXFx3XFxXXSs+KVtePl0qKSQvLG4ucmVnaXN0ZXJCcmVha3BvaW50cygpLG4uaW5pdCghMCl9dmFyIHQ9MDtyZXR1cm4gZX0oKSxlLnByb3RvdHlwZS5hY3RpdmF0ZUFEQT1mdW5jdGlvbigpe3ZhciBpPXRoaXM7aS4kc2xpZGVUcmFjay5maW5kKFwiLnNsaWNrLWFjdGl2ZVwiKS5hdHRyKHtcImFyaWEtaGlkZGVuXCI6XCJmYWxzZVwifSkuZmluZChcImEsIGlucHV0LCBidXR0b24sIHNlbGVjdFwiKS5hdHRyKHt0YWJpbmRleDpcIjBcIn0pfSxlLnByb3RvdHlwZS5hZGRTbGlkZT1lLnByb3RvdHlwZS5zbGlja0FkZD1mdW5jdGlvbihlLHQsbyl7dmFyIHM9dGhpcztpZihcImJvb2xlYW5cIj09dHlwZW9mIHQpbz10LHQ9bnVsbDtlbHNlIGlmKHQ8MHx8dD49cy5zbGlkZUNvdW50KXJldHVybiExO3MudW5sb2FkKCksXCJudW1iZXJcIj09dHlwZW9mIHQ/MD09PXQmJjA9PT1zLiRzbGlkZXMubGVuZ3RoP2koZSkuYXBwZW5kVG8ocy4kc2xpZGVUcmFjayk6bz9pKGUpLmluc2VydEJlZm9yZShzLiRzbGlkZXMuZXEodCkpOmkoZSkuaW5zZXJ0QWZ0ZXIocy4kc2xpZGVzLmVxKHQpKTpvPT09ITA/aShlKS5wcmVwZW5kVG8ocy4kc2xpZGVUcmFjayk6aShlKS5hcHBlbmRUbyhzLiRzbGlkZVRyYWNrKSxzLiRzbGlkZXM9cy4kc2xpZGVUcmFjay5jaGlsZHJlbih0aGlzLm9wdGlvbnMuc2xpZGUpLHMuJHNsaWRlVHJhY2suY2hpbGRyZW4odGhpcy5vcHRpb25zLnNsaWRlKS5kZXRhY2goKSxzLiRzbGlkZVRyYWNrLmFwcGVuZChzLiRzbGlkZXMpLHMuJHNsaWRlcy5lYWNoKGZ1bmN0aW9uKGUsdCl7aSh0KS5hdHRyKFwiZGF0YS1zbGljay1pbmRleFwiLGUpfSkscy4kc2xpZGVzQ2FjaGU9cy4kc2xpZGVzLHMucmVpbml0KCl9LGUucHJvdG90eXBlLmFuaW1hdGVIZWlnaHQ9ZnVuY3Rpb24oKXt2YXIgaT10aGlzO2lmKDE9PT1pLm9wdGlvbnMuc2xpZGVzVG9TaG93JiZpLm9wdGlvbnMuYWRhcHRpdmVIZWlnaHQ9PT0hMCYmaS5vcHRpb25zLnZlcnRpY2FsPT09ITEpe3ZhciBlPWkuJHNsaWRlcy5lcShpLmN1cnJlbnRTbGlkZSkub3V0ZXJIZWlnaHQoITApO2kuJGxpc3QuYW5pbWF0ZSh7aGVpZ2h0OmV9LGkub3B0aW9ucy5zcGVlZCl9fSxlLnByb3RvdHlwZS5hbmltYXRlU2xpZGU9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fSxzPXRoaXM7cy5hbmltYXRlSGVpZ2h0KCkscy5vcHRpb25zLnJ0bD09PSEwJiZzLm9wdGlvbnMudmVydGljYWw9PT0hMSYmKGU9LWUpLHMudHJhbnNmb3Jtc0VuYWJsZWQ9PT0hMT9zLm9wdGlvbnMudmVydGljYWw9PT0hMT9zLiRzbGlkZVRyYWNrLmFuaW1hdGUoe2xlZnQ6ZX0scy5vcHRpb25zLnNwZWVkLHMub3B0aW9ucy5lYXNpbmcsdCk6cy4kc2xpZGVUcmFjay5hbmltYXRlKHt0b3A6ZX0scy5vcHRpb25zLnNwZWVkLHMub3B0aW9ucy5lYXNpbmcsdCk6cy5jc3NUcmFuc2l0aW9ucz09PSExPyhzLm9wdGlvbnMucnRsPT09ITAmJihzLmN1cnJlbnRMZWZ0PS1zLmN1cnJlbnRMZWZ0KSxpKHthbmltU3RhcnQ6cy5jdXJyZW50TGVmdH0pLmFuaW1hdGUoe2FuaW1TdGFydDplfSx7ZHVyYXRpb246cy5vcHRpb25zLnNwZWVkLGVhc2luZzpzLm9wdGlvbnMuZWFzaW5nLHN0ZXA6ZnVuY3Rpb24oaSl7aT1NYXRoLmNlaWwoaSkscy5vcHRpb25zLnZlcnRpY2FsPT09ITE/KG9bcy5hbmltVHlwZV09XCJ0cmFuc2xhdGUoXCIraStcInB4LCAwcHgpXCIscy4kc2xpZGVUcmFjay5jc3MobykpOihvW3MuYW5pbVR5cGVdPVwidHJhbnNsYXRlKDBweCxcIitpK1wicHgpXCIscy4kc2xpZGVUcmFjay5jc3MobykpfSxjb21wbGV0ZTpmdW5jdGlvbigpe3QmJnQuY2FsbCgpfX0pKToocy5hcHBseVRyYW5zaXRpb24oKSxlPU1hdGguY2VpbChlKSxzLm9wdGlvbnMudmVydGljYWw9PT0hMT9vW3MuYW5pbVR5cGVdPVwidHJhbnNsYXRlM2QoXCIrZStcInB4LCAwcHgsIDBweClcIjpvW3MuYW5pbVR5cGVdPVwidHJhbnNsYXRlM2QoMHB4LFwiK2UrXCJweCwgMHB4KVwiLHMuJHNsaWRlVHJhY2suY3NzKG8pLHQmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXtzLmRpc2FibGVUcmFuc2l0aW9uKCksdC5jYWxsKCl9LHMub3B0aW9ucy5zcGVlZCkpfSxlLnByb3RvdHlwZS5nZXROYXZUYXJnZXQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5vcHRpb25zLmFzTmF2Rm9yO3JldHVybiB0JiZudWxsIT09dCYmKHQ9aSh0KS5ub3QoZS4kc2xpZGVyKSksdH0sZS5wcm90b3R5cGUuYXNOYXZGb3I9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxvPXQuZ2V0TmF2VGFyZ2V0KCk7bnVsbCE9PW8mJlwib2JqZWN0XCI9PXR5cGVvZiBvJiZvLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1pKHRoaXMpLnNsaWNrKFwiZ2V0U2xpY2tcIik7dC51bnNsaWNrZWR8fHQuc2xpZGVIYW5kbGVyKGUsITApfSl9LGUucHJvdG90eXBlLmFwcGx5VHJhbnNpdGlvbj1mdW5jdGlvbihpKXt2YXIgZT10aGlzLHQ9e307ZS5vcHRpb25zLmZhZGU9PT0hMT90W2UudHJhbnNpdGlvblR5cGVdPWUudHJhbnNmb3JtVHlwZStcIiBcIitlLm9wdGlvbnMuc3BlZWQrXCJtcyBcIitlLm9wdGlvbnMuY3NzRWFzZTp0W2UudHJhbnNpdGlvblR5cGVdPVwib3BhY2l0eSBcIitlLm9wdGlvbnMuc3BlZWQrXCJtcyBcIitlLm9wdGlvbnMuY3NzRWFzZSxlLm9wdGlvbnMuZmFkZT09PSExP2UuJHNsaWRlVHJhY2suY3NzKHQpOmUuJHNsaWRlcy5lcShpKS5jc3ModCl9LGUucHJvdG90eXBlLmF1dG9QbGF5PWZ1bmN0aW9uKCl7dmFyIGk9dGhpcztpLmF1dG9QbGF5Q2xlYXIoKSxpLnNsaWRlQ291bnQ+aS5vcHRpb25zLnNsaWRlc1RvU2hvdyYmKGkuYXV0b1BsYXlUaW1lcj1zZXRJbnRlcnZhbChpLmF1dG9QbGF5SXRlcmF0b3IsaS5vcHRpb25zLmF1dG9wbGF5U3BlZWQpKX0sZS5wcm90b3R5cGUuYXV0b1BsYXlDbGVhcj1mdW5jdGlvbigpe3ZhciBpPXRoaXM7aS5hdXRvUGxheVRpbWVyJiZjbGVhckludGVydmFsKGkuYXV0b1BsYXlUaW1lcil9LGUucHJvdG90eXBlLmF1dG9QbGF5SXRlcmF0b3I9ZnVuY3Rpb24oKXt2YXIgaT10aGlzLGU9aS5jdXJyZW50U2xpZGUraS5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsO2kucGF1c2VkfHxpLmludGVycnVwdGVkfHxpLmZvY3Vzc2VkfHwoaS5vcHRpb25zLmluZmluaXRlPT09ITEmJigxPT09aS5kaXJlY3Rpb24mJmkuY3VycmVudFNsaWRlKzE9PT1pLnNsaWRlQ291bnQtMT9pLmRpcmVjdGlvbj0wOjA9PT1pLmRpcmVjdGlvbiYmKGU9aS5jdXJyZW50U2xpZGUtaS5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsLGkuY3VycmVudFNsaWRlLTE9PT0wJiYoaS5kaXJlY3Rpb249MSkpKSxpLnNsaWRlSGFuZGxlcihlKSl9LGUucHJvdG90eXBlLmJ1aWxkQXJyb3dzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLm9wdGlvbnMuYXJyb3dzPT09ITAmJihlLiRwcmV2QXJyb3c9aShlLm9wdGlvbnMucHJldkFycm93KS5hZGRDbGFzcyhcInNsaWNrLWFycm93XCIpLGUuJG5leHRBcnJvdz1pKGUub3B0aW9ucy5uZXh0QXJyb3cpLmFkZENsYXNzKFwic2xpY2stYXJyb3dcIiksZS5zbGlkZUNvdW50PmUub3B0aW9ucy5zbGlkZXNUb1Nob3c/KGUuJHByZXZBcnJvdy5yZW1vdmVDbGFzcyhcInNsaWNrLWhpZGRlblwiKS5yZW1vdmVBdHRyKFwiYXJpYS1oaWRkZW4gdGFiaW5kZXhcIiksZS4kbmV4dEFycm93LnJlbW92ZUNsYXNzKFwic2xpY2staGlkZGVuXCIpLnJlbW92ZUF0dHIoXCJhcmlhLWhpZGRlbiB0YWJpbmRleFwiKSxlLmh0bWxFeHByLnRlc3QoZS5vcHRpb25zLnByZXZBcnJvdykmJmUuJHByZXZBcnJvdy5wcmVwZW5kVG8oZS5vcHRpb25zLmFwcGVuZEFycm93cyksZS5odG1sRXhwci50ZXN0KGUub3B0aW9ucy5uZXh0QXJyb3cpJiZlLiRuZXh0QXJyb3cuYXBwZW5kVG8oZS5vcHRpb25zLmFwcGVuZEFycm93cyksZS5vcHRpb25zLmluZmluaXRlIT09ITAmJmUuJHByZXZBcnJvdy5hZGRDbGFzcyhcInNsaWNrLWRpc2FibGVkXCIpLmF0dHIoXCJhcmlhLWRpc2FibGVkXCIsXCJ0cnVlXCIpKTplLiRwcmV2QXJyb3cuYWRkKGUuJG5leHRBcnJvdykuYWRkQ2xhc3MoXCJzbGljay1oaWRkZW5cIikuYXR0cih7XCJhcmlhLWRpc2FibGVkXCI6XCJ0cnVlXCIsdGFiaW5kZXg6XCItMVwifSkpfSxlLnByb3RvdHlwZS5idWlsZERvdHM9ZnVuY3Rpb24oKXt2YXIgZSx0LG89dGhpcztpZihvLm9wdGlvbnMuZG90cz09PSEwJiZvLnNsaWRlQ291bnQ+by5vcHRpb25zLnNsaWRlc1RvU2hvdyl7Zm9yKG8uJHNsaWRlci5hZGRDbGFzcyhcInNsaWNrLWRvdHRlZFwiKSx0PWkoXCI8dWwgLz5cIikuYWRkQ2xhc3Moby5vcHRpb25zLmRvdHNDbGFzcyksZT0wO2U8PW8uZ2V0RG90Q291bnQoKTtlKz0xKXQuYXBwZW5kKGkoXCI8bGkgLz5cIikuYXBwZW5kKG8ub3B0aW9ucy5jdXN0b21QYWdpbmcuY2FsbCh0aGlzLG8sZSkpKTtvLiRkb3RzPXQuYXBwZW5kVG8oby5vcHRpb25zLmFwcGVuZERvdHMpLG8uJGRvdHMuZmluZChcImxpXCIpLmZpcnN0KCkuYWRkQ2xhc3MoXCJzbGljay1hY3RpdmVcIil9fSxlLnByb3RvdHlwZS5idWlsZE91dD1mdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS4kc2xpZGVzPWUuJHNsaWRlci5jaGlsZHJlbihlLm9wdGlvbnMuc2xpZGUrXCI6bm90KC5zbGljay1jbG9uZWQpXCIpLmFkZENsYXNzKFwic2xpY2stc2xpZGVcIiksZS5zbGlkZUNvdW50PWUuJHNsaWRlcy5sZW5ndGgsZS4kc2xpZGVzLmVhY2goZnVuY3Rpb24oZSx0KXtpKHQpLmF0dHIoXCJkYXRhLXNsaWNrLWluZGV4XCIsZSkuZGF0YShcIm9yaWdpbmFsU3R5bGluZ1wiLGkodCkuYXR0cihcInN0eWxlXCIpfHxcIlwiKX0pLGUuJHNsaWRlci5hZGRDbGFzcyhcInNsaWNrLXNsaWRlclwiKSxlLiRzbGlkZVRyYWNrPTA9PT1lLnNsaWRlQ291bnQ/aSgnPGRpdiBjbGFzcz1cInNsaWNrLXRyYWNrXCIvPicpLmFwcGVuZFRvKGUuJHNsaWRlcik6ZS4kc2xpZGVzLndyYXBBbGwoJzxkaXYgY2xhc3M9XCJzbGljay10cmFja1wiLz4nKS5wYXJlbnQoKSxlLiRsaXN0PWUuJHNsaWRlVHJhY2sud3JhcCgnPGRpdiBjbGFzcz1cInNsaWNrLWxpc3RcIi8+JykucGFyZW50KCksZS4kc2xpZGVUcmFjay5jc3MoXCJvcGFjaXR5XCIsMCksZS5vcHRpb25zLmNlbnRlck1vZGUhPT0hMCYmZS5vcHRpb25zLnN3aXBlVG9TbGlkZSE9PSEwfHwoZS5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsPTEpLGkoXCJpbWdbZGF0YS1sYXp5XVwiLGUuJHNsaWRlcikubm90KFwiW3NyY11cIikuYWRkQ2xhc3MoXCJzbGljay1sb2FkaW5nXCIpLGUuc2V0dXBJbmZpbml0ZSgpLGUuYnVpbGRBcnJvd3MoKSxlLmJ1aWxkRG90cygpLGUudXBkYXRlRG90cygpLGUuc2V0U2xpZGVDbGFzc2VzKFwibnVtYmVyXCI9PXR5cGVvZiBlLmN1cnJlbnRTbGlkZT9lLmN1cnJlbnRTbGlkZTowKSxlLm9wdGlvbnMuZHJhZ2dhYmxlPT09ITAmJmUuJGxpc3QuYWRkQ2xhc3MoXCJkcmFnZ2FibGVcIil9LGUucHJvdG90eXBlLmJ1aWxkUm93cz1mdW5jdGlvbigpe3ZhciBpLGUsdCxvLHMsbixyLGw9dGhpcztpZihvPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxuPWwuJHNsaWRlci5jaGlsZHJlbigpLGwub3B0aW9ucy5yb3dzPjApe2ZvcihyPWwub3B0aW9ucy5zbGlkZXNQZXJSb3cqbC5vcHRpb25zLnJvd3Mscz1NYXRoLmNlaWwobi5sZW5ndGgvciksaT0wO2k8cztpKyspe3ZhciBkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7Zm9yKGU9MDtlPGwub3B0aW9ucy5yb3dzO2UrKyl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtmb3IodD0wO3Q8bC5vcHRpb25zLnNsaWRlc1BlclJvdzt0Kyspe3ZhciBjPWkqcisoZSpsLm9wdGlvbnMuc2xpZGVzUGVyUm93K3QpO24uZ2V0KGMpJiZhLmFwcGVuZENoaWxkKG4uZ2V0KGMpKX1kLmFwcGVuZENoaWxkKGEpfW8uYXBwZW5kQ2hpbGQoZCl9bC4kc2xpZGVyLmVtcHR5KCkuYXBwZW5kKG8pLGwuJHNsaWRlci5jaGlsZHJlbigpLmNoaWxkcmVuKCkuY2hpbGRyZW4oKS5jc3Moe3dpZHRoOjEwMC9sLm9wdGlvbnMuc2xpZGVzUGVyUm93K1wiJVwiLGRpc3BsYXk6XCJpbmxpbmUtYmxvY2tcIn0pfX0sZS5wcm90b3R5cGUuY2hlY2tSZXNwb25zaXZlPWZ1bmN0aW9uKGUsdCl7dmFyIG8scyxuLHI9dGhpcyxsPSExLGQ9ci4kc2xpZGVyLndpZHRoKCksYT13aW5kb3cuaW5uZXJXaWR0aHx8aSh3aW5kb3cpLndpZHRoKCk7aWYoXCJ3aW5kb3dcIj09PXIucmVzcG9uZFRvP249YTpcInNsaWRlclwiPT09ci5yZXNwb25kVG8/bj1kOlwibWluXCI9PT1yLnJlc3BvbmRUbyYmKG49TWF0aC5taW4oYSxkKSksci5vcHRpb25zLnJlc3BvbnNpdmUmJnIub3B0aW9ucy5yZXNwb25zaXZlLmxlbmd0aCYmbnVsbCE9PXIub3B0aW9ucy5yZXNwb25zaXZlKXtzPW51bGw7Zm9yKG8gaW4gci5icmVha3BvaW50cylyLmJyZWFrcG9pbnRzLmhhc093blByb3BlcnR5KG8pJiYoci5vcmlnaW5hbFNldHRpbmdzLm1vYmlsZUZpcnN0PT09ITE/bjxyLmJyZWFrcG9pbnRzW29dJiYocz1yLmJyZWFrcG9pbnRzW29dKTpuPnIuYnJlYWtwb2ludHNbb10mJihzPXIuYnJlYWtwb2ludHNbb10pKTtudWxsIT09cz9udWxsIT09ci5hY3RpdmVCcmVha3BvaW50PyhzIT09ci5hY3RpdmVCcmVha3BvaW50fHx0KSYmKHIuYWN0aXZlQnJlYWtwb2ludD1zLFwidW5zbGlja1wiPT09ci5icmVha3BvaW50U2V0dGluZ3Nbc10/ci51bnNsaWNrKHMpOihyLm9wdGlvbnM9aS5leHRlbmQoe30sci5vcmlnaW5hbFNldHRpbmdzLHIuYnJlYWtwb2ludFNldHRpbmdzW3NdKSxlPT09ITAmJihyLmN1cnJlbnRTbGlkZT1yLm9wdGlvbnMuaW5pdGlhbFNsaWRlKSxyLnJlZnJlc2goZSkpLGw9cyk6KHIuYWN0aXZlQnJlYWtwb2ludD1zLFwidW5zbGlja1wiPT09ci5icmVha3BvaW50U2V0dGluZ3Nbc10/ci51bnNsaWNrKHMpOihyLm9wdGlvbnM9aS5leHRlbmQoe30sci5vcmlnaW5hbFNldHRpbmdzLHIuYnJlYWtwb2ludFNldHRpbmdzW3NdKSxlPT09ITAmJihyLmN1cnJlbnRTbGlkZT1yLm9wdGlvbnMuaW5pdGlhbFNsaWRlKSxyLnJlZnJlc2goZSkpLGw9cyk6bnVsbCE9PXIuYWN0aXZlQnJlYWtwb2ludCYmKHIuYWN0aXZlQnJlYWtwb2ludD1udWxsLHIub3B0aW9ucz1yLm9yaWdpbmFsU2V0dGluZ3MsZT09PSEwJiYoci5jdXJyZW50U2xpZGU9ci5vcHRpb25zLmluaXRpYWxTbGlkZSksci5yZWZyZXNoKGUpLGw9cyksZXx8bD09PSExfHxyLiRzbGlkZXIudHJpZ2dlcihcImJyZWFrcG9pbnRcIixbcixsXSl9fSxlLnByb3RvdHlwZS5jaGFuZ2VTbGlkZT1mdW5jdGlvbihlLHQpe3ZhciBvLHMsbixyPXRoaXMsbD1pKGUuY3VycmVudFRhcmdldCk7c3dpdGNoKGwuaXMoXCJhXCIpJiZlLnByZXZlbnREZWZhdWx0KCksbC5pcyhcImxpXCIpfHwobD1sLmNsb3Nlc3QoXCJsaVwiKSksbj1yLnNsaWRlQ291bnQlci5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsIT09MCxvPW4/MDooci5zbGlkZUNvdW50LXIuY3VycmVudFNsaWRlKSVyLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGwsZS5kYXRhLm1lc3NhZ2Upe2Nhc2VcInByZXZpb3VzXCI6cz0wPT09bz9yLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGw6ci5vcHRpb25zLnNsaWRlc1RvU2hvdy1vLHIuc2xpZGVDb3VudD5yLm9wdGlvbnMuc2xpZGVzVG9TaG93JiZyLnNsaWRlSGFuZGxlcihyLmN1cnJlbnRTbGlkZS1zLCExLHQpO2JyZWFrO2Nhc2VcIm5leHRcIjpzPTA9PT1vP3Iub3B0aW9ucy5zbGlkZXNUb1Njcm9sbDpvLHIuc2xpZGVDb3VudD5yLm9wdGlvbnMuc2xpZGVzVG9TaG93JiZyLnNsaWRlSGFuZGxlcihyLmN1cnJlbnRTbGlkZStzLCExLHQpO2JyZWFrO2Nhc2VcImluZGV4XCI6dmFyIGQ9MD09PWUuZGF0YS5pbmRleD8wOmUuZGF0YS5pbmRleHx8bC5pbmRleCgpKnIub3B0aW9ucy5zbGlkZXNUb1Njcm9sbDtyLnNsaWRlSGFuZGxlcihyLmNoZWNrTmF2aWdhYmxlKGQpLCExLHQpLGwuY2hpbGRyZW4oKS50cmlnZ2VyKFwiZm9jdXNcIik7YnJlYWs7ZGVmYXVsdDpyZXR1cm59fSxlLnByb3RvdHlwZS5jaGVja05hdmlnYWJsZT1mdW5jdGlvbihpKXt2YXIgZSx0LG89dGhpcztpZihlPW8uZ2V0TmF2aWdhYmxlSW5kZXhlcygpLHQ9MCxpPmVbZS5sZW5ndGgtMV0paT1lW2UubGVuZ3RoLTFdO2Vsc2UgZm9yKHZhciBzIGluIGUpe2lmKGk8ZVtzXSl7aT10O2JyZWFrfXQ9ZVtzXX1yZXR1cm4gaX0sZS5wcm90b3R5cGUuY2xlYW5VcEV2ZW50cz1mdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5vcHRpb25zLmRvdHMmJm51bGwhPT1lLiRkb3RzJiYoaShcImxpXCIsZS4kZG90cykub2ZmKFwiY2xpY2suc2xpY2tcIixlLmNoYW5nZVNsaWRlKS5vZmYoXCJtb3VzZWVudGVyLnNsaWNrXCIsaS5wcm94eShlLmludGVycnVwdCxlLCEwKSkub2ZmKFwibW91c2VsZWF2ZS5zbGlja1wiLGkucHJveHkoZS5pbnRlcnJ1cHQsZSwhMSkpLGUub3B0aW9ucy5hY2Nlc3NpYmlsaXR5PT09ITAmJmUuJGRvdHMub2ZmKFwia2V5ZG93bi5zbGlja1wiLGUua2V5SGFuZGxlcikpLGUuJHNsaWRlci5vZmYoXCJmb2N1cy5zbGljayBibHVyLnNsaWNrXCIpLGUub3B0aW9ucy5hcnJvd3M9PT0hMCYmZS5zbGlkZUNvdW50PmUub3B0aW9ucy5zbGlkZXNUb1Nob3cmJihlLiRwcmV2QXJyb3cmJmUuJHByZXZBcnJvdy5vZmYoXCJjbGljay5zbGlja1wiLGUuY2hhbmdlU2xpZGUpLGUuJG5leHRBcnJvdyYmZS4kbmV4dEFycm93Lm9mZihcImNsaWNrLnNsaWNrXCIsZS5jaGFuZ2VTbGlkZSksZS5vcHRpb25zLmFjY2Vzc2liaWxpdHk9PT0hMCYmKGUuJHByZXZBcnJvdyYmZS4kcHJldkFycm93Lm9mZihcImtleWRvd24uc2xpY2tcIixlLmtleUhhbmRsZXIpLGUuJG5leHRBcnJvdyYmZS4kbmV4dEFycm93Lm9mZihcImtleWRvd24uc2xpY2tcIixlLmtleUhhbmRsZXIpKSksZS4kbGlzdC5vZmYoXCJ0b3VjaHN0YXJ0LnNsaWNrIG1vdXNlZG93bi5zbGlja1wiLGUuc3dpcGVIYW5kbGVyKSxlLiRsaXN0Lm9mZihcInRvdWNobW92ZS5zbGljayBtb3VzZW1vdmUuc2xpY2tcIixlLnN3aXBlSGFuZGxlciksZS4kbGlzdC5vZmYoXCJ0b3VjaGVuZC5zbGljayBtb3VzZXVwLnNsaWNrXCIsZS5zd2lwZUhhbmRsZXIpLGUuJGxpc3Qub2ZmKFwidG91Y2hjYW5jZWwuc2xpY2sgbW91c2VsZWF2ZS5zbGlja1wiLGUuc3dpcGVIYW5kbGVyKSxlLiRsaXN0Lm9mZihcImNsaWNrLnNsaWNrXCIsZS5jbGlja0hhbmRsZXIpLGkoZG9jdW1lbnQpLm9mZihlLnZpc2liaWxpdHlDaGFuZ2UsZS52aXNpYmlsaXR5KSxlLmNsZWFuVXBTbGlkZUV2ZW50cygpLGUub3B0aW9ucy5hY2Nlc3NpYmlsaXR5PT09ITAmJmUuJGxpc3Qub2ZmKFwia2V5ZG93bi5zbGlja1wiLGUua2V5SGFuZGxlciksZS5vcHRpb25zLmZvY3VzT25TZWxlY3Q9PT0hMCYmaShlLiRzbGlkZVRyYWNrKS5jaGlsZHJlbigpLm9mZihcImNsaWNrLnNsaWNrXCIsZS5zZWxlY3RIYW5kbGVyKSxpKHdpbmRvdykub2ZmKFwib3JpZW50YXRpb25jaGFuZ2Uuc2xpY2suc2xpY2stXCIrZS5pbnN0YW5jZVVpZCxlLm9yaWVudGF0aW9uQ2hhbmdlKSxpKHdpbmRvdykub2ZmKFwicmVzaXplLnNsaWNrLnNsaWNrLVwiK2UuaW5zdGFuY2VVaWQsZS5yZXNpemUpLGkoXCJbZHJhZ2dhYmxlIT10cnVlXVwiLGUuJHNsaWRlVHJhY2spLm9mZihcImRyYWdzdGFydFwiLGUucHJldmVudERlZmF1bHQpLGkod2luZG93KS5vZmYoXCJsb2FkLnNsaWNrLnNsaWNrLVwiK2UuaW5zdGFuY2VVaWQsZS5zZXRQb3NpdGlvbil9LGUucHJvdG90eXBlLmNsZWFuVXBTbGlkZUV2ZW50cz1mdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS4kbGlzdC5vZmYoXCJtb3VzZWVudGVyLnNsaWNrXCIsaS5wcm94eShlLmludGVycnVwdCxlLCEwKSksZS4kbGlzdC5vZmYoXCJtb3VzZWxlYXZlLnNsaWNrXCIsaS5wcm94eShlLmludGVycnVwdCxlLCExKSl9LGUucHJvdG90eXBlLmNsZWFuVXBSb3dzPWZ1bmN0aW9uKCl7dmFyIGksZT10aGlzO2Uub3B0aW9ucy5yb3dzPjAmJihpPWUuJHNsaWRlcy5jaGlsZHJlbigpLmNoaWxkcmVuKCksaS5yZW1vdmVBdHRyKFwic3R5bGVcIiksZS4kc2xpZGVyLmVtcHR5KCkuYXBwZW5kKGkpKX0sZS5wcm90b3R5cGUuY2xpY2tIYW5kbGVyPWZ1bmN0aW9uKGkpe3ZhciBlPXRoaXM7ZS5zaG91bGRDbGljaz09PSExJiYoaS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSxpLnN0b3BQcm9wYWdhdGlvbigpLGkucHJldmVudERlZmF1bHQoKSl9LGUucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0LmF1dG9QbGF5Q2xlYXIoKSx0LnRvdWNoT2JqZWN0PXt9LHQuY2xlYW5VcEV2ZW50cygpLGkoXCIuc2xpY2stY2xvbmVkXCIsdC4kc2xpZGVyKS5kZXRhY2goKSx0LiRkb3RzJiZ0LiRkb3RzLnJlbW92ZSgpLHQuJHByZXZBcnJvdyYmdC4kcHJldkFycm93Lmxlbmd0aCYmKHQuJHByZXZBcnJvdy5yZW1vdmVDbGFzcyhcInNsaWNrLWRpc2FibGVkIHNsaWNrLWFycm93IHNsaWNrLWhpZGRlblwiKS5yZW1vdmVBdHRyKFwiYXJpYS1oaWRkZW4gYXJpYS1kaXNhYmxlZCB0YWJpbmRleFwiKS5jc3MoXCJkaXNwbGF5XCIsXCJcIiksdC5odG1sRXhwci50ZXN0KHQub3B0aW9ucy5wcmV2QXJyb3cpJiZ0LiRwcmV2QXJyb3cucmVtb3ZlKCkpLHQuJG5leHRBcnJvdyYmdC4kbmV4dEFycm93Lmxlbmd0aCYmKHQuJG5leHRBcnJvdy5yZW1vdmVDbGFzcyhcInNsaWNrLWRpc2FibGVkIHNsaWNrLWFycm93IHNsaWNrLWhpZGRlblwiKS5yZW1vdmVBdHRyKFwiYXJpYS1oaWRkZW4gYXJpYS1kaXNhYmxlZCB0YWJpbmRleFwiKS5jc3MoXCJkaXNwbGF5XCIsXCJcIiksdC5odG1sRXhwci50ZXN0KHQub3B0aW9ucy5uZXh0QXJyb3cpJiZ0LiRuZXh0QXJyb3cucmVtb3ZlKCkpLHQuJHNsaWRlcyYmKHQuJHNsaWRlcy5yZW1vdmVDbGFzcyhcInNsaWNrLXNsaWRlIHNsaWNrLWFjdGl2ZSBzbGljay1jZW50ZXIgc2xpY2stdmlzaWJsZSBzbGljay1jdXJyZW50XCIpLnJlbW92ZUF0dHIoXCJhcmlhLWhpZGRlblwiKS5yZW1vdmVBdHRyKFwiZGF0YS1zbGljay1pbmRleFwiKS5lYWNoKGZ1bmN0aW9uKCl7aSh0aGlzKS5hdHRyKFwic3R5bGVcIixpKHRoaXMpLmRhdGEoXCJvcmlnaW5hbFN0eWxpbmdcIikpfSksdC4kc2xpZGVUcmFjay5jaGlsZHJlbih0aGlzLm9wdGlvbnMuc2xpZGUpLmRldGFjaCgpLHQuJHNsaWRlVHJhY2suZGV0YWNoKCksdC4kbGlzdC5kZXRhY2goKSx0LiRzbGlkZXIuYXBwZW5kKHQuJHNsaWRlcykpLHQuY2xlYW5VcFJvd3MoKSx0LiRzbGlkZXIucmVtb3ZlQ2xhc3MoXCJzbGljay1zbGlkZXJcIiksdC4kc2xpZGVyLnJlbW92ZUNsYXNzKFwic2xpY2staW5pdGlhbGl6ZWRcIiksdC4kc2xpZGVyLnJlbW92ZUNsYXNzKFwic2xpY2stZG90dGVkXCIpLHQudW5zbGlja2VkPSEwLGV8fHQuJHNsaWRlci50cmlnZ2VyKFwiZGVzdHJveVwiLFt0XSl9LGUucHJvdG90eXBlLmRpc2FibGVUcmFuc2l0aW9uPWZ1bmN0aW9uKGkpe3ZhciBlPXRoaXMsdD17fTt0W2UudHJhbnNpdGlvblR5cGVdPVwiXCIsZS5vcHRpb25zLmZhZGU9PT0hMT9lLiRzbGlkZVRyYWNrLmNzcyh0KTplLiRzbGlkZXMuZXEoaSkuY3NzKHQpfSxlLnByb3RvdHlwZS5mYWRlU2xpZGU9ZnVuY3Rpb24oaSxlKXt2YXIgdD10aGlzO3QuY3NzVHJhbnNpdGlvbnM9PT0hMT8odC4kc2xpZGVzLmVxKGkpLmNzcyh7ekluZGV4OnQub3B0aW9ucy56SW5kZXh9KSx0LiRzbGlkZXMuZXEoaSkuYW5pbWF0ZSh7b3BhY2l0eToxfSx0Lm9wdGlvbnMuc3BlZWQsdC5vcHRpb25zLmVhc2luZyxlKSk6KHQuYXBwbHlUcmFuc2l0aW9uKGkpLHQuJHNsaWRlcy5lcShpKS5jc3Moe29wYWNpdHk6MSx6SW5kZXg6dC5vcHRpb25zLnpJbmRleH0pLGUmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0LmRpc2FibGVUcmFuc2l0aW9uKGkpLGUuY2FsbCgpfSx0Lm9wdGlvbnMuc3BlZWQpKX0sZS5wcm90b3R5cGUuZmFkZVNsaWRlT3V0PWZ1bmN0aW9uKGkpe3ZhciBlPXRoaXM7ZS5jc3NUcmFuc2l0aW9ucz09PSExP2UuJHNsaWRlcy5lcShpKS5hbmltYXRlKHtvcGFjaXR5OjAsekluZGV4OmUub3B0aW9ucy56SW5kZXgtMn0sZS5vcHRpb25zLnNwZWVkLGUub3B0aW9ucy5lYXNpbmcpOihlLmFwcGx5VHJhbnNpdGlvbihpKSxlLiRzbGlkZXMuZXEoaSkuY3NzKHtvcGFjaXR5OjAsekluZGV4OmUub3B0aW9ucy56SW5kZXgtMn0pKX0sZS5wcm90b3R5cGUuZmlsdGVyU2xpZGVzPWUucHJvdG90eXBlLnNsaWNrRmlsdGVyPWZ1bmN0aW9uKGkpe3ZhciBlPXRoaXM7bnVsbCE9PWkmJihlLiRzbGlkZXNDYWNoZT1lLiRzbGlkZXMsZS51bmxvYWQoKSxlLiRzbGlkZVRyYWNrLmNoaWxkcmVuKHRoaXMub3B0aW9ucy5zbGlkZSkuZGV0YWNoKCksZS4kc2xpZGVzQ2FjaGUuZmlsdGVyKGkpLmFwcGVuZFRvKGUuJHNsaWRlVHJhY2spLGUucmVpbml0KCkpfSxlLnByb3RvdHlwZS5mb2N1c0hhbmRsZXI9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuJHNsaWRlci5vZmYoXCJmb2N1cy5zbGljayBibHVyLnNsaWNrXCIpLm9uKFwiZm9jdXMuc2xpY2tcIixcIipcIixmdW5jdGlvbih0KXt2YXIgbz1pKHRoaXMpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtlLm9wdGlvbnMucGF1c2VPbkZvY3VzJiZvLmlzKFwiOmZvY3VzXCIpJiYoZS5mb2N1c3NlZD0hMCxlLmF1dG9QbGF5KCkpfSwwKX0pLm9uKFwiYmx1ci5zbGlja1wiLFwiKlwiLGZ1bmN0aW9uKHQpe2kodGhpcyk7ZS5vcHRpb25zLnBhdXNlT25Gb2N1cyYmKGUuZm9jdXNzZWQ9ITEsZS5hdXRvUGxheSgpKX0pfSxlLnByb3RvdHlwZS5nZXRDdXJyZW50PWUucHJvdG90eXBlLnNsaWNrQ3VycmVudFNsaWRlPWZ1bmN0aW9uKCl7dmFyIGk9dGhpcztyZXR1cm4gaS5jdXJyZW50U2xpZGV9LGUucHJvdG90eXBlLmdldERvdENvdW50PWZ1bmN0aW9uKCl7dmFyIGk9dGhpcyxlPTAsdD0wLG89MDtpZihpLm9wdGlvbnMuaW5maW5pdGU9PT0hMClpZihpLnNsaWRlQ291bnQ8PWkub3B0aW9ucy5zbGlkZXNUb1Nob3cpKytvO2Vsc2UgZm9yKDtlPGkuc2xpZGVDb3VudDspKytvLGU9dCtpLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGwsdCs9aS5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsPD1pLm9wdGlvbnMuc2xpZGVzVG9TaG93P2kub3B0aW9ucy5zbGlkZXNUb1Njcm9sbDppLm9wdGlvbnMuc2xpZGVzVG9TaG93O2Vsc2UgaWYoaS5vcHRpb25zLmNlbnRlck1vZGU9PT0hMClvPWkuc2xpZGVDb3VudDtlbHNlIGlmKGkub3B0aW9ucy5hc05hdkZvcilmb3IoO2U8aS5zbGlkZUNvdW50OykrK28sZT10K2kub3B0aW9ucy5zbGlkZXNUb1Njcm9sbCx0Kz1pLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGw8PWkub3B0aW9ucy5zbGlkZXNUb1Nob3c/aS5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsOmkub3B0aW9ucy5zbGlkZXNUb1Nob3c7ZWxzZSBvPTErTWF0aC5jZWlsKChpLnNsaWRlQ291bnQtaS5vcHRpb25zLnNsaWRlc1RvU2hvdykvaS5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsKTtyZXR1cm4gby0xfSxlLnByb3RvdHlwZS5nZXRMZWZ0PWZ1bmN0aW9uKGkpe3ZhciBlLHQsbyxzLG49dGhpcyxyPTA7cmV0dXJuIG4uc2xpZGVPZmZzZXQ9MCx0PW4uJHNsaWRlcy5maXJzdCgpLm91dGVySGVpZ2h0KCEwKSxuLm9wdGlvbnMuaW5maW5pdGU9PT0hMD8obi5zbGlkZUNvdW50Pm4ub3B0aW9ucy5zbGlkZXNUb1Nob3cmJihuLnNsaWRlT2Zmc2V0PW4uc2xpZGVXaWR0aCpuLm9wdGlvbnMuc2xpZGVzVG9TaG93Ki0xLHM9LTEsbi5vcHRpb25zLnZlcnRpY2FsPT09ITAmJm4ub3B0aW9ucy5jZW50ZXJNb2RlPT09ITAmJigyPT09bi5vcHRpb25zLnNsaWRlc1RvU2hvdz9zPS0xLjU6MT09PW4ub3B0aW9ucy5zbGlkZXNUb1Nob3cmJihzPS0yKSkscj10Km4ub3B0aW9ucy5zbGlkZXNUb1Nob3cqcyksbi5zbGlkZUNvdW50JW4ub3B0aW9ucy5zbGlkZXNUb1Njcm9sbCE9PTAmJmkrbi5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsPm4uc2xpZGVDb3VudCYmbi5zbGlkZUNvdW50Pm4ub3B0aW9ucy5zbGlkZXNUb1Nob3cmJihpPm4uc2xpZGVDb3VudD8obi5zbGlkZU9mZnNldD0obi5vcHRpb25zLnNsaWRlc1RvU2hvdy0oaS1uLnNsaWRlQ291bnQpKSpuLnNsaWRlV2lkdGgqLTEscj0obi5vcHRpb25zLnNsaWRlc1RvU2hvdy0oaS1uLnNsaWRlQ291bnQpKSp0Ki0xKToobi5zbGlkZU9mZnNldD1uLnNsaWRlQ291bnQlbi5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsKm4uc2xpZGVXaWR0aCotMSxyPW4uc2xpZGVDb3VudCVuLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGwqdCotMSkpKTppK24ub3B0aW9ucy5zbGlkZXNUb1Nob3c+bi5zbGlkZUNvdW50JiYobi5zbGlkZU9mZnNldD0oaStuLm9wdGlvbnMuc2xpZGVzVG9TaG93LW4uc2xpZGVDb3VudCkqbi5zbGlkZVdpZHRoLHI9KGkrbi5vcHRpb25zLnNsaWRlc1RvU2hvdy1uLnNsaWRlQ291bnQpKnQpLG4uc2xpZGVDb3VudDw9bi5vcHRpb25zLnNsaWRlc1RvU2hvdyYmKG4uc2xpZGVPZmZzZXQ9MCxyPTApLG4ub3B0aW9ucy5jZW50ZXJNb2RlPT09ITAmJm4uc2xpZGVDb3VudDw9bi5vcHRpb25zLnNsaWRlc1RvU2hvdz9uLnNsaWRlT2Zmc2V0PW4uc2xpZGVXaWR0aCpNYXRoLmZsb29yKG4ub3B0aW9ucy5zbGlkZXNUb1Nob3cpLzItbi5zbGlkZVdpZHRoKm4uc2xpZGVDb3VudC8yOm4ub3B0aW9ucy5jZW50ZXJNb2RlPT09ITAmJm4ub3B0aW9ucy5pbmZpbml0ZT09PSEwP24uc2xpZGVPZmZzZXQrPW4uc2xpZGVXaWR0aCpNYXRoLmZsb29yKG4ub3B0aW9ucy5zbGlkZXNUb1Nob3cvMiktbi5zbGlkZVdpZHRoOm4ub3B0aW9ucy5jZW50ZXJNb2RlPT09ITAmJihuLnNsaWRlT2Zmc2V0PTAsbi5zbGlkZU9mZnNldCs9bi5zbGlkZVdpZHRoKk1hdGguZmxvb3Iobi5vcHRpb25zLnNsaWRlc1RvU2hvdy8yKSksZT1uLm9wdGlvbnMudmVydGljYWw9PT0hMT9pKm4uc2xpZGVXaWR0aCotMStuLnNsaWRlT2Zmc2V0OmkqdCotMStyLG4ub3B0aW9ucy52YXJpYWJsZVdpZHRoPT09ITAmJihvPW4uc2xpZGVDb3VudDw9bi5vcHRpb25zLnNsaWRlc1RvU2hvd3x8bi5vcHRpb25zLmluZmluaXRlPT09ITE/bi4kc2xpZGVUcmFjay5jaGlsZHJlbihcIi5zbGljay1zbGlkZVwiKS5lcShpKTpuLiRzbGlkZVRyYWNrLmNoaWxkcmVuKFwiLnNsaWNrLXNsaWRlXCIpLmVxKGkrbi5vcHRpb25zLnNsaWRlc1RvU2hvdyksZT1uLm9wdGlvbnMucnRsPT09ITA/b1swXT8obi4kc2xpZGVUcmFjay53aWR0aCgpLW9bMF0ub2Zmc2V0TGVmdC1vLndpZHRoKCkpKi0xOjA6b1swXT9vWzBdLm9mZnNldExlZnQqLTE6MCxuLm9wdGlvbnMuY2VudGVyTW9kZT09PSEwJiYobz1uLnNsaWRlQ291bnQ8PW4ub3B0aW9ucy5zbGlkZXNUb1Nob3d8fG4ub3B0aW9ucy5pbmZpbml0ZT09PSExP24uJHNsaWRlVHJhY2suY2hpbGRyZW4oXCIuc2xpY2stc2xpZGVcIikuZXEoaSk6bi4kc2xpZGVUcmFjay5jaGlsZHJlbihcIi5zbGljay1zbGlkZVwiKS5lcShpK24ub3B0aW9ucy5zbGlkZXNUb1Nob3crMSksZT1uLm9wdGlvbnMucnRsPT09ITA/b1swXT8obi4kc2xpZGVUcmFjay53aWR0aCgpLW9bMF0ub2Zmc2V0TGVmdC1vLndpZHRoKCkpKi0xOjA6b1swXT9vWzBdLm9mZnNldExlZnQqLTE6MCxlKz0obi4kbGlzdC53aWR0aCgpLW8ub3V0ZXJXaWR0aCgpKS8yKSksZX0sZS5wcm90b3R5cGUuZ2V0T3B0aW9uPWUucHJvdG90eXBlLnNsaWNrR2V0T3B0aW9uPWZ1bmN0aW9uKGkpe3ZhciBlPXRoaXM7cmV0dXJuIGUub3B0aW9uc1tpXX0sZS5wcm90b3R5cGUuZ2V0TmF2aWdhYmxlSW5kZXhlcz1mdW5jdGlvbigpe3ZhciBpLGU9dGhpcyx0PTAsbz0wLHM9W107Zm9yKGUub3B0aW9ucy5pbmZpbml0ZT09PSExP2k9ZS5zbGlkZUNvdW50Oih0PWUub3B0aW9ucy5zbGlkZXNUb1Njcm9sbCotMSxvPWUub3B0aW9ucy5zbGlkZXNUb1Njcm9sbCotMSxpPTIqZS5zbGlkZUNvdW50KTt0PGk7KXMucHVzaCh0KSx0PW8rZS5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsLG8rPWUub3B0aW9ucy5zbGlkZXNUb1Njcm9sbDw9ZS5vcHRpb25zLnNsaWRlc1RvU2hvdz9lLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGw6ZS5vcHRpb25zLnNsaWRlc1RvU2hvdztyZXR1cm4gc30sZS5wcm90b3R5cGUuZ2V0U2xpY2s9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sZS5wcm90b3R5cGUuZ2V0U2xpZGVDb3VudD1mdW5jdGlvbigpe3ZhciBlLHQsbyxzLG49dGhpcztyZXR1cm4gcz1uLm9wdGlvbnMuY2VudGVyTW9kZT09PSEwP01hdGguZmxvb3Iobi4kbGlzdC53aWR0aCgpLzIpOjAsbz1uLnN3aXBlTGVmdCotMStzLG4ub3B0aW9ucy5zd2lwZVRvU2xpZGU9PT0hMD8obi4kc2xpZGVUcmFjay5maW5kKFwiLnNsaWNrLXNsaWRlXCIpLmVhY2goZnVuY3Rpb24oZSxzKXt2YXIgcixsLGQ7aWYocj1pKHMpLm91dGVyV2lkdGgoKSxsPXMub2Zmc2V0TGVmdCxuLm9wdGlvbnMuY2VudGVyTW9kZSE9PSEwJiYobCs9ci8yKSxkPWwrcixvPGQpcmV0dXJuIHQ9cywhMX0pLGU9TWF0aC5hYnMoaSh0KS5hdHRyKFwiZGF0YS1zbGljay1pbmRleFwiKS1uLmN1cnJlbnRTbGlkZSl8fDEpOm4ub3B0aW9ucy5zbGlkZXNUb1Njcm9sbH0sZS5wcm90b3R5cGUuZ29Ubz1lLnByb3RvdHlwZS5zbGlja0dvVG89ZnVuY3Rpb24oaSxlKXt2YXIgdD10aGlzO3QuY2hhbmdlU2xpZGUoe2RhdGE6e21lc3NhZ2U6XCJpbmRleFwiLGluZGV4OnBhcnNlSW50KGkpfX0sZSl9LGUucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpKHQuJHNsaWRlcikuaGFzQ2xhc3MoXCJzbGljay1pbml0aWFsaXplZFwiKXx8KGkodC4kc2xpZGVyKS5hZGRDbGFzcyhcInNsaWNrLWluaXRpYWxpemVkXCIpLHQuYnVpbGRSb3dzKCksdC5idWlsZE91dCgpLHQuc2V0UHJvcHMoKSx0LnN0YXJ0TG9hZCgpLHQubG9hZFNsaWRlcigpLHQuaW5pdGlhbGl6ZUV2ZW50cygpLHQudXBkYXRlQXJyb3dzKCksdC51cGRhdGVEb3RzKCksdC5jaGVja1Jlc3BvbnNpdmUoITApLHQuZm9jdXNIYW5kbGVyKCkpLGUmJnQuJHNsaWRlci50cmlnZ2VyKFwiaW5pdFwiLFt0XSksdC5vcHRpb25zLmFjY2Vzc2liaWxpdHk9PT0hMCYmdC5pbml0QURBKCksdC5vcHRpb25zLmF1dG9wbGF5JiYodC5wYXVzZWQ9ITEsdC5hdXRvUGxheSgpKX0sZS5wcm90b3R5cGUuaW5pdEFEQT1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1NYXRoLmNlaWwoZS5zbGlkZUNvdW50L2Uub3B0aW9ucy5zbGlkZXNUb1Nob3cpLG89ZS5nZXROYXZpZ2FibGVJbmRleGVzKCkuZmlsdGVyKGZ1bmN0aW9uKGkpe3JldHVybiBpPj0wJiZpPGUuc2xpZGVDb3VudH0pO2UuJHNsaWRlcy5hZGQoZS4kc2xpZGVUcmFjay5maW5kKFwiLnNsaWNrLWNsb25lZFwiKSkuYXR0cih7XCJhcmlhLWhpZGRlblwiOlwidHJ1ZVwiLHRhYmluZGV4OlwiLTFcIn0pLmZpbmQoXCJhLCBpbnB1dCwgYnV0dG9uLCBzZWxlY3RcIikuYXR0cih7dGFiaW5kZXg6XCItMVwifSksbnVsbCE9PWUuJGRvdHMmJihlLiRzbGlkZXMubm90KGUuJHNsaWRlVHJhY2suZmluZChcIi5zbGljay1jbG9uZWRcIikpLmVhY2goZnVuY3Rpb24odCl7dmFyIHM9by5pbmRleE9mKHQpO2lmKGkodGhpcykuYXR0cih7cm9sZTpcInRhYnBhbmVsXCIsaWQ6XCJzbGljay1zbGlkZVwiK2UuaW5zdGFuY2VVaWQrdCx0YWJpbmRleDotMX0pLHMhPT0tMSl7dmFyIG49XCJzbGljay1zbGlkZS1jb250cm9sXCIrZS5pbnN0YW5jZVVpZCtzO2koXCIjXCIrbikubGVuZ3RoJiZpKHRoaXMpLmF0dHIoe1wiYXJpYS1kZXNjcmliZWRieVwiOm59KX19KSxlLiRkb3RzLmF0dHIoXCJyb2xlXCIsXCJ0YWJsaXN0XCIpLmZpbmQoXCJsaVwiKS5lYWNoKGZ1bmN0aW9uKHMpe3ZhciBuPW9bc107aSh0aGlzKS5hdHRyKHtyb2xlOlwicHJlc2VudGF0aW9uXCJ9KSxpKHRoaXMpLmZpbmQoXCJidXR0b25cIikuZmlyc3QoKS5hdHRyKHtyb2xlOlwidGFiXCIsaWQ6XCJzbGljay1zbGlkZS1jb250cm9sXCIrZS5pbnN0YW5jZVVpZCtzLFwiYXJpYS1jb250cm9sc1wiOlwic2xpY2stc2xpZGVcIitlLmluc3RhbmNlVWlkK24sXCJhcmlhLWxhYmVsXCI6cysxK1wiIG9mIFwiK3QsXCJhcmlhLXNlbGVjdGVkXCI6bnVsbCx0YWJpbmRleDpcIi0xXCJ9KX0pLmVxKGUuY3VycmVudFNsaWRlKS5maW5kKFwiYnV0dG9uXCIpLmF0dHIoe1wiYXJpYS1zZWxlY3RlZFwiOlwidHJ1ZVwiLHRhYmluZGV4OlwiMFwifSkuZW5kKCkpO2Zvcih2YXIgcz1lLmN1cnJlbnRTbGlkZSxuPXMrZS5vcHRpb25zLnNsaWRlc1RvU2hvdztzPG47cysrKWUub3B0aW9ucy5mb2N1c09uQ2hhbmdlP2UuJHNsaWRlcy5lcShzKS5hdHRyKHt0YWJpbmRleDpcIjBcIn0pOmUuJHNsaWRlcy5lcShzKS5yZW1vdmVBdHRyKFwidGFiaW5kZXhcIik7ZS5hY3RpdmF0ZUFEQSgpfSxlLnByb3RvdHlwZS5pbml0QXJyb3dFdmVudHM9ZnVuY3Rpb24oKXt2YXIgaT10aGlzO2kub3B0aW9ucy5hcnJvd3M9PT0hMCYmaS5zbGlkZUNvdW50Pmkub3B0aW9ucy5zbGlkZXNUb1Nob3cmJihpLiRwcmV2QXJyb3cub2ZmKFwiY2xpY2suc2xpY2tcIikub24oXCJjbGljay5zbGlja1wiLHttZXNzYWdlOlwicHJldmlvdXNcIn0saS5jaGFuZ2VTbGlkZSksaS4kbmV4dEFycm93Lm9mZihcImNsaWNrLnNsaWNrXCIpLm9uKFwiY2xpY2suc2xpY2tcIix7bWVzc2FnZTpcIm5leHRcIn0saS5jaGFuZ2VTbGlkZSksaS5vcHRpb25zLmFjY2Vzc2liaWxpdHk9PT0hMCYmKGkuJHByZXZBcnJvdy5vbihcImtleWRvd24uc2xpY2tcIixpLmtleUhhbmRsZXIpLGkuJG5leHRBcnJvdy5vbihcImtleWRvd24uc2xpY2tcIixpLmtleUhhbmRsZXIpKSl9LGUucHJvdG90eXBlLmluaXREb3RFdmVudHM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2Uub3B0aW9ucy5kb3RzPT09ITAmJmUuc2xpZGVDb3VudD5lLm9wdGlvbnMuc2xpZGVzVG9TaG93JiYoaShcImxpXCIsZS4kZG90cykub24oXCJjbGljay5zbGlja1wiLHttZXNzYWdlOlwiaW5kZXhcIn0sZS5jaGFuZ2VTbGlkZSksZS5vcHRpb25zLmFjY2Vzc2liaWxpdHk9PT0hMCYmZS4kZG90cy5vbihcImtleWRvd24uc2xpY2tcIixlLmtleUhhbmRsZXIpKSxlLm9wdGlvbnMuZG90cz09PSEwJiZlLm9wdGlvbnMucGF1c2VPbkRvdHNIb3Zlcj09PSEwJiZlLnNsaWRlQ291bnQ+ZS5vcHRpb25zLnNsaWRlc1RvU2hvdyYmaShcImxpXCIsZS4kZG90cykub24oXCJtb3VzZWVudGVyLnNsaWNrXCIsaS5wcm94eShlLmludGVycnVwdCxlLCEwKSkub24oXCJtb3VzZWxlYXZlLnNsaWNrXCIsaS5wcm94eShlLmludGVycnVwdCxlLCExKSl9LGUucHJvdG90eXBlLmluaXRTbGlkZUV2ZW50cz1mdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5vcHRpb25zLnBhdXNlT25Ib3ZlciYmKGUuJGxpc3Qub24oXCJtb3VzZWVudGVyLnNsaWNrXCIsaS5wcm94eShlLmludGVycnVwdCxlLCEwKSksZS4kbGlzdC5vbihcIm1vdXNlbGVhdmUuc2xpY2tcIixpLnByb3h5KGUuaW50ZXJydXB0LGUsITEpKSl9LGUucHJvdG90eXBlLmluaXRpYWxpemVFdmVudHM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuaW5pdEFycm93RXZlbnRzKCksZS5pbml0RG90RXZlbnRzKCksZS5pbml0U2xpZGVFdmVudHMoKSxlLiRsaXN0Lm9uKFwidG91Y2hzdGFydC5zbGljayBtb3VzZWRvd24uc2xpY2tcIix7YWN0aW9uOlwic3RhcnRcIn0sZS5zd2lwZUhhbmRsZXIpLGUuJGxpc3Qub24oXCJ0b3VjaG1vdmUuc2xpY2sgbW91c2Vtb3ZlLnNsaWNrXCIse2FjdGlvbjpcIm1vdmVcIn0sZS5zd2lwZUhhbmRsZXIpLGUuJGxpc3Qub24oXCJ0b3VjaGVuZC5zbGljayBtb3VzZXVwLnNsaWNrXCIse2FjdGlvbjpcImVuZFwifSxlLnN3aXBlSGFuZGxlciksZS4kbGlzdC5vbihcInRvdWNoY2FuY2VsLnNsaWNrIG1vdXNlbGVhdmUuc2xpY2tcIix7YWN0aW9uOlwiZW5kXCJ9LGUuc3dpcGVIYW5kbGVyKSxlLiRsaXN0Lm9uKFwiY2xpY2suc2xpY2tcIixlLmNsaWNrSGFuZGxlciksaShkb2N1bWVudCkub24oZS52aXNpYmlsaXR5Q2hhbmdlLGkucHJveHkoZS52aXNpYmlsaXR5LGUpKSxlLm9wdGlvbnMuYWNjZXNzaWJpbGl0eT09PSEwJiZlLiRsaXN0Lm9uKFwia2V5ZG93bi5zbGlja1wiLGUua2V5SGFuZGxlciksZS5vcHRpb25zLmZvY3VzT25TZWxlY3Q9PT0hMCYmaShlLiRzbGlkZVRyYWNrKS5jaGlsZHJlbigpLm9uKFwiY2xpY2suc2xpY2tcIixlLnNlbGVjdEhhbmRsZXIpLGkod2luZG93KS5vbihcIm9yaWVudGF0aW9uY2hhbmdlLnNsaWNrLnNsaWNrLVwiK2UuaW5zdGFuY2VVaWQsaS5wcm94eShlLm9yaWVudGF0aW9uQ2hhbmdlLGUpKSxpKHdpbmRvdykub24oXCJyZXNpemUuc2xpY2suc2xpY2stXCIrZS5pbnN0YW5jZVVpZCxpLnByb3h5KGUucmVzaXplLGUpKSxpKFwiW2RyYWdnYWJsZSE9dHJ1ZV1cIixlLiRzbGlkZVRyYWNrKS5vbihcImRyYWdzdGFydFwiLGUucHJldmVudERlZmF1bHQpLGkod2luZG93KS5vbihcImxvYWQuc2xpY2suc2xpY2stXCIrZS5pbnN0YW5jZVVpZCxlLnNldFBvc2l0aW9uKSxpKGUuc2V0UG9zaXRpb24pfSxlLnByb3RvdHlwZS5pbml0VUk9ZnVuY3Rpb24oKXt2YXIgaT10aGlzO2kub3B0aW9ucy5hcnJvd3M9PT0hMCYmaS5zbGlkZUNvdW50Pmkub3B0aW9ucy5zbGlkZXNUb1Nob3cmJihpLiRwcmV2QXJyb3cuc2hvdygpLGkuJG5leHRBcnJvdy5zaG93KCkpLGkub3B0aW9ucy5kb3RzPT09ITAmJmkuc2xpZGVDb3VudD5pLm9wdGlvbnMuc2xpZGVzVG9TaG93JiZpLiRkb3RzLnNob3coKX0sZS5wcm90b3R5cGUua2V5SGFuZGxlcj1mdW5jdGlvbihpKXt2YXIgZT10aGlzO2kudGFyZ2V0LnRhZ05hbWUubWF0Y2goXCJURVhUQVJFQXxJTlBVVHxTRUxFQ1RcIil8fCgzNz09PWkua2V5Q29kZSYmZS5vcHRpb25zLmFjY2Vzc2liaWxpdHk9PT0hMD9lLmNoYW5nZVNsaWRlKHtkYXRhOnttZXNzYWdlOmUub3B0aW9ucy5ydGw9PT0hMD9cIm5leHRcIjpcInByZXZpb3VzXCJ9fSk6Mzk9PT1pLmtleUNvZGUmJmUub3B0aW9ucy5hY2Nlc3NpYmlsaXR5PT09ITAmJmUuY2hhbmdlU2xpZGUoe2RhdGE6e21lc3NhZ2U6ZS5vcHRpb25zLnJ0bD09PSEwP1wicHJldmlvdXNcIjpcIm5leHRcIn19KSl9LGUucHJvdG90eXBlLmxhenlMb2FkPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtpKFwiaW1nW2RhdGEtbGF6eV1cIixlKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGU9aSh0aGlzKSx0PWkodGhpcykuYXR0cihcImRhdGEtbGF6eVwiKSxvPWkodGhpcykuYXR0cihcImRhdGEtc3Jjc2V0XCIpLHM9aSh0aGlzKS5hdHRyKFwiZGF0YS1zaXplc1wiKXx8ci4kc2xpZGVyLmF0dHIoXCJkYXRhLXNpemVzXCIpLG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtuLm9ubG9hZD1mdW5jdGlvbigpe2UuYW5pbWF0ZSh7b3BhY2l0eTowfSwxMDAsZnVuY3Rpb24oKXtvJiYoZS5hdHRyKFwic3Jjc2V0XCIsbykscyYmZS5hdHRyKFwic2l6ZXNcIixzKSksZS5hdHRyKFwic3JjXCIsdCkuYW5pbWF0ZSh7b3BhY2l0eToxfSwyMDAsZnVuY3Rpb24oKXtlLnJlbW92ZUF0dHIoXCJkYXRhLWxhenkgZGF0YS1zcmNzZXQgZGF0YS1zaXplc1wiKS5yZW1vdmVDbGFzcyhcInNsaWNrLWxvYWRpbmdcIil9KSxyLiRzbGlkZXIudHJpZ2dlcihcImxhenlMb2FkZWRcIixbcixlLHRdKX0pfSxuLm9uZXJyb3I9ZnVuY3Rpb24oKXtlLnJlbW92ZUF0dHIoXCJkYXRhLWxhenlcIikucmVtb3ZlQ2xhc3MoXCJzbGljay1sb2FkaW5nXCIpLmFkZENsYXNzKFwic2xpY2stbGF6eWxvYWQtZXJyb3JcIiksci4kc2xpZGVyLnRyaWdnZXIoXCJsYXp5TG9hZEVycm9yXCIsW3IsZSx0XSl9LG4uc3JjPXR9KX12YXIgdCxvLHMsbixyPXRoaXM7aWYoci5vcHRpb25zLmNlbnRlck1vZGU9PT0hMD9yLm9wdGlvbnMuaW5maW5pdGU9PT0hMD8ocz1yLmN1cnJlbnRTbGlkZSsoci5vcHRpb25zLnNsaWRlc1RvU2hvdy8yKzEpLG49cytyLm9wdGlvbnMuc2xpZGVzVG9TaG93KzIpOihzPU1hdGgubWF4KDAsci5jdXJyZW50U2xpZGUtKHIub3B0aW9ucy5zbGlkZXNUb1Nob3cvMisxKSksbj0yKyhyLm9wdGlvbnMuc2xpZGVzVG9TaG93LzIrMSkrci5jdXJyZW50U2xpZGUpOihzPXIub3B0aW9ucy5pbmZpbml0ZT9yLm9wdGlvbnMuc2xpZGVzVG9TaG93K3IuY3VycmVudFNsaWRlOnIuY3VycmVudFNsaWRlLG49TWF0aC5jZWlsKHMrci5vcHRpb25zLnNsaWRlc1RvU2hvdyksci5vcHRpb25zLmZhZGU9PT0hMCYmKHM+MCYmcy0tLG48PXIuc2xpZGVDb3VudCYmbisrKSksdD1yLiRzbGlkZXIuZmluZChcIi5zbGljay1zbGlkZVwiKS5zbGljZShzLG4pLFwiYW50aWNpcGF0ZWRcIj09PXIub3B0aW9ucy5sYXp5TG9hZClmb3IodmFyIGw9cy0xLGQ9bixhPXIuJHNsaWRlci5maW5kKFwiLnNsaWNrLXNsaWRlXCIpLGM9MDtjPHIub3B0aW9ucy5zbGlkZXNUb1Njcm9sbDtjKyspbDwwJiYobD1yLnNsaWRlQ291bnQtMSksdD10LmFkZChhLmVxKGwpKSx0PXQuYWRkKGEuZXEoZCkpLGwtLSxkKys7ZSh0KSxyLnNsaWRlQ291bnQ8PXIub3B0aW9ucy5zbGlkZXNUb1Nob3c/KG89ci4kc2xpZGVyLmZpbmQoXCIuc2xpY2stc2xpZGVcIiksZShvKSk6ci5jdXJyZW50U2xpZGU+PXIuc2xpZGVDb3VudC1yLm9wdGlvbnMuc2xpZGVzVG9TaG93PyhvPXIuJHNsaWRlci5maW5kKFwiLnNsaWNrLWNsb25lZFwiKS5zbGljZSgwLHIub3B0aW9ucy5zbGlkZXNUb1Nob3cpLGUobykpOjA9PT1yLmN1cnJlbnRTbGlkZSYmKG89ci4kc2xpZGVyLmZpbmQoXCIuc2xpY2stY2xvbmVkXCIpLnNsaWNlKHIub3B0aW9ucy5zbGlkZXNUb1Nob3cqLTEpLGUobykpfSxlLnByb3RvdHlwZS5sb2FkU2xpZGVyPWZ1bmN0aW9uKCl7dmFyIGk9dGhpcztpLnNldFBvc2l0aW9uKCksaS4kc2xpZGVUcmFjay5jc3Moe29wYWNpdHk6MX0pLGkuJHNsaWRlci5yZW1vdmVDbGFzcyhcInNsaWNrLWxvYWRpbmdcIiksaS5pbml0VUkoKSxcInByb2dyZXNzaXZlXCI9PT1pLm9wdGlvbnMubGF6eUxvYWQmJmkucHJvZ3Jlc3NpdmVMYXp5TG9hZCgpfSxlLnByb3RvdHlwZS5uZXh0PWUucHJvdG90eXBlLnNsaWNrTmV4dD1mdW5jdGlvbigpe3ZhciBpPXRoaXM7aS5jaGFuZ2VTbGlkZSh7ZGF0YTp7bWVzc2FnZTpcIm5leHRcIn19KX0sZS5wcm90b3R5cGUub3JpZW50YXRpb25DaGFuZ2U9ZnVuY3Rpb24oKXt2YXIgaT10aGlzO2kuY2hlY2tSZXNwb25zaXZlKCksaS5zZXRQb3NpdGlvbigpfSxlLnByb3RvdHlwZS5wYXVzZT1lLnByb3RvdHlwZS5zbGlja1BhdXNlPWZ1bmN0aW9uKCl7dmFyIGk9dGhpcztpLmF1dG9QbGF5Q2xlYXIoKSxpLnBhdXNlZD0hMH0sZS5wcm90b3R5cGUucGxheT1lLnByb3RvdHlwZS5zbGlja1BsYXk9ZnVuY3Rpb24oKXt2YXIgaT10aGlzO2kuYXV0b1BsYXkoKSxpLm9wdGlvbnMuYXV0b3BsYXk9ITAsaS5wYXVzZWQ9ITEsaS5mb2N1c3NlZD0hMSxpLmludGVycnVwdGVkPSExfSxlLnByb3RvdHlwZS5wb3N0U2xpZGU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZighdC51bnNsaWNrZWQmJih0LiRzbGlkZXIudHJpZ2dlcihcImFmdGVyQ2hhbmdlXCIsW3QsZV0pLHQuYW5pbWF0aW5nPSExLHQuc2xpZGVDb3VudD50Lm9wdGlvbnMuc2xpZGVzVG9TaG93JiZ0LnNldFBvc2l0aW9uKCksdC5zd2lwZUxlZnQ9bnVsbCx0Lm9wdGlvbnMuYXV0b3BsYXkmJnQuYXV0b1BsYXkoKSx0Lm9wdGlvbnMuYWNjZXNzaWJpbGl0eT09PSEwJiYodC5pbml0QURBKCksdC5vcHRpb25zLmZvY3VzT25DaGFuZ2UpKSl7dmFyIG89aSh0LiRzbGlkZXMuZ2V0KHQuY3VycmVudFNsaWRlKSk7by5hdHRyKFwidGFiaW5kZXhcIiwwKS5mb2N1cygpfX0sZS5wcm90b3R5cGUucHJldj1lLnByb3RvdHlwZS5zbGlja1ByZXY9ZnVuY3Rpb24oKXt2YXIgaT10aGlzO2kuY2hhbmdlU2xpZGUoe2RhdGE6e21lc3NhZ2U6XCJwcmV2aW91c1wifX0pfSxlLnByb3RvdHlwZS5wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbihpKXtpLnByZXZlbnREZWZhdWx0KCl9LGUucHJvdG90eXBlLnByb2dyZXNzaXZlTGF6eUxvYWQ9ZnVuY3Rpb24oZSl7ZT1lfHwxO3ZhciB0LG8scyxuLHIsbD10aGlzLGQ9aShcImltZ1tkYXRhLWxhenldXCIsbC4kc2xpZGVyKTtkLmxlbmd0aD8odD1kLmZpcnN0KCksbz10LmF0dHIoXCJkYXRhLWxhenlcIikscz10LmF0dHIoXCJkYXRhLXNyY3NldFwiKSxuPXQuYXR0cihcImRhdGEtc2l6ZXNcIil8fGwuJHNsaWRlci5hdHRyKFwiZGF0YS1zaXplc1wiKSxyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIiksci5vbmxvYWQ9ZnVuY3Rpb24oKXtzJiYodC5hdHRyKFwic3Jjc2V0XCIscyksbiYmdC5hdHRyKFwic2l6ZXNcIixuKSksdC5hdHRyKFwic3JjXCIsbykucmVtb3ZlQXR0cihcImRhdGEtbGF6eSBkYXRhLXNyY3NldCBkYXRhLXNpemVzXCIpLnJlbW92ZUNsYXNzKFwic2xpY2stbG9hZGluZ1wiKSxsLm9wdGlvbnMuYWRhcHRpdmVIZWlnaHQ9PT0hMCYmbC5zZXRQb3NpdGlvbigpLGwuJHNsaWRlci50cmlnZ2VyKFwibGF6eUxvYWRlZFwiLFtsLHQsb10pLGwucHJvZ3Jlc3NpdmVMYXp5TG9hZCgpfSxyLm9uZXJyb3I9ZnVuY3Rpb24oKXtlPDM/c2V0VGltZW91dChmdW5jdGlvbigpe2wucHJvZ3Jlc3NpdmVMYXp5TG9hZChlKzEpfSw1MDApOih0LnJlbW92ZUF0dHIoXCJkYXRhLWxhenlcIikucmVtb3ZlQ2xhc3MoXCJzbGljay1sb2FkaW5nXCIpLmFkZENsYXNzKFwic2xpY2stbGF6eWxvYWQtZXJyb3JcIiksbC4kc2xpZGVyLnRyaWdnZXIoXCJsYXp5TG9hZEVycm9yXCIsW2wsdCxvXSksbC5wcm9ncmVzc2l2ZUxhenlMb2FkKCkpfSxyLnNyYz1vKTpsLiRzbGlkZXIudHJpZ2dlcihcImFsbEltYWdlc0xvYWRlZFwiLFtsXSl9LGUucHJvdG90eXBlLnJlZnJlc2g9ZnVuY3Rpb24oZSl7dmFyIHQsbyxzPXRoaXM7bz1zLnNsaWRlQ291bnQtcy5vcHRpb25zLnNsaWRlc1RvU2hvdywhcy5vcHRpb25zLmluZmluaXRlJiZzLmN1cnJlbnRTbGlkZT5vJiYocy5jdXJyZW50U2xpZGU9bykscy5zbGlkZUNvdW50PD1zLm9wdGlvbnMuc2xpZGVzVG9TaG93JiYocy5jdXJyZW50U2xpZGU9MCksdD1zLmN1cnJlbnRTbGlkZSxzLmRlc3Ryb3koITApLGkuZXh0ZW5kKHMscy5pbml0aWFscyx7Y3VycmVudFNsaWRlOnR9KSxzLmluaXQoKSxlfHxzLmNoYW5nZVNsaWRlKHtkYXRhOnttZXNzYWdlOlwiaW5kZXhcIixpbmRleDp0fX0sITEpfSxlLnByb3RvdHlwZS5yZWdpc3RlckJyZWFrcG9pbnRzPWZ1bmN0aW9uKCl7dmFyIGUsdCxvLHM9dGhpcyxuPXMub3B0aW9ucy5yZXNwb25zaXZlfHxudWxsO2lmKFwiYXJyYXlcIj09PWkudHlwZShuKSYmbi5sZW5ndGgpe3MucmVzcG9uZFRvPXMub3B0aW9ucy5yZXNwb25kVG98fFwid2luZG93XCI7Zm9yKGUgaW4gbilpZihvPXMuYnJlYWtwb2ludHMubGVuZ3RoLTEsbi5oYXNPd25Qcm9wZXJ0eShlKSl7Zm9yKHQ9bltlXS5icmVha3BvaW50O28+PTA7KXMuYnJlYWtwb2ludHNbb10mJnMuYnJlYWtwb2ludHNbb109PT10JiZzLmJyZWFrcG9pbnRzLnNwbGljZShvLDEpLG8tLTtzLmJyZWFrcG9pbnRzLnB1c2godCkscy5icmVha3BvaW50U2V0dGluZ3NbdF09bltlXS5zZXR0aW5nc31zLmJyZWFrcG9pbnRzLnNvcnQoZnVuY3Rpb24oaSxlKXtyZXR1cm4gcy5vcHRpb25zLm1vYmlsZUZpcnN0P2ktZTplLWl9KX19LGUucHJvdG90eXBlLnJlaW5pdD1mdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS4kc2xpZGVzPWUuJHNsaWRlVHJhY2suY2hpbGRyZW4oZS5vcHRpb25zLnNsaWRlKS5hZGRDbGFzcyhcInNsaWNrLXNsaWRlXCIpLGUuc2xpZGVDb3VudD1lLiRzbGlkZXMubGVuZ3RoLGUuY3VycmVudFNsaWRlPj1lLnNsaWRlQ291bnQmJjAhPT1lLmN1cnJlbnRTbGlkZSYmKGUuY3VycmVudFNsaWRlPWUuY3VycmVudFNsaWRlLWUub3B0aW9ucy5zbGlkZXNUb1Njcm9sbCksZS5zbGlkZUNvdW50PD1lLm9wdGlvbnMuc2xpZGVzVG9TaG93JiYoZS5jdXJyZW50U2xpZGU9MCksZS5yZWdpc3RlckJyZWFrcG9pbnRzKCksZS5zZXRQcm9wcygpLGUuc2V0dXBJbmZpbml0ZSgpLGUuYnVpbGRBcnJvd3MoKSxlLnVwZGF0ZUFycm93cygpLGUuaW5pdEFycm93RXZlbnRzKCksZS5idWlsZERvdHMoKSxlLnVwZGF0ZURvdHMoKSxlLmluaXREb3RFdmVudHMoKSxlLmNsZWFuVXBTbGlkZUV2ZW50cygpLGUuaW5pdFNsaWRlRXZlbnRzKCksZS5jaGVja1Jlc3BvbnNpdmUoITEsITApLGUub3B0aW9ucy5mb2N1c09uU2VsZWN0PT09ITAmJmkoZS4kc2xpZGVUcmFjaykuY2hpbGRyZW4oKS5vbihcImNsaWNrLnNsaWNrXCIsZS5zZWxlY3RIYW5kbGVyKSxlLnNldFNsaWRlQ2xhc3NlcyhcIm51bWJlclwiPT10eXBlb2YgZS5jdXJyZW50U2xpZGU/ZS5jdXJyZW50U2xpZGU6MCksZS5zZXRQb3NpdGlvbigpLGUuZm9jdXNIYW5kbGVyKCksZS5wYXVzZWQ9IWUub3B0aW9ucy5hdXRvcGxheSxlLmF1dG9QbGF5KCksZS4kc2xpZGVyLnRyaWdnZXIoXCJyZUluaXRcIixbZV0pfSxlLnByb3RvdHlwZS5yZXNpemU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2kod2luZG93KS53aWR0aCgpIT09ZS53aW5kb3dXaWR0aCYmKGNsZWFyVGltZW91dChlLndpbmRvd0RlbGF5KSxlLndpbmRvd0RlbGF5PXdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS53aW5kb3dXaWR0aD1pKHdpbmRvdykud2lkdGgoKSxlLmNoZWNrUmVzcG9uc2l2ZSgpLGUudW5zbGlja2VkfHxlLnNldFBvc2l0aW9uKCl9LDUwKSl9LGUucHJvdG90eXBlLnJlbW92ZVNsaWRlPWUucHJvdG90eXBlLnNsaWNrUmVtb3ZlPWZ1bmN0aW9uKGksZSx0KXt2YXIgbz10aGlzO3JldHVyblwiYm9vbGVhblwiPT10eXBlb2YgaT8oZT1pLGk9ZT09PSEwPzA6by5zbGlkZUNvdW50LTEpOmk9ZT09PSEwPy0taTppLCEoby5zbGlkZUNvdW50PDF8fGk8MHx8aT5vLnNsaWRlQ291bnQtMSkmJihvLnVubG9hZCgpLHQ9PT0hMD9vLiRzbGlkZVRyYWNrLmNoaWxkcmVuKCkucmVtb3ZlKCk6by4kc2xpZGVUcmFjay5jaGlsZHJlbih0aGlzLm9wdGlvbnMuc2xpZGUpLmVxKGkpLnJlbW92ZSgpLG8uJHNsaWRlcz1vLiRzbGlkZVRyYWNrLmNoaWxkcmVuKHRoaXMub3B0aW9ucy5zbGlkZSksby4kc2xpZGVUcmFjay5jaGlsZHJlbih0aGlzLm9wdGlvbnMuc2xpZGUpLmRldGFjaCgpLG8uJHNsaWRlVHJhY2suYXBwZW5kKG8uJHNsaWRlcyksby4kc2xpZGVzQ2FjaGU9by4kc2xpZGVzLHZvaWQgby5yZWluaXQoKSl9LGUucHJvdG90eXBlLnNldENTUz1mdW5jdGlvbihpKXt2YXIgZSx0LG89dGhpcyxzPXt9O28ub3B0aW9ucy5ydGw9PT0hMCYmKGk9LWkpLGU9XCJsZWZ0XCI9PW8ucG9zaXRpb25Qcm9wP01hdGguY2VpbChpKStcInB4XCI6XCIwcHhcIix0PVwidG9wXCI9PW8ucG9zaXRpb25Qcm9wP01hdGguY2VpbChpKStcInB4XCI6XCIwcHhcIixzW28ucG9zaXRpb25Qcm9wXT1pLG8udHJhbnNmb3Jtc0VuYWJsZWQ9PT0hMT9vLiRzbGlkZVRyYWNrLmNzcyhzKToocz17fSxvLmNzc1RyYW5zaXRpb25zPT09ITE/KHNbby5hbmltVHlwZV09XCJ0cmFuc2xhdGUoXCIrZStcIiwgXCIrdCtcIilcIixvLiRzbGlkZVRyYWNrLmNzcyhzKSk6KHNbby5hbmltVHlwZV09XCJ0cmFuc2xhdGUzZChcIitlK1wiLCBcIit0K1wiLCAwcHgpXCIsby4kc2xpZGVUcmFjay5jc3MocykpKX0sZS5wcm90b3R5cGUuc2V0RGltZW5zaW9ucz1mdW5jdGlvbigpe3ZhciBpPXRoaXM7aS5vcHRpb25zLnZlcnRpY2FsPT09ITE/aS5vcHRpb25zLmNlbnRlck1vZGU9PT0hMCYmaS4kbGlzdC5jc3Moe3BhZGRpbmc6XCIwcHggXCIraS5vcHRpb25zLmNlbnRlclBhZGRpbmd9KTooaS4kbGlzdC5oZWlnaHQoaS4kc2xpZGVzLmZpcnN0KCkub3V0ZXJIZWlnaHQoITApKmkub3B0aW9ucy5zbGlkZXNUb1Nob3cpLGkub3B0aW9ucy5jZW50ZXJNb2RlPT09ITAmJmkuJGxpc3QuY3NzKHtwYWRkaW5nOmkub3B0aW9ucy5jZW50ZXJQYWRkaW5nK1wiIDBweFwifSkpLGkubGlzdFdpZHRoPWkuJGxpc3Qud2lkdGgoKSxpLmxpc3RIZWlnaHQ9aS4kbGlzdC5oZWlnaHQoKSxpLm9wdGlvbnMudmVydGljYWw9PT0hMSYmaS5vcHRpb25zLnZhcmlhYmxlV2lkdGg9PT0hMT8oaS5zbGlkZVdpZHRoPU1hdGguY2VpbChpLmxpc3RXaWR0aC9pLm9wdGlvbnMuc2xpZGVzVG9TaG93KSxpLiRzbGlkZVRyYWNrLndpZHRoKE1hdGguY2VpbChpLnNsaWRlV2lkdGgqaS4kc2xpZGVUcmFjay5jaGlsZHJlbihcIi5zbGljay1zbGlkZVwiKS5sZW5ndGgpKSk6aS5vcHRpb25zLnZhcmlhYmxlV2lkdGg9PT0hMD9pLiRzbGlkZVRyYWNrLndpZHRoKDVlMyppLnNsaWRlQ291bnQpOihpLnNsaWRlV2lkdGg9TWF0aC5jZWlsKGkubGlzdFdpZHRoKSxpLiRzbGlkZVRyYWNrLmhlaWdodChNYXRoLmNlaWwoaS4kc2xpZGVzLmZpcnN0KCkub3V0ZXJIZWlnaHQoITApKmkuJHNsaWRlVHJhY2suY2hpbGRyZW4oXCIuc2xpY2stc2xpZGVcIikubGVuZ3RoKSkpO3ZhciBlPWkuJHNsaWRlcy5maXJzdCgpLm91dGVyV2lkdGgoITApLWkuJHNsaWRlcy5maXJzdCgpLndpZHRoKCk7aS5vcHRpb25zLnZhcmlhYmxlV2lkdGg9PT0hMSYmaS4kc2xpZGVUcmFjay5jaGlsZHJlbihcIi5zbGljay1zbGlkZVwiKS53aWR0aChpLnNsaWRlV2lkdGgtZSl9LGUucHJvdG90eXBlLnNldEZhZGU9ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXM7dC4kc2xpZGVzLmVhY2goZnVuY3Rpb24obyxzKXtlPXQuc2xpZGVXaWR0aCpvKi0xLHQub3B0aW9ucy5ydGw9PT0hMD9pKHMpLmNzcyh7cG9zaXRpb246XCJyZWxhdGl2ZVwiLHJpZ2h0OmUsdG9wOjAsekluZGV4OnQub3B0aW9ucy56SW5kZXgtMixvcGFjaXR5OjB9KTppKHMpLmNzcyh7cG9zaXRpb246XCJyZWxhdGl2ZVwiLGxlZnQ6ZSx0b3A6MCx6SW5kZXg6dC5vcHRpb25zLnpJbmRleC0yLG9wYWNpdHk6MH0pfSksdC4kc2xpZGVzLmVxKHQuY3VycmVudFNsaWRlKS5jc3Moe3pJbmRleDp0Lm9wdGlvbnMuekluZGV4LTEsb3BhY2l0eToxfSl9LGUucHJvdG90eXBlLnNldEhlaWdodD1mdW5jdGlvbigpe3ZhciBpPXRoaXM7aWYoMT09PWkub3B0aW9ucy5zbGlkZXNUb1Nob3cmJmkub3B0aW9ucy5hZGFwdGl2ZUhlaWdodD09PSEwJiZpLm9wdGlvbnMudmVydGljYWw9PT0hMSl7dmFyIGU9aS4kc2xpZGVzLmVxKGkuY3VycmVudFNsaWRlKS5vdXRlckhlaWdodCghMCk7aS4kbGlzdC5jc3MoXCJoZWlnaHRcIixlKX19LGUucHJvdG90eXBlLnNldE9wdGlvbj1lLnByb3RvdHlwZS5zbGlja1NldE9wdGlvbj1mdW5jdGlvbigpe3ZhciBlLHQsbyxzLG4scj10aGlzLGw9ITE7aWYoXCJvYmplY3RcIj09PWkudHlwZShhcmd1bWVudHNbMF0pPyhvPWFyZ3VtZW50c1swXSxsPWFyZ3VtZW50c1sxXSxuPVwibXVsdGlwbGVcIik6XCJzdHJpbmdcIj09PWkudHlwZShhcmd1bWVudHNbMF0pJiYobz1hcmd1bWVudHNbMF0scz1hcmd1bWVudHNbMV0sbD1hcmd1bWVudHNbMl0sXCJyZXNwb25zaXZlXCI9PT1hcmd1bWVudHNbMF0mJlwiYXJyYXlcIj09PWkudHlwZShhcmd1bWVudHNbMV0pP249XCJyZXNwb25zaXZlXCI6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGFyZ3VtZW50c1sxXSYmKG49XCJzaW5nbGVcIikpLFwic2luZ2xlXCI9PT1uKXIub3B0aW9uc1tvXT1zO2Vsc2UgaWYoXCJtdWx0aXBsZVwiPT09bilpLmVhY2gobyxmdW5jdGlvbihpLGUpe3Iub3B0aW9uc1tpXT1lfSk7ZWxzZSBpZihcInJlc3BvbnNpdmVcIj09PW4pZm9yKHQgaW4gcylpZihcImFycmF5XCIhPT1pLnR5cGUoci5vcHRpb25zLnJlc3BvbnNpdmUpKXIub3B0aW9ucy5yZXNwb25zaXZlPVtzW3RdXTtlbHNle2ZvcihlPXIub3B0aW9ucy5yZXNwb25zaXZlLmxlbmd0aC0xO2U+PTA7KXIub3B0aW9ucy5yZXNwb25zaXZlW2VdLmJyZWFrcG9pbnQ9PT1zW3RdLmJyZWFrcG9pbnQmJnIub3B0aW9ucy5yZXNwb25zaXZlLnNwbGljZShlLDEpLGUtLTtyLm9wdGlvbnMucmVzcG9uc2l2ZS5wdXNoKHNbdF0pfWwmJihyLnVubG9hZCgpLHIucmVpbml0KCkpfSxlLnByb3RvdHlwZS5zZXRQb3NpdGlvbj1mdW5jdGlvbigpe3ZhciBpPXRoaXM7aS5zZXREaW1lbnNpb25zKCksaS5zZXRIZWlnaHQoKSxpLm9wdGlvbnMuZmFkZT09PSExP2kuc2V0Q1NTKGkuZ2V0TGVmdChpLmN1cnJlbnRTbGlkZSkpOmkuc2V0RmFkZSgpLGkuJHNsaWRlci50cmlnZ2VyKFwic2V0UG9zaXRpb25cIixbaV0pfSxlLnByb3RvdHlwZS5zZXRQcm9wcz1mdW5jdGlvbigpe3ZhciBpPXRoaXMsZT1kb2N1bWVudC5ib2R5LnN0eWxlO2kucG9zaXRpb25Qcm9wPWkub3B0aW9ucy52ZXJ0aWNhbD09PSEwP1widG9wXCI6XCJsZWZ0XCIsXHJcblwidG9wXCI9PT1pLnBvc2l0aW9uUHJvcD9pLiRzbGlkZXIuYWRkQ2xhc3MoXCJzbGljay12ZXJ0aWNhbFwiKTppLiRzbGlkZXIucmVtb3ZlQ2xhc3MoXCJzbGljay12ZXJ0aWNhbFwiKSx2b2lkIDA9PT1lLldlYmtpdFRyYW5zaXRpb24mJnZvaWQgMD09PWUuTW96VHJhbnNpdGlvbiYmdm9pZCAwPT09ZS5tc1RyYW5zaXRpb258fGkub3B0aW9ucy51c2VDU1M9PT0hMCYmKGkuY3NzVHJhbnNpdGlvbnM9ITApLGkub3B0aW9ucy5mYWRlJiYoXCJudW1iZXJcIj09dHlwZW9mIGkub3B0aW9ucy56SW5kZXg/aS5vcHRpb25zLnpJbmRleDwzJiYoaS5vcHRpb25zLnpJbmRleD0zKTppLm9wdGlvbnMuekluZGV4PWkuZGVmYXVsdHMuekluZGV4KSx2b2lkIDAhPT1lLk9UcmFuc2Zvcm0mJihpLmFuaW1UeXBlPVwiT1RyYW5zZm9ybVwiLGkudHJhbnNmb3JtVHlwZT1cIi1vLXRyYW5zZm9ybVwiLGkudHJhbnNpdGlvblR5cGU9XCJPVHJhbnNpdGlvblwiLHZvaWQgMD09PWUucGVyc3BlY3RpdmVQcm9wZXJ0eSYmdm9pZCAwPT09ZS53ZWJraXRQZXJzcGVjdGl2ZSYmKGkuYW5pbVR5cGU9ITEpKSx2b2lkIDAhPT1lLk1velRyYW5zZm9ybSYmKGkuYW5pbVR5cGU9XCJNb3pUcmFuc2Zvcm1cIixpLnRyYW5zZm9ybVR5cGU9XCItbW96LXRyYW5zZm9ybVwiLGkudHJhbnNpdGlvblR5cGU9XCJNb3pUcmFuc2l0aW9uXCIsdm9pZCAwPT09ZS5wZXJzcGVjdGl2ZVByb3BlcnR5JiZ2b2lkIDA9PT1lLk1velBlcnNwZWN0aXZlJiYoaS5hbmltVHlwZT0hMSkpLHZvaWQgMCE9PWUud2Via2l0VHJhbnNmb3JtJiYoaS5hbmltVHlwZT1cIndlYmtpdFRyYW5zZm9ybVwiLGkudHJhbnNmb3JtVHlwZT1cIi13ZWJraXQtdHJhbnNmb3JtXCIsaS50cmFuc2l0aW9uVHlwZT1cIndlYmtpdFRyYW5zaXRpb25cIix2b2lkIDA9PT1lLnBlcnNwZWN0aXZlUHJvcGVydHkmJnZvaWQgMD09PWUud2Via2l0UGVyc3BlY3RpdmUmJihpLmFuaW1UeXBlPSExKSksdm9pZCAwIT09ZS5tc1RyYW5zZm9ybSYmKGkuYW5pbVR5cGU9XCJtc1RyYW5zZm9ybVwiLGkudHJhbnNmb3JtVHlwZT1cIi1tcy10cmFuc2Zvcm1cIixpLnRyYW5zaXRpb25UeXBlPVwibXNUcmFuc2l0aW9uXCIsdm9pZCAwPT09ZS5tc1RyYW5zZm9ybSYmKGkuYW5pbVR5cGU9ITEpKSx2b2lkIDAhPT1lLnRyYW5zZm9ybSYmaS5hbmltVHlwZSE9PSExJiYoaS5hbmltVHlwZT1cInRyYW5zZm9ybVwiLGkudHJhbnNmb3JtVHlwZT1cInRyYW5zZm9ybVwiLGkudHJhbnNpdGlvblR5cGU9XCJ0cmFuc2l0aW9uXCIpLGkudHJhbnNmb3Jtc0VuYWJsZWQ9aS5vcHRpb25zLnVzZVRyYW5zZm9ybSYmbnVsbCE9PWkuYW5pbVR5cGUmJmkuYW5pbVR5cGUhPT0hMX0sZS5wcm90b3R5cGUuc2V0U2xpZGVDbGFzc2VzPWZ1bmN0aW9uKGkpe3ZhciBlLHQsbyxzLG49dGhpcztpZih0PW4uJHNsaWRlci5maW5kKFwiLnNsaWNrLXNsaWRlXCIpLnJlbW92ZUNsYXNzKFwic2xpY2stYWN0aXZlIHNsaWNrLWNlbnRlciBzbGljay1jdXJyZW50XCIpLmF0dHIoXCJhcmlhLWhpZGRlblwiLFwidHJ1ZVwiKSxuLiRzbGlkZXMuZXEoaSkuYWRkQ2xhc3MoXCJzbGljay1jdXJyZW50XCIpLG4ub3B0aW9ucy5jZW50ZXJNb2RlPT09ITApe3ZhciByPW4ub3B0aW9ucy5zbGlkZXNUb1Nob3clMj09PTA/MTowO2U9TWF0aC5mbG9vcihuLm9wdGlvbnMuc2xpZGVzVG9TaG93LzIpLG4ub3B0aW9ucy5pbmZpbml0ZT09PSEwJiYoaT49ZSYmaTw9bi5zbGlkZUNvdW50LTEtZT9uLiRzbGlkZXMuc2xpY2UoaS1lK3IsaStlKzEpLmFkZENsYXNzKFwic2xpY2stYWN0aXZlXCIpLmF0dHIoXCJhcmlhLWhpZGRlblwiLFwiZmFsc2VcIik6KG89bi5vcHRpb25zLnNsaWRlc1RvU2hvdytpLHQuc2xpY2Uoby1lKzErcixvK2UrMikuYWRkQ2xhc3MoXCJzbGljay1hY3RpdmVcIikuYXR0cihcImFyaWEtaGlkZGVuXCIsXCJmYWxzZVwiKSksMD09PWk/dC5lcSh0Lmxlbmd0aC0xLW4ub3B0aW9ucy5zbGlkZXNUb1Nob3cpLmFkZENsYXNzKFwic2xpY2stY2VudGVyXCIpOmk9PT1uLnNsaWRlQ291bnQtMSYmdC5lcShuLm9wdGlvbnMuc2xpZGVzVG9TaG93KS5hZGRDbGFzcyhcInNsaWNrLWNlbnRlclwiKSksbi4kc2xpZGVzLmVxKGkpLmFkZENsYXNzKFwic2xpY2stY2VudGVyXCIpfWVsc2UgaT49MCYmaTw9bi5zbGlkZUNvdW50LW4ub3B0aW9ucy5zbGlkZXNUb1Nob3c/bi4kc2xpZGVzLnNsaWNlKGksaStuLm9wdGlvbnMuc2xpZGVzVG9TaG93KS5hZGRDbGFzcyhcInNsaWNrLWFjdGl2ZVwiKS5hdHRyKFwiYXJpYS1oaWRkZW5cIixcImZhbHNlXCIpOnQubGVuZ3RoPD1uLm9wdGlvbnMuc2xpZGVzVG9TaG93P3QuYWRkQ2xhc3MoXCJzbGljay1hY3RpdmVcIikuYXR0cihcImFyaWEtaGlkZGVuXCIsXCJmYWxzZVwiKToocz1uLnNsaWRlQ291bnQlbi5vcHRpb25zLnNsaWRlc1RvU2hvdyxvPW4ub3B0aW9ucy5pbmZpbml0ZT09PSEwP24ub3B0aW9ucy5zbGlkZXNUb1Nob3craTppLG4ub3B0aW9ucy5zbGlkZXNUb1Nob3c9PW4ub3B0aW9ucy5zbGlkZXNUb1Njcm9sbCYmbi5zbGlkZUNvdW50LWk8bi5vcHRpb25zLnNsaWRlc1RvU2hvdz90LnNsaWNlKG8tKG4ub3B0aW9ucy5zbGlkZXNUb1Nob3ctcyksbytzKS5hZGRDbGFzcyhcInNsaWNrLWFjdGl2ZVwiKS5hdHRyKFwiYXJpYS1oaWRkZW5cIixcImZhbHNlXCIpOnQuc2xpY2UobyxvK24ub3B0aW9ucy5zbGlkZXNUb1Nob3cpLmFkZENsYXNzKFwic2xpY2stYWN0aXZlXCIpLmF0dHIoXCJhcmlhLWhpZGRlblwiLFwiZmFsc2VcIikpO1wib25kZW1hbmRcIiE9PW4ub3B0aW9ucy5sYXp5TG9hZCYmXCJhbnRpY2lwYXRlZFwiIT09bi5vcHRpb25zLmxhenlMb2FkfHxuLmxhenlMb2FkKCl9LGUucHJvdG90eXBlLnNldHVwSW5maW5pdGU9ZnVuY3Rpb24oKXt2YXIgZSx0LG8scz10aGlzO2lmKHMub3B0aW9ucy5mYWRlPT09ITAmJihzLm9wdGlvbnMuY2VudGVyTW9kZT0hMSkscy5vcHRpb25zLmluZmluaXRlPT09ITAmJnMub3B0aW9ucy5mYWRlPT09ITEmJih0PW51bGwscy5zbGlkZUNvdW50PnMub3B0aW9ucy5zbGlkZXNUb1Nob3cpKXtmb3Iobz1zLm9wdGlvbnMuY2VudGVyTW9kZT09PSEwP3Mub3B0aW9ucy5zbGlkZXNUb1Nob3crMTpzLm9wdGlvbnMuc2xpZGVzVG9TaG93LGU9cy5zbGlkZUNvdW50O2U+cy5zbGlkZUNvdW50LW87ZS09MSl0PWUtMSxpKHMuJHNsaWRlc1t0XSkuY2xvbmUoITApLmF0dHIoXCJpZFwiLFwiXCIpLmF0dHIoXCJkYXRhLXNsaWNrLWluZGV4XCIsdC1zLnNsaWRlQ291bnQpLnByZXBlbmRUbyhzLiRzbGlkZVRyYWNrKS5hZGRDbGFzcyhcInNsaWNrLWNsb25lZFwiKTtmb3IoZT0wO2U8bytzLnNsaWRlQ291bnQ7ZSs9MSl0PWUsaShzLiRzbGlkZXNbdF0pLmNsb25lKCEwKS5hdHRyKFwiaWRcIixcIlwiKS5hdHRyKFwiZGF0YS1zbGljay1pbmRleFwiLHQrcy5zbGlkZUNvdW50KS5hcHBlbmRUbyhzLiRzbGlkZVRyYWNrKS5hZGRDbGFzcyhcInNsaWNrLWNsb25lZFwiKTtzLiRzbGlkZVRyYWNrLmZpbmQoXCIuc2xpY2stY2xvbmVkXCIpLmZpbmQoXCJbaWRdXCIpLmVhY2goZnVuY3Rpb24oKXtpKHRoaXMpLmF0dHIoXCJpZFwiLFwiXCIpfSl9fSxlLnByb3RvdHlwZS5pbnRlcnJ1cHQ9ZnVuY3Rpb24oaSl7dmFyIGU9dGhpcztpfHxlLmF1dG9QbGF5KCksZS5pbnRlcnJ1cHRlZD1pfSxlLnByb3RvdHlwZS5zZWxlY3RIYW5kbGVyPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbz1pKGUudGFyZ2V0KS5pcyhcIi5zbGljay1zbGlkZVwiKT9pKGUudGFyZ2V0KTppKGUudGFyZ2V0KS5wYXJlbnRzKFwiLnNsaWNrLXNsaWRlXCIpLHM9cGFyc2VJbnQoby5hdHRyKFwiZGF0YS1zbGljay1pbmRleFwiKSk7cmV0dXJuIHN8fChzPTApLHQuc2xpZGVDb3VudDw9dC5vcHRpb25zLnNsaWRlc1RvU2hvdz92b2lkIHQuc2xpZGVIYW5kbGVyKHMsITEsITApOnZvaWQgdC5zbGlkZUhhbmRsZXIocyl9LGUucHJvdG90eXBlLnNsaWRlSGFuZGxlcj1mdW5jdGlvbihpLGUsdCl7dmFyIG8scyxuLHIsbCxkPW51bGwsYT10aGlzO2lmKGU9ZXx8ITEsIShhLmFuaW1hdGluZz09PSEwJiZhLm9wdGlvbnMud2FpdEZvckFuaW1hdGU9PT0hMHx8YS5vcHRpb25zLmZhZGU9PT0hMCYmYS5jdXJyZW50U2xpZGU9PT1pKSlyZXR1cm4gZT09PSExJiZhLmFzTmF2Rm9yKGkpLG89aSxkPWEuZ2V0TGVmdChvKSxyPWEuZ2V0TGVmdChhLmN1cnJlbnRTbGlkZSksYS5jdXJyZW50TGVmdD1udWxsPT09YS5zd2lwZUxlZnQ/cjphLnN3aXBlTGVmdCxhLm9wdGlvbnMuaW5maW5pdGU9PT0hMSYmYS5vcHRpb25zLmNlbnRlck1vZGU9PT0hMSYmKGk8MHx8aT5hLmdldERvdENvdW50KCkqYS5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsKT92b2lkKGEub3B0aW9ucy5mYWRlPT09ITEmJihvPWEuY3VycmVudFNsaWRlLHQhPT0hMCYmYS5zbGlkZUNvdW50PmEub3B0aW9ucy5zbGlkZXNUb1Nob3c/YS5hbmltYXRlU2xpZGUocixmdW5jdGlvbigpe2EucG9zdFNsaWRlKG8pfSk6YS5wb3N0U2xpZGUobykpKTphLm9wdGlvbnMuaW5maW5pdGU9PT0hMSYmYS5vcHRpb25zLmNlbnRlck1vZGU9PT0hMCYmKGk8MHx8aT5hLnNsaWRlQ291bnQtYS5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsKT92b2lkKGEub3B0aW9ucy5mYWRlPT09ITEmJihvPWEuY3VycmVudFNsaWRlLHQhPT0hMCYmYS5zbGlkZUNvdW50PmEub3B0aW9ucy5zbGlkZXNUb1Nob3c/YS5hbmltYXRlU2xpZGUocixmdW5jdGlvbigpe2EucG9zdFNsaWRlKG8pfSk6YS5wb3N0U2xpZGUobykpKTooYS5vcHRpb25zLmF1dG9wbGF5JiZjbGVhckludGVydmFsKGEuYXV0b1BsYXlUaW1lcikscz1vPDA/YS5zbGlkZUNvdW50JWEub3B0aW9ucy5zbGlkZXNUb1Njcm9sbCE9PTA/YS5zbGlkZUNvdW50LWEuc2xpZGVDb3VudCVhLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGw6YS5zbGlkZUNvdW50K286bz49YS5zbGlkZUNvdW50P2Euc2xpZGVDb3VudCVhLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGwhPT0wPzA6by1hLnNsaWRlQ291bnQ6byxhLmFuaW1hdGluZz0hMCxhLiRzbGlkZXIudHJpZ2dlcihcImJlZm9yZUNoYW5nZVwiLFthLGEuY3VycmVudFNsaWRlLHNdKSxuPWEuY3VycmVudFNsaWRlLGEuY3VycmVudFNsaWRlPXMsYS5zZXRTbGlkZUNsYXNzZXMoYS5jdXJyZW50U2xpZGUpLGEub3B0aW9ucy5hc05hdkZvciYmKGw9YS5nZXROYXZUYXJnZXQoKSxsPWwuc2xpY2soXCJnZXRTbGlja1wiKSxsLnNsaWRlQ291bnQ8PWwub3B0aW9ucy5zbGlkZXNUb1Nob3cmJmwuc2V0U2xpZGVDbGFzc2VzKGEuY3VycmVudFNsaWRlKSksYS51cGRhdGVEb3RzKCksYS51cGRhdGVBcnJvd3MoKSxhLm9wdGlvbnMuZmFkZT09PSEwPyh0IT09ITA/KGEuZmFkZVNsaWRlT3V0KG4pLGEuZmFkZVNsaWRlKHMsZnVuY3Rpb24oKXthLnBvc3RTbGlkZShzKX0pKTphLnBvc3RTbGlkZShzKSx2b2lkIGEuYW5pbWF0ZUhlaWdodCgpKTp2b2lkKHQhPT0hMCYmYS5zbGlkZUNvdW50PmEub3B0aW9ucy5zbGlkZXNUb1Nob3c/YS5hbmltYXRlU2xpZGUoZCxmdW5jdGlvbigpe2EucG9zdFNsaWRlKHMpfSk6YS5wb3N0U2xpZGUocykpKX0sZS5wcm90b3R5cGUuc3RhcnRMb2FkPWZ1bmN0aW9uKCl7dmFyIGk9dGhpcztpLm9wdGlvbnMuYXJyb3dzPT09ITAmJmkuc2xpZGVDb3VudD5pLm9wdGlvbnMuc2xpZGVzVG9TaG93JiYoaS4kcHJldkFycm93LmhpZGUoKSxpLiRuZXh0QXJyb3cuaGlkZSgpKSxpLm9wdGlvbnMuZG90cz09PSEwJiZpLnNsaWRlQ291bnQ+aS5vcHRpb25zLnNsaWRlc1RvU2hvdyYmaS4kZG90cy5oaWRlKCksaS4kc2xpZGVyLmFkZENsYXNzKFwic2xpY2stbG9hZGluZ1wiKX0sZS5wcm90b3R5cGUuc3dpcGVEaXJlY3Rpb249ZnVuY3Rpb24oKXt2YXIgaSxlLHQsbyxzPXRoaXM7cmV0dXJuIGk9cy50b3VjaE9iamVjdC5zdGFydFgtcy50b3VjaE9iamVjdC5jdXJYLGU9cy50b3VjaE9iamVjdC5zdGFydFktcy50b3VjaE9iamVjdC5jdXJZLHQ9TWF0aC5hdGFuMihlLGkpLG89TWF0aC5yb3VuZCgxODAqdC9NYXRoLlBJKSxvPDAmJihvPTM2MC1NYXRoLmFicyhvKSksbzw9NDUmJm8+PTA/cy5vcHRpb25zLnJ0bD09PSExP1wibGVmdFwiOlwicmlnaHRcIjpvPD0zNjAmJm8+PTMxNT9zLm9wdGlvbnMucnRsPT09ITE/XCJsZWZ0XCI6XCJyaWdodFwiOm8+PTEzNSYmbzw9MjI1P3Mub3B0aW9ucy5ydGw9PT0hMT9cInJpZ2h0XCI6XCJsZWZ0XCI6cy5vcHRpb25zLnZlcnRpY2FsU3dpcGluZz09PSEwP28+PTM1JiZvPD0xMzU/XCJkb3duXCI6XCJ1cFwiOlwidmVydGljYWxcIn0sZS5wcm90b3R5cGUuc3dpcGVFbmQ9ZnVuY3Rpb24oaSl7dmFyIGUsdCxvPXRoaXM7aWYoby5kcmFnZ2luZz0hMSxvLnN3aXBpbmc9ITEsby5zY3JvbGxpbmcpcmV0dXJuIG8uc2Nyb2xsaW5nPSExLCExO2lmKG8uaW50ZXJydXB0ZWQ9ITEsby5zaG91bGRDbGljaz0hKG8udG91Y2hPYmplY3Quc3dpcGVMZW5ndGg+MTApLHZvaWQgMD09PW8udG91Y2hPYmplY3QuY3VyWClyZXR1cm4hMTtpZihvLnRvdWNoT2JqZWN0LmVkZ2VIaXQ9PT0hMCYmby4kc2xpZGVyLnRyaWdnZXIoXCJlZGdlXCIsW28sby5zd2lwZURpcmVjdGlvbigpXSksby50b3VjaE9iamVjdC5zd2lwZUxlbmd0aD49by50b3VjaE9iamVjdC5taW5Td2lwZSl7c3dpdGNoKHQ9by5zd2lwZURpcmVjdGlvbigpKXtjYXNlXCJsZWZ0XCI6Y2FzZVwiZG93blwiOmU9by5vcHRpb25zLnN3aXBlVG9TbGlkZT9vLmNoZWNrTmF2aWdhYmxlKG8uY3VycmVudFNsaWRlK28uZ2V0U2xpZGVDb3VudCgpKTpvLmN1cnJlbnRTbGlkZStvLmdldFNsaWRlQ291bnQoKSxvLmN1cnJlbnREaXJlY3Rpb249MDticmVhaztjYXNlXCJyaWdodFwiOmNhc2VcInVwXCI6ZT1vLm9wdGlvbnMuc3dpcGVUb1NsaWRlP28uY2hlY2tOYXZpZ2FibGUoby5jdXJyZW50U2xpZGUtby5nZXRTbGlkZUNvdW50KCkpOm8uY3VycmVudFNsaWRlLW8uZ2V0U2xpZGVDb3VudCgpLG8uY3VycmVudERpcmVjdGlvbj0xfVwidmVydGljYWxcIiE9dCYmKG8uc2xpZGVIYW5kbGVyKGUpLG8udG91Y2hPYmplY3Q9e30sby4kc2xpZGVyLnRyaWdnZXIoXCJzd2lwZVwiLFtvLHRdKSl9ZWxzZSBvLnRvdWNoT2JqZWN0LnN0YXJ0WCE9PW8udG91Y2hPYmplY3QuY3VyWCYmKG8uc2xpZGVIYW5kbGVyKG8uY3VycmVudFNsaWRlKSxvLnRvdWNoT2JqZWN0PXt9KX0sZS5wcm90b3R5cGUuc3dpcGVIYW5kbGVyPWZ1bmN0aW9uKGkpe3ZhciBlPXRoaXM7aWYoIShlLm9wdGlvbnMuc3dpcGU9PT0hMXx8XCJvbnRvdWNoZW5kXCJpbiBkb2N1bWVudCYmZS5vcHRpb25zLnN3aXBlPT09ITF8fGUub3B0aW9ucy5kcmFnZ2FibGU9PT0hMSYmaS50eXBlLmluZGV4T2YoXCJtb3VzZVwiKSE9PS0xKSlzd2l0Y2goZS50b3VjaE9iamVjdC5maW5nZXJDb3VudD1pLm9yaWdpbmFsRXZlbnQmJnZvaWQgMCE9PWkub3JpZ2luYWxFdmVudC50b3VjaGVzP2kub3JpZ2luYWxFdmVudC50b3VjaGVzLmxlbmd0aDoxLGUudG91Y2hPYmplY3QubWluU3dpcGU9ZS5saXN0V2lkdGgvZS5vcHRpb25zLnRvdWNoVGhyZXNob2xkLGUub3B0aW9ucy52ZXJ0aWNhbFN3aXBpbmc9PT0hMCYmKGUudG91Y2hPYmplY3QubWluU3dpcGU9ZS5saXN0SGVpZ2h0L2Uub3B0aW9ucy50b3VjaFRocmVzaG9sZCksaS5kYXRhLmFjdGlvbil7Y2FzZVwic3RhcnRcIjplLnN3aXBlU3RhcnQoaSk7YnJlYWs7Y2FzZVwibW92ZVwiOmUuc3dpcGVNb3ZlKGkpO2JyZWFrO2Nhc2VcImVuZFwiOmUuc3dpcGVFbmQoaSl9fSxlLnByb3RvdHlwZS5zd2lwZU1vdmU9ZnVuY3Rpb24oaSl7dmFyIGUsdCxvLHMsbixyLGw9dGhpcztyZXR1cm4gbj12b2lkIDAhPT1pLm9yaWdpbmFsRXZlbnQ/aS5vcmlnaW5hbEV2ZW50LnRvdWNoZXM6bnVsbCwhKCFsLmRyYWdnaW5nfHxsLnNjcm9sbGluZ3x8biYmMSE9PW4ubGVuZ3RoKSYmKGU9bC5nZXRMZWZ0KGwuY3VycmVudFNsaWRlKSxsLnRvdWNoT2JqZWN0LmN1clg9dm9pZCAwIT09bj9uWzBdLnBhZ2VYOmkuY2xpZW50WCxsLnRvdWNoT2JqZWN0LmN1clk9dm9pZCAwIT09bj9uWzBdLnBhZ2VZOmkuY2xpZW50WSxsLnRvdWNoT2JqZWN0LnN3aXBlTGVuZ3RoPU1hdGgucm91bmQoTWF0aC5zcXJ0KE1hdGgucG93KGwudG91Y2hPYmplY3QuY3VyWC1sLnRvdWNoT2JqZWN0LnN0YXJ0WCwyKSkpLHI9TWF0aC5yb3VuZChNYXRoLnNxcnQoTWF0aC5wb3cobC50b3VjaE9iamVjdC5jdXJZLWwudG91Y2hPYmplY3Quc3RhcnRZLDIpKSksIWwub3B0aW9ucy52ZXJ0aWNhbFN3aXBpbmcmJiFsLnN3aXBpbmcmJnI+ND8obC5zY3JvbGxpbmc9ITAsITEpOihsLm9wdGlvbnMudmVydGljYWxTd2lwaW5nPT09ITAmJihsLnRvdWNoT2JqZWN0LnN3aXBlTGVuZ3RoPXIpLHQ9bC5zd2lwZURpcmVjdGlvbigpLHZvaWQgMCE9PWkub3JpZ2luYWxFdmVudCYmbC50b3VjaE9iamVjdC5zd2lwZUxlbmd0aD40JiYobC5zd2lwaW5nPSEwLGkucHJldmVudERlZmF1bHQoKSkscz0obC5vcHRpb25zLnJ0bD09PSExPzE6LTEpKihsLnRvdWNoT2JqZWN0LmN1clg+bC50b3VjaE9iamVjdC5zdGFydFg/MTotMSksbC5vcHRpb25zLnZlcnRpY2FsU3dpcGluZz09PSEwJiYocz1sLnRvdWNoT2JqZWN0LmN1clk+bC50b3VjaE9iamVjdC5zdGFydFk/MTotMSksbz1sLnRvdWNoT2JqZWN0LnN3aXBlTGVuZ3RoLGwudG91Y2hPYmplY3QuZWRnZUhpdD0hMSxsLm9wdGlvbnMuaW5maW5pdGU9PT0hMSYmKDA9PT1sLmN1cnJlbnRTbGlkZSYmXCJyaWdodFwiPT09dHx8bC5jdXJyZW50U2xpZGU+PWwuZ2V0RG90Q291bnQoKSYmXCJsZWZ0XCI9PT10KSYmKG89bC50b3VjaE9iamVjdC5zd2lwZUxlbmd0aCpsLm9wdGlvbnMuZWRnZUZyaWN0aW9uLGwudG91Y2hPYmplY3QuZWRnZUhpdD0hMCksbC5vcHRpb25zLnZlcnRpY2FsPT09ITE/bC5zd2lwZUxlZnQ9ZStvKnM6bC5zd2lwZUxlZnQ9ZStvKihsLiRsaXN0LmhlaWdodCgpL2wubGlzdFdpZHRoKSpzLGwub3B0aW9ucy52ZXJ0aWNhbFN3aXBpbmc9PT0hMCYmKGwuc3dpcGVMZWZ0PWUrbypzKSxsLm9wdGlvbnMuZmFkZSE9PSEwJiZsLm9wdGlvbnMudG91Y2hNb3ZlIT09ITEmJihsLmFuaW1hdGluZz09PSEwPyhsLnN3aXBlTGVmdD1udWxsLCExKTp2b2lkIGwuc2V0Q1NTKGwuc3dpcGVMZWZ0KSkpKX0sZS5wcm90b3R5cGUuc3dpcGVTdGFydD1mdW5jdGlvbihpKXt2YXIgZSx0PXRoaXM7cmV0dXJuIHQuaW50ZXJydXB0ZWQ9ITAsMSE9PXQudG91Y2hPYmplY3QuZmluZ2VyQ291bnR8fHQuc2xpZGVDb3VudDw9dC5vcHRpb25zLnNsaWRlc1RvU2hvdz8odC50b3VjaE9iamVjdD17fSwhMSk6KHZvaWQgMCE9PWkub3JpZ2luYWxFdmVudCYmdm9pZCAwIT09aS5vcmlnaW5hbEV2ZW50LnRvdWNoZXMmJihlPWkub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdKSx0LnRvdWNoT2JqZWN0LnN0YXJ0WD10LnRvdWNoT2JqZWN0LmN1clg9dm9pZCAwIT09ZT9lLnBhZ2VYOmkuY2xpZW50WCx0LnRvdWNoT2JqZWN0LnN0YXJ0WT10LnRvdWNoT2JqZWN0LmN1clk9dm9pZCAwIT09ZT9lLnBhZ2VZOmkuY2xpZW50WSx2b2lkKHQuZHJhZ2dpbmc9ITApKX0sZS5wcm90b3R5cGUudW5maWx0ZXJTbGlkZXM9ZS5wcm90b3R5cGUuc2xpY2tVbmZpbHRlcj1mdW5jdGlvbigpe3ZhciBpPXRoaXM7bnVsbCE9PWkuJHNsaWRlc0NhY2hlJiYoaS51bmxvYWQoKSxpLiRzbGlkZVRyYWNrLmNoaWxkcmVuKHRoaXMub3B0aW9ucy5zbGlkZSkuZGV0YWNoKCksaS4kc2xpZGVzQ2FjaGUuYXBwZW5kVG8oaS4kc2xpZGVUcmFjayksaS5yZWluaXQoKSl9LGUucHJvdG90eXBlLnVubG9hZD1mdW5jdGlvbigpe3ZhciBlPXRoaXM7aShcIi5zbGljay1jbG9uZWRcIixlLiRzbGlkZXIpLnJlbW92ZSgpLGUuJGRvdHMmJmUuJGRvdHMucmVtb3ZlKCksZS4kcHJldkFycm93JiZlLmh0bWxFeHByLnRlc3QoZS5vcHRpb25zLnByZXZBcnJvdykmJmUuJHByZXZBcnJvdy5yZW1vdmUoKSxlLiRuZXh0QXJyb3cmJmUuaHRtbEV4cHIudGVzdChlLm9wdGlvbnMubmV4dEFycm93KSYmZS4kbmV4dEFycm93LnJlbW92ZSgpLGUuJHNsaWRlcy5yZW1vdmVDbGFzcyhcInNsaWNrLXNsaWRlIHNsaWNrLWFjdGl2ZSBzbGljay12aXNpYmxlIHNsaWNrLWN1cnJlbnRcIikuYXR0cihcImFyaWEtaGlkZGVuXCIsXCJ0cnVlXCIpLmNzcyhcIndpZHRoXCIsXCJcIil9LGUucHJvdG90eXBlLnVuc2xpY2s9ZnVuY3Rpb24oaSl7dmFyIGU9dGhpcztlLiRzbGlkZXIudHJpZ2dlcihcInVuc2xpY2tcIixbZSxpXSksZS5kZXN0cm95KCl9LGUucHJvdG90eXBlLnVwZGF0ZUFycm93cz1mdW5jdGlvbigpe3ZhciBpLGU9dGhpcztpPU1hdGguZmxvb3IoZS5vcHRpb25zLnNsaWRlc1RvU2hvdy8yKSxlLm9wdGlvbnMuYXJyb3dzPT09ITAmJmUuc2xpZGVDb3VudD5lLm9wdGlvbnMuc2xpZGVzVG9TaG93JiYhZS5vcHRpb25zLmluZmluaXRlJiYoZS4kcHJldkFycm93LnJlbW92ZUNsYXNzKFwic2xpY2stZGlzYWJsZWRcIikuYXR0cihcImFyaWEtZGlzYWJsZWRcIixcImZhbHNlXCIpLGUuJG5leHRBcnJvdy5yZW1vdmVDbGFzcyhcInNsaWNrLWRpc2FibGVkXCIpLmF0dHIoXCJhcmlhLWRpc2FibGVkXCIsXCJmYWxzZVwiKSwwPT09ZS5jdXJyZW50U2xpZGU/KGUuJHByZXZBcnJvdy5hZGRDbGFzcyhcInNsaWNrLWRpc2FibGVkXCIpLmF0dHIoXCJhcmlhLWRpc2FibGVkXCIsXCJ0cnVlXCIpLGUuJG5leHRBcnJvdy5yZW1vdmVDbGFzcyhcInNsaWNrLWRpc2FibGVkXCIpLmF0dHIoXCJhcmlhLWRpc2FibGVkXCIsXCJmYWxzZVwiKSk6ZS5jdXJyZW50U2xpZGU+PWUuc2xpZGVDb3VudC1lLm9wdGlvbnMuc2xpZGVzVG9TaG93JiZlLm9wdGlvbnMuY2VudGVyTW9kZT09PSExPyhlLiRuZXh0QXJyb3cuYWRkQ2xhc3MoXCJzbGljay1kaXNhYmxlZFwiKS5hdHRyKFwiYXJpYS1kaXNhYmxlZFwiLFwidHJ1ZVwiKSxlLiRwcmV2QXJyb3cucmVtb3ZlQ2xhc3MoXCJzbGljay1kaXNhYmxlZFwiKS5hdHRyKFwiYXJpYS1kaXNhYmxlZFwiLFwiZmFsc2VcIikpOmUuY3VycmVudFNsaWRlPj1lLnNsaWRlQ291bnQtMSYmZS5vcHRpb25zLmNlbnRlck1vZGU9PT0hMCYmKGUuJG5leHRBcnJvdy5hZGRDbGFzcyhcInNsaWNrLWRpc2FibGVkXCIpLmF0dHIoXCJhcmlhLWRpc2FibGVkXCIsXCJ0cnVlXCIpLGUuJHByZXZBcnJvdy5yZW1vdmVDbGFzcyhcInNsaWNrLWRpc2FibGVkXCIpLmF0dHIoXCJhcmlhLWRpc2FibGVkXCIsXCJmYWxzZVwiKSkpfSxlLnByb3RvdHlwZS51cGRhdGVEb3RzPWZ1bmN0aW9uKCl7dmFyIGk9dGhpcztudWxsIT09aS4kZG90cyYmKGkuJGRvdHMuZmluZChcImxpXCIpLnJlbW92ZUNsYXNzKFwic2xpY2stYWN0aXZlXCIpLmVuZCgpLGkuJGRvdHMuZmluZChcImxpXCIpLmVxKE1hdGguZmxvb3IoaS5jdXJyZW50U2xpZGUvaS5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsKSkuYWRkQ2xhc3MoXCJzbGljay1hY3RpdmVcIikpfSxlLnByb3RvdHlwZS52aXNpYmlsaXR5PWZ1bmN0aW9uKCl7dmFyIGk9dGhpcztpLm9wdGlvbnMuYXV0b3BsYXkmJihkb2N1bWVudFtpLmhpZGRlbl0/aS5pbnRlcnJ1cHRlZD0hMDppLmludGVycnVwdGVkPSExKX0saS5mbi5zbGljaz1mdW5jdGlvbigpe3ZhciBpLHQsbz10aGlzLHM9YXJndW1lbnRzWzBdLG49QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpLHI9by5sZW5ndGg7Zm9yKGk9MDtpPHI7aSsrKWlmKFwib2JqZWN0XCI9PXR5cGVvZiBzfHxcInVuZGVmaW5lZFwiPT10eXBlb2Ygcz9vW2ldLnNsaWNrPW5ldyBlKG9baV0scyk6dD1vW2ldLnNsaWNrW3NdLmFwcGx5KG9baV0uc2xpY2ssbiksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHQpcmV0dXJuIHQ7cmV0dXJuIG99fSk7IiwiIWZ1bmN0aW9uKGUpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW10sZSk6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZSYmbnVsbCE9PW1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZTplKCl9KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtyZXR1cm4gbmV3IEN1c3RvbUV2ZW50KGUsUCl9ZnVuY3Rpb24gdChlKXtyZXR1cm4gZVtCXXx8KGVbQl09e30pfWZ1bmN0aW9uIG4oZSxuLGksbyxhKXtmdW5jdGlvbiBjKGUpe2koZSxvKX1uPW4uc3BsaXQoTyk7Zm9yKHZhciB1LHI9dChlKSxkPW4ubGVuZ3RoO2QtLTspKHJbdT1uW2RdXXx8KHJbdV09W10pKS5wdXNoKFtpLGNdKSxlLmFkZEV2ZW50TGlzdGVuZXIodSxjKX1mdW5jdGlvbiBpKGUsbixpLG8pe249bi5zcGxpdChPKTt2YXIgYSxjLHUscj10KGUpLGQ9bi5sZW5ndGg7aWYocilmb3IoO2QtLTspaWYoYT1uW2RdLGM9clthXSlmb3IodT1jLmxlbmd0aDt1LS07KWNbdV1bMF09PT1pJiYoZS5yZW1vdmVFdmVudExpc3RlbmVyKGEsY1t1XVsxXSksYy5zcGxpY2UodSwxKSl9ZnVuY3Rpb24gbyh0LG4saSl7dmFyIG89ZShuKTtpJiZMKG8saSksdC5kaXNwYXRjaEV2ZW50KG8pfWZ1bmN0aW9uIGEoZSl7ZnVuY3Rpb24gdChlKXtpPyhuKCksQyh0KSxvPSEwLGk9ITEpOm89ITF9dmFyIG49ZSxpPSExLG89ITE7dGhpcy5raWNrPWZ1bmN0aW9uKGUpe2k9ITAsb3x8dCgpfSx0aGlzLmVuZD1mdW5jdGlvbihlKXt2YXIgdD1uO2UmJihvPyhuPWk/ZnVuY3Rpb24oKXt0KCksZSgpfTplLGk9ITApOmUoKSl9fWZ1bmN0aW9uIGMoKXt9ZnVuY3Rpb24gdShlKXtlLnByZXZlbnREZWZhdWx0KCl9ZnVuY3Rpb24gcihlKXtyZXR1cm4hIURbZS50YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpXX1mdW5jdGlvbiBkKGUpe3JldHVybiAxPT09ZS53aGljaCYmIWUuY3RybEtleSYmIWUuYWx0S2V5fWZ1bmN0aW9uIG0oZSx0KXt2YXIgbixpO2lmKGUuaWRlbnRpZmllZFRvdWNoKXJldHVybiBlLmlkZW50aWZpZWRUb3VjaCh0KTtmb3Iobj0tMSxpPWUubGVuZ3RoOysrbjxpOylpZihlW25dLmlkZW50aWZpZXI9PT10KXJldHVybiBlW25dfWZ1bmN0aW9uIGYoZSx0KXt2YXIgbj1tKGUuY2hhbmdlZFRvdWNoZXMsdC5pZGVudGlmaWVyKTtpZihuJiYobi5wYWdlWCE9PXQucGFnZVh8fG4ucGFnZVkhPT10LnBhZ2VZKSlyZXR1cm4gbn1mdW5jdGlvbiB2KGUpe2QoZSkmJihyKGUpfHwobihkb2N1bWVudCxOLm1vdmUscyxlKSxuKGRvY3VtZW50LE4uY2FuY2VsLGwsZSkpKX1mdW5jdGlvbiBzKGUsdCl7eShlLHQsZSxnKX1mdW5jdGlvbiBsKGUsdCl7ZygpfWZ1bmN0aW9uIGcoKXtpKGRvY3VtZW50LE4ubW92ZSxzKSxpKGRvY3VtZW50LE4uY2FuY2VsLGwpfWZ1bmN0aW9uIHAoZSl7aWYoIURbZS50YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpXSl7dmFyIHQ9ZS5jaGFuZ2VkVG91Y2hlc1swXSxpPXt0YXJnZXQ6dC50YXJnZXQscGFnZVg6dC5wYWdlWCxwYWdlWTp0LnBhZ2VZLGlkZW50aWZpZXI6dC5pZGVudGlmaWVyLHRvdWNobW92ZTpmdW5jdGlvbihlLHQpe2goZSx0KX0sdG91Y2hlbmQ6ZnVuY3Rpb24oZSx0KXtYKGUsdCl9fTtuKGRvY3VtZW50LHoubW92ZSxpLnRvdWNobW92ZSxpKSxuKGRvY3VtZW50LHouY2FuY2VsLGkudG91Y2hlbmQsaSl9fWZ1bmN0aW9uIGgoZSx0KXt2YXIgbj1mKGUsdCk7biYmeShlLHQsbixZKX1mdW5jdGlvbiBYKGUsdCl7bShlLmNoYW5nZWRUb3VjaGVzLHQuaWRlbnRpZmllcikmJlkodCl9ZnVuY3Rpb24gWShlKXtpKGRvY3VtZW50LHoubW92ZSxlLnRvdWNobW92ZSksaShkb2N1bWVudCx6LmNhbmNlbCxlLnRvdWNoZW5kKX1mdW5jdGlvbiB5KGUsdCxuLGkpe3ZhciBvPW4ucGFnZVgtdC5wYWdlWCxhPW4ucGFnZVktdC5wYWdlWTtvKm8rYSphPFIqUnx8dyhlLHQsbixvLGEsaSl9ZnVuY3Rpb24gdyhlLHQsbixpLGEsdSl7dmFyIHI9ZS50YXJnZXRUb3VjaGVzLGQ9ZS50aW1lU3RhbXAtdC50aW1lU3RhbXAsbT17YWx0S2V5OmUuYWx0S2V5LGN0cmxLZXk6ZS5jdHJsS2V5LHNoaWZ0S2V5OmUuc2hpZnRLZXksc3RhcnRYOnQucGFnZVgsc3RhcnRZOnQucGFnZVksZGlzdFg6aSxkaXN0WTphLGRlbHRhWDppLGRlbHRhWTphLHBhZ2VYOm4ucGFnZVgscGFnZVk6bi5wYWdlWSx2ZWxvY2l0eVg6aS9kLHZlbG9jaXR5WTphL2QsaWRlbnRpZmllcjp0LmlkZW50aWZpZXIsdGFyZ2V0VG91Y2hlczpyLGZpbmdlcjpyP3IubGVuZ3RoOjEsZW5hYmxlTW92ZTpmdW5jdGlvbigpe3RoaXMubW92ZUVuYWJsZWQ9ITAsdGhpcy5lbmFibGVNb3ZlPWMsZS5wcmV2ZW50RGVmYXVsdCgpfX07byh0LnRhcmdldCxcIm1vdmVzdGFydFwiLG0pLHUodCl9ZnVuY3Rpb24gVChlLHQpe3ZhciBuPXQudGltZXI7dC50b3VjaD1lLHQudGltZVN0YW1wPWUudGltZVN0YW1wLG4ua2ljaygpfWZ1bmN0aW9uIGIoZSx0KXt2YXIgbj10LnRhcmdldCxvPXQuZXZlbnQsYT10LnRpbWVyO1MoKSxRKG4sbyxhLGZ1bmN0aW9uKCl7c2V0VGltZW91dChmdW5jdGlvbigpe2kobixcImNsaWNrXCIsdSl9LDApfSl9ZnVuY3Rpb24gUygpe2koZG9jdW1lbnQsTi5tb3ZlLFQpLGkoZG9jdW1lbnQsTi5lbmQsYil9ZnVuY3Rpb24gayhlLHQpe3ZhciBuPXQuZXZlbnQsaT10LnRpbWVyLG89ZihlLG4pO28mJihlLnByZXZlbnREZWZhdWx0KCksbi50YXJnZXRUb3VjaGVzPWUudGFyZ2V0VG91Y2hlcyx0LnRvdWNoPW8sdC50aW1lU3RhbXA9ZS50aW1lU3RhbXAsaS5raWNrKCkpfWZ1bmN0aW9uIEsoZSx0KXt2YXIgbj10LnRhcmdldCxpPXQuZXZlbnQsbz10LnRpbWVyO20oZS5jaGFuZ2VkVG91Y2hlcyxpLmlkZW50aWZpZXIpJiYoaih0KSxRKG4saSxvKSl9ZnVuY3Rpb24gaihlKXtpKGRvY3VtZW50LHoubW92ZSxlLmFjdGl2ZVRvdWNobW92ZSksaShkb2N1bWVudCx6LmVuZCxlLmFjdGl2ZVRvdWNoZW5kKX1mdW5jdGlvbiBFKGUsdCxuKXt2YXIgaT1uLWUudGltZVN0YW1wO2UuZGlzdFg9dC5wYWdlWC1lLnN0YXJ0WCxlLmRpc3RZPXQucGFnZVktZS5zdGFydFksZS5kZWx0YVg9dC5wYWdlWC1lLnBhZ2VYLGUuZGVsdGFZPXQucGFnZVktZS5wYWdlWSxlLnZlbG9jaXR5WD0uMyplLnZlbG9jaXR5WCsuNyplLmRlbHRhWC9pLGUudmVsb2NpdHlZPS4zKmUudmVsb2NpdHlZKy43KmUuZGVsdGFZL2ksZS5wYWdlWD10LnBhZ2VYLGUucGFnZVk9dC5wYWdlWX1mdW5jdGlvbiBRKGUsdCxuLGkpe24uZW5kKGZ1bmN0aW9uKCl7cmV0dXJuIG8oZSxcIm1vdmVlbmRcIix0KSxpJiZpKCl9KX1mdW5jdGlvbiBxKGUpe2Z1bmN0aW9uIHQoZSl7RShpLGMudG91Y2gsYy50aW1lU3RhbXApLG8oYy50YXJnZXQsXCJtb3ZlXCIsaSl9aWYoIWUuZGVmYXVsdFByZXZlbnRlZCYmZS5tb3ZlRW5hYmxlZCl7dmFyIGk9e3N0YXJ0WDplLnN0YXJ0WCxzdGFydFk6ZS5zdGFydFkscGFnZVg6ZS5wYWdlWCxwYWdlWTplLnBhZ2VZLGRpc3RYOmUuZGlzdFgsZGlzdFk6ZS5kaXN0WSxkZWx0YVg6ZS5kZWx0YVgsZGVsdGFZOmUuZGVsdGFZLHZlbG9jaXR5WDplLnZlbG9jaXR5WCx2ZWxvY2l0eVk6ZS52ZWxvY2l0eVksaWRlbnRpZmllcjplLmlkZW50aWZpZXIsdGFyZ2V0VG91Y2hlczplLnRhcmdldFRvdWNoZXMsZmluZ2VyOmUuZmluZ2VyfSxjPXt0YXJnZXQ6ZS50YXJnZXQsZXZlbnQ6aSx0aW1lcjpuZXcgYSh0KSx0b3VjaDp2b2lkIDAsdGltZVN0YW1wOmUudGltZVN0YW1wfTt2b2lkIDA9PT1lLmlkZW50aWZpZXI/KG4oZS50YXJnZXQsXCJjbGlja1wiLHUpLG4oZG9jdW1lbnQsTi5tb3ZlLFQsYyksbihkb2N1bWVudCxOLmVuZCxiLGMpKTooYy5hY3RpdmVUb3VjaG1vdmU9ZnVuY3Rpb24oZSx0KXtrKGUsdCl9LGMuYWN0aXZlVG91Y2hlbmQ9ZnVuY3Rpb24oZSx0KXtLKGUsdCl9LG4oZG9jdW1lbnQsei5tb3ZlLGMuYWN0aXZlVG91Y2htb3ZlLGMpLG4oZG9jdW1lbnQsei5lbmQsYy5hY3RpdmVUb3VjaGVuZCxjKSl9fWZ1bmN0aW9uIEEoZSl7ZS5lbmFibGVNb3ZlKCl9ZnVuY3Rpb24gRihlKXtlLmVuYWJsZU1vdmUoKX1mdW5jdGlvbiBNKGUpe2UuZW5hYmxlTW92ZSgpfWZ1bmN0aW9uIHgoZSl7dmFyIHQ9ZS5oYW5kbGVyO2UuaGFuZGxlcj1mdW5jdGlvbihlKXtmb3IodmFyIG4saT1HLmxlbmd0aDtpLS07KWVbbj1HW2ldXT1lLm9yaWdpbmFsRXZlbnRbbl07dC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fXZhciBMPU9iamVjdC5hc3NpZ258fHdpbmRvdy5qUXVlcnkmJmpRdWVyeS5leHRlbmQsUj04LEM9ZnVuY3Rpb24oKXtyZXR1cm4gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZXx8d2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZXx8d2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZXx8d2luZG93Lm9SZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5tc1JlcXVlc3RBbmltYXRpb25GcmFtZXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtlKCl9LDI1KX19KCksRD17dGV4dGFyZWE6ITAsaW5wdXQ6ITAsc2VsZWN0OiEwLGJ1dHRvbjohMH0sTj17bW92ZTpcIm1vdXNlbW92ZVwiLGNhbmNlbDpcIm1vdXNldXAgZHJhZ3N0YXJ0XCIsZW5kOlwibW91c2V1cFwifSx6PXttb3ZlOlwidG91Y2htb3ZlXCIsY2FuY2VsOlwidG91Y2hlbmRcIixlbmQ6XCJ0b3VjaGVuZFwifSxPPS9cXHMrLyxQPXtidWJibGVzOiEwLGNhbmNlbGFibGU6ITB9LEI9U3ltYm9sKFwiZXZlbnRzXCIpO2lmKG4oZG9jdW1lbnQsXCJtb3VzZWRvd25cIix2KSxuKGRvY3VtZW50LFwidG91Y2hzdGFydFwiLHApLG4oZG9jdW1lbnQsXCJtb3Zlc3RhcnRcIixxKSx3aW5kb3cualF1ZXJ5KXt2YXIgRz1cInN0YXJ0WCBzdGFydFkgcGFnZVggcGFnZVkgZGlzdFggZGlzdFkgZGVsdGFYIGRlbHRhWSB2ZWxvY2l0eVggdmVsb2NpdHlZXCIuc3BsaXQoXCIgXCIpO2pRdWVyeS5ldmVudC5zcGVjaWFsLm1vdmVzdGFydD17c2V0dXA6ZnVuY3Rpb24oKXtyZXR1cm4gbih0aGlzLFwibW92ZXN0YXJ0XCIsQSksITF9LHRlYXJkb3duOmZ1bmN0aW9uKCl7cmV0dXJuIGkodGhpcyxcIm1vdmVzdGFydFwiLEEpLCExfSxhZGQ6eH0salF1ZXJ5LmV2ZW50LnNwZWNpYWwubW92ZT17c2V0dXA6ZnVuY3Rpb24oKXtyZXR1cm4gbih0aGlzLFwibW92ZXN0YXJ0XCIsRiksITF9LHRlYXJkb3duOmZ1bmN0aW9uKCl7cmV0dXJuIGkodGhpcyxcIm1vdmVzdGFydFwiLEYpLCExfSxhZGQ6eH0salF1ZXJ5LmV2ZW50LnNwZWNpYWwubW92ZWVuZD17c2V0dXA6ZnVuY3Rpb24oKXtyZXR1cm4gbih0aGlzLFwibW92ZXN0YXJ0XCIsTSksITF9LHRlYXJkb3duOmZ1bmN0aW9uKCl7cmV0dXJuIGkodGhpcyxcIm1vdmVzdGFydFwiLE0pLCExfSxhZGQ6eH19fSk7IiwiIWZ1bmN0aW9uKHQpe3QuZm4udHdlbnR5dHdlbnR5PWZ1bmN0aW9uKGUpe3ZhciBlPXQuZXh0ZW5kKHtkZWZhdWx0X29mZnNldF9wY3Q6LjUsb3JpZW50YXRpb246XCJob3Jpem9udGFsXCIsYmVmb3JlX2xhYmVsOlwiQmVmb3JlXCIsYWZ0ZXJfbGFiZWw6XCJBZnRlclwiLG5vX292ZXJsYXk6ITF9LGUpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgbj1lLmRlZmF1bHRfb2Zmc2V0X3BjdCxhPXQodGhpcyksaT1lLm9yaWVudGF0aW9uLHM9XCJ2ZXJ0aWNhbFwiPT09aT9cImRvd25cIjpcImxlZnRcIixyPVwidmVydGljYWxcIj09PWk/XCJ1cFwiOlwicmlnaHRcIjthLndyYXAoXCI8ZGl2IGNsYXNzPSd0d2VudHl0d2VudHktd3JhcHBlciB0d2VudHl0d2VudHktXCIraStcIic+PC9kaXY+XCIpLGUubm9fb3ZlcmxheXx8YS5hcHBlbmQoXCI8ZGl2IGNsYXNzPSd0d2VudHl0d2VudHktb3ZlcmxheSc+PC9kaXY+XCIpO3ZhciBkPWEuZmluZChcImltZzpmaXJzdFwiKSxjPWEuZmluZChcImltZzpsYXN0XCIpO2EuYXBwZW5kKFwiPGRpdiBjbGFzcz0ndHdlbnR5dHdlbnR5LWhhbmRsZSc+PC9kaXY+XCIpO3ZhciBsPWEuZmluZChcIi50d2VudHl0d2VudHktaGFuZGxlXCIpO2wuYXBwZW5kKFwiPHNwYW4gY2xhc3M9J3R3ZW50eXR3ZW50eS1cIitzK1wiLWFycm93Jz48L3NwYW4+XCIpLGwuYXBwZW5kKFwiPHNwYW4gY2xhc3M9J3R3ZW50eXR3ZW50eS1cIityK1wiLWFycm93Jz48L3NwYW4+XCIpLGEuYWRkQ2xhc3MoXCJ0d2VudHl0d2VudHktY29udGFpbmVyXCIpLGQuYWRkQ2xhc3MoXCJ0d2VudHl0d2VudHktYmVmb3JlXCIpLGMuYWRkQ2xhc3MoXCJ0d2VudHl0d2VudHktYWZ0ZXJcIik7dmFyIG89YS5maW5kKFwiLnR3ZW50eXR3ZW50eS1vdmVybGF5XCIpO28uYXBwZW5kKFwiPGRpdiBjbGFzcz0ndHdlbnR5dHdlbnR5LWJlZm9yZS1sYWJlbCcgZGF0YS1jb250ZW50PSdcIitlLmJlZm9yZV9sYWJlbCtcIic+PC9kaXY+XCIpLG8uYXBwZW5kKFwiPGRpdiBjbGFzcz0ndHdlbnR5dHdlbnR5LWFmdGVyLWxhYmVsJyBkYXRhLWNvbnRlbnQ9J1wiK2UuYWZ0ZXJfbGFiZWwrXCInPjwvZGl2PlwiKTt2YXIgdz1mdW5jdGlvbih0KXt2YXIgZT1kLndpZHRoKCksbj1kLmhlaWdodCgpO3JldHVybnt3OmUrXCJweFwiLGg6bitcInB4XCIsY3c6dCplK1wicHhcIixjaDp0Km4rXCJweFwifX0sZj1mdW5jdGlvbih0KXtcInZlcnRpY2FsXCI9PT1pPyhkLmNzcyhcImNsaXBcIixcInJlY3QoMCxcIit0LncrXCIsXCIrdC5jaCtcIiwwKVwiKSxjLmNzcyhcImNsaXBcIixcInJlY3QoXCIrdC5jaCtcIixcIit0LncrXCIsXCIrdC5oK1wiLDApXCIpKTooZC5jc3MoXCJjbGlwXCIsXCJyZWN0KDAsXCIrdC5jdytcIixcIit0LmgrXCIsMClcIiksYy5jc3MoXCJjbGlwXCIsXCJyZWN0KDAsXCIrdC53K1wiLFwiK3QuaCtcIixcIit0LmN3K1wiKVwiKSksYS5jc3MoXCJoZWlnaHRcIix0LmgpfSx2PWZ1bmN0aW9uKHQpe3ZhciBlPXcodCk7bC5jc3MoXCJ2ZXJ0aWNhbFwiPT09aT9cInRvcFwiOlwibGVmdFwiLFwidmVydGljYWxcIj09PWk/ZS5jaDplLmN3KSxmKGUpfTt0KHdpbmRvdykub24oXCJyZXNpemUudHdlbnR5dHdlbnR5XCIsZnVuY3Rpb24odCl7dihuKX0pO3ZhciBwPTAseT0wLGg9MCx1PTA7bC5vbihcIm1vdmVzdGFydFwiLGZ1bmN0aW9uKHQpeyh0LmRpc3RYPnQuZGlzdFkmJnQuZGlzdFg8LXQuZGlzdFl8fHQuZGlzdFg8dC5kaXN0WSYmdC5kaXN0WD4tdC5kaXN0WSkmJlwidmVydGljYWxcIiE9PWk/dC5wcmV2ZW50RGVmYXVsdCgpOih0LmRpc3RYPHQuZGlzdFkmJnQuZGlzdFg8LXQuZGlzdFl8fHQuZGlzdFg+dC5kaXN0WSYmdC5kaXN0WD4tdC5kaXN0WSkmJlwidmVydGljYWxcIj09PWkmJnQucHJldmVudERlZmF1bHQoKSxhLmFkZENsYXNzKFwiYWN0aXZlXCIpLHA9YS5vZmZzZXQoKS5sZWZ0LHk9YS5vZmZzZXQoKS50b3AsaD1kLndpZHRoKCksdT1kLmhlaWdodCgpfSksbC5vbihcIm1vdmVlbmRcIixmdW5jdGlvbih0KXthLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpfSksbC5vbihcIm1vdmVcIixmdW5jdGlvbih0KXthLmhhc0NsYXNzKFwiYWN0aXZlXCIpJiYoKG49XCJ2ZXJ0aWNhbFwiPT09aT8odC5wYWdlWS15KS91Oih0LnBhZ2VYLXApL2gpPDAmJihuPTApLG4+MSYmKG49MSksdihuKSl9KSxhLmZpbmQoXCJpbWdcIikub24oXCJtb3VzZWRvd25cIixmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCl9KSx0KHdpbmRvdykudHJpZ2dlcihcInJlc2l6ZS50d2VudHl0d2VudHlcIil9KX19KGpRdWVyeSk7IiwiLyohXHJcbldheXBvaW50cyAtIDQuMC4xXHJcbkNvcHlyaWdodCDCqSAyMDExLTIwMTYgQ2FsZWIgVHJvdWdodG9uXHJcbkxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cclxuaHR0cHM6Ly9naXRodWIuY29tL2ltYWtld2VidGhpbmdzL3dheXBvaW50cy9ibG9iL21hc3Rlci9saWNlbnNlcy50eHRcclxuKi9cclxuIWZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChvKXtpZighbyl0aHJvdyBuZXcgRXJyb3IoXCJObyBvcHRpb25zIHBhc3NlZCB0byBXYXlwb2ludCBjb25zdHJ1Y3RvclwiKTtpZighby5lbGVtZW50KXRocm93IG5ldyBFcnJvcihcIk5vIGVsZW1lbnQgb3B0aW9uIHBhc3NlZCB0byBXYXlwb2ludCBjb25zdHJ1Y3RvclwiKTtpZighby5oYW5kbGVyKXRocm93IG5ldyBFcnJvcihcIk5vIGhhbmRsZXIgb3B0aW9uIHBhc3NlZCB0byBXYXlwb2ludCBjb25zdHJ1Y3RvclwiKTt0aGlzLmtleT1cIndheXBvaW50LVwiK2UsdGhpcy5vcHRpb25zPXQuQWRhcHRlci5leHRlbmQoe30sdC5kZWZhdWx0cyxvKSx0aGlzLmVsZW1lbnQ9dGhpcy5vcHRpb25zLmVsZW1lbnQsdGhpcy5hZGFwdGVyPW5ldyB0LkFkYXB0ZXIodGhpcy5lbGVtZW50KSx0aGlzLmNhbGxiYWNrPW8uaGFuZGxlcix0aGlzLmF4aXM9dGhpcy5vcHRpb25zLmhvcml6b250YWw/XCJob3Jpem9udGFsXCI6XCJ2ZXJ0aWNhbFwiLHRoaXMuZW5hYmxlZD10aGlzLm9wdGlvbnMuZW5hYmxlZCx0aGlzLnRyaWdnZXJQb2ludD1udWxsLHRoaXMuZ3JvdXA9dC5Hcm91cC5maW5kT3JDcmVhdGUoe25hbWU6dGhpcy5vcHRpb25zLmdyb3VwLGF4aXM6dGhpcy5heGlzfSksdGhpcy5jb250ZXh0PXQuQ29udGV4dC5maW5kT3JDcmVhdGVCeUVsZW1lbnQodGhpcy5vcHRpb25zLmNvbnRleHQpLHQub2Zmc2V0QWxpYXNlc1t0aGlzLm9wdGlvbnMub2Zmc2V0XSYmKHRoaXMub3B0aW9ucy5vZmZzZXQ9dC5vZmZzZXRBbGlhc2VzW3RoaXMub3B0aW9ucy5vZmZzZXRdKSx0aGlzLmdyb3VwLmFkZCh0aGlzKSx0aGlzLmNvbnRleHQuYWRkKHRoaXMpLGlbdGhpcy5rZXldPXRoaXMsZSs9MX12YXIgZT0wLGk9e307dC5wcm90b3R5cGUucXVldWVUcmlnZ2VyPWZ1bmN0aW9uKHQpe3RoaXMuZ3JvdXAucXVldWVUcmlnZ2VyKHRoaXMsdCl9LHQucHJvdG90eXBlLnRyaWdnZXI9ZnVuY3Rpb24odCl7dGhpcy5lbmFibGVkJiZ0aGlzLmNhbGxiYWNrJiZ0aGlzLmNhbGxiYWNrLmFwcGx5KHRoaXMsdCl9LHQucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLmNvbnRleHQucmVtb3ZlKHRoaXMpLHRoaXMuZ3JvdXAucmVtb3ZlKHRoaXMpLGRlbGV0ZSBpW3RoaXMua2V5XX0sdC5wcm90b3R5cGUuZGlzYWJsZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVuYWJsZWQ9ITEsdGhpc30sdC5wcm90b3R5cGUuZW5hYmxlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGV4dC5yZWZyZXNoKCksdGhpcy5lbmFibGVkPSEwLHRoaXN9LHQucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ncm91cC5uZXh0KHRoaXMpfSx0LnByb3RvdHlwZS5wcmV2aW91cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdyb3VwLnByZXZpb3VzKHRoaXMpfSx0Lmludm9rZUFsbD1mdW5jdGlvbih0KXt2YXIgZT1bXTtmb3IodmFyIG8gaW4gaSllLnB1c2goaVtvXSk7Zm9yKHZhciBuPTAscj1lLmxlbmd0aDtyPm47bisrKWVbbl1bdF0oKX0sdC5kZXN0cm95QWxsPWZ1bmN0aW9uKCl7dC5pbnZva2VBbGwoXCJkZXN0cm95XCIpfSx0LmRpc2FibGVBbGw9ZnVuY3Rpb24oKXt0Lmludm9rZUFsbChcImRpc2FibGVcIil9LHQuZW5hYmxlQWxsPWZ1bmN0aW9uKCl7dC5Db250ZXh0LnJlZnJlc2hBbGwoKTtmb3IodmFyIGUgaW4gaSlpW2VdLmVuYWJsZWQ9ITA7cmV0dXJuIHRoaXN9LHQucmVmcmVzaEFsbD1mdW5jdGlvbigpe3QuQ29udGV4dC5yZWZyZXNoQWxsKCl9LHQudmlld3BvcnRIZWlnaHQ9ZnVuY3Rpb24oKXtyZXR1cm4gd2luZG93LmlubmVySGVpZ2h0fHxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0fSx0LnZpZXdwb3J0V2lkdGg9ZnVuY3Rpb24oKXtyZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRofSx0LmFkYXB0ZXJzPVtdLHQuZGVmYXVsdHM9e2NvbnRleHQ6d2luZG93LGNvbnRpbnVvdXM6ITAsZW5hYmxlZDohMCxncm91cDpcImRlZmF1bHRcIixob3Jpem9udGFsOiExLG9mZnNldDowfSx0Lm9mZnNldEFsaWFzZXM9e1wiYm90dG9tLWluLXZpZXdcIjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRleHQuaW5uZXJIZWlnaHQoKS10aGlzLmFkYXB0ZXIub3V0ZXJIZWlnaHQoKX0sXCJyaWdodC1pbi12aWV3XCI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZXh0LmlubmVyV2lkdGgoKS10aGlzLmFkYXB0ZXIub3V0ZXJXaWR0aCgpfX0sd2luZG93LldheXBvaW50PXR9KCksZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KHQpe3dpbmRvdy5zZXRUaW1lb3V0KHQsMWUzLzYwKX1mdW5jdGlvbiBlKHQpe3RoaXMuZWxlbWVudD10LHRoaXMuQWRhcHRlcj1uLkFkYXB0ZXIsdGhpcy5hZGFwdGVyPW5ldyB0aGlzLkFkYXB0ZXIodCksdGhpcy5rZXk9XCJ3YXlwb2ludC1jb250ZXh0LVwiK2ksdGhpcy5kaWRTY3JvbGw9ITEsdGhpcy5kaWRSZXNpemU9ITEsdGhpcy5vbGRTY3JvbGw9e3g6dGhpcy5hZGFwdGVyLnNjcm9sbExlZnQoKSx5OnRoaXMuYWRhcHRlci5zY3JvbGxUb3AoKX0sdGhpcy53YXlwb2ludHM9e3ZlcnRpY2FsOnt9LGhvcml6b250YWw6e319LHQud2F5cG9pbnRDb250ZXh0S2V5PXRoaXMua2V5LG9bdC53YXlwb2ludENvbnRleHRLZXldPXRoaXMsaSs9MSxuLndpbmRvd0NvbnRleHR8fChuLndpbmRvd0NvbnRleHQ9ITAsbi53aW5kb3dDb250ZXh0PW5ldyBlKHdpbmRvdykpLHRoaXMuY3JlYXRlVGhyb3R0bGVkU2Nyb2xsSGFuZGxlcigpLHRoaXMuY3JlYXRlVGhyb3R0bGVkUmVzaXplSGFuZGxlcigpfXZhciBpPTAsbz17fSxuPXdpbmRvdy5XYXlwb2ludCxyPXdpbmRvdy5vbmxvYWQ7ZS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKHQpe3ZhciBlPXQub3B0aW9ucy5ob3Jpem9udGFsP1wiaG9yaXpvbnRhbFwiOlwidmVydGljYWxcIjt0aGlzLndheXBvaW50c1tlXVt0LmtleV09dCx0aGlzLnJlZnJlc2goKX0sZS5wcm90b3R5cGUuY2hlY2tFbXB0eT1mdW5jdGlvbigpe3ZhciB0PXRoaXMuQWRhcHRlci5pc0VtcHR5T2JqZWN0KHRoaXMud2F5cG9pbnRzLmhvcml6b250YWwpLGU9dGhpcy5BZGFwdGVyLmlzRW1wdHlPYmplY3QodGhpcy53YXlwb2ludHMudmVydGljYWwpLGk9dGhpcy5lbGVtZW50PT10aGlzLmVsZW1lbnQud2luZG93O3QmJmUmJiFpJiYodGhpcy5hZGFwdGVyLm9mZihcIi53YXlwb2ludHNcIiksZGVsZXRlIG9bdGhpcy5rZXldKX0sZS5wcm90b3R5cGUuY3JlYXRlVGhyb3R0bGVkUmVzaXplSGFuZGxlcj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtlLmhhbmRsZVJlc2l6ZSgpLGUuZGlkUmVzaXplPSExfXZhciBlPXRoaXM7dGhpcy5hZGFwdGVyLm9uKFwicmVzaXplLndheXBvaW50c1wiLGZ1bmN0aW9uKCl7ZS5kaWRSZXNpemV8fChlLmRpZFJlc2l6ZT0hMCxuLnJlcXVlc3RBbmltYXRpb25GcmFtZSh0KSl9KX0sZS5wcm90b3R5cGUuY3JlYXRlVGhyb3R0bGVkU2Nyb2xsSGFuZGxlcj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtlLmhhbmRsZVNjcm9sbCgpLGUuZGlkU2Nyb2xsPSExfXZhciBlPXRoaXM7dGhpcy5hZGFwdGVyLm9uKFwic2Nyb2xsLndheXBvaW50c1wiLGZ1bmN0aW9uKCl7KCFlLmRpZFNjcm9sbHx8bi5pc1RvdWNoKSYmKGUuZGlkU2Nyb2xsPSEwLG4ucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHQpKX0pfSxlLnByb3RvdHlwZS5oYW5kbGVSZXNpemU9ZnVuY3Rpb24oKXtuLkNvbnRleHQucmVmcmVzaEFsbCgpfSxlLnByb3RvdHlwZS5oYW5kbGVTY3JvbGw9ZnVuY3Rpb24oKXt2YXIgdD17fSxlPXtob3Jpem9udGFsOntuZXdTY3JvbGw6dGhpcy5hZGFwdGVyLnNjcm9sbExlZnQoKSxvbGRTY3JvbGw6dGhpcy5vbGRTY3JvbGwueCxmb3J3YXJkOlwicmlnaHRcIixiYWNrd2FyZDpcImxlZnRcIn0sdmVydGljYWw6e25ld1Njcm9sbDp0aGlzLmFkYXB0ZXIuc2Nyb2xsVG9wKCksb2xkU2Nyb2xsOnRoaXMub2xkU2Nyb2xsLnksZm9yd2FyZDpcImRvd25cIixiYWNrd2FyZDpcInVwXCJ9fTtmb3IodmFyIGkgaW4gZSl7dmFyIG89ZVtpXSxuPW8ubmV3U2Nyb2xsPm8ub2xkU2Nyb2xsLHI9bj9vLmZvcndhcmQ6by5iYWNrd2FyZDtmb3IodmFyIHMgaW4gdGhpcy53YXlwb2ludHNbaV0pe3ZhciBhPXRoaXMud2F5cG9pbnRzW2ldW3NdO2lmKG51bGwhPT1hLnRyaWdnZXJQb2ludCl7dmFyIGw9by5vbGRTY3JvbGw8YS50cmlnZ2VyUG9pbnQsaD1vLm5ld1Njcm9sbD49YS50cmlnZ2VyUG9pbnQscD1sJiZoLHU9IWwmJiFoOyhwfHx1KSYmKGEucXVldWVUcmlnZ2VyKHIpLHRbYS5ncm91cC5pZF09YS5ncm91cCl9fX1mb3IodmFyIGMgaW4gdCl0W2NdLmZsdXNoVHJpZ2dlcnMoKTt0aGlzLm9sZFNjcm9sbD17eDplLmhvcml6b250YWwubmV3U2Nyb2xsLHk6ZS52ZXJ0aWNhbC5uZXdTY3JvbGx9fSxlLnByb3RvdHlwZS5pbm5lckhlaWdodD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVsZW1lbnQ9PXRoaXMuZWxlbWVudC53aW5kb3c/bi52aWV3cG9ydEhlaWdodCgpOnRoaXMuYWRhcHRlci5pbm5lckhlaWdodCgpfSxlLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24odCl7ZGVsZXRlIHRoaXMud2F5cG9pbnRzW3QuYXhpc11bdC5rZXldLHRoaXMuY2hlY2tFbXB0eSgpfSxlLnByb3RvdHlwZS5pbm5lcldpZHRoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWxlbWVudD09dGhpcy5lbGVtZW50LndpbmRvdz9uLnZpZXdwb3J0V2lkdGgoKTp0aGlzLmFkYXB0ZXIuaW5uZXJXaWR0aCgpfSxlLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dmFyIHQ9W107Zm9yKHZhciBlIGluIHRoaXMud2F5cG9pbnRzKWZvcih2YXIgaSBpbiB0aGlzLndheXBvaW50c1tlXSl0LnB1c2godGhpcy53YXlwb2ludHNbZV1baV0pO2Zvcih2YXIgbz0wLG49dC5sZW5ndGg7bj5vO28rKyl0W29dLmRlc3Ryb3koKX0sZS5wcm90b3R5cGUucmVmcmVzaD1mdW5jdGlvbigpe3ZhciB0LGU9dGhpcy5lbGVtZW50PT10aGlzLmVsZW1lbnQud2luZG93LGk9ZT92b2lkIDA6dGhpcy5hZGFwdGVyLm9mZnNldCgpLG89e307dGhpcy5oYW5kbGVTY3JvbGwoKSx0PXtob3Jpem9udGFsOntjb250ZXh0T2Zmc2V0OmU/MDppLmxlZnQsY29udGV4dFNjcm9sbDplPzA6dGhpcy5vbGRTY3JvbGwueCxjb250ZXh0RGltZW5zaW9uOnRoaXMuaW5uZXJXaWR0aCgpLG9sZFNjcm9sbDp0aGlzLm9sZFNjcm9sbC54LGZvcndhcmQ6XCJyaWdodFwiLGJhY2t3YXJkOlwibGVmdFwiLG9mZnNldFByb3A6XCJsZWZ0XCJ9LHZlcnRpY2FsOntjb250ZXh0T2Zmc2V0OmU/MDppLnRvcCxjb250ZXh0U2Nyb2xsOmU/MDp0aGlzLm9sZFNjcm9sbC55LGNvbnRleHREaW1lbnNpb246dGhpcy5pbm5lckhlaWdodCgpLG9sZFNjcm9sbDp0aGlzLm9sZFNjcm9sbC55LGZvcndhcmQ6XCJkb3duXCIsYmFja3dhcmQ6XCJ1cFwiLG9mZnNldFByb3A6XCJ0b3BcIn19O2Zvcih2YXIgciBpbiB0KXt2YXIgcz10W3JdO2Zvcih2YXIgYSBpbiB0aGlzLndheXBvaW50c1tyXSl7dmFyIGwsaCxwLHUsYyxkPXRoaXMud2F5cG9pbnRzW3JdW2FdLGY9ZC5vcHRpb25zLm9mZnNldCx3PWQudHJpZ2dlclBvaW50LHk9MCxnPW51bGw9PXc7ZC5lbGVtZW50IT09ZC5lbGVtZW50LndpbmRvdyYmKHk9ZC5hZGFwdGVyLm9mZnNldCgpW3Mub2Zmc2V0UHJvcF0pLFwiZnVuY3Rpb25cIj09dHlwZW9mIGY/Zj1mLmFwcGx5KGQpOlwic3RyaW5nXCI9PXR5cGVvZiBmJiYoZj1wYXJzZUZsb2F0KGYpLGQub3B0aW9ucy5vZmZzZXQuaW5kZXhPZihcIiVcIik+LTEmJihmPU1hdGguY2VpbChzLmNvbnRleHREaW1lbnNpb24qZi8xMDApKSksbD1zLmNvbnRleHRTY3JvbGwtcy5jb250ZXh0T2Zmc2V0LGQudHJpZ2dlclBvaW50PU1hdGguZmxvb3IoeStsLWYpLGg9dzxzLm9sZFNjcm9sbCxwPWQudHJpZ2dlclBvaW50Pj1zLm9sZFNjcm9sbCx1PWgmJnAsYz0haCYmIXAsIWcmJnU/KGQucXVldWVUcmlnZ2VyKHMuYmFja3dhcmQpLG9bZC5ncm91cC5pZF09ZC5ncm91cCk6IWcmJmM/KGQucXVldWVUcmlnZ2VyKHMuZm9yd2FyZCksb1tkLmdyb3VwLmlkXT1kLmdyb3VwKTpnJiZzLm9sZFNjcm9sbD49ZC50cmlnZ2VyUG9pbnQmJihkLnF1ZXVlVHJpZ2dlcihzLmZvcndhcmQpLG9bZC5ncm91cC5pZF09ZC5ncm91cCl9fXJldHVybiBuLnJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpe2Zvcih2YXIgdCBpbiBvKW9bdF0uZmx1c2hUcmlnZ2VycygpfSksdGhpc30sZS5maW5kT3JDcmVhdGVCeUVsZW1lbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIGUuZmluZEJ5RWxlbWVudCh0KXx8bmV3IGUodCl9LGUucmVmcmVzaEFsbD1mdW5jdGlvbigpe2Zvcih2YXIgdCBpbiBvKW9bdF0ucmVmcmVzaCgpfSxlLmZpbmRCeUVsZW1lbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIG9bdC53YXlwb2ludENvbnRleHRLZXldfSx3aW5kb3cub25sb2FkPWZ1bmN0aW9uKCl7ciYmcigpLGUucmVmcmVzaEFsbCgpfSxuLnJlcXVlc3RBbmltYXRpb25GcmFtZT1mdW5jdGlvbihlKXt2YXIgaT13aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx0O2kuY2FsbCh3aW5kb3csZSl9LG4uQ29udGV4dD1lfSgpLGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdCh0LGUpe3JldHVybiB0LnRyaWdnZXJQb2ludC1lLnRyaWdnZXJQb2ludH1mdW5jdGlvbiBlKHQsZSl7cmV0dXJuIGUudHJpZ2dlclBvaW50LXQudHJpZ2dlclBvaW50fWZ1bmN0aW9uIGkodCl7dGhpcy5uYW1lPXQubmFtZSx0aGlzLmF4aXM9dC5heGlzLHRoaXMuaWQ9dGhpcy5uYW1lK1wiLVwiK3RoaXMuYXhpcyx0aGlzLndheXBvaW50cz1bXSx0aGlzLmNsZWFyVHJpZ2dlclF1ZXVlcygpLG9bdGhpcy5heGlzXVt0aGlzLm5hbWVdPXRoaXN9dmFyIG89e3ZlcnRpY2FsOnt9LGhvcml6b250YWw6e319LG49d2luZG93LldheXBvaW50O2kucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0KXt0aGlzLndheXBvaW50cy5wdXNoKHQpfSxpLnByb3RvdHlwZS5jbGVhclRyaWdnZXJRdWV1ZXM9ZnVuY3Rpb24oKXt0aGlzLnRyaWdnZXJRdWV1ZXM9e3VwOltdLGRvd246W10sbGVmdDpbXSxyaWdodDpbXX19LGkucHJvdG90eXBlLmZsdXNoVHJpZ2dlcnM9ZnVuY3Rpb24oKXtmb3IodmFyIGkgaW4gdGhpcy50cmlnZ2VyUXVldWVzKXt2YXIgbz10aGlzLnRyaWdnZXJRdWV1ZXNbaV0sbj1cInVwXCI9PT1pfHxcImxlZnRcIj09PWk7by5zb3J0KG4/ZTp0KTtmb3IodmFyIHI9MCxzPW8ubGVuZ3RoO3M+cjtyKz0xKXt2YXIgYT1vW3JdOyhhLm9wdGlvbnMuY29udGludW91c3x8cj09PW8ubGVuZ3RoLTEpJiZhLnRyaWdnZXIoW2ldKX19dGhpcy5jbGVhclRyaWdnZXJRdWV1ZXMoKX0saS5wcm90b3R5cGUubmV4dD1mdW5jdGlvbihlKXt0aGlzLndheXBvaW50cy5zb3J0KHQpO3ZhciBpPW4uQWRhcHRlci5pbkFycmF5KGUsdGhpcy53YXlwb2ludHMpLG89aT09PXRoaXMud2F5cG9pbnRzLmxlbmd0aC0xO3JldHVybiBvP251bGw6dGhpcy53YXlwb2ludHNbaSsxXX0saS5wcm90b3R5cGUucHJldmlvdXM9ZnVuY3Rpb24oZSl7dGhpcy53YXlwb2ludHMuc29ydCh0KTt2YXIgaT1uLkFkYXB0ZXIuaW5BcnJheShlLHRoaXMud2F5cG9pbnRzKTtyZXR1cm4gaT90aGlzLndheXBvaW50c1tpLTFdOm51bGx9LGkucHJvdG90eXBlLnF1ZXVlVHJpZ2dlcj1mdW5jdGlvbih0LGUpe3RoaXMudHJpZ2dlclF1ZXVlc1tlXS5wdXNoKHQpfSxpLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24odCl7dmFyIGU9bi5BZGFwdGVyLmluQXJyYXkodCx0aGlzLndheXBvaW50cyk7ZT4tMSYmdGhpcy53YXlwb2ludHMuc3BsaWNlKGUsMSl9LGkucHJvdG90eXBlLmZpcnN0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2F5cG9pbnRzWzBdfSxpLnByb3RvdHlwZS5sYXN0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2F5cG9pbnRzW3RoaXMud2F5cG9pbnRzLmxlbmd0aC0xXX0saS5maW5kT3JDcmVhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIG9bdC5heGlzXVt0Lm5hbWVdfHxuZXcgaSh0KX0sbi5Hcm91cD1pfSgpLGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdCh0KXt0aGlzLiRlbGVtZW50PWUodCl9dmFyIGU9d2luZG93LmpRdWVyeSxpPXdpbmRvdy5XYXlwb2ludDtlLmVhY2goW1wiaW5uZXJIZWlnaHRcIixcImlubmVyV2lkdGhcIixcIm9mZlwiLFwib2Zmc2V0XCIsXCJvblwiLFwib3V0ZXJIZWlnaHRcIixcIm91dGVyV2lkdGhcIixcInNjcm9sbExlZnRcIixcInNjcm9sbFRvcFwiXSxmdW5jdGlvbihlLGkpe3QucHJvdG90eXBlW2ldPWZ1bmN0aW9uKCl7dmFyIHQ9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtyZXR1cm4gdGhpcy4kZWxlbWVudFtpXS5hcHBseSh0aGlzLiRlbGVtZW50LHQpfX0pLGUuZWFjaChbXCJleHRlbmRcIixcImluQXJyYXlcIixcImlzRW1wdHlPYmplY3RcIl0sZnVuY3Rpb24oaSxvKXt0W29dPWVbb119KSxpLmFkYXB0ZXJzLnB1c2goe25hbWU6XCJqcXVlcnlcIixBZGFwdGVyOnR9KSxpLkFkYXB0ZXI9dH0oKSxmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQodCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGk9W10sbz1hcmd1bWVudHNbMF07cmV0dXJuIHQuaXNGdW5jdGlvbihhcmd1bWVudHNbMF0pJiYobz10LmV4dGVuZCh7fSxhcmd1bWVudHNbMV0pLG8uaGFuZGxlcj1hcmd1bWVudHNbMF0pLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBuPXQuZXh0ZW5kKHt9LG8se2VsZW1lbnQ6dGhpc30pO1wic3RyaW5nXCI9PXR5cGVvZiBuLmNvbnRleHQmJihuLmNvbnRleHQ9dCh0aGlzKS5jbG9zZXN0KG4uY29udGV4dClbMF0pLGkucHVzaChuZXcgZShuKSl9KSxpfX12YXIgZT13aW5kb3cuV2F5cG9pbnQ7d2luZG93LmpRdWVyeSYmKHdpbmRvdy5qUXVlcnkuZm4ud2F5cG9pbnQ9dCh3aW5kb3cualF1ZXJ5KSksd2luZG93LlplcHRvJiYod2luZG93LlplcHRvLmZuLndheXBvaW50PXQod2luZG93LlplcHRvKSl9KCk7IiwiLyohIGxpZ2h0Z2FsbGVyeSAtIHYxLjYuMTAgLSAyMDE4LTA1LTAxXHJcbiogaHR0cDovL3NhY2hpbmNob29sdXIuZ2l0aHViLmlvL2xpZ2h0R2FsbGVyeS9cclxuKiBDb3B5cmlnaHQgKGMpIDIwMTggU2FjaGluIE47IExpY2Vuc2VkIEdQTHYzICovXHJcbiFmdW5jdGlvbihhLGIpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW1wianF1ZXJ5XCJdLGZ1bmN0aW9uKGEpe3JldHVybiBiKGEpfSk6XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9YihyZXF1aXJlKFwianF1ZXJ5XCIpKTpiKGEualF1ZXJ5KX0odGhpcyxmdW5jdGlvbihhKXshZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBiKGIsZCl7aWYodGhpcy5lbD1iLHRoaXMuJGVsPWEoYiksdGhpcy5zPWEuZXh0ZW5kKHt9LGMsZCksdGhpcy5zLmR5bmFtaWMmJlwidW5kZWZpbmVkXCIhPT10aGlzLnMuZHluYW1pY0VsJiZ0aGlzLnMuZHluYW1pY0VsLmNvbnN0cnVjdG9yPT09QXJyYXkmJiF0aGlzLnMuZHluYW1pY0VsLmxlbmd0aCl0aHJvd1wiV2hlbiB1c2luZyBkeW5hbWljIG1vZGUsIHlvdSBtdXN0IGFsc28gZGVmaW5lIGR5bmFtaWNFbCBhcyBhbiBBcnJheS5cIjtyZXR1cm4gdGhpcy5tb2R1bGVzPXt9LHRoaXMubEdhbGxlcnlPbj0hMSx0aGlzLmxnQnVzeT0hMSx0aGlzLmhpZGVCYXJ0aW1lb3V0PSExLHRoaXMuaXNUb3VjaD1cIm9udG91Y2hzdGFydFwiaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LHRoaXMucy5zbGlkZUVuZEFuaW1hdG9pbiYmKHRoaXMucy5oaWRlQ29udHJvbE9uRW5kPSExKSx0aGlzLnMuZHluYW1pYz90aGlzLiRpdGVtcz10aGlzLnMuZHluYW1pY0VsOlwidGhpc1wiPT09dGhpcy5zLnNlbGVjdG9yP3RoaXMuJGl0ZW1zPXRoaXMuJGVsOlwiXCIhPT10aGlzLnMuc2VsZWN0b3I/dGhpcy5zLnNlbGVjdFdpdGhpbj90aGlzLiRpdGVtcz1hKHRoaXMucy5zZWxlY3RXaXRoaW4pLmZpbmQodGhpcy5zLnNlbGVjdG9yKTp0aGlzLiRpdGVtcz10aGlzLiRlbC5maW5kKGEodGhpcy5zLnNlbGVjdG9yKSk6dGhpcy4kaXRlbXM9dGhpcy4kZWwuY2hpbGRyZW4oKSx0aGlzLiRzbGlkZT1cIlwiLHRoaXMuJG91dGVyPVwiXCIsdGhpcy5pbml0KCksdGhpc312YXIgYz17bW9kZTpcImxnLXNsaWRlXCIsY3NzRWFzaW5nOlwiZWFzZVwiLGVhc2luZzpcImxpbmVhclwiLHNwZWVkOjYwMCxoZWlnaHQ6XCIxMDAlXCIsd2lkdGg6XCIxMDAlXCIsYWRkQ2xhc3M6XCJcIixzdGFydENsYXNzOlwibGctc3RhcnQtem9vbVwiLGJhY2tkcm9wRHVyYXRpb246MTUwLGhpZGVCYXJzRGVsYXk6NmUzLHVzZUxlZnQ6ITEsY2xvc2FibGU6ITAsbG9vcDohMCxlc2NLZXk6ITAsa2V5UHJlc3M6ITAsY29udHJvbHM6ITAsc2xpZGVFbmRBbmltYXRvaW46ITAsaGlkZUNvbnRyb2xPbkVuZDohMSxtb3VzZXdoZWVsOiEwLGdldENhcHRpb25Gcm9tVGl0bGVPckFsdDohMCxhcHBlbmRTdWJIdG1sVG86XCIubGctc3ViLWh0bWxcIixzdWJIdG1sU2VsZWN0b3JSZWxhdGl2ZTohMSxwcmVsb2FkOjEsc2hvd0FmdGVyTG9hZDohMCxzZWxlY3RvcjpcIlwiLHNlbGVjdFdpdGhpbjpcIlwiLG5leHRIdG1sOlwiXCIscHJldkh0bWw6XCJcIixpbmRleDohMSxpZnJhbWVNYXhXaWR0aDpcIjEwMCVcIixkb3dubG9hZDohMCxjb3VudGVyOiEwLGFwcGVuZENvdW50ZXJUbzpcIi5sZy10b29sYmFyXCIsc3dpcGVUaHJlc2hvbGQ6NTAsZW5hYmxlU3dpcGU6ITAsZW5hYmxlRHJhZzohMCxkeW5hbWljOiExLGR5bmFtaWNFbDpbXSxnYWxsZXJ5SWQ6MX07Yi5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciBiPXRoaXM7Yi5zLnByZWxvYWQ+Yi4kaXRlbXMubGVuZ3RoJiYoYi5zLnByZWxvYWQ9Yi4kaXRlbXMubGVuZ3RoKTt2YXIgYz13aW5kb3cubG9jYXRpb24uaGFzaDtjLmluZGV4T2YoXCJsZz1cIit0aGlzLnMuZ2FsbGVyeUlkKT4wJiYoYi5pbmRleD1wYXJzZUludChjLnNwbGl0KFwiJnNsaWRlPVwiKVsxXSwxMCksYShcImJvZHlcIikuYWRkQ2xhc3MoXCJsZy1mcm9tLWhhc2hcIiksYShcImJvZHlcIikuaGFzQ2xhc3MoXCJsZy1vblwiKXx8KHNldFRpbWVvdXQoZnVuY3Rpb24oKXtiLmJ1aWxkKGIuaW5kZXgpfSksYShcImJvZHlcIikuYWRkQ2xhc3MoXCJsZy1vblwiKSkpLGIucy5keW5hbWljPyhiLiRlbC50cmlnZ2VyKFwib25CZWZvcmVPcGVuLmxnXCIpLGIuaW5kZXg9Yi5zLmluZGV4fHwwLGEoXCJib2R5XCIpLmhhc0NsYXNzKFwibGctb25cIil8fHNldFRpbWVvdXQoZnVuY3Rpb24oKXtiLmJ1aWxkKGIuaW5kZXgpLGEoXCJib2R5XCIpLmFkZENsYXNzKFwibGctb25cIil9KSk6Yi4kaXRlbXMub24oXCJjbGljay5sZ2N1c3RvbVwiLGZ1bmN0aW9uKGMpe3RyeXtjLnByZXZlbnREZWZhdWx0KCksYy5wcmV2ZW50RGVmYXVsdCgpfWNhdGNoKGEpe2MucmV0dXJuVmFsdWU9ITF9Yi4kZWwudHJpZ2dlcihcIm9uQmVmb3JlT3Blbi5sZ1wiKSxiLmluZGV4PWIucy5pbmRleHx8Yi4kaXRlbXMuaW5kZXgodGhpcyksYShcImJvZHlcIikuaGFzQ2xhc3MoXCJsZy1vblwiKXx8KGIuYnVpbGQoYi5pbmRleCksYShcImJvZHlcIikuYWRkQ2xhc3MoXCJsZy1vblwiKSl9KX0sYi5wcm90b3R5cGUuYnVpbGQ9ZnVuY3Rpb24oYil7dmFyIGM9dGhpcztjLnN0cnVjdHVyZSgpLGEuZWFjaChhLmZuLmxpZ2h0R2FsbGVyeS5tb2R1bGVzLGZ1bmN0aW9uKGIpe2MubW9kdWxlc1tiXT1uZXcgYS5mbi5saWdodEdhbGxlcnkubW9kdWxlc1tiXShjLmVsKX0pLGMuc2xpZGUoYiwhMSwhMSwhMSksYy5zLmtleVByZXNzJiZjLmtleVByZXNzKCksYy4kaXRlbXMubGVuZ3RoPjE/KGMuYXJyb3coKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yy5lbmFibGVEcmFnKCksYy5lbmFibGVTd2lwZSgpfSw1MCksYy5zLm1vdXNld2hlZWwmJmMubW91c2V3aGVlbCgpKTpjLiRzbGlkZS5vbihcImNsaWNrLmxnXCIsZnVuY3Rpb24oKXtjLiRlbC50cmlnZ2VyKFwib25TbGlkZUNsaWNrLmxnXCIpfSksYy5jb3VudGVyKCksYy5jbG9zZUdhbGxlcnkoKSxjLiRlbC50cmlnZ2VyKFwib25BZnRlck9wZW4ubGdcIiksYy4kb3V0ZXIub24oXCJtb3VzZW1vdmUubGcgY2xpY2subGcgdG91Y2hzdGFydC5sZ1wiLGZ1bmN0aW9uKCl7Yy4kb3V0ZXIucmVtb3ZlQ2xhc3MoXCJsZy1oaWRlLWl0ZW1zXCIpLGNsZWFyVGltZW91dChjLmhpZGVCYXJ0aW1lb3V0KSxjLmhpZGVCYXJ0aW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtjLiRvdXRlci5hZGRDbGFzcyhcImxnLWhpZGUtaXRlbXNcIil9LGMucy5oaWRlQmFyc0RlbGF5KX0pLGMuJG91dGVyLnRyaWdnZXIoXCJtb3VzZW1vdmUubGdcIil9LGIucHJvdG90eXBlLnN0cnVjdHVyZT1mdW5jdGlvbigpe3ZhciBiLGM9XCJcIixkPVwiXCIsZT0wLGY9XCJcIixnPXRoaXM7Zm9yKGEoXCJib2R5XCIpLmFwcGVuZCgnPGRpdiBjbGFzcz1cImxnLWJhY2tkcm9wXCI+PC9kaXY+JyksYShcIi5sZy1iYWNrZHJvcFwiKS5jc3MoXCJ0cmFuc2l0aW9uLWR1cmF0aW9uXCIsdGhpcy5zLmJhY2tkcm9wRHVyYXRpb24rXCJtc1wiKSxlPTA7ZTx0aGlzLiRpdGVtcy5sZW5ndGg7ZSsrKWMrPSc8ZGl2IGNsYXNzPVwibGctaXRlbVwiPjwvZGl2Pic7aWYodGhpcy5zLmNvbnRyb2xzJiZ0aGlzLiRpdGVtcy5sZW5ndGg+MSYmKGQ9JzxkaXYgY2xhc3M9XCJsZy1hY3Rpb25zXCI+PGJ1dHRvbiBjbGFzcz1cImxnLXByZXYgbGctaWNvblwiPicrdGhpcy5zLnByZXZIdG1sKyc8L2J1dHRvbj48YnV0dG9uIGNsYXNzPVwibGctbmV4dCBsZy1pY29uXCI+Jyt0aGlzLnMubmV4dEh0bWwrXCI8L2J1dHRvbj48L2Rpdj5cIiksXCIubGctc3ViLWh0bWxcIj09PXRoaXMucy5hcHBlbmRTdWJIdG1sVG8mJihmPSc8ZGl2IGNsYXNzPVwibGctc3ViLWh0bWxcIj48L2Rpdj4nKSxiPSc8ZGl2IGNsYXNzPVwibGctb3V0ZXIgJyt0aGlzLnMuYWRkQ2xhc3MrXCIgXCIrdGhpcy5zLnN0YXJ0Q2xhc3MrJ1wiPjxkaXYgY2xhc3M9XCJsZ1wiIHN0eWxlPVwid2lkdGg6Jyt0aGlzLnMud2lkdGgrXCI7IGhlaWdodDpcIit0aGlzLnMuaGVpZ2h0KydcIj48ZGl2IGNsYXNzPVwibGctaW5uZXJcIj4nK2MrJzwvZGl2PjxkaXYgY2xhc3M9XCJsZy10b29sYmFyIGxnLWdyb3VwXCI+PHNwYW4gY2xhc3M9XCJsZy1jbG9zZSBsZy1pY29uXCI+PC9zcGFuPjwvZGl2PicrZCtmK1wiPC9kaXY+PC9kaXY+XCIsYShcImJvZHlcIikuYXBwZW5kKGIpLHRoaXMuJG91dGVyPWEoXCIubGctb3V0ZXJcIiksdGhpcy4kc2xpZGU9dGhpcy4kb3V0ZXIuZmluZChcIi5sZy1pdGVtXCIpLHRoaXMucy51c2VMZWZ0Pyh0aGlzLiRvdXRlci5hZGRDbGFzcyhcImxnLXVzZS1sZWZ0XCIpLHRoaXMucy5tb2RlPVwibGctc2xpZGVcIik6dGhpcy4kb3V0ZXIuYWRkQ2xhc3MoXCJsZy11c2UtY3NzM1wiKSxnLnNldFRvcCgpLGEod2luZG93KS5vbihcInJlc2l6ZS5sZyBvcmllbnRhdGlvbmNoYW5nZS5sZ1wiLGZ1bmN0aW9uKCl7c2V0VGltZW91dChmdW5jdGlvbigpe2cuc2V0VG9wKCl9LDEwMCl9KSx0aGlzLiRzbGlkZS5lcSh0aGlzLmluZGV4KS5hZGRDbGFzcyhcImxnLWN1cnJlbnRcIiksdGhpcy5kb0NzcygpP3RoaXMuJG91dGVyLmFkZENsYXNzKFwibGctY3NzM1wiKToodGhpcy4kb3V0ZXIuYWRkQ2xhc3MoXCJsZy1jc3NcIiksdGhpcy5zLnNwZWVkPTApLHRoaXMuJG91dGVyLmFkZENsYXNzKHRoaXMucy5tb2RlKSx0aGlzLnMuZW5hYmxlRHJhZyYmdGhpcy4kaXRlbXMubGVuZ3RoPjEmJnRoaXMuJG91dGVyLmFkZENsYXNzKFwibGctZ3JhYlwiKSx0aGlzLnMuc2hvd0FmdGVyTG9hZCYmdGhpcy4kb3V0ZXIuYWRkQ2xhc3MoXCJsZy1zaG93LWFmdGVyLWxvYWRcIiksdGhpcy5kb0NzcygpKXt2YXIgaD10aGlzLiRvdXRlci5maW5kKFwiLmxnLWlubmVyXCIpO2guY3NzKFwidHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb25cIix0aGlzLnMuY3NzRWFzaW5nKSxoLmNzcyhcInRyYW5zaXRpb24tZHVyYXRpb25cIix0aGlzLnMuc3BlZWQrXCJtc1wiKX1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YShcIi5sZy1iYWNrZHJvcFwiKS5hZGRDbGFzcyhcImluXCIpfSksc2V0VGltZW91dChmdW5jdGlvbigpe2cuJG91dGVyLmFkZENsYXNzKFwibGctdmlzaWJsZVwiKX0sdGhpcy5zLmJhY2tkcm9wRHVyYXRpb24pLHRoaXMucy5kb3dubG9hZCYmdGhpcy4kb3V0ZXIuZmluZChcIi5sZy10b29sYmFyXCIpLmFwcGVuZCgnPGEgaWQ9XCJsZy1kb3dubG9hZFwiIHRhcmdldD1cIl9ibGFua1wiIGRvd25sb2FkIGNsYXNzPVwibGctZG93bmxvYWQgbGctaWNvblwiPjwvYT4nKSx0aGlzLnByZXZTY3JvbGxUb3A9YSh3aW5kb3cpLnNjcm9sbFRvcCgpfSxiLnByb3RvdHlwZS5zZXRUb3A9ZnVuY3Rpb24oKXtpZihcIjEwMCVcIiE9PXRoaXMucy5oZWlnaHQpe3ZhciBiPWEod2luZG93KS5oZWlnaHQoKSxjPShiLXBhcnNlSW50KHRoaXMucy5oZWlnaHQsMTApKS8yLGQ9dGhpcy4kb3V0ZXIuZmluZChcIi5sZ1wiKTtiPj1wYXJzZUludCh0aGlzLnMuaGVpZ2h0LDEwKT9kLmNzcyhcInRvcFwiLGMrXCJweFwiKTpkLmNzcyhcInRvcFwiLFwiMHB4XCIpfX0sYi5wcm90b3R5cGUuZG9Dc3M9ZnVuY3Rpb24oKXtyZXR1cm4hIWZ1bmN0aW9uKCl7dmFyIGE9W1widHJhbnNpdGlvblwiLFwiTW96VHJhbnNpdGlvblwiLFwiV2Via2l0VHJhbnNpdGlvblwiLFwiT1RyYW5zaXRpb25cIixcIm1zVHJhbnNpdGlvblwiLFwiS2h0bWxUcmFuc2l0aW9uXCJdLGI9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LGM9MDtmb3IoYz0wO2M8YS5sZW5ndGg7YysrKWlmKGFbY11pbiBiLnN0eWxlKXJldHVybiEwfSgpfSxiLnByb3RvdHlwZS5pc1ZpZGVvPWZ1bmN0aW9uKGEsYil7dmFyIGM7aWYoYz10aGlzLnMuZHluYW1pYz90aGlzLnMuZHluYW1pY0VsW2JdLmh0bWw6dGhpcy4kaXRlbXMuZXEoYikuYXR0cihcImRhdGEtaHRtbFwiKSwhYSlyZXR1cm4gYz97aHRtbDU6ITB9Oihjb25zb2xlLmVycm9yKFwibGlnaHRHYWxsZXJ5IDotIGRhdGEtc3JjIGlzIG5vdCBwdm92aWRlZCBvbiBzbGlkZSBpdGVtIFwiKyhiKzEpK1wiLiBQbGVhc2UgbWFrZSBzdXJlIHRoZSBzZWxlY3RvciBwcm9wZXJ0eSBpcyBwcm9wZXJseSBjb25maWd1cmVkLiBNb3JlIGluZm8gLSBodHRwOi8vc2FjaGluY2hvb2x1ci5naXRodWIuaW8vbGlnaHRHYWxsZXJ5L2RlbW9zL2h0bWwtbWFya3VwLmh0bWxcIiksITEpO3ZhciBkPWEubWF0Y2goL1xcL1xcLyg/Ond3d1xcLik/eW91dHUoPzpcXC5iZXxiZVxcLmNvbSlcXC8oPzp3YXRjaFxcP3Y9fGVtYmVkXFwvKT8oW2EtejAtOVxcLVxcX1xcJV0rKS9pKSxlPWEubWF0Y2goL1xcL1xcLyg/Ond3d1xcLik/dmltZW8uY29tXFwvKFswLTlhLXpcXC1fXSspL2kpLGY9YS5tYXRjaCgvXFwvXFwvKD86d3d3XFwuKT9kYWkubHlcXC8oWzAtOWEtelxcLV9dKykvaSksZz1hLm1hdGNoKC9cXC9cXC8oPzp3d3dcXC4pPyg/OnZrXFwuY29tfHZrb250YWt0ZVxcLnJ1KVxcLyg/OnZpZGVvX2V4dFxcLnBocFxcPykoLiopL2kpO3JldHVybiBkP3t5b3V0dWJlOmR9OmU/e3ZpbWVvOmV9OmY/e2RhaWx5bW90aW9uOmZ9Omc/e3ZrOmd9OnZvaWQgMH0sYi5wcm90b3R5cGUuY291bnRlcj1mdW5jdGlvbigpe3RoaXMucy5jb3VudGVyJiZhKHRoaXMucy5hcHBlbmRDb3VudGVyVG8pLmFwcGVuZCgnPGRpdiBpZD1cImxnLWNvdW50ZXJcIj48c3BhbiBpZD1cImxnLWNvdW50ZXItY3VycmVudFwiPicrKHBhcnNlSW50KHRoaXMuaW5kZXgsMTApKzEpKyc8L3NwYW4+IC8gPHNwYW4gaWQ9XCJsZy1jb3VudGVyLWFsbFwiPicrdGhpcy4kaXRlbXMubGVuZ3RoK1wiPC9zcGFuPjwvZGl2PlwiKX0sYi5wcm90b3R5cGUuYWRkSHRtbD1mdW5jdGlvbihiKXt2YXIgYyxkLGU9bnVsbDtpZih0aGlzLnMuZHluYW1pYz90aGlzLnMuZHluYW1pY0VsW2JdLnN1Ykh0bWxVcmw/Yz10aGlzLnMuZHluYW1pY0VsW2JdLnN1Ykh0bWxVcmw6ZT10aGlzLnMuZHluYW1pY0VsW2JdLnN1Ykh0bWw6KGQ9dGhpcy4kaXRlbXMuZXEoYiksZC5hdHRyKFwiZGF0YS1zdWItaHRtbC11cmxcIik/Yz1kLmF0dHIoXCJkYXRhLXN1Yi1odG1sLXVybFwiKTooZT1kLmF0dHIoXCJkYXRhLXN1Yi1odG1sXCIpLHRoaXMucy5nZXRDYXB0aW9uRnJvbVRpdGxlT3JBbHQmJiFlJiYoZT1kLmF0dHIoXCJ0aXRsZVwiKXx8ZC5maW5kKFwiaW1nXCIpLmZpcnN0KCkuYXR0cihcImFsdFwiKSkpKSwhYylpZih2b2lkIDAhPT1lJiZudWxsIT09ZSl7dmFyIGY9ZS5zdWJzdHJpbmcoMCwxKTtcIi5cIiE9PWYmJlwiI1wiIT09Znx8KGU9dGhpcy5zLnN1Ykh0bWxTZWxlY3RvclJlbGF0aXZlJiYhdGhpcy5zLmR5bmFtaWM/ZC5maW5kKGUpLmh0bWwoKTphKGUpLmh0bWwoKSl9ZWxzZSBlPVwiXCI7XCIubGctc3ViLWh0bWxcIj09PXRoaXMucy5hcHBlbmRTdWJIdG1sVG8/Yz90aGlzLiRvdXRlci5maW5kKHRoaXMucy5hcHBlbmRTdWJIdG1sVG8pLmxvYWQoYyk6dGhpcy4kb3V0ZXIuZmluZCh0aGlzLnMuYXBwZW5kU3ViSHRtbFRvKS5odG1sKGUpOmM/dGhpcy4kc2xpZGUuZXEoYikubG9hZChjKTp0aGlzLiRzbGlkZS5lcShiKS5hcHBlbmQoZSksdm9pZCAwIT09ZSYmbnVsbCE9PWUmJihcIlwiPT09ZT90aGlzLiRvdXRlci5maW5kKHRoaXMucy5hcHBlbmRTdWJIdG1sVG8pLmFkZENsYXNzKFwibGctZW1wdHktaHRtbFwiKTp0aGlzLiRvdXRlci5maW5kKHRoaXMucy5hcHBlbmRTdWJIdG1sVG8pLnJlbW92ZUNsYXNzKFwibGctZW1wdHktaHRtbFwiKSksdGhpcy4kZWwudHJpZ2dlcihcIm9uQWZ0ZXJBcHBlbmRTdWJIdG1sLmxnXCIsW2JdKX0sYi5wcm90b3R5cGUucHJlbG9hZD1mdW5jdGlvbihhKXt2YXIgYj0xLGM9MTtmb3IoYj0xO2I8PXRoaXMucy5wcmVsb2FkJiYhKGI+PXRoaXMuJGl0ZW1zLmxlbmd0aC1hKTtiKyspdGhpcy5sb2FkQ29udGVudChhK2IsITEsMCk7Zm9yKGM9MTtjPD10aGlzLnMucHJlbG9hZCYmIShhLWM8MCk7YysrKXRoaXMubG9hZENvbnRlbnQoYS1jLCExLDApfSxiLnByb3RvdHlwZS5sb2FkQ29udGVudD1mdW5jdGlvbihiLGMsZCl7dmFyIGUsZixnLGgsaSxqLGs9dGhpcyxsPSExLG09ZnVuY3Rpb24oYil7Zm9yKHZhciBjPVtdLGQ9W10sZT0wO2U8Yi5sZW5ndGg7ZSsrKXt2YXIgZz1iW2VdLnNwbGl0KFwiIFwiKTtcIlwiPT09Z1swXSYmZy5zcGxpY2UoMCwxKSxkLnB1c2goZ1swXSksYy5wdXNoKGdbMV0pfWZvcih2YXIgaD1hKHdpbmRvdykud2lkdGgoKSxpPTA7aTxjLmxlbmd0aDtpKyspaWYocGFyc2VJbnQoY1tpXSwxMCk+aCl7Zj1kW2ldO2JyZWFrfX07aWYoay5zLmR5bmFtaWMpe2lmKGsucy5keW5hbWljRWxbYl0ucG9zdGVyJiYobD0hMCxnPWsucy5keW5hbWljRWxbYl0ucG9zdGVyKSxqPWsucy5keW5hbWljRWxbYl0uaHRtbCxmPWsucy5keW5hbWljRWxbYl0uc3JjLGsucy5keW5hbWljRWxbYl0ucmVzcG9uc2l2ZSl7bShrLnMuZHluYW1pY0VsW2JdLnJlc3BvbnNpdmUuc3BsaXQoXCIsXCIpKX1oPWsucy5keW5hbWljRWxbYl0uc3Jjc2V0LGk9ay5zLmR5bmFtaWNFbFtiXS5zaXplc31lbHNle2lmKGsuJGl0ZW1zLmVxKGIpLmF0dHIoXCJkYXRhLXBvc3RlclwiKSYmKGw9ITAsZz1rLiRpdGVtcy5lcShiKS5hdHRyKFwiZGF0YS1wb3N0ZXJcIikpLGo9ay4kaXRlbXMuZXEoYikuYXR0cihcImRhdGEtaHRtbFwiKSxmPWsuJGl0ZW1zLmVxKGIpLmF0dHIoXCJocmVmXCIpfHxrLiRpdGVtcy5lcShiKS5hdHRyKFwiZGF0YS1zcmNcIiksay4kaXRlbXMuZXEoYikuYXR0cihcImRhdGEtcmVzcG9uc2l2ZVwiKSl7bShrLiRpdGVtcy5lcShiKS5hdHRyKFwiZGF0YS1yZXNwb25zaXZlXCIpLnNwbGl0KFwiLFwiKSl9aD1rLiRpdGVtcy5lcShiKS5hdHRyKFwiZGF0YS1zcmNzZXRcIiksaT1rLiRpdGVtcy5lcShiKS5hdHRyKFwiZGF0YS1zaXplc1wiKX12YXIgbj0hMTtrLnMuZHluYW1pYz9rLnMuZHluYW1pY0VsW2JdLmlmcmFtZSYmKG49ITApOlwidHJ1ZVwiPT09ay4kaXRlbXMuZXEoYikuYXR0cihcImRhdGEtaWZyYW1lXCIpJiYobj0hMCk7dmFyIG89ay5pc1ZpZGVvKGYsYik7aWYoIWsuJHNsaWRlLmVxKGIpLmhhc0NsYXNzKFwibGctbG9hZGVkXCIpKXtpZihuKWsuJHNsaWRlLmVxKGIpLnByZXBlbmQoJzxkaXYgY2xhc3M9XCJsZy12aWRlby1jb250IGxnLWhhcy1pZnJhbWVcIiBzdHlsZT1cIm1heC13aWR0aDonK2sucy5pZnJhbWVNYXhXaWR0aCsnXCI+PGRpdiBjbGFzcz1cImxnLXZpZGVvXCI+PGlmcmFtZSBjbGFzcz1cImxnLW9iamVjdFwiIGZyYW1lYm9yZGVyPVwiMFwiIHNyYz1cIicrZisnXCIgIGFsbG93ZnVsbHNjcmVlbj1cInRydWVcIj48L2lmcmFtZT48L2Rpdj48L2Rpdj4nKTtlbHNlIGlmKGwpe3ZhciBwPVwiXCI7cD1vJiZvLnlvdXR1YmU/XCJsZy1oYXMteW91dHViZVwiOm8mJm8udmltZW8/XCJsZy1oYXMtdmltZW9cIjpcImxnLWhhcy1odG1sNVwiLGsuJHNsaWRlLmVxKGIpLnByZXBlbmQoJzxkaXYgY2xhc3M9XCJsZy12aWRlby1jb250ICcrcCsnIFwiPjxkaXYgY2xhc3M9XCJsZy12aWRlb1wiPjxzcGFuIGNsYXNzPVwibGctdmlkZW8tcGxheVwiPjwvc3Bhbj48aW1nIGNsYXNzPVwibGctb2JqZWN0IGxnLWhhcy1wb3N0ZXJcIiBzcmM9XCInK2crJ1wiIC8+PC9kaXY+PC9kaXY+Jyl9ZWxzZSBvPyhrLiRzbGlkZS5lcShiKS5wcmVwZW5kKCc8ZGl2IGNsYXNzPVwibGctdmlkZW8tY29udCBcIj48ZGl2IGNsYXNzPVwibGctdmlkZW9cIj48L2Rpdj48L2Rpdj4nKSxrLiRlbC50cmlnZ2VyKFwiaGFzVmlkZW8ubGdcIixbYixmLGpdKSk6ay4kc2xpZGUuZXEoYikucHJlcGVuZCgnPGRpdiBjbGFzcz1cImxnLWltZy13cmFwXCI+PGltZyBjbGFzcz1cImxnLW9iamVjdCBsZy1pbWFnZVwiIHNyYz1cIicrZisnXCIgLz48L2Rpdj4nKTtpZihrLiRlbC50cmlnZ2VyKFwib25BZmVyQXBwZW5kU2xpZGUubGdcIixbYl0pLGU9ay4kc2xpZGUuZXEoYikuZmluZChcIi5sZy1vYmplY3RcIiksaSYmZS5hdHRyKFwic2l6ZXNcIixpKSxoKXtlLmF0dHIoXCJzcmNzZXRcIixoKTt0cnl7cGljdHVyZWZpbGwoe2VsZW1lbnRzOltlWzBdXX0pfWNhdGNoKGEpe2NvbnNvbGUud2FybihcImxpZ2h0R2FsbGVyeSA6LSBJZiB5b3Ugd2FudCBzcmNzZXQgdG8gYmUgc3VwcG9ydGVkIGZvciBvbGRlciBicm93c2VyIHBsZWFzZSBpbmNsdWRlIHBpY3R1cmVmaWwgdmVyc2lvbiAyIGphdmFzY3JpcHQgbGlicmFyeSBpbiB5b3VyIGRvY3VtZW50LlwiKX19XCIubGctc3ViLWh0bWxcIiE9PXRoaXMucy5hcHBlbmRTdWJIdG1sVG8mJmsuYWRkSHRtbChiKSxrLiRzbGlkZS5lcShiKS5hZGRDbGFzcyhcImxnLWxvYWRlZFwiKX1rLiRzbGlkZS5lcShiKS5maW5kKFwiLmxnLW9iamVjdFwiKS5vbihcImxvYWQubGcgZXJyb3IubGdcIixmdW5jdGlvbigpe3ZhciBjPTA7ZCYmIWEoXCJib2R5XCIpLmhhc0NsYXNzKFwibGctZnJvbS1oYXNoXCIpJiYoYz1kKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ay4kc2xpZGUuZXEoYikuYWRkQ2xhc3MoXCJsZy1jb21wbGV0ZVwiKSxrLiRlbC50cmlnZ2VyKFwib25TbGlkZUl0ZW1Mb2FkLmxnXCIsW2IsZHx8MF0pfSxjKX0pLG8mJm8uaHRtbDUmJiFsJiZrLiRzbGlkZS5lcShiKS5hZGRDbGFzcyhcImxnLWNvbXBsZXRlXCIpLCEwPT09YyYmKGsuJHNsaWRlLmVxKGIpLmhhc0NsYXNzKFwibGctY29tcGxldGVcIik/ay5wcmVsb2FkKGIpOmsuJHNsaWRlLmVxKGIpLmZpbmQoXCIubGctb2JqZWN0XCIpLm9uKFwibG9hZC5sZyBlcnJvci5sZ1wiLGZ1bmN0aW9uKCl7ay5wcmVsb2FkKGIpfSkpfSxiLnByb3RvdHlwZS5zbGlkZT1mdW5jdGlvbihiLGMsZCxlKXt2YXIgZj10aGlzLiRvdXRlci5maW5kKFwiLmxnLWN1cnJlbnRcIikuaW5kZXgoKSxnPXRoaXM7aWYoIWcubEdhbGxlcnlPbnx8ZiE9PWIpe3ZhciBoPXRoaXMuJHNsaWRlLmxlbmd0aCxpPWcubEdhbGxlcnlPbj90aGlzLnMuc3BlZWQ6MDtpZighZy5sZ0J1c3kpe2lmKHRoaXMucy5kb3dubG9hZCl7dmFyIGo7aj1nLnMuZHluYW1pYz8hMSE9PWcucy5keW5hbWljRWxbYl0uZG93bmxvYWRVcmwmJihnLnMuZHluYW1pY0VsW2JdLmRvd25sb2FkVXJsfHxnLnMuZHluYW1pY0VsW2JdLnNyYyk6XCJmYWxzZVwiIT09Zy4kaXRlbXMuZXEoYikuYXR0cihcImRhdGEtZG93bmxvYWQtdXJsXCIpJiYoZy4kaXRlbXMuZXEoYikuYXR0cihcImRhdGEtZG93bmxvYWQtdXJsXCIpfHxnLiRpdGVtcy5lcShiKS5hdHRyKFwiaHJlZlwiKXx8Zy4kaXRlbXMuZXEoYikuYXR0cihcImRhdGEtc3JjXCIpKSxqPyhhKFwiI2xnLWRvd25sb2FkXCIpLmF0dHIoXCJocmVmXCIsaiksZy4kb3V0ZXIucmVtb3ZlQ2xhc3MoXCJsZy1oaWRlLWRvd25sb2FkXCIpKTpnLiRvdXRlci5hZGRDbGFzcyhcImxnLWhpZGUtZG93bmxvYWRcIil9aWYodGhpcy4kZWwudHJpZ2dlcihcIm9uQmVmb3JlU2xpZGUubGdcIixbZixiLGMsZF0pLGcubGdCdXN5PSEwLGNsZWFyVGltZW91dChnLmhpZGVCYXJ0aW1lb3V0KSxcIi5sZy1zdWItaHRtbFwiPT09dGhpcy5zLmFwcGVuZFN1Ykh0bWxUbyYmc2V0VGltZW91dChmdW5jdGlvbigpe2cuYWRkSHRtbChiKX0saSksdGhpcy5hcnJvd0Rpc2FibGUoYiksZXx8KGI8Zj9lPVwicHJldlwiOmI+ZiYmKGU9XCJuZXh0XCIpKSxjKXt0aGlzLiRzbGlkZS5yZW1vdmVDbGFzcyhcImxnLXByZXYtc2xpZGUgbGctY3VycmVudCBsZy1uZXh0LXNsaWRlXCIpO3ZhciBrLGw7aD4yPyhrPWItMSxsPWIrMSwwPT09YiYmZj09PWgtMT8obD0wLGs9aC0xKTpiPT09aC0xJiYwPT09ZiYmKGw9MCxrPWgtMSkpOihrPTAsbD0xKSxcInByZXZcIj09PWU/Zy4kc2xpZGUuZXEobCkuYWRkQ2xhc3MoXCJsZy1uZXh0LXNsaWRlXCIpOmcuJHNsaWRlLmVxKGspLmFkZENsYXNzKFwibGctcHJldi1zbGlkZVwiKSxnLiRzbGlkZS5lcShiKS5hZGRDbGFzcyhcImxnLWN1cnJlbnRcIil9ZWxzZSBnLiRvdXRlci5hZGRDbGFzcyhcImxnLW5vLXRyYW5zXCIpLHRoaXMuJHNsaWRlLnJlbW92ZUNsYXNzKFwibGctcHJldi1zbGlkZSBsZy1uZXh0LXNsaWRlXCIpLFwicHJldlwiPT09ZT8odGhpcy4kc2xpZGUuZXEoYikuYWRkQ2xhc3MoXCJsZy1wcmV2LXNsaWRlXCIpLHRoaXMuJHNsaWRlLmVxKGYpLmFkZENsYXNzKFwibGctbmV4dC1zbGlkZVwiKSk6KHRoaXMuJHNsaWRlLmVxKGIpLmFkZENsYXNzKFwibGctbmV4dC1zbGlkZVwiKSx0aGlzLiRzbGlkZS5lcShmKS5hZGRDbGFzcyhcImxnLXByZXYtc2xpZGVcIikpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtnLiRzbGlkZS5yZW1vdmVDbGFzcyhcImxnLWN1cnJlbnRcIiksZy4kc2xpZGUuZXEoYikuYWRkQ2xhc3MoXCJsZy1jdXJyZW50XCIpLGcuJG91dGVyLnJlbW92ZUNsYXNzKFwibGctbm8tdHJhbnNcIil9LDUwKTtnLmxHYWxsZXJ5T24/KHNldFRpbWVvdXQoZnVuY3Rpb24oKXtnLmxvYWRDb250ZW50KGIsITAsMCl9LHRoaXMucy5zcGVlZCs1MCksc2V0VGltZW91dChmdW5jdGlvbigpe2cubGdCdXN5PSExLGcuJGVsLnRyaWdnZXIoXCJvbkFmdGVyU2xpZGUubGdcIixbZixiLGMsZF0pfSx0aGlzLnMuc3BlZWQpKTooZy5sb2FkQ29udGVudChiLCEwLGcucy5iYWNrZHJvcER1cmF0aW9uKSxnLmxnQnVzeT0hMSxnLiRlbC50cmlnZ2VyKFwib25BZnRlclNsaWRlLmxnXCIsW2YsYixjLGRdKSksZy5sR2FsbGVyeU9uPSEwLHRoaXMucy5jb3VudGVyJiZhKFwiI2xnLWNvdW50ZXItY3VycmVudFwiKS50ZXh0KGIrMSl9Zy5pbmRleD1ifX0sYi5wcm90b3R5cGUuZ29Ub05leHRTbGlkZT1mdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9Yi5zLmxvb3A7YSYmYi4kc2xpZGUubGVuZ3RoPDMmJihjPSExKSxiLmxnQnVzeXx8KGIuaW5kZXgrMTxiLiRzbGlkZS5sZW5ndGg/KGIuaW5kZXgrKyxiLiRlbC50cmlnZ2VyKFwib25CZWZvcmVOZXh0U2xpZGUubGdcIixbYi5pbmRleF0pLGIuc2xpZGUoYi5pbmRleCxhLCExLFwibmV4dFwiKSk6Yz8oYi5pbmRleD0wLGIuJGVsLnRyaWdnZXIoXCJvbkJlZm9yZU5leHRTbGlkZS5sZ1wiLFtiLmluZGV4XSksYi5zbGlkZShiLmluZGV4LGEsITEsXCJuZXh0XCIpKTpiLnMuc2xpZGVFbmRBbmltYXRvaW4mJiFhJiYoYi4kb3V0ZXIuYWRkQ2xhc3MoXCJsZy1yaWdodC1lbmRcIiksc2V0VGltZW91dChmdW5jdGlvbigpe2IuJG91dGVyLnJlbW92ZUNsYXNzKFwibGctcmlnaHQtZW5kXCIpfSw0MDApKSl9LGIucHJvdG90eXBlLmdvVG9QcmV2U2xpZGU9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPWIucy5sb29wO2EmJmIuJHNsaWRlLmxlbmd0aDwzJiYoYz0hMSksYi5sZ0J1c3l8fChiLmluZGV4PjA/KGIuaW5kZXgtLSxiLiRlbC50cmlnZ2VyKFwib25CZWZvcmVQcmV2U2xpZGUubGdcIixbYi5pbmRleCxhXSksYi5zbGlkZShiLmluZGV4LGEsITEsXCJwcmV2XCIpKTpjPyhiLmluZGV4PWIuJGl0ZW1zLmxlbmd0aC0xLGIuJGVsLnRyaWdnZXIoXCJvbkJlZm9yZVByZXZTbGlkZS5sZ1wiLFtiLmluZGV4LGFdKSxiLnNsaWRlKGIuaW5kZXgsYSwhMSxcInByZXZcIikpOmIucy5zbGlkZUVuZEFuaW1hdG9pbiYmIWEmJihiLiRvdXRlci5hZGRDbGFzcyhcImxnLWxlZnQtZW5kXCIpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtiLiRvdXRlci5yZW1vdmVDbGFzcyhcImxnLWxlZnQtZW5kXCIpfSw0MDApKSl9LGIucHJvdG90eXBlLmtleVByZXNzPWZ1bmN0aW9uKCl7dmFyIGI9dGhpczt0aGlzLiRpdGVtcy5sZW5ndGg+MSYmYSh3aW5kb3cpLm9uKFwia2V5dXAubGdcIixmdW5jdGlvbihhKXtiLiRpdGVtcy5sZW5ndGg+MSYmKDM3PT09YS5rZXlDb2RlJiYoYS5wcmV2ZW50RGVmYXVsdCgpLGIuZ29Ub1ByZXZTbGlkZSgpKSwzOT09PWEua2V5Q29kZSYmKGEucHJldmVudERlZmF1bHQoKSxiLmdvVG9OZXh0U2xpZGUoKSkpfSksYSh3aW5kb3cpLm9uKFwia2V5ZG93bi5sZ1wiLGZ1bmN0aW9uKGEpeyEwPT09Yi5zLmVzY0tleSYmMjc9PT1hLmtleUNvZGUmJihhLnByZXZlbnREZWZhdWx0KCksYi4kb3V0ZXIuaGFzQ2xhc3MoXCJsZy10aHVtYi1vcGVuXCIpP2IuJG91dGVyLnJlbW92ZUNsYXNzKFwibGctdGh1bWItb3BlblwiKTpiLmRlc3Ryb3koKSl9KX0sYi5wcm90b3R5cGUuYXJyb3c9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3RoaXMuJG91dGVyLmZpbmQoXCIubGctcHJldlwiKS5vbihcImNsaWNrLmxnXCIsZnVuY3Rpb24oKXthLmdvVG9QcmV2U2xpZGUoKX0pLHRoaXMuJG91dGVyLmZpbmQoXCIubGctbmV4dFwiKS5vbihcImNsaWNrLmxnXCIsZnVuY3Rpb24oKXthLmdvVG9OZXh0U2xpZGUoKX0pfSxiLnByb3RvdHlwZS5hcnJvd0Rpc2FibGU9ZnVuY3Rpb24oYSl7IXRoaXMucy5sb29wJiZ0aGlzLnMuaGlkZUNvbnRyb2xPbkVuZCYmKGErMTx0aGlzLiRzbGlkZS5sZW5ndGg/dGhpcy4kb3V0ZXIuZmluZChcIi5sZy1uZXh0XCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKS5yZW1vdmVDbGFzcyhcImRpc2FibGVkXCIpOnRoaXMuJG91dGVyLmZpbmQoXCIubGctbmV4dFwiKS5hdHRyKFwiZGlzYWJsZWRcIixcImRpc2FibGVkXCIpLmFkZENsYXNzKFwiZGlzYWJsZWRcIiksYT4wP3RoaXMuJG91dGVyLmZpbmQoXCIubGctcHJldlwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIikucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlZFwiKTp0aGlzLiRvdXRlci5maW5kKFwiLmxnLXByZXZcIikuYXR0cihcImRpc2FibGVkXCIsXCJkaXNhYmxlZFwiKS5hZGRDbGFzcyhcImRpc2FibGVkXCIpKX0sYi5wcm90b3R5cGUuc2V0VHJhbnNsYXRlPWZ1bmN0aW9uKGEsYixjKXt0aGlzLnMudXNlTGVmdD9hLmNzcyhcImxlZnRcIixiKTphLmNzcyh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoXCIrYitcInB4LCBcIitjK1wicHgsIDBweClcIn0pfSxiLnByb3RvdHlwZS50b3VjaE1vdmU9ZnVuY3Rpb24oYixjKXt2YXIgZD1jLWI7TWF0aC5hYnMoZCk+MTUmJih0aGlzLiRvdXRlci5hZGRDbGFzcyhcImxnLWRyYWdnaW5nXCIpLHRoaXMuc2V0VHJhbnNsYXRlKHRoaXMuJHNsaWRlLmVxKHRoaXMuaW5kZXgpLGQsMCksdGhpcy5zZXRUcmFuc2xhdGUoYShcIi5sZy1wcmV2LXNsaWRlXCIpLC10aGlzLiRzbGlkZS5lcSh0aGlzLmluZGV4KS53aWR0aCgpK2QsMCksdGhpcy5zZXRUcmFuc2xhdGUoYShcIi5sZy1uZXh0LXNsaWRlXCIpLHRoaXMuJHNsaWRlLmVxKHRoaXMuaW5kZXgpLndpZHRoKCkrZCwwKSl9LGIucHJvdG90eXBlLnRvdWNoRW5kPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7XCJsZy1zbGlkZVwiIT09Yi5zLm1vZGUmJmIuJG91dGVyLmFkZENsYXNzKFwibGctc2xpZGVcIiksdGhpcy4kc2xpZGUubm90KFwiLmxnLWN1cnJlbnQsIC5sZy1wcmV2LXNsaWRlLCAubGctbmV4dC1zbGlkZVwiKS5jc3MoXCJvcGFjaXR5XCIsXCIwXCIpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtiLiRvdXRlci5yZW1vdmVDbGFzcyhcImxnLWRyYWdnaW5nXCIpLGE8MCYmTWF0aC5hYnMoYSk+Yi5zLnN3aXBlVGhyZXNob2xkP2IuZ29Ub05leHRTbGlkZSghMCk6YT4wJiZNYXRoLmFicyhhKT5iLnMuc3dpcGVUaHJlc2hvbGQ/Yi5nb1RvUHJldlNsaWRlKCEwKTpNYXRoLmFicyhhKTw1JiZiLiRlbC50cmlnZ2VyKFwib25TbGlkZUNsaWNrLmxnXCIpLGIuJHNsaWRlLnJlbW92ZUF0dHIoXCJzdHlsZVwiKX0pLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtiLiRvdXRlci5oYXNDbGFzcyhcImxnLWRyYWdnaW5nXCIpfHxcImxnLXNsaWRlXCI9PT1iLnMubW9kZXx8Yi4kb3V0ZXIucmVtb3ZlQ2xhc3MoXCJsZy1zbGlkZVwiKX0sYi5zLnNwZWVkKzEwMCl9LGIucHJvdG90eXBlLmVuYWJsZVN3aXBlPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPTAsYz0wLGQ9ITE7YS5zLmVuYWJsZVN3aXBlJiZhLmRvQ3NzKCkmJihhLiRzbGlkZS5vbihcInRvdWNoc3RhcnQubGdcIixmdW5jdGlvbihjKXthLiRvdXRlci5oYXNDbGFzcyhcImxnLXpvb21lZFwiKXx8YS5sZ0J1c3l8fChjLnByZXZlbnREZWZhdWx0KCksYS5tYW5hZ2VTd2lwZUNsYXNzKCksYj1jLm9yaWdpbmFsRXZlbnQudGFyZ2V0VG91Y2hlc1swXS5wYWdlWCl9KSxhLiRzbGlkZS5vbihcInRvdWNobW92ZS5sZ1wiLGZ1bmN0aW9uKGUpe2EuJG91dGVyLmhhc0NsYXNzKFwibGctem9vbWVkXCIpfHwoZS5wcmV2ZW50RGVmYXVsdCgpLGM9ZS5vcmlnaW5hbEV2ZW50LnRhcmdldFRvdWNoZXNbMF0ucGFnZVgsYS50b3VjaE1vdmUoYixjKSxkPSEwKX0pLGEuJHNsaWRlLm9uKFwidG91Y2hlbmQubGdcIixmdW5jdGlvbigpe2EuJG91dGVyLmhhc0NsYXNzKFwibGctem9vbWVkXCIpfHwoZD8oZD0hMSxhLnRvdWNoRW5kKGMtYikpOmEuJGVsLnRyaWdnZXIoXCJvblNsaWRlQ2xpY2subGdcIikpfSkpfSxiLnByb3RvdHlwZS5lbmFibGVEcmFnPWZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxjPTAsZD0wLGU9ITEsZj0hMTtiLnMuZW5hYmxlRHJhZyYmYi5kb0NzcygpJiYoYi4kc2xpZGUub24oXCJtb3VzZWRvd24ubGdcIixmdW5jdGlvbihkKXtiLiRvdXRlci5oYXNDbGFzcyhcImxnLXpvb21lZFwiKXx8Yi5sZ0J1c3l8fGEoZC50YXJnZXQpLnRleHQoKS50cmltKCl8fChkLnByZXZlbnREZWZhdWx0KCksYi5tYW5hZ2VTd2lwZUNsYXNzKCksYz1kLnBhZ2VYLGU9ITAsYi4kb3V0ZXIuc2Nyb2xsTGVmdCs9MSxiLiRvdXRlci5zY3JvbGxMZWZ0LT0xLGIuJG91dGVyLnJlbW92ZUNsYXNzKFwibGctZ3JhYlwiKS5hZGRDbGFzcyhcImxnLWdyYWJiaW5nXCIpLGIuJGVsLnRyaWdnZXIoXCJvbkRyYWdzdGFydC5sZ1wiKSl9KSxhKHdpbmRvdykub24oXCJtb3VzZW1vdmUubGdcIixmdW5jdGlvbihhKXtlJiYoZj0hMCxkPWEucGFnZVgsYi50b3VjaE1vdmUoYyxkKSxiLiRlbC50cmlnZ2VyKFwib25EcmFnbW92ZS5sZ1wiKSl9KSxhKHdpbmRvdykub24oXCJtb3VzZXVwLmxnXCIsZnVuY3Rpb24oZyl7Zj8oZj0hMSxiLnRvdWNoRW5kKGQtYyksYi4kZWwudHJpZ2dlcihcIm9uRHJhZ2VuZC5sZ1wiKSk6KGEoZy50YXJnZXQpLmhhc0NsYXNzKFwibGctb2JqZWN0XCIpfHxhKGcudGFyZ2V0KS5oYXNDbGFzcyhcImxnLXZpZGVvLXBsYXlcIikpJiZiLiRlbC50cmlnZ2VyKFwib25TbGlkZUNsaWNrLmxnXCIpLGUmJihlPSExLGIuJG91dGVyLnJlbW92ZUNsYXNzKFwibGctZ3JhYmJpbmdcIikuYWRkQ2xhc3MoXCJsZy1ncmFiXCIpKX0pKX0sYi5wcm90b3R5cGUubWFuYWdlU3dpcGVDbGFzcz1mdW5jdGlvbigpe3ZhciBhPXRoaXMuaW5kZXgrMSxiPXRoaXMuaW5kZXgtMTt0aGlzLnMubG9vcCYmdGhpcy4kc2xpZGUubGVuZ3RoPjImJigwPT09dGhpcy5pbmRleD9iPXRoaXMuJHNsaWRlLmxlbmd0aC0xOnRoaXMuaW5kZXg9PT10aGlzLiRzbGlkZS5sZW5ndGgtMSYmKGE9MCkpLHRoaXMuJHNsaWRlLnJlbW92ZUNsYXNzKFwibGctbmV4dC1zbGlkZSBsZy1wcmV2LXNsaWRlXCIpLGI+LTEmJnRoaXMuJHNsaWRlLmVxKGIpLmFkZENsYXNzKFwibGctcHJldi1zbGlkZVwiKSx0aGlzLiRzbGlkZS5lcShhKS5hZGRDbGFzcyhcImxnLW5leHQtc2xpZGVcIil9LGIucHJvdG90eXBlLm1vdXNld2hlZWw9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuJG91dGVyLm9uKFwibW91c2V3aGVlbC5sZ1wiLGZ1bmN0aW9uKGIpe2IuZGVsdGFZJiYoYi5kZWx0YVk+MD9hLmdvVG9QcmV2U2xpZGUoKTphLmdvVG9OZXh0U2xpZGUoKSxiLnByZXZlbnREZWZhdWx0KCkpfSl9LGIucHJvdG90eXBlLmNsb3NlR2FsbGVyeT1mdW5jdGlvbigpe3ZhciBiPXRoaXMsYz0hMTt0aGlzLiRvdXRlci5maW5kKFwiLmxnLWNsb3NlXCIpLm9uKFwiY2xpY2subGdcIixmdW5jdGlvbigpe2IuZGVzdHJveSgpfSksYi5zLmNsb3NhYmxlJiYoYi4kb3V0ZXIub24oXCJtb3VzZWRvd24ubGdcIixmdW5jdGlvbihiKXtjPSEhKGEoYi50YXJnZXQpLmlzKFwiLmxnLW91dGVyXCIpfHxhKGIudGFyZ2V0KS5pcyhcIi5sZy1pdGVtIFwiKXx8YShiLnRhcmdldCkuaXMoXCIubGctaW1nLXdyYXBcIikpfSksYi4kb3V0ZXIub24oXCJtb3VzZW1vdmUubGdcIixmdW5jdGlvbigpe2M9ITF9KSxiLiRvdXRlci5vbihcIm1vdXNldXAubGdcIixmdW5jdGlvbihkKXsoYShkLnRhcmdldCkuaXMoXCIubGctb3V0ZXJcIil8fGEoZC50YXJnZXQpLmlzKFwiLmxnLWl0ZW0gXCIpfHxhKGQudGFyZ2V0KS5pcyhcIi5sZy1pbWctd3JhcFwiKSYmYykmJihiLiRvdXRlci5oYXNDbGFzcyhcImxnLWRyYWdnaW5nXCIpfHxiLmRlc3Ryb3koKSl9KSl9LGIucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oYil7dmFyIGM9dGhpcztifHwoYy4kZWwudHJpZ2dlcihcIm9uQmVmb3JlQ2xvc2UubGdcIiksYSh3aW5kb3cpLnNjcm9sbFRvcChjLnByZXZTY3JvbGxUb3ApKSxiJiYoYy5zLmR5bmFtaWN8fHRoaXMuJGl0ZW1zLm9mZihcImNsaWNrLmxnIGNsaWNrLmxnY3VzdG9tXCIpLGEucmVtb3ZlRGF0YShjLmVsLFwibGlnaHRHYWxsZXJ5XCIpKSx0aGlzLiRlbC5vZmYoXCIubGcudG1cIiksYS5lYWNoKGEuZm4ubGlnaHRHYWxsZXJ5Lm1vZHVsZXMsZnVuY3Rpb24oYSl7Yy5tb2R1bGVzW2FdJiZjLm1vZHVsZXNbYV0uZGVzdHJveSgpfSksdGhpcy5sR2FsbGVyeU9uPSExLGNsZWFyVGltZW91dChjLmhpZGVCYXJ0aW1lb3V0KSx0aGlzLmhpZGVCYXJ0aW1lb3V0PSExLGEod2luZG93KS5vZmYoXCIubGdcIiksYShcImJvZHlcIikucmVtb3ZlQ2xhc3MoXCJsZy1vbiBsZy1mcm9tLWhhc2hcIiksYy4kb3V0ZXImJmMuJG91dGVyLnJlbW92ZUNsYXNzKFwibGctdmlzaWJsZVwiKSxhKFwiLmxnLWJhY2tkcm9wXCIpLnJlbW92ZUNsYXNzKFwiaW5cIiksc2V0VGltZW91dChmdW5jdGlvbigpe2MuJG91dGVyJiZjLiRvdXRlci5yZW1vdmUoKSxhKFwiLmxnLWJhY2tkcm9wXCIpLnJlbW92ZSgpLGJ8fGMuJGVsLnRyaWdnZXIoXCJvbkNsb3NlQWZ0ZXIubGdcIil9LGMucy5iYWNrZHJvcER1cmF0aW9uKzUwKX0sYS5mbi5saWdodEdhbGxlcnk9ZnVuY3Rpb24oYyl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2lmKGEuZGF0YSh0aGlzLFwibGlnaHRHYWxsZXJ5XCIpKXRyeXthKHRoaXMpLmRhdGEoXCJsaWdodEdhbGxlcnlcIikuaW5pdCgpfWNhdGNoKGEpe2NvbnNvbGUuZXJyb3IoXCJsaWdodEdhbGxlcnkgaGFzIG5vdCBpbml0aWF0ZWQgcHJvcGVybHlcIil9ZWxzZSBhLmRhdGEodGhpcyxcImxpZ2h0R2FsbGVyeVwiLG5ldyBiKHRoaXMsYykpfSl9LGEuZm4ubGlnaHRHYWxsZXJ5Lm1vZHVsZXM9e319KCl9KSxmdW5jdGlvbihhLGIpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW1wianF1ZXJ5XCJdLGZ1bmN0aW9uKGEpe3JldHVybiBiKGEpfSk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9YihyZXF1aXJlKFwianF1ZXJ5XCIpKTpiKGpRdWVyeSl9KDAsZnVuY3Rpb24oYSl7IWZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGI9e2F1dG9wbGF5OiExLHBhdXNlOjVlMyxwcm9ncmVzc0JhcjohMCxmb3VyY2VBdXRvcGxheTohMSxhdXRvcGxheUNvbnRyb2xzOiEwLGFwcGVuZEF1dG9wbGF5Q29udHJvbHNUbzpcIi5sZy10b29sYmFyXCJ9LGM9ZnVuY3Rpb24oYyl7cmV0dXJuIHRoaXMuY29yZT1hKGMpLmRhdGEoXCJsaWdodEdhbGxlcnlcIiksdGhpcy4kZWw9YShjKSwhKHRoaXMuY29yZS4kaXRlbXMubGVuZ3RoPDIpJiYodGhpcy5jb3JlLnM9YS5leHRlbmQoe30sYix0aGlzLmNvcmUucyksdGhpcy5pbnRlcnZhbD0hMSx0aGlzLmZyb21BdXRvPSEwLHRoaXMuY2FuY2VsZWRPblRvdWNoPSExLHRoaXMuZm91cmNlQXV0b3BsYXlUZW1wPXRoaXMuY29yZS5zLmZvdXJjZUF1dG9wbGF5LHRoaXMuY29yZS5kb0NzcygpfHwodGhpcy5jb3JlLnMucHJvZ3Jlc3NCYXI9ITEpLHRoaXMuaW5pdCgpLHRoaXMpfTtjLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmNvcmUucy5hdXRvcGxheUNvbnRyb2xzJiZhLmNvbnRyb2xzKCksYS5jb3JlLnMucHJvZ3Jlc3NCYXImJmEuY29yZS4kb3V0ZXIuZmluZChcIi5sZ1wiKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJsZy1wcm9ncmVzcy1iYXJcIj48ZGl2IGNsYXNzPVwibGctcHJvZ3Jlc3NcIj48L2Rpdj48L2Rpdj4nKSxhLnByb2dyZXNzKCksYS5jb3JlLnMuYXV0b3BsYXkmJmEuJGVsLm9uZShcIm9uU2xpZGVJdGVtTG9hZC5sZy50bVwiLGZ1bmN0aW9uKCl7YS5zdGFydGxBdXRvKCl9KSxhLiRlbC5vbihcIm9uRHJhZ3N0YXJ0LmxnLnRtIHRvdWNoc3RhcnQubGcudG1cIixmdW5jdGlvbigpe2EuaW50ZXJ2YWwmJihhLmNhbmNlbEF1dG8oKSxhLmNhbmNlbGVkT25Ub3VjaD0hMCl9KSxhLiRlbC5vbihcIm9uRHJhZ2VuZC5sZy50bSB0b3VjaGVuZC5sZy50bSBvblNsaWRlQ2xpY2subGcudG1cIixmdW5jdGlvbigpeyFhLmludGVydmFsJiZhLmNhbmNlbGVkT25Ub3VjaCYmKGEuc3RhcnRsQXV0bygpLGEuY2FuY2VsZWRPblRvdWNoPSExKX0pfSxjLnByb3RvdHlwZS5wcm9ncmVzcz1mdW5jdGlvbigpe3ZhciBhLGIsYz10aGlzO2MuJGVsLm9uKFwib25CZWZvcmVTbGlkZS5sZy50bVwiLGZ1bmN0aW9uKCl7Yy5jb3JlLnMucHJvZ3Jlc3NCYXImJmMuZnJvbUF1dG8mJihhPWMuY29yZS4kb3V0ZXIuZmluZChcIi5sZy1wcm9ncmVzcy1iYXJcIiksYj1jLmNvcmUuJG91dGVyLmZpbmQoXCIubGctcHJvZ3Jlc3NcIiksYy5pbnRlcnZhbCYmKGIucmVtb3ZlQXR0cihcInN0eWxlXCIpLGEucmVtb3ZlQ2xhc3MoXCJsZy1zdGFydFwiKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi5jc3MoXCJ0cmFuc2l0aW9uXCIsXCJ3aWR0aCBcIisoYy5jb3JlLnMuc3BlZWQrYy5jb3JlLnMucGF1c2UpK1wibXMgZWFzZSAwc1wiKSxhLmFkZENsYXNzKFwibGctc3RhcnRcIil9LDIwKSkpLGMuZnJvbUF1dG98fGMuY29yZS5zLmZvdXJjZUF1dG9wbGF5fHxjLmNhbmNlbEF1dG8oKSxjLmZyb21BdXRvPSExfSl9LGMucHJvdG90eXBlLmNvbnRyb2xzPWZ1bmN0aW9uKCl7dmFyIGI9dGhpczthKHRoaXMuY29yZS5zLmFwcGVuZEF1dG9wbGF5Q29udHJvbHNUbykuYXBwZW5kKCc8c3BhbiBjbGFzcz1cImxnLWF1dG9wbGF5LWJ1dHRvbiBsZy1pY29uXCI+PC9zcGFuPicpLGIuY29yZS4kb3V0ZXIuZmluZChcIi5sZy1hdXRvcGxheS1idXR0b25cIikub24oXCJjbGljay5sZ1wiLGZ1bmN0aW9uKCl7YShiLmNvcmUuJG91dGVyKS5oYXNDbGFzcyhcImxnLXNob3ctYXV0b3BsYXlcIik/KGIuY2FuY2VsQXV0bygpLGIuY29yZS5zLmZvdXJjZUF1dG9wbGF5PSExKTpiLmludGVydmFsfHwoYi5zdGFydGxBdXRvKCksYi5jb3JlLnMuZm91cmNlQXV0b3BsYXk9Yi5mb3VyY2VBdXRvcGxheVRlbXApfSl9LGMucHJvdG90eXBlLnN0YXJ0bEF1dG89ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuY29yZS4kb3V0ZXIuZmluZChcIi5sZy1wcm9ncmVzc1wiKS5jc3MoXCJ0cmFuc2l0aW9uXCIsXCJ3aWR0aCBcIisoYS5jb3JlLnMuc3BlZWQrYS5jb3JlLnMucGF1c2UpK1wibXMgZWFzZSAwc1wiKSxhLmNvcmUuJG91dGVyLmFkZENsYXNzKFwibGctc2hvdy1hdXRvcGxheVwiKSxhLmNvcmUuJG91dGVyLmZpbmQoXCIubGctcHJvZ3Jlc3MtYmFyXCIpLmFkZENsYXNzKFwibGctc3RhcnRcIiksYS5pbnRlcnZhbD1zZXRJbnRlcnZhbChmdW5jdGlvbigpe2EuY29yZS5pbmRleCsxPGEuY29yZS4kaXRlbXMubGVuZ3RoP2EuY29yZS5pbmRleCsrOmEuY29yZS5pbmRleD0wLGEuZnJvbUF1dG89ITAsYS5jb3JlLnNsaWRlKGEuY29yZS5pbmRleCwhMSwhMSxcIm5leHRcIil9LGEuY29yZS5zLnNwZWVkK2EuY29yZS5zLnBhdXNlKX0sYy5wcm90b3R5cGUuY2FuY2VsQXV0bz1mdW5jdGlvbigpe2NsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCksdGhpcy5pbnRlcnZhbD0hMSx0aGlzLmNvcmUuJG91dGVyLmZpbmQoXCIubGctcHJvZ3Jlc3NcIikucmVtb3ZlQXR0cihcInN0eWxlXCIpLHRoaXMuY29yZS4kb3V0ZXIucmVtb3ZlQ2xhc3MoXCJsZy1zaG93LWF1dG9wbGF5XCIpLHRoaXMuY29yZS4kb3V0ZXIuZmluZChcIi5sZy1wcm9ncmVzcy1iYXJcIikucmVtb3ZlQ2xhc3MoXCJsZy1zdGFydFwiKX0sYy5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuY2FuY2VsQXV0bygpLHRoaXMuY29yZS4kb3V0ZXIuZmluZChcIi5sZy1wcm9ncmVzcy1iYXJcIikucmVtb3ZlKCl9LGEuZm4ubGlnaHRHYWxsZXJ5Lm1vZHVsZXMuYXV0b3BsYXk9Y30oKX0pLGZ1bmN0aW9uKGEsYil7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXCJqcXVlcnlcIl0sZnVuY3Rpb24oYSl7cmV0dXJuIGIoYSl9KTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1iKHJlcXVpcmUoXCJqcXVlcnlcIikpOmIoalF1ZXJ5KX0oMCxmdW5jdGlvbihhKXshZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjt2YXIgYj17ZnVsbFNjcmVlbjohMH0sYz1mdW5jdGlvbihjKXtyZXR1cm4gdGhpcy5jb3JlPWEoYykuZGF0YShcImxpZ2h0R2FsbGVyeVwiKSx0aGlzLiRlbD1hKGMpLHRoaXMuY29yZS5zPWEuZXh0ZW5kKHt9LGIsdGhpcy5jb3JlLnMpLHRoaXMuaW5pdCgpLHRoaXN9O2MucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt2YXIgYT1cIlwiO2lmKHRoaXMuY29yZS5zLmZ1bGxTY3JlZW4pe2lmKCEoZG9jdW1lbnQuZnVsbHNjcmVlbkVuYWJsZWR8fGRvY3VtZW50LndlYmtpdEZ1bGxzY3JlZW5FbmFibGVkfHxkb2N1bWVudC5tb3pGdWxsU2NyZWVuRW5hYmxlZHx8ZG9jdW1lbnQubXNGdWxsc2NyZWVuRW5hYmxlZCkpcmV0dXJuO2E9JzxzcGFuIGNsYXNzPVwibGctZnVsbHNjcmVlbiBsZy1pY29uXCI+PC9zcGFuPicsdGhpcy5jb3JlLiRvdXRlci5maW5kKFwiLmxnLXRvb2xiYXJcIikuYXBwZW5kKGEpLHRoaXMuZnVsbFNjcmVlbigpfX0sYy5wcm90b3R5cGUucmVxdWVzdEZ1bGxzY3JlZW49ZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7YS5yZXF1ZXN0RnVsbHNjcmVlbj9hLnJlcXVlc3RGdWxsc2NyZWVuKCk6YS5tc1JlcXVlc3RGdWxsc2NyZWVuP2EubXNSZXF1ZXN0RnVsbHNjcmVlbigpOmEubW96UmVxdWVzdEZ1bGxTY3JlZW4/YS5tb3pSZXF1ZXN0RnVsbFNjcmVlbigpOmEud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4mJmEud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4oKX0sYy5wcm90b3R5cGUuZXhpdEZ1bGxzY3JlZW49ZnVuY3Rpb24oKXtkb2N1bWVudC5leGl0RnVsbHNjcmVlbj9kb2N1bWVudC5leGl0RnVsbHNjcmVlbigpOmRvY3VtZW50Lm1zRXhpdEZ1bGxzY3JlZW4/ZG9jdW1lbnQubXNFeGl0RnVsbHNjcmVlbigpOmRvY3VtZW50Lm1vekNhbmNlbEZ1bGxTY3JlZW4/ZG9jdW1lbnQubW96Q2FuY2VsRnVsbFNjcmVlbigpOmRvY3VtZW50LndlYmtpdEV4aXRGdWxsc2NyZWVuJiZkb2N1bWVudC53ZWJraXRFeGl0RnVsbHNjcmVlbigpfSxjLnByb3RvdHlwZS5mdWxsU2NyZWVuPWZ1bmN0aW9uKCl7dmFyIGI9dGhpczthKGRvY3VtZW50KS5vbihcImZ1bGxzY3JlZW5jaGFuZ2UubGcgd2Via2l0ZnVsbHNjcmVlbmNoYW5nZS5sZyBtb3pmdWxsc2NyZWVuY2hhbmdlLmxnIE1TRnVsbHNjcmVlbkNoYW5nZS5sZ1wiLGZ1bmN0aW9uKCl7Yi5jb3JlLiRvdXRlci50b2dnbGVDbGFzcyhcImxnLWZ1bGxzY3JlZW4tb25cIil9KSx0aGlzLmNvcmUuJG91dGVyLmZpbmQoXCIubGctZnVsbHNjcmVlblwiKS5vbihcImNsaWNrLmxnXCIsZnVuY3Rpb24oKXtkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudHx8ZG9jdW1lbnQubW96RnVsbFNjcmVlbkVsZW1lbnR8fGRvY3VtZW50LndlYmtpdEZ1bGxzY3JlZW5FbGVtZW50fHxkb2N1bWVudC5tc0Z1bGxzY3JlZW5FbGVtZW50P2IuZXhpdEZ1bGxzY3JlZW4oKTpiLnJlcXVlc3RGdWxsc2NyZWVuKCl9KX0sYy5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuZXhpdEZ1bGxzY3JlZW4oKSxhKGRvY3VtZW50KS5vZmYoXCJmdWxsc2NyZWVuY2hhbmdlLmxnIHdlYmtpdGZ1bGxzY3JlZW5jaGFuZ2UubGcgbW96ZnVsbHNjcmVlbmNoYW5nZS5sZyBNU0Z1bGxzY3JlZW5DaGFuZ2UubGdcIil9LGEuZm4ubGlnaHRHYWxsZXJ5Lm1vZHVsZXMuZnVsbHNjcmVlbj1jfSgpfSksZnVuY3Rpb24oYSxiKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImpxdWVyeVwiXSxmdW5jdGlvbihhKXtyZXR1cm4gYihhKX0pOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWIocmVxdWlyZShcImpxdWVyeVwiKSk6YihqUXVlcnkpfSgwLGZ1bmN0aW9uKGEpeyFmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO3ZhciBiPXtwYWdlcjohMX0sYz1mdW5jdGlvbihjKXtyZXR1cm4gdGhpcy5jb3JlPWEoYykuZGF0YShcImxpZ2h0R2FsbGVyeVwiKSx0aGlzLiRlbD1hKGMpLHRoaXMuY29yZS5zPWEuZXh0ZW5kKHt9LGIsdGhpcy5jb3JlLnMpLHRoaXMuY29yZS5zLnBhZ2VyJiZ0aGlzLmNvcmUuJGl0ZW1zLmxlbmd0aD4xJiZ0aGlzLmluaXQoKSx0aGlzfTtjLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIGIsYyxkLGU9dGhpcyxmPVwiXCI7aWYoZS5jb3JlLiRvdXRlci5maW5kKFwiLmxnXCIpLmFwcGVuZCgnPGRpdiBjbGFzcz1cImxnLXBhZ2VyLW91dGVyXCI+PC9kaXY+JyksZS5jb3JlLnMuZHluYW1pYylmb3IodmFyIGc9MDtnPGUuY29yZS5zLmR5bmFtaWNFbC5sZW5ndGg7ZysrKWYrPSc8c3BhbiBjbGFzcz1cImxnLXBhZ2VyLWNvbnRcIj4gPHNwYW4gY2xhc3M9XCJsZy1wYWdlclwiPjwvc3Bhbj48ZGl2IGNsYXNzPVwibGctcGFnZXItdGh1bWItY29udFwiPjxzcGFuIGNsYXNzPVwibGctY2FyZXRcIj48L3NwYW4+IDxpbWcgc3JjPVwiJytlLmNvcmUucy5keW5hbWljRWxbZ10udGh1bWIrJ1wiIC8+PC9kaXY+PC9zcGFuPic7ZWxzZSBlLmNvcmUuJGl0ZW1zLmVhY2goZnVuY3Rpb24oKXtlLmNvcmUucy5leFRodW1iSW1hZ2U/Zis9JzxzcGFuIGNsYXNzPVwibGctcGFnZXItY29udFwiPiA8c3BhbiBjbGFzcz1cImxnLXBhZ2VyXCI+PC9zcGFuPjxkaXYgY2xhc3M9XCJsZy1wYWdlci10aHVtYi1jb250XCI+PHNwYW4gY2xhc3M9XCJsZy1jYXJldFwiPjwvc3Bhbj4gPGltZyBzcmM9XCInK2EodGhpcykuYXR0cihlLmNvcmUucy5leFRodW1iSW1hZ2UpKydcIiAvPjwvZGl2Pjwvc3Bhbj4nOmYrPSc8c3BhbiBjbGFzcz1cImxnLXBhZ2VyLWNvbnRcIj4gPHNwYW4gY2xhc3M9XCJsZy1wYWdlclwiPjwvc3Bhbj48ZGl2IGNsYXNzPVwibGctcGFnZXItdGh1bWItY29udFwiPjxzcGFuIGNsYXNzPVwibGctY2FyZXRcIj48L3NwYW4+IDxpbWcgc3JjPVwiJythKHRoaXMpLmZpbmQoXCJpbWdcIikuYXR0cihcInNyY1wiKSsnXCIgLz48L2Rpdj48L3NwYW4+J30pO2M9ZS5jb3JlLiRvdXRlci5maW5kKFwiLmxnLXBhZ2VyLW91dGVyXCIpLGMuaHRtbChmKSxiPWUuY29yZS4kb3V0ZXIuZmluZChcIi5sZy1wYWdlci1jb250XCIpLGIub24oXCJjbGljay5sZyB0b3VjaGVuZC5sZ1wiLGZ1bmN0aW9uKCl7dmFyIGI9YSh0aGlzKTtlLmNvcmUuaW5kZXg9Yi5pbmRleCgpLGUuY29yZS5zbGlkZShlLmNvcmUuaW5kZXgsITEsITAsITEpfSksYy5vbihcIm1vdXNlb3Zlci5sZ1wiLGZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KGQpLGMuYWRkQ2xhc3MoXCJsZy1wYWdlci1ob3ZlclwiKX0pLGMub24oXCJtb3VzZW91dC5sZ1wiLGZ1bmN0aW9uKCl7ZD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yy5yZW1vdmVDbGFzcyhcImxnLXBhZ2VyLWhvdmVyXCIpfSl9KSxlLmNvcmUuJGVsLm9uKFwib25CZWZvcmVTbGlkZS5sZy50bVwiLGZ1bmN0aW9uKGEsYyxkKXtiLnJlbW92ZUNsYXNzKFwibGctcGFnZXItYWN0aXZlXCIpLGIuZXEoZCkuYWRkQ2xhc3MoXCJsZy1wYWdlci1hY3RpdmVcIil9KX0sYy5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe30sYS5mbi5saWdodEdhbGxlcnkubW9kdWxlcy5wYWdlcj1jfSgpfSksZnVuY3Rpb24oYSxiKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImpxdWVyeVwiXSxmdW5jdGlvbihhKXtyZXR1cm4gYihhKX0pOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWIocmVxdWlyZShcImpxdWVyeVwiKSk6YihqUXVlcnkpfSgwLGZ1bmN0aW9uKGEpeyFmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO3ZhciBiPXt0aHVtYm5haWw6ITAsYW5pbWF0ZVRodW1iOiEwLGN1cnJlbnRQYWdlclBvc2l0aW9uOlwibWlkZGxlXCIsdGh1bWJXaWR0aDoxMDAsdGh1bWJIZWlnaHQ6XCI4MHB4XCIsdGh1bWJDb250SGVpZ2h0OjEwMCx0aHVtYk1hcmdpbjo1LGV4VGh1bWJJbWFnZTohMSxzaG93VGh1bWJCeURlZmF1bHQ6ITAsdG9vZ2xlVGh1bWI6ITAscHVsbENhcHRpb25VcDohMCxlbmFibGVUaHVtYkRyYWc6ITAsZW5hYmxlVGh1bWJTd2lwZTohMCxzd2lwZVRocmVzaG9sZDo1MCxsb2FkWW91dHViZVRodW1ibmFpbDohMCx5b3V0dWJlVGh1bWJTaXplOjEsbG9hZFZpbWVvVGh1bWJuYWlsOiEwLHZpbWVvVGh1bWJTaXplOlwidGh1bWJuYWlsX3NtYWxsXCIsbG9hZERhaWx5bW90aW9uVGh1bWJuYWlsOiEwfSxjPWZ1bmN0aW9uKGMpe3JldHVybiB0aGlzLmNvcmU9YShjKS5kYXRhKFwibGlnaHRHYWxsZXJ5XCIpLHRoaXMuY29yZS5zPWEuZXh0ZW5kKHt9LGIsdGhpcy5jb3JlLnMpLHRoaXMuJGVsPWEoYyksdGhpcy4kdGh1bWJPdXRlcj1udWxsLHRoaXMudGh1bWJPdXRlcldpZHRoPTAsdGhpcy50aHVtYlRvdGFsV2lkdGg9dGhpcy5jb3JlLiRpdGVtcy5sZW5ndGgqKHRoaXMuY29yZS5zLnRodW1iV2lkdGgrdGhpcy5jb3JlLnMudGh1bWJNYXJnaW4pLHRoaXMudGh1bWJJbmRleD10aGlzLmNvcmUuaW5kZXgsdGhpcy5jb3JlLnMuYW5pbWF0ZVRodW1iJiYodGhpcy5jb3JlLnMudGh1bWJIZWlnaHQ9XCIxMDAlXCIpLHRoaXMubGVmdD0wLHRoaXMuaW5pdCgpLHRoaXN9O2MucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3RoaXMuY29yZS5zLnRodW1ibmFpbCYmdGhpcy5jb3JlLiRpdGVtcy5sZW5ndGg+MSYmKHRoaXMuY29yZS5zLnNob3dUaHVtYkJ5RGVmYXVsdCYmc2V0VGltZW91dChmdW5jdGlvbigpe2EuY29yZS4kb3V0ZXIuYWRkQ2xhc3MoXCJsZy10aHVtYi1vcGVuXCIpfSw3MDApLHRoaXMuY29yZS5zLnB1bGxDYXB0aW9uVXAmJnRoaXMuY29yZS4kb3V0ZXIuYWRkQ2xhc3MoXCJsZy1wdWxsLWNhcHRpb24tdXBcIiksdGhpcy5idWlsZCgpLHRoaXMuY29yZS5zLmFuaW1hdGVUaHVtYiYmdGhpcy5jb3JlLmRvQ3NzKCk/KHRoaXMuY29yZS5zLmVuYWJsZVRodW1iRHJhZyYmdGhpcy5lbmFibGVUaHVtYkRyYWcoKSx0aGlzLmNvcmUucy5lbmFibGVUaHVtYlN3aXBlJiZ0aGlzLmVuYWJsZVRodW1iU3dpcGUoKSx0aGlzLnRodW1iQ2xpY2thYmxlPSExKTp0aGlzLnRodW1iQ2xpY2thYmxlPSEwLHRoaXMudG9vZ2xlKCksdGhpcy50aHVtYmtleVByZXNzKCkpfSxjLnByb3RvdHlwZS5idWlsZD1mdW5jdGlvbigpe2Z1bmN0aW9uIGIoYSxiLGMpe3ZhciBnLGg9ZC5jb3JlLmlzVmlkZW8oYSxjKXx8e30saT1cIlwiO2gueW91dHViZXx8aC52aW1lb3x8aC5kYWlseW1vdGlvbj9oLnlvdXR1YmU/Zz1kLmNvcmUucy5sb2FkWW91dHViZVRodW1ibmFpbD9cIi8vaW1nLnlvdXR1YmUuY29tL3ZpL1wiK2gueW91dHViZVsxXStcIi9cIitkLmNvcmUucy55b3V0dWJlVGh1bWJTaXplK1wiLmpwZ1wiOmI6aC52aW1lbz9kLmNvcmUucy5sb2FkVmltZW9UaHVtYm5haWw/KGc9XCIvL2kudmltZW9jZG4uY29tL3ZpZGVvL2Vycm9yX1wiK2YrXCIuanBnXCIsaT1oLnZpbWVvWzFdKTpnPWI6aC5kYWlseW1vdGlvbiYmKGc9ZC5jb3JlLnMubG9hZERhaWx5bW90aW9uVGh1bWJuYWlsP1wiLy93d3cuZGFpbHltb3Rpb24uY29tL3RodW1ibmFpbC92aWRlby9cIitoLmRhaWx5bW90aW9uWzFdOmIpOmc9YixlKz0nPGRpdiBkYXRhLXZpbWVvLWlkPVwiJytpKydcIiBjbGFzcz1cImxnLXRodW1iLWl0ZW1cIiBzdHlsZT1cIndpZHRoOicrZC5jb3JlLnMudGh1bWJXaWR0aCtcInB4OyBoZWlnaHQ6IFwiK2QuY29yZS5zLnRodW1iSGVpZ2h0K1wiOyBtYXJnaW4tcmlnaHQ6IFwiK2QuY29yZS5zLnRodW1iTWFyZ2luKydweFwiPjxpbWcgc3JjPVwiJytnKydcIiAvPjwvZGl2PicsaT1cIlwifXZhciBjLGQ9dGhpcyxlPVwiXCIsZj1cIlwiLGc9JzxkaXYgY2xhc3M9XCJsZy10aHVtYi1vdXRlclwiPjxkaXYgY2xhc3M9XCJsZy10aHVtYiBsZy1ncm91cFwiPjwvZGl2PjwvZGl2Pic7c3dpdGNoKHRoaXMuY29yZS5zLnZpbWVvVGh1bWJTaXplKXtjYXNlXCJ0aHVtYm5haWxfbGFyZ2VcIjpmPVwiNjQwXCI7YnJlYWs7Y2FzZVwidGh1bWJuYWlsX21lZGl1bVwiOmY9XCIyMDB4MTUwXCI7YnJlYWs7Y2FzZVwidGh1bWJuYWlsX3NtYWxsXCI6Zj1cIjEwMHg3NVwifWlmKGQuY29yZS4kb3V0ZXIuYWRkQ2xhc3MoXCJsZy1oYXMtdGh1bWJcIiksZC5jb3JlLiRvdXRlci5maW5kKFwiLmxnXCIpLmFwcGVuZChnKSxkLiR0aHVtYk91dGVyPWQuY29yZS4kb3V0ZXIuZmluZChcIi5sZy10aHVtYi1vdXRlclwiKSxkLnRodW1iT3V0ZXJXaWR0aD1kLiR0aHVtYk91dGVyLndpZHRoKCksZC5jb3JlLnMuYW5pbWF0ZVRodW1iJiZkLmNvcmUuJG91dGVyLmZpbmQoXCIubGctdGh1bWJcIikuY3NzKHt3aWR0aDpkLnRodW1iVG90YWxXaWR0aCtcInB4XCIscG9zaXRpb246XCJyZWxhdGl2ZVwifSksdGhpcy5jb3JlLnMuYW5pbWF0ZVRodW1iJiZkLiR0aHVtYk91dGVyLmNzcyhcImhlaWdodFwiLGQuY29yZS5zLnRodW1iQ29udEhlaWdodCtcInB4XCIpLGQuY29yZS5zLmR5bmFtaWMpZm9yKHZhciBoPTA7aDxkLmNvcmUucy5keW5hbWljRWwubGVuZ3RoO2grKyliKGQuY29yZS5zLmR5bmFtaWNFbFtoXS5zcmMsZC5jb3JlLnMuZHluYW1pY0VsW2hdLnRodW1iLGgpO2Vsc2UgZC5jb3JlLiRpdGVtcy5lYWNoKGZ1bmN0aW9uKGMpe2QuY29yZS5zLmV4VGh1bWJJbWFnZT9iKGEodGhpcykuYXR0cihcImhyZWZcIil8fGEodGhpcykuYXR0cihcImRhdGEtc3JjXCIpLGEodGhpcykuYXR0cihkLmNvcmUucy5leFRodW1iSW1hZ2UpLGMpOmIoYSh0aGlzKS5hdHRyKFwiaHJlZlwiKXx8YSh0aGlzKS5hdHRyKFwiZGF0YS1zcmNcIiksYSh0aGlzKS5maW5kKFwiaW1nXCIpLmF0dHIoXCJzcmNcIiksYyl9KTtkLmNvcmUuJG91dGVyLmZpbmQoXCIubGctdGh1bWJcIikuaHRtbChlKSxjPWQuY29yZS4kb3V0ZXIuZmluZChcIi5sZy10aHVtYi1pdGVtXCIpLGMuZWFjaChmdW5jdGlvbigpe3ZhciBiPWEodGhpcyksYz1iLmF0dHIoXCJkYXRhLXZpbWVvLWlkXCIpO2MmJmEuZ2V0SlNPTihcIi8vd3d3LnZpbWVvLmNvbS9hcGkvdjIvdmlkZW8vXCIrYytcIi5qc29uP2NhbGxiYWNrPT9cIix7Zm9ybWF0OlwianNvblwifSxmdW5jdGlvbihhKXtiLmZpbmQoXCJpbWdcIikuYXR0cihcInNyY1wiLGFbMF1bZC5jb3JlLnMudmltZW9UaHVtYlNpemVdKX0pfSksYy5lcShkLmNvcmUuaW5kZXgpLmFkZENsYXNzKFwiYWN0aXZlXCIpLGQuY29yZS4kZWwub24oXCJvbkJlZm9yZVNsaWRlLmxnLnRtXCIsZnVuY3Rpb24oKXtjLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpLGMuZXEoZC5jb3JlLmluZGV4KS5hZGRDbGFzcyhcImFjdGl2ZVwiKX0pLGMub24oXCJjbGljay5sZyB0b3VjaGVuZC5sZ1wiLGZ1bmN0aW9uKCl7dmFyIGI9YSh0aGlzKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7KGQudGh1bWJDbGlja2FibGUmJiFkLmNvcmUubGdCdXN5fHwhZC5jb3JlLmRvQ3NzKCkpJiYoZC5jb3JlLmluZGV4PWIuaW5kZXgoKSxkLmNvcmUuc2xpZGUoZC5jb3JlLmluZGV4LCExLCEwLCExKSl9LDUwKX0pLGQuY29yZS4kZWwub24oXCJvbkJlZm9yZVNsaWRlLmxnLnRtXCIsZnVuY3Rpb24oKXtkLmFuaW1hdGVUaHVtYihkLmNvcmUuaW5kZXgpfSksYSh3aW5kb3cpLm9uKFwicmVzaXplLmxnLnRodW1iIG9yaWVudGF0aW9uY2hhbmdlLmxnLnRodW1iXCIsZnVuY3Rpb24oKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZC5hbmltYXRlVGh1bWIoZC5jb3JlLmluZGV4KSxkLnRodW1iT3V0ZXJXaWR0aD1kLiR0aHVtYk91dGVyLndpZHRoKCl9LDIwMCl9KX0sYy5wcm90b3R5cGUuc2V0VHJhbnNsYXRlPWZ1bmN0aW9uKGEpe3RoaXMuY29yZS4kb3V0ZXIuZmluZChcIi5sZy10aHVtYlwiKS5jc3Moe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKC1cIithK1wicHgsIDBweCwgMHB4KVwifSl9LGMucHJvdG90eXBlLmFuaW1hdGVUaHVtYj1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmNvcmUuJG91dGVyLmZpbmQoXCIubGctdGh1bWJcIik7aWYodGhpcy5jb3JlLnMuYW5pbWF0ZVRodW1iKXt2YXIgYztzd2l0Y2godGhpcy5jb3JlLnMuY3VycmVudFBhZ2VyUG9zaXRpb24pe2Nhc2VcImxlZnRcIjpjPTA7YnJlYWs7Y2FzZVwibWlkZGxlXCI6Yz10aGlzLnRodW1iT3V0ZXJXaWR0aC8yLXRoaXMuY29yZS5zLnRodW1iV2lkdGgvMjticmVhaztjYXNlXCJyaWdodFwiOmM9dGhpcy50aHVtYk91dGVyV2lkdGgtdGhpcy5jb3JlLnMudGh1bWJXaWR0aH10aGlzLmxlZnQ9KHRoaXMuY29yZS5zLnRodW1iV2lkdGgrdGhpcy5jb3JlLnMudGh1bWJNYXJnaW4pKmEtMS1jLHRoaXMubGVmdD50aGlzLnRodW1iVG90YWxXaWR0aC10aGlzLnRodW1iT3V0ZXJXaWR0aCYmKHRoaXMubGVmdD10aGlzLnRodW1iVG90YWxXaWR0aC10aGlzLnRodW1iT3V0ZXJXaWR0aCksdGhpcy5sZWZ0PDAmJih0aGlzLmxlZnQ9MCksdGhpcy5jb3JlLmxHYWxsZXJ5T24/KGIuaGFzQ2xhc3MoXCJvblwiKXx8dGhpcy5jb3JlLiRvdXRlci5maW5kKFwiLmxnLXRodW1iXCIpLmNzcyhcInRyYW5zaXRpb24tZHVyYXRpb25cIix0aGlzLmNvcmUucy5zcGVlZCtcIm1zXCIpLHRoaXMuY29yZS5kb0NzcygpfHxiLmFuaW1hdGUoe2xlZnQ6LXRoaXMubGVmdCtcInB4XCJ9LHRoaXMuY29yZS5zLnNwZWVkKSk6dGhpcy5jb3JlLmRvQ3NzKCl8fGIuY3NzKFwibGVmdFwiLC10aGlzLmxlZnQrXCJweFwiKSx0aGlzLnNldFRyYW5zbGF0ZSh0aGlzLmxlZnQpfX0sYy5wcm90b3R5cGUuZW5hYmxlVGh1bWJEcmFnPWZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxjPTAsZD0wLGU9ITEsZj0hMSxnPTA7Yi4kdGh1bWJPdXRlci5hZGRDbGFzcyhcImxnLWdyYWJcIiksYi5jb3JlLiRvdXRlci5maW5kKFwiLmxnLXRodW1iXCIpLm9uKFwibW91c2Vkb3duLmxnLnRodW1iXCIsZnVuY3Rpb24oYSl7Yi50aHVtYlRvdGFsV2lkdGg+Yi50aHVtYk91dGVyV2lkdGgmJihhLnByZXZlbnREZWZhdWx0KCksYz1hLnBhZ2VYLGU9ITAsYi5jb3JlLiRvdXRlci5zY3JvbGxMZWZ0Kz0xLGIuY29yZS4kb3V0ZXIuc2Nyb2xsTGVmdC09MSxiLnRodW1iQ2xpY2thYmxlPSExLGIuJHRodW1iT3V0ZXIucmVtb3ZlQ2xhc3MoXCJsZy1ncmFiXCIpLmFkZENsYXNzKFwibGctZ3JhYmJpbmdcIikpfSksYSh3aW5kb3cpLm9uKFwibW91c2Vtb3ZlLmxnLnRodW1iXCIsZnVuY3Rpb24oYSl7ZSYmKGc9Yi5sZWZ0LGY9ITAsZD1hLnBhZ2VYLGIuJHRodW1iT3V0ZXIuYWRkQ2xhc3MoXCJsZy1kcmFnZ2luZ1wiKSxnLT1kLWMsZz5iLnRodW1iVG90YWxXaWR0aC1iLnRodW1iT3V0ZXJXaWR0aCYmKGc9Yi50aHVtYlRvdGFsV2lkdGgtYi50aHVtYk91dGVyV2lkdGgpLGc8MCYmKGc9MCksYi5zZXRUcmFuc2xhdGUoZykpfSksYSh3aW5kb3cpLm9uKFwibW91c2V1cC5sZy50aHVtYlwiLGZ1bmN0aW9uKCl7Zj8oZj0hMSxiLiR0aHVtYk91dGVyLnJlbW92ZUNsYXNzKFwibGctZHJhZ2dpbmdcIiksYi5sZWZ0PWcsTWF0aC5hYnMoZC1jKTxiLmNvcmUucy5zd2lwZVRocmVzaG9sZCYmKGIudGh1bWJDbGlja2FibGU9ITApKTpiLnRodW1iQ2xpY2thYmxlPSEwLGUmJihlPSExLGIuJHRodW1iT3V0ZXIucmVtb3ZlQ2xhc3MoXCJsZy1ncmFiYmluZ1wiKS5hZGRDbGFzcyhcImxnLWdyYWJcIikpfSl9LGMucHJvdG90eXBlLmVuYWJsZVRodW1iU3dpcGU9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9MCxjPTAsZD0hMSxlPTA7YS5jb3JlLiRvdXRlci5maW5kKFwiLmxnLXRodW1iXCIpLm9uKFwidG91Y2hzdGFydC5sZ1wiLGZ1bmN0aW9uKGMpe2EudGh1bWJUb3RhbFdpZHRoPmEudGh1bWJPdXRlcldpZHRoJiYoYy5wcmV2ZW50RGVmYXVsdCgpLGI9Yy5vcmlnaW5hbEV2ZW50LnRhcmdldFRvdWNoZXNbMF0ucGFnZVgsYS50aHVtYkNsaWNrYWJsZT0hMSl9KSxhLmNvcmUuJG91dGVyLmZpbmQoXCIubGctdGh1bWJcIikub24oXCJ0b3VjaG1vdmUubGdcIixmdW5jdGlvbihmKXthLnRodW1iVG90YWxXaWR0aD5hLnRodW1iT3V0ZXJXaWR0aCYmKGYucHJldmVudERlZmF1bHQoKSxjPWYub3JpZ2luYWxFdmVudC50YXJnZXRUb3VjaGVzWzBdLnBhZ2VYLGQ9ITAsYS4kdGh1bWJPdXRlci5hZGRDbGFzcyhcImxnLWRyYWdnaW5nXCIpLGU9YS5sZWZ0LGUtPWMtYixlPmEudGh1bWJUb3RhbFdpZHRoLWEudGh1bWJPdXRlcldpZHRoJiYoZT1hLnRodW1iVG90YWxXaWR0aC1hLnRodW1iT3V0ZXJXaWR0aCksZTwwJiYoZT0wKSxhLnNldFRyYW5zbGF0ZShlKSl9KSxhLmNvcmUuJG91dGVyLmZpbmQoXCIubGctdGh1bWJcIikub24oXCJ0b3VjaGVuZC5sZ1wiLGZ1bmN0aW9uKCl7YS50aHVtYlRvdGFsV2lkdGg+YS50aHVtYk91dGVyV2lkdGgmJmQ/KGQ9ITEsYS4kdGh1bWJPdXRlci5yZW1vdmVDbGFzcyhcImxnLWRyYWdnaW5nXCIpLE1hdGguYWJzKGMtYik8YS5jb3JlLnMuc3dpcGVUaHJlc2hvbGQmJihhLnRodW1iQ2xpY2thYmxlPSEwKSxhLmxlZnQ9ZSk6YS50aHVtYkNsaWNrYWJsZT0hMH0pfSxjLnByb3RvdHlwZS50b29nbGU9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuY29yZS5zLnRvb2dsZVRodW1iJiYoYS5jb3JlLiRvdXRlci5hZGRDbGFzcyhcImxnLWNhbi10b2dnbGVcIiksYS4kdGh1bWJPdXRlci5hcHBlbmQoJzxzcGFuIGNsYXNzPVwibGctdG9vZ2xlLXRodW1iIGxnLWljb25cIj48L3NwYW4+JyksYS5jb3JlLiRvdXRlci5maW5kKFwiLmxnLXRvb2dsZS10aHVtYlwiKS5vbihcImNsaWNrLmxnXCIsZnVuY3Rpb24oKXthLmNvcmUuJG91dGVyLnRvZ2dsZUNsYXNzKFwibGctdGh1bWItb3BlblwiKX0pKX0sYy5wcm90b3R5cGUudGh1bWJrZXlQcmVzcz1mdW5jdGlvbigpe3ZhciBiPXRoaXM7YSh3aW5kb3cpLm9uKFwia2V5ZG93bi5sZy50aHVtYlwiLGZ1bmN0aW9uKGEpezM4PT09YS5rZXlDb2RlPyhhLnByZXZlbnREZWZhdWx0KCksYi5jb3JlLiRvdXRlci5hZGRDbGFzcyhcImxnLXRodW1iLW9wZW5cIikpOjQwPT09YS5rZXlDb2RlJiYoYS5wcmV2ZW50RGVmYXVsdCgpLGIuY29yZS4kb3V0ZXIucmVtb3ZlQ2xhc3MoXCJsZy10aHVtYi1vcGVuXCIpKX0pfSxjLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5jb3JlLnMudGh1bWJuYWlsJiZ0aGlzLmNvcmUuJGl0ZW1zLmxlbmd0aD4xJiYoYSh3aW5kb3cpLm9mZihcInJlc2l6ZS5sZy50aHVtYiBvcmllbnRhdGlvbmNoYW5nZS5sZy50aHVtYiBrZXlkb3duLmxnLnRodW1iXCIpLFxyXG50aGlzLiR0aHVtYk91dGVyLnJlbW92ZSgpLHRoaXMuY29yZS4kb3V0ZXIucmVtb3ZlQ2xhc3MoXCJsZy1oYXMtdGh1bWJcIikpfSxhLmZuLmxpZ2h0R2FsbGVyeS5tb2R1bGVzLlRodW1ibmFpbD1jfSgpfSksZnVuY3Rpb24oYSxiKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImpxdWVyeVwiXSxmdW5jdGlvbihhKXtyZXR1cm4gYihhKX0pOlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWIocmVxdWlyZShcImpxdWVyeVwiKSk6YihhLmpRdWVyeSl9KHRoaXMsZnVuY3Rpb24oYSl7IWZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYihhLGIsYyxkKXt2YXIgZT10aGlzO2lmKGUuY29yZS4kc2xpZGUuZXEoYikuZmluZChcIi5sZy12aWRlb1wiKS5hcHBlbmQoZS5sb2FkVmlkZW8oYyxcImxnLW9iamVjdFwiLCEwLGIsZCkpLGQpaWYoZS5jb3JlLnMudmlkZW9qcyl0cnl7dmlkZW9qcyhlLmNvcmUuJHNsaWRlLmVxKGIpLmZpbmQoXCIubGctaHRtbDVcIikuZ2V0KDApLGUuY29yZS5zLnZpZGVvanNPcHRpb25zLGZ1bmN0aW9uKCl7IWUudmlkZW9Mb2FkZWQmJmUuY29yZS5zLmF1dG9wbGF5Rmlyc3RWaWRlbyYmdGhpcy5wbGF5KCl9KX1jYXRjaChhKXtjb25zb2xlLmVycm9yKFwiTWFrZSBzdXJlIHlvdSBoYXZlIGluY2x1ZGVkIHZpZGVvanNcIil9ZWxzZSFlLnZpZGVvTG9hZGVkJiZlLmNvcmUucy5hdXRvcGxheUZpcnN0VmlkZW8mJmUuY29yZS4kc2xpZGUuZXEoYikuZmluZChcIi5sZy1odG1sNVwiKS5nZXQoMCkucGxheSgpfWZ1bmN0aW9uIGMoYSxiKXt2YXIgYz10aGlzLmNvcmUuJHNsaWRlLmVxKGIpLmZpbmQoXCIubGctdmlkZW8tY29udFwiKTtjLmhhc0NsYXNzKFwibGctaGFzLWlmcmFtZVwiKXx8KGMuY3NzKFwibWF4LXdpZHRoXCIsdGhpcy5jb3JlLnMudmlkZW9NYXhXaWR0aCksdGhpcy52aWRlb0xvYWRlZD0hMCl9ZnVuY3Rpb24gZChiLGMsZCl7dmFyIGU9dGhpcyxmPWUuY29yZS4kc2xpZGUuZXEoYyksZz1mLmZpbmQoXCIubGcteW91dHViZVwiKS5nZXQoMCksaD1mLmZpbmQoXCIubGctdmltZW9cIikuZ2V0KDApLGk9Zi5maW5kKFwiLmxnLWRhaWx5bW90aW9uXCIpLmdldCgwKSxqPWYuZmluZChcIi5sZy12a1wiKS5nZXQoMCksaz1mLmZpbmQoXCIubGctaHRtbDVcIikuZ2V0KDApO2lmKGcpZy5jb250ZW50V2luZG93LnBvc3RNZXNzYWdlKCd7XCJldmVudFwiOlwiY29tbWFuZFwiLFwiZnVuY1wiOlwicGF1c2VWaWRlb1wiLFwiYXJnc1wiOlwiXCJ9JyxcIipcIik7ZWxzZSBpZihoKXRyeXskZihoKS5hcGkoXCJwYXVzZVwiKX1jYXRjaChhKXtjb25zb2xlLmVycm9yKFwiTWFrZSBzdXJlIHlvdSBoYXZlIGluY2x1ZGVkIGZyb29nYWxvb3AyIGpzXCIpfWVsc2UgaWYoaSlpLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UoXCJwYXVzZVwiLFwiKlwiKTtlbHNlIGlmKGspaWYoZS5jb3JlLnMudmlkZW9qcyl0cnl7dmlkZW9qcyhrKS5wYXVzZSgpfWNhdGNoKGEpe2NvbnNvbGUuZXJyb3IoXCJNYWtlIHN1cmUgeW91IGhhdmUgaW5jbHVkZWQgdmlkZW9qc1wiKX1lbHNlIGsucGF1c2UoKTtqJiZhKGopLmF0dHIoXCJzcmNcIixhKGopLmF0dHIoXCJzcmNcIikucmVwbGFjZShcIiZhdXRvcGxheVwiLFwiJm5vcGxheVwiKSk7dmFyIGw7bD1lLmNvcmUucy5keW5hbWljP2UuY29yZS5zLmR5bmFtaWNFbFtkXS5zcmM6ZS5jb3JlLiRpdGVtcy5lcShkKS5hdHRyKFwiaHJlZlwiKXx8ZS5jb3JlLiRpdGVtcy5lcShkKS5hdHRyKFwiZGF0YS1zcmNcIik7dmFyIG09ZS5jb3JlLmlzVmlkZW8obCxkKXx8e307KG0ueW91dHViZXx8bS52aW1lb3x8bS5kYWlseW1vdGlvbnx8bS52aykmJmUuY29yZS4kb3V0ZXIuYWRkQ2xhc3MoXCJsZy1oaWRlLWRvd25sb2FkXCIpfXZhciBlPXt2aWRlb01heFdpZHRoOlwiODU1cHhcIixhdXRvcGxheUZpcnN0VmlkZW86ITAseW91dHViZVBsYXllclBhcmFtczohMSx2aW1lb1BsYXllclBhcmFtczohMSxkYWlseW1vdGlvblBsYXllclBhcmFtczohMSx2a1BsYXllclBhcmFtczohMSx2aWRlb2pzOiExLHZpZGVvanNPcHRpb25zOnt9fSxmPWZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLmNvcmU9YShiKS5kYXRhKFwibGlnaHRHYWxsZXJ5XCIpLHRoaXMuJGVsPWEoYiksdGhpcy5jb3JlLnM9YS5leHRlbmQoe30sZSx0aGlzLmNvcmUucyksdGhpcy52aWRlb0xvYWRlZD0hMSx0aGlzLmluaXQoKSx0aGlzfTtmLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLmNvcmUuJGVsLm9uKFwiaGFzVmlkZW8ubGcudG1cIixiLmJpbmQodGhpcykpLGUuY29yZS4kZWwub24oXCJvbkFmZXJBcHBlbmRTbGlkZS5sZy50bVwiLGMuYmluZCh0aGlzKSksZS5jb3JlLmRvQ3NzKCkmJmUuY29yZS4kaXRlbXMubGVuZ3RoPjEmJihlLmNvcmUucy5lbmFibGVTd2lwZXx8ZS5jb3JlLnMuZW5hYmxlRHJhZyk/ZS5jb3JlLiRlbC5vbihcIm9uU2xpZGVDbGljay5sZy50bVwiLGZ1bmN0aW9uKCl7dmFyIGE9ZS5jb3JlLiRzbGlkZS5lcShlLmNvcmUuaW5kZXgpO2UubG9hZFZpZGVvT25jbGljayhhKX0pOmUuY29yZS4kc2xpZGUub24oXCJjbGljay5sZ1wiLGZ1bmN0aW9uKCl7ZS5sb2FkVmlkZW9PbmNsaWNrKGEodGhpcykpfSksZS5jb3JlLiRlbC5vbihcIm9uQmVmb3JlU2xpZGUubGcudG1cIixkLmJpbmQodGhpcykpLGUuY29yZS4kZWwub24oXCJvbkFmdGVyU2xpZGUubGcudG1cIixmdW5jdGlvbihhLGIpe2UuY29yZS4kc2xpZGUuZXEoYikucmVtb3ZlQ2xhc3MoXCJsZy12aWRlby1wbGF5aW5nXCIpfSksZS5jb3JlLnMuYXV0b3BsYXlGaXJzdFZpZGVvJiZlLmNvcmUuJGVsLm9uKFwib25BZmVyQXBwZW5kU2xpZGUubGcudG1cIixmdW5jdGlvbihhLGIpe2lmKCFlLmNvcmUubEdhbGxlcnlPbil7dmFyIGM9ZS5jb3JlLiRzbGlkZS5lcShiKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5sb2FkVmlkZW9PbmNsaWNrKGMpfSwxMDApfX0pfSxmLnByb3RvdHlwZS5sb2FkVmlkZW89ZnVuY3Rpb24oYixjLGQsZSxmKXt2YXIgZz1cIlwiLGg9MSxpPVwiXCIsaj10aGlzLmNvcmUuaXNWaWRlbyhiLGUpfHx7fTtpZihkJiYoaD10aGlzLnZpZGVvTG9hZGVkPzA6dGhpcy5jb3JlLnMuYXV0b3BsYXlGaXJzdFZpZGVvPzE6MCksai55b3V0dWJlKWk9XCI/d21vZGU9b3BhcXVlJmF1dG9wbGF5PVwiK2grXCImZW5hYmxlanNhcGk9MVwiLHRoaXMuY29yZS5zLnlvdXR1YmVQbGF5ZXJQYXJhbXMmJihpPWkrXCImXCIrYS5wYXJhbSh0aGlzLmNvcmUucy55b3V0dWJlUGxheWVyUGFyYW1zKSksZz0nPGlmcmFtZSBjbGFzcz1cImxnLXZpZGVvLW9iamVjdCBsZy15b3V0dWJlICcrYysnXCIgd2lkdGg9XCI1NjBcIiBoZWlnaHQ9XCIzMTVcIiBzcmM9XCIvL3d3dy55b3V0dWJlLmNvbS9lbWJlZC8nK2oueW91dHViZVsxXStpKydcIiBmcmFtZWJvcmRlcj1cIjBcIiBhbGxvd2Z1bGxzY3JlZW4+PC9pZnJhbWU+JztlbHNlIGlmKGoudmltZW8paT1cIj9hdXRvcGxheT1cIitoK1wiJmFwaT0xXCIsdGhpcy5jb3JlLnMudmltZW9QbGF5ZXJQYXJhbXMmJihpPWkrXCImXCIrYS5wYXJhbSh0aGlzLmNvcmUucy52aW1lb1BsYXllclBhcmFtcykpLGc9JzxpZnJhbWUgY2xhc3M9XCJsZy12aWRlby1vYmplY3QgbGctdmltZW8gJytjKydcIiB3aWR0aD1cIjU2MFwiIGhlaWdodD1cIjMxNVwiICBzcmM9XCIvL3BsYXllci52aW1lby5jb20vdmlkZW8vJytqLnZpbWVvWzFdK2krJ1wiIGZyYW1lYm9yZGVyPVwiMFwiIHdlYmtpdEFsbG93RnVsbFNjcmVlbiBtb3phbGxvd2Z1bGxzY3JlZW4gYWxsb3dGdWxsU2NyZWVuPjwvaWZyYW1lPic7ZWxzZSBpZihqLmRhaWx5bW90aW9uKWk9XCI/d21vZGU9b3BhcXVlJmF1dG9wbGF5PVwiK2grXCImYXBpPXBvc3RNZXNzYWdlXCIsdGhpcy5jb3JlLnMuZGFpbHltb3Rpb25QbGF5ZXJQYXJhbXMmJihpPWkrXCImXCIrYS5wYXJhbSh0aGlzLmNvcmUucy5kYWlseW1vdGlvblBsYXllclBhcmFtcykpLGc9JzxpZnJhbWUgY2xhc3M9XCJsZy12aWRlby1vYmplY3QgbGctZGFpbHltb3Rpb24gJytjKydcIiB3aWR0aD1cIjU2MFwiIGhlaWdodD1cIjMxNVwiIHNyYz1cIi8vd3d3LmRhaWx5bW90aW9uLmNvbS9lbWJlZC92aWRlby8nK2ouZGFpbHltb3Rpb25bMV0raSsnXCIgZnJhbWVib3JkZXI9XCIwXCIgYWxsb3dmdWxsc2NyZWVuPjwvaWZyYW1lPic7ZWxzZSBpZihqLmh0bWw1KXt2YXIgaz1mLnN1YnN0cmluZygwLDEpO1wiLlwiIT09ayYmXCIjXCIhPT1rfHwoZj1hKGYpLmh0bWwoKSksZz1mfWVsc2Ugai52ayYmKGk9XCImYXV0b3BsYXk9XCIraCx0aGlzLmNvcmUucy52a1BsYXllclBhcmFtcyYmKGk9aStcIiZcIithLnBhcmFtKHRoaXMuY29yZS5zLnZrUGxheWVyUGFyYW1zKSksZz0nPGlmcmFtZSBjbGFzcz1cImxnLXZpZGVvLW9iamVjdCBsZy12ayAnK2MrJ1wiIHdpZHRoPVwiNTYwXCIgaGVpZ2h0PVwiMzE1XCIgc3JjPVwiLy92ay5jb20vdmlkZW9fZXh0LnBocD8nK2oudmtbMV0raSsnXCIgZnJhbWVib3JkZXI9XCIwXCIgYWxsb3dmdWxsc2NyZWVuPjwvaWZyYW1lPicpO3JldHVybiBnfSxmLnByb3RvdHlwZS5sb2FkVmlkZW9PbmNsaWNrPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7aWYoYS5maW5kKFwiLmxnLW9iamVjdFwiKS5oYXNDbGFzcyhcImxnLWhhcy1wb3N0ZXJcIikmJmEuZmluZChcIi5sZy1vYmplY3RcIikuaXMoXCI6dmlzaWJsZVwiKSlpZihhLmhhc0NsYXNzKFwibGctaGFzLXZpZGVvXCIpKXt2YXIgYz1hLmZpbmQoXCIubGcteW91dHViZVwiKS5nZXQoMCksZD1hLmZpbmQoXCIubGctdmltZW9cIikuZ2V0KDApLGU9YS5maW5kKFwiLmxnLWRhaWx5bW90aW9uXCIpLmdldCgwKSxmPWEuZmluZChcIi5sZy1odG1sNVwiKS5nZXQoMCk7aWYoYyljLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UoJ3tcImV2ZW50XCI6XCJjb21tYW5kXCIsXCJmdW5jXCI6XCJwbGF5VmlkZW9cIixcImFyZ3NcIjpcIlwifScsXCIqXCIpO2Vsc2UgaWYoZCl0cnl7JGYoZCkuYXBpKFwicGxheVwiKX1jYXRjaChhKXtjb25zb2xlLmVycm9yKFwiTWFrZSBzdXJlIHlvdSBoYXZlIGluY2x1ZGVkIGZyb29nYWxvb3AyIGpzXCIpfWVsc2UgaWYoZSllLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UoXCJwbGF5XCIsXCIqXCIpO2Vsc2UgaWYoZilpZihiLmNvcmUucy52aWRlb2pzKXRyeXt2aWRlb2pzKGYpLnBsYXkoKX1jYXRjaChhKXtjb25zb2xlLmVycm9yKFwiTWFrZSBzdXJlIHlvdSBoYXZlIGluY2x1ZGVkIHZpZGVvanNcIil9ZWxzZSBmLnBsYXkoKTthLmFkZENsYXNzKFwibGctdmlkZW8tcGxheWluZ1wiKX1lbHNle2EuYWRkQ2xhc3MoXCJsZy12aWRlby1wbGF5aW5nIGxnLWhhcy12aWRlb1wiKTt2YXIgZyxoLGk9ZnVuY3Rpb24oYyxkKXtpZihhLmZpbmQoXCIubGctdmlkZW9cIikuYXBwZW5kKGIubG9hZFZpZGVvKGMsXCJcIiwhMSxiLmNvcmUuaW5kZXgsZCkpLGQpaWYoYi5jb3JlLnMudmlkZW9qcyl0cnl7dmlkZW9qcyhiLmNvcmUuJHNsaWRlLmVxKGIuY29yZS5pbmRleCkuZmluZChcIi5sZy1odG1sNVwiKS5nZXQoMCksYi5jb3JlLnMudmlkZW9qc09wdGlvbnMsZnVuY3Rpb24oKXt0aGlzLnBsYXkoKX0pfWNhdGNoKGEpe2NvbnNvbGUuZXJyb3IoXCJNYWtlIHN1cmUgeW91IGhhdmUgaW5jbHVkZWQgdmlkZW9qc1wiKX1lbHNlIGIuY29yZS4kc2xpZGUuZXEoYi5jb3JlLmluZGV4KS5maW5kKFwiLmxnLWh0bWw1XCIpLmdldCgwKS5wbGF5KCl9O2IuY29yZS5zLmR5bmFtaWM/KGc9Yi5jb3JlLnMuZHluYW1pY0VsW2IuY29yZS5pbmRleF0uc3JjLGg9Yi5jb3JlLnMuZHluYW1pY0VsW2IuY29yZS5pbmRleF0uaHRtbCxpKGcsaCkpOihnPWIuY29yZS4kaXRlbXMuZXEoYi5jb3JlLmluZGV4KS5hdHRyKFwiaHJlZlwiKXx8Yi5jb3JlLiRpdGVtcy5lcShiLmNvcmUuaW5kZXgpLmF0dHIoXCJkYXRhLXNyY1wiKSxoPWIuY29yZS4kaXRlbXMuZXEoYi5jb3JlLmluZGV4KS5hdHRyKFwiZGF0YS1odG1sXCIpLGkoZyxoKSk7dmFyIGo9YS5maW5kKFwiLmxnLW9iamVjdFwiKTthLmZpbmQoXCIubGctdmlkZW9cIikuYXBwZW5kKGopLGEuZmluZChcIi5sZy12aWRlby1vYmplY3RcIikuaGFzQ2xhc3MoXCJsZy1odG1sNVwiKXx8KGEucmVtb3ZlQ2xhc3MoXCJsZy1jb21wbGV0ZVwiKSxhLmZpbmQoXCIubGctdmlkZW8tb2JqZWN0XCIpLm9uKFwibG9hZC5sZyBlcnJvci5sZ1wiLGZ1bmN0aW9uKCl7YS5hZGRDbGFzcyhcImxnLWNvbXBsZXRlXCIpfSkpfX0sZi5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMudmlkZW9Mb2FkZWQ9ITF9LGEuZm4ubGlnaHRHYWxsZXJ5Lm1vZHVsZXMudmlkZW89Zn0oKX0pLGZ1bmN0aW9uKGEsYil7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXCJqcXVlcnlcIl0sZnVuY3Rpb24oYSl7cmV0dXJuIGIoYSl9KTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1iKHJlcXVpcmUoXCJqcXVlcnlcIikpOmIoalF1ZXJ5KX0oMCxmdW5jdGlvbihhKXshZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjt2YXIgYj1mdW5jdGlvbigpe3ZhciBhPSExLGI9bmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQ2hyb20oZXxpdW0pXFwvKFswLTldKylcXC4vKTtyZXR1cm4gYiYmcGFyc2VJbnQoYlsyXSwxMCk8NTQmJihhPSEwKSxhfSxjPXtzY2FsZToxLHpvb206ITAsYWN0dWFsU2l6ZTohMCxlbmFibGVab29tQWZ0ZXI6MzAwLHVzZUxlZnRGb3Jab29tOmIoKX0sZD1mdW5jdGlvbihiKXtyZXR1cm4gdGhpcy5jb3JlPWEoYikuZGF0YShcImxpZ2h0R2FsbGVyeVwiKSx0aGlzLmNvcmUucz1hLmV4dGVuZCh7fSxjLHRoaXMuY29yZS5zKSx0aGlzLmNvcmUucy56b29tJiZ0aGlzLmNvcmUuZG9Dc3MoKSYmKHRoaXMuaW5pdCgpLHRoaXMuem9vbWFibGV0aW1lb3V0PSExLHRoaXMucGFnZVg9YSh3aW5kb3cpLndpZHRoKCkvMix0aGlzLnBhZ2VZPWEod2luZG93KS5oZWlnaHQoKS8yK2Eod2luZG93KS5zY3JvbGxUb3AoKSksdGhpc307ZC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciBiPXRoaXMsYz0nPHNwYW4gaWQ9XCJsZy16b29tLWluXCIgY2xhc3M9XCJsZy1pY29uXCI+PC9zcGFuPjxzcGFuIGlkPVwibGctem9vbS1vdXRcIiBjbGFzcz1cImxnLWljb25cIj48L3NwYW4+JztiLmNvcmUucy5hY3R1YWxTaXplJiYoYys9JzxzcGFuIGlkPVwibGctYWN0dWFsLXNpemVcIiBjbGFzcz1cImxnLWljb25cIj48L3NwYW4+JyksYi5jb3JlLnMudXNlTGVmdEZvclpvb20/Yi5jb3JlLiRvdXRlci5hZGRDbGFzcyhcImxnLXVzZS1sZWZ0LWZvci16b29tXCIpOmIuY29yZS4kb3V0ZXIuYWRkQ2xhc3MoXCJsZy11c2UtdHJhbnNpdGlvbi1mb3Item9vbVwiKSx0aGlzLmNvcmUuJG91dGVyLmZpbmQoXCIubGctdG9vbGJhclwiKS5hcHBlbmQoYyksYi5jb3JlLiRlbC5vbihcIm9uU2xpZGVJdGVtTG9hZC5sZy50bS56b29tXCIsZnVuY3Rpb24oYyxkLGUpe3ZhciBmPWIuY29yZS5zLmVuYWJsZVpvb21BZnRlcitlO2EoXCJib2R5XCIpLmhhc0NsYXNzKFwibGctZnJvbS1oYXNoXCIpJiZlP2Y9MDphKFwiYm9keVwiKS5yZW1vdmVDbGFzcyhcImxnLWZyb20taGFzaFwiKSxiLnpvb21hYmxldGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi5jb3JlLiRzbGlkZS5lcShkKS5hZGRDbGFzcyhcImxnLXpvb21hYmxlXCIpfSxmKzMwKX0pO3ZhciBkPTEsZT1mdW5jdGlvbihjKXt2YXIgZCxlLGY9Yi5jb3JlLiRvdXRlci5maW5kKFwiLmxnLWN1cnJlbnQgLmxnLWltYWdlXCIpLGc9KGEod2luZG93KS53aWR0aCgpLWYucHJvcChcIm9mZnNldFdpZHRoXCIpKS8yLGg9KGEod2luZG93KS5oZWlnaHQoKS1mLnByb3AoXCJvZmZzZXRIZWlnaHRcIikpLzIrYSh3aW5kb3cpLnNjcm9sbFRvcCgpO2Q9Yi5wYWdlWC1nLGU9Yi5wYWdlWS1oO3ZhciBpPShjLTEpKmQsaj0oYy0xKSplO2YuY3NzKFwidHJhbnNmb3JtXCIsXCJzY2FsZTNkKFwiK2MrXCIsIFwiK2MrXCIsIDEpXCIpLmF0dHIoXCJkYXRhLXNjYWxlXCIsYyksYi5jb3JlLnMudXNlTGVmdEZvclpvb20/Zi5wYXJlbnQoKS5jc3Moe2xlZnQ6LWkrXCJweFwiLHRvcDotaitcInB4XCJ9KS5hdHRyKFwiZGF0YS14XCIsaSkuYXR0cihcImRhdGEteVwiLGopOmYucGFyZW50KCkuY3NzKFwidHJhbnNmb3JtXCIsXCJ0cmFuc2xhdGUzZCgtXCIraStcInB4LCAtXCIraitcInB4LCAwKVwiKS5hdHRyKFwiZGF0YS14XCIsaSkuYXR0cihcImRhdGEteVwiLGopfSxmPWZ1bmN0aW9uKCl7ZD4xP2IuY29yZS4kb3V0ZXIuYWRkQ2xhc3MoXCJsZy16b29tZWRcIik6Yi5yZXNldFpvb20oKSxkPDEmJihkPTEpLGUoZCl9LGc9ZnVuY3Rpb24oYyxlLGcsaCl7dmFyIGksaj1lLnByb3AoXCJvZmZzZXRXaWR0aFwiKTtpPWIuY29yZS5zLmR5bmFtaWM/Yi5jb3JlLnMuZHluYW1pY0VsW2ddLndpZHRofHxlWzBdLm5hdHVyYWxXaWR0aHx8ajpiLmNvcmUuJGl0ZW1zLmVxKGcpLmF0dHIoXCJkYXRhLXdpZHRoXCIpfHxlWzBdLm5hdHVyYWxXaWR0aHx8ajt2YXIgaztiLmNvcmUuJG91dGVyLmhhc0NsYXNzKFwibGctem9vbWVkXCIpP2Q9MTppPmomJihrPWkvaixkPWt8fDIpLGg/KGIucGFnZVg9YSh3aW5kb3cpLndpZHRoKCkvMixiLnBhZ2VZPWEod2luZG93KS5oZWlnaHQoKS8yK2Eod2luZG93KS5zY3JvbGxUb3AoKSk6KGIucGFnZVg9Yy5wYWdlWHx8Yy5vcmlnaW5hbEV2ZW50LnRhcmdldFRvdWNoZXNbMF0ucGFnZVgsYi5wYWdlWT1jLnBhZ2VZfHxjLm9yaWdpbmFsRXZlbnQudGFyZ2V0VG91Y2hlc1swXS5wYWdlWSksZigpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtiLmNvcmUuJG91dGVyLnJlbW92ZUNsYXNzKFwibGctZ3JhYmJpbmdcIikuYWRkQ2xhc3MoXCJsZy1ncmFiXCIpfSwxMCl9LGg9ITE7Yi5jb3JlLiRlbC5vbihcIm9uQWZlckFwcGVuZFNsaWRlLmxnLnRtLnpvb21cIixmdW5jdGlvbihhLGMpe3ZhciBkPWIuY29yZS4kc2xpZGUuZXEoYykuZmluZChcIi5sZy1pbWFnZVwiKTtkLm9uKFwiZGJsY2xpY2tcIixmdW5jdGlvbihhKXtnKGEsZCxjKX0pLGQub24oXCJ0b3VjaHN0YXJ0XCIsZnVuY3Rpb24oYSl7aD8oY2xlYXJUaW1lb3V0KGgpLGg9bnVsbCxnKGEsZCxjKSk6aD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aD1udWxsfSwzMDApLGEucHJldmVudERlZmF1bHQoKX0pfSksYSh3aW5kb3cpLm9uKFwicmVzaXplLmxnLnpvb20gc2Nyb2xsLmxnLnpvb20gb3JpZW50YXRpb25jaGFuZ2UubGcuem9vbVwiLGZ1bmN0aW9uKCl7Yi5wYWdlWD1hKHdpbmRvdykud2lkdGgoKS8yLGIucGFnZVk9YSh3aW5kb3cpLmhlaWdodCgpLzIrYSh3aW5kb3cpLnNjcm9sbFRvcCgpLGUoZCl9KSxhKFwiI2xnLXpvb20tb3V0XCIpLm9uKFwiY2xpY2subGdcIixmdW5jdGlvbigpe2IuY29yZS4kb3V0ZXIuZmluZChcIi5sZy1jdXJyZW50IC5sZy1pbWFnZVwiKS5sZW5ndGgmJihkLT1iLmNvcmUucy5zY2FsZSxmKCkpfSksYShcIiNsZy16b29tLWluXCIpLm9uKFwiY2xpY2subGdcIixmdW5jdGlvbigpe2IuY29yZS4kb3V0ZXIuZmluZChcIi5sZy1jdXJyZW50IC5sZy1pbWFnZVwiKS5sZW5ndGgmJihkKz1iLmNvcmUucy5zY2FsZSxmKCkpfSksYShcIiNsZy1hY3R1YWwtc2l6ZVwiKS5vbihcImNsaWNrLmxnXCIsZnVuY3Rpb24oYSl7ZyhhLGIuY29yZS4kc2xpZGUuZXEoYi5jb3JlLmluZGV4KS5maW5kKFwiLmxnLWltYWdlXCIpLGIuY29yZS5pbmRleCwhMCl9KSxiLmNvcmUuJGVsLm9uKFwib25CZWZvcmVTbGlkZS5sZy50bVwiLGZ1bmN0aW9uKCl7ZD0xLGIucmVzZXRab29tKCl9KSxiLnpvb21EcmFnKCksYi56b29tU3dpcGUoKX0sZC5wcm90b3R5cGUucmVzZXRab29tPWZ1bmN0aW9uKCl7dGhpcy5jb3JlLiRvdXRlci5yZW1vdmVDbGFzcyhcImxnLXpvb21lZFwiKSx0aGlzLmNvcmUuJHNsaWRlLmZpbmQoXCIubGctaW1nLXdyYXBcIikucmVtb3ZlQXR0cihcInN0eWxlIGRhdGEteCBkYXRhLXlcIiksdGhpcy5jb3JlLiRzbGlkZS5maW5kKFwiLmxnLWltYWdlXCIpLnJlbW92ZUF0dHIoXCJzdHlsZSBkYXRhLXNjYWxlXCIpLHRoaXMucGFnZVg9YSh3aW5kb3cpLndpZHRoKCkvMix0aGlzLnBhZ2VZPWEod2luZG93KS5oZWlnaHQoKS8yK2Eod2luZG93KS5zY3JvbGxUb3AoKX0sZC5wcm90b3R5cGUuem9vbVN3aXBlPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPXt9LGM9e30sZD0hMSxlPSExLGY9ITE7YS5jb3JlLiRzbGlkZS5vbihcInRvdWNoc3RhcnQubGdcIixmdW5jdGlvbihjKXtpZihhLmNvcmUuJG91dGVyLmhhc0NsYXNzKFwibGctem9vbWVkXCIpKXt2YXIgZD1hLmNvcmUuJHNsaWRlLmVxKGEuY29yZS5pbmRleCkuZmluZChcIi5sZy1vYmplY3RcIik7Zj1kLnByb3AoXCJvZmZzZXRIZWlnaHRcIikqZC5hdHRyKFwiZGF0YS1zY2FsZVwiKT5hLmNvcmUuJG91dGVyLmZpbmQoXCIubGdcIikuaGVpZ2h0KCksZT1kLnByb3AoXCJvZmZzZXRXaWR0aFwiKSpkLmF0dHIoXCJkYXRhLXNjYWxlXCIpPmEuY29yZS4kb3V0ZXIuZmluZChcIi5sZ1wiKS53aWR0aCgpLChlfHxmKSYmKGMucHJldmVudERlZmF1bHQoKSxiPXt4OmMub3JpZ2luYWxFdmVudC50YXJnZXRUb3VjaGVzWzBdLnBhZ2VYLHk6Yy5vcmlnaW5hbEV2ZW50LnRhcmdldFRvdWNoZXNbMF0ucGFnZVl9KX19KSxhLmNvcmUuJHNsaWRlLm9uKFwidG91Y2htb3ZlLmxnXCIsZnVuY3Rpb24oZyl7aWYoYS5jb3JlLiRvdXRlci5oYXNDbGFzcyhcImxnLXpvb21lZFwiKSl7dmFyIGgsaSxqPWEuY29yZS4kc2xpZGUuZXEoYS5jb3JlLmluZGV4KS5maW5kKFwiLmxnLWltZy13cmFwXCIpO2cucHJldmVudERlZmF1bHQoKSxkPSEwLGM9e3g6Zy5vcmlnaW5hbEV2ZW50LnRhcmdldFRvdWNoZXNbMF0ucGFnZVgseTpnLm9yaWdpbmFsRXZlbnQudGFyZ2V0VG91Y2hlc1swXS5wYWdlWX0sYS5jb3JlLiRvdXRlci5hZGRDbGFzcyhcImxnLXpvb20tZHJhZ2dpbmdcIiksaT1mPy1NYXRoLmFicyhqLmF0dHIoXCJkYXRhLXlcIikpKyhjLnktYi55KTotTWF0aC5hYnMoai5hdHRyKFwiZGF0YS15XCIpKSxoPWU/LU1hdGguYWJzKGouYXR0cihcImRhdGEteFwiKSkrKGMueC1iLngpOi1NYXRoLmFicyhqLmF0dHIoXCJkYXRhLXhcIikpLChNYXRoLmFicyhjLngtYi54KT4xNXx8TWF0aC5hYnMoYy55LWIueSk+MTUpJiYoYS5jb3JlLnMudXNlTGVmdEZvclpvb20/ai5jc3Moe2xlZnQ6aCtcInB4XCIsdG9wOmkrXCJweFwifSk6ai5jc3MoXCJ0cmFuc2Zvcm1cIixcInRyYW5zbGF0ZTNkKFwiK2grXCJweCwgXCIraStcInB4LCAwKVwiKSl9fSksYS5jb3JlLiRzbGlkZS5vbihcInRvdWNoZW5kLmxnXCIsZnVuY3Rpb24oKXthLmNvcmUuJG91dGVyLmhhc0NsYXNzKFwibGctem9vbWVkXCIpJiZkJiYoZD0hMSxhLmNvcmUuJG91dGVyLnJlbW92ZUNsYXNzKFwibGctem9vbS1kcmFnZ2luZ1wiKSxhLnRvdWNoZW5kWm9vbShiLGMsZSxmKSl9KX0sZC5wcm90b3R5cGUuem9vbURyYWc9ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGM9e30sZD17fSxlPSExLGY9ITEsZz0hMSxoPSExO2IuY29yZS4kc2xpZGUub24oXCJtb3VzZWRvd24ubGcuem9vbVwiLGZ1bmN0aW9uKGQpe3ZhciBmPWIuY29yZS4kc2xpZGUuZXEoYi5jb3JlLmluZGV4KS5maW5kKFwiLmxnLW9iamVjdFwiKTtoPWYucHJvcChcIm9mZnNldEhlaWdodFwiKSpmLmF0dHIoXCJkYXRhLXNjYWxlXCIpPmIuY29yZS4kb3V0ZXIuZmluZChcIi5sZ1wiKS5oZWlnaHQoKSxnPWYucHJvcChcIm9mZnNldFdpZHRoXCIpKmYuYXR0cihcImRhdGEtc2NhbGVcIik+Yi5jb3JlLiRvdXRlci5maW5kKFwiLmxnXCIpLndpZHRoKCksYi5jb3JlLiRvdXRlci5oYXNDbGFzcyhcImxnLXpvb21lZFwiKSYmYShkLnRhcmdldCkuaGFzQ2xhc3MoXCJsZy1vYmplY3RcIikmJihnfHxoKSYmKGQucHJldmVudERlZmF1bHQoKSxjPXt4OmQucGFnZVgseTpkLnBhZ2VZfSxlPSEwLGIuY29yZS4kb3V0ZXIuc2Nyb2xsTGVmdCs9MSxiLmNvcmUuJG91dGVyLnNjcm9sbExlZnQtPTEsYi5jb3JlLiRvdXRlci5yZW1vdmVDbGFzcyhcImxnLWdyYWJcIikuYWRkQ2xhc3MoXCJsZy1ncmFiYmluZ1wiKSl9KSxhKHdpbmRvdykub24oXCJtb3VzZW1vdmUubGcuem9vbVwiLGZ1bmN0aW9uKGEpe2lmKGUpe3ZhciBpLGosaz1iLmNvcmUuJHNsaWRlLmVxKGIuY29yZS5pbmRleCkuZmluZChcIi5sZy1pbWctd3JhcFwiKTtmPSEwLGQ9e3g6YS5wYWdlWCx5OmEucGFnZVl9LGIuY29yZS4kb3V0ZXIuYWRkQ2xhc3MoXCJsZy16b29tLWRyYWdnaW5nXCIpLGo9aD8tTWF0aC5hYnMoay5hdHRyKFwiZGF0YS15XCIpKSsoZC55LWMueSk6LU1hdGguYWJzKGsuYXR0cihcImRhdGEteVwiKSksaT1nPy1NYXRoLmFicyhrLmF0dHIoXCJkYXRhLXhcIikpKyhkLngtYy54KTotTWF0aC5hYnMoay5hdHRyKFwiZGF0YS14XCIpKSxiLmNvcmUucy51c2VMZWZ0Rm9yWm9vbT9rLmNzcyh7bGVmdDppK1wicHhcIix0b3A6aitcInB4XCJ9KTprLmNzcyhcInRyYW5zZm9ybVwiLFwidHJhbnNsYXRlM2QoXCIraStcInB4LCBcIitqK1wicHgsIDApXCIpfX0pLGEod2luZG93KS5vbihcIm1vdXNldXAubGcuem9vbVwiLGZ1bmN0aW9uKGEpe2UmJihlPSExLGIuY29yZS4kb3V0ZXIucmVtb3ZlQ2xhc3MoXCJsZy16b29tLWRyYWdnaW5nXCIpLCFmfHxjLng9PT1kLngmJmMueT09PWQueXx8KGQ9e3g6YS5wYWdlWCx5OmEucGFnZVl9LGIudG91Y2hlbmRab29tKGMsZCxnLGgpKSxmPSExKSxiLmNvcmUuJG91dGVyLnJlbW92ZUNsYXNzKFwibGctZ3JhYmJpbmdcIikuYWRkQ2xhc3MoXCJsZy1ncmFiXCIpfSl9LGQucHJvdG90eXBlLnRvdWNoZW5kWm9vbT1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzLGY9ZS5jb3JlLiRzbGlkZS5lcShlLmNvcmUuaW5kZXgpLmZpbmQoXCIubGctaW1nLXdyYXBcIiksZz1lLmNvcmUuJHNsaWRlLmVxKGUuY29yZS5pbmRleCkuZmluZChcIi5sZy1vYmplY3RcIiksaD0tTWF0aC5hYnMoZi5hdHRyKFwiZGF0YS14XCIpKSsoYi54LWEueCksaT0tTWF0aC5hYnMoZi5hdHRyKFwiZGF0YS15XCIpKSsoYi55LWEueSksaj0oZS5jb3JlLiRvdXRlci5maW5kKFwiLmxnXCIpLmhlaWdodCgpLWcucHJvcChcIm9mZnNldEhlaWdodFwiKSkvMixrPU1hdGguYWJzKGcucHJvcChcIm9mZnNldEhlaWdodFwiKSpNYXRoLmFicyhnLmF0dHIoXCJkYXRhLXNjYWxlXCIpKS1lLmNvcmUuJG91dGVyLmZpbmQoXCIubGdcIikuaGVpZ2h0KCkraiksbD0oZS5jb3JlLiRvdXRlci5maW5kKFwiLmxnXCIpLndpZHRoKCktZy5wcm9wKFwib2Zmc2V0V2lkdGhcIikpLzIsbT1NYXRoLmFicyhnLnByb3AoXCJvZmZzZXRXaWR0aFwiKSpNYXRoLmFicyhnLmF0dHIoXCJkYXRhLXNjYWxlXCIpKS1lLmNvcmUuJG91dGVyLmZpbmQoXCIubGdcIikud2lkdGgoKStsKTsoTWF0aC5hYnMoYi54LWEueCk+MTV8fE1hdGguYWJzKGIueS1hLnkpPjE1KSYmKGQmJihpPD0taz9pPS1rOmk+PS1qJiYoaT0taikpLGMmJihoPD0tbT9oPS1tOmg+PS1sJiYoaD0tbCkpLGQ/Zi5hdHRyKFwiZGF0YS15XCIsTWF0aC5hYnMoaSkpOmk9LU1hdGguYWJzKGYuYXR0cihcImRhdGEteVwiKSksYz9mLmF0dHIoXCJkYXRhLXhcIixNYXRoLmFicyhoKSk6aD0tTWF0aC5hYnMoZi5hdHRyKFwiZGF0YS14XCIpKSxlLmNvcmUucy51c2VMZWZ0Rm9yWm9vbT9mLmNzcyh7bGVmdDpoK1wicHhcIix0b3A6aStcInB4XCJ9KTpmLmNzcyhcInRyYW5zZm9ybVwiLFwidHJhbnNsYXRlM2QoXCIraCtcInB4LCBcIitpK1wicHgsIDApXCIpKX0sZC5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3ZhciBiPXRoaXM7Yi5jb3JlLiRlbC5vZmYoXCIubGcuem9vbVwiKSxhKHdpbmRvdykub2ZmKFwiLmxnLnpvb21cIiksYi5jb3JlLiRzbGlkZS5vZmYoXCIubGcuem9vbVwiKSxiLmNvcmUuJGVsLm9mZihcIi5sZy50bS56b29tXCIpLGIucmVzZXRab29tKCksY2xlYXJUaW1lb3V0KGIuem9vbWFibGV0aW1lb3V0KSxiLnpvb21hYmxldGltZW91dD0hMX0sYS5mbi5saWdodEdhbGxlcnkubW9kdWxlcy56b29tPWR9KCl9KSxmdW5jdGlvbihhLGIpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW1wianF1ZXJ5XCJdLGZ1bmN0aW9uKGEpe3JldHVybiBiKGEpfSk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9YihyZXF1aXJlKFwianF1ZXJ5XCIpKTpiKGpRdWVyeSl9KDAsZnVuY3Rpb24oYSl7IWZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGI9e2hhc2g6ITB9LGM9ZnVuY3Rpb24oYyl7cmV0dXJuIHRoaXMuY29yZT1hKGMpLmRhdGEoXCJsaWdodEdhbGxlcnlcIiksdGhpcy5jb3JlLnM9YS5leHRlbmQoe30sYix0aGlzLmNvcmUucyksdGhpcy5jb3JlLnMuaGFzaCYmKHRoaXMub2xkSGFzaD13aW5kb3cubG9jYXRpb24uaGFzaCx0aGlzLmluaXQoKSksdGhpc307Yy5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciBiLGM9dGhpcztjLmNvcmUuJGVsLm9uKFwib25BZnRlclNsaWRlLmxnLnRtXCIsZnVuY3Rpb24oYSxiLGQpe2hpc3RvcnkucmVwbGFjZVN0YXRlP2hpc3RvcnkucmVwbGFjZVN0YXRlKG51bGwsbnVsbCx3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUrd2luZG93LmxvY2F0aW9uLnNlYXJjaCtcIiNsZz1cIitjLmNvcmUucy5nYWxsZXJ5SWQrXCImc2xpZGU9XCIrZCk6d2luZG93LmxvY2F0aW9uLmhhc2g9XCJsZz1cIitjLmNvcmUucy5nYWxsZXJ5SWQrXCImc2xpZGU9XCIrZH0pLGEod2luZG93KS5vbihcImhhc2hjaGFuZ2UubGcuaGFzaFwiLGZ1bmN0aW9uKCl7Yj13aW5kb3cubG9jYXRpb24uaGFzaDt2YXIgYT1wYXJzZUludChiLnNwbGl0KFwiJnNsaWRlPVwiKVsxXSwxMCk7Yi5pbmRleE9mKFwibGc9XCIrYy5jb3JlLnMuZ2FsbGVyeUlkKT4tMT9jLmNvcmUuc2xpZGUoYSwhMSwhMSk6Yy5jb3JlLmxHYWxsZXJ5T24mJmMuY29yZS5kZXN0cm95KCl9KX0sYy5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuY29yZS5zLmhhc2gmJih0aGlzLm9sZEhhc2gmJnRoaXMub2xkSGFzaC5pbmRleE9mKFwibGc9XCIrdGhpcy5jb3JlLnMuZ2FsbGVyeUlkKTwwP2hpc3RvcnkucmVwbGFjZVN0YXRlP2hpc3RvcnkucmVwbGFjZVN0YXRlKG51bGwsbnVsbCx0aGlzLm9sZEhhc2gpOndpbmRvdy5sb2NhdGlvbi5oYXNoPXRoaXMub2xkSGFzaDpoaXN0b3J5LnJlcGxhY2VTdGF0ZT9oaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLGRvY3VtZW50LnRpdGxlLHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSt3aW5kb3cubG9jYXRpb24uc2VhcmNoKTp3aW5kb3cubG9jYXRpb24uaGFzaD1cIlwiLHRoaXMuY29yZS4kZWwub2ZmKFwiLmxnLmhhc2hcIikpfSxhLmZuLmxpZ2h0R2FsbGVyeS5tb2R1bGVzLmhhc2g9Y30oKX0pLGZ1bmN0aW9uKGEsYil7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXCJqcXVlcnlcIl0sZnVuY3Rpb24oYSl7cmV0dXJuIGIoYSl9KTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1iKHJlcXVpcmUoXCJqcXVlcnlcIikpOmIoalF1ZXJ5KX0oMCxmdW5jdGlvbihhKXshZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjt2YXIgYj17c2hhcmU6ITAsZmFjZWJvb2s6ITAsZmFjZWJvb2tEcm9wZG93blRleHQ6XCJGYWNlYm9va1wiLHR3aXR0ZXI6ITAsdHdpdHRlckRyb3Bkb3duVGV4dDpcIlR3aXR0ZXJcIixnb29nbGVQbHVzOiEwLGdvb2dsZVBsdXNEcm9wZG93blRleHQ6XCJHb29nbGVQbHVzXCIscGludGVyZXN0OiEwLHBpbnRlcmVzdERyb3Bkb3duVGV4dDpcIlBpbnRlcmVzdFwifSxjPWZ1bmN0aW9uKGMpe3JldHVybiB0aGlzLmNvcmU9YShjKS5kYXRhKFwibGlnaHRHYWxsZXJ5XCIpLHRoaXMuY29yZS5zPWEuZXh0ZW5kKHt9LGIsdGhpcy5jb3JlLnMpLHRoaXMuY29yZS5zLnNoYXJlJiZ0aGlzLmluaXQoKSx0aGlzfTtjLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxjPSc8c3BhbiBpZD1cImxnLXNoYXJlXCIgY2xhc3M9XCJsZy1pY29uXCI+PHVsIGNsYXNzPVwibGctZHJvcGRvd25cIiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTtcIj4nO2MrPWIuY29yZS5zLmZhY2Vib29rPyc8bGk+PGEgaWQ9XCJsZy1zaGFyZS1mYWNlYm9va1wiIHRhcmdldD1cIl9ibGFua1wiPjxzcGFuIGNsYXNzPVwibGctaWNvblwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImxnLWRyb3Bkb3duLXRleHRcIj4nK3RoaXMuY29yZS5zLmZhY2Vib29rRHJvcGRvd25UZXh0K1wiPC9zcGFuPjwvYT48L2xpPlwiOlwiXCIsYys9Yi5jb3JlLnMudHdpdHRlcj8nPGxpPjxhIGlkPVwibGctc2hhcmUtdHdpdHRlclwiIHRhcmdldD1cIl9ibGFua1wiPjxzcGFuIGNsYXNzPVwibGctaWNvblwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImxnLWRyb3Bkb3duLXRleHRcIj4nK3RoaXMuY29yZS5zLnR3aXR0ZXJEcm9wZG93blRleHQrXCI8L3NwYW4+PC9hPjwvbGk+XCI6XCJcIixjKz1iLmNvcmUucy5nb29nbGVQbHVzPyc8bGk+PGEgaWQ9XCJsZy1zaGFyZS1nb29nbGVwbHVzXCIgdGFyZ2V0PVwiX2JsYW5rXCI+PHNwYW4gY2xhc3M9XCJsZy1pY29uXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwibGctZHJvcGRvd24tdGV4dFwiPicrdGhpcy5jb3JlLnMuZ29vZ2xlUGx1c0Ryb3Bkb3duVGV4dCtcIjwvc3Bhbj48L2E+PC9saT5cIjpcIlwiLGMrPWIuY29yZS5zLnBpbnRlcmVzdD8nPGxpPjxhIGlkPVwibGctc2hhcmUtcGludGVyZXN0XCIgdGFyZ2V0PVwiX2JsYW5rXCI+PHNwYW4gY2xhc3M9XCJsZy1pY29uXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwibGctZHJvcGRvd24tdGV4dFwiPicrdGhpcy5jb3JlLnMucGludGVyZXN0RHJvcGRvd25UZXh0K1wiPC9zcGFuPjwvYT48L2xpPlwiOlwiXCIsYys9XCI8L3VsPjwvc3Bhbj5cIix0aGlzLmNvcmUuJG91dGVyLmZpbmQoXCIubGctdG9vbGJhclwiKS5hcHBlbmQoYyksdGhpcy5jb3JlLiRvdXRlci5maW5kKFwiLmxnXCIpLmFwcGVuZCgnPGRpdiBpZD1cImxnLWRyb3Bkb3duLW92ZXJsYXlcIj48L2Rpdj4nKSxhKFwiI2xnLXNoYXJlXCIpLm9uKFwiY2xpY2subGdcIixmdW5jdGlvbigpe2IuY29yZS4kb3V0ZXIudG9nZ2xlQ2xhc3MoXCJsZy1kcm9wZG93bi1hY3RpdmVcIil9KSxhKFwiI2xnLWRyb3Bkb3duLW92ZXJsYXlcIikub24oXCJjbGljay5sZ1wiLGZ1bmN0aW9uKCl7Yi5jb3JlLiRvdXRlci5yZW1vdmVDbGFzcyhcImxnLWRyb3Bkb3duLWFjdGl2ZVwiKX0pLGIuY29yZS4kZWwub24oXCJvbkFmdGVyU2xpZGUubGcudG1cIixmdW5jdGlvbihjLGQsZSl7c2V0VGltZW91dChmdW5jdGlvbigpe2EoXCIjbGctc2hhcmUtZmFjZWJvb2tcIikuYXR0cihcImhyZWZcIixcImh0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS9zaGFyZXIvc2hhcmVyLnBocD91PVwiK2VuY29kZVVSSUNvbXBvbmVudChiLmdldFNhaHJlUHJvcHMoZSxcImZhY2Vib29rU2hhcmVVcmxcIil8fHdpbmRvdy5sb2NhdGlvbi5ocmVmKSksYShcIiNsZy1zaGFyZS10d2l0dGVyXCIpLmF0dHIoXCJocmVmXCIsXCJodHRwczovL3R3aXR0ZXIuY29tL2ludGVudC90d2VldD90ZXh0PVwiK2IuZ2V0U2FocmVQcm9wcyhlLFwidHdlZXRUZXh0XCIpK1wiJnVybD1cIitlbmNvZGVVUklDb21wb25lbnQoYi5nZXRTYWhyZVByb3BzKGUsXCJ0d2l0dGVyU2hhcmVVcmxcIil8fHdpbmRvdy5sb2NhdGlvbi5ocmVmKSksYShcIiNsZy1zaGFyZS1nb29nbGVwbHVzXCIpLmF0dHIoXCJocmVmXCIsXCJodHRwczovL3BsdXMuZ29vZ2xlLmNvbS9zaGFyZT91cmw9XCIrZW5jb2RlVVJJQ29tcG9uZW50KGIuZ2V0U2FocmVQcm9wcyhlLFwiZ29vZ2xlcGx1c1NoYXJlVXJsXCIpfHx3aW5kb3cubG9jYXRpb24uaHJlZikpLGEoXCIjbGctc2hhcmUtcGludGVyZXN0XCIpLmF0dHIoXCJocmVmXCIsXCJodHRwOi8vd3d3LnBpbnRlcmVzdC5jb20vcGluL2NyZWF0ZS9idXR0b24vP3VybD1cIitlbmNvZGVVUklDb21wb25lbnQoYi5nZXRTYWhyZVByb3BzKGUsXCJwaW50ZXJlc3RTaGFyZVVybFwiKXx8d2luZG93LmxvY2F0aW9uLmhyZWYpK1wiJm1lZGlhPVwiK2VuY29kZVVSSUNvbXBvbmVudChiLmdldFNhaHJlUHJvcHMoZSxcInNyY1wiKSkrXCImZGVzY3JpcHRpb249XCIrYi5nZXRTYWhyZVByb3BzKGUsXCJwaW50ZXJlc3RUZXh0XCIpKX0sMTAwKX0pfSxjLnByb3RvdHlwZS5nZXRTYWhyZVByb3BzPWZ1bmN0aW9uKGEsYil7dmFyIGM9XCJcIjtpZih0aGlzLmNvcmUucy5keW5hbWljKWM9dGhpcy5jb3JlLnMuZHluYW1pY0VsW2FdW2JdO2Vsc2V7dmFyIGQ9dGhpcy5jb3JlLiRpdGVtcy5lcShhKS5hdHRyKFwiaHJlZlwiKSxlPXRoaXMuY29yZS4kaXRlbXMuZXEoYSkuZGF0YShiKTtjPVwic3JjXCI9PT1iP2R8fGU6ZX1yZXR1cm4gY30sYy5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe30sYS5mbi5saWdodEdhbGxlcnkubW9kdWxlcy5zaGFyZT1jfSgpfSk7IiwiLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0Q2xhc3M6IHByZXR0eVBob3RvXHJcblx0VXNlOiBMaWdodGJveCBjbG9uZSBmb3IgalF1ZXJ5XHJcblx0QXV0aG9yOiBTdGVwaGFuZSBDYXJvbiAoaHR0cDovL3d3dy5uby1tYXJnaW4tZm9yLWVycm9ycy5jb20pXHJcblx0VmVyc2lvbjogMy4xLjZcclxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4oZnVuY3Rpb24oJCkge1xyXG5cdCQucHJldHR5UGhvdG8gPSB7dmVyc2lvbjogJzMuMS42J307XHJcblx0XHJcblx0JC5mbi5wcmV0dHlQaG90byA9IGZ1bmN0aW9uKHBwX3NldHRpbmdzKSB7XHJcblx0XHRwcF9zZXR0aW5ncyA9IGpRdWVyeS5leHRlbmQoe1xyXG5cdFx0XHRob29rOiAncmVsJywgLyogdGhlIGF0dHJpYnV0ZSB0YWcgdG8gdXNlIGZvciBwcmV0dHlQaG90byBob29rcy4gZGVmYXVsdDogJ3JlbCcuIEZvciBIVE1MNSwgdXNlIFwiZGF0YS1yZWxcIiBvciBzaW1pbGFyLiAqL1xyXG5cdFx0XHRhbmltYXRpb25fc3BlZWQ6ICdmYXN0JywgLyogZmFzdC9zbG93L25vcm1hbCAqL1xyXG5cdFx0XHRhamF4Y2FsbGJhY2s6IGZ1bmN0aW9uKCkge30sXHJcblx0XHRcdHNsaWRlc2hvdzogNTAwMCwgLyogZmFsc2UgT1IgaW50ZXJ2YWwgdGltZSBpbiBtcyAqL1xyXG5cdFx0XHRhdXRvcGxheV9zbGlkZXNob3c6IGZhbHNlLCAvKiB0cnVlL2ZhbHNlICovXHJcblx0XHRcdG9wYWNpdHk6IDAuODAsIC8qIFZhbHVlIGJldHdlZW4gMCBhbmQgMSAqL1xyXG5cdFx0XHRzaG93X3RpdGxlOiB0cnVlLCAvKiB0cnVlL2ZhbHNlICovXHJcblx0XHRcdGFsbG93X3Jlc2l6ZTogdHJ1ZSwgLyogUmVzaXplIHRoZSBwaG90b3MgYmlnZ2VyIHRoYW4gdmlld3BvcnQuIHRydWUvZmFsc2UgKi9cclxuXHRcdFx0YWxsb3dfZXhwYW5kOiB0cnVlLCAvKiBBbGxvdyB0aGUgdXNlciB0byBleHBhbmQgYSByZXNpemVkIGltYWdlLiB0cnVlL2ZhbHNlICovXHJcblx0XHRcdGRlZmF1bHRfd2lkdGg6IDUwMCxcclxuXHRcdFx0ZGVmYXVsdF9oZWlnaHQ6IDM0NCxcclxuXHRcdFx0Y291bnRlcl9zZXBhcmF0b3JfbGFiZWw6ICcvJywgLyogVGhlIHNlcGFyYXRvciBmb3IgdGhlIGdhbGxlcnkgY291bnRlciAxIFwib2ZcIiAyICovXHJcblx0XHRcdHRoZW1lOiAncHBfZGVmYXVsdCcsIC8qIGxpZ2h0X3JvdW5kZWQgLyBkYXJrX3JvdW5kZWQgLyBsaWdodF9zcXVhcmUgLyBkYXJrX3NxdWFyZSAvIGZhY2Vib29rICovXHJcblx0XHRcdGhvcml6b250YWxfcGFkZGluZzogMjAsIC8qIFRoZSBwYWRkaW5nIG9uIGVhY2ggc2lkZSBvZiB0aGUgcGljdHVyZSAqL1xyXG5cdFx0XHRoaWRlZmxhc2g6IGZhbHNlLCAvKiBIaWRlcyBhbGwgdGhlIGZsYXNoIG9iamVjdCBvbiBhIHBhZ2UsIHNldCB0byBUUlVFIGlmIGZsYXNoIGFwcGVhcnMgb3ZlciBwcmV0dHlQaG90byAqL1xyXG5cdFx0XHR3bW9kZTogJ29wYXF1ZScsIC8qIFNldCB0aGUgZmxhc2ggd21vZGUgYXR0cmlidXRlICovXHJcblx0XHRcdGF1dG9wbGF5OiB0cnVlLCAvKiBBdXRvbWF0aWNhbGx5IHN0YXJ0IHZpZGVvczogVHJ1ZS9GYWxzZSAqL1xyXG5cdFx0XHRtb2RhbDogZmFsc2UsIC8qIElmIHNldCB0byB0cnVlLCBvbmx5IHRoZSBjbG9zZSBidXR0b24gd2lsbCBjbG9zZSB0aGUgd2luZG93ICovXHJcblx0XHRcdGRlZXBsaW5raW5nOiB0cnVlLCAvKiBBbGxvdyBwcmV0dHlQaG90byB0byB1cGRhdGUgdGhlIHVybCB0byBlbmFibGUgZGVlcGxpbmtpbmcuICovXHJcblx0XHRcdG92ZXJsYXlfZ2FsbGVyeTogdHJ1ZSwgLyogSWYgc2V0IHRvIHRydWUsIGEgZ2FsbGVyeSB3aWxsIG92ZXJsYXkgdGhlIGZ1bGxzY3JlZW4gaW1hZ2Ugb24gbW91c2Ugb3ZlciAqL1xyXG5cdFx0XHRvdmVybGF5X2dhbGxlcnlfbWF4OiAzMCwgLyogTWF4aW11bSBudW1iZXIgb2YgcGljdHVyZXMgaW4gdGhlIG92ZXJsYXkgZ2FsbGVyeSAqL1xyXG5cdFx0XHRrZXlib2FyZF9zaG9ydGN1dHM6IHRydWUsIC8qIFNldCB0byBmYWxzZSBpZiB5b3Ugb3BlbiBmb3JtcyBpbnNpZGUgcHJldHR5UGhvdG8gKi9cclxuXHRcdFx0Y2hhbmdlcGljdHVyZWNhbGxiYWNrOiBmdW5jdGlvbigpe30sIC8qIENhbGxlZCBldmVyeXRpbWUgYW4gaXRlbSBpcyBzaG93bi9jaGFuZ2VkICovXHJcblx0XHRcdGNhbGxiYWNrOiBmdW5jdGlvbigpe30sIC8qIENhbGxlZCB3aGVuIHByZXR0eVBob3RvIGlzIGNsb3NlZCAqL1xyXG5cdFx0XHRpZTZfZmFsbGJhY2s6IHRydWUsXHJcblx0XHRcdG1hcmt1cDogJzxkaXYgY2xhc3M9XCJwcF9waWNfaG9sZGVyXCI+IFxcXHJcblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJwcHRcIj4mbmJzcDs8L2Rpdj4gXFxcclxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cInBwX3RvcFwiPiBcXFxyXG5cdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJwcF9sZWZ0XCI+PC9kaXY+IFxcXHJcblx0XHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cInBwX21pZGRsZVwiPjwvZGl2PiBcXFxyXG5cdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJwcF9yaWdodFwiPjwvZGl2PiBcXFxyXG5cdFx0XHRcdFx0XHQ8L2Rpdj4gXFxcclxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cInBwX2NvbnRlbnRfY29udGFpbmVyXCI+IFxcXHJcblx0XHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cInBwX2xlZnRcIj4gXFxcclxuXHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwicHBfcmlnaHRcIj4gXFxcclxuXHRcdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJwcF9jb250ZW50XCI+IFxcXHJcblx0XHRcdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJwcF9sb2FkZXJJY29uXCI+PC9kaXY+IFxcXHJcblx0XHRcdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJwcF9mYWRlXCI+IFxcXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0PGEgaHJlZj1cIiNcIiBjbGFzcz1cInBwX2V4cGFuZFwiIHRpdGxlPVwiRXhwYW5kIHRoZSBpbWFnZVwiPkV4cGFuZDwvYT4gXFxcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwicHBfaG92ZXJDb250YWluZXJcIj4gXFxcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdDxhIGNsYXNzPVwicHBfbmV4dFwiIGhyZWY9XCIjXCI+bmV4dDwvYT4gXFxcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdDxhIGNsYXNzPVwicHBfcHJldmlvdXNcIiBocmVmPVwiI1wiPnByZXZpb3VzPC9hPiBcXFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdDwvZGl2PiBcXFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdDxkaXYgaWQ9XCJwcF9mdWxsX3Jlc1wiPjwvZGl2PiBcXFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJwcF9kZXRhaWxzXCI+IFxcXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwicHBfbmF2XCI+IFxcXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdDxhIGhyZWY9XCIjXCIgY2xhc3M9XCJwcF9hcnJvd19wcmV2aW91c1wiPlByZXZpb3VzPC9hPiBcXFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQ8cCBjbGFzcz1cImN1cnJlbnRUZXh0SG9sZGVyXCI+MC8wPC9wPiBcXFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQ8YSBocmVmPVwiI1wiIGNsYXNzPVwicHBfYXJyb3dfbmV4dFwiPk5leHQ8L2E+IFxcXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQ8L2Rpdj4gXFxcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdDxwIGNsYXNzPVwicHBfZGVzY3JpcHRpb25cIj48L3A+IFxcXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwicHBfc29jaWFsXCI+e3BwX3NvY2lhbH08L2Rpdj4gXFxcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdDxhIGNsYXNzPVwicHBfY2xvc2VcIiBocmVmPVwiI1wiPkNsb3NlPC9hPiBcXFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdDwvZGl2PiBcXFxyXG5cdFx0XHRcdFx0XHRcdFx0XHQ8L2Rpdj4gXFxcclxuXHRcdFx0XHRcdFx0XHRcdDwvZGl2PiBcXFxyXG5cdFx0XHRcdFx0XHRcdDwvZGl2PiBcXFxyXG5cdFx0XHRcdFx0XHRcdDwvZGl2PiBcXFxyXG5cdFx0XHRcdFx0XHQ8L2Rpdj4gXFxcclxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cInBwX2JvdHRvbVwiPiBcXFxyXG5cdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJwcF9sZWZ0XCI+PC9kaXY+IFxcXHJcblx0XHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cInBwX21pZGRsZVwiPjwvZGl2PiBcXFxyXG5cdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJwcF9yaWdodFwiPjwvZGl2PiBcXFxyXG5cdFx0XHRcdFx0XHQ8L2Rpdj4gXFxcclxuXHRcdFx0XHRcdDwvZGl2PiBcXFxyXG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cInBwX292ZXJsYXlcIj48L2Rpdj4nLFxyXG5cdFx0XHRnYWxsZXJ5X21hcmt1cDogJzxkaXYgY2xhc3M9XCJwcF9nYWxsZXJ5XCI+IFxcXHJcblx0XHRcdFx0XHRcdFx0XHQ8YSBocmVmPVwiI1wiIGNsYXNzPVwicHBfYXJyb3dfcHJldmlvdXNcIj5QcmV2aW91czwvYT4gXFxcclxuXHRcdFx0XHRcdFx0XHRcdDxkaXY+IFxcXHJcblx0XHRcdFx0XHRcdFx0XHRcdDx1bD4gXFxcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR7Z2FsbGVyeX0gXFxcclxuXHRcdFx0XHRcdFx0XHRcdFx0PC91bD4gXFxcclxuXHRcdFx0XHRcdFx0XHRcdDwvZGl2PiBcXFxyXG5cdFx0XHRcdFx0XHRcdFx0PGEgaHJlZj1cIiNcIiBjbGFzcz1cInBwX2Fycm93X25leHRcIj5OZXh0PC9hPiBcXFxyXG5cdFx0XHRcdFx0XHRcdDwvZGl2PicsXHJcblx0XHRcdGltYWdlX21hcmt1cDogJzxpbWcgaWQ9XCJmdWxsUmVzSW1hZ2VcIiBzcmM9XCJ7cGF0aH1cIiAvPicsXHJcblx0XHRcdGZsYXNoX21hcmt1cDogJzxvYmplY3QgY2xhc3NpZD1cImNsc2lkOkQyN0NEQjZFLUFFNkQtMTFjZi05NkI4LTQ0NDU1MzU0MDAwMFwiIHdpZHRoPVwie3dpZHRofVwiIGhlaWdodD1cIntoZWlnaHR9XCI+PHBhcmFtIG5hbWU9XCJ3bW9kZVwiIHZhbHVlPVwie3dtb2RlfVwiIC8+PHBhcmFtIG5hbWU9XCJhbGxvd2Z1bGxzY3JlZW5cIiB2YWx1ZT1cInRydWVcIiAvPjxwYXJhbSBuYW1lPVwiYWxsb3dzY3JpcHRhY2Nlc3NcIiB2YWx1ZT1cImFsd2F5c1wiIC8+PHBhcmFtIG5hbWU9XCJtb3ZpZVwiIHZhbHVlPVwie3BhdGh9XCIgLz48ZW1iZWQgc3JjPVwie3BhdGh9XCIgdHlwZT1cImFwcGxpY2F0aW9uL3gtc2hvY2t3YXZlLWZsYXNoXCIgYWxsb3dmdWxsc2NyZWVuPVwidHJ1ZVwiIGFsbG93c2NyaXB0YWNjZXNzPVwiYWx3YXlzXCIgd2lkdGg9XCJ7d2lkdGh9XCIgaGVpZ2h0PVwie2hlaWdodH1cIiB3bW9kZT1cInt3bW9kZX1cIj48L2VtYmVkPjwvb2JqZWN0PicsXHJcblx0XHRcdHF1aWNrdGltZV9tYXJrdXA6ICc8b2JqZWN0IGNsYXNzaWQ9XCJjbHNpZDowMkJGMjVENS04QzE3LTRCMjMtQkM4MC1EMzQ4OEFCRERDNkJcIiBjb2RlYmFzZT1cImh0dHA6Ly93d3cuYXBwbGUuY29tL3F0YWN0aXZleC9xdHBsdWdpbi5jYWJcIiBoZWlnaHQ9XCJ7aGVpZ2h0fVwiIHdpZHRoPVwie3dpZHRofVwiPjxwYXJhbSBuYW1lPVwic3JjXCIgdmFsdWU9XCJ7cGF0aH1cIj48cGFyYW0gbmFtZT1cImF1dG9wbGF5XCIgdmFsdWU9XCJ7YXV0b3BsYXl9XCI+PHBhcmFtIG5hbWU9XCJ0eXBlXCIgdmFsdWU9XCJ2aWRlby9xdWlja3RpbWVcIj48ZW1iZWQgc3JjPVwie3BhdGh9XCIgaGVpZ2h0PVwie2hlaWdodH1cIiB3aWR0aD1cInt3aWR0aH1cIiBhdXRvcGxheT1cInthdXRvcGxheX1cIiB0eXBlPVwidmlkZW8vcXVpY2t0aW1lXCIgcGx1Z2luc3BhZ2U9XCJodHRwOi8vd3d3LmFwcGxlLmNvbS9xdWlja3RpbWUvZG93bmxvYWQvXCI+PC9lbWJlZD48L29iamVjdD4nLFxyXG5cdFx0XHRpZnJhbWVfbWFya3VwOiAnPGlmcmFtZSBzcmMgPVwie3BhdGh9XCIgd2lkdGg9XCJ7d2lkdGh9XCIgaGVpZ2h0PVwie2hlaWdodH1cIiBmcmFtZWJvcmRlcj1cIm5vXCI+PC9pZnJhbWU+JyxcclxuXHRcdFx0aW5saW5lX21hcmt1cDogJzxkaXYgY2xhc3M9XCJwcF9pbmxpbmVcIj57Y29udGVudH08L2Rpdj4nLFxyXG5cdFx0XHRjdXN0b21fbWFya3VwOiAnJyxcclxuXHRcdFx0c29jaWFsX3Rvb2xzOiAnPGRpdiBjbGFzcz1cInR3aXR0ZXJcIj48YSBocmVmPVwiaHR0cDovL3R3aXR0ZXIuY29tL3NoYXJlXCIgY2xhc3M9XCJ0d2l0dGVyLXNoYXJlLWJ1dHRvblwiIGRhdGEtY291bnQ9XCJub25lXCI+VHdlZXQ8L2E+PHNjcmlwdCB0eXBlPVwidGV4dC9qYXZhc2NyaXB0XCIgc3JjPVwiaHR0cDovL3BsYXRmb3JtLnR3aXR0ZXIuY29tL3dpZGdldHMuanNcIj48L3NjcmlwdD48L2Rpdj48ZGl2IGNsYXNzPVwiZmFjZWJvb2tcIj48aWZyYW1lIHNyYz1cIi8vd3d3LmZhY2Vib29rLmNvbS9wbHVnaW5zL2xpa2UucGhwP2xvY2FsZT1lbl9VUyZocmVmPXtsb2NhdGlvbl9ocmVmfSZhbXA7bGF5b3V0PWJ1dHRvbl9jb3VudCZhbXA7c2hvd19mYWNlcz10cnVlJmFtcDt3aWR0aD01MDAmYW1wO2FjdGlvbj1saWtlJmFtcDtmb250JmFtcDtjb2xvcnNjaGVtZT1saWdodCZhbXA7aGVpZ2h0PTIzXCIgc2Nyb2xsaW5nPVwibm9cIiBmcmFtZWJvcmRlcj1cIjBcIiBzdHlsZT1cImJvcmRlcjpub25lOyBvdmVyZmxvdzpoaWRkZW47IHdpZHRoOjUwMHB4OyBoZWlnaHQ6MjNweDtcIiBhbGxvd1RyYW5zcGFyZW5jeT1cInRydWVcIj48L2lmcmFtZT48L2Rpdj4nIC8qIGh0bWwgb3IgZmFsc2UgdG8gZGlzYWJsZSAqL1xyXG5cdFx0fSwgcHBfc2V0dGluZ3MpO1xyXG5cdFx0XHJcblx0XHQvLyBHbG9iYWwgdmFyaWFibGVzIGFjY2Vzc2libGUgb25seSBieSBwcmV0dHlQaG90b1xyXG5cdFx0dmFyIG1hdGNoZWRPYmplY3RzID0gdGhpcywgcGVyY2VudEJhc2VkID0gZmFsc2UsIHBwX2RpbWVuc2lvbnMsIHBwX29wZW4sXHJcblx0XHRcclxuXHRcdC8vIHByZXR0eVBob3RvIGNvbnRhaW5lciBzcGVjaWZpY1xyXG5cdFx0cHBfY29udGVudEhlaWdodCwgcHBfY29udGVudFdpZHRoLCBwcF9jb250YWluZXJIZWlnaHQsIHBwX2NvbnRhaW5lcldpZHRoLFxyXG5cdFx0XHJcblx0XHQvLyBXaW5kb3cgc2l6ZVxyXG5cdFx0d2luZG93SGVpZ2h0ID0gJCh3aW5kb3cpLmhlaWdodCgpLCB3aW5kb3dXaWR0aCA9ICQod2luZG93KS53aWR0aCgpLFxyXG5cclxuXHRcdC8vIEdsb2JhbCBlbGVtZW50c1xyXG5cdFx0cHBfc2xpZGVzaG93O1xyXG5cdFx0XHJcblx0XHRkb3Jlc2l6ZSA9IHRydWUsIHNjcm9sbF9wb3MgPSBfZ2V0X3Njcm9sbCgpO1xyXG5cdFxyXG5cdFx0Ly8gV2luZG93L0tleWJvYXJkIGV2ZW50c1xyXG5cdFx0JCh3aW5kb3cpLnVuYmluZCgncmVzaXplLnByZXR0eXBob3RvJykuYmluZCgncmVzaXplLnByZXR0eXBob3RvJyxmdW5jdGlvbigpeyBfY2VudGVyX292ZXJsYXkoKTsgX3Jlc2l6ZV9vdmVybGF5KCk7IH0pO1xyXG5cdFx0XHJcblx0XHRpZihwcF9zZXR0aW5ncy5rZXlib2FyZF9zaG9ydGN1dHMpIHtcclxuXHRcdFx0JChkb2N1bWVudCkudW5iaW5kKCdrZXlkb3duLnByZXR0eXBob3RvJykuYmluZCgna2V5ZG93bi5wcmV0dHlwaG90bycsZnVuY3Rpb24oZSl7XHJcblx0XHRcdFx0aWYodHlwZW9mICRwcF9waWNfaG9sZGVyICE9ICd1bmRlZmluZWQnKXtcclxuXHRcdFx0XHRcdGlmKCRwcF9waWNfaG9sZGVyLmlzKCc6dmlzaWJsZScpKXtcclxuXHRcdFx0XHRcdFx0c3dpdGNoKGUua2V5Q29kZSl7XHJcblx0XHRcdFx0XHRcdFx0Y2FzZSAzNzpcclxuXHRcdFx0XHRcdFx0XHRcdCQucHJldHR5UGhvdG8uY2hhbmdlUGFnZSgncHJldmlvdXMnKTtcclxuXHRcdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRcdGNhc2UgMzk6XHJcblx0XHRcdFx0XHRcdFx0XHQkLnByZXR0eVBob3RvLmNoYW5nZVBhZ2UoJ25leHQnKTtcclxuXHRcdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRcdGNhc2UgMjc6XHJcblx0XHRcdFx0XHRcdFx0XHRpZighc2V0dGluZ3MubW9kYWwpXHJcblx0XHRcdFx0XHRcdFx0XHQkLnByZXR0eVBob3RvLmNsb3NlKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0fTtcclxuXHRcdFx0XHRcdFx0Ly8gcmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdFx0fTtcclxuXHRcdFx0XHR9O1xyXG5cdFx0XHR9KTtcclxuXHRcdH07XHJcblx0XHRcclxuXHRcdC8qKlxyXG5cdFx0KiBJbml0aWFsaXplIHByZXR0eVBob3RvLlxyXG5cdFx0Ki9cclxuXHRcdCQucHJldHR5UGhvdG8uaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcclxuXHRcdFx0c2V0dGluZ3MgPSBwcF9zZXR0aW5ncztcclxuXHRcdFx0XHJcblx0XHRcdGlmKHNldHRpbmdzLnRoZW1lID09ICdwcF9kZWZhdWx0Jykgc2V0dGluZ3MuaG9yaXpvbnRhbF9wYWRkaW5nID0gMTY7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBGaW5kIG91dCBpZiB0aGUgcGljdHVyZSBpcyBwYXJ0IG9mIGEgc2V0XHJcblx0XHRcdHRoZVJlbCA9ICQodGhpcykuYXR0cihzZXR0aW5ncy5ob29rKTtcclxuXHRcdFx0Z2FsbGVyeVJlZ0V4cCA9IC9cXFsoPzouKilcXF0vO1xyXG5cdFx0XHRpc1NldCA9IChnYWxsZXJ5UmVnRXhwLmV4ZWModGhlUmVsKSkgPyB0cnVlIDogZmFsc2U7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBQdXQgdGhlIFNSQ3MsIFRJVExFcywgQUxUcyBpbnRvIGFuIGFycmF5LlxyXG5cdFx0XHRwcF9pbWFnZXMgPSAoaXNTZXQpID8galF1ZXJ5Lm1hcChtYXRjaGVkT2JqZWN0cywgZnVuY3Rpb24obiwgaSl7IGlmKCQobikuYXR0cihzZXR0aW5ncy5ob29rKS5pbmRleE9mKHRoZVJlbCkgIT0gLTEpIHJldHVybiAkKG4pLmF0dHIoJ2hyZWYnKTsgfSkgOiAkLm1ha2VBcnJheSgkKHRoaXMpLmF0dHIoJ2hyZWYnKSk7XHJcblx0XHRcdHBwX3RpdGxlcyA9IChpc1NldCkgPyBqUXVlcnkubWFwKG1hdGNoZWRPYmplY3RzLCBmdW5jdGlvbihuLCBpKXsgaWYoJChuKS5hdHRyKHNldHRpbmdzLmhvb2spLmluZGV4T2YodGhlUmVsKSAhPSAtMSkgcmV0dXJuICgkKG4pLmZpbmQoJ2ltZycpLmF0dHIoJ2FsdCcpKSA/ICQobikuZmluZCgnaW1nJykuYXR0cignYWx0JykgOiBcIlwiOyB9KSA6ICQubWFrZUFycmF5KCQodGhpcykuZmluZCgnaW1nJykuYXR0cignYWx0JykpO1xyXG5cdFx0XHRwcF9kZXNjcmlwdGlvbnMgPSAoaXNTZXQpID8galF1ZXJ5Lm1hcChtYXRjaGVkT2JqZWN0cywgZnVuY3Rpb24obiwgaSl7IGlmKCQobikuYXR0cihzZXR0aW5ncy5ob29rKS5pbmRleE9mKHRoZVJlbCkgIT0gLTEpIHJldHVybiAoJChuKS5hdHRyKCd0aXRsZScpKSA/ICQobikuYXR0cigndGl0bGUnKSA6IFwiXCI7IH0pIDogJC5tYWtlQXJyYXkoJCh0aGlzKS5hdHRyKCd0aXRsZScpKTtcclxuXHRcdFx0XHJcblx0XHRcdGlmKHBwX2ltYWdlcy5sZW5ndGggPiBzZXR0aW5ncy5vdmVybGF5X2dhbGxlcnlfbWF4KSBzZXR0aW5ncy5vdmVybGF5X2dhbGxlcnkgPSBmYWxzZTtcclxuXHRcdFx0XHJcblx0XHRcdHNldF9wb3NpdGlvbiA9IGpRdWVyeS5pbkFycmF5KCQodGhpcykuYXR0cignaHJlZicpLCBwcF9pbWFnZXMpOyAvLyBEZWZpbmUgd2hlcmUgaW4gdGhlIGFycmF5IHRoZSBjbGlja2VkIGl0ZW0gaXMgcG9zaXRpb25uZWRcclxuXHRcdFx0cmVsX2luZGV4ID0gKGlzU2V0KSA/IHNldF9wb3NpdGlvbiA6ICQoXCJhW1wiK3NldHRpbmdzLmhvb2srXCJePSdcIit0aGVSZWwrXCInXVwiKS5pbmRleCgkKHRoaXMpKTtcclxuXHRcdFx0XHJcblx0XHRcdF9idWlsZF9vdmVybGF5KHRoaXMpOyAvLyBCdWlsZCB0aGUgb3ZlcmxheSB7dGhpc30gYmVpbmcgdGhlIGNhbGxlclxyXG5cdFx0XHRcclxuXHRcdFx0aWYoc2V0dGluZ3MuYWxsb3dfcmVzaXplKVxyXG5cdFx0XHRcdCQod2luZG93KS5iaW5kKCdzY3JvbGwucHJldHR5cGhvdG8nLGZ1bmN0aW9uKCl7IF9jZW50ZXJfb3ZlcmxheSgpOyB9KTtcclxuXHRcdFx0XHJcblx0XHRcdFxyXG5cdFx0XHQkLnByZXR0eVBob3RvLm9wZW4oKTtcclxuXHRcdFx0XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIE9wZW5zIHRoZSBwcmV0dHlQaG90byBtb2RhbCBib3guXHJcblx0XHQqIEBwYXJhbSBpbWFnZSB7U3RyaW5nLEFycmF5fSBGdWxsIHBhdGggdG8gdGhlIGltYWdlIHRvIGJlIG9wZW4sIGNhbiBhbHNvIGJlIGFuIGFycmF5IGNvbnRhaW5pbmcgZnVsbCBpbWFnZXMgcGF0aHMuXHJcblx0XHQqIEBwYXJhbSB0aXRsZSB7U3RyaW5nLEFycmF5fSBUaGUgdGl0bGUgdG8gYmUgZGlzcGxheWVkIHdpdGggdGhlIHBpY3R1cmUsIGNhbiBhbHNvIGJlIGFuIGFycmF5IGNvbnRhaW5pbmcgYWxsIHRoZSB0aXRsZXMuXHJcblx0XHQqIEBwYXJhbSBkZXNjcmlwdGlvbiB7U3RyaW5nLEFycmF5fSBUaGUgZGVzY3JpcHRpb24gdG8gYmUgZGlzcGxheWVkIHdpdGggdGhlIHBpY3R1cmUsIGNhbiBhbHNvIGJlIGFuIGFycmF5IGNvbnRhaW5pbmcgYWxsIHRoZSBkZXNjcmlwdGlvbnMuXHJcblx0XHQqL1xyXG5cdFx0JC5wcmV0dHlQaG90by5vcGVuID0gZnVuY3Rpb24oZXZlbnQpIHtcclxuXHRcdFx0aWYodHlwZW9mIHNldHRpbmdzID09IFwidW5kZWZpbmVkXCIpeyAvLyBNZWFucyBpdCdzIGFuIEFQSSBjYWxsLCBuZWVkIHRvIG1hbnVhbGx5IGdldCB0aGUgc2V0dGluZ3MgYW5kIHNldCB0aGUgdmFyaWFibGVzXHJcblx0XHRcdFx0c2V0dGluZ3MgPSBwcF9zZXR0aW5ncztcclxuXHRcdFx0XHRwcF9pbWFnZXMgPSAkLm1ha2VBcnJheShhcmd1bWVudHNbMF0pO1xyXG5cdFx0XHRcdHBwX3RpdGxlcyA9IChhcmd1bWVudHNbMV0pID8gJC5tYWtlQXJyYXkoYXJndW1lbnRzWzFdKSA6ICQubWFrZUFycmF5KFwiXCIpO1xyXG5cdFx0XHRcdHBwX2Rlc2NyaXB0aW9ucyA9IChhcmd1bWVudHNbMl0pID8gJC5tYWtlQXJyYXkoYXJndW1lbnRzWzJdKSA6ICQubWFrZUFycmF5KFwiXCIpO1xyXG5cdFx0XHRcdGlzU2V0ID0gKHBwX2ltYWdlcy5sZW5ndGggPiAxKSA/IHRydWUgOiBmYWxzZTtcclxuXHRcdFx0XHRzZXRfcG9zaXRpb24gPSAoYXJndW1lbnRzWzNdKT8gYXJndW1lbnRzWzNdOiAwO1xyXG5cdFx0XHRcdF9idWlsZF9vdmVybGF5KGV2ZW50LnRhcmdldCk7IC8vIEJ1aWxkIHRoZSBvdmVybGF5IHt0aGlzfSBiZWluZyB0aGUgY2FsbGVyXHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdGlmKHNldHRpbmdzLmhpZGVmbGFzaCkgJCgnb2JqZWN0LGVtYmVkLGlmcmFtZVtzcmMqPXlvdXR1YmVdLGlmcmFtZVtzcmMqPXZpbWVvXScpLmNzcygndmlzaWJpbGl0eScsJ2hpZGRlbicpOyAvLyBIaWRlIHRoZSBmbGFzaFxyXG5cclxuXHRcdFx0X2NoZWNrUG9zaXRpb24oJChwcF9pbWFnZXMpLnNpemUoKSk7IC8vIEhpZGUgdGhlIG5leHQvcHJldmlvdXMgbGlua3MgaWYgb24gZmlyc3Qgb3IgbGFzdCBpbWFnZXMuXHJcblx0XHRcclxuXHRcdFx0JCgnLnBwX2xvYWRlckljb24nKS5zaG93KCk7XHJcblx0XHRcclxuXHRcdFx0aWYoc2V0dGluZ3MuZGVlcGxpbmtpbmcpXHJcblx0XHRcdFx0c2V0SGFzaHRhZygpO1xyXG5cdFx0XHJcblx0XHRcdC8vIFJlYnVpbGQgRmFjZWJvb2sgTGlrZSBCdXR0b24gd2l0aCB1cGRhdGVkIGhyZWZcclxuXHRcdFx0aWYoc2V0dGluZ3Muc29jaWFsX3Rvb2xzKXtcclxuXHRcdFx0XHRmYWNlYm9va19saWtlX2xpbmsgPSBzZXR0aW5ncy5zb2NpYWxfdG9vbHMucmVwbGFjZSgne2xvY2F0aW9uX2hyZWZ9JywgZW5jb2RlVVJJQ29tcG9uZW50KGxvY2F0aW9uLmhyZWYpKTsgXHJcblx0XHRcdFx0JHBwX3BpY19ob2xkZXIuZmluZCgnLnBwX3NvY2lhbCcpLmh0bWwoZmFjZWJvb2tfbGlrZV9saW5rKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gRmFkZSB0aGUgY29udGVudCBpblxyXG5cdFx0XHRpZigkcHB0LmlzKCc6aGlkZGVuJykpICRwcHQuY3NzKCdvcGFjaXR5JywwKS5zaG93KCk7XHJcblx0XHRcdCRwcF9vdmVybGF5LnNob3coKS5mYWRlVG8oc2V0dGluZ3MuYW5pbWF0aW9uX3NwZWVkLHNldHRpbmdzLm9wYWNpdHkpO1xyXG5cclxuXHRcdFx0Ly8gRGlzcGxheSB0aGUgY3VycmVudCBwb3NpdGlvblxyXG5cdFx0XHQkcHBfcGljX2hvbGRlci5maW5kKCcuY3VycmVudFRleHRIb2xkZXInKS50ZXh0KChzZXRfcG9zaXRpb24rMSkgKyBzZXR0aW5ncy5jb3VudGVyX3NlcGFyYXRvcl9sYWJlbCArICQocHBfaW1hZ2VzKS5zaXplKCkpO1xyXG5cclxuXHRcdFx0Ly8gU2V0IHRoZSBkZXNjcmlwdGlvblxyXG5cdFx0XHRpZih0eXBlb2YgcHBfZGVzY3JpcHRpb25zW3NldF9wb3NpdGlvbl0gIT0gJ3VuZGVmaW5lZCcgJiYgcHBfZGVzY3JpcHRpb25zW3NldF9wb3NpdGlvbl0gIT0gXCJcIil7XHJcblx0XHRcdFx0JHBwX3BpY19ob2xkZXIuZmluZCgnLnBwX2Rlc2NyaXB0aW9uJykuc2hvdygpLmh0bWwodW5lc2NhcGUocHBfZGVzY3JpcHRpb25zW3NldF9wb3NpdGlvbl0pKTtcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0JHBwX3BpY19ob2xkZXIuZmluZCgnLnBwX2Rlc2NyaXB0aW9uJykuaGlkZSgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBHZXQgdGhlIGRpbWVuc2lvbnNcclxuXHRcdFx0bW92aWVfd2lkdGggPSAoIHBhcnNlRmxvYXQoZ2V0UGFyYW0oJ3dpZHRoJyxwcF9pbWFnZXNbc2V0X3Bvc2l0aW9uXSkpICkgPyBnZXRQYXJhbSgnd2lkdGgnLHBwX2ltYWdlc1tzZXRfcG9zaXRpb25dKSA6IHNldHRpbmdzLmRlZmF1bHRfd2lkdGgudG9TdHJpbmcoKTtcclxuXHRcdFx0bW92aWVfaGVpZ2h0ID0gKCBwYXJzZUZsb2F0KGdldFBhcmFtKCdoZWlnaHQnLHBwX2ltYWdlc1tzZXRfcG9zaXRpb25dKSkgKSA/IGdldFBhcmFtKCdoZWlnaHQnLHBwX2ltYWdlc1tzZXRfcG9zaXRpb25dKSA6IHNldHRpbmdzLmRlZmF1bHRfaGVpZ2h0LnRvU3RyaW5nKCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBJZiB0aGUgc2l6ZSBpcyAlIGJhc2VkLCBjYWxjdWxhdGUgYWNjb3JkaW5nIHRvIHdpbmRvdyBkaW1lbnNpb25zXHJcblx0XHRcdHBlcmNlbnRCYXNlZD1mYWxzZTtcclxuXHRcdFx0aWYobW92aWVfaGVpZ2h0LmluZGV4T2YoJyUnKSAhPSAtMSkgeyBtb3ZpZV9oZWlnaHQgPSBwYXJzZUZsb2F0KCgkKHdpbmRvdykuaGVpZ2h0KCkgKiBwYXJzZUZsb2F0KG1vdmllX2hlaWdodCkgLyAxMDApIC0gMTUwKTsgcGVyY2VudEJhc2VkID0gdHJ1ZTsgfVxyXG5cdFx0XHRpZihtb3ZpZV93aWR0aC5pbmRleE9mKCclJykgIT0gLTEpIHsgbW92aWVfd2lkdGggPSBwYXJzZUZsb2F0KCgkKHdpbmRvdykud2lkdGgoKSAqIHBhcnNlRmxvYXQobW92aWVfd2lkdGgpIC8gMTAwKSAtIDE1MCk7IHBlcmNlbnRCYXNlZCA9IHRydWU7IH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIEZhZGUgdGhlIGhvbGRlclxyXG5cdFx0XHQkcHBfcGljX2hvbGRlci5mYWRlSW4oZnVuY3Rpb24oKXtcclxuXHRcdFx0XHQvLyBTZXQgdGhlIHRpdGxlXHJcblx0XHRcdFx0KHNldHRpbmdzLnNob3dfdGl0bGUgJiYgcHBfdGl0bGVzW3NldF9wb3NpdGlvbl0gIT0gXCJcIiAmJiB0eXBlb2YgcHBfdGl0bGVzW3NldF9wb3NpdGlvbl0gIT0gXCJ1bmRlZmluZWRcIikgPyAkcHB0Lmh0bWwodW5lc2NhcGUocHBfdGl0bGVzW3NldF9wb3NpdGlvbl0pKSA6ICRwcHQuaHRtbCgnJm5ic3A7Jyk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aW1nUHJlbG9hZGVyID0gXCJcIjtcclxuXHRcdFx0XHRza2lwSW5qZWN0aW9uID0gZmFsc2U7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gSW5qZWN0IHRoZSBwcm9wZXIgY29udGVudFxyXG5cdFx0XHRcdHN3aXRjaChfZ2V0RmlsZVR5cGUocHBfaW1hZ2VzW3NldF9wb3NpdGlvbl0pKXtcclxuXHRcdFx0XHRcdGNhc2UgJ2ltYWdlJzpcclxuXHRcdFx0XHRcdFx0aW1nUHJlbG9hZGVyID0gbmV3IEltYWdlKCk7XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBQcmVsb2FkIHRoZSBuZWlnaGJvdXIgaW1hZ2VzXHJcblx0XHRcdFx0XHRcdG5leHRJbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG5cdFx0XHRcdFx0XHRpZihpc1NldCAmJiBzZXRfcG9zaXRpb24gPCAkKHBwX2ltYWdlcykuc2l6ZSgpIC0xKSBuZXh0SW1hZ2Uuc3JjID0gcHBfaW1hZ2VzW3NldF9wb3NpdGlvbiArIDFdO1xyXG5cdFx0XHRcdFx0XHRwcmV2SW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuXHRcdFx0XHRcdFx0aWYoaXNTZXQgJiYgcHBfaW1hZ2VzW3NldF9wb3NpdGlvbiAtIDFdKSBwcmV2SW1hZ2Uuc3JjID0gcHBfaW1hZ2VzW3NldF9wb3NpdGlvbiAtIDFdO1xyXG5cclxuXHRcdFx0XHRcdFx0JHBwX3BpY19ob2xkZXIuZmluZCgnI3BwX2Z1bGxfcmVzJylbMF0uaW5uZXJIVE1MID0gc2V0dGluZ3MuaW1hZ2VfbWFya3VwLnJlcGxhY2UoL3twYXRofS9nLHBwX2ltYWdlc1tzZXRfcG9zaXRpb25dKTtcclxuXHJcblx0XHRcdFx0XHRcdGltZ1ByZWxvYWRlci5vbmxvYWQgPSBmdW5jdGlvbigpe1xyXG5cdFx0XHRcdFx0XHRcdC8vIEZpdCBpdGVtIHRvIHZpZXdwb3J0XHJcblx0XHRcdFx0XHRcdFx0cHBfZGltZW5zaW9ucyA9IF9maXRUb1ZpZXdwb3J0KGltZ1ByZWxvYWRlci53aWR0aCxpbWdQcmVsb2FkZXIuaGVpZ2h0KTtcclxuXHJcblx0XHRcdFx0XHRcdFx0X3Nob3dDb250ZW50KCk7XHJcblx0XHRcdFx0XHRcdH07XHJcblxyXG5cdFx0XHRcdFx0XHRpbWdQcmVsb2FkZXIub25lcnJvciA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0XHRcdFx0YWxlcnQoJ0ltYWdlIGNhbm5vdCBiZSBsb2FkZWQuIE1ha2Ugc3VyZSB0aGUgcGF0aCBpcyBjb3JyZWN0IGFuZCBpbWFnZSBleGlzdC4nKTtcclxuXHRcdFx0XHRcdFx0XHQkLnByZXR0eVBob3RvLmNsb3NlKCk7XHJcblx0XHRcdFx0XHRcdH07XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0aW1nUHJlbG9hZGVyLnNyYyA9IHBwX2ltYWdlc1tzZXRfcG9zaXRpb25dO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0XHRjYXNlICd5b3V0dWJlJzpcclxuXHRcdFx0XHRcdFx0cHBfZGltZW5zaW9ucyA9IF9maXRUb1ZpZXdwb3J0KG1vdmllX3dpZHRoLG1vdmllX2hlaWdodCk7IC8vIEZpdCBpdGVtIHRvIHZpZXdwb3J0XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyBSZWd1bGFyIHlvdXR1YmUgbGlua1xyXG5cdFx0XHRcdFx0XHRtb3ZpZV9pZCA9IGdldFBhcmFtKCd2JyxwcF9pbWFnZXNbc2V0X3Bvc2l0aW9uXSk7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyB5b3V0dS5iZSBsaW5rXHJcblx0XHRcdFx0XHRcdGlmKG1vdmllX2lkID09IFwiXCIpe1xyXG5cdFx0XHRcdFx0XHRcdG1vdmllX2lkID0gcHBfaW1hZ2VzW3NldF9wb3NpdGlvbl0uc3BsaXQoJ3lvdXR1LmJlLycpO1xyXG5cdFx0XHRcdFx0XHRcdG1vdmllX2lkID0gbW92aWVfaWRbMV07XHJcblx0XHRcdFx0XHRcdFx0aWYobW92aWVfaWQuaW5kZXhPZignPycpID4gMClcclxuXHRcdFx0XHRcdFx0XHRcdG1vdmllX2lkID0gbW92aWVfaWQuc3Vic3RyKDAsbW92aWVfaWQuaW5kZXhPZignPycpKTsgLy8gU3RyaXAgYW55dGhpbmcgYWZ0ZXIgdGhlID9cclxuXHJcblx0XHRcdFx0XHRcdFx0aWYobW92aWVfaWQuaW5kZXhPZignJicpID4gMClcclxuXHRcdFx0XHRcdFx0XHRcdG1vdmllX2lkID0gbW92aWVfaWQuc3Vic3RyKDAsbW92aWVfaWQuaW5kZXhPZignJicpKTsgLy8gU3RyaXAgYW55dGhpbmcgYWZ0ZXIgdGhlICZcclxuXHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0bW92aWUgPSAnaHR0cDovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC8nK21vdmllX2lkO1xyXG5cdFx0XHRcdFx0XHQoZ2V0UGFyYW0oJ3JlbCcscHBfaW1hZ2VzW3NldF9wb3NpdGlvbl0pKSA/IG1vdmllKz1cIj9yZWw9XCIrZ2V0UGFyYW0oJ3JlbCcscHBfaW1hZ2VzW3NldF9wb3NpdGlvbl0pIDogbW92aWUrPVwiP3JlbD0xXCI7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGlmKHNldHRpbmdzLmF1dG9wbGF5KSBtb3ZpZSArPSBcIiZhdXRvcGxheT0xXCI7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0dG9JbmplY3QgPSBzZXR0aW5ncy5pZnJhbWVfbWFya3VwLnJlcGxhY2UoL3t3aWR0aH0vZyxwcF9kaW1lbnNpb25zWyd3aWR0aCddKS5yZXBsYWNlKC97aGVpZ2h0fS9nLHBwX2RpbWVuc2lvbnNbJ2hlaWdodCddKS5yZXBsYWNlKC97d21vZGV9L2csc2V0dGluZ3Mud21vZGUpLnJlcGxhY2UoL3twYXRofS9nLG1vdmllKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdFx0Y2FzZSAndmltZW8nOlxyXG5cdFx0XHRcdFx0XHRwcF9kaW1lbnNpb25zID0gX2ZpdFRvVmlld3BvcnQobW92aWVfd2lkdGgsbW92aWVfaGVpZ2h0KTsgLy8gRml0IGl0ZW0gdG8gdmlld3BvcnRcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRtb3ZpZV9pZCA9IHBwX2ltYWdlc1tzZXRfcG9zaXRpb25dO1xyXG5cdFx0XHRcdFx0XHR2YXIgcmVnRXhwID0gL2h0dHAocz8pOlxcL1xcLyh3d3dcXC4pP3ZpbWVvLmNvbVxcLyhcXGQrKS87XHJcblx0XHRcdFx0XHRcdHZhciBtYXRjaCA9IG1vdmllX2lkLm1hdGNoKHJlZ0V4cCk7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRtb3ZpZSA9ICdodHRwOi8vcGxheWVyLnZpbWVvLmNvbS92aWRlby8nKyBtYXRjaFszXSArJz90aXRsZT0wJmFtcDtieWxpbmU9MCZhbXA7cG9ydHJhaXQ9MCc7XHJcblx0XHRcdFx0XHRcdGlmKHNldHRpbmdzLmF1dG9wbGF5KSBtb3ZpZSArPSBcIiZhdXRvcGxheT0xO1wiO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHR2aW1lb193aWR0aCA9IHBwX2RpbWVuc2lvbnNbJ3dpZHRoJ10gKyAnL2VtYmVkLz9tb29nX3dpZHRoPScrIHBwX2RpbWVuc2lvbnNbJ3dpZHRoJ107XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdHRvSW5qZWN0ID0gc2V0dGluZ3MuaWZyYW1lX21hcmt1cC5yZXBsYWNlKC97d2lkdGh9L2csdmltZW9fd2lkdGgpLnJlcGxhY2UoL3toZWlnaHR9L2cscHBfZGltZW5zaW9uc1snaGVpZ2h0J10pLnJlcGxhY2UoL3twYXRofS9nLG1vdmllKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdFx0Y2FzZSAncXVpY2t0aW1lJzpcclxuXHRcdFx0XHRcdFx0cHBfZGltZW5zaW9ucyA9IF9maXRUb1ZpZXdwb3J0KG1vdmllX3dpZHRoLG1vdmllX2hlaWdodCk7IC8vIEZpdCBpdGVtIHRvIHZpZXdwb3J0XHJcblx0XHRcdFx0XHRcdHBwX2RpbWVuc2lvbnNbJ2hlaWdodCddKz0xNTsgcHBfZGltZW5zaW9uc1snY29udGVudEhlaWdodCddKz0xNTsgcHBfZGltZW5zaW9uc1snY29udGFpbmVySGVpZ2h0J10rPTE1OyAvLyBBZGQgc3BhY2UgZm9yIHRoZSBjb250cm9sIGJhclxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHR0b0luamVjdCA9IHNldHRpbmdzLnF1aWNrdGltZV9tYXJrdXAucmVwbGFjZSgve3dpZHRofS9nLHBwX2RpbWVuc2lvbnNbJ3dpZHRoJ10pLnJlcGxhY2UoL3toZWlnaHR9L2cscHBfZGltZW5zaW9uc1snaGVpZ2h0J10pLnJlcGxhY2UoL3t3bW9kZX0vZyxzZXR0aW5ncy53bW9kZSkucmVwbGFjZSgve3BhdGh9L2cscHBfaW1hZ2VzW3NldF9wb3NpdGlvbl0pLnJlcGxhY2UoL3thdXRvcGxheX0vZyxzZXR0aW5ncy5hdXRvcGxheSk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRcdGNhc2UgJ2ZsYXNoJzpcclxuXHRcdFx0XHRcdFx0cHBfZGltZW5zaW9ucyA9IF9maXRUb1ZpZXdwb3J0KG1vdmllX3dpZHRoLG1vdmllX2hlaWdodCk7IC8vIEZpdCBpdGVtIHRvIHZpZXdwb3J0XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Zmxhc2hfdmFycyA9IHBwX2ltYWdlc1tzZXRfcG9zaXRpb25dO1xyXG5cdFx0XHRcdFx0XHRmbGFzaF92YXJzID0gZmxhc2hfdmFycy5zdWJzdHJpbmcocHBfaW1hZ2VzW3NldF9wb3NpdGlvbl0uaW5kZXhPZignZmxhc2h2YXJzJykgKyAxMCxwcF9pbWFnZXNbc2V0X3Bvc2l0aW9uXS5sZW5ndGgpO1xyXG5cclxuXHRcdFx0XHRcdFx0ZmlsZW5hbWUgPSBwcF9pbWFnZXNbc2V0X3Bvc2l0aW9uXTtcclxuXHRcdFx0XHRcdFx0ZmlsZW5hbWUgPSBmaWxlbmFtZS5zdWJzdHJpbmcoMCxmaWxlbmFtZS5pbmRleE9mKCc/JykpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdHRvSW5qZWN0ID0gIHNldHRpbmdzLmZsYXNoX21hcmt1cC5yZXBsYWNlKC97d2lkdGh9L2cscHBfZGltZW5zaW9uc1snd2lkdGgnXSkucmVwbGFjZSgve2hlaWdodH0vZyxwcF9kaW1lbnNpb25zWydoZWlnaHQnXSkucmVwbGFjZSgve3dtb2RlfS9nLHNldHRpbmdzLndtb2RlKS5yZXBsYWNlKC97cGF0aH0vZyxmaWxlbmFtZSsnPycrZmxhc2hfdmFycyk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRcdGNhc2UgJ2lmcmFtZSc6XHJcblx0XHRcdFx0XHRcdHBwX2RpbWVuc2lvbnMgPSBfZml0VG9WaWV3cG9ydChtb3ZpZV93aWR0aCxtb3ZpZV9oZWlnaHQpOyAvLyBGaXQgaXRlbSB0byB2aWV3cG9ydFxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRmcmFtZV91cmwgPSBwcF9pbWFnZXNbc2V0X3Bvc2l0aW9uXTtcclxuXHRcdFx0XHRcdFx0ZnJhbWVfdXJsID0gZnJhbWVfdXJsLnN1YnN0cigwLGZyYW1lX3VybC5pbmRleE9mKCdpZnJhbWUnKS0xKTtcclxuXHJcblx0XHRcdFx0XHRcdHRvSW5qZWN0ID0gc2V0dGluZ3MuaWZyYW1lX21hcmt1cC5yZXBsYWNlKC97d2lkdGh9L2cscHBfZGltZW5zaW9uc1snd2lkdGgnXSkucmVwbGFjZSgve2hlaWdodH0vZyxwcF9kaW1lbnNpb25zWydoZWlnaHQnXSkucmVwbGFjZSgve3BhdGh9L2csZnJhbWVfdXJsKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRjYXNlICdhamF4JzpcclxuXHRcdFx0XHRcdFx0ZG9yZXNpemUgPSBmYWxzZTsgLy8gTWFrZSBzdXJlIHRoZSBkaW1lbnNpb25zIGFyZSBub3QgcmVzaXplZC5cclxuXHRcdFx0XHRcdFx0cHBfZGltZW5zaW9ucyA9IF9maXRUb1ZpZXdwb3J0KG1vdmllX3dpZHRoLG1vdmllX2hlaWdodCk7XHJcblx0XHRcdFx0XHRcdGRvcmVzaXplID0gdHJ1ZTsgLy8gUmVzZXQgdGhlIGRpbWVuc2lvbnNcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRza2lwSW5qZWN0aW9uID0gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0JC5nZXQocHBfaW1hZ2VzW3NldF9wb3NpdGlvbl0sZnVuY3Rpb24ocmVzcG9uc2VIVE1MKXtcclxuXHRcdFx0XHRcdFx0XHR0b0luamVjdCA9IHNldHRpbmdzLmlubGluZV9tYXJrdXAucmVwbGFjZSgve2NvbnRlbnR9L2cscmVzcG9uc2VIVE1MKTtcclxuXHRcdFx0XHRcdFx0XHQkcHBfcGljX2hvbGRlci5maW5kKCcjcHBfZnVsbF9yZXMnKVswXS5pbm5lckhUTUwgPSB0b0luamVjdDtcclxuXHRcdFx0XHRcdFx0XHRfc2hvd0NvbnRlbnQoKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGNhc2UgJ2N1c3RvbSc6XHJcblx0XHRcdFx0XHRcdHBwX2RpbWVuc2lvbnMgPSBfZml0VG9WaWV3cG9ydChtb3ZpZV93aWR0aCxtb3ZpZV9oZWlnaHQpOyAvLyBGaXQgaXRlbSB0byB2aWV3cG9ydFxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdHRvSW5qZWN0ID0gc2V0dGluZ3MuY3VzdG9tX21hcmt1cDtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdFx0Y2FzZSAnaW5saW5lJzpcclxuXHRcdFx0XHRcdFx0Ly8gdG8gZ2V0IHRoZSBpdGVtIGhlaWdodCBjbG9uZSBpdCwgYXBwbHkgZGVmYXVsdCB3aWR0aCwgd3JhcCBpdCBpbiB0aGUgcHJldHR5UGhvdG8gY29udGFpbmVycyAsIHRoZW4gZGVsZXRlXHJcblx0XHRcdFx0XHRcdG15Q2xvbmUgPSAkKHBwX2ltYWdlc1tzZXRfcG9zaXRpb25dKS5jbG9uZSgpLmFwcGVuZCgnPGJyIGNsZWFyPVwiYWxsXCIgLz4nKS5jc3Moeyd3aWR0aCc6c2V0dGluZ3MuZGVmYXVsdF93aWR0aH0pLndyYXBJbm5lcignPGRpdiBpZD1cInBwX2Z1bGxfcmVzXCI+PGRpdiBjbGFzcz1cInBwX2lubGluZVwiPjwvZGl2PjwvZGl2PicpLmFwcGVuZFRvKCQoJ2JvZHknKSkuc2hvdygpO1xyXG5cdFx0XHRcdFx0XHRkb3Jlc2l6ZSA9IGZhbHNlOyAvLyBNYWtlIHN1cmUgdGhlIGRpbWVuc2lvbnMgYXJlIG5vdCByZXNpemVkLlxyXG5cdFx0XHRcdFx0XHRwcF9kaW1lbnNpb25zID0gX2ZpdFRvVmlld3BvcnQoJChteUNsb25lKS53aWR0aCgpLCQobXlDbG9uZSkuaGVpZ2h0KCkpO1xyXG5cdFx0XHRcdFx0XHRkb3Jlc2l6ZSA9IHRydWU7IC8vIFJlc2V0IHRoZSBkaW1lbnNpb25zXHJcblx0XHRcdFx0XHRcdCQobXlDbG9uZSkucmVtb3ZlKCk7XHJcblx0XHRcdFx0XHRcdHRvSW5qZWN0ID0gc2V0dGluZ3MuaW5saW5lX21hcmt1cC5yZXBsYWNlKC97Y29udGVudH0vZywkKHBwX2ltYWdlc1tzZXRfcG9zaXRpb25dKS5odG1sKCkpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0aWYoIWltZ1ByZWxvYWRlciAmJiAhc2tpcEluamVjdGlvbil7XHJcblx0XHRcdFx0XHQkcHBfcGljX2hvbGRlci5maW5kKCcjcHBfZnVsbF9yZXMnKVswXS5pbm5lckhUTUwgPSB0b0luamVjdDtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIFNob3cgY29udGVudFxyXG5cdFx0XHRcdFx0X3Nob3dDb250ZW50KCk7XHJcblx0XHRcdFx0fTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9O1xyXG5cclxuXHRcclxuXHRcdC8qKlxyXG5cdFx0KiBDaGFuZ2UgcGFnZSBpbiB0aGUgcHJldHR5UGhvdG8gbW9kYWwgYm94XHJcblx0XHQqIEBwYXJhbSBkaXJlY3Rpb24ge1N0cmluZ30gRGlyZWN0aW9uIG9mIHRoZSBwYWdpbmcsIHByZXZpb3VzIG9yIG5leHQuXHJcblx0XHQqL1xyXG5cdFx0JC5wcmV0dHlQaG90by5jaGFuZ2VQYWdlID0gZnVuY3Rpb24oZGlyZWN0aW9uKXtcclxuXHRcdFx0Y3VycmVudEdhbGxlcnlQYWdlID0gMDtcclxuXHRcdFx0XHJcblx0XHRcdGlmKGRpcmVjdGlvbiA9PSAncHJldmlvdXMnKSB7XHJcblx0XHRcdFx0c2V0X3Bvc2l0aW9uLS07XHJcblx0XHRcdFx0aWYgKHNldF9wb3NpdGlvbiA8IDApIHNldF9wb3NpdGlvbiA9ICQocHBfaW1hZ2VzKS5zaXplKCktMTtcclxuXHRcdFx0fWVsc2UgaWYoZGlyZWN0aW9uID09ICduZXh0Jyl7XHJcblx0XHRcdFx0c2V0X3Bvc2l0aW9uKys7XHJcblx0XHRcdFx0aWYoc2V0X3Bvc2l0aW9uID4gJChwcF9pbWFnZXMpLnNpemUoKS0xKSBzZXRfcG9zaXRpb24gPSAwO1xyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRzZXRfcG9zaXRpb249ZGlyZWN0aW9uO1xyXG5cdFx0XHR9O1xyXG5cdFx0XHRcclxuXHRcdFx0cmVsX2luZGV4ID0gc2V0X3Bvc2l0aW9uO1xyXG5cclxuXHRcdFx0aWYoIWRvcmVzaXplKSBkb3Jlc2l6ZSA9IHRydWU7IC8vIEFsbG93IHRoZSByZXNpemluZyBvZiB0aGUgaW1hZ2VzXHJcblx0XHRcdGlmKHNldHRpbmdzLmFsbG93X2V4cGFuZCkge1xyXG5cdFx0XHRcdCQoJy5wcF9jb250cmFjdCcpLnJlbW92ZUNsYXNzKCdwcF9jb250cmFjdCcpLmFkZENsYXNzKCdwcF9leHBhbmQnKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0X2hpZGVDb250ZW50KGZ1bmN0aW9uKCl7ICQucHJldHR5UGhvdG8ub3BlbigpOyB9KTtcclxuXHRcdH07XHJcblxyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBDaGFuZ2UgZ2FsbGVyeSBwYWdlIGluIHRoZSBwcmV0dHlQaG90byBtb2RhbCBib3hcclxuXHRcdCogQHBhcmFtIGRpcmVjdGlvbiB7U3RyaW5nfSBEaXJlY3Rpb24gb2YgdGhlIHBhZ2luZywgcHJldmlvdXMgb3IgbmV4dC5cclxuXHRcdCovXHJcblx0XHQkLnByZXR0eVBob3RvLmNoYW5nZUdhbGxlcnlQYWdlID0gZnVuY3Rpb24oZGlyZWN0aW9uKXtcclxuXHRcdFx0aWYoZGlyZWN0aW9uPT0nbmV4dCcpe1xyXG5cdFx0XHRcdGN1cnJlbnRHYWxsZXJ5UGFnZSArKztcclxuXHJcblx0XHRcdFx0aWYoY3VycmVudEdhbGxlcnlQYWdlID4gdG90YWxQYWdlKSBjdXJyZW50R2FsbGVyeVBhZ2UgPSAwO1xyXG5cdFx0XHR9ZWxzZSBpZihkaXJlY3Rpb249PSdwcmV2aW91cycpe1xyXG5cdFx0XHRcdGN1cnJlbnRHYWxsZXJ5UGFnZSAtLTtcclxuXHJcblx0XHRcdFx0aWYoY3VycmVudEdhbGxlcnlQYWdlIDwgMCkgY3VycmVudEdhbGxlcnlQYWdlID0gdG90YWxQYWdlO1xyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRjdXJyZW50R2FsbGVyeVBhZ2UgPSBkaXJlY3Rpb247XHJcblx0XHRcdH07XHJcblx0XHRcdFxyXG5cdFx0XHRzbGlkZV9zcGVlZCA9IChkaXJlY3Rpb24gPT0gJ25leHQnIHx8IGRpcmVjdGlvbiA9PSAncHJldmlvdXMnKSA/IHNldHRpbmdzLmFuaW1hdGlvbl9zcGVlZCA6IDA7XHJcblxyXG5cdFx0XHRzbGlkZV90byA9IGN1cnJlbnRHYWxsZXJ5UGFnZSAqIChpdGVtc1BlclBhZ2UgKiBpdGVtV2lkdGgpO1xyXG5cclxuXHRcdFx0JHBwX2dhbGxlcnkuZmluZCgndWwnKS5hbmltYXRlKHtsZWZ0Oi1zbGlkZV90b30sc2xpZGVfc3BlZWQpO1xyXG5cdFx0fTtcclxuXHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIFN0YXJ0IHRoZSBzbGlkZXNob3cuLi5cclxuXHRcdCovXHJcblx0XHQkLnByZXR0eVBob3RvLnN0YXJ0U2xpZGVzaG93ID0gZnVuY3Rpb24oKXtcclxuXHRcdFx0aWYodHlwZW9mIHBwX3NsaWRlc2hvdyA9PSAndW5kZWZpbmVkJyl7XHJcblx0XHRcdFx0JHBwX3BpY19ob2xkZXIuZmluZCgnLnBwX3BsYXknKS51bmJpbmQoJ2NsaWNrJykucmVtb3ZlQ2xhc3MoJ3BwX3BsYXknKS5hZGRDbGFzcygncHBfcGF1c2UnKS5jbGljayhmdW5jdGlvbigpe1xyXG5cdFx0XHRcdFx0JC5wcmV0dHlQaG90by5zdG9wU2xpZGVzaG93KCk7XHJcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0cHBfc2xpZGVzaG93ID0gc2V0SW50ZXJ2YWwoJC5wcmV0dHlQaG90by5zdGFydFNsaWRlc2hvdyxzZXR0aW5ncy5zbGlkZXNob3cpO1xyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHQkLnByZXR0eVBob3RvLmNoYW5nZVBhZ2UoJ25leHQnKTtcdFxyXG5cdFx0XHR9O1xyXG5cdFx0fVxyXG5cclxuXHJcblx0XHQvKipcclxuXHRcdCogU3RvcCB0aGUgc2xpZGVzaG93Li4uXHJcblx0XHQqL1xyXG5cdFx0JC5wcmV0dHlQaG90by5zdG9wU2xpZGVzaG93ID0gZnVuY3Rpb24oKXtcclxuXHRcdFx0JHBwX3BpY19ob2xkZXIuZmluZCgnLnBwX3BhdXNlJykudW5iaW5kKCdjbGljaycpLnJlbW92ZUNsYXNzKCdwcF9wYXVzZScpLmFkZENsYXNzKCdwcF9wbGF5JykuY2xpY2soZnVuY3Rpb24oKXtcclxuXHRcdFx0XHQkLnByZXR0eVBob3RvLnN0YXJ0U2xpZGVzaG93KCk7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0Y2xlYXJJbnRlcnZhbChwcF9zbGlkZXNob3cpO1xyXG5cdFx0XHRwcF9zbGlkZXNob3c9dW5kZWZpbmVkO1xyXG5cdFx0fVxyXG5cclxuXHJcblx0XHQvKipcclxuXHRcdCogQ2xvc2VzIHByZXR0eVBob3RvLlxyXG5cdFx0Ki9cclxuXHRcdCQucHJldHR5UGhvdG8uY2xvc2UgPSBmdW5jdGlvbigpe1xyXG5cdFx0XHRpZigkcHBfb3ZlcmxheS5pcyhcIjphbmltYXRlZFwiKSkgcmV0dXJuO1xyXG5cdFx0XHRcclxuXHRcdFx0JC5wcmV0dHlQaG90by5zdG9wU2xpZGVzaG93KCk7XHJcblx0XHRcdFxyXG5cdFx0XHQkcHBfcGljX2hvbGRlci5zdG9wKCkuZmluZCgnb2JqZWN0LGVtYmVkJykuY3NzKCd2aXNpYmlsaXR5JywnaGlkZGVuJyk7XHJcblx0XHRcdFxyXG5cdFx0XHQkKCdkaXYucHBfcGljX2hvbGRlcixkaXYucHB0LC5wcF9mYWRlJykuZmFkZU91dChzZXR0aW5ncy5hbmltYXRpb25fc3BlZWQsZnVuY3Rpb24oKXsgJCh0aGlzKS5yZW1vdmUoKTsgfSk7XHJcblx0XHRcdFxyXG5cdFx0XHQkcHBfb3ZlcmxheS5mYWRlT3V0KHNldHRpbmdzLmFuaW1hdGlvbl9zcGVlZCwgZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZihzZXR0aW5ncy5oaWRlZmxhc2gpICQoJ29iamVjdCxlbWJlZCxpZnJhbWVbc3JjKj15b3V0dWJlXSxpZnJhbWVbc3JjKj12aW1lb10nKS5jc3MoJ3Zpc2liaWxpdHknLCd2aXNpYmxlJyk7IC8vIFNob3cgdGhlIGZsYXNoXHJcblx0XHRcdFx0XHJcblx0XHRcdFx0JCh0aGlzKS5yZW1vdmUoKTsgLy8gTm8gbW9yZSBuZWVkIGZvciB0aGUgcHJldHR5UGhvdG8gbWFya3VwXHJcblx0XHRcdFx0XHJcblx0XHRcdFx0JCh3aW5kb3cpLnVuYmluZCgnc2Nyb2xsLnByZXR0eXBob3RvJyk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Y2xlYXJIYXNodGFnKCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0c2V0dGluZ3MuY2FsbGJhY2soKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRkb3Jlc2l6ZSA9IHRydWU7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0cHBfb3BlbiA9IGZhbHNlO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGRlbGV0ZSBzZXR0aW5ncztcclxuXHRcdFx0fSk7XHJcblx0XHR9O1xyXG5cdFxyXG5cdFx0LyoqXHJcblx0XHQqIFNldCB0aGUgcHJvcGVyIHNpemVzIG9uIHRoZSBjb250YWluZXJzIGFuZCBhbmltYXRlIHRoZSBjb250ZW50IGluLlxyXG5cdFx0Ki9cclxuXHRcdGZ1bmN0aW9uIF9zaG93Q29udGVudCgpe1xyXG5cdFx0XHQkKCcucHBfbG9hZGVySWNvbicpLmhpZGUoKTtcclxuXHJcblx0XHRcdC8vIENhbGN1bGF0ZSB0aGUgb3BlbmVkIHRvcCBwb3NpdGlvbiBvZiB0aGUgcGljIGhvbGRlclxyXG5cdFx0XHRwcm9qZWN0ZWRUb3AgPSBzY3JvbGxfcG9zWydzY3JvbGxUb3AnXSArICgod2luZG93SGVpZ2h0LzIpIC0gKHBwX2RpbWVuc2lvbnNbJ2NvbnRhaW5lckhlaWdodCddLzIpKTtcclxuXHRcdFx0aWYocHJvamVjdGVkVG9wIDwgMCkgcHJvamVjdGVkVG9wID0gMDtcclxuXHJcblx0XHRcdCRwcHQuZmFkZVRvKHNldHRpbmdzLmFuaW1hdGlvbl9zcGVlZCwxKTtcclxuXHJcblx0XHRcdC8vIFJlc2l6ZSB0aGUgY29udGVudCBob2xkZXJcclxuXHRcdFx0JHBwX3BpY19ob2xkZXIuZmluZCgnLnBwX2NvbnRlbnQnKVxyXG5cdFx0XHRcdC5hbmltYXRlKHtcclxuXHRcdFx0XHRcdGhlaWdodDpwcF9kaW1lbnNpb25zWydjb250ZW50SGVpZ2h0J10sXHJcblx0XHRcdFx0XHR3aWR0aDpwcF9kaW1lbnNpb25zWydjb250ZW50V2lkdGgnXVxyXG5cdFx0XHRcdH0sc2V0dGluZ3MuYW5pbWF0aW9uX3NwZWVkKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFJlc2l6ZSBwaWN0dXJlIHRoZSBob2xkZXJcclxuXHRcdFx0JHBwX3BpY19ob2xkZXIuYW5pbWF0ZSh7XHJcblx0XHRcdFx0J3RvcCc6IHByb2plY3RlZFRvcCxcclxuXHRcdFx0XHQnbGVmdCc6ICgod2luZG93V2lkdGgvMikgLSAocHBfZGltZW5zaW9uc1snY29udGFpbmVyV2lkdGgnXS8yKSA8IDApID8gMCA6ICh3aW5kb3dXaWR0aC8yKSAtIChwcF9kaW1lbnNpb25zWydjb250YWluZXJXaWR0aCddLzIpLFxyXG5cdFx0XHRcdHdpZHRoOnBwX2RpbWVuc2lvbnNbJ2NvbnRhaW5lcldpZHRoJ11cclxuXHRcdFx0fSxzZXR0aW5ncy5hbmltYXRpb25fc3BlZWQsZnVuY3Rpb24oKXtcclxuXHRcdFx0XHQkcHBfcGljX2hvbGRlci5maW5kKCcucHBfaG92ZXJDb250YWluZXIsI2Z1bGxSZXNJbWFnZScpLmhlaWdodChwcF9kaW1lbnNpb25zWydoZWlnaHQnXSkud2lkdGgocHBfZGltZW5zaW9uc1snd2lkdGgnXSk7XHJcblxyXG5cdFx0XHRcdCRwcF9waWNfaG9sZGVyLmZpbmQoJy5wcF9mYWRlJykuZmFkZUluKHNldHRpbmdzLmFuaW1hdGlvbl9zcGVlZCk7IC8vIEZhZGUgdGhlIG5ldyBjb250ZW50XHJcblxyXG5cdFx0XHRcdC8vIFNob3cgdGhlIG5hdlxyXG5cdFx0XHRcdGlmKGlzU2V0ICYmIF9nZXRGaWxlVHlwZShwcF9pbWFnZXNbc2V0X3Bvc2l0aW9uXSk9PVwiaW1hZ2VcIikgeyAkcHBfcGljX2hvbGRlci5maW5kKCcucHBfaG92ZXJDb250YWluZXInKS5zaG93KCk7IH1lbHNleyAkcHBfcGljX2hvbGRlci5maW5kKCcucHBfaG92ZXJDb250YWluZXInKS5oaWRlKCk7IH1cclxuXHRcdFx0XHJcblx0XHRcdFx0aWYoc2V0dGluZ3MuYWxsb3dfZXhwYW5kKSB7XHJcblx0XHRcdFx0XHRpZihwcF9kaW1lbnNpb25zWydyZXNpemVkJ10peyAvLyBGYWRlIHRoZSByZXNpemluZyBsaW5rIGlmIHRoZSBpbWFnZSBpcyByZXNpemVkXHJcblx0XHRcdFx0XHRcdCQoJ2EucHBfZXhwYW5kLGEucHBfY29udHJhY3QnKS5zaG93KCk7XHJcblx0XHRcdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRcdFx0JCgnYS5wcF9leHBhbmQnKS5oaWRlKCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmKHNldHRpbmdzLmF1dG9wbGF5X3NsaWRlc2hvdyAmJiAhcHBfc2xpZGVzaG93ICYmICFwcF9vcGVuKSAkLnByZXR0eVBob3RvLnN0YXJ0U2xpZGVzaG93KCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0c2V0dGluZ3MuY2hhbmdlcGljdHVyZWNhbGxiYWNrKCk7IC8vIENhbGxiYWNrIVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHBwX29wZW4gPSB0cnVlO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdF9pbnNlcnRfZ2FsbGVyeSgpO1xyXG5cdFx0XHRwcF9zZXR0aW5ncy5hamF4Y2FsbGJhY2soKTtcclxuXHRcdH07XHJcblx0XHRcclxuXHRcdC8qKlxyXG5cdFx0KiBIaWRlIHRoZSBjb250ZW50Li4uRFVIIVxyXG5cdFx0Ki9cclxuXHRcdGZ1bmN0aW9uIF9oaWRlQ29udGVudChjYWxsYmFjayl7XHJcblx0XHRcdC8vIEZhZGUgb3V0IHRoZSBjdXJyZW50IHBpY3R1cmVcclxuXHRcdFx0JHBwX3BpY19ob2xkZXIuZmluZCgnI3BwX2Z1bGxfcmVzIG9iamVjdCwjcHBfZnVsbF9yZXMgZW1iZWQnKS5jc3MoJ3Zpc2liaWxpdHknLCdoaWRkZW4nKTtcclxuXHRcdFx0JHBwX3BpY19ob2xkZXIuZmluZCgnLnBwX2ZhZGUnKS5mYWRlT3V0KHNldHRpbmdzLmFuaW1hdGlvbl9zcGVlZCxmdW5jdGlvbigpe1xyXG5cdFx0XHRcdCQoJy5wcF9sb2FkZXJJY29uJykuc2hvdygpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGNhbGxiYWNrKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fTtcclxuXHRcclxuXHRcdC8qKlxyXG5cdFx0KiBDaGVjayB0aGUgaXRlbSBwb3NpdGlvbiBpbiB0aGUgZ2FsbGVyeSBhcnJheSwgaGlkZSBvciBzaG93IHRoZSBuYXZpZ2F0aW9uIGxpbmtzXHJcblx0XHQqIEBwYXJhbSBzZXRDb3VudCB7aW50ZWdlcn0gVGhlIHRvdGFsIG51bWJlciBvZiBpdGVtcyBpbiB0aGUgc2V0XHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gX2NoZWNrUG9zaXRpb24oc2V0Q291bnQpe1xyXG5cdFx0XHQoc2V0Q291bnQgPiAxKSA/ICQoJy5wcF9uYXYnKS5zaG93KCkgOiAkKCcucHBfbmF2JykuaGlkZSgpOyAvLyBIaWRlIHRoZSBib3R0b20gbmF2IGlmIGl0J3Mgbm90IGEgc2V0LlxyXG5cdFx0fTtcclxuXHRcclxuXHRcdC8qKlxyXG5cdFx0KiBSZXNpemUgdGhlIGl0ZW0gZGltZW5zaW9ucyBpZiBpdCdzIGJpZ2dlciB0aGFuIHRoZSB2aWV3cG9ydFxyXG5cdFx0KiBAcGFyYW0gd2lkdGgge2ludGVnZXJ9IFdpZHRoIG9mIHRoZSBpdGVtIHRvIGJlIG9wZW5lZFxyXG5cdFx0KiBAcGFyYW0gaGVpZ2h0IHtpbnRlZ2VyfSBIZWlnaHQgb2YgdGhlIGl0ZW0gdG8gYmUgb3BlbmVkXHJcblx0XHQqIEByZXR1cm4gQW4gYXJyYXkgY29udGFpbmluIHRoZSBcImZpdHRlZFwiIGRpbWVuc2lvbnNcclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiBfZml0VG9WaWV3cG9ydCh3aWR0aCxoZWlnaHQpe1xyXG5cdFx0XHRyZXNpemVkID0gZmFsc2U7XHJcblxyXG5cdFx0XHRfZ2V0RGltZW5zaW9ucyh3aWR0aCxoZWlnaHQpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gRGVmaW5lIHRoZW0gaW4gY2FzZSB0aGVyZSdzIG5vIHJlc2l6ZSBuZWVkZWRcclxuXHRcdFx0aW1hZ2VXaWR0aCA9IHdpZHRoLCBpbWFnZUhlaWdodCA9IGhlaWdodDtcclxuXHJcblx0XHRcdGlmKCAoKHBwX2NvbnRhaW5lcldpZHRoID4gd2luZG93V2lkdGgpIHx8IChwcF9jb250YWluZXJIZWlnaHQgPiB3aW5kb3dIZWlnaHQpKSAmJiBkb3Jlc2l6ZSAmJiBzZXR0aW5ncy5hbGxvd19yZXNpemUgJiYgIXBlcmNlbnRCYXNlZCkge1xyXG5cdFx0XHRcdHJlc2l6ZWQgPSB0cnVlLCBmaXR0aW5nID0gZmFsc2U7XHJcblx0XHRcdFxyXG5cdFx0XHRcdHdoaWxlICghZml0dGluZyl7XHJcblx0XHRcdFx0XHRpZigocHBfY29udGFpbmVyV2lkdGggPiB3aW5kb3dXaWR0aCkpe1xyXG5cdFx0XHRcdFx0XHRpbWFnZVdpZHRoID0gKHdpbmRvd1dpZHRoIC0gMjAwKTtcclxuXHRcdFx0XHRcdFx0aW1hZ2VIZWlnaHQgPSAoaGVpZ2h0L3dpZHRoKSAqIGltYWdlV2lkdGg7XHJcblx0XHRcdFx0XHR9ZWxzZSBpZigocHBfY29udGFpbmVySGVpZ2h0ID4gd2luZG93SGVpZ2h0KSl7XHJcblx0XHRcdFx0XHRcdGltYWdlSGVpZ2h0ID0gKHdpbmRvd0hlaWdodCAtIDIwMCk7XHJcblx0XHRcdFx0XHRcdGltYWdlV2lkdGggPSAod2lkdGgvaGVpZ2h0KSAqIGltYWdlSGVpZ2h0O1xyXG5cdFx0XHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0XHRcdGZpdHRpbmcgPSB0cnVlO1xyXG5cdFx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0XHRwcF9jb250YWluZXJIZWlnaHQgPSBpbWFnZUhlaWdodCwgcHBfY29udGFpbmVyV2lkdGggPSBpbWFnZVdpZHRoO1xyXG5cdFx0XHRcdH07XHJcblx0XHRcdFxyXG5cclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZigocHBfY29udGFpbmVyV2lkdGggPiB3aW5kb3dXaWR0aCkgfHwgKHBwX2NvbnRhaW5lckhlaWdodCA+IHdpbmRvd0hlaWdodCkpe1xyXG5cdFx0XHRcdFx0X2ZpdFRvVmlld3BvcnQocHBfY29udGFpbmVyV2lkdGgscHBfY29udGFpbmVySGVpZ2h0KVxyXG5cdFx0XHRcdH07XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0X2dldERpbWVuc2lvbnMoaW1hZ2VXaWR0aCxpbWFnZUhlaWdodCk7XHJcblx0XHRcdH07XHJcblx0XHRcdFxyXG5cdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdHdpZHRoOk1hdGguZmxvb3IoaW1hZ2VXaWR0aCksXHJcblx0XHRcdFx0aGVpZ2h0Ok1hdGguZmxvb3IoaW1hZ2VIZWlnaHQpLFxyXG5cdFx0XHRcdGNvbnRhaW5lckhlaWdodDpNYXRoLmZsb29yKHBwX2NvbnRhaW5lckhlaWdodCksXHJcblx0XHRcdFx0Y29udGFpbmVyV2lkdGg6TWF0aC5mbG9vcihwcF9jb250YWluZXJXaWR0aCkgKyAoc2V0dGluZ3MuaG9yaXpvbnRhbF9wYWRkaW5nICogMiksXHJcblx0XHRcdFx0Y29udGVudEhlaWdodDpNYXRoLmZsb29yKHBwX2NvbnRlbnRIZWlnaHQpLFxyXG5cdFx0XHRcdGNvbnRlbnRXaWR0aDpNYXRoLmZsb29yKHBwX2NvbnRlbnRXaWR0aCksXHJcblx0XHRcdFx0cmVzaXplZDpyZXNpemVkXHJcblx0XHRcdH07XHJcblx0XHR9O1xyXG5cdFx0XHJcblx0XHQvKipcclxuXHRcdCogR2V0IHRoZSBjb250YWluZXJzIGRpbWVuc2lvbnMgYWNjb3JkaW5nIHRvIHRoZSBpdGVtIHNpemVcclxuXHRcdCogQHBhcmFtIHdpZHRoIHtpbnRlZ2VyfSBXaWR0aCBvZiB0aGUgaXRlbSB0byBiZSBvcGVuZWRcclxuXHRcdCogQHBhcmFtIGhlaWdodCB7aW50ZWdlcn0gSGVpZ2h0IG9mIHRoZSBpdGVtIHRvIGJlIG9wZW5lZFxyXG5cdFx0Ki9cclxuXHRcdGZ1bmN0aW9uIF9nZXREaW1lbnNpb25zKHdpZHRoLGhlaWdodCl7XHJcblx0XHRcdHdpZHRoID0gcGFyc2VGbG9hdCh3aWR0aCk7XHJcblx0XHRcdGhlaWdodCA9IHBhcnNlRmxvYXQoaGVpZ2h0KTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIEdldCB0aGUgZGV0YWlscyBoZWlnaHQsIHRvIGRvIHNvLCBJIG5lZWQgdG8gY2xvbmUgaXQgc2luY2UgaXQncyBpbnZpc2libGVcclxuXHRcdFx0JHBwX2RldGFpbHMgPSAkcHBfcGljX2hvbGRlci5maW5kKCcucHBfZGV0YWlscycpO1xyXG5cdFx0XHQkcHBfZGV0YWlscy53aWR0aCh3aWR0aCk7XHJcblx0XHRcdGRldGFpbHNIZWlnaHQgPSBwYXJzZUZsb2F0KCRwcF9kZXRhaWxzLmNzcygnbWFyZ2luVG9wJykpICsgcGFyc2VGbG9hdCgkcHBfZGV0YWlscy5jc3MoJ21hcmdpbkJvdHRvbScpKTtcclxuXHRcdFx0XHJcblx0XHRcdCRwcF9kZXRhaWxzID0gJHBwX2RldGFpbHMuY2xvbmUoKS5hZGRDbGFzcyhzZXR0aW5ncy50aGVtZSkud2lkdGgod2lkdGgpLmFwcGVuZFRvKCQoJ2JvZHknKSkuY3NzKHtcclxuXHRcdFx0XHQncG9zaXRpb24nOidhYnNvbHV0ZScsXHJcblx0XHRcdFx0J3RvcCc6LTEwMDAwXHJcblx0XHRcdH0pO1xyXG5cdFx0XHRkZXRhaWxzSGVpZ2h0ICs9ICRwcF9kZXRhaWxzLmhlaWdodCgpO1xyXG5cdFx0XHRkZXRhaWxzSGVpZ2h0ID0gKGRldGFpbHNIZWlnaHQgPD0gMzQpID8gMzYgOiBkZXRhaWxzSGVpZ2h0OyAvLyBNaW4taGVpZ2h0IGZvciB0aGUgZGV0YWlsc1xyXG5cdFx0XHQkcHBfZGV0YWlscy5yZW1vdmUoKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIEdldCB0aGUgdGl0bGVzIGhlaWdodCwgdG8gZG8gc28sIEkgbmVlZCB0byBjbG9uZSBpdCBzaW5jZSBpdCdzIGludmlzaWJsZVxyXG5cdFx0XHQkcHBfdGl0bGUgPSAkcHBfcGljX2hvbGRlci5maW5kKCcucHB0Jyk7XHJcblx0XHRcdCRwcF90aXRsZS53aWR0aCh3aWR0aCk7XHJcblx0XHRcdHRpdGxlSGVpZ2h0ID0gcGFyc2VGbG9hdCgkcHBfdGl0bGUuY3NzKCdtYXJnaW5Ub3AnKSkgKyBwYXJzZUZsb2F0KCRwcF90aXRsZS5jc3MoJ21hcmdpbkJvdHRvbScpKTtcclxuXHRcdFx0JHBwX3RpdGxlID0gJHBwX3RpdGxlLmNsb25lKCkuYXBwZW5kVG8oJCgnYm9keScpKS5jc3Moe1xyXG5cdFx0XHRcdCdwb3NpdGlvbic6J2Fic29sdXRlJyxcclxuXHRcdFx0XHQndG9wJzotMTAwMDBcclxuXHRcdFx0fSk7XHJcblx0XHRcdHRpdGxlSGVpZ2h0ICs9ICRwcF90aXRsZS5oZWlnaHQoKTtcclxuXHRcdFx0JHBwX3RpdGxlLnJlbW92ZSgpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gR2V0IHRoZSBjb250YWluZXIgc2l6ZSwgdG8gcmVzaXplIHRoZSBob2xkZXIgdG8gdGhlIHJpZ2h0IGRpbWVuc2lvbnNcclxuXHRcdFx0cHBfY29udGVudEhlaWdodCA9IGhlaWdodCArIGRldGFpbHNIZWlnaHQ7XHJcblx0XHRcdHBwX2NvbnRlbnRXaWR0aCA9IHdpZHRoO1xyXG5cdFx0XHRwcF9jb250YWluZXJIZWlnaHQgPSBwcF9jb250ZW50SGVpZ2h0ICsgdGl0bGVIZWlnaHQgKyAkcHBfcGljX2hvbGRlci5maW5kKCcucHBfdG9wJykuaGVpZ2h0KCkgKyAkcHBfcGljX2hvbGRlci5maW5kKCcucHBfYm90dG9tJykuaGVpZ2h0KCk7XHJcblx0XHRcdHBwX2NvbnRhaW5lcldpZHRoID0gd2lkdGg7XHJcblx0XHR9XHJcblx0XHJcblx0XHRmdW5jdGlvbiBfZ2V0RmlsZVR5cGUoaXRlbVNyYyl7XHJcblx0XHRcdGlmIChpdGVtU3JjLm1hdGNoKC95b3V0dWJlXFwuY29tXFwvd2F0Y2gvaSkgfHwgaXRlbVNyYy5tYXRjaCgveW91dHVcXC5iZS9pKSkge1xyXG5cdFx0XHRcdHJldHVybiAneW91dHViZSc7XHJcblx0XHRcdH1lbHNlIGlmIChpdGVtU3JjLm1hdGNoKC92aW1lb1xcLmNvbS9pKSkge1xyXG5cdFx0XHRcdHJldHVybiAndmltZW8nO1xyXG5cdFx0XHR9ZWxzZSBpZihpdGVtU3JjLm1hdGNoKC9cXGIubW92XFxiL2kpKXsgXHJcblx0XHRcdFx0cmV0dXJuICdxdWlja3RpbWUnO1xyXG5cdFx0XHR9ZWxzZSBpZihpdGVtU3JjLm1hdGNoKC9cXGIuc3dmXFxiL2kpKXtcclxuXHRcdFx0XHRyZXR1cm4gJ2ZsYXNoJztcclxuXHRcdFx0fWVsc2UgaWYoaXRlbVNyYy5tYXRjaCgvXFxiaWZyYW1lPXRydWVcXGIvaSkpe1xyXG5cdFx0XHRcdHJldHVybiAnaWZyYW1lJztcclxuXHRcdFx0fWVsc2UgaWYoaXRlbVNyYy5tYXRjaCgvXFxiYWpheD10cnVlXFxiL2kpKXtcclxuXHRcdFx0XHRyZXR1cm4gJ2FqYXgnO1xyXG5cdFx0XHR9ZWxzZSBpZihpdGVtU3JjLm1hdGNoKC9cXGJjdXN0b209dHJ1ZVxcYi9pKSl7XHJcblx0XHRcdFx0cmV0dXJuICdjdXN0b20nO1xyXG5cdFx0XHR9ZWxzZSBpZihpdGVtU3JjLnN1YnN0cigwLDEpID09ICcjJyl7XHJcblx0XHRcdFx0cmV0dXJuICdpbmxpbmUnO1xyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRyZXR1cm4gJ2ltYWdlJztcclxuXHRcdFx0fTtcclxuXHRcdH07XHJcblx0XHJcblx0XHRmdW5jdGlvbiBfY2VudGVyX292ZXJsYXkoKXtcclxuXHRcdFx0aWYoZG9yZXNpemUgJiYgdHlwZW9mICRwcF9waWNfaG9sZGVyICE9ICd1bmRlZmluZWQnKSB7XHJcblx0XHRcdFx0c2Nyb2xsX3BvcyA9IF9nZXRfc2Nyb2xsKCk7XHJcblx0XHRcdFx0Y29udGVudEhlaWdodCA9ICRwcF9waWNfaG9sZGVyLmhlaWdodCgpLCBjb250ZW50d2lkdGggPSAkcHBfcGljX2hvbGRlci53aWR0aCgpO1xyXG5cclxuXHRcdFx0XHRwcm9qZWN0ZWRUb3AgPSAod2luZG93SGVpZ2h0LzIpICsgc2Nyb2xsX3Bvc1snc2Nyb2xsVG9wJ10gLSAoY29udGVudEhlaWdodC8yKTtcclxuXHRcdFx0XHRpZihwcm9qZWN0ZWRUb3AgPCAwKSBwcm9qZWN0ZWRUb3AgPSAwO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmKGNvbnRlbnRIZWlnaHQgPiB3aW5kb3dIZWlnaHQpXHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblxyXG5cdFx0XHRcdCRwcF9waWNfaG9sZGVyLmNzcyh7XHJcblx0XHRcdFx0XHQndG9wJzogcHJvamVjdGVkVG9wLFxyXG5cdFx0XHRcdFx0J2xlZnQnOiAod2luZG93V2lkdGgvMikgKyBzY3JvbGxfcG9zWydzY3JvbGxMZWZ0J10gLSAoY29udGVudHdpZHRoLzIpXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH07XHJcblx0XHR9O1xyXG5cdFxyXG5cdFx0ZnVuY3Rpb24gX2dldF9zY3JvbGwoKXtcclxuXHRcdFx0aWYgKHNlbGYucGFnZVlPZmZzZXQpIHtcclxuXHRcdFx0XHRyZXR1cm4ge3Njcm9sbFRvcDpzZWxmLnBhZ2VZT2Zmc2V0LHNjcm9sbExlZnQ6c2VsZi5wYWdlWE9mZnNldH07XHJcblx0XHRcdH0gZWxzZSBpZiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3ApIHsgLy8gRXhwbG9yZXIgNiBTdHJpY3RcclxuXHRcdFx0XHRyZXR1cm4ge3Njcm9sbFRvcDpkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wLHNjcm9sbExlZnQ6ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnR9O1xyXG5cdFx0XHR9IGVsc2UgaWYgKGRvY3VtZW50LmJvZHkpIHsvLyBhbGwgb3RoZXIgRXhwbG9yZXJzXHJcblx0XHRcdFx0cmV0dXJuIHtzY3JvbGxUb3A6ZG9jdW1lbnQuYm9keS5zY3JvbGxUb3Asc2Nyb2xsTGVmdDpkb2N1bWVudC5ib2R5LnNjcm9sbExlZnR9O1xyXG5cdFx0XHR9O1xyXG5cdFx0fTtcclxuXHRcclxuXHRcdGZ1bmN0aW9uIF9yZXNpemVfb3ZlcmxheSgpIHtcclxuXHRcdFx0d2luZG93SGVpZ2h0ID0gJCh3aW5kb3cpLmhlaWdodCgpLCB3aW5kb3dXaWR0aCA9ICQod2luZG93KS53aWR0aCgpO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYodHlwZW9mICRwcF9vdmVybGF5ICE9IFwidW5kZWZpbmVkXCIpICRwcF9vdmVybGF5LmhlaWdodCgkKGRvY3VtZW50KS5oZWlnaHQoKSkud2lkdGgod2luZG93V2lkdGgpO1xyXG5cdFx0fTtcclxuXHRcclxuXHRcdGZ1bmN0aW9uIF9pbnNlcnRfZ2FsbGVyeSgpe1xyXG5cdFx0XHRpZihpc1NldCAmJiBzZXR0aW5ncy5vdmVybGF5X2dhbGxlcnkgJiYgX2dldEZpbGVUeXBlKHBwX2ltYWdlc1tzZXRfcG9zaXRpb25dKT09XCJpbWFnZVwiKSB7XHJcblx0XHRcdFx0aXRlbVdpZHRoID0gNTIrNTsgLy8gNTIgYmVpZ24gdGhlIHRodW1iIHdpZHRoLCA1IGJlaW5nIHRoZSByaWdodCBtYXJnaW4uXHJcblx0XHRcdFx0bmF2V2lkdGggPSAoc2V0dGluZ3MudGhlbWUgPT0gXCJmYWNlYm9va1wiIHx8IHNldHRpbmdzLnRoZW1lID09IFwicHBfZGVmYXVsdFwiKSA/IDUwIDogMzA7IC8vIERlZmluZSB0aGUgYXJyb3cgd2lkdGggZGVwZW5kaW5nIG9uIHRoZSB0aGVtZVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGl0ZW1zUGVyUGFnZSA9IE1hdGguZmxvb3IoKHBwX2RpbWVuc2lvbnNbJ2NvbnRhaW5lcldpZHRoJ10gLSAxMDAgLSBuYXZXaWR0aCkgLyBpdGVtV2lkdGgpO1xyXG5cdFx0XHRcdGl0ZW1zUGVyUGFnZSA9IChpdGVtc1BlclBhZ2UgPCBwcF9pbWFnZXMubGVuZ3RoKSA/IGl0ZW1zUGVyUGFnZSA6IHBwX2ltYWdlcy5sZW5ndGg7XHJcblx0XHRcdFx0dG90YWxQYWdlID0gTWF0aC5jZWlsKHBwX2ltYWdlcy5sZW5ndGggLyBpdGVtc1BlclBhZ2UpIC0gMTtcclxuXHJcblx0XHRcdFx0Ly8gSGlkZSB0aGUgbmF2IGluIHRoZSBjYXNlIHRoZXJlJ3Mgbm8gbmVlZCBmb3IgbGlua3NcclxuXHRcdFx0XHRpZih0b3RhbFBhZ2UgPT0gMCl7XHJcblx0XHRcdFx0XHRuYXZXaWR0aCA9IDA7IC8vIE5vIG5hdiBtZWFucyBubyB3aWR0aCFcclxuXHRcdFx0XHRcdCRwcF9nYWxsZXJ5LmZpbmQoJy5wcF9hcnJvd19uZXh0LC5wcF9hcnJvd19wcmV2aW91cycpLmhpZGUoKTtcclxuXHRcdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRcdCRwcF9nYWxsZXJ5LmZpbmQoJy5wcF9hcnJvd19uZXh0LC5wcF9hcnJvd19wcmV2aW91cycpLnNob3coKTtcclxuXHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0XHRnYWxsZXJ5V2lkdGggPSBpdGVtc1BlclBhZ2UgKiBpdGVtV2lkdGg7XHJcblx0XHRcdFx0ZnVsbEdhbGxlcnlXaWR0aCA9IHBwX2ltYWdlcy5sZW5ndGggKiBpdGVtV2lkdGg7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gU2V0IHRoZSBwcm9wZXIgd2lkdGggdG8gdGhlIGdhbGxlcnkgaXRlbXNcclxuXHRcdFx0XHQkcHBfZ2FsbGVyeVxyXG5cdFx0XHRcdFx0LmNzcygnbWFyZ2luLWxlZnQnLC0oKGdhbGxlcnlXaWR0aC8yKSArIChuYXZXaWR0aC8yKSkpXHJcblx0XHRcdFx0XHQuZmluZCgnZGl2OmZpcnN0Jykud2lkdGgoZ2FsbGVyeVdpZHRoKzUpXHJcblx0XHRcdFx0XHQuZmluZCgndWwnKS53aWR0aChmdWxsR2FsbGVyeVdpZHRoKVxyXG5cdFx0XHRcdFx0LmZpbmQoJ2xpLnNlbGVjdGVkJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Z29Ub1BhZ2UgPSAoTWF0aC5mbG9vcihzZXRfcG9zaXRpb24vaXRlbXNQZXJQYWdlKSA8IHRvdGFsUGFnZSkgPyBNYXRoLmZsb29yKHNldF9wb3NpdGlvbi9pdGVtc1BlclBhZ2UpIDogdG90YWxQYWdlO1xyXG5cclxuXHRcdFx0XHQkLnByZXR0eVBob3RvLmNoYW5nZUdhbGxlcnlQYWdlKGdvVG9QYWdlKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQkcHBfZ2FsbGVyeV9saS5maWx0ZXIoJzplcSgnK3NldF9wb3NpdGlvbisnKScpLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHQkcHBfcGljX2hvbGRlci5maW5kKCcucHBfY29udGVudCcpLnVuYmluZCgnbW91c2VlbnRlciBtb3VzZWxlYXZlJyk7XHJcblx0XHRcdFx0Ly8gJHBwX2dhbGxlcnkuaGlkZSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHJcblx0XHRmdW5jdGlvbiBfYnVpbGRfb3ZlcmxheShjYWxsZXIpe1xyXG5cdFx0XHQvLyBJbmplY3QgU29jaWFsIFRvb2wgbWFya3VwIGludG8gR2VuZXJhbCBtYXJrdXBcclxuXHRcdFx0aWYoc2V0dGluZ3Muc29jaWFsX3Rvb2xzKVxyXG5cdFx0XHRcdGZhY2Vib29rX2xpa2VfbGluayA9IHNldHRpbmdzLnNvY2lhbF90b29scy5yZXBsYWNlKCd7bG9jYXRpb25faHJlZn0nLCBlbmNvZGVVUklDb21wb25lbnQobG9jYXRpb24uaHJlZikpOyBcclxuXHJcblx0XHRcdHNldHRpbmdzLm1hcmt1cCA9IHNldHRpbmdzLm1hcmt1cC5yZXBsYWNlKCd7cHBfc29jaWFsfScsJycpOyBcclxuXHRcdFx0XHJcblx0XHRcdCQoJ2JvZHknKS5hcHBlbmQoc2V0dGluZ3MubWFya3VwKTsgLy8gSW5qZWN0IHRoZSBtYXJrdXBcclxuXHRcdFx0XHJcblx0XHRcdCRwcF9waWNfaG9sZGVyID0gJCgnLnBwX3BpY19ob2xkZXInKSAsICRwcHQgPSAkKCcucHB0JyksICRwcF9vdmVybGF5ID0gJCgnZGl2LnBwX292ZXJsYXknKTsgLy8gU2V0IG15IGdsb2JhbCBzZWxlY3RvcnNcclxuXHRcdFx0XHJcblx0XHRcdC8vIEluamVjdCB0aGUgaW5saW5lIGdhbGxlcnkhXHJcblx0XHRcdGlmKGlzU2V0ICYmIHNldHRpbmdzLm92ZXJsYXlfZ2FsbGVyeSkge1xyXG5cdFx0XHRcdGN1cnJlbnRHYWxsZXJ5UGFnZSA9IDA7XHJcblx0XHRcdFx0dG9JbmplY3QgPSBcIlwiO1xyXG5cdFx0XHRcdGZvciAodmFyIGk9MDsgaSA8IHBwX2ltYWdlcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdFx0aWYoIXBwX2ltYWdlc1tpXS5tYXRjaCgvXFxiKGpwZ3xqcGVnfHBuZ3xnaWYpXFxiL2dpKSl7XHJcblx0XHRcdFx0XHRcdGNsYXNzbmFtZSA9ICdkZWZhdWx0JztcclxuXHRcdFx0XHRcdFx0aW1nX3NyYyA9ICcnO1xyXG5cdFx0XHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0XHRcdGNsYXNzbmFtZSA9ICcnO1xyXG5cdFx0XHRcdFx0XHRpbWdfc3JjID0gcHBfaW1hZ2VzW2ldO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0dG9JbmplY3QgKz0gXCI8bGkgY2xhc3M9J1wiK2NsYXNzbmFtZStcIic+PGEgaHJlZj0nIyc+PGltZyBzcmM9J1wiICsgaW1nX3NyYyArIFwiJyB3aWR0aD0nNTAnIGFsdD0nJyAvPjwvYT48L2xpPlwiO1xyXG5cdFx0XHRcdH07XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0dG9JbmplY3QgPSBzZXR0aW5ncy5nYWxsZXJ5X21hcmt1cC5yZXBsYWNlKC97Z2FsbGVyeX0vZyx0b0luamVjdCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0JHBwX3BpY19ob2xkZXIuZmluZCgnI3BwX2Z1bGxfcmVzJykuYWZ0ZXIodG9JbmplY3QpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdCRwcF9nYWxsZXJ5ID0gJCgnLnBwX3BpY19ob2xkZXIgLnBwX2dhbGxlcnknKSwgJHBwX2dhbGxlcnlfbGkgPSAkcHBfZ2FsbGVyeS5maW5kKCdsaScpOyAvLyBTZXQgdGhlIGdhbGxlcnkgc2VsZWN0b3JzXHJcblx0XHRcdFx0XHJcblx0XHRcdFx0JHBwX2dhbGxlcnkuZmluZCgnLnBwX2Fycm93X25leHQnKS5jbGljayhmdW5jdGlvbigpe1xyXG5cdFx0XHRcdFx0JC5wcmV0dHlQaG90by5jaGFuZ2VHYWxsZXJ5UGFnZSgnbmV4dCcpO1xyXG5cdFx0XHRcdFx0JC5wcmV0dHlQaG90by5zdG9wU2xpZGVzaG93KCk7XHJcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0JHBwX2dhbGxlcnkuZmluZCgnLnBwX2Fycm93X3ByZXZpb3VzJykuY2xpY2soZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRcdCQucHJldHR5UGhvdG8uY2hhbmdlR2FsbGVyeVBhZ2UoJ3ByZXZpb3VzJyk7XHJcblx0XHRcdFx0XHQkLnByZXR0eVBob3RvLnN0b3BTbGlkZXNob3coKTtcclxuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQkcHBfcGljX2hvbGRlci5maW5kKCcucHBfY29udGVudCcpLmhvdmVyKFxyXG5cdFx0XHRcdFx0ZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRcdFx0JHBwX3BpY19ob2xkZXIuZmluZCgnLnBwX2dhbGxlcnk6bm90KC5kaXNhYmxlZCknKS5mYWRlSW4oKTtcclxuXHRcdFx0XHRcdH0sXHJcblx0XHRcdFx0XHRmdW5jdGlvbigpe1xyXG5cdFx0XHRcdFx0XHQkcHBfcGljX2hvbGRlci5maW5kKCcucHBfZ2FsbGVyeTpub3QoLmRpc2FibGVkKScpLmZhZGVPdXQoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHRpdGVtV2lkdGggPSA1Mis1OyAvLyA1MiBiZWlnbiB0aGUgdGh1bWIgd2lkdGgsIDUgYmVpbmcgdGhlIHJpZ2h0IG1hcmdpbi5cclxuXHRcdFx0XHQkcHBfZ2FsbGVyeV9saS5lYWNoKGZ1bmN0aW9uKGkpe1xyXG5cdFx0XHRcdFx0JCh0aGlzKVxyXG5cdFx0XHRcdFx0XHQuZmluZCgnYScpXHJcblx0XHRcdFx0XHRcdC5jbGljayhmdW5jdGlvbigpe1xyXG5cdFx0XHRcdFx0XHRcdCQucHJldHR5UGhvdG8uY2hhbmdlUGFnZShpKTtcclxuXHRcdFx0XHRcdFx0XHQkLnByZXR0eVBob3RvLnN0b3BTbGlkZXNob3coKTtcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9O1xyXG5cdFx0XHRcclxuXHRcdFx0XHJcblx0XHRcdC8vIEluamVjdCB0aGUgcGxheS9wYXVzZSBpZiBpdCdzIGEgc2xpZGVzaG93XHJcblx0XHRcdGlmKHNldHRpbmdzLnNsaWRlc2hvdyl7XHJcblx0XHRcdFx0JHBwX3BpY19ob2xkZXIuZmluZCgnLnBwX25hdicpLnByZXBlbmQoJzxhIGhyZWY9XCIjXCIgY2xhc3M9XCJwcF9wbGF5XCI+UGxheTwvYT4nKVxyXG5cdFx0XHRcdCRwcF9waWNfaG9sZGVyLmZpbmQoJy5wcF9uYXYgLnBwX3BsYXknKS5jbGljayhmdW5jdGlvbigpe1xyXG5cdFx0XHRcdFx0JC5wcmV0dHlQaG90by5zdGFydFNsaWRlc2hvdygpO1xyXG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQkcHBfcGljX2hvbGRlci5hdHRyKCdjbGFzcycsJ3BwX3BpY19ob2xkZXIgJyArIHNldHRpbmdzLnRoZW1lKTsgLy8gU2V0IHRoZSBwcm9wZXIgdGhlbWVcclxuXHRcdFx0XHJcblx0XHRcdCRwcF9vdmVybGF5XHJcblx0XHRcdFx0LmNzcyh7XHJcblx0XHRcdFx0XHQnb3BhY2l0eSc6MCxcclxuXHRcdFx0XHRcdCdoZWlnaHQnOiQoZG9jdW1lbnQpLmhlaWdodCgpLFxyXG5cdFx0XHRcdFx0J3dpZHRoJzokKHdpbmRvdykud2lkdGgoKVxyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0XHQuYmluZCgnY2xpY2snLGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0XHRpZighc2V0dGluZ3MubW9kYWwpICQucHJldHR5UGhvdG8uY2xvc2UoKTtcclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdCQoJ2EucHBfY2xvc2UnKS5iaW5kKCdjbGljaycsZnVuY3Rpb24oKXsgJC5wcmV0dHlQaG90by5jbG9zZSgpOyByZXR1cm4gZmFsc2U7IH0pO1xyXG5cclxuXHJcblx0XHRcdGlmKHNldHRpbmdzLmFsbG93X2V4cGFuZCkge1xyXG5cdFx0XHRcdCQoJ2EucHBfZXhwYW5kJykuYmluZCgnY2xpY2snLGZ1bmN0aW9uKGUpe1xyXG5cdFx0XHRcdFx0Ly8gRXhwYW5kIHRoZSBpbWFnZVxyXG5cdFx0XHRcdFx0aWYoJCh0aGlzKS5oYXNDbGFzcygncHBfZXhwYW5kJykpe1xyXG5cdFx0XHRcdFx0XHQkKHRoaXMpLnJlbW92ZUNsYXNzKCdwcF9leHBhbmQnKS5hZGRDbGFzcygncHBfY29udHJhY3QnKTtcclxuXHRcdFx0XHRcdFx0ZG9yZXNpemUgPSBmYWxzZTtcclxuXHRcdFx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdFx0XHQkKHRoaXMpLnJlbW92ZUNsYXNzKCdwcF9jb250cmFjdCcpLmFkZENsYXNzKCdwcF9leHBhbmQnKTtcclxuXHRcdFx0XHRcdFx0ZG9yZXNpemUgPSB0cnVlO1xyXG5cdFx0XHRcdFx0fTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRcdF9oaWRlQ29udGVudChmdW5jdGlvbigpeyAkLnByZXR0eVBob3RvLm9wZW4oKTsgfSk7XHJcblx0XHRcdFxyXG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHRcclxuXHRcdFx0JHBwX3BpY19ob2xkZXIuZmluZCgnLnBwX3ByZXZpb3VzLCAucHBfbmF2IC5wcF9hcnJvd19wcmV2aW91cycpLmJpbmQoJ2NsaWNrJyxmdW5jdGlvbigpe1xyXG5cdFx0XHRcdCQucHJldHR5UGhvdG8uY2hhbmdlUGFnZSgncHJldmlvdXMnKTtcclxuXHRcdFx0XHQkLnByZXR0eVBob3RvLnN0b3BTbGlkZXNob3coKTtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHJcblx0XHRcdCRwcF9waWNfaG9sZGVyLmZpbmQoJy5wcF9uZXh0LCAucHBfbmF2IC5wcF9hcnJvd19uZXh0JykuYmluZCgnY2xpY2snLGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0JC5wcmV0dHlQaG90by5jaGFuZ2VQYWdlKCduZXh0Jyk7XHJcblx0XHRcdFx0JC5wcmV0dHlQaG90by5zdG9wU2xpZGVzaG93KCk7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdF9jZW50ZXJfb3ZlcmxheSgpOyAvLyBDZW50ZXIgaXRcclxuXHRcdH07XHJcblxyXG5cdFx0aWYoIXBwX2FscmVhZHlJbml0aWFsaXplZCAmJiBnZXRIYXNodGFnKCkpe1xyXG5cdFx0XHRwcF9hbHJlYWR5SW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gR3JhYiB0aGUgcmVsIGluZGV4IHRvIHRyaWdnZXIgdGhlIGNsaWNrIG9uIHRoZSBjb3JyZWN0IGVsZW1lbnRcclxuXHRcdFx0aGFzaEluZGV4ID0gZ2V0SGFzaHRhZygpO1xyXG5cdFx0XHRoYXNoUmVsID0gaGFzaEluZGV4O1xyXG5cdFx0XHRoYXNoSW5kZXggPSBoYXNoSW5kZXguc3Vic3RyaW5nKGhhc2hJbmRleC5pbmRleE9mKCcvJykrMSxoYXNoSW5kZXgubGVuZ3RoLTEpO1xyXG5cdFx0XHRoYXNoUmVsID0gaGFzaFJlbC5zdWJzdHJpbmcoMCxoYXNoUmVsLmluZGV4T2YoJy8nKSk7XHJcblxyXG5cdFx0XHQvLyBMaXR0bGUgdGltZW91dCB0byBtYWtlIHN1cmUgYWxsIHRoZSBwcmV0dHlQaG90byBpbml0aWFsaXplIHNjcmlwdHMgaGFzIGJlZW4gcnVuLlxyXG5cdFx0XHQvLyBVc2VmdWwgaW4gdGhlIGV2ZW50IHRoZSBwYWdlIGNvbnRhaW4gc2V2ZXJhbCBpbml0IHNjcmlwdHMuXHJcblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXsgJChcImFbXCIrcHBfc2V0dGluZ3MuaG9vaytcIl49J1wiK2hhc2hSZWwrXCInXTplcShcIitoYXNoSW5kZXgrXCIpXCIpLnRyaWdnZXIoJ2NsaWNrJyk7IH0sNTApO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gdGhpcy51bmJpbmQoJ2NsaWNrLnByZXR0eXBob3RvJykuYmluZCgnY2xpY2sucHJldHR5cGhvdG8nLCQucHJldHR5UGhvdG8uaW5pdGlhbGl6ZSk7IC8vIFJldHVybiB0aGUgalF1ZXJ5IG9iamVjdCBmb3IgY2hhaW5pbmcuIFRoZSB1bmJpbmQgbWV0aG9kIGlzIHVzZWQgdG8gYXZvaWQgY2xpY2sgY29uZmxpY3Qgd2hlbiB0aGUgcGx1Z2luIGlzIGNhbGxlZCBtb3JlIHRoYW4gb25jZVxyXG5cdH07XHJcblx0XHJcblx0ZnVuY3Rpb24gZ2V0SGFzaHRhZygpe1xyXG5cdFx0dmFyIHVybCA9IGxvY2F0aW9uLmhyZWY7XHJcblx0XHRoYXNodGFnID0gKHVybC5pbmRleE9mKCcjcHJldHR5UGhvdG8nKSAhPT0gLTEpID8gZGVjb2RlVVJJKHVybC5zdWJzdHJpbmcodXJsLmluZGV4T2YoJyNwcmV0dHlQaG90bycpKzEsdXJsLmxlbmd0aCkpIDogZmFsc2U7XHJcblx0XHRpZihoYXNodGFnKXsgIGhhc2h0YWcgPSBoYXNodGFnLnJlcGxhY2UoLzx8Pi9nLCcnKTsgfVxyXG5cdFx0cmV0dXJuIGhhc2h0YWc7XHJcblx0fTtcclxuXHRcclxuXHRmdW5jdGlvbiBzZXRIYXNodGFnKCl7XHJcblx0XHRpZih0eXBlb2YgdGhlUmVsID09ICd1bmRlZmluZWQnKSByZXR1cm47IC8vIHRoZVJlbCBpcyBzZXQgb24gbm9ybWFsIGNhbGxzLCBpdCdzIGltcG9zc2libGUgdG8gZGVlcGxpbmsgdXNpbmcgdGhlIEFQSVxyXG5cdFx0bG9jYXRpb24uaGFzaCA9IHRoZVJlbCArICcvJytyZWxfaW5kZXgrJy8nO1xyXG5cdH07XHJcblx0XHJcblx0ZnVuY3Rpb24gY2xlYXJIYXNodGFnKCl7XHJcblx0XHRpZiAoIGxvY2F0aW9uLmhyZWYuaW5kZXhPZignI3ByZXR0eVBob3RvJykgIT09IC0xICkgbG9jYXRpb24uaGFzaCA9IFwicHJldHR5UGhvdG9cIjtcclxuXHR9XHJcblx0XHJcblx0ZnVuY3Rpb24gZ2V0UGFyYW0obmFtZSx1cmwpe1xyXG5cdCAgbmFtZSA9IG5hbWUucmVwbGFjZSgvW1xcW10vLFwiXFxcXFxcW1wiKS5yZXBsYWNlKC9bXFxdXS8sXCJcXFxcXFxdXCIpO1xyXG5cdCAgdmFyIHJlZ2V4UyA9IFwiW1xcXFw/Jl1cIituYW1lK1wiPShbXiYjXSopXCI7XHJcblx0ICB2YXIgcmVnZXggPSBuZXcgUmVnRXhwKCByZWdleFMgKTtcclxuXHQgIHZhciByZXN1bHRzID0gcmVnZXguZXhlYyggdXJsICk7XHJcblx0ICByZXR1cm4gKCByZXN1bHRzID09IG51bGwgKSA/IFwiXCIgOiByZXN1bHRzWzFdO1xyXG5cdH1cclxuXHRcclxufSkoalF1ZXJ5KTtcclxuXHJcbnZhciBwcF9hbHJlYWR5SW5pdGlhbGl6ZWQgPSBmYWxzZTsgLy8gVXNlZCBmb3IgdGhlIGRlZXAgbGlua2luZyB0byBtYWtlIHN1cmUgbm90IHRvIGNhbGwgdGhlIHNhbWUgZnVuY3Rpb24gc2V2ZXJhbCB0aW1lcy5cclxuIl19
